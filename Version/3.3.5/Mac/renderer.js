/*! For license information please see renderer.js.LICENSE.txt */
(()=>{var e={8469:(e,t,n)=>{"use strict";const r=n(8734),i=e=>(2===e.code&&(e.message="Couldn't find the app"),e),o=async e=>{if("string"!=typeof e)throw new TypeError("Please supply an app name or bundle identifier");try{return await r.stdout("./main",[e],{cwd:__dirname})}catch(e){throw i(e)}};e.exports=o,e.exports.default=o,e.exports.sync=e=>{if("string"!=typeof e)throw new TypeError("Please supply an app name or bundle identifier");try{return r.sync("./main",[e],{cwd:__dirname}).stdout}catch(e){throw i(e)}}},9159:(e,t,n)=>{e.exports={default:n(1958),__esModule:!0}},9364:(e,t,n)=>{e.exports={default:n(5417),__esModule:!0}},6521:(e,t,n)=>{e.exports={default:n(9460),__esModule:!0}},9042:(e,t,n)=>{e.exports={default:n(2665),__esModule:!0}},1698:(e,t,n)=>{e.exports={default:n(8013),__esModule:!0}},4578:(e,t,n)=>{e.exports={default:n(292),__esModule:!0}},7133:(e,t,n)=>{e.exports={default:n(6171),__esModule:!0}},659:(e,t,n)=>{e.exports={default:n(8481),__esModule:!0}},6684:(e,t,n)=>{e.exports={default:n(5738),__esModule:!0}},5682:(e,t)=>{"use strict";t.Z=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},5256:(e,t,n)=>{"use strict";var r,i=(r=n(6521))&&r.__esModule?r:{default:r};t.Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},6218:(e,t,n)=>{"use strict";var r,i=(r=n(9159))&&r.__esModule?r:{default:r};t.Z=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},4122:(e,t,n)=>{"use strict";var r=s(n(7133)),i=s(n(9364)),o=s(n(7158));function s(e){return e&&e.__esModule?e:{default:e}}t.Z=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},9326:(e,t)=>{"use strict";t.Z=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},9002:(e,t,n)=>{"use strict";var r,i=(r=n(7158))&&r.__esModule?r:{default:r};t.Z=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},7158:(e,t,n)=>{"use strict";t.__esModule=!0;var r=s(n(6684)),i=s(n(659)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},8122:(e,t,n)=>{var r=n(2781),i=n(3837),o=n(9512);function s(e,t){if(!e)throw new Error("expected readStream");if(!e.readable)throw new Error("readStream must be readable");var n=new a(t);return e.pipe(n),n}function a(e){r.Transform.call(this,e),e=e||{},this._readableState.objectMode=!0,this._lineBuffer=[],this._keepEmptyLines=e.keepEmptyLines||!1,this._lastChunkEndedWithCR=!1;var t=this;this.on("pipe",(function(e){t.encoding||e instanceof r.Readable&&(t.encoding=e._readableState.encoding)}))}e.exports=function(t,n){return e.exports.createStream(t,n)},e.exports.createStream=function(e,t){return e?s(e,t):new a(t)},e.exports.createLineStream=function(e){return console.log("WARNING: byline#createLineStream is deprecated and will be removed soon"),s(e)},e.exports.LineStream=a,i.inherits(a,r.Transform),a.prototype._transform=function(e,t,n){t=t||"utf8",Buffer.isBuffer(e)&&("buffer"==t?(e=e.toString(),t="utf8"):e=e.toString(t)),this._chunkEncoding=t;var r=e.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/g);this._lastChunkEndedWithCR&&"\n"==e[0]&&r.shift(),this._lineBuffer.length>0&&(this._lineBuffer[this._lineBuffer.length-1]+=r[0],r.shift()),this._lastChunkEndedWithCR="\r"==e[e.length-1],this._lineBuffer=this._lineBuffer.concat(r),this._pushBuffer(t,1,n)},a.prototype._pushBuffer=function(e,t,n){for(;this._lineBuffer.length>t;){var r=this._lineBuffer.shift();if((this._keepEmptyLines||r.length>0)&&!this.push(this._reencode(r,e))){var i=this;return void o.setImmediate((function(){i._pushBuffer(e,t,n)}))}}n()},a.prototype._flush=function(e){this._pushBuffer(this._chunkEncoding,0,e)},a.prototype._reencode=function(e,t){return this.encoding&&this.encoding!=t?new Buffer(e,t).toString(this.encoding):this.encoding?e:new Buffer(e,t)}},5402:e=>{e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},8076:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n))e.push(i.apply(null,n));else if("object"===o)for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?e.exports=i:void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},4309:(e,t,n)=>{!function(e){function t(t,n,r){var i,o=t.getWrapperElement();return(i=o.appendChild(document.createElement("div"))).className=r?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof n?i.innerHTML=n:i.appendChild(n),e.addClass(o,"dialog-opened"),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",(function(r,i,o){o||(o={}),n(this,null);var s=t(this,r,o.bottom),a=!1,l=this;function c(t){if("string"==typeof t)h.value=t;else{if(a)return;a=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),l.focus(),o.onClose&&o.onClose(s)}}var u,h=s.getElementsByTagName("input")[0];return h?(h.focus(),o.value&&(h.value=o.value,!1!==o.selectValueOnOpen&&h.select()),o.onInput&&e.on(h,"input",(function(e){o.onInput(e,h.value,c)})),o.onKeyUp&&e.on(h,"keyup",(function(e){o.onKeyUp(e,h.value,c)})),e.on(h,"keydown",(function(t){o&&o.onKeyDown&&o.onKeyDown(t,h.value,c)||((27==t.keyCode||!1!==o.closeOnEnter&&13==t.keyCode)&&(h.blur(),e.e_stop(t),c()),13==t.keyCode&&i(h.value,t))})),!1!==o.closeOnBlur&&e.on(s,"focusout",(function(e){null!==e.relatedTarget&&c()}))):(u=s.getElementsByTagName("button")[0])&&(e.on(u,"click",(function(){c(),l.focus()})),!1!==o.closeOnBlur&&e.on(u,"blur",c),u.focus()),c})),e.defineExtension("openConfirm",(function(r,i,o){n(this,null);var s=t(this,r,o&&o.bottom),a=s.getElementsByTagName("button"),l=!1,c=this,u=1;function h(){l||(l=!0,e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s),c.focus())}a[0].focus();for(var p=0;p<a.length;++p){var d=a[p];!function(t){e.on(d,"click",(function(n){e.e_preventDefault(n),h(),t&&t(c)}))}(i[p]),e.on(d,"blur",(function(){--u,setTimeout((function(){u<=0&&h()}),200)})),e.on(d,"focus",(function(){++u}))}})),e.defineExtension("openNotification",(function(r,i){n(this,c);var o,s=t(this,r,i&&i.bottom),a=!1,l=i&&void 0!==i.duration?i.duration:5e3;function c(){a||(a=!0,clearTimeout(o),e.rmClass(s.parentNode,"dialog-opened"),s.parentNode.removeChild(s))}return e.on(s,"click",(function(t){e.e_preventDefault(t),c()})),l&&(o=setTimeout(c,l)),c}))}(n(4045))},9659:(e,t,n)=>{!function(e){"use strict";function t(e,t){if(this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var n=this;e.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}}e.showHint=function(e,t,n){if(!t)return e.showHint(n);n&&n.async&&(t.async=!0);var r={hint:t};if(n)for(var i in n)r[i]=n[i];return e.showHint(r)},e.defineExtension("showHint",(function(n){n=function(e,t,n){var r=e.options.hintOptions,i={};for(var o in l)i[o]=l[o];if(r)for(var o in r)void 0!==r[o]&&(i[o]=r[o]);if(n)for(var o in n)void 0!==n[o]&&(i[o]=n[o]);return i.hint.resolve&&(i.hint=i.hint.resolve(e,t)),i}(this,this.getCursor("start"),n);var r=this.listSelections();if(!(r.length>1)){if(this.somethingSelected()){if(!n.hint.supportsSelection)return;for(var i=0;i<r.length;i++)if(r[i].head.line!=r[i].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var o=this.state.completionActive=new t(this,n);o.options.hint&&(e.signal(this,"startCompletion",this),o.update(!0))}})),e.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var n=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},r=window.cancelAnimationFrame||clearTimeout;function i(e){return"string"==typeof e?e:e.text}function o(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function s(t,n){this.completion=t,this.data=n,this.picked=!1;var r=this,s=t.cm,a=s.getInputField().ownerDocument,l=a.defaultView||a.parentWindow,c=this.hints=a.createElement("ul"),u=t.cm.options.theme;c.className="CodeMirror-hints "+u,this.selectedHint=n.selectedHint||0;for(var h=n.list,p=0;p<h.length;++p){var d=c.appendChild(a.createElement("li")),m=h[p],f="CodeMirror-hint"+(p!=this.selectedHint?"":" CodeMirror-hint-active");null!=m.className&&(f=m.className+" "+f),d.className=f,m.render?m.render(d,n,m):d.appendChild(a.createTextNode(m.displayText||i(m))),d.hintId=p}var g=t.options.container||a.body,y=s.cursorCoords(t.options.alignWithWord?n.from:null),b=y.left,w=y.bottom,v=!0,C=0,S=0;if(g!==a.body){var E=-1!==["absolute","relative","fixed"].indexOf(l.getComputedStyle(g).position)?g:g.offsetParent,k=E.getBoundingClientRect(),R=a.body.getBoundingClientRect();C=k.left-R.left-E.scrollLeft,S=k.top-R.top-E.scrollTop}c.style.left=b-C+"px",c.style.top=w-S+"px";var x=l.innerWidth||Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),T=l.innerHeight||Math.max(a.body.offsetHeight,a.documentElement.offsetHeight);g.appendChild(c);var D,A=t.options.moveOnOverlap?c.getBoundingClientRect():new DOMRect,P=!!t.options.paddingForScrollbar&&c.scrollHeight>c.clientHeight+1;if(setTimeout((function(){D=s.getScrollInfo()})),A.bottom-T>0){var I=A.bottom-A.top;if(y.top-(y.bottom-A.top)-I>0)c.style.top=(w=y.top-I-S)+"px",v=!1;else if(I>T){c.style.height=T-5+"px",c.style.top=(w=y.bottom-A.top-S)+"px";var _=s.getCursor();n.from.ch!=_.ch&&(y=s.cursorCoords(_),c.style.left=(b=y.left-C)+"px",A=c.getBoundingClientRect())}}var N,O=A.right-x;if(O>0&&(A.right-A.left>x&&(c.style.width=x-5+"px",O-=A.right-A.left-x),c.style.left=(b=y.left-O-C)+"px"),P)for(var M=c.firstChild;M;M=M.nextSibling)M.style.paddingRight=s.display.nativeBarWidth+"px";s.addKeyMap(this.keyMap=function(e,t){var n={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close};/Mac/.test(navigator.platform)&&(n["Ctrl-P"]=function(){t.moveFocus(-1)},n["Ctrl-N"]=function(){t.moveFocus(1)});var r=e.options.customKeys,i=r?{}:n;function o(e,r){var o;o="string"!=typeof r?function(e){return r(e,t)}:n.hasOwnProperty(r)?n[r]:r,i[e]=o}if(r)for(var s in r)r.hasOwnProperty(s)&&o(s,r[s]);var a=e.options.extraKeys;if(a)for(var s in a)a.hasOwnProperty(s)&&o(s,a[s]);return i}(t,{moveFocus:function(e,t){r.changeActive(r.selectedHint+e,t)},setFocus:function(e){r.changeActive(e)},menuSize:function(){return r.screenAmount()},length:h.length,close:function(){t.close()},pick:function(){r.pick()},data:n})),t.options.closeOnUnfocus&&(s.on("blur",this.onBlur=function(){N=setTimeout((function(){t.close()}),100)}),s.on("focus",this.onFocus=function(){clearTimeout(N)})),s.on("scroll",this.onScroll=function(){var e=s.getScrollInfo(),n=s.getWrapperElement().getBoundingClientRect(),r=w+D.top-e.top,i=r-(l.pageYOffset||(a.documentElement||a.body).scrollTop);if(v||(i+=c.offsetHeight),i<=n.top||i>=n.bottom)return t.close();c.style.top=r+"px",c.style.left=b+D.left-e.left+"px"}),e.on(c,"dblclick",(function(e){var t=o(c,e.target||e.srcElement);t&&null!=t.hintId&&(r.changeActive(t.hintId),r.pick())})),e.on(c,"click",(function(e){var n=o(c,e.target||e.srcElement);n&&null!=n.hintId&&(r.changeActive(n.hintId),t.options.completeOnSingleClick&&r.pick())})),e.on(c,"mousedown",(function(){setTimeout((function(){s.focus()}),20)}));var B=this.getSelectedHintRange();return 0===B.from&&0===B.to||this.scrollToActive(),e.signal(n,"select",h[this.selectedHint],c.childNodes[this.selectedHint]),!0}function a(e,t,n,r){if(e.async)e(t,r,n);else{var i=e(t,n);i&&i.then?i.then(r):r(i)}}t.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,n){var r=t.list[n],o=this;this.cm.operation((function(){r.hint?r.hint(o.cm,t,r):o.cm.replaceRange(i(r),r.from||t.from,r.to||t.to,"complete"),e.signal(t,"pick",r),o.cm.scrollIntoView()})),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(r(this.debounce),this.debounce=0);var e=this.startPos;this.data&&(e=this.data.from);var t=this.cm.getCursor(),i=this.cm.getLine(t.line);if(t.line!=this.startPos.line||i.length-t.ch!=this.startLen-this.startPos.ch||t.ch<e.ch||this.cm.somethingSelected()||!t.ch||this.options.closeCharacters.test(i.charAt(t.ch-1)))this.close();else{var o=this;this.debounce=n((function(){o.update()})),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,n=++this.tick;a(this.options.hint,this.cm,this.options,(function(r){t.tick==n&&t.finishUpdate(r,e)}))}},finishUpdate:function(t,n){this.data&&e.signal(this.data,"update");var r=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(r&&1==t.list.length?this.pick(t,0):(this.widget=new s(this,t),e.signal(t,"shown")))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,n){if(t>=this.data.list.length?t=n?this.data.list.length-1:0:t<0&&(t=n?0:this.data.list.length-1),this.selectedHint!=t){var r=this.hints.childNodes[this.selectedHint];r&&(r.className=r.className.replace(" CodeMirror-hint-active","")),(r=this.hints.childNodes[this.selectedHint=t]).className+=" CodeMirror-hint-active",this.scrollToActive(),e.signal(this.data,"select",this.data.list[this.selectedHint],r)}},scrollToActive:function(){var e=this.getSelectedHintRange(),t=this.hints.childNodes[e.from],n=this.hints.childNodes[e.to],r=this.hints.firstChild;t.offsetTop<this.hints.scrollTop?this.hints.scrollTop=t.offsetTop-r.offsetTop:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+r.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var e=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-e),to:Math.min(this.data.list.length-1,this.selectedHint+e)}}},e.registerHelper("hint","auto",{resolve:function(t,n){var r,i=t.getHelpers(n,"hint");if(i.length){var o=function(e,t,n){var r=function(e,t){if(!e.somethingSelected())return t;for(var n=[],r=0;r<t.length;r++)t[r].supportsSelection&&n.push(t[r]);return n}(e,i);!function i(o){if(o==r.length)return t(null);a(r[o],e,n,(function(e){e&&e.list.length>0?t(e):i(o+1)}))}(0)};return o.async=!0,o.supportsSelection=!0,o}return(r=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:r})}:e.hint.anyword?function(t,n){return e.hint.anyword(t,n)}:function(){}}}),e.registerHelper("hint","fromList",(function(t,n){var r,i=t.getCursor(),o=t.getTokenAt(i),s=e.Pos(i.line,o.start),a=i;o.start<i.ch&&/\w/.test(o.string.charAt(i.ch-o.start-1))?r=o.string.substr(0,i.ch-o.start):(r="",s=i);for(var l=[],c=0;c<n.words.length;c++){var u=n.words[c];u.slice(0,r.length)==r&&l.push(u)}if(l.length)return{list:l,from:s,to:a}})),e.commands.autocomplete=e.showHint;var l={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};e.defineOption("hintOptions",null)}(n(4045))},8272:(e,t,n)=>{!function(e){"use strict";function t(t,n,r){this.orientation=n,this.scroll=r,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=t+"-"+n,this.inner=this.node.appendChild(document.createElement("div"));var i=this;function o(t){var n=e.wheelEventPixels(t)["horizontal"==i.orientation?"x":"y"],r=i.pos;i.moveTo(i.pos+n),i.pos!=r&&e.e_preventDefault(t)}e.on(this.inner,"mousedown",(function(t){if(1==t.which){e.e_preventDefault(t);var n="horizontal"==i.orientation?"pageX":"pageY",r=t[n],o=i.pos;e.on(document,"mousemove",a),e.on(document,"mouseup",s)}function s(){e.off(document,"mousemove",a),e.off(document,"mouseup",s)}function a(e){if(1!=e.which)return s();i.moveTo(o+(e[n]-r)*(i.total/i.size))}})),e.on(this.node,"click",(function(t){e.e_preventDefault(t);var n,r=i.inner.getBoundingClientRect();n="horizontal"==i.orientation?t.clientX<r.left?-1:t.clientX>r.right?1:0:t.clientY<r.top?-1:t.clientY>r.bottom?1:0,i.moveTo(i.pos+n*i.screen)})),e.on(this.node,"mousewheel",o),e.on(this.node,"DOMMouseScroll",o)}t.prototype.setPos=function(e,t){return e<0&&(e=0),e>this.total-this.screen&&(e=this.total-this.screen),!(!t&&e==this.pos||(this.pos=e,this.inner.style["horizontal"==this.orientation?"left":"top"]=e*(this.size/this.total)+"px",0))},t.prototype.moveTo=function(e){this.setPos(e)&&this.scroll(e,this.orientation)};function n(e,n,r){this.addClass=e,this.horiz=new t(e,"horizontal",r),n(this.horiz.node),this.vert=new t(e,"vertical",r),n(this.vert.node),this.width=null}t.prototype.update=function(e,t,n){var r=this.screen!=t||this.total!=e||this.size!=n;r&&(this.screen=t,this.total=e,this.size=n);var i=this.screen*(this.size/this.total);i<10&&(this.size-=10-i,i=10),this.inner.style["horizontal"==this.orientation?"width":"height"]=i+"px",this.setPos(this.pos,r)},n.prototype.update=function(e){if(null==this.width){var t=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;t&&(this.width=parseInt(t.height))}var n=this.width||0,r=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1;return this.vert.node.style.display=i?"block":"none",this.horiz.node.style.display=r?"block":"none",i&&(this.vert.update(e.scrollHeight,e.clientHeight,e.viewHeight-(r?n:0)),this.vert.node.style.bottom=r?n+"px":"0"),r&&(this.horiz.update(e.scrollWidth,e.clientWidth,e.viewWidth-(i?n:0)-e.barLeft),this.horiz.node.style.right=i?n+"px":"0",this.horiz.node.style.left=e.barLeft+"px"),{right:i?n:0,bottom:r?n:0}},n.prototype.setScrollTop=function(e){this.vert.setPos(e)},n.prototype.setScrollLeft=function(e){this.horiz.setPos(e)},n.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node),e.removeChild(this.vert.node)},e.scrollbarModel.simple=function(e,t){return new n("CodeMirror-simplescroll",e,t)},e.scrollbarModel.overlay=function(e,t){return new n("CodeMirror-overlayscroll",e,t)}}(n(4045))},9356:(e,t,n)=>{!function(e){"use strict";function t(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function n(e){return e.state.search||(e.state.search=new t)}function r(e){return"string"==typeof e&&e==e.toLowerCase()}function i(e,t,n){return e.getSearchCursor(t,n,{caseFold:r(t),multiline:!0})}function o(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r,selectValueOnOpen:!0,bottom:e.options.search.bottom}):i(prompt(n,r))}function s(e){return e.replace(/\\([nrt\\])/g,(function(e,t){return"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"==t?"\\":e}))}function a(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}else e=s(e);return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function l(e,t,n){t.queryText=n,t.query=a(n),e.removeOverlay(t.overlay,r(t.query)),t.overlay=function(e,t){return"string"==typeof e?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length||1,"searching";n?t.pos=n.index:t.skipToEnd()}}}(t.query,r(t.query)),e.addOverlay(t.overlay),e.showMatchesOnScrollbar&&(t.annotate&&(t.annotate.clear(),t.annotate=null),t.annotate=e.showMatchesOnScrollbar(t.query,r(t.query)))}function c(t,r,i,s){var a=n(t);if(a.query)return u(t,r);var c=t.getSelection()||a.lastQuery;if(c instanceof RegExp&&"x^"==c.source&&(c=null),i&&t.openDialog){var d=null,m=function(n,r){e.e_stop(r),n&&(n!=a.queryText&&(l(t,a,n),a.posFrom=a.posTo=t.getCursor()),d&&(d.style.opacity=1),u(t,r.shiftKey,(function(e,n){var r;n.line<3&&document.querySelector&&(r=t.display.wrapper.querySelector(".CodeMirror-dialog"))&&r.getBoundingClientRect().bottom-4>t.cursorCoords(n,"window").top&&((d=r).style.opacity=.4)})))};(function(e,t,n,r,i){e.openDialog(t,r,{value:n,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){h(e)},onKeyDown:i,bottom:e.options.search.bottom})})(t,p(t),c,m,(function(r,i){var o=e.keyName(r),s=t.getOption("extraKeys"),a=s&&s[o]||e.keyMap[t.getOption("keyMap")][o];"findNext"==a||"findPrev"==a||"findPersistentNext"==a||"findPersistentPrev"==a?(e.e_stop(r),l(t,n(t),i),t.execCommand(a)):"find"!=a&&"findPersistent"!=a||(e.e_stop(r),m(i,r))})),s&&c&&(l(t,a,c),u(t,r))}else o(t,p(t),"Search for:",c,(function(e){e&&!a.query&&t.operation((function(){l(t,a,e),a.posFrom=a.posTo=t.getCursor(),u(t,r)}))}))}function u(t,r,o){t.operation((function(){var s=n(t),a=i(t,s.query,r?s.posFrom:s.posTo);(a.find(r)||(a=i(t,s.query,r?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0))).find(r))&&(t.setSelection(a.from(),a.to()),t.scrollIntoView({from:a.from(),to:a.to()},20),s.posFrom=a.from(),s.posTo=a.to(),o&&o(a.from(),a.to()))}))}function h(e){e.operation((function(){var t=n(e);t.lastQuery=t.query,t.query&&(t.query=t.queryText=null,e.removeOverlay(t.overlay),t.annotate&&(t.annotate.clear(),t.annotate=null))}))}function p(e){return'<span class="CodeMirror-search-label">'+e.phrase("Search:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}function d(e,t,n){e.operation((function(){for(var r=i(e,t);r.findNext();)if("string"!=typeof t){var o=e.getRange(r.from(),r.to()).match(t);r.replace(n.replace(/\$(\d)/g,(function(e,t){return o[t]})))}else r.replace(n)}))}function m(e,t){if(!e.getOption("readOnly")){var r=e.getSelection()||n(e).lastQuery,l='<span class="CodeMirror-search-label">'+(t?e.phrase("Replace all:"):e.phrase("Replace:"))+"</span>";o(e,l+function(e){return' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">'+e.phrase("(Use /re/ syntax for regexp search)")+"</span>"}(e),l,r,(function(n){n&&(n=a(n),o(e,function(e){return'<span class="CodeMirror-search-label">'+e.phrase("With:")+'</span> <input type="text" style="width: 10em" class="CodeMirror-search-field"/>'}(e),e.phrase("Replace with:"),"",(function(r){if(r=s(r),t)d(e,n,r);else{h(e);var o=i(e,n,e.getCursor("from")),a=function(){var t,s=o.from();!(t=o.findNext())&&(o=i(e,n),!(t=o.findNext())||s&&o.from().line==s.line&&o.from().ch==s.ch)||(e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),function(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}(e,function(e){return'<span class="CodeMirror-search-label">'+e.phrase("Replace?")+"</span> <button>"+e.phrase("Yes")+"</button> <button>"+e.phrase("No")+"</button> <button>"+e.phrase("All")+"</button> <button>"+e.phrase("Stop")+"</button> "}(e),e.phrase("Replace?"),[function(){l(t)},a,function(){d(e,n,r)}]))},l=function(e){o.replace("string"==typeof n?r:r.replace(/\$(\d)/g,(function(t,n){return e[n]}))),a()};a()}})))}))}}e.defineOption("search",{bottom:!1}),e.commands.find=function(e){h(e),c(e)},e.commands.findPersistent=function(e){h(e),c(e,!1,!0)},e.commands.findPersistentNext=function(e){c(e,!1,!0,!0)},e.commands.findPersistentPrev=function(e){c(e,!0,!0,!0)},e.commands.findNext=c,e.commands.findPrev=function(e){c(e,!0)},e.commands.clearSearch=h,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}}(n(4045),n(9195),n(4309))},9195:(e,t,n)=>{!function(e){"use strict";var t,n,r=e.Pos;function i(e,t){for(var n=function(e){var t=e.flags;return null!=t?t:(e.ignoreCase?"i":"")+(e.global?"g":"")+(e.multiline?"m":"")}(e),r=n,i=0;i<t.length;i++)-1==r.indexOf(t.charAt(i))&&(r+=t.charAt(i));return n==r?e:new RegExp(e.source,r)}function o(e){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(e.source)}function s(e,t,n){t=i(t,"g");for(var o=n.line,s=n.ch,a=e.lastLine();o<=a;o++,s=0){t.lastIndex=s;var l=e.getLine(o),c=t.exec(l);if(c)return{from:r(o,c.index),to:r(o,c.index+c[0].length),match:c}}}function a(e,t,n){if(!o(t))return s(e,t,n);t=i(t,"gm");for(var a,l=1,c=n.line,u=e.lastLine();c<=u;){for(var h=0;h<l&&!(c>u);h++){var p=e.getLine(c++);a=null==a?p:a+"\n"+p}l*=2,t.lastIndex=n.ch;var d=t.exec(a);if(d){var m=a.slice(0,d.index).split("\n"),f=d[0].split("\n"),g=n.line+m.length-1,y=m[m.length-1].length;return{from:r(g,y),to:r(g+f.length-1,1==f.length?y+f[0].length:f[f.length-1].length),match:d}}}}function l(e,t,n){for(var r,i=0;i<=e.length;){t.lastIndex=i;var o=t.exec(e);if(!o)break;var s=o.index+o[0].length;if(s>e.length-n)break;(!r||s>r.index+r[0].length)&&(r=o),i=o.index+1}return r}function c(e,t,n){t=i(t,"g");for(var o=n.line,s=n.ch,a=e.firstLine();o>=a;o--,s=-1){var c=e.getLine(o),u=l(c,t,s<0?0:c.length-s);if(u)return{from:r(o,u.index),to:r(o,u.index+u[0].length),match:u}}}function u(e,t,n){if(!o(t))return c(e,t,n);t=i(t,"gm");for(var s,a=1,u=e.getLine(n.line).length-n.ch,h=n.line,p=e.firstLine();h>=p;){for(var d=0;d<a&&h>=p;d++){var m=e.getLine(h--);s=null==s?m:m+"\n"+s}a*=2;var f=l(s,t,u);if(f){var g=s.slice(0,f.index).split("\n"),y=f[0].split("\n"),b=h+g.length,w=g[g.length-1].length;return{from:r(b,w),to:r(b+y.length-1,1==y.length?w+y[0].length:y[y.length-1].length),match:f}}}}function h(e,t,n,r){if(e.length==t.length)return n;for(var i=0,o=n+Math.max(0,e.length-t.length);;){if(i==o)return i;var s=i+o>>1,a=r(e.slice(0,s)).length;if(a==n)return s;a>n?o=s:i=s+1}}function p(e,i,o,s){if(!i.length)return null;var a=s?t:n,l=a(i).split(/\r|\n\r?/);e:for(var c=o.line,u=o.ch,p=e.lastLine()+1-l.length;c<=p;c++,u=0){var d=e.getLine(c).slice(u),m=a(d);if(1==l.length){var f=m.indexOf(l[0]);if(-1==f)continue e;return o=h(d,m,f,a)+u,{from:r(c,h(d,m,f,a)+u),to:r(c,h(d,m,f+l[0].length,a)+u)}}var g=m.length-l[0].length;if(m.slice(g)==l[0]){for(var y=1;y<l.length-1;y++)if(a(e.getLine(c+y))!=l[y])continue e;var b=e.getLine(c+l.length-1),w=a(b),v=l[l.length-1];if(w.slice(0,v.length)==v)return{from:r(c,h(d,m,g,a)+u),to:r(c+l.length-1,h(b,w,v.length,a))}}}}function d(e,i,o,s){if(!i.length)return null;var a=s?t:n,l=a(i).split(/\r|\n\r?/);e:for(var c=o.line,u=o.ch,p=e.firstLine()-1+l.length;c>=p;c--,u=-1){var d=e.getLine(c);u>-1&&(d=d.slice(0,u));var m=a(d);if(1==l.length){var f=m.lastIndexOf(l[0]);if(-1==f)continue e;return{from:r(c,h(d,m,f,a)),to:r(c,h(d,m,f+l[0].length,a))}}var g=l[l.length-1];if(m.slice(0,g.length)==g){var y=1;for(o=c-l.length+1;y<l.length-1;y++)if(a(e.getLine(o+y))!=l[y])continue e;var b=e.getLine(c+1-l.length),w=a(b);if(w.slice(w.length-l[0].length)==l[0])return{from:r(c+1-l.length,h(b,w,b.length-l[0].length,a)),to:r(c,h(d,m,g.length,a))}}}}function m(e,t,n,o){var l;this.atOccurrence=!1,this.doc=e,n=n?e.clipPos(n):r(0,0),this.pos={from:n,to:n},"object"==typeof o?l=o.caseFold:(l=o,o=null),"string"==typeof t?(null==l&&(l=!1),this.matches=function(n,r){return(n?d:p)(e,t,r,l)}):(t=i(t,"gm"),o&&!1===o.multiline?this.matches=function(n,r){return(n?c:s)(e,t,r)}:this.matches=function(n,r){return(n?u:a)(e,t,r)})}String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},n=function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},n=function(e){return e}),m.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var n=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));n&&0==e.cmpPos(n.from,n.to);)t?n.from.ch?n.from=r(n.from.line,n.from.ch-1):n=n.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(r(n.from.line-1))):n.to.ch<this.doc.getLine(n.to.line).length?n.to=r(n.to.line,n.to.ch+1):n=n.to.line==this.doc.lastLine()?null:this.matches(t,r(n.to.line+1,0));if(n)return this.pos=n,this.atOccurrence=!0,this.pos.match||!0;var i=r(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:i,to:i},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,n){if(this.atOccurrence){var i=e.splitLines(t);this.doc.replaceRange(i,this.pos.from,this.pos.to,n),this.pos.to=r(this.pos.from.line+i.length-1,i[i.length-1].length+(1==i.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",(function(e,t,n){return new m(this.doc,e,t,n)})),e.defineDocExtension("getSearchCursor",(function(e,t,n){return new m(this,e,t,n)})),e.defineExtension("selectMatches",(function(t,n){for(var r=[],i=this.getSearchCursor(t,this.getCursor("from"),n);i.findNext()&&!(e.cmpPos(i.to(),this.getCursor("to"))>0);)r.push({anchor:i.from(),head:i.to()});r.length&&this.setSelections(r,0)}))}(n(4045))},8505:(e,t,n)=>{!function(e){"use strict";function t(e){e.state.markedSelection&&e.operation((function(){!function(e){if(!e.somethingSelected())return s(e);if(e.listSelections().length>1)return a(e);var t=e.getCursor("start"),n=e.getCursor("end"),r=e.state.markedSelection;if(!r.length)return o(e,t,n);var l=r[0].find(),c=r[r.length-1].find();if(!l||!c||n.line-t.line<=8||i(t,c.to)>=0||i(n,l.from)<=0)return a(e);for(;i(t,l.from)>0;)r.shift().clear(),l=r[0].find();for(i(t,l.from)<0&&(l.to.line-t.line<8?(r.shift().clear(),o(e,t,l.to,0)):o(e,t,l.from,0));i(n,c.to)<0;)r.pop().clear(),c=r[r.length-1].find();i(n,c.to)>0&&(n.line-c.from.line<8?(r.pop().clear(),o(e,c.from,n)):o(e,c.to,n))}(e)}))}function n(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation((function(){s(e)}))}e.defineOption("styleSelectedText",!1,(function(r,i,o){var l=o&&o!=e.Init;i&&!l?(r.state.markedSelection=[],r.state.markedSelectionStyle="string"==typeof i?i:"CodeMirror-selectedtext",a(r),r.on("cursorActivity",t),r.on("change",n)):!i&&l&&(r.off("cursorActivity",t),r.off("change",n),s(r),r.state.markedSelection=r.state.markedSelectionStyle=null)}));var r=e.Pos,i=e.cmpPos;function o(e,t,n,o){if(0!=i(t,n))for(var s=e.state.markedSelection,a=e.state.markedSelectionStyle,l=t.line;;){var c=l==t.line?t:r(l,0),u=l+8,h=u>=n.line,p=h?n:r(u,0),d=e.markText(c,p,{className:a});if(null==o?s.push(d):s.splice(o++,0,d),h)break;l=u}}function s(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function a(e){s(e);for(var t=e.listSelections(),n=0;n<t.length;n++)o(e,t[n].from(),t[n].to())}}(n(4045))},4045:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),r=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),s=r||i||o,a=s&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(e),c=l&&/Qt\/\d+\.\d+/.test(e),u=!o&&/Chrome\//.test(e),h=/Opera\//.test(e),p=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),m=/PhantomJS/.test(e),f=p&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),y=f||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=f||/Mac/.test(t),w=/\bCrOS\b/.test(e),v=/win/i.test(t),C=h&&e.match(/Version\/(\d*\.\d*)/);C&&(C=Number(C[1])),C&&C>=15&&(h=!1,l=!0);var S=b&&(c||h&&(null==C||C<12.11)),E=n||s&&a>=9;function k(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var R,x=function(e,t){var n=e.className,r=k(t).exec(n);if(r){var i=n.slice(r.index+r[0].length);e.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function T(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function D(e,t){return T(e).appendChild(t)}function A(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function P(e,t,n,r){var i=A(e,t,n,r);return i.setAttribute("role","presentation"),i}function I(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function _(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function N(e,t){var n=e.className;k(t).test(n)||(e.className+=(n?" ":"")+t)}function O(e,t){for(var n=e.split(" "),r=0;r<n.length;r++)n[r]&&!k(n[r]).test(t)&&(t+=" "+n[r]);return t}R=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var M=function(e){e.select()};function B(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,n){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===n&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function L(e,t,n,r,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,s=i||0;;){var a=e.indexOf("\t",o);if(a<0||a>=t)return s+(t-o);s+=a-o,s+=n-s%n,o=a+1}}f?M=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(M=function(e){try{e.select()}catch(e){}});var H=function(){this.id=null,this.f=null,this.time=0,this.handler=B(this.onTimeout,this)};function U(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}H.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},H.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var W={toString:function(){return"CodeMirror.Pass"}},$={scroll:!1},z={origin:"*mouse"},q={origin:"+move"};function j(e,t,n){for(var r=0,i=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var s=o-r;if(o==e.length||i+s>=t)return r+Math.min(s,t-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=t)return r}}var G=[""];function V(e){for(;G.length<=e;)G.push(K(G)+" ");return G[e]}function K(e){return e[e.length-1]}function Y(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function X(){}function Q(e,t){var n;return Object.create?n=Object.create(e):(X.prototype=e,n=new X),t&&F(t,n),n}var Z=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Z.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&J(e))||t.test(e):J(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ne=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function re(e){return e.charCodeAt(0)>=768&&ne.test(e)}function ie(e,t,n){for(;(n<0?t>0:t<e.length)&&re(e.charAt(t));)t+=n;return t}function oe(e,t,n){for(var r=t>n?-1:1;;){if(t==n)return t;var i=(t+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+r}}var se=null;function ae(e,t,n){var r;se=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==n?r=i:se=i),o.from==t&&(o.from!=o.to&&"before"!=n?r=i:se=i)}return null!=r?r:se}var le=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function o(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,a){var l,c="ltr"==a?"L":"R";if(0==s.length||"ltr"==a&&!e.test(s))return!1;for(var u=s.length,h=[],p=0;p<u;++p)h.push((l=s.charCodeAt(p))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var d=0,m=c;d<u;++d){var f=h[d];"m"==f?h[d]=m:m=f}for(var g=0,y=c;g<u;++g){var b=h[g];"1"==b&&"r"==y?h[g]="n":n.test(b)&&(y=b,"r"==b&&(h[g]="R"))}for(var w=1,v=h[0];w<u-1;++w){var C=h[w];"+"==C&&"1"==v&&"1"==h[w+1]?h[w]="1":","!=C||v!=h[w+1]||"1"!=v&&"n"!=v||(h[w]=v),v=C}for(var S=0;S<u;++S){var E=h[S];if(","==E)h[S]="N";else if("%"==E){var k=void 0;for(k=S+1;k<u&&"%"==h[k];++k);for(var R=S&&"!"==h[S-1]||k<u&&"1"==h[k]?"1":"N",x=S;x<k;++x)h[x]=R;S=k-1}}for(var T=0,D=c;T<u;++T){var A=h[T];"L"==D&&"1"==A?h[T]="L":n.test(A)&&(D=A)}for(var P=0;P<u;++P)if(t.test(h[P])){var I=void 0;for(I=P+1;I<u&&t.test(h[I]);++I);for(var _="L"==(P?h[P-1]:c),N=_==("L"==(I<u?h[I]:c))?_?"L":"R":c,O=P;O<I;++O)h[O]=N;P=I-1}for(var M,B=[],F=0;F<u;)if(r.test(h[F])){var L=F;for(++F;F<u&&r.test(h[F]);++F);B.push(new o(0,L,F))}else{var H=F,U=B.length,W="rtl"==a?1:0;for(++F;F<u&&"L"!=h[F];++F);for(var $=H;$<F;)if(i.test(h[$])){H<$&&(B.splice(U,0,new o(1,H,$)),U+=W);var z=$;for(++$;$<F&&i.test(h[$]);++$);B.splice(U,0,new o(2,z,$)),U+=W,H=$}else++$;H<F&&B.splice(U,0,new o(1,H,F))}return"ltr"==a&&(1==B[0].level&&(M=s.match(/^\s+/))&&(B[0].from=M[0].length,B.unshift(new o(0,0,M[0].length))),1==K(B).level&&(M=s.match(/\s+$/))&&(K(B).to-=M[0].length,B.push(new o(0,u-M[0].length,u)))),"rtl"==a?B.reverse():B}}();function ce(e,t){var n=e.order;return null==n&&(n=e.order=le(e.text,t)),n}var ue=[],he=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||ue).concat(n)}};function pe(e,t){return e._handlers&&e._handlers[t]||ue}function de(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var o=U(i,n);o>-1&&(r[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function me(e,t){var n=pe(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function fe(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),me(e,n||t.type,e,t),Ce(t)||t.codemirrorIgnore}function ge(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==U(n,t[r])&&n.push(t[r])}function ye(e,t){return pe(e,t).length>0}function be(e){e.prototype.on=function(e,t){he(this,e,t)},e.prototype.off=function(e,t){de(this,e,t)}}function we(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ve(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Ce(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Se(e){we(e),ve(e)}function Ee(e){return e.target||e.srcElement}function ke(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Re,xe,Te=function(){if(s&&a<9)return!1;var e=A("div");return"draggable"in e||"dragDrop"in e}();function De(e){if(null==Re){var t=A("span","​");D(e,A("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Re=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var n=Re?A("span","​"):A("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Ae(e){if(null!=xe)return xe;var t=D(e,document.createTextNode("AخA")),n=R(t,0,1).getBoundingClientRect(),r=R(t,1,2).getBoundingClientRect();return T(e),!(!n||n.left==n.right)&&(xe=r.right-n.right<3)}var Pe,Ie=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),t+=s+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},_e=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ne="oncopy"in(Pe=A("div"))||(Pe.setAttribute("oncopy","return;"),"function"==typeof Pe.oncopy),Oe=null;var Me={},Be={};function Fe(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Me[e]=t}function Le(e){if("string"==typeof e&&Be.hasOwnProperty(e))e=Be[e];else if(e&&"string"==typeof e.name&&Be.hasOwnProperty(e.name)){var t=Be[e.name];"string"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Le("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Le("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function He(e,t){t=Le(t);var n=Me[t.name];if(!n)return He(e,"text/plain");var r=n(e,t);if(Ue.hasOwnProperty(t.name)){var i=Ue[t.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r}var Ue={};function We(e,t){F(t,Ue.hasOwnProperty(e)?Ue[e]:Ue[e]={})}function $e(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function ze(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function qe(e,t,n){return!e.startState||e.startState(t,n)}var je=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ge(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(t<o){n=i;break}t-=o}return n.lines[t]}function Ve(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,(function(e){var o=e.text;i==n.line&&(o=o.slice(0,n.ch)),i==t.line&&(o=o.slice(t.ch)),r.push(o),++i})),r}function Ke(e,t,n){var r=[];return e.iter(t,n,(function(e){r.push(e.text)})),r}function Ye(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function Xe(e){if(null==e.parent)return null;for(var t=e.parent,n=U(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function Qe(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],o=i.height;if(t<o){e=i;continue e}t-=o,n+=i.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return n+s}function Ze(e,t){return t>=e.first&&t<e.first+e.size}function Je(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,n){if(void 0===n&&(n=null),!(this instanceof et))return new et(e,t,n);this.line=e,this.ch=t,this.sticky=n}function tt(e,t){return e.line-t.line||e.ch-t.ch}function nt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function rt(e){return et(e.line,e.ch)}function it(e,t){return tt(e,t)<0?t:e}function ot(e,t){return tt(e,t)<0?e:t}function st(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return et(e.first,0);var n=e.first+e.size-1;return t.line>n?et(n,Ge(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?et(e.line,t):n<0?et(e.line,0):e}(t,Ge(e,t.line).text.length)}function lt(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=at(e,t[r]);return n}je.prototype.eol=function(){return this.pos>=this.string.length},je.prototype.sol=function(){return this.pos==this.lineStart},je.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},je.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},je.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},je.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},je.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},je.prototype.skipToEnd=function(){this.pos=this.string.length},je.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},je.prototype.backUp=function(e){this.pos-=e},je.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=L(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?L(this.string,this.lineStart,this.tabSize):0)},je.prototype.indentation=function(){return L(this.string,null,this.tabSize)-(this.lineStart?L(this.string,this.lineStart,this.tabSize):0)},je.prototype.match=function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},je.prototype.current=function(){return this.string.slice(this.start,this.pos)},je.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},je.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},je.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var ct=function(e,t){this.state=e,this.lookAhead=t},ut=function(e,t,n,r){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function ht(e,t,n,r){var i=[e.state.modeGen],o={};vt(e,t.text,e.doc.mode,n,(function(e,t){return i.push(e,t)}),o,r);for(var s=n.state,a=function(r){n.baseTokens=i;var a=e.state.overlays[r],l=1,c=0;n.state=!0,vt(e,t.text,a.mode,n,(function(e,t){for(var n=l;c<e;){var r=i[l];r>e&&i.splice(l,1,e,i[l+1],r),l+=2,c=Math.min(e,r)}if(t)if(a.opaque)i.splice(n,l-n,e,"overlay "+t),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+t}}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function pt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=dt(e,Xe(t)),i=t.text.length>e.options.maxHighlightLength&&$e(e.doc.mode,r.state),o=ht(e,t,r);i&&(r.state=i),t.stateAfter=r.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function dt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return new ut(r,!0,t);var o=function(e,t,n){for(var r,i,o=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=o.first)return o.first;var l=Ge(o,a-1),c=l.stateAfter;if(c&&(!n||a+(c instanceof ct?c.lookAhead:0)<=o.modeFrontier))return a;var u=L(l.text,null,e.options.tabSize);(null==i||r>u)&&(i=a-1,r=u)}return i}(e,t,n),s=o>r.first&&Ge(r,o-1).stateAfter,a=s?ut.fromSaved(r,s,o):new ut(r,qe(r.mode),o);return r.iter(o,t,(function(n){mt(e,n.text,a);var r=a.line;n.stateAfter=r==t-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?a.save():null,a.nextLine()})),n&&(r.modeFrontier=a.line),a}function mt(e,t,n,r){var i=e.doc.mode,o=new je(t,e.options.tabSize,n);for(o.start=o.pos=r||0,""==t&&ft(i,n.state);!o.eol();)gt(i,o,n.state),o.start=o.pos}function ft(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=ze(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function gt(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=ze(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ut.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ut.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ut.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ut.fromSaved=function(e,t,n){return t instanceof ct?new ut(e,$e(e.mode,t.state),n,t.lookAhead):new ut(e,$e(e.mode,t),n)},ut.prototype.save=function(e){var t=!1!==e?$e(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ct(t,this.maxLookAhead):t};var yt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function bt(e,t,n,r){var i,o,s=e.doc,a=s.mode,l=Ge(s,(t=at(s,t)).line),c=dt(e,t.line,n),u=new je(l.text,e.options.tabSize,c);for(r&&(o=[]);(r||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=gt(a,u,c.state),r&&o.push(new yt(u,i,$e(s.mode,c.state)));return r?o:new yt(u,i,c.state)}function wt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[r])||(t[r]+=" "+n[2])}return e}function vt(e,t,n,r,i,o,s){var a=n.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,h=new je(t,e.options.tabSize,r),p=e.options.addModeClass&&[null];for(""==t&&wt(ft(n,r.state),o);!h.eol();){if(h.pos>e.options.maxHighlightLength?(a=!1,s&&mt(e,t,r,h.pos),h.pos=t.length,l=null):l=wt(gt(n,h,r.state,p),o),p){var d=p[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!a||u!=l){for(;c<h.start;)i(c=Math.min(h.start,c+5e3),u);u=l}h.start=h.pos}for(;c<h.pos;){var m=Math.min(h.pos,c+5e3);i(m,u),c=m}}var Ct=!1,St=!1;function Et(e,t,n){this.marker=e,this.from=t,this.to=n}function kt(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Rt(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function xt(e,t){if(t.full)return null;var n=Ze(e,t.from.line)&&Ge(e,t.from.line).markedSpans,r=Ze(e,t.to.line)&&Ge(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,o=t.to.ch,s=0==tt(t.from,t.to),a=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;if(null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==s.type&&(!n||!o.marker.insertLeft)){var a=null==o.to||(s.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Et(s,o.from,a?null:o.to))}}return r}(n,i,s),l=function(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var o=e[i],s=o.marker;if(null==o.to||(s.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==s.type&&(!n||o.marker.insertLeft)){var a=null==o.from||(s.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Et(s,a?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,s),c=1==t.text.length,u=K(t.text).length+(c?i:0);if(a)for(var h=0;h<a.length;++h){var p=a[h];if(null==p.to){var d=kt(l,p.marker);d?c&&(p.to=null==d.to?null:d.to+u):p.to=i}}if(l)for(var m=0;m<l.length;++m){var f=l[m];null!=f.to&&(f.to+=u),null==f.from?kt(a,f.marker)||(f.from=u,c&&(a||(a=[])).push(f)):(f.from+=u,c&&(a||(a=[])).push(f))}a&&(a=Tt(a)),l&&l!=a&&(l=Tt(l));var g=[a];if(!c){var y,b=t.text.length-2;if(b>0&&a)for(var w=0;w<a.length;++w)null==a[w].to&&(y||(y=[])).push(new Et(a[w].marker,null,null));for(var v=0;v<b;++v)g.push(y);g.push(l)}return g}function Tt(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Dt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function At(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Pt(e){return e.inclusiveLeft?-1:0}function It(e){return e.inclusiveRight?1:0}function _t(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),o=tt(r.from,i.from)||Pt(e)-Pt(t);return o?-o:tt(r.to,i.to)||It(e)-It(t)||t.id-e.id}function Nt(e,t){var n,r=St&&e.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(t?i.from:i.to)&&(!n||_t(n,i.marker)<0)&&(n=i.marker);return n}function Ot(e){return Nt(e,!0)}function Mt(e){return Nt(e,!1)}function Bt(e,t){var n,r=St&&e.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||_t(n,o.marker)<0)&&(n=o.marker)}return n}function Ft(e,t,n,r,i){var o=Ge(e,t),s=St&&o.markedSpans;if(s)for(var a=0;a<s.length;++a){var l=s[a];if(l.marker.collapsed){var c=l.marker.find(0),u=tt(c.from,n)||Pt(l.marker)-Pt(i),h=tt(c.to,r)||It(l.marker)-It(i);if(!(u>=0&&h<=0||u<=0&&h>=0)&&(u<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?tt(c.to,n)>=0:tt(c.to,n)>0)||u>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?tt(c.from,r)<=0:tt(c.from,r)<0)))return!0}}}function Lt(e){for(var t;t=Ot(e);)e=t.find(-1,!0).line;return e}function Ht(e,t){var n=Ge(e,t),r=Lt(n);return n==r?t:Xe(r)}function Ut(e,t){if(t>e.lastLine())return t;var n,r=Ge(e,t);if(!Wt(e,r))return t;for(;n=Mt(r);)r=n.find(1,!0).line;return Xe(r)+1}function Wt(e,t){var n=St&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&$t(e,t,r))return!0}}function $t(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return $t(e,r.line,kt(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if((i=t.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&$t(e,t,i))return!0}function zt(e){for(var t=0,n=(e=Lt(e)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var s=0;s<o.children.length;++s){var a=o.children[s];if(a==n)break;t+=a.height}return t}function qt(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=Ot(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=Mt(r);){var o=t.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function jt(e){var t=e.display,n=e.doc;t.maxLine=Ge(n,n.first),t.maxLineLength=qt(t.maxLine),t.maxLineChanged=!0,n.iter((function(e){var n=qt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)}))}var Gt=function(e,t,n){this.text=e,At(this,t),this.height=n?n(this):1};function Vt(e){e.parent=null,Dt(e)}Gt.prototype.lineNo=function(){return Xe(this)},be(Gt);var Kt={},Yt={};function Xt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Yt:Kt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Qt(e,t){var n=P("span",null,null,l?"padding-right: .1px":null),r={pre:P("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var o=i?t.rest[i-1]:t.line,s=void 0;r.pos=0,r.addToken=Jt,Ae(e.display.measure)&&(s=ce(o,e.doc.direction))&&(r.addToken=en(r.addToken,s)),r.map=[],nn(o,r,pt(e,o,t!=e.display.externalMeasured&&Xe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=O(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=O(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(De(e.display.measure))),0==i?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var a=r.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return me(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=O(r.pre.className,r.textClass||"")),r}function Zt(e){var t=A("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Jt(e,t,n,r,i,o,l){if(t){var c,u=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}(t,e.trailingSpace):t,h=e.cm.state.specialChars,p=!1;if(h.test(t)){c=document.createDocumentFragment();for(var d=0;;){h.lastIndex=d;var m=h.exec(t),f=m?m.index-d:t.length-d;if(f){var g=document.createTextNode(u.slice(d,d+f));s&&a<9?c.appendChild(A("span",[g])):c.appendChild(g),e.map.push(e.pos,e.pos+f,g),e.col+=f,e.pos+=f}if(!m)break;d+=f+1;var y=void 0;if("\t"==m[0]){var b=e.cm.options.tabSize,w=b-e.col%b;(y=c.appendChild(A("span",V(w),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),e.col+=w}else"\r"==m[0]||"\n"==m[0]?((y=c.appendChild(A("span","\r"==m[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",m[0]),e.col+=1):((y=e.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text",m[0]),s&&a<9?c.appendChild(A("span",[y])):c.appendChild(y),e.col+=1);e.map.push(e.pos,e.pos+1,y),e.pos++}}else e.col+=t.length,c=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,c),s&&a<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||r||i||p||o||l){var v=n||"";r&&(v+=r),i&&(v+=i);var C=A("span",[c],v,o);if(l)for(var S in l)l.hasOwnProperty(S)&&"style"!=S&&"class"!=S&&C.setAttribute(S,l[S]);return e.content.appendChild(C)}e.content.appendChild(c)}}function en(e,t){return function(n,r,i,o,s,a,l){i=i?i+" cm-force-border":"cm-force-border";for(var c=n.pos,u=c+r.length;;){for(var h=void 0,p=0;p<t.length&&!((h=t[p]).to>c&&h.from<=c);p++);if(h.to>=u)return e(n,r,i,o,s,a,l);e(n,r.slice(0,h.to-c),i,o,null,a,l),o=null,r=r.slice(h.to-c),c=h.to}}}function tn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function nn(e,t,n){var r=e.markedSpans,i=e.text,o=0;if(r)for(var s,a,l,c,u,h,p,d=i.length,m=0,f=1,g="",y=0;;){if(y==m){l=c=u=a="",p=null,h=null,y=1/0;for(var b=[],w=void 0,v=0;v<r.length;++v){var C=r[v],S=C.marker;if("bookmark"==S.type&&C.from==m&&S.widgetNode)b.push(S);else if(C.from<=m&&(null==C.to||C.to>m||S.collapsed&&C.to==m&&C.from==m)){if(null!=C.to&&C.to!=m&&y>C.to&&(y=C.to,c=""),S.className&&(l+=" "+S.className),S.css&&(a=(a?a+";":"")+S.css),S.startStyle&&C.from==m&&(u+=" "+S.startStyle),S.endStyle&&C.to==y&&(w||(w=[])).push(S.endStyle,C.to),S.title&&((p||(p={})).title=S.title),S.attributes)for(var E in S.attributes)(p||(p={}))[E]=S.attributes[E];S.collapsed&&(!h||_t(h.marker,S)<0)&&(h=C)}else C.from>m&&y>C.from&&(y=C.from)}if(w)for(var k=0;k<w.length;k+=2)w[k+1]==y&&(c+=" "+w[k]);if(!h||h.from==m)for(var R=0;R<b.length;++R)tn(t,0,b[R]);if(h&&(h.from||0)==m){if(tn(t,(null==h.to?d+1:h.to)-m,h.marker,null==h.from),null==h.to)return;h.to==m&&(h=!1)}}if(m>=d)break;for(var x=Math.min(d,y);;){if(g){var T=m+g.length;if(!h){var D=T>x?g.slice(0,x-m):g;t.addToken(t,D,s?s+l:l,u,m+D.length==y?c:"",a,p)}if(T>=x){g=g.slice(x-m),m=x;break}m=T,u=""}g=i.slice(o,o=n[f++]),s=Xt(n[f++],t.cm.options)}}else for(var A=1;A<n.length;A+=2)t.addToken(t,i.slice(o,o=n[A]),Xt(n[A+1],t.cm.options))}function rn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=Mt(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Xe(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Wt(e,t)}function on(e,t,n){for(var r,i=[],o=t;o<n;o=r){var s=new rn(e.doc,Ge(e.doc,o),o);r=o+s.size,i.push(s)}return i}var sn=null;var an=null;function ln(e,t){var n=pe(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);sn?r=sn.delayedCallbacks:an?r=an:(r=an=[],setTimeout(cn,0));for(var o=function(e){r.push((function(){return n[e].apply(null,i)}))},s=0;s<n.length;++s)o(s)}}function cn(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,r){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?dn(e,t):"gutter"==o?fn(e,t,n,r):"class"==o?mn(e,t):"widget"==o&&gn(e,t,r)}t.changes=null}function hn(e){return e.node==e.text&&(e.node=A("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function pn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Qt(e,t)}function dn(e,t){var n=t.text.className,r=pn(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,mn(e,t)):n&&(t.text.className=n)}function mn(e,t){(function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var r=hn(t);t.background=r.insertBefore(A("div",null,n),r.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?hn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function fn(e,t,n,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=hn(t);t.gutterBackground=A("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var s=hn(t),a=t.gutter=A("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(A("div",Je(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<e.display.gutterSpecs.length;++l){var c=e.display.gutterSpecs[l].className,u=o.hasOwnProperty(c)&&o[c];u&&a.appendChild(A("div",[u],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var r=k("CodeMirror-linewidget"),i=t.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&t.node.removeChild(i);bn(e,t,n)}function yn(e,t,n,r){var i=pn(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),mn(e,t),fn(e,t,n,r),bn(e,t,r),t.node}function bn(e,t,n){if(wn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)wn(e,t.rest[r],t,n,!1)}function wn(e,t,n,r,i){if(t.widgets)for(var o=hn(n),s=0,a=t.widgets;s<a.length;++s){var l=a[s],c=A("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),vn(l,c,n,r),e.display.input.setUneditable(c),i&&l.above?o.insertBefore(c,n.gutter||n.text):o.appendChild(c),ln(l,"redraw")}}function vn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function Cn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!I(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),D(t.display.measure,A("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Sn(e,t){for(var n=Ee(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function En(e){return e.lineSpace.offsetTop}function kn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Rn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=D(e.measure,A("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function xn(e){return 50-e.display.nativeBarWidth}function Tn(e){return e.display.scroller.clientWidth-xn(e)-e.display.barWidth}function Dn(e){return e.display.scroller.clientHeight-xn(e)-e.display.barHeight}function An(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(Xe(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Pn(e,t,n,r){return Nn(e,_n(e,t),n,r)}function In(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ur(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function _n(e,t){var n=Xe(t),r=In(e,n);r&&!r.text?r=null:r&&r.changes&&(un(e,r,n,or(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var n=Xe(t=Lt(t)),r=e.display.externalMeasured=new rn(e.doc,t,n);r.lineN=n;var i=r.built=Qt(e,r);return r.text=i.pre,D(e.display.lineMeasure,i.pre),r}(e,t));var i=An(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Nn(e,t,n,r,i){t.before&&(n=-1);var o,l=n+(r||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var r=e.options.lineWrapping,i=r&&Tn(e);if(!t.measure.heights||r&&t.measure.width!=i){var o=t.measure.heights=[];if(r){t.measure.width=i;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var l=s[a],c=s[a+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,r){var i,o=Bn(t.map,n,r),l=o.node,c=o.start,u=o.end,h=o.collapse;if(3==l.nodeType){for(var p=0;p<4;p++){for(;c&&re(t.line.text.charAt(o.coverStart+c));)--c;for(;o.coverStart+u<o.coverEnd&&re(t.line.text.charAt(o.coverStart+u));)++u;if((i=s&&a<9&&0==c&&u==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Fn(R(l,c,u).getClientRects(),r)).left||i.right||0==c)break;u=c,c-=1,h="right"}s&&a<11&&(i=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Oe)return Oe;var t=D(e,A("span","x")),n=t.getBoundingClientRect(),r=R(t,0,1).getBoundingClientRect();return Oe=Math.abs(n.left-r.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,i))}else{var d;c>0&&(h=r="right"),i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==r?d.length-1:0]:l.getBoundingClientRect()}if(s&&a<9&&!c&&(!i||!i.left&&!i.right)){var m=l.parentNode.getClientRects()[0];i=m?{left:m.left,right:m.left+ir(e.display),top:m.top,bottom:m.bottom}:Mn}for(var f=i.top-t.rect.top,g=i.bottom-t.rect.top,y=(f+g)/2,b=t.view.measure.heights,w=0;w<b.length-1&&!(y<b[w]);w++);var v=w?b[w-1]:0,C=b[w],S={left:("right"==h?i.right:i.left)-t.rect.left,right:("left"==h?i.left:i.right)-t.rect.left,top:v,bottom:C};return i.left||i.right||(S.bogus=!0),e.options.singleCursorHeightPerLine||(S.rtop=f,S.rbottom=g),S}(e,t,n,r)).bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var On,Mn={left:0,right:0,top:0,bottom:0};function Bn(e,t,n){for(var r,i,o,s,a,l,c=0;c<e.length;c+=3)if(a=e[c],l=e[c+1],t<a?(i=0,o=1,s="left"):t<l?o=1+(i=t-a):(c==e.length-3||t==l&&e[c+3]>t)&&(i=(o=l-a)-1,t>=l&&(s="right")),null!=i){if(r=e[c+2],a==l&&n==(r.insertLeft?"left":"right")&&(s=n),"left"==n&&0==i)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],s="left";if("right"==n&&i==l-a)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],s="right";break}return{node:r,start:i,end:o,collapse:s,coverStart:a,coverEnd:l}}function Fn(e,t){var n=Mn;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function Ln(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Hn(e){e.display.externalMeasure=null,T(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ln(e.display.view[t])}function Un(e){Hn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Wn(){return u&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function $n(){return u&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function zn(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=Cn(e.widgets[n]));return t}function qn(e,t,n,r,i){if(!i){var o=zn(t);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var s=zt(t);if("local"==r?s+=En(e.display):s-=e.display.viewOffset,"page"==r||"window"==r){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==r?0:$n());var l=a.left+("window"==r?0:Wn());n.left+=l,n.right+=l}return n.top+=s,n.bottom+=s,n}function jn(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=Wn(),i-=$n();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:r-s.left,top:i-s.top}}function Gn(e,t,n,r,i){return r||(r=Ge(e.doc,t.line)),qn(e,r,Pn(e,r,t.ch,i),n)}function Vn(e,t,n,r,i,o){function s(t,s){var a=Nn(e,i,t,s?"right":"left",o);return s?a.left=a.right:a.right=a.left,qn(e,r,a,n)}r=r||Ge(e.doc,t.line),i||(i=_n(e,r));var a=ce(r,e.doc.direction),l=t.ch,c=t.sticky;if(l>=r.text.length?(l=r.text.length,c="before"):l<=0&&(l=0,c="after"),!a)return s("before"==c?l-1:l,"before"==c);function u(e,t,n){return s(n?e-1:e,1==a[t].level!=n)}var h=ae(a,l,c),p=se,d=u(l,h,"before"==c);return null!=p&&(d.other=u(l,p,"before"!=c)),d}function Kn(e,t){var n=0;t=at(e.doc,t),e.options.lineWrapping||(n=ir(e.display)*t.ch);var r=Ge(e.doc,t.line),i=zt(r)+En(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Yn(e,t,n,r,i){var o=et(e,t,n);return o.xRel=i,r&&(o.outside=r),o}function Xn(e,t,n){var r=e.doc;if((n+=e.display.viewOffset)<0)return Yn(r.first,0,null,-1,-1);var i=Qe(r,n),o=r.first+r.size-1;if(i>o)return Yn(r.first+r.size-1,Ge(r,o).text.length,null,1,1);t<0&&(t=0);for(var s=Ge(r,i);;){var a=er(e,s,i,t,n),l=Bt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var c=l.find(1);if(c.line==i)return c;s=Ge(r,i=c.line)}}function Qn(e,t,n,r){r-=zn(t);var i=t.text.length,o=oe((function(t){return Nn(e,n,t-1).bottom<=r}),i,0);return{begin:o,end:i=oe((function(t){return Nn(e,n,t).top>r}),o,i)}}function Zn(e,t,n,r){return n||(n=_n(e,t)),Qn(e,t,n,qn(e,t,Nn(e,n,r),"line").top)}function Jn(e,t,n,r){return!(e.bottom<=n)&&(e.top>n||(r?e.left:e.right)>t)}function er(e,t,n,r,i){i-=zt(t);var o=_n(e,t),s=zn(t),a=0,l=t.text.length,c=!0,u=ce(t,e.doc.direction);if(u){var h=(e.options.lineWrapping?nr:tr)(e,t,n,o,u,r,i);a=(c=1!=h.level)?h.from:h.to-1,l=c?h.to:h.from-1}var p,d,m=null,f=null,g=oe((function(t){var n=Nn(e,o,t);return n.top+=s,n.bottom+=s,!!Jn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(m=t,f=n),!0)}),a,l),y=!1;if(f){var b=r-f.left<f.right-r,w=b==c;g=m+(w?0:1),d=w?"after":"before",p=b?f.left:f.right}else{c||g!=l&&g!=a||g++,d=0==g?"after":g==t.text.length?"before":Nn(e,o,g-(c?1:0)).bottom+s<=i==c?"after":"before";var v=Vn(e,et(n,g,d),"line",t,o);p=v.left,y=i<v.top?-1:i>=v.bottom?1:0}return Yn(n,g=ie(t.text,g,1),d,y,r-p)}function tr(e,t,n,r,i,o,s){var a=oe((function(a){var l=i[a],c=1!=l.level;return Jn(Vn(e,et(n,c?l.to:l.from,c?"before":"after"),"line",t,r),o,s,!0)}),0,i.length-1),l=i[a];if(a>0){var c=1!=l.level,u=Vn(e,et(n,c?l.from:l.to,c?"after":"before"),"line",t,r);Jn(u,o,s,!0)&&u.top>s&&(l=i[a-1])}return l}function nr(e,t,n,r,i,o,s){var a=Qn(e,t,r,s),l=a.begin,c=a.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var u=null,h=null,p=0;p<i.length;p++){var d=i[p];if(!(d.from>=c||d.to<=l)){var m=Nn(e,r,1!=d.level?Math.min(c,d.to)-1:Math.max(l,d.from)).right,f=m<o?o-m+1e9:m-o;(!u||h>f)&&(u=d,h=f)}}return u||(u=i[i.length-1]),u.from<l&&(u={from:l,to:u.to,level:u.level}),u.to>c&&(u={from:u.from,to:c,level:u.level}),u}function rr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==On){On=A("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)On.appendChild(document.createTextNode("x")),On.appendChild(A("br"));On.appendChild(document.createTextNode("x"))}D(e.measure,On);var n=On.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),T(e.measure),n||1}function ir(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=A("span","xxxxxxxxxx"),n=A("pre",[t],"CodeMirror-line-like");D(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function or(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,o=t.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var a=e.display.gutterSpecs[s].className;n[a]=o.offsetLeft+o.clientLeft+i,r[a]=o.clientWidth}return{fixedPos:sr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function sr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ar(e){var t=rr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/ir(e.display)-3);return function(i){if(Wt(e.doc,i))return 0;var o=0;if(i.widgets)for(var s=0;s<i.widgets.length;s++)i.widgets[s].height&&(o+=i.widgets[s].height);return n?o+(Math.ceil(i.text.length/r)||1)*t:o+t}}function lr(e){var t=e.doc,n=ar(e);t.iter((function(e){var t=n(e);t!=e.height&&Ye(e,t)}))}function cr(e,t,n,r){var i=e.display;if(!n&&"true"==Ee(t).getAttribute("cm-not-content"))return null;var o,s,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,s=t.clientY-a.top}catch(e){return null}var l,c=Xn(e,o,s);if(r&&c.xRel>0&&(l=Ge(e.doc,c.line).text).length==c.ch){var u=L(l,l.length,e.options.tabSize)-l.length;c=et(c.line,Math.max(0,Math.round((o-Rn(e.display).left)/ir(e.display))-u))}return c}function ur(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if((t-=n[r].size)<0)return r}function hr(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)St&&Ht(e.doc,t)<i.viewTo&&dr(e);else if(n<=i.viewFrom)St&&Ut(e.doc,n+r)>i.viewFrom?dr(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)dr(e);else if(t<=i.viewFrom){var o=mr(e,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):dr(e)}else if(n>=i.viewTo){var s=mr(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):dr(e)}else{var a=mr(e,t,t,-1),l=mr(e,n,n+r,1);a&&l?(i.view=i.view.slice(0,a.index).concat(on(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):dr(e)}var c=i.externalMeasured;c&&(n<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(i.externalMeasured=null))}function pr(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[ur(e,t)];if(null!=o.node){var s=o.changes||(o.changes=[]);-1==U(s,n)&&s.push(n)}}}function dr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function mr(e,t,n,r){var i,o=ur(e,t),s=e.display.view;if(!St||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var a=e.display.viewFrom,l=0;l<o;l++)a+=s[l].size;if(a!=t){if(r>0){if(o==s.length-1)return null;i=a+s[o].size-t,o++}else i=a-t;t+=i,n+=i}for(;Ht(e.doc,n)!=n;){if(o==(r<0?0:s.length-1))return null;n+=r*s[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function fr(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function gr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function yr(e,t){void 0===t&&(t=!0);for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),s=0;s<n.sel.ranges.length;s++)if(t||s!=n.sel.primIndex){var a=n.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var l=a.empty();(l||e.options.showCursorWhenSelecting)&&br(e,a.head,i),l||vr(e,a,o)}}return r}function br(e,t,n){var r=Vn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=n.appendChild(A("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=n.appendChild(A("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function wr(e,t){return e.top-t.top||e.left-t.left}function vr(e,t,n){var r=e.display,i=e.doc,o=document.createDocumentFragment(),s=Rn(e.display),a=s.left,l=Math.max(r.sizerWidth,Tn(e)-r.sizer.offsetLeft)-s.right,c="ltr"==i.direction;function u(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),o.appendChild(A("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?l-e:n)+"px;\n                             height: "+(r-t)+"px"))}function h(t,n,r){var o,s,h=Ge(i,t),p=h.text.length;function d(n,r){return Gn(e,et(t,n),"div",h,r)}function m(t,n,r){var i=Zn(e,h,null,t),o="ltr"==n==("after"==r)?"left":"right";return d("after"==r?i.begin:i.end-(/\s/.test(h.text.charAt(i.end-1))?2:1),o)[o]}var f=ce(h,i.direction);return function(e,t,n,r){if(!e)return r(t,n,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var s=e[o];(s.from<n&&s.to>t||t==n&&s.to==t)&&(r(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),i=!0)}i||r(t,n,"ltr")}(f,n||0,null==r?p:r,(function(e,t,i,h){var g="ltr"==i,y=d(e,g?"left":"right"),b=d(t-1,g?"right":"left"),w=null==n&&0==e,v=null==r&&t==p,C=0==h,S=!f||h==f.length-1;if(b.top-y.top<=3){var E=(c?v:w)&&S,k=(c?w:v)&&C?a:(g?y:b).left,R=E?l:(g?b:y).right;u(k,y.top,R-k,y.bottom)}else{var x,T,D,A;g?(x=c&&w&&C?a:y.left,T=c?l:m(e,i,"before"),D=c?a:m(t,i,"after"),A=c&&v&&S?l:b.right):(x=c?m(e,i,"before"):a,T=!c&&w&&C?l:y.right,D=!c&&v&&S?a:b.left,A=c?m(t,i,"after"):l),u(x,y.top,T-x,y.bottom),y.bottom<b.top&&u(a,y.bottom,null,b.top),u(D,b.top,A-D,b.bottom)}(!o||wr(y,o)<0)&&(o=y),wr(b,o)<0&&(o=b),(!s||wr(y,s)<0)&&(s=y),wr(b,s)<0&&(s=b)})),{start:o,end:s}}var p=t.from(),d=t.to();if(p.line==d.line)h(p.line,p.ch,d.ch);else{var m=Ge(i,p.line),f=Ge(i,d.line),g=Lt(m)==Lt(f),y=h(p.line,p.ch,g?m.text.length+1:null).end,b=h(d.line,g?0:null,d.ch).start;g&&(y.top<b.top-2?(u(y.right,y.top,null,y.bottom),u(a,b.top,b.left,b.bottom)):u(y.right,y.top,b.left-y.right,y.bottom)),y.bottom<b.top&&u(a,y.bottom,null,b.top)}n.appendChild(o)}function Cr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Rr(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Sr(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||kr(e))}function Er(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Rr(e))}),100)}function kr(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(me(e,"focus",e,t),e.state.focused=!0,N(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Cr(e))}function Rr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(me(e,"blur",e,t),e.state.focused=!1,x(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function xr(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],o=e.options.lineWrapping,l=void 0,c=0;if(!i.hidden){if(s&&a<8){var u=i.node.offsetTop+i.node.offsetHeight;l=u-n,n=u}else{var h=i.node.getBoundingClientRect();l=h.bottom-h.top,!o&&i.text.firstChild&&(c=i.text.firstChild.getBoundingClientRect().right-h.left-1)}var p=i.line.height-l;if((p>.005||p<-.005)&&(Ye(i.line,l),Tr(i.line),i.rest))for(var d=0;d<i.rest.length;d++)Tr(i.rest[d]);if(c>e.display.sizerWidth){var m=Math.ceil(c/ir(e.display));m>e.display.maxLineLength&&(e.display.maxLineLength=m,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function Tr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Dr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-En(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,o=Qe(t,r),s=Qe(t,i);if(n&&n.ensure){var a=n.ensure.from.line,l=n.ensure.to.line;a<o?(o=a,s=Qe(t,zt(Ge(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=s&&(o=Qe(t,zt(Ge(t,l))-e.wrapper.clientHeight),s=l)}return{from:o,to:Math.max(s,o+1)}}function Ar(e,t){var n=e.display,r=rr(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=Dn(e),s={};t.bottom-t.top>o&&(t.bottom=t.top+o);var a=e.doc.height+kn(n),l=t.top<r,c=t.bottom>a-r;if(t.top<i)s.scrollTop=l?0:t.top;else if(t.bottom>i+o){var u=Math.min(t.top,(c?a:t.bottom)-o);u!=i&&(s.scrollTop=u)}var h=e.options.fixedGutter?0:n.gutters.offsetWidth,p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-h,d=Tn(e)-n.gutters.offsetWidth,m=t.right-t.left>d;return m&&(t.right=t.left+d),t.left<10?s.scrollLeft=0:t.left<p?s.scrollLeft=Math.max(0,t.left+h-(m?0:10)):t.right>d+p-3&&(s.scrollLeft=t.right+(m?0:10)-d),s}function Pr(e,t){null!=t&&(Nr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Ir(e){Nr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function _r(e,t,n){null==t&&null==n||Nr(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Nr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Or(e,Kn(e,t.from),Kn(e,t.to),t.margin))}function Or(e,t,n,r){var i=Ar(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-r,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+r});_r(e,i.scrollLeft,i.scrollTop)}function Mr(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||li(e,{top:t}),Br(e,t,!0),n&&li(e),ri(e,100))}function Br(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Fr(e,t,n,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,hi(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Lr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+kn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+xn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Hr=function(e,t,n){this.cm=n;var r=this.vert=A("div",[A("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=A("div",[A("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,e(r),e(i),he(r,"scroll",(function(){r.clientHeight&&t(r.scrollTop,"vertical")})),he(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Hr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},Hr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Hr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Hr.prototype.zeroWidthHack=function(){var e=b&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},Hr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,(function r(){var i=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,r)}))},Hr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Ur=function(){};function Wr(e,t){t||(t=Lr(e));var n=e.display.barWidth,r=e.display.barHeight;$r(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&xr(e),$r(e,Lr(e)),n=e.display.barWidth,r=e.display.barHeight}function $r(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Ur.prototype.update=function(){return{bottom:0,right:0}},Ur.prototype.setScrollLeft=function(){},Ur.prototype.setScrollTop=function(){},Ur.prototype.clear=function(){};var zr={native:Hr,null:Ur};function qr(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&x(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new zr[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),he(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,n){"horizontal"==n?Fr(e,t):Mr(e,t)}),e),e.display.scrollbars.addClass&&N(e.display.wrapper,e.display.scrollbars.addClass)}var jr=0;function Gr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++jr},t=e.curOp,sn?sn.ops.push(t):t.ownsGroup=sn={ops:[t],delayedCallbacks:[]}}function Vr(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}(n)}finally{sn=null,t(n)}}(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Kr(t[n]);for(var r=0;r<t.length;r++)Yr(t[r]);for(var i=0;i<t.length;i++)Xr(t[i]);for(var o=0;o<t.length;o++)Qr(t[o]);for(var s=0;s<t.length;s++)Zr(t[s])}(e)}))}function Kr(e){var t=e.cm,n=t.display;(function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=xn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=xn(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&jt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new oi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Yr(e){e.updatedDisplay=e.mustUpdate&&si(e.cm,e.update)}function Xr(e){var t=e.cm,n=t.display;e.updatedDisplay&&xr(t),e.barMeasure=Lr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Pn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+xn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Tn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function Qr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Fr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==_();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Wr(t,e.barMeasure),e.updatedDisplay&&ui(t,e.barMeasure),e.selectionChanged&&Cr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Sr(e.cm)}function Zr(e){var t=e.cm,n=t.display,r=t.doc;e.updatedDisplay&&ai(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Br(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Fr(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!fe(e,"scrollCursorIntoView")){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;if(t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!m){var o=A("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-En(e.display))+"px;\n                         height: "+(t.bottom-t.top+xn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(i),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,n,r){var i;null==r&&(r=0),e.options.lineWrapping||t!=n||(n="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var s=!1,a=Vn(e,t),l=n&&n!=t?Vn(e,n):a,c=Ar(e,i={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-r,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+r}),u=e.doc.scrollTop,h=e.doc.scrollLeft;if(null!=c.scrollTop&&(Mr(e,c.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(s=!0)),null!=c.scrollLeft&&(Fr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-h)>1&&(s=!0)),!s)break}return i}(t,at(r,e.scrollToPos.from),at(r,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(i)for(var s=0;s<i.length;++s)i[s].lines.length||me(i[s],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&me(o[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&me(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Jr(e,t){if(e.curOp)return t();Gr(e);try{return t()}finally{Vr(e)}}function ei(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Gr(e);try{return t.apply(e,arguments)}finally{Vr(e)}}}function ti(e){return function(){if(this.curOp)return e.apply(this,arguments);Gr(this);try{return e.apply(this,arguments)}finally{Vr(this)}}}function ni(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Gr(t);try{return e.apply(this,arguments)}finally{Vr(t)}}}function ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,B(ii,e))}function ii(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,r=dt(e,t.highlightFrontier),i=[];t.iter(r.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(o){if(r.line>=e.display.viewFrom){var s=o.styles,a=o.text.length>e.options.maxHighlightLength?$e(t.mode,r.state):null,l=ht(e,o,r,!0);a&&(r.state=a),o.styles=l.styles;var c=o.styleClasses,u=l.classes;u?o.styleClasses=u:c&&(o.styleClasses=null);for(var h=!s||s.length!=o.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),p=0;!h&&p<s.length;++p)h=s[p]!=o.styles[p];h&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=e.options.maxHighlightLength&&mt(e,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(e,e.options.workDelay),!0})),t.highlightFrontier=r.line,t.modeFrontier=Math.max(t.modeFrontier,r.line),i.length&&Jr(e,(function(){for(var t=0;t<i.length;t++)pr(e,i[t],"text")}))}}var oi=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Dr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Tn(e),this.force=n,this.dims=or(e),this.events=[]};function si(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return dr(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==fr(e))return!1;pi(e)&&(dr(e),t.dims=or(e));var i=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),s=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(i,n.viewTo)),St&&(o=Ht(e.doc,o),s=Ut(e.doc,s));var a=o!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function(e,t,n){var r=e.display;0==r.view.length||t>=r.viewTo||n<=r.viewFrom?(r.view=on(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=on(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(ur(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(on(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ur(e,n)))),r.viewTo=n})(e,o,s),n.viewOffset=zt(Ge(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var c=fr(e);if(!a&&0==c&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var u=function(e){if(e.hasFocus())return null;var t=_();if(!t||!I(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&I(e.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(e);return c>4&&(n.lineDiv.style.display="none"),function(e,t,n){var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,s=o.firstChild;function a(t){var n=t.nextSibling;return l&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var c=r.view,u=r.viewFrom,h=0;h<c.length;h++){var p=c[h];if(p.hidden);else if(p.node&&p.node.parentNode==o){for(;s!=p.node;)s=a(s);var d=i&&null!=t&&t<=u&&p.lineNumber;p.changes&&(U(p.changes,"gutter")>-1&&(d=!1),un(e,p,u,n)),d&&(T(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(Je(e.options,u)))),s=p.node.nextSibling}else{var m=yn(e,p,u,n);o.insertBefore(m,s)}u+=p.size}for(;s;)s=a(s)}(e,n.updateLineNumbers,t.dims),c>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=_()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&I(document.body,e.anchorNode)&&I(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(u),T(n.cursorDiv),T(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,ri(e,400)),n.updateLineNumbers=null,!0}function ai(e,t){for(var n=t.viewport,r=!0;;r=!1){if(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Tn(e))r&&(t.visible=Dr(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+kn(e.display)-Dn(e),n.top)}),t.visible=Dr(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!si(e,t))break;xr(e);var i=Lr(e);gr(e),Wr(e,i),ui(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function li(e,t){var n=new oi(e,t);if(si(e,n)){xr(e),ai(e,n);var r=Lr(e);gr(e),Wr(e,r),ui(e,r),n.finish()}}function ci(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function ui(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+xn(e)+"px"}function hi(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=sr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=r+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var a=n[s].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function pi(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Je(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(A("div",[A("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,s=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-s)+1,r.lineNumWidth=r.lineNumInnerWidth+s,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ci(e.display),!0}return!1}function di(e,t){for(var n=[],r=!1,i=0;i<e.length;i++){var o=e[i],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;r=!0}n.push({className:o,style:s})}return t&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function mi(e){var t=e.gutters,n=e.gutterSpecs;T(t),e.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,s=i.style,a=t.appendChild(A("div",null,"CodeMirror-gutter "+o));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==o&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",ci(e)}function fi(e){mi(e.display),hr(e),hi(e)}function gi(e,t,r,i){var o=this;this.input=r,o.scrollbarFiller=A("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=A("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=P("div",null,"CodeMirror-code"),o.selectionDiv=A("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=A("div",null,"CodeMirror-cursors"),o.measure=A("div",null,"CodeMirror-measure"),o.lineMeasure=A("div",null,"CodeMirror-measure"),o.lineSpace=P("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var c=P("div",[o.lineSpace],"CodeMirror-lines");o.mover=A("div",[c],null,"position: relative"),o.sizer=A("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=A("div",null,null,"position: absolute; height: 50px; width: 1px;"),o.gutters=A("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=A("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=A("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),s&&a<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&y||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=di(i.gutters,i.lineNumbers),mi(o),r.init(o)}oi.prototype.signal=function(e,t){ye(e,t)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)me.apply(null,this.events[e])};var yi=0,bi=null;function wi(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function vi(e){var t=wi(e);return t.x*=bi,t.y*=bi,t}function Ci(e,t){var r=wi(t),i=r.x,o=r.y,s=e.display,a=s.scroller,c=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(i&&c||o&&u){if(o&&b&&l)e:for(var p=t.target,d=s.view;p!=a;p=p.parentNode)for(var m=0;m<d.length;m++)if(d[m].node==p){e.display.currentWheelTarget=p;break e}if(i&&!n&&!h&&null!=bi)return o&&u&&Mr(e,Math.max(0,a.scrollTop+o*bi)),Fr(e,Math.max(0,a.scrollLeft+i*bi)),(!o||o&&u)&&we(t),void(s.wheelStartX=null);if(o&&null!=bi){var f=o*bi,g=e.doc.scrollTop,y=g+s.wrapper.clientHeight;f<0?g=Math.max(0,g+f-50):y=Math.min(e.doc.height,y+f+50),li(e,{top:g,bottom:y})}yi<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=i,s.wheelDY=o,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(bi=(bi*yi+n)/(yi+1),++yi)}}),200)):(s.wheelDX+=i,s.wheelDY+=o))}}s?bi=-.53:n?bi=15:u?bi=-.7:p&&(bi=-1/3);var Si=function(e,t){this.ranges=e,this.primIndex=t};Si.prototype.primary=function(){return this.ranges[this.primIndex]},Si.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(!nt(n.anchor,r.anchor)||!nt(n.head,r.head))return!1}return!0},Si.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Ei(rt(this.ranges[t].anchor),rt(this.ranges[t].head));return new Si(e,this.primIndex)},Si.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Si.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(tt(t,r.from())>=0&&tt(e,r.to())<=0)return n}return-1};var Ei=function(e,t){this.anchor=e,this.head=t};function ki(e,t,n){var r=e&&e.options.selectionsMayTouch,i=t[n];t.sort((function(e,t){return tt(e.from(),t.from())})),n=U(t,i);for(var o=1;o<t.length;o++){var s=t[o],a=t[o-1],l=tt(a.to(),s.from());if(r&&!s.empty()?l>0:l>=0){var c=ot(a.from(),s.from()),u=it(a.to(),s.to()),h=a.empty()?s.from()==s.head:a.from()==a.head;o<=n&&--n,t.splice(--o,2,new Ei(h?u:c,h?c:u))}}return new Si(t,n)}function Ri(e,t){return new Si([new Ei(e,t||e)],0)}function xi(e){return e.text?et(e.from.line+e.text.length-1,K(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Ti(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return xi(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=xi(t).ch-t.to.ch),et(n,r)}function Di(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Ei(Ti(i.anchor,t),Ti(i.head,t)))}return ki(e.cm,n,e.sel.primIndex)}function Ai(e,t,n){return e.line==t.line?et(n.line,e.ch-t.ch+n.ch):et(n.line+(e.line-t.line),e.ch)}function Pi(e){e.doc.mode=He(e.options,e.doc.modeOption),Ii(e)}function Ii(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,ri(e,100),e.state.modeGen++,e.curOp&&hr(e)}function _i(e,t){return 0==t.from.ch&&0==t.to.ch&&""==K(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ni(e,t,n,r){function i(e){return n?n[e]:null}function o(e,n,i){(function(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Dt(e),At(e,n);var i=r?r(e):1;i!=e.height&&Ye(e,i)})(e,n,i,r),ln(e,"change",e,t)}function s(e,t){for(var n=[],o=e;o<t;++o)n.push(new Gt(c[o],i(o),r));return n}var a=t.from,l=t.to,c=t.text,u=Ge(e,a.line),h=Ge(e,l.line),p=K(c),d=i(c.length-1),m=l.line-a.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(_i(e,t)){var f=s(0,c.length-1);o(h,h.text,d),m&&e.remove(a.line,m),f.length&&e.insert(a.line,f)}else if(u==h)if(1==c.length)o(u,u.text.slice(0,a.ch)+p+u.text.slice(l.ch),d);else{var g=s(1,c.length-1);g.push(new Gt(p+u.text.slice(l.ch),d,r)),o(u,u.text.slice(0,a.ch)+c[0],i(0)),e.insert(a.line+1,g)}else if(1==c.length)o(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),i(0)),e.remove(a.line+1,m);else{o(u,u.text.slice(0,a.ch)+c[0],i(0)),o(h,p+h.text.slice(l.ch),d);var y=s(1,c.length-1);m>1&&e.remove(a.line+1,m-1),e.insert(a.line+1,y)}ln(e,"change",e,t)}function Oi(e,t,n){!function e(r,i,o){if(r.linked)for(var s=0;s<r.linked.length;++s){var a=r.linked[s];if(a.doc!=i){var l=o&&a.sharedHist;n&&!l||(t(a.doc,l),e(a.doc,r,l))}}}(e,null,!0)}function Mi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,lr(e),Pi(e),Bi(e),e.options.lineWrapping||jt(e),e.options.mode=t.modeOption,hr(e)}function Bi(e){("rtl"==e.doc.direction?N:x)(e.display.lineDiv,"CodeMirror-rtl")}function Fi(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Li(e,t){var n={from:rt(t.from),to:xi(t),text:Ve(e,t.from,t.to)};return zi(e,n,t.from.line,t.to.line+1),Oi(e,(function(e){return zi(e,n,t.from.line,t.to.line+1)}),!0),n}function Hi(e){for(;e.length&&K(e).ranges;)e.pop()}function Ui(e,t,n,r){var i=e.history;i.undone.length=0;var o,s,a=+new Date;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Hi(e.done),K(e.done)):e.done.length&&!K(e.done).ranges?K(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),K(e.done)):void 0}(i,i.lastOp==r)))s=K(o.changes),0==tt(t.from,t.to)&&0==tt(t.from,s.to)?s.to=xi(t):o.changes.push(Li(e,t));else{var l=K(i.done);for(l&&l.ranges||$i(e.sel,i.done),o={changes:[Li(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,s||me(e,"historyAdded")}function Wi(e,t,n,r){var i=e.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,K(i.done),t))?i.done[i.done.length-1]=t:$i(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Hi(i.undone)}function $i(e,t){var n=K(t);n&&n.ranges&&n.equals(e)||t.push(e)}function zi(e,t,n,r){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),(function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=n.markedSpans),++o}))}function qi(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ji(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(qi(n[i]));return r}(e,t),r=xt(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],s=r[i];if(o&&s)e:for(var a=0;a<s.length;++a){for(var l=s[a],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue e;o.push(l)}else s&&(n[i]=s)}return n}function Gi(e,t,n){for(var r=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)r.push(n?Si.prototype.deepCopy.call(o):o);else{var s=o.changes,a=[];r.push({changes:a});for(var l=0;l<s.length;++l){var c=s[l],u=void 0;if(a.push({from:c.from,to:c.to,text:c.text}),t)for(var h in c)(u=h.match(/^spans_(\d+)$/))&&U(t,Number(u[1]))>-1&&(K(a)[h]=c[h],delete c[h])}}}return r}function Vi(e,t,n,r){if(r){var i=e.anchor;if(n){var o=tt(t,i)<0;o!=tt(n,i)<0?(i=t,t=n):o!=tt(t,n)<0&&(t=n)}return new Ei(i,t)}return new Ei(n||t,t)}function Ki(e,t,n,r,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Ji(e,new Si([Vi(e.sel.primary(),t,n,i)],0),r)}function Yi(e,t,n){for(var r=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=Vi(e.sel.ranges[o],t[o],null,i);Ji(e,ki(e.cm,r,e.sel.primIndex),n)}function Xi(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Ji(e,ki(e.cm,i,e.sel.primIndex),r)}function Qi(e,t,n,r){Ji(e,Ri(t,n),r)}function Zi(e,t,n){var r=e.history.done,i=K(r);i&&i.ranges?(r[r.length-1]=t,eo(e,t,n)):Ji(e,t,n)}function Ji(e,t,n){eo(e,t,n),Wi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function eo(e,t,n){(ye(e,"beforeSelectionChange")||e.cm&&ye(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new Ei(at(e,t[n].anchor),at(e,t[n].head))},origin:n&&n.origin};return me(e,"beforeSelectionChange",e,r),e.cm&&me(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?ki(e.cm,r.ranges,r.ranges.length-1):t}(e,t,n));var r=n&&n.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);to(e,ro(e,t,r,!0)),n&&!1===n.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||Ir(e.cm)}function to(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ge(e.cm)),ln(e,"cursorActivity",e))}function no(e){to(e,ro(e,e.sel,null,!1))}function ro(e,t,n,r){for(var i,o=0;o<t.ranges.length;o++){var s=t.ranges[o],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],l=oo(e,s.anchor,a&&a.anchor,n,r),c=oo(e,s.head,a&&a.head,n,r);(i||l!=s.anchor||c!=s.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Ei(l,c))}return i?ki(e.cm,i,t.primIndex):t}function io(e,t,n,r,i){var o=Ge(e,t.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var a=o.markedSpans[s],l=a.marker,c="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,u="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(c?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(u?a.to>=t.ch:a.to>t.ch))){if(i&&(me(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(!l.atomic)continue;if(n){var h=l.find(r<0?1:-1),p=void 0;if((r<0?u:c)&&(h=so(e,h,-r,h&&h.line==t.line?o:null)),h&&h.line==t.line&&(p=tt(h,n))&&(r<0?p<0:p>0))return io(e,h,t,r,i)}var d=l.find(r<0?-1:1);return(r<0?c:u)&&(d=so(e,d,r,d.line==t.line?o:null)),d?io(e,d,t,r,i):null}}return t}function oo(e,t,n,r,i){var o=r||1;return io(e,t,n,o,i)||!i&&io(e,t,n,o,!0)||io(e,t,n,-o,i)||!i&&io(e,t,n,-o,!0)||(e.cantEdit=!0,et(e.first,0))}function so(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?at(e,et(t.line-1)):null:n>0&&t.ch==(r||Ge(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+n)}function ao(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),$)}function lo(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,o){t&&(r.from=at(e,t)),n&&(r.to=at(e,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),me(e,"beforeChange",e,r),e.cm&&me(e.cm,"beforeChange",e.cm,r),r.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function co(e,t,n){if(e.cm){if(!e.cm.curOp)return ei(e.cm,co)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"))||(t=lo(e,t,!0))){var r=Ct&&!n&&function(e,t,n){var r=null;if(e.iter(t.line,n.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&-1!=U(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:t,to:n}],o=0;o<r.length;++o)for(var s=r[o],a=s.find(0),l=0;l<i.length;++l){var c=i[l];if(!(tt(c.to,a.from)<0||tt(c.from,a.to)>0)){var u=[l,1],h=tt(c.from,a.from),p=tt(c.to,a.to);(h<0||!s.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(p>0||!s.inclusiveRight&&!p)&&u.push({from:a.to,to:c.to}),i.splice.apply(i,u),l+=u.length-3}}return i}(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)uo(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text,origin:t.origin});else uo(e,t)}}function uo(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var n=Di(e,t);Ui(e,t,n,e.cm?e.cm.curOp.id:NaN),mo(e,t,n,xt(e,t));var r=[];Oi(e,(function(e,n){n||-1!=U(r,e.history)||(bo(e.history,t),r.push(e.history)),mo(e,t,null,xt(e,t))}))}}function ho(e,t,n){var r=e.cm&&e.cm.state.suppressEdits;if(!r||n){for(var i,o=e.history,s=e.sel,a="undo"==t?o.done:o.undone,l="undo"==t?o.undone:o.done,c=0;c<a.length&&(i=a[c],n?!i.ranges||i.equals(e.sel):i.ranges);c++);if(c!=a.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(r)return void a.push(i);break}if($i(i,l),n&&!i.equals(e.sel))return void Ji(e,i,{clearRedo:!1});s=i}var u=[];$i(s,l),l.push({changes:u,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var h=ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"),p=function(n){var r=i.changes[n];if(r.origin=t,h&&!lo(e,r,!1))return a.length=0,{};u.push(Li(e,r));var o=n?Di(e,r):K(a);mo(e,r,o,ji(e,r)),!n&&e.cm&&e.cm.scrollIntoView({from:r.from,to:xi(r)});var s=[];Oi(e,(function(e,t){t||-1!=U(s,e.history)||(bo(e.history,r),s.push(e.history)),mo(e,r,null,ji(e,r))}))},d=i.changes.length-1;d>=0;--d){var m=p(d);if(m)return m.v}}}}function po(e,t){if(0!=t&&(e.first+=t,e.sel=new Si(Y(e.sel.ranges,(function(e){return new Ei(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){hr(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)pr(e.cm,r,"gutter")}}function mo(e,t,n,r){if(e.cm&&!e.cm.curOp)return ei(e.cm,mo)(e,t,n,r);if(t.to.line<e.first)po(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);po(e,i),t={from:et(e.first,0),to:et(t.to.line+i,t.to.ch),text:[K(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:et(o,Ge(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ve(e,t.from,t.to),n||(n=Di(e,t)),e.cm?function(e,t,n){var r=e.doc,i=e.display,o=t.from,s=t.to,a=!1,l=o.line;e.options.lineWrapping||(l=Xe(Lt(Ge(r,o.line))),r.iter(l,s.line+1,(function(e){if(e==i.maxLine)return a=!0,!0}))),r.sel.contains(t.from,t.to)>-1&&ge(e),Ni(r,t,n,ar(e)),e.options.lineWrapping||(r.iter(l,o.line+t.text.length,(function(e){var t=qt(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,r=t-1;r>n;r--){var i=Ge(e,r).stateAfter;if(i&&(!(i instanceof ct)||r+i.lookAhead<t)){n=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(r,o.line),ri(e,400);var c=t.text.length-(s.line-o.line)-1;t.full?hr(e):o.line!=s.line||1!=t.text.length||_i(e.doc,t)?hr(e,o.line,s.line+1,c):pr(e,o.line,"text");var u=ye(e,"changes"),h=ye(e,"change");if(h||u){var p={from:o,to:s,text:t.text,removed:t.removed,origin:t.origin};h&&ln(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}(e.cm,t,r):Ni(e,t,r),eo(e,n,$),e.cantEdit&&oo(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function fo(e,t,n,r,i){var o;r||(r=n),tt(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof t&&(t=e.splitLines(t)),co(e,{from:n,to:r,text:t,origin:i})}function go(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function yo(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i],s=!0;if(o.ranges){o.copied||((o=e[i]=o.deepCopy()).copied=!0);for(var a=0;a<o.ranges.length;a++)go(o.ranges[a].anchor,t,n,r),go(o.ranges[a].head,t,n,r)}else{for(var l=0;l<o.changes.length;++l){var c=o.changes[l];if(n<c.from.line)c.from=et(c.from.line+r,c.from.ch),c.to=et(c.to.line+r,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,i+1),i=0)}}}function bo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;yo(e.done,n,r,i),yo(e.undone,n,r,i)}function wo(e,t,n,r){var i=t,o=t;return"number"==typeof t?o=Ge(e,st(e,t)):i=Xe(t),null==i?null:(r(o,i)&&e.cm&&pr(e.cm,i,n),o)}function vo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Co(e){this.children=e;for(var t=0,n=0,r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}Ei.prototype.from=function(){return ot(this.anchor,this.head)},Ei.prototype.to=function(){return it(this.anchor,this.head)},Ei.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},vo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,Vt(i),ln(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Co.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var o=Math.min(t,i-e),s=r.height;if(r.removeInner(e,o),this.height-=s-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(t-=o))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof vo))){var a=[];this.collapse(a),this.children=[new vo(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<=o){if(i.insertInner(e,t,n),i.lines&&i.lines.length>50){for(var s=i.lines.length%25+25,a=s;a<i.lines.length;){var l=new vo(i.lines.slice(a,a+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,s),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new Co(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var n=U(e.parent.children,e);e.parent.children.splice(n+1,0,t)}else{var r=new Co(e.children);r.parent=e,e.children=[r,t],e=r}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(e<o){var s=Math.min(t,o-e);if(i.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=o}}};var So=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=e,this.node=t};function Eo(e,t,n){zt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Pr(e,n)}So.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,r=Xe(n);if(null!=r&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var o=Cn(this);Ye(n,Math.max(0,n.height-o)),e&&(Jr(e,(function(){Eo(e,n,-o),pr(e,r,"widget")})),ln(e,"lineWidgetCleared",e,this,r))}},So.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=Cn(this)-t;i&&(Wt(this.doc,r)||Ye(r,r.height+i),n&&Jr(n,(function(){n.curOp.forceUpdate=!0,Eo(n,r,i),ln(n,"lineWidgetChanged",n,e,Xe(r))})))},be(So);var ko=0,Ro=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ko};function xo(e,t,n,r,i){if(r&&r.shared)return function(e,t,n,r,i){(r=F(r)).shared=!1;var o=[xo(e,t,n,r,i)],s=o[0],a=r.widgetNode;return Oi(e,(function(e){a&&(r.widgetNode=a.cloneNode(!0)),o.push(xo(e,at(e,t),at(e,n),r,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;s=K(o)})),new To(o,s)}(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return ei(e.cm,xo)(e,t,n,r,i);var o=new Ro(e,i),s=tt(t,n);if(r&&F(r,o,!1),s>0||0==s&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=P("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ft(e,t.line,t,n,o)||t.line!=n.line&&Ft(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");St=!0}o.addToHistory&&Ui(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,(function(e){c&&o.collapsed&&!c.options.lineWrapping&&Lt(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&Ye(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Et(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&e.iter(t.line,n.line+1,(function(t){Wt(e,t)&&Ye(t,0)})),o.clearOnEnter&&he(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(Ct=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++ko,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)hr(c,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var u=t.line;u<=n.line;u++)pr(c,u,"text");o.atomic&&no(c.doc),ln(c,"markerAdded",c,o)}return o}Ro.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Gr(e),ye(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var s=this.lines[o],a=kt(s.markedSpans,this);e&&!this.collapsed?pr(e,Xe(s),"text"):e&&(null!=a.to&&(i=Xe(s)),null!=a.from&&(r=Xe(s))),s.markedSpans=Rt(s.markedSpans,a),null==a.from&&this.collapsed&&!Wt(this.doc,s)&&e&&Ye(s,rr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var c=Lt(this.lines[l]),u=qt(c);u>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&hr(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&no(e.doc)),e&&ln(e,"markerCleared",e,this,r,i),t&&Vr(e),this.parent&&this.parent.clear()}},Ro.prototype.find=function(e,t){var n,r;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],s=kt(o.markedSpans,this);if(null!=s.from&&(n=et(t?o:Xe(o),s.from),-1==e))return n;if(null!=s.to&&(r=et(t?o:Xe(o),s.to),1==e))return r}return n&&{from:n,to:r}},Ro.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,r=this.doc.cm;t&&r&&Jr(r,(function(){var i=t.line,o=Xe(t.line),s=In(r,o);if(s&&(Ln(s),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!Wt(n.doc,i)&&null!=n.height){var a=n.height;n.height=null;var l=Cn(n)-a;l&&Ye(i,i.height+l)}ln(r,"markerChanged",r,e)}))},Ro.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=U(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Ro.prototype.detachLine=function(e){if(this.lines.splice(U(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(Ro);var To=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function Do(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),(function(e){return e.parent}))}function Ao(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];Oi(n.primary.doc,(function(e){return r.push(e)}));for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==U(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}To.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ln(this,"clear")}},To.prototype.find=function(e,t){return this.primary.find(e,t)},be(To);var Po=0,Io=function(e,t,n,r,i){if(!(this instanceof Io))return new Io(e,t,n,r,i);null==n&&(n=0),Co.call(this,[new vo([new Gt("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=et(n,0);this.sel=Ri(o),this.history=new Fi(null),this.id=++Po,this.modeOption=t,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Ni(this,{from:o,to:o,text:e}),Ji(this,Ri(o),$)};Io.prototype=Q(Co.prototype,{constructor:Io,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Ke(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:ni((function(e){var t=et(this.first,0),n=this.first+this.size-1;co(this,{from:t,to:et(n,Ge(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&_r(this.cm,0,0),Ji(this,Ri(t),$)})),replaceRange:function(e,t,n,r){fo(this,e,t=at(this,t),n=n?at(this,n):t,r)},getRange:function(e,t,n){var r=Ve(this,at(this,e),at(this,t));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Ze(this,e))return Ge(this,e)},getLineNumber:function(e){return Xe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ge(this,e)),Lt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ni((function(e,t,n){Qi(this,at(this,"number"==typeof e?et(e,t||0):e),null,n)})),setSelection:ni((function(e,t,n){Qi(this,at(this,e),at(this,t||e),n)})),extendSelection:ni((function(e,t,n){Ki(this,at(this,e),t&&at(this,t),n)})),extendSelections:ni((function(e,t){Yi(this,lt(this,e),t)})),extendSelectionsBy:ni((function(e,t){Yi(this,lt(this,Y(this.sel.ranges,e)),t)})),setSelections:ni((function(e,t,n){if(e.length){for(var r=[],i=0;i<e.length;i++)r[i]=new Ei(at(this,e[i].anchor),at(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ji(this,ki(this.cm,r,t),n)}})),addSelection:ni((function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Ei(at(this,e),at(this,t||e))),Ji(this,ki(this.cm,r,r.length-1),n)})),getSelection:function(e){for(var t,n=this.sel.ranges,r=0;r<n.length;r++){var i=Ve(this,n[r].from(),n[r].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=Ve(this,n[r].from(),n[r].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[r]=i}return t},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:ni((function(e,t,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var s=i.ranges[o];r[o]={from:s.from(),to:s.to(),text:this.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&function(e,t,n){for(var r=[],i=et(e.first,0),o=i,s=0;s<t.length;s++){var a=t[s],l=Ai(a.from,i,o),c=Ai(xi(a),i,o);if(i=a.to,o=c,"around"==n){var u=e.sel.ranges[s],h=tt(u.head,u.anchor)<0;r[s]=new Ei(h?c:l,h?l:c)}else r[s]=new Ei(l,l)}return new Si(r,e.sel.primIndex)}(this,r,t),l=r.length-1;l>=0;l--)co(this,r[l]);a?Zi(this,a):this.cm&&Ir(this.cm)})),undo:ni((function(){ho(this,"undo")})),redo:ni((function(){ho(this,"redo")})),undoSelection:ni((function(){ho(this,"undo",!0)})),redoSelection:ni((function(){ho(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new Fi(this.history),Oi(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Gi(this.history.done),undone:Gi(this.history.undone)}},setHistory:function(e){var t=this.history=new Fi(this.history);t.done=Gi(e.done.slice(0),null,!0),t.undone=Gi(e.undone.slice(0),null,!0)},setGutterMarker:ni((function(e,t,n){return wo(this,e,"gutter",(function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&te(r)&&(e.gutterMarkers=null),!0}))})),clearGutter:ni((function(e){var t=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[e]&&wo(t,n,"gutter",(function(){return n.gutterMarkers[e]=null,te(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Ze(this,e))return null;if(t=e,!(e=Ge(this,e)))return null}else if(null==(t=Xe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:ni((function(e,t,n){return wo(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[r]){if(k(n).test(e[r]))return!1;e[r]+=" "+n}else e[r]=n;return!0}))})),removeLineClass:ni((function(e,t,n){return wo(this,e,"gutter"==t?"gutter":"class",(function(e){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[r];if(!i)return!1;if(null==n)e[r]=null;else{var o=i.match(k(n));if(!o)return!1;var s=o.index+o[0].length;e[r]=i.slice(0,o.index)+(o.index&&s!=i.length?" ":"")+i.slice(s)||null}return!0}))})),addLineWidget:ni((function(e,t,n){return function(e,t,n,r){var i=new So(e,n,r),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),wo(e,t,"widget",(function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!Wt(e,t)){var r=zt(t)<e.scrollTop;Ye(t,t.height+Cn(i)),r&&Pr(o,i.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,i,"number"==typeof t?t:Xe(t)),i}(this,e,t,n)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return xo(this,at(this,e),at(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return xo(this,e=at(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=Ge(this,(e=at(this,e)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=at(this,e),t=at(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,(function(o){var s=o.markedSpans;if(s)for(var a=0;a<s.length;a++){var l=s[a];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i})),r},getAllMarks:function(){var e=[];return this.iter((function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)})),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+r;if(o>e)return t=e,!0;e-=o,++n})),at(this,et(n,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+n})),t},copy:function(e){var t=new Io(Ke(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new Io(Ke(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),o=e.clipPos(i.from),s=e.clipPos(i.to);if(tt(o,s)){var a=xo(e,o,s,r.primary,r.primary.type);r.markers.push(a),a.parent=r}}}(r,Do(this)),r},unlinkDoc:function(e){if(e instanceof Ts&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Ao(Do(this));break}if(e.history==this.history){var n=[e.id];Oi(e,(function(e){return n.push(e.id)}),!0),e.history=new Fi(null),e.history.done=Gi(this.history.done,n),e.history.undone=Gi(this.history.undone,n)}},iterLinkedDocs:function(e){Oi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ie(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ni((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Jr(t=this.cm,(function(){Bi(t),hr(t)})))}))}),Io.prototype.eachLine=Io.prototype.iter;var _o=0;function No(e){var t=this;if(Oo(t),!fe(t,e)&&!Sn(t.display,e)){we(e),s&&(_o=+new Date);var n=cr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,l=function(){++a==i&&ei(t,(function(){var e={from:n=at(t.doc,n),to:n,text:t.doc.splitLines(o.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};co(t.doc,e),Zi(t.doc,Ri(at(t.doc,n),at(t.doc,xi(e))))}))()},c=function(e,n){if(t.options.allowDropFileTypes&&-1==U(t.options.allowDropFileTypes,e.type))l();else{var r=new FileReader;r.onerror=function(){return l()},r.onload=function(){var e=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(o[n]=e),l()},r.readAsText(e)}},u=0;u<r.length;u++)c(r[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var h=e.dataTransfer.getData("Text");if(h){var p;if(t.state.draggingText&&!t.state.draggingText.copy&&(p=t.listSelections()),eo(t.doc,Ri(n,n)),p)for(var d=0;d<p.length;++d)fo(t.doc,"",p[d].anchor,p[d].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Oo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Mo(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<t.length;r++){var i=t[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var t=0;t<n.length;t++)e(n[t])}))}}var Bo=!1;function Fo(){var e;Bo||(he(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Mo(Lo)}),100))})),he(window,"blur",(function(){return Mo(Rr)})),Bo=!0)}function Lo(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Ho={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Uo=0;Uo<10;Uo++)Ho[Uo+48]=Ho[Uo+96]=String(Uo);for(var Wo=65;Wo<=90;Wo++)Ho[Wo]=String.fromCharCode(Wo);for(var $o=1;$o<=12;$o++)Ho[$o+111]=Ho[$o+63235]="F"+$o;var zo={};function qo(e){var t,n,r,i,o=e.split(/-(?!$)/);e=o[o.length-1];for(var s=0;s<o.length-1;s++){var a=o[s];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);r=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function jo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=Y(n.split(" "),qo),o=0;o<i.length;o++){var s=void 0,a=void 0;o==i.length-1?(a=i.join(" "),s=r):(a=i.slice(0,o+1).join(" "),s="...");var l=t[a];if(l){if(l!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function Go(e,t,n,r){var i=(t=Xo(t)).call?t.call(e,r):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Go(e,t.fallthrough,n,r);for(var o=0;o<t.fallthrough.length;o++){var s=Go(e,t.fallthrough[o],n,r);if(s)return s}}}function Vo(e){var t="string"==typeof e?e:Ho[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ko(e,t,n){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(S?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(S?t.ctrlKey:t.metaKey)&&"Mod"!=r&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function Yo(e,t){if(h&&34==e.keyCode&&e.char)return!1;var n=Ho[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Ko(n,e,t))}function Xo(e){return"string"==typeof e?zo[e]:e}function Qo(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=t(n[i]);r.length&&tt(o.from,K(r).to)<=0;){var s=r.pop();if(tt(s.from,o.from)<0){o.from=s.from;break}}r.push(o)}Jr(e,(function(){for(var t=r.length-1;t>=0;t--)fo(e.doc,"",r[t].from,r[t].to,"+delete");Ir(e)}))}function Zo(e,t,n){var r=ie(e.text,t+n,n);return r<0||r>e.text.length?null:r}function Jo(e,t,n){var r=Zo(e,t.ch,n);return null==r?null:new et(t.line,r,n<0?"after":"before")}function es(e,t,n,r,i){if(e){"rtl"==t.doc.direction&&(i=-i);var o=ce(n,t.doc.direction);if(o){var s,a=i<0?K(o):o[0],l=i<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var c=_n(t,n);s=i<0?n.text.length-1:0;var u=Nn(t,c,s).top;s=oe((function(e){return Nn(t,c,e).top==u}),i<0==(1==a.level)?a.from:a.to-1,s),"before"==l&&(s=Zo(n,s,1))}else s=i<0?a.to:a.from;return new et(r,s,l)}}return new et(r,i<0?n.text.length:0,i<0?"before":"after")}zo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},zo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},zo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},zo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},zo.default=b?zo.macDefault:zo.pcDefault;var ts={selectAll:ao,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),$)},killLine:function(e){return Qo(e,(function(t){if(t.empty()){var n=Ge(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,n)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Qo(e,(function(t){return{from:et(t.from().line,0),to:at(e.doc,et(t.to().line+1,0))}}))},delLineLeft:function(e){return Qo(e,(function(e){return{from:et(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Qo(e,(function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Qo(e,(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return ns(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return rs(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var n=Ge(e.doc,t),r=function(e){for(var t;t=Mt(e);)e=t.find(1,!0).line;return e}(n);return r!=n&&(t=Xe(r)),es(!0,e,n,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")}),q)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")}),q)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var n=e.cursorCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?rs(e,t.head):r}),q)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),s=L(e.getLine(o.line),o.ch,r);t.push(V(r-s%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Jr(e,(function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,o=Ge(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new et(i.line,i.ch-1)),i.ch>0)i=new et(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),et(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var s=Ge(e.doc,i.line-1).text;s&&(i=new et(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),et(i.line-1,s.length-1),i,"+transpose"))}n.push(new Ei(i,i))}e.setSelections(n)}))},newlineAndIndent:function(e){return Jr(e,(function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Ir(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ns(e,t){var n=Ge(e.doc,t),r=Lt(n);return r!=n&&(t=Xe(r)),es(!0,e,r,t,1)}function rs(e,t){var n=ns(e,t.line),r=Ge(e.doc,n.line),i=ce(r,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(n.ch,r.text.search(/\S/)),s=t.line==n.line&&t.ch<=o&&t.ch;return et(n.line,s?0:o,n.sticky)}return n}function is(e,t,n){if("string"==typeof t&&!(t=ts[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=W}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}var os=new H;function ss(e,t,n,r){var i=e.state.keySeq;if(i){if(Vo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:os.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),as(e,i+" "+t,n,r))return!0}return as(e,t,n,r)}function as(e,t,n,r){var i=function(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=Go(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&Go(t,e.options.extraKeys,n,e)||Go(t,e.options.keyMap,n,e)}(e,t,r);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&ln(e,"keyHandled",e,t,n),"handled"!=i&&"multi"!=i||(we(n),Cr(e)),!!i}function ls(e,t){var n=Yo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?ss(e,"Shift-"+n,t,(function(t){return is(e,t,!0)}))||ss(e,n,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return is(e,t)})):ss(e,n,t,(function(t){return is(e,t)})))}var cs=null;function us(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=_(),fe(t,e)))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var i=ls(t,e);h&&(cs=i?r:null,i||88!=r||Ne||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),n&&!b&&!i&&46==r&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(x(t,"CodeMirror-crosshair"),de(document,"keyup",n),de(document,"mouseover",n))}N(t,"CodeMirror-crosshair"),he(document,"keyup",n),he(document,"mouseover",n)}(t)}}function hs(e){16==e.keyCode&&(this.doc.sel.shift=!1),fe(this,e)}function ps(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Sn(t.display,e)||fe(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(h&&n==cs)return cs=null,void we(e);if(!h||e.which&&!(e.which<10)||!ls(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(e,t,n){return ss(e,"'"+n+"'",t,(function(t){return is(e,t,!0)}))}(t,e,i)||t.display.input.onKeyPress(e))}}}var ds,ms,fs=function(e,t,n){this.time=e,this.pos=t,this.button=n};function gs(e){var t=this,n=t.display;if(!(fe(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,Sn(n,e))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!ws(t,e)){var r=cr(t,e),i=ke(e),o=r?function(e,t){var n=+new Date;return ms&&ms.compare(n,e,t)?(ds=ms=null,"triple"):ds&&ds.compare(n,e,t)?(ms=new fs(n,e,t),ds=null,"double"):(ds=new fs(n,e,t),ms=null,"single")}(r,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),r&&function(e,t,n,r,i){var o="Click";return"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o),ss(e,Ko(o=(1==t?"Left":2==t?"Middle":"Right")+o,i),i,(function(t){if("string"==typeof t&&(t=ts[t]),!t)return!1;var r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r=t(e,n)!=W}finally{e.state.suppressEdits=!1}return r}))}(t,i,r,o,e)||(1==i?r?function(e,t,n,r){s?setTimeout(B(Sr,e),0):e.curOp.focus=_();var i,o=function(e,t,n){var r=e.getOption("configureMouse"),i=r?r(e,t,n):{};if(null==i.unit){var o=w?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||n.shiftKey),null==i.addNew&&(i.addNew=b?n.metaKey:n.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?n.altKey:n.ctrlKey)),i}(e,n,r),c=e.doc.sel;e.options.dragDrop&&Te&&!e.isReadOnly()&&"single"==n&&(i=c.contains(t))>-1&&(tt((i=c.ranges[i]).from(),t)<0||t.xRel>0)&&(tt(i.to(),t)>0||t.xRel<0)?function(e,t,n,r){var i=e.display,o=!1,c=ei(e,(function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Er(e)),de(i.wrapper.ownerDocument,"mouseup",c),de(i.wrapper.ownerDocument,"mousemove",u),de(i.scroller,"dragstart",h),de(i.scroller,"drop",c),o||(we(t),r.addNew||Ki(e.doc,n,null,null,r.extend),l&&!p||s&&9==a?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),u=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},h=function(){return o=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=c,c.copy=!r.moveOnDrag,he(i.wrapper.ownerDocument,"mouseup",c),he(i.wrapper.ownerDocument,"mousemove",u),he(i.scroller,"dragstart",h),he(i.scroller,"drop",c),e.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}(e,r,t,o):function(e,t,n,r){s&&Er(e);var i=e.display,o=e.doc;we(t);var a,l,c=o.sel,u=c.ranges;if(r.addNew&&!r.extend?(l=o.sel.contains(n),a=l>-1?u[l]:new Ei(n,n)):(a=o.sel.primary(),l=o.sel.primIndex),"rectangle"==r.unit)r.addNew||(a=new Ei(n,n)),n=cr(e,t,!0,!0),l=-1;else{var h=ys(e,n,r.unit);a=r.extend?Vi(a,h.anchor,h.head,r.extend):h}r.addNew?-1==l?(l=u.length,Ji(o,ki(e,u.concat([a]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"char"==r.unit&&!r.extend?(Ji(o,ki(e,u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),c=o.sel):Xi(o,l,a,z):(l=0,Ji(o,new Si([a],0),z),c=o.sel);var p=n;function d(t){if(0!=tt(p,t))if(p=t,"rectangle"==r.unit){for(var i=[],s=e.options.tabSize,u=L(Ge(o,n.line).text,n.ch,s),h=L(Ge(o,t.line).text,t.ch,s),d=Math.min(u,h),m=Math.max(u,h),f=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));f<=g;f++){var y=Ge(o,f).text,b=j(y,d,s);d==m?i.push(new Ei(et(f,b),et(f,b))):y.length>b&&i.push(new Ei(et(f,b),et(f,j(y,m,s))))}i.length||i.push(new Ei(n,n)),Ji(o,ki(e,c.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var w,v=a,C=ys(e,t,r.unit),S=v.anchor;tt(C.anchor,S)>0?(w=C.head,S=ot(v.from(),C.anchor)):(w=C.anchor,S=it(v.to(),C.head));var E=c.ranges.slice(0);E[l]=function(e,t){var n=t.anchor,r=t.head,i=Ge(e.doc,n.line);if(0==tt(n,r)&&n.sticky==r.sticky)return t;var o=ce(i);if(!o)return t;var s=ae(o,n.ch,n.sticky),a=o[s];if(a.from!=n.ch&&a.to!=n.ch)return t;var l,c=s+(a.from==n.ch==(1!=a.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=ae(o,r.ch,r.sticky),h=u-s||(r.ch-n.ch)*(1==a.level?-1:1);l=u==c-1||u==c?h<0:h>0}var p=o[c+(l?-1:0)],d=l==(1==p.level),m=d?p.from:p.to,f=d?"after":"before";return n.ch==m&&n.sticky==f?t:new Ei(new et(n.line,m,f),r)}(e,new Ei(at(o,S),w)),Ji(o,ki(e,E,l),z)}}var m=i.wrapper.getBoundingClientRect(),f=0;function g(t){var n=++f,s=cr(e,t,!0,"rectangle"==r.unit);if(s)if(0!=tt(s,p)){e.curOp.focus=_(),d(s);var a=Dr(i,o);(s.line>=a.to||s.line<a.from)&&setTimeout(ei(e,(function(){f==n&&g(t)})),150)}else{var l=t.clientY<m.top?-20:t.clientY>m.bottom?20:0;l&&setTimeout(ei(e,(function(){f==n&&(i.scroller.scrollTop+=l,g(t))})),50)}}function y(t){e.state.selectingText=!1,f=1/0,t&&(we(t),i.input.focus()),de(i.wrapper.ownerDocument,"mousemove",b),de(i.wrapper.ownerDocument,"mouseup",w),o.history.lastSelOrigin=null}var b=ei(e,(function(e){0!==e.buttons&&ke(e)?g(e):y(e)})),w=ei(e,y);e.state.selectingText=w,he(i.wrapper.ownerDocument,"mousemove",b),he(i.wrapper.ownerDocument,"mouseup",w)}(e,r,t,o)}(t,r,o,e):Ee(e)==n.scroller&&we(e):2==i?(r&&Ki(t.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(E?t.display.input.onContextMenu(e):Er(t)))}}function ys(e,t,n){if("char"==n)return new Ei(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new Ei(et(t.line,0),at(e.doc,et(t.line+1,0)));var r=n(e,t);return new Ei(r.from,r.to)}function bs(e,t,n,r){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(e){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&we(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(o>a.bottom||!ye(e,n))return Ce(t);o-=a.top-s.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var c=s.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=i)return me(e,n,e,Qe(e.doc,o),e.display.gutterSpecs[l].className,t),Ce(t)}}function ws(e,t){return bs(e,t,"gutterClick",!0)}function vs(e,t){Sn(e.display,t)||function(e,t){return!!ye(e,"gutterContextMenu")&&bs(e,t,"gutterContextMenu",!1)}(e,t)||fe(e,t,"contextmenu")||E||e.display.input.onContextMenu(t)}function Cs(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Un(e)}fs.prototype.compare=function(e,t,n){return this.time+400>e&&0==tt(t,this.pos)&&n==this.button};var Ss={toString:function(){return"CodeMirror.Init"}},Es={},ks={};function Rs(e,t,n){if(!t!=!(n&&n!=Ss)){var r=e.display.dragFunctions,i=t?he:de;i(e.display.scroller,"dragstart",r.start),i(e.display.scroller,"dragenter",r.enter),i(e.display.scroller,"dragover",r.over),i(e.display.scroller,"dragleave",r.leave),i(e.display.scroller,"drop",r.drop)}}function xs(e){e.options.lineWrapping?(N(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(x(e.display.wrapper,"CodeMirror-wrap"),jt(e)),lr(e),hr(e),Un(e),setTimeout((function(){return Wr(e)}),100)}function Ts(e,t){var n=this;if(!(this instanceof Ts))return new Ts(e,t);this.options=t=t?F(t):{},F(Es,t,!1);var r=t.value;"string"==typeof r?r=new Io(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var i=new Ts.inputStyles[t.inputStyle](this),o=this.display=new gi(e,r,i,t);for(var c in o.wrapper.CodeMirror=this,Cs(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),qr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!y&&o.input.focus(),s&&a<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(e){var t=e.display;he(t.scroller,"mousedown",ei(e,gs)),he(t.scroller,"dblclick",s&&a<11?ei(e,(function(t){if(!fe(e,t)){var n=cr(e,t);if(n&&!ws(e,t)&&!Sn(e.display,t)){we(t);var r=e.findWordAt(n);Ki(e.doc,r.anchor,r.head)}}})):function(t){return fe(e,t)||we(t)}),he(t.scroller,"contextmenu",(function(t){return vs(e,t)})),he(t.input.getField(),"contextmenu",(function(n){t.scroller.contains(n.target)||vs(e,n)}));var n,r={end:0};function i(){t.activeTouch&&(n=setTimeout((function(){return t.activeTouch=null}),1e3),(r=t.activeTouch).end=+new Date)}function o(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function l(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}he(t.scroller,"touchstart",(function(i){if(!fe(e,i)&&!o(i)&&!ws(e,i)){t.input.ensurePolled(),clearTimeout(n);var s=+new Date;t.activeTouch={start:s,moved:!1,prev:s-r.end<=300?r:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),he(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),he(t.scroller,"touchend",(function(n){var r=t.activeTouch;if(r&&!Sn(t,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var o,s=e.coordsChar(t.activeTouch,"page");o=!r.prev||l(r,r.prev)?new Ei(s,s):!r.prev.prev||l(r,r.prev.prev)?e.findWordAt(s):new Ei(et(s.line,0),at(e.doc,et(s.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),we(n)}i()})),he(t.scroller,"touchcancel",i),he(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Mr(e,t.scroller.scrollTop),Fr(e,t.scroller.scrollLeft,!0),me(e,"scroll",e))})),he(t.scroller,"mousewheel",(function(t){return Ci(e,t)})),he(t.scroller,"DOMMouseScroll",(function(t){return Ci(e,t)})),he(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){fe(e,t)||Se(t)},over:function(t){fe(e,t)||(function(e,t){var n=cr(e,t);if(n){var r=document.createDocumentFragment();br(e,n,r),e.display.dragCursor||(e.display.dragCursor=A("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),D(e.display.dragCursor,r)}}(e,t),Se(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-_o<100))Se(t);else if(!fe(e,t)&&!Sn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!p)){var n=A("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),h&&n.parentNode.removeChild(n)}}(e,t)},drop:ei(e,No),leave:function(t){fe(e,t)||Oo(e)}};var c=t.input.getField();he(c,"keyup",(function(t){return hs.call(e,t)})),he(c,"keydown",ei(e,us)),he(c,"keypress",ei(e,ps)),he(c,"focus",(function(t){return kr(e,t)})),he(c,"blur",(function(t){return Rr(e,t)}))}(this),Fo(),Gr(this),this.curOp.forceUpdate=!0,Mi(this,r),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&kr(n)}),20):Rr(this),ks)ks.hasOwnProperty(c)&&ks[c](this,t[c],Ss);pi(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Ds.length;++u)Ds[u](this);Vr(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ts.defaults=Es,Ts.optionHandlers=ks;var Ds=[];function As(e,t,n,r){var i,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=dt(e,t).state:n="prev");var s=e.options.tabSize,a=Ge(o,t),l=L(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(r||/\S/.test(a.text)){if("smart"==n&&((c=o.mode.indent(i,a.text.slice(u.length),a.text))==W||c>150)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=t>o.first?L(Ge(o,t-1).text,null,s):0:"add"==n?c=l+e.options.indentUnit:"subtract"==n?c=l-e.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var h="",p=0;if(e.options.indentWithTabs)for(var d=Math.floor(c/s);d;--d)p+=s,h+="\t";if(p<c&&(h+=V(c-p)),h!=u)return fo(o,h,et(t,0),et(t,u.length),"+input"),a.stateAfter=null,!0;for(var m=0;m<o.sel.ranges.length;m++){var f=o.sel.ranges[m];if(f.head.line==t&&f.head.ch<u.length){var g=et(t,u.length);Xi(o,m,new Ei(g,g));break}}}Ts.defineInitHook=function(e){return Ds.push(e)};var Ps=null;function Is(e){Ps=e}function _s(e,t,n,r,i){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var s=+new Date-200,a="paste"==i||e.state.pasteIncoming>s,l=Ie(t),c=null;if(a&&r.ranges.length>1)if(Ps&&Ps.text.join("\n")==t){if(r.ranges.length%Ps.text.length==0){c=[];for(var u=0;u<Ps.text.length;u++)c.push(o.splitLines(Ps.text[u]))}}else l.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=Y(l,(function(e){return[e]})));for(var h=e.curOp.updateInput,p=r.ranges.length-1;p>=0;p--){var d=r.ranges[p],m=d.from(),f=d.to();d.empty()&&(n&&n>0?m=et(m.line,m.ch-n):e.state.overwrite&&!a?f=et(f.line,Math.min(Ge(o,f.line).text.length,f.ch+K(l).length)):a&&Ps&&Ps.lineWise&&Ps.text.join("\n")==l.join("\n")&&(m=f=et(m.line,0)));var g={from:m,to:f,text:c?c[p%c.length]:l,origin:i||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};co(e.doc,g),ln(e,"inputRead",e,g)}t&&!a&&Os(e,t),Ir(e),e.curOp.updateInput<2&&(e.curOp.updateInput=h),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ns(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Jr(t,(function(){return _s(t,n,0,null,"paste")})),!0}function Os(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=e.getModeAt(i.head),s=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(t.indexOf(o.electricChars.charAt(a))>-1){s=As(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Ge(e.doc,i.head.line).text.slice(0,i.head.ch))&&(s=As(e,i.head.line,"smart"));s&&ln(e,"electricInput",e,i.head.line)}}}function Ms(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,o={anchor:et(i,0),head:et(i+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Bs(e,t,n,r){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",r?"":"off"),e.setAttribute("spellcheck",!!t)}function Fs(){var e=A("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=A("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),f&&(e.style.border="1px solid black"),Bs(e),t}function Ls(e,t,n,r,i){var o=t,s=n,a=Ge(e,t.line),l=i&&"rtl"==e.direction?-n:n;function c(o){var s,c;if("codepoint"==r){var u=a.text.charCodeAt(t.ch+(n>0?0:-1));if(isNaN(u))s=null;else{var h=n>0?u>=55296&&u<56320:u>=56320&&u<57343;s=new et(t.line,Math.max(0,Math.min(a.text.length,t.ch+n*(h?2:1))),-n)}}else s=i?function(e,t,n,r){var i=ce(t,e.doc.direction);if(!i)return Jo(t,n,r);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=ae(i,n.ch,n.sticky),s=i[o];if("ltr"==e.doc.direction&&s.level%2==0&&(r>0?s.to>n.ch:s.from<n.ch))return Jo(t,n,r);var a,l=function(e,n){return Zo(t,e instanceof et?e.ch:e,n)},c=function(n){return e.options.lineWrapping?(a=a||_n(e,t),Zn(e,t,a,n)):{begin:0,end:t.text.length}},u=c("before"==n.sticky?l(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var h=1==s.level==r<0,p=l(n,h?1:-1);if(null!=p&&(h?p<=s.to&&p<=u.end:p>=s.from&&p>=u.begin)){var d=h?"before":"after";return new et(n.line,p,d)}}var m=function(e,t,r){for(var o=function(e,t){return t?new et(n.line,l(e,1),"before"):new et(n.line,e,"after")};e>=0&&e<i.length;e+=t){var s=i[e],a=t>0==(1!=s.level),c=a?r.begin:l(r.end,-1);if(s.from<=c&&c<s.to)return o(c,a);if(c=a?s.from:l(s.to,-1),r.begin<=c&&c<r.end)return o(c,a)}},f=m(o+r,r,u);if(f)return f;var g=r>0?u.end:l(u.begin,-1);return null==g||r>0&&g==t.text.length||!(f=m(r>0?0:i.length-1,r,c(g)))?null:f}(e.cm,a,t,n):Jo(a,t,n);if(null==s){if(o||((c=t.line+l)<e.first||c>=e.first+e.size||(t=new et(c,t.ch,t.sticky),!(a=Ge(e,c)))))return!1;t=es(i,e.cm,a,t.line,l)}else t=s;return!0}if("char"==r||"codepoint"==r)c();else if("column"==r)c(!0);else if("word"==r||"group"==r)for(var u=null,h="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(n<0)||c(!d);d=!1){var m=a.text.charAt(t.ch)||"\n",f=ee(m,p)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||d||f||(f="s"),u&&u!=f){n<0&&(n=1,c(),t.sticky="after");break}if(f&&(u=f),n>0&&!c(!d))break}var g=oo(e,t,o,s,!0);return nt(o,g)&&(g.hitSide=!0),g}function Hs(e,t,n,r){var i,o,s=e.doc,a=t.left;if("page"==r){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(l-.5*rr(e.display),3);i=(n>0?t.bottom:t.top)+n*c}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(;(o=Xn(e,a,i)).outside;){if(n<0?i<=0:i>=s.height){o.hitSide=!0;break}i+=5*n}return o}var Us=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ws(e,t){var n=In(e,t.line);if(!n||n.hidden)return null;var r=Ge(e.doc,t.line),i=An(n,r,t.line),o=ce(r,e.doc.direction),s="left";o&&(s=ae(o,t.ch)%2?"right":"left");var a=Bn(i.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function $s(e,t){return t&&(e.bad=!0),e}function zs(e,t,n){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[n]))return $s(e.clipPos(et(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==r)return qs(o,t,n)}}function qs(e,t,n){var r=e.text.firstChild,i=!1;if(!t||!I(r,t))return $s(et(Xe(e.line),0),!0);if(t==r&&(i=!0,t=r.childNodes[n],n=0,!t)){var o=e.rest?K(e.rest):e.line;return $s(et(Xe(o),o.text.length),i)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,n&&(n=s.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var l=e.measure,c=l.maps;function u(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var o=i<0?l.map:c[i],s=0;s<o.length;s+=3){var a=o[s+2];if(a==t||a==n){var u=Xe(i<0?e.line:e.rest[i]),h=o[s]+r;return(r<0||a!=t)&&(h=o[s+(r?1:0)]),et(u,h)}}}var h=u(s,a,n);if(h)return $s(h,i);for(var p=a.nextSibling,d=s?s.nodeValue.length-n:0;p;p=p.nextSibling){if(h=u(p,p.firstChild,0))return $s(et(h.line,h.ch-d),i);d+=p.textContent.length}for(var m=a.previousSibling,f=n;m;m=m.previousSibling){if(h=u(m,m.firstChild,-1))return $s(et(h.line,h.ch+f),i);f+=m.textContent.length}}Us.prototype.init=function(e){var t=this,n=this,r=n.cm,i=n.div=e.lineDiv;function o(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(o(e)&&!fe(r,e)){if(r.somethingSelected())Is({lineWise:!1,text:r.getSelections()}),"cut"==e.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var t=Ms(r);Is({lineWise:!0,text:t.text}),"cut"==e.type&&r.operation((function(){r.setSelections(t.ranges,0,$),r.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=Ps.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Fs(),l=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),l.value=Ps.text.join("\n");var c=document.activeElement;M(l),setTimeout((function(){r.display.lineSpace.removeChild(a),c.focus(),c==i&&n.showPrimarySelection()}),50)}}i.contentEditable=!0,Bs(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),he(i,"paste",(function(e){!o(e)||fe(r,e)||Ns(e,r)||a<=11&&setTimeout(ei(r,(function(){return t.updateFromDOM()})),20)})),he(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),he(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),he(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),he(i,"touchstart",(function(){return n.forceCompositionEnd()})),he(i,"input",(function(){t.composing||t.readFromDOMSoon()})),he(i,"copy",s),he(i,"cut",s)},Us.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Us.prototype.prepareSelection=function(){var e=yr(this.cm,!1);return e.focus=document.activeElement==this.div,e},Us.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Us.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Us.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),i=r.from(),o=r.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var s=zs(t,e.anchorNode,e.anchorOffset),a=zs(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=tt(ot(s,a),i)||0!=tt(it(s,a),o)){var l=t.display.view,c=i.line>=t.display.viewFrom&&Ws(t,i)||{node:l[0].measure.map[2],offset:0},u=o.line<t.display.viewTo&&Ws(t,o);if(!u){var h=l[l.length-1].measure,p=h.maps?h.maps[h.maps.length-1]:h.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(c&&u){var d,m=e.rangeCount&&e.getRangeAt(0);try{d=R(c.node,c.offset,u.offset,u.node)}catch(e){}d&&(!n&&t.state.focused?(e.collapse(c.node,c.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),m&&null==e.anchorNode?e.addRange(m):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Us.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Us.prototype.showMultipleSelections=function(e){D(this.cm.display.cursorDiv,e.cursors),D(this.cm.display.selectionDiv,e.selection)},Us.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Us.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return I(this.div,t)},Us.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Us.prototype.blur=function(){this.div.blur()},Us.prototype.getField=function(){return this.div},Us.prototype.supportsTouch=function(){return!0},Us.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Jr(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Us.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Us.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=zs(t,e.anchorNode,e.anchorOffset),r=zs(t,e.focusNode,e.focusOffset);n&&r&&Jr(t,(function(){Ji(t.doc,Ri(n,r),$),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}}},Us.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),s=o.from(),a=o.to();if(0==s.ch&&s.line>r.firstLine()&&(s=et(s.line-1,Ge(r.doc,s.line-1).length)),a.ch==Ge(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=et(a.line+1,0)),s.line<i.viewFrom||a.line>i.viewTo-1)return!1;s.line==i.viewFrom||0==(e=ur(r,s.line))?(t=Xe(i.view[0].line),n=i.view[0].node):(t=Xe(i.view[e].line),n=i.view[e-1].node.nextSibling);var l,c,u=ur(r,a.line);if(u==i.view.length-1?(l=i.viewTo-1,c=i.lineDiv.lastChild):(l=Xe(i.view[u+1].line)-1,c=i.view[u+1].node.previousSibling),!n)return!1;for(var h=r.doc.splitLines(function(e,t,n,r,i){var o="",s=!1,a=e.doc.lineSeparator(),l=!1;function c(){s&&(o+=a,l&&(o+=a),s=l=!1)}function u(e){e&&(c(),o+=e)}function h(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void u(n);var o,p=t.getAttribute("cm-marker");if(p){var d=e.findMarks(et(r,0),et(i+1,0),(g=+p,function(e){return e.id==g}));return void(d.length&&(o=d[0].find(0))&&u(Ve(e.doc,o.from,o.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&c();for(var f=0;f<t.childNodes.length;f++)h(t.childNodes[f]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),m&&(s=!0)}else 3==t.nodeType&&u(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;h(t),t!=n;)t=t.nextSibling,l=!1;return o}(r,n,c,t,l)),p=Ve(r.doc,et(t,0),et(l,Ge(r.doc,l).text.length));h.length>1&&p.length>1;)if(K(h)==K(p))h.pop(),p.pop(),l--;else{if(h[0]!=p[0])break;h.shift(),p.shift(),t++}for(var d=0,m=0,f=h[0],g=p[0],y=Math.min(f.length,g.length);d<y&&f.charCodeAt(d)==g.charCodeAt(d);)++d;for(var b=K(h),w=K(p),v=Math.min(b.length-(1==h.length?d:0),w.length-(1==p.length?d:0));m<v&&b.charCodeAt(b.length-m-1)==w.charCodeAt(w.length-m-1);)++m;if(1==h.length&&1==p.length&&t==s.line)for(;d&&d>s.ch&&b.charCodeAt(b.length-m-1)==w.charCodeAt(w.length-m-1);)d--,m++;h[h.length-1]=b.slice(0,b.length-m).replace(/^\u200b+/,""),h[0]=h[0].slice(d).replace(/\u200b+$/,"");var C=et(t,d),S=et(l,p.length?K(p).length-m:0);return h.length>1||h[0]||tt(C,S)?(fo(r.doc,h,C,S,"+input"),!0):void 0},Us.prototype.ensurePolled=function(){this.forceCompositionEnd()},Us.prototype.reset=function(){this.forceCompositionEnd()},Us.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Us.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Us.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Jr(this.cm,(function(){return hr(e.cm)}))},Us.prototype.setUneditable=function(e){e.contentEditable="false"},Us.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||ei(this.cm,_s)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Us.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Us.prototype.onContextMenu=function(){},Us.prototype.resetPosition=function(){},Us.prototype.needsContentAttribute=!0;var js=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null};js.prototype.init=function(e){var t=this,n=this,r=this.cm;this.createField(e);var i=this.textarea;function o(e){if(!fe(r,e)){if(r.somethingSelected())Is({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Ms(r);Is({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,$):(n.prevInput="",i.value=t.text.join("\n"),M(i))}"cut"==e.type&&(r.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),f&&(i.style.width="0px"),he(i,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()})),he(i,"paste",(function(e){fe(r,e)||Ns(e,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),he(i,"cut",o),he(i,"copy",o),he(e.scroller,"paste",(function(t){if(!Sn(e,t)&&!fe(r,t)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,i.dispatchEvent(o)}})),he(e.lineSpace,"selectstart",(function(t){Sn(e,t)||we(t)})),he(i,"compositionstart",(function(){var e=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}})),he(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},js.prototype.createField=function(e){this.wrapper=Fs(),this.textarea=this.wrapper.firstChild},js.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},js.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=yr(e);if(e.options.moveInputWithCursor){var i=Vn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+s.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+s.left-o.left))}return r},js.prototype.showSelection=function(e){var t=this.cm.display;D(t.cursorDiv,e.cursors),D(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},js.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&M(this.textarea),s&&a>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},js.prototype.getField=function(){return this.textarea},js.prototype.supportsTouch=function(){return!1},js.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||_()!=this.textarea))try{this.textarea.focus()}catch(e){}},js.prototype.blur=function(){this.textarea.blur()},js.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},js.prototype.receivedFocus=function(){this.slowPoll()},js.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},js.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))}))},js.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||_e(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,c=Math.min(r.length,i.length);l<c&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Jr(t,(function(){_s(t,i.slice(l),r.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},js.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},js.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},js.prototype.onContextMenu=function(e){var t=this,n=t.cm,r=n.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=cr(n,e),c=r.scroller.scrollTop;if(o&&!h){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&ei(n,Ji)(n.doc,Ri(o),$);var u,p=i.style.cssText,d=t.wrapper.style.cssText,m=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-m.top-5)+"px; left: "+(e.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(u=window.scrollY),r.input.focus(),l&&window.scrollTo(null,u),r.input.reset(),n.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=y,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),s&&a>=9&&g(),E){Se(e);var f=function(){de(window,"mouseup",f),setTimeout(y,20)};he(window,"mouseup",f)}else setTimeout(y,50)}function g(){if(null!=i.selectionStart){var e=n.somethingSelected(),o="​"+(e?i.value:"");i.value="⇚",i.value=o,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function y(){if(t.contextMenuPending==y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=p,s&&a<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=c),null!=i.selectionStart)){(!s||s&&a<9)&&g();var e=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?ei(n,ao)(n):e++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},js.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},js.prototype.setUneditable=function(){},js.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,r,i,o){e.defaults[n]=r,i&&(t[n]=o?function(e,t,n){n!=Ss&&i(e,t,n)}:i)}e.defineOption=n,e.Init=Ss,n("value","",(function(e,t){return e.setValue(t)}),!0),n("mode",null,(function(e,t){e.doc.modeOption=t,Pi(e)}),!0),n("indentUnit",2,Pi,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(e){Ii(e),Un(e),hr(e)}),!0),n("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(-1==o)break;i=o+t.length,n.push(et(r,o))}r++}));for(var i=n.length-1;i>=0;i--)fo(e.doc,t,n[i],et(n[i].line,n[i].ch+t.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=Ss&&e.refresh()})),n("specialCharPlaceholder",Zt,(function(e){return e.refresh()}),!0),n("electricChars",!0),n("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),n("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),n("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),n("rtlMoveVisually",!v),n("wholeLineUpdateBefore",!0),n("theme","default",(function(e){Cs(e),fi(e)}),!0),n("keyMap","default",(function(e,t,n){var r=Xo(t),i=n!=Ss&&Xo(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,xs,!0),n("gutters",[],(function(e,t){e.display.gutterSpecs=di(t,e.options.lineNumbers),fi(e)}),!0),n("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?sr(e.display)+"px":"0",e.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(e){return Wr(e)}),!0),n("scrollbarStyle","native",(function(e){qr(e),Wr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=di(e.options.gutters,t),fi(e)}),!0),n("firstLineNumber",1,fi,!0),n("lineNumberFormatter",(function(e){return e}),fi,!0),n("showCursorWhenSelecting",!1,gr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(e,t){"nocursor"==t&&(Rr(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),n("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),n("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),n("dragDrop",!0,Rs),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,gr,!0),n("singleCursorHeightPerLine",!0,gr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ii,!0),n("addModeClass",!1,Ii,!0),n("pollInterval",100),n("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),n("historyEventDelay",1250),n("viewportMargin",10,(function(e){return e.refresh()}),!0),n("maxHighlightLength",1e4,Ii,!0),n("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),n("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),n("autofocus",null),n("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),n("phrases",null)}(Ts),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&ei(this,t[e])(this,n,i),me(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Xo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:ti((function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");(function(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)})(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(e){return e.priority})),this.state.modeGen++,hr(this)})),removeOverlay:ti((function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(n,1),this.state.modeGen++,void hr(this)}})),indentLine:ti((function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Ze(this.doc,e)&&As(this,e,t,n)})),indentSelection:ti((function(e){for(var t=this.doc.sel.ranges,n=-1,r=0;r<t.length;r++){var i=t[r];if(i.empty())i.head.line>n&&(As(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&Ir(this));else{var o=i.from(),s=i.to(),a=Math.max(n,o.line);n=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var l=a;l<n;++l)As(this,l,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&c[r].from().ch>0&&Xi(this.doc,r,new Ei(o,c[r].to()),$)}}})),getTokenAt:function(e,t){return bt(this,e,t)},getLineTokens:function(e,t){return bt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,n=pt(this,Ge(this.doc,e.line)),r=0,i=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var s=r+i>>1;if((s?n[2*s-1]:0)>=o)i=s;else{if(!(n[2*s+1]<o)){t=n[2*s+2];break}r=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=[];if(!n.hasOwnProperty(t))return r;var i=n[t],o=this.getModeAt(e);if("string"==typeof o[t])i[o[t]]&&r.push(i[o[t]]);else if(o[t])for(var s=0;s<o[t].length;s++){var a=i[o[t][s]];a&&r.push(a)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var c=i._global[l];c.pred(o,this)&&-1==U(r,c.val)&&r.push(c.val)}return r},getStateAfter:function(e,t){var n=this.doc;return dt(this,(e=st(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Vn(this,null==e?n.head:"object"==typeof e?at(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Gn(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Xn(this,(e=jn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=jn(this,{top:e,left:0},t||"page").top,Qe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),r=Ge(this.doc,e)}else r=e;return qn(this,r,{top:0,left:0},t||"page",n||i).top+(i?this.doc.height-zt(r):0)},defaultTextHeight:function(){return rr(this.display)},defaultCharWidth:function(){return ir(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var o,s,a,l=this.display,c=(e=Vn(this,at(this.doc,e))).bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var h=Math.max(l.wrapper.clientHeight,this.doc.height),p=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(c=e.bottom),u+t.offsetWidth>p&&(u=p-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==i?(u=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&(o=this,s={left:u,top:c,right:u+t.offsetWidth,bottom:c+t.offsetHeight},null!=(a=Ar(o,s)).scrollTop&&Mr(o,a.scrollTop),null!=a.scrollLeft&&Fr(o,a.scrollLeft))},triggerOnKeyDown:ti(us),triggerOnKeyPress:ti(ps),triggerOnKeyUp:hs,triggerOnMouseDown:ti(gs),execCommand:function(e){if(ts.hasOwnProperty(e))return ts[e].call(null,this)},triggerElectric:ti((function(e){Os(this,e)})),findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var o=at(this.doc,e),s=0;s<t&&!(o=Ls(this.doc,o,i,n,r)).hitSide;++s);return o},moveH:ti((function(e,t){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Ls(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()}),q)})),deleteH:ti((function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Qo(this,(function(n){var i=Ls(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(e,t,n,r){var i=1,o=r;t<0&&(i=-1,t=-t);for(var s=at(this.doc,e),a=0;a<t;++a){var l=Vn(this,s,"div");if(null==o?o=l.left:l.left=o,(s=Hs(this,l,i,n)).hitSide)break}return s},moveV:ti((function(e,t){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(s){if(o)return e<0?s.from():s.to();var a=Vn(n,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),i.push(a.left);var l=Hs(n,a,e,t);return"page"==t&&s==r.sel.primary()&&Pr(n,Gn(n,l,"div").top-a.top),l}),q),i.length)for(var s=0;s<r.sel.ranges.length;s++)r.sel.ranges[s].goalColumn=i[s]})),findWordAt:function(e){var t=Ge(this.doc,e.line).text,n=e.ch,r=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!n?++r:--n;for(var o=t.charAt(n),s=ee(o,i)?function(e){return ee(e,i)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};n>0&&s(t.charAt(n-1));)--n;for(;r<t.length&&s(t.charAt(r));)++r}return new Ei(et(e.line,n),et(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?N(this.display.cursorDiv,"CodeMirror-overwrite"):x(this.display.cursorDiv,"CodeMirror-overwrite"),me(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==_()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ti((function(e,t){_r(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-xn(this)-this.display.barHeight,width:e.scrollWidth-xn(this)-this.display.barWidth,clientHeight:Dn(this),clientWidth:Tn(this)}},scrollIntoView:ti((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Nr(e),e.curOp.scrollToPos=t}(this,e):Or(this,e.from,e.to,e.margin)})),setSize:ti((function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Hn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){pr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,me(this,"refresh",this)})),operation:function(e){return Jr(this,e)},startOperation:function(){return Gr(this)},endOperation:function(){return Vr(this)},refresh:ti((function(){var e=this.display.cachedTextHeight;hr(this),this.curOp.forceUpdate=!0,Un(this),_r(this,this.doc.scrollLeft,this.doc.scrollTop),ci(this.display),(null==e||Math.abs(e-rr(this.display))>.5||this.options.lineWrapping)&&lr(this),me(this,"refresh",this)})),swapDoc:ti((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Mi(this,e),Un(this),this.display.input.reset(),_r(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,o){e.registerHelper(t,r,o),n[t]._global.push({pred:i,val:o})}}(Ts);var Gs="iter insert remove copy getEditor constructor".split(" ");for(var Vs in Io.prototype)Io.prototype.hasOwnProperty(Vs)&&U(Gs,Vs)<0&&(Ts.prototype[Vs]=function(e){return function(){return e.apply(this.doc,arguments)}}(Io.prototype[Vs]));return be(Io),Ts.inputStyles={textarea:js,contenteditable:Us},Ts.defineMode=function(e){Ts.defaults.mode||"null"==e||(Ts.defaults.mode=e),Fe.apply(this,arguments)},Ts.defineMIME=function(e,t){Be[e]=t},Ts.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ts.defineMIME("text/plain","null"),Ts.defineExtension=function(e,t){Ts.prototype[e]=t},Ts.defineDocExtension=function(e,t){Io.prototype[e]=t},Ts.fromTextArea=function(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=_();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function r(){e.value=a.getValue()}var i;if(e.form&&(he(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(e){}}t.finishInit=function(n){n.save=r,n.getTextArea=function(){return e},n.toTextArea=function(){n.toTextArea=isNaN,r(),e.parentNode.removeChild(n.getWrapperElement()),e.style.display="",e.form&&(de(e.form,"submit",r),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var a=Ts((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a},function(e){e.off=de,e.on=he,e.wheelEventPixels=vi,e.Doc=Io,e.splitLines=Ie,e.countColumn=L,e.findColumn=j,e.isWordChar=J,e.Pass=W,e.signal=me,e.Line=Gt,e.changeEnd=xi,e.scrollbarModel=zr,e.Pos=et,e.cmpPos=tt,e.modes=Me,e.mimeModes=Be,e.resolveMode=Le,e.getMode=He,e.modeExtensions=Ue,e.extendMode=We,e.copyState=$e,e.startState=qe,e.innerMode=ze,e.commands=ts,e.keyMap=zo,e.keyName=Yo,e.isModifierKey=Vo,e.lookupKey=Go,e.normalizeKeyMap=jo,e.StringStream=je,e.SharedTextMarker=To,e.TextMarker=Ro,e.LineWidget=So,e.e_preventDefault=we,e.e_stopPropagation=ve,e.e_stop=Se,e.addClass=N,e.contains=I,e.rmClass=x,e.keyNames=Ho}(Ts),Ts.version="5.60.0",Ts}()},6406:(e,t,n)=>{!function(e){"use strict";e.defineMode("javascript",(function(t,n){var r,i,o=t.indentUnit,s=n.statementIndent,a=n.jsonld,l=n.json||a,c=n.typescript,u=n.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("keyword d"),o=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:n,do:n,try:n,finally:n,return:i,break:i,continue:i,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),p=/[+\-*&%=<>!?|~^@]/,d=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e,t,n){return r=e,i=n,t}function f(e,t){var n,r=e.next();if('"'==r||"'"==r)return t.tokenize=(n=r,function(e,t){var r,i=!1;if(a&&"@"==e.peek()&&e.match(d))return t.tokenize=f,m("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=n||i);)i=!i&&"\\"==r;return i||(t.tokenize=f),m("string","string")}),t.tokenize(e,t);if("."==r&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==r&&e.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return m(r);if("="==r&&e.eat(">"))return m("=>","operator");if("0"==r&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(r))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==r)return e.eat("*")?(t.tokenize=g,g(e,t)):e.eat("/")?(e.skipToEnd(),m("comment","comment")):Ye(e,t,1)?(function(e){for(var t,n=!1,r=!1;null!=(t=e.next());){if(!n){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}n=!n&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(e.eat("="),m("operator","operator",e.current()));if("`"==r)return t.tokenize=y,y(e,t);if("#"==r&&"!"==e.peek())return e.skipToEnd(),m("meta","meta");if("#"==r&&e.eatWhile(u))return m("variable","property");if("<"==r&&e.match("!--")||"-"==r&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),m("comment","comment");if(p.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-|&?]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),"?"==r&&e.eat(".")?m("."):m("operator","operator",e.current());if(u.test(r)){e.eatWhile(u);var i=e.current();if("."!=t.lastType){if(h.propertyIsEnumerable(i)){var o=h[i];return m(o.type,o.style,i)}if("async"==i&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",i)}return m("variable","variable",i)}}function g(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=f;break}r="*"==n}return m("comment","comment")}function y(e,t){for(var n,r=!1;null!=(n=e.next());){if(!r&&("`"==n||"$"==n&&e.eat("{"))){t.tokenize=f;break}r=!r&&"\\"==n}return m("quasi","string-2",e.current())}function b(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(!(n<0)){if(c){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,n));r&&(n=r.index)}for(var i=0,o=!1,s=n-1;s>=0;--s){var a=e.string.charAt(s),l="([{}])".indexOf(a);if(l>=0&&l<3){if(!i){++s;break}if(0==--i){"("==a&&(o=!0);break}}else if(l>=3&&l<6)++i;else if(u.test(a))o=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(o&&!i){++s;break}}o&&!i&&(t.fatArrowAt=s)}}var w={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function v(e,t,n,r,i,o){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function C(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(n=r.vars;n;n=n.next)if(n.name==t)return!0}var S={state:null,column:null,marked:null,cc:null};function E(){for(var e=arguments.length-1;e>=0;e--)S.cc.push(arguments[e])}function k(){return E.apply(null,arguments),!0}function R(e,t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}function x(e){var t=S.state;if(S.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var r=T(e,t.context);if(null!=r)return void(t.context=r)}else if(!R(e,t.localVars))return void(t.localVars=new P(e,t.localVars));n.globalVars&&!R(e,t.globalVars)&&(t.globalVars=new P(e,t.globalVars))}function T(e,t){if(t){if(t.block){var n=T(e,t.prev);return n?n==t.prev?t:new A(n,t.vars,!0):null}return R(e,t.vars)?t:new A(t.prev,new P(e,t.vars),!1)}return null}function D(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function A(e,t,n){this.prev=e,this.vars=t,this.block=n}function P(e,t){this.name=e,this.next=t}var I=new P("this",new P("arguments",null));function _(){S.state.context=new A(S.state.context,S.state.localVars,!1),S.state.localVars=I}function N(){S.state.context=new A(S.state.context,S.state.localVars,!0),S.state.localVars=null}function O(){S.state.localVars=S.state.context.vars,S.state.context=S.state.context.prev}function M(e,t){var n=function(){var n=S.state,r=n.indented;if("stat"==n.lexical.type)r=n.lexical.indented;else for(var i=n.lexical;i&&")"==i.type&&i.align;i=i.prev)r=i.indented;n.lexical=new v(r,S.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function B(){var e=S.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function F(e){return function t(n){return n==e?k():";"==e||"}"==n||")"==n||"]"==n?E():k(t)}}function L(e,t){return"var"==e?k(M("vardef",t),ve,F(";"),B):"keyword a"==e?k(M("form"),$,L,B):"keyword b"==e?k(M("form"),L,B):"keyword d"==e?S.stream.match(/^\s*$/,!1)?k():k(M("stat"),q,F(";"),B):"debugger"==e?k(F(";")):"{"==e?k(M("}"),N,se,B,O):";"==e?k():"if"==e?("else"==S.state.lexical.info&&S.state.cc[S.state.cc.length-1]==B&&S.state.cc.pop()(),k(M("form"),$,L,B,xe)):"function"==e?k(Pe):"for"==e?k(M("form"),Te,L,B):"class"==e||c&&"interface"==t?(S.marked="keyword",k(M("form","class"==e?e:t),Me,B)):"variable"==e?c&&"declare"==t?(S.marked="keyword",k(L)):c&&("module"==t||"enum"==t||"type"==t)&&S.stream.match(/^\s*\w/,!1)?(S.marked="keyword","enum"==t?k(Ve):"type"==t?k(_e,F("operator"),he,F(";")):k(M("form"),Ce,F("{"),M("}"),se,B,B)):c&&"namespace"==t?(S.marked="keyword",k(M("form"),U,L,B)):c&&"abstract"==t?(S.marked="keyword",k(L)):k(M("stat"),J):"switch"==e?k(M("form"),$,F("{"),M("}","switch"),N,se,B,B,O):"case"==e?k(U,F(":")):"default"==e?k(F(":")):"catch"==e?k(M("form"),_,H,L,B,O):"export"==e?k(M("stat"),He,B):"import"==e?k(M("stat"),We,B):"async"==e?k(L):"@"==t?k(U,L):E(M("stat"),U,F(";"),B)}function H(e){if("("==e)return k(Ne,F(")"))}function U(e,t){return z(e,t,!1)}function W(e,t){return z(e,t,!0)}function $(e){return"("!=e?E():k(M(")"),q,F(")"),B)}function z(e,t,n){if(S.state.fatArrowAt==S.stream.start){var r=n?X:Y;if("("==e)return k(_,M(")"),ie(Ne,")"),B,F("=>"),r,O);if("variable"==e)return E(_,Ce,F("=>"),r,O)}var i=n?G:j;return w.hasOwnProperty(e)?k(i):"function"==e?k(Pe,i):"class"==e||c&&"interface"==t?(S.marked="keyword",k(M("form"),Oe,B)):"keyword c"==e||"async"==e?k(n?W:U):"("==e?k(M(")"),q,F(")"),B,i):"operator"==e||"spread"==e?k(n?W:U):"["==e?k(M("]"),Ge,B,i):"{"==e?oe(te,"}",null,i):"quasi"==e?E(V,i):"new"==e?k(function(e){return function(t){return"."==t?k(e?Z:Q):"variable"==t&&c?k(ye,e?G:j):E(e?W:U)}}(n)):k()}function q(e){return e.match(/[;\}\)\],]/)?E():E(U)}function j(e,t){return","==e?k(q):G(e,t,!1)}function G(e,t,n){var r=0==n?j:G,i=0==n?U:W;return"=>"==e?k(_,n?X:Y,O):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?k(r):c&&"<"==t&&S.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?k(M(">"),ie(he,">"),B,r):"?"==t?k(U,F(":"),i):k(i):"quasi"==e?E(V,r):";"!=e?"("==e?oe(W,")","call",r):"."==e?k(ee,r):"["==e?k(M("]"),q,F("]"),B,r):c&&"as"==t?(S.marked="keyword",k(he,r)):"regexp"==e?(S.state.lastType=S.marked="operator",S.stream.backUp(S.stream.pos-S.stream.start-1),k(i)):void 0:void 0}function V(e,t){return"quasi"!=e?E():"${"!=t.slice(t.length-2)?k(V):k(U,K)}function K(e){if("}"==e)return S.marked="string-2",S.state.tokenize=y,k(V)}function Y(e){return b(S.stream,S.state),E("{"==e?L:U)}function X(e){return b(S.stream,S.state),E("{"==e?L:W)}function Q(e,t){if("target"==t)return S.marked="keyword",k(j)}function Z(e,t){if("target"==t)return S.marked="keyword",k(G)}function J(e){return":"==e?k(B,L):E(j,F(";"),B)}function ee(e){if("variable"==e)return S.marked="property",k()}function te(e,t){return"async"==e?(S.marked="property",k(te)):"variable"==e||"keyword"==S.style?(S.marked="property","get"==t||"set"==t?k(ne):(c&&S.state.fatArrowAt==S.stream.start&&(n=S.stream.match(/^\s*:\s*/,!1))&&(S.state.fatArrowAt=S.stream.pos+n[0].length),k(re))):"number"==e||"string"==e?(S.marked=a?"property":S.style+" property",k(re)):"jsonld-keyword"==e?k(re):c&&D(t)?(S.marked="keyword",k(te)):"["==e?k(U,ae,F("]"),re):"spread"==e?k(W,re):"*"==t?(S.marked="keyword",k(te)):":"==e?E(re):void 0;var n}function ne(e){return"variable"!=e?E(re):(S.marked="property",k(Pe))}function re(e){return":"==e?k(W):"("==e?E(Pe):void 0}function ie(e,t,n){function r(i,o){if(n?n.indexOf(i)>-1:","==i){var s=S.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),k((function(n,r){return n==t||r==t?E():E(e)}),r)}return i==t||o==t?k():n&&n.indexOf(";")>-1?E(e):k(F(t))}return function(n,i){return n==t||i==t?k():E(e,r)}}function oe(e,t,n){for(var r=3;r<arguments.length;r++)S.cc.push(arguments[r]);return k(M(t,n),ie(e,t),B)}function se(e){return"}"==e?k():E(L,se)}function ae(e,t){if(c){if(":"==e)return k(he);if("?"==t)return k(ae)}}function le(e,t){if(c&&(":"==e||"in"==t))return k(he)}function ce(e){if(c&&":"==e)return S.stream.match(/^\s*\w+\s+is\b/,!1)?k(U,ue,he):k(he)}function ue(e,t){if("is"==t)return S.marked="keyword",k()}function he(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(S.marked="keyword",k("typeof"==t?W:he)):"variable"==e||"void"==t?(S.marked="type",k(ge)):"|"==t||"&"==t?k(he):"string"==e||"number"==e||"atom"==e?k(ge):"["==e?k(M("]"),ie(he,"]",","),B,ge):"{"==e?k(M("}"),de,B,ge):"("==e?k(ie(fe,")"),pe,ge):"<"==e?k(ie(he,">"),he):void 0}function pe(e){if("=>"==e)return k(he)}function de(e){return e.match(/[\}\)\]]/)?k():","==e||";"==e?k(de):E(me,de)}function me(e,t){return"variable"==e||"keyword"==S.style?(S.marked="property",k(me)):"?"==t||"number"==e||"string"==e?k(me):":"==e?k(he):"["==e?k(F("variable"),le,F("]"),me):"("==e?E(Ie,me):e.match(/[;\}\)\],]/)?void 0:k()}function fe(e,t){return"variable"==e&&S.stream.match(/^\s*[?:]/,!1)||"?"==t?k(fe):":"==e?k(he):"spread"==e?k(fe):E(he)}function ge(e,t){return"<"==t?k(M(">"),ie(he,">"),B,ge):"|"==t||"."==e||"&"==t?k(he):"["==e?k(he,F("]"),ge):"extends"==t||"implements"==t?(S.marked="keyword",k(he)):"?"==t?k(he,F(":"),he):void 0}function ye(e,t){if("<"==t)return k(M(">"),ie(he,">"),B,ge)}function be(){return E(he,we)}function we(e,t){if("="==t)return k(he)}function ve(e,t){return"enum"==t?(S.marked="keyword",k(Ve)):E(Ce,ae,ke,Re)}function Ce(e,t){return c&&D(t)?(S.marked="keyword",k(Ce)):"variable"==e?(x(t),k()):"spread"==e?k(Ce):"["==e?oe(Ee,"]"):"{"==e?oe(Se,"}"):void 0}function Se(e,t){return"variable"!=e||S.stream.match(/^\s*:/,!1)?("variable"==e&&(S.marked="property"),"spread"==e?k(Ce):"}"==e?E():"["==e?k(U,F("]"),F(":"),Se):k(F(":"),Ce,ke)):(x(t),k(ke))}function Ee(){return E(Ce,ke)}function ke(e,t){if("="==t)return k(W)}function Re(e){if(","==e)return k(ve)}function xe(e,t){if("keyword b"==e&&"else"==t)return k(M("form","else"),L,B)}function Te(e,t){return"await"==t?k(Te):"("==e?k(M(")"),De,B):void 0}function De(e){return"var"==e?k(ve,Ae):"variable"==e?k(Ae):E(Ae)}function Ae(e,t){return")"==e?k():";"==e?k(Ae):"in"==t||"of"==t?(S.marked="keyword",k(U,Ae)):E(U,Ae)}function Pe(e,t){return"*"==t?(S.marked="keyword",k(Pe)):"variable"==e?(x(t),k(Pe)):"("==e?k(_,M(")"),ie(Ne,")"),B,ce,L,O):c&&"<"==t?k(M(">"),ie(be,">"),B,Pe):void 0}function Ie(e,t){return"*"==t?(S.marked="keyword",k(Ie)):"variable"==e?(x(t),k(Ie)):"("==e?k(_,M(")"),ie(Ne,")"),B,ce,O):c&&"<"==t?k(M(">"),ie(be,">"),B,Ie):void 0}function _e(e,t){return"keyword"==e||"variable"==e?(S.marked="type",k(_e)):"<"==t?k(M(">"),ie(be,">"),B):void 0}function Ne(e,t){return"@"==t&&k(U,Ne),"spread"==e?k(Ne):c&&D(t)?(S.marked="keyword",k(Ne)):c&&"this"==e?k(ae,ke):E(Ce,ae,ke)}function Oe(e,t){return"variable"==e?Me(e,t):Be(e,t)}function Me(e,t){if("variable"==e)return x(t),k(Be)}function Be(e,t){return"<"==t?k(M(">"),ie(be,">"),B,Be):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(S.marked="keyword"),k(c?he:U,Be)):"{"==e?k(M("}"),Fe,B):void 0}function Fe(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&D(t))&&S.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(S.marked="keyword",k(Fe)):"variable"==e||"keyword"==S.style?(S.marked="property",k(Le,Fe)):"number"==e||"string"==e?k(Le,Fe):"["==e?k(U,ae,F("]"),Le,Fe):"*"==t?(S.marked="keyword",k(Fe)):c&&"("==e?E(Ie,Fe):";"==e||","==e?k(Fe):"}"==e?k():"@"==t?k(U,Fe):void 0}function Le(e,t){if("?"==t)return k(Le);if(":"==e)return k(he,ke);if("="==t)return k(W);var n=S.state.lexical.prev;return E(n&&"interface"==n.info?Ie:Pe)}function He(e,t){return"*"==t?(S.marked="keyword",k(je,F(";"))):"default"==t?(S.marked="keyword",k(U,F(";"))):"{"==e?k(ie(Ue,"}"),je,F(";")):E(L)}function Ue(e,t){return"as"==t?(S.marked="keyword",k(F("variable"))):"variable"==e?E(W,Ue):void 0}function We(e){return"string"==e?k():"("==e?E(U):"."==e?E(j):E($e,ze,je)}function $e(e,t){return"{"==e?oe($e,"}"):("variable"==e&&x(t),"*"==t&&(S.marked="keyword"),k(qe))}function ze(e){if(","==e)return k($e,ze)}function qe(e,t){if("as"==t)return S.marked="keyword",k($e)}function je(e,t){if("from"==t)return S.marked="keyword",k(U)}function Ge(e){return"]"==e?k():E(ie(W,"]"))}function Ve(){return E(M("form"),Ce,F("{"),M("}"),ie(Ke,"}"),B,B)}function Ke(){return E(Ce,ke)}function Ye(e,t,n){return t.tokenize==f&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(n||0)))}return O.lex=!0,B.lex=!0,{startState:function(e){var t={tokenize:f,lastType:"sof",cc:[],lexical:new v((e||0)-o,0,"block",!1),localVars:n.localVars,context:n.localVars&&new A(null,null,!1),indented:e||0};return n.globalVars&&"object"==typeof n.globalVars&&(t.globalVars=n.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),b(e,t)),t.tokenize!=g&&e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.lastType="operator"!=r||"++"!=i&&"--"!=i?r:"incdec",function(e,t,n,r,i){var o=e.cc;for(S.state=e,S.stream=i,S.marked=null,S.cc=o,S.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?U:L)(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return S.marked?S.marked:"variable"==n&&C(e,r)?"variable-2":t}}(t,n,r,i,e))},indent:function(t,r){if(t.tokenize==g||t.tokenize==y)return e.Pass;if(t.tokenize!=f)return 0;var i,a=r&&r.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(r))for(var c=t.cc.length-1;c>=0;--c){var u=t.cc[c];if(u==B)l=l.prev;else if(u!=xe)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(i=t.cc[t.cc.length-1])&&(i==j||i==G)&&!/^[,\.=+\-*:?[\(]/.test(r));)l=l.prev;s&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var h=l.type,d=a==h;return"vardef"==h?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==h&&"{"==a?l.indented:"form"==h?l.indented+o:"stat"==h?l.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||p.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,r)?s||o:0):"switch"!=l.info||d||0==n.doubleIndentSwitch?l.align?l.column+(d?0:1):l.indented+(d?0:o):l.indented+(/^(?:case|default)\b/.test(r)?o:2*o)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:Ye,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=U&&t!=W||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(n(4045))},7492:function(e,t){var n,r;void 0===(r="function"==typeof(n=function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t,n,r=e.replace(/^v/,"").replace(/\+.*$/,""),i=(n="-",-1===(t=r).indexOf(n)?t.length:t.indexOf(n)),o=r.substring(0,i).split(".");return o.push(r.substring(i+1)),o}function n(e){return isNaN(Number(e))?e:Number(e)}function r(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")}function i(e,i){[e,i].forEach(r);for(var o=t(e),s=t(i),a=0;a<Math.max(o.length-1,s.length-1);a++){var l=parseInt(o[a]||0,10),c=parseInt(s[a]||0,10);if(l>c)return 1;if(c>l)return-1}var u=o[o.length-1],h=s[s.length-1];if(u&&h){var p=u.split(".").map(n),d=h.split(".").map(n);for(a=0;a<Math.max(p.length,d.length);a++){if(void 0===p[a]||"string"==typeof d[a]&&"number"==typeof p[a])return-1;if(void 0===d[a]||"string"==typeof p[a]&&"number"==typeof d[a])return 1;if(p[a]>d[a])return 1;if(d[a]>p[a])return-1}}else if(u||h)return u?-1:1;return 0}var o=[">",">=","=","<","<="],s={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return i.validate=function(t){return"string"==typeof t&&e.test(t)},i.compare=function(e,t,n){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(n);var r=i(e,t);return s[n].indexOf(r)>-1},i})?n.apply(t,[]):n)||(e.exports=r)},1958:(e,t,n)=>{n(7138),e.exports=n(4386).Object.assign},5417:(e,t,n)=>{n(9036);var r=n(4386).Object;e.exports=function(e,t){return r.create(e,t)}},9460:(e,t,n)=>{n(6019);var r=n(4386).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},2665:(e,t,n)=>{n(8511);var r=n(4386).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},8013:(e,t,n)=>{n(7141),e.exports=n(4386).Object.getPrototypeOf},292:(e,t,n)=>{n(2360),e.exports=n(4386).Object.keys},6171:(e,t,n)=>{n(7025),e.exports=n(4386).Object.setPrototypeOf},8481:(e,t,n)=>{n(3218),n(7394),n(4616),n(5174),e.exports=n(4386).Symbol},5738:(e,t,n)=>{n(1586),n(5130),e.exports=n(9232).f("iterator")},5425:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},6137:e=>{e.exports=function(){}},781:(e,t,n)=>{var r=n(1246);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},8363:(e,t,n)=>{var r=n(6917),i=n(4434),o=n(7339);e.exports=function(e){return function(t,n,s){var a,l=r(t),c=i(l.length),u=o(s,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}},5454:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},4386:e=>{var t=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=t)},4717:(e,t,n)=>{var r=n(5425);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},3111:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},477:(e,t,n)=>{e.exports=!n(3038)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},1455:(e,t,n)=>{var r=n(1246),i=n(3908).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},7352:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},3871:(e,t,n)=>{var r=n(7906),i=n(6130),o=n(5032);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var s,a=n(e),l=o.f,c=0;a.length>c;)l.call(e,s=a[c++])&&t.push(s);return t}},1290:(e,t,n)=>{var r=n(3908),i=n(4386),o=n(4717),s=n(1655),a=function(e,t,n){var l,c,u,h=e&a.F,p=e&a.G,d=e&a.S,m=e&a.P,f=e&a.B,g=e&a.W,y=p?i:i[t]||(i[t]={}),b=y.prototype,w=p?r:d?r[t]:(r[t]||{}).prototype;for(l in p&&(n=t),n)(c=!h&&w&&void 0!==w[l])&&l in y||(u=c?w[l]:n[l],y[l]=p&&"function"!=typeof w[l]?n[l]:f&&c?o(u,r):g&&w[l]==u?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):m&&"function"==typeof u?o(Function.call,u):u,m&&((y.virtual||(y.virtual={}))[l]=u,e&a.R&&b&&!b[l]&&s(b,l,u)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,e.exports=a},3038:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},3908:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},1820:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},1655:(e,t,n)=>{var r=n(8348),i=n(9759);e.exports=n(477)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},5394:(e,t,n)=>{var r=n(3908).document;e.exports=r&&r.documentElement},303:(e,t,n)=>{e.exports=!n(477)&&!n(3038)((function(){return 7!=Object.defineProperty(n(1455)("div"),"a",{get:function(){return 7}}).a}))},9201:(e,t,n)=>{var r=n(5454);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},3542:(e,t,n)=>{var r=n(5454);e.exports=Array.isArray||function(e){return"Array"==r(e)}},1246:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},5e3:(e,t,n)=>{"use strict";var r=n(5813),i=n(9759),o=n(4236),s={};n(1655)(s,n(6384)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:i(1,n)}),o(e,t+" Iterator")}},7673:(e,t,n)=>{"use strict";var r=n(7636),i=n(1290),o=n(7691),s=n(1655),a=n(1820),l=n(622),c=n(5e3),u=n(4236),h=n(233),p=n(6384)("iterator"),d=!([].keys&&"next"in[].keys()),m="keys",f="values",g=function(){return this};e.exports=function(e,t,n,y,b,w,v){c(n,t,y);var C,S,E,k=function(e){if(!d&&e in D)return D[e];switch(e){case m:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},R=t+" Iterator",x=b==f,T=!1,D=e.prototype,A=D[p]||D["@@iterator"]||b&&D[b],P=A||k(b),I=b?x?k("entries"):P:void 0,_="Array"==t&&D.entries||A;if(_&&(E=h(_.call(new e)))!==Object.prototype&&E.next&&(u(E,R,!0),r||a(E,p)||s(E,p,g)),x&&A&&A.name!==f&&(T=!0,P=function(){return A.call(this)}),r&&!v||!d&&!T&&D[p]||s(D,p,P),l[t]=P,l[R]=g,b)if(C={values:x?P:k(f),keys:w?P:k(m),entries:I},v)for(S in C)S in D||o(D,S,C[S]);else i(i.P+i.F*(d||T),t,C);return C}},8942:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},622:e=>{e.exports={}},7636:e=>{e.exports=!0},9603:(e,t,n)=>{var r=n(1167)("meta"),i=n(1246),o=n(1820),s=n(8348).f,a=0,l=Object.isExtensible||function(){return!0},c=!n(3038)((function(){return l(Object.preventExtensions({}))})),u=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&l(e)&&!o(e,r)&&u(e),e}}},7606:(e,t,n)=>{"use strict";var r=n(7906),i=n(6130),o=n(5032),s=n(9012),a=n(9201),l=Object.assign;e.exports=!l||n(3038)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=s(e),l=arguments.length,c=1,u=i.f,h=o.f;l>c;)for(var p,d=a(arguments[c++]),m=u?r(d).concat(u(d)):r(d),f=m.length,g=0;f>g;)h.call(d,p=m[g++])&&(n[p]=d[p]);return n}:l},5813:(e,t,n)=>{var r=n(781),i=n(9475),o=n(7352),s=n(3889)("IE_PROTO"),a=function(){},l=function(){var e,t=n(1455)("iframe"),r=o.length;for(t.style.display="none",n(5394).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=l(),void 0===t?n:i(n,t)}},8348:(e,t,n)=>{var r=n(781),i=n(303),o=n(9067),s=Object.defineProperty;t.f=n(477)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},9475:(e,t,n)=>{var r=n(8348),i=n(781),o=n(7906);e.exports=n(477)?Object.defineProperties:function(e,t){i(e);for(var n,s=o(t),a=s.length,l=0;a>l;)r.f(e,n=s[l++],t[n]);return e}},3106:(e,t,n)=>{var r=n(5032),i=n(9759),o=n(6917),s=n(9067),a=n(1820),l=n(303),c=Object.getOwnPropertyDescriptor;t.f=n(477)?c:function(e,t){if(e=o(e),t=s(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return i(!r.f.call(e,t),e[t])}},6286:(e,t,n)=>{var r=n(6917),i=n(3308).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return s.slice()}}(e):i(r(e))}},3308:(e,t,n)=>{var r=n(2764),i=n(7352).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},6130:(e,t)=>{t.f=Object.getOwnPropertySymbols},233:(e,t,n)=>{var r=n(1820),i=n(9012),o=n(3889)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},2764:(e,t,n)=>{var r=n(1820),i=n(6917),o=n(8363)(!1),s=n(3889)("IE_PROTO");e.exports=function(e,t){var n,a=i(e),l=0,c=[];for(n in a)n!=s&&r(a,n)&&c.push(n);for(;t.length>l;)r(a,n=t[l++])&&(~o(c,n)||c.push(n));return c}},7906:(e,t,n)=>{var r=n(2764),i=n(7352);e.exports=Object.keys||function(e){return r(e,i)}},5032:(e,t)=>{t.f={}.propertyIsEnumerable},9273:(e,t,n)=>{var r=n(1290),i=n(4386),o=n(3038);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",s)}},9759:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7691:(e,t,n)=>{e.exports=n(1655)},283:(e,t,n)=>{var r=n(1246),i=n(781),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(4717)(Function.call,n(3106).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},4236:(e,t,n)=>{var r=n(8348).f,i=n(1820),o=n(6384)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},3889:(e,t,n)=>{var r=n(9609)("keys"),i=n(1167);e.exports=function(e){return r[e]||(r[e]=i(e))}},9609:(e,t,n)=>{var r=n(3908),i="__core-js_shared__",o=r[i]||(r[i]={});e.exports=function(e){return o[e]||(o[e]={})}},5677:(e,t,n)=>{var r=n(2931),i=n(3111);e.exports=function(e){return function(t,n){var o,s,a=String(i(t)),l=r(n),c=a.length;return l<0||l>=c?e?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?e?a.charAt(l):o:e?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}}},7339:(e,t,n)=>{var r=n(2931),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},2931:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},6917:(e,t,n)=>{var r=n(9201),i=n(3111);e.exports=function(e){return r(i(e))}},4434:(e,t,n)=>{var r=n(2931),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},9012:(e,t,n)=>{var r=n(3111);e.exports=function(e){return Object(r(e))}},9067:(e,t,n)=>{var r=n(1246);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},1167:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},1191:(e,t,n)=>{var r=n(3908),i=n(4386),o=n(7636),s=n(9232),a=n(8348).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},9232:(e,t,n)=>{t.f=n(6384)},6384:(e,t,n)=>{var r=n(9609)("wks"),i=n(1167),o=n(3908).Symbol,s="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=r},6058:(e,t,n)=>{"use strict";var r=n(6137),i=n(8942),o=n(622),s=n(6917);e.exports=n(7673)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},7138:(e,t,n)=>{var r=n(1290);r(r.S+r.F,"Object",{assign:n(7606)})},9036:(e,t,n)=>{var r=n(1290);r(r.S,"Object",{create:n(5813)})},6019:(e,t,n)=>{var r=n(1290);r(r.S+r.F*!n(477),"Object",{defineProperty:n(8348).f})},8511:(e,t,n)=>{var r=n(6917),i=n(3106).f;n(9273)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},7141:(e,t,n)=>{var r=n(9012),i=n(233);n(9273)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},2360:(e,t,n)=>{var r=n(9012),i=n(7906);n(9273)("keys",(function(){return function(e){return i(r(e))}}))},7025:(e,t,n)=>{var r=n(1290);r(r.S,"Object",{setPrototypeOf:n(283).set})},7394:()=>{},1586:(e,t,n)=>{"use strict";var r=n(5677)(!0);n(7673)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},3218:(e,t,n)=>{"use strict";var r=n(3908),i=n(1820),o=n(477),s=n(1290),a=n(7691),l=n(9603).KEY,c=n(3038),u=n(9609),h=n(4236),p=n(1167),d=n(6384),m=n(9232),f=n(1191),g=n(3871),y=n(3542),b=n(781),w=n(6917),v=n(9067),C=n(9759),S=n(5813),E=n(6286),k=n(3106),R=n(8348),x=n(7906),T=k.f,D=R.f,A=E.f,P=r.Symbol,I=r.JSON,_=I&&I.stringify,N=d("_hidden"),O=d("toPrimitive"),M={}.propertyIsEnumerable,B=u("symbol-registry"),F=u("symbols"),L=u("op-symbols"),H=Object.prototype,U="function"==typeof P,W=r.QObject,$=!W||!W.prototype||!W.prototype.findChild,z=o&&c((function(){return 7!=S(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=T(H,t);r&&delete H[t],D(e,t,n),r&&e!==H&&D(H,t,r)}:D,q=function(e){var t=F[e]=S(P.prototype);return t._k=e,t},j=U&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},G=function(e,t,n){return e===H&&G(L,t,n),b(e),t=v(t,!0),b(n),i(F,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:C(0,!1)})):(i(e,N)||D(e,N,C(1,{})),e[N][t]=!0),z(e,t,n)):D(e,t,n)},V=function(e,t){b(e);for(var n,r=g(t=w(t)),i=0,o=r.length;o>i;)G(e,n=r[i++],t[n]);return e},K=function(e){var t=M.call(this,e=v(e,!0));return!(this===H&&i(F,e)&&!i(L,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,N)&&this[N][e])||t)},Y=function(e,t){if(e=w(e),t=v(t,!0),e!==H||!i(F,t)||i(L,t)){var n=T(e,t);return!n||!i(F,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=A(w(e)),r=[],o=0;n.length>o;)i(F,t=n[o++])||t==N||t==l||r.push(t);return r},Q=function(e){for(var t,n=e===H,r=A(n?L:w(e)),o=[],s=0;r.length>s;)!i(F,t=r[s++])||n&&!i(H,t)||o.push(F[t]);return o};U||(a((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call(L,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),z(this,e,C(1,n))};return o&&$&&z(H,e,{configurable:!0,set:t}),q(e)}).prototype,"toString",(function(){return this._k})),k.f=Y,R.f=G,n(3308).f=E.f=X,n(5032).f=K,n(6130).f=Q,o&&!n(7636)&&a(H,"propertyIsEnumerable",K,!0),m.f=function(e){return q(d(e))}),s(s.G+s.W+s.F*!U,{Symbol:P});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),J=0;Z.length>J;)d(Z[J++]);for(var ee=x(d.store),te=0;ee.length>te;)f(ee[te++]);s(s.S+s.F*!U,"Symbol",{for:function(e){return i(B,e+="")?B[e]:B[e]=P(e)},keyFor:function(e){if(!j(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){$=!0},useSimple:function(){$=!1}}),s(s.S+s.F*!U,"Object",{create:function(e,t){return void 0===t?S(e):V(S(e),t)},defineProperty:G,defineProperties:V,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),I&&s(s.S+s.F*(!U||c((function(){var e=P();return"[null]"!=_([e])||"{}"!=_({a:e})||"{}"!=_(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!j(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return"function"==typeof(t=r[1])&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!j(t))return t}),r[1]=t,_.apply(I,r)}}}),P.prototype[O]||n(1655)(P.prototype,O,P.prototype.valueOf),h(P,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},4616:(e,t,n)=>{n(1191)("asyncIterator")},5174:(e,t,n)=>{n(1191)("observable")},5130:(e,t,n)=>{n(6058);for(var r=n(3908),i=n(1655),o=n(622),s=n(6384)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var c=a[l],u=r[c],h=u&&u.prototype;h&&!h[s]&&i(h,s,c),o[c]=o.Array}},3861:(e,t,n)=>{"use strict";const r=n(2081),i=n(8032),o=n(463);function s(e,t,n){const s=i(e,t,n),a=r.spawn(s.command,s.args,s.options);return o.hookChildProcess(a,s),a}e.exports=s,e.exports.spawn=s,e.exports.sync=function(e,t,n){const s=i(e,t,n),a=r.spawnSync(s.command,s.args,s.options);return a.error=a.error||o.verifyENOENTSync(a.status,s),a},e.exports._parse=i,e.exports._enoent=o},463:e=>{"use strict";e.exports={hookChildProcess:function(e,t){},verifyENOENT:function(e,t){return null},verifyENOENTSync:function(e,t){return null},notFoundError:function(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}}},8032:(e,t,n)=>{"use strict";n(1017);const r=n(5419),i=(n(9573),n(546),n(5339),n(7891)),o=r((()=>i.satisfies(process.version,"^4.8.0 || ^5.7.0 || >= 6.0.0",!0)))||!1;e.exports=function(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null);const r={command:e,args:t=t?t.slice(0):[],options:n=Object.assign({},n),file:void 0,original:{command:e,args:t}};return n.shell?function(e){if(o)return e;const t=[e.command].concat(e.args).join(" ");return"string"==typeof e.options.shell?e.command=e.options.shell:e.command="/bin/sh",e.args=["-c",t],e}(r):r}},546:e=>{"use strict";const t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e.replace(t,"^$1")},e.exports.argument=function(e,n){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(t,"^$1"),n&&(e=e.replace(t,"^$1")),e}},5339:(e,t,n)=>{"use strict";const r=n(7147),i=n(7306);e.exports=function(e){let t,n;Buffer.alloc?t=Buffer.alloc(150):(t=new Buffer(150),t.fill(0));try{n=r.openSync(e,"r"),r.readSync(n,t,0,150,0),r.closeSync(n)}catch(e){}return i(t.toString())}},9573:(e,t,n)=>{"use strict";const r=n(1017),i=n(9891),o=n(5620)();function s(e,t){const n=process.cwd(),s=null!=e.options.cwd;if(s)try{process.chdir(e.options.cwd)}catch(e){}let a;try{a=i.sync(e.command,{path:(e.options.env||process.env)[o],pathExt:t?r.delimiter:void 0})}catch(e){}finally{process.chdir(n)}return a&&(a=r.resolve(s?e.options.cwd:"",a)),a}e.exports=function(e){return s(e)||s(e,!0)}},9177:(e,t,n)=>{var r=Array.prototype.slice,i=n(5674),o=n(1031),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var c,u;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=r.call(e),t=r.call(t),s(e,t,n));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var h=i(e),p=i(t)}catch(e){return!1}if(h.length!=p.length)return!1;for(h.sort(),p.sort(),c=h.length-1;c>=0;c--)if(h[c]!=p[c])return!1;for(c=h.length-1;c>=0;c--)if(u=h[c],!s(e[u],t[u],n))return!1;return typeof e==typeof t}(e,t,n))};function a(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},1031:(e,t)=>{var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},5674:(e,t)=>{function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},9379:(e,t,n)=>{"use strict";var r=n(7231);Object.defineProperty(t,"X",{enumerable:!0,get:function(){return r.getNotificationsPermission}}),Object.defineProperty(t,"QJ",{enumerable:!0,get:function(){return r.requestNotificationsPermission}});var i=n(7344);Object.defineProperty(t,"VB",{enumerable:!0,get:function(){return i.supportsNotifications}}),Object.defineProperty(t,"YF",{enumerable:!0,get:function(){return i.supportsNotificationsPermissionRequest}});var o=n(7838);Object.defineProperty(t,"Y4",{enumerable:!0,get:function(){return o.getNotificationSettingsUrl}});n(4747)},7231:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.closeNotification=t.showNotification=t.requestNotificationsPermission=t.getNotificationsPermission=t.terminateNotifications=t.initializeNotifications=void 0;const i=n(7344),o=n(4747),s=n(6776);let a;function l(){return void 0!==a||(a=i.supportsNotifications()?n(33):null),a}t.initializeNotifications=e=>{var t;return null===(t=l())||void 0===t?void 0:t.initializeNotifications(o.notificationCallback,e)},t.terminateNotifications=()=>{var e;return null===(e=l())||void 0===e?void 0:e.terminateNotifications()},t.getNotificationsPermission=()=>{var e;return null===(e=l())||void 0===e?void 0:e.getNotificationsPermission()},t.requestNotificationsPermission=()=>{var e;return null===(e=l())||void 0===e?void 0:e.requestNotificationsPermission()},t.showNotification=(...e)=>r(void 0,void 0,void 0,(function*(){var t;const n=s.v4();try{yield null===(t=l())||void 0===t?void 0:t.showNotification(n,...e)}catch(e){return null}return n})),t.closeNotification=(...e)=>{var t;return null===(t=l())||void 0===t?void 0:t.closeNotification(...e)}},4747:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onNotificationEvent=t.notificationCallback=void 0;let n=null;t.notificationCallback=(...e)=>null==n?void 0:n(...e),t.onNotificationEvent=e=>{n=e}},7838:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNotificationSettingsUrl=void 0;const r=n(7344);t.getNotificationSettingsUrl=function(){return r.supportsNotifications()?"x-apple.systempreferences:com.apple.preference.notifications":null}},7344:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsNotificationsPermissionRequest=t.supportsNotifications=void 0;const r=n(2037);function i(){const e=r.release().split(".");return parseInt(e[0],10)>=18}t.supportsNotifications=function(){return i()},t.supportsNotificationsPermissionRequest=function(){return i()}},6776:(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{NIL:()=>P,parse:()=>g,stringify:()=>u,v1:()=>f,v3:()=>R,v4:()=>x,v5:()=>A,validate:()=>a,version:()=>I});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&s.test(e)};for(var l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!a(n))throw TypeError("Stringified UUID is invalid");return n};var h,p,d=0,m=0;const f=function(e,t,n){var r=t&&n||0,i=t||new Array(16),s=(e=e||{}).node||h,a=void 0!==e.clockseq?e.clockseq:p;if(null==s||null==a){var l=e.random||(e.rng||o)();null==s&&(s=h=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==a&&(a=p=16383&(l[6]<<8|l[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:m+1,g=c-d+(f-m)/1e4;if(g<0&&void 0===e.clockseq&&(a=a+1&16383),(g<0||c>d)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=c,m=f,p=a;var y=(1e4*(268435455&(c+=122192928e5))+f)%4294967296;i[r++]=y>>>24&255,i[r++]=y>>>16&255,i[r++]=y>>>8&255,i[r++]=255&y;var b=c/4294967296*1e4&268435455;i[r++]=b>>>8&255,i[r++]=255&b,i[r++]=b>>>24&15|16,i[r++]=b>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var w=0;w<6;++w)i[r+w]=s[w];return t||u(i)},g=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function y(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),(s=n(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return u(s)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function b(e){return 14+(e+64>>>9<<4)+1}function w(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function v(e,t,n,r,i,o){return w((s=w(w(t,e),w(r,o)))<<(a=i)|s>>>32-a,n);var s,a}function C(e,t,n,r,i,o,s){return v(t&n|~t&r,e,t,i,o,s)}function S(e,t,n,r,i,o,s){return v(t&r|n&~r,e,t,i,o,s)}function E(e,t,n,r,i,o,s){return v(t^n^r,e,t,i,o,s)}function k(e,t,n,r,i,o,s){return v(n^(t|~r),e,t,i,o,s)}const R=y("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[b(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,l=r,c=i,u=o;n=C(n,r,i,o,e[s],7,-680876936),o=C(o,n,r,i,e[s+1],12,-389564586),i=C(i,o,n,r,e[s+2],17,606105819),r=C(r,i,o,n,e[s+3],22,-1044525330),n=C(n,r,i,o,e[s+4],7,-176418897),o=C(o,n,r,i,e[s+5],12,1200080426),i=C(i,o,n,r,e[s+6],17,-1473231341),r=C(r,i,o,n,e[s+7],22,-45705983),n=C(n,r,i,o,e[s+8],7,1770035416),o=C(o,n,r,i,e[s+9],12,-1958414417),i=C(i,o,n,r,e[s+10],17,-42063),r=C(r,i,o,n,e[s+11],22,-1990404162),n=C(n,r,i,o,e[s+12],7,1804603682),o=C(o,n,r,i,e[s+13],12,-40341101),i=C(i,o,n,r,e[s+14],17,-1502002290),n=S(n,r=C(r,i,o,n,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=S(o,n,r,i,e[s+6],9,-1069501632),i=S(i,o,n,r,e[s+11],14,643717713),r=S(r,i,o,n,e[s],20,-373897302),n=S(n,r,i,o,e[s+5],5,-701558691),o=S(o,n,r,i,e[s+10],9,38016083),i=S(i,o,n,r,e[s+15],14,-660478335),r=S(r,i,o,n,e[s+4],20,-405537848),n=S(n,r,i,o,e[s+9],5,568446438),o=S(o,n,r,i,e[s+14],9,-1019803690),i=S(i,o,n,r,e[s+3],14,-187363961),r=S(r,i,o,n,e[s+8],20,1163531501),n=S(n,r,i,o,e[s+13],5,-1444681467),o=S(o,n,r,i,e[s+2],9,-51403784),i=S(i,o,n,r,e[s+7],14,1735328473),n=E(n,r=S(r,i,o,n,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=E(o,n,r,i,e[s+8],11,-2022574463),i=E(i,o,n,r,e[s+11],16,1839030562),r=E(r,i,o,n,e[s+14],23,-35309556),n=E(n,r,i,o,e[s+1],4,-1530992060),o=E(o,n,r,i,e[s+4],11,1272893353),i=E(i,o,n,r,e[s+7],16,-155497632),r=E(r,i,o,n,e[s+10],23,-1094730640),n=E(n,r,i,o,e[s+13],4,681279174),o=E(o,n,r,i,e[s],11,-358537222),i=E(i,o,n,r,e[s+3],16,-722521979),r=E(r,i,o,n,e[s+6],23,76029189),n=E(n,r,i,o,e[s+9],4,-640364487),o=E(o,n,r,i,e[s+12],11,-421815835),i=E(i,o,n,r,e[s+15],16,530742520),n=k(n,r=E(r,i,o,n,e[s+2],23,-995338651),i,o,e[s],6,-198630844),o=k(o,n,r,i,e[s+7],10,1126891415),i=k(i,o,n,r,e[s+14],15,-1416354905),r=k(r,i,o,n,e[s+5],21,-57434055),n=k(n,r,i,o,e[s+12],6,1700485571),o=k(o,n,r,i,e[s+3],10,-1894986606),i=k(i,o,n,r,e[s+10],15,-1051523),r=k(r,i,o,n,e[s+1],21,-2054922799),n=k(n,r,i,o,e[s+8],6,1873313359),o=k(o,n,r,i,e[s+15],10,-30611744),i=k(i,o,n,r,e[s+6],15,-1560198380),r=k(r,i,o,n,e[s+13],21,1309151649),n=k(n,r,i,o,e[s+4],6,-145523070),o=k(o,n,r,i,e[s+11],10,-1120210379),i=k(i,o,n,r,e[s+2],15,718787259),r=k(r,i,o,n,e[s+9],21,-343485551),n=w(n,a),r=w(r,l),i=w(i,c),o=w(o,u)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(b(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))})),x=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return u(r)};function T(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function D(e,t){return e<<t|e>>>32-t}const A=y("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];a[l]=c}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var p=new Uint32Array(80),d=0;d<16;++d)p[d]=a[h][d];for(var m=16;m<80;++m)p[m]=D(p[m-3]^p[m-8]^p[m-14]^p[m-16],1);for(var f=n[0],g=n[1],y=n[2],b=n[3],w=n[4],v=0;v<80;++v){var C=Math.floor(v/20),S=D(f,5)+T(C,g,y,b)+w+t[C]+p[v]>>>0;w=b,b=y,y=D(g,30)>>>0,g=f,f=S}n[0]=n[0]+f>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+b>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),P="00000000-0000-0000-0000-000000000000",I=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},2750:(e,t,n)=>{const r=n(1017);function i(){return"desktop-trampoline"}function o(){return"ssh-wrapper"}e.exports={getDesktopTrampolinePath:function(){return r.join(__dirname,"build","Release","desktop-trampoline")},getDesktopTrampolineFilename:i,getSSHWrapperPath:function(){return r.join(__dirname,"build","Release","ssh-wrapper")},getSSHWrapperFilename:o}},2843:(e,t,n)=>{"use strict";var r=n(1553);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=r(n(6295));e.exports=t.default},6295:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},3199:e=>{"use strict";function t(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,n){e.classList?e.classList.remove(n):"string"==typeof e.className?e.className=t(e.className,n):e.setAttribute("class",t(e.className&&e.className.baseVal||"",n))}},1553:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},1721:(e,t,n)=>{"use strict";var r=n(1553);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var i,o,s,a,l,c,u,h,p,d,m,f=r(n(2184)),g="transform";if(t.transform=g,t.animationEnd=s,t.transitionEnd=o,t.transitionDelay=u,t.transitionTiming=c,t.transitionDuration=l,t.transitionProperty=a,t.animationDelay=m,t.animationTiming=d,t.animationDuration=p,t.animationName=h,f.default){var y=function(){for(var e,t,n=document.createElement("div").style,r={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},i=Object.keys(r),o="",s=0;s<i.length;s++){var a=i[s];if(a+"TransitionProperty"in n){o="-"+a.toLowerCase(),e=r[a]("TransitionEnd"),t=r[a]("AnimationEnd");break}}return!e&&"transitionProperty"in n&&(e="transitionend"),!t&&"animationName"in n&&(t="animationend"),n=null,{animationEnd:t,transitionEnd:e,prefix:o}}();i=y.prefix,t.transitionEnd=o=y.transitionEnd,t.animationEnd=s=y.animationEnd,t.transform=g=i+"-"+g,t.transitionProperty=a=i+"-transition-property",t.transitionDuration=l=i+"-transition-duration",t.transitionDelay=u=i+"-transition-delay",t.transitionTiming=c=i+"-transition-timing-function",t.animationName=h=i+"-animation-name",t.animationDuration=p=i+"-animation-duration",t.animationTiming=d=i+"-animation-delay",t.animationDelay=m=i+"-animation-timing-function"}var b={transform:g,end:o,property:a,timing:c,delay:u,duration:l};t.default=b},2184:(e,t)=>{"use strict";t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default},1388:(e,t,n)=>{"use strict";var r=n(1553);t.__esModule=!0,t.default=void 0;var i,o=r(n(2184)),s="clearTimeout",a=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),r=setTimeout(e,n);return c=t,r},l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&["","webkit","moz","o","ms"].some((function(e){var t=l(e,"request");if(t in window)return s=l(e,"cancel"),a=function(e){return window[t](e)}}));var c=(new Date).getTime();(i=function(e){return a(e)}).cancel=function(e){window[s]&&"function"==typeof window[s]&&window[s](e)};var u=i;t.default=u,e.exports=t.default},6328:(e,t,n)=>{"use strict";var r=n(1553);t.__esModule=!0,t.default=function(e){if((!i&&0!==i||e)&&o.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),i=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return i};var i,o=r(n(2184));e.exports=t.default},746:function(e){e.exports=function(){"use strict";var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,r=Object.getPrototypeOf,i=Object.getOwnPropertyDescriptor,o=Object.freeze,s=Object.seal,a=Object.create,l="undefined"!=typeof Reflect&&Reflect,c=l.apply,u=l.construct;c||(c=function(e,t,n){return e.apply(t,n)}),o||(o=function(e){return e}),s||(s=function(e){return e}),u||(u=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var h,p=S(Array.prototype.forEach),d=S(Array.prototype.pop),m=S(Array.prototype.push),f=S(String.prototype.toLowerCase),g=S(String.prototype.match),y=S(String.prototype.replace),b=S(String.prototype.indexOf),w=S(String.prototype.trim),v=S(RegExp.prototype.test),C=(h=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(h,t)});function S(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return c(e,t,r)}}function E(e,r){t&&t(e,null);for(var i=r.length;i--;){var o=r[i];if("string"==typeof o){var s=f(o);s!==o&&(n(r)||(r[i]=s),o=s)}e[o]=!0}return e}function k(t){var n=a(null),r=void 0;for(r in t)c(e,t,[r])&&(n[r]=t[r]);return n}function R(e,t){for(;null!==e;){var n=i(e,t);if(n){if(n.get)return S(n.get);if("function"==typeof n.value)return S(n.value)}e=r(e)}return function(e){return console.warn("fallback value for",e),null}}var x=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),T=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=o(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),P=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),I=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_=o(["#text"]),N=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),O=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),B=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),L=s(/<%[\s\S]*|[\s\S]*%>/gm),H=s(/^data-[\-\w.\u00B7-\uFFFF]/),U=s(/^aria-[\-\w]+$/),W=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$=s(/^(?:\w+script|data):/i),z=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function j(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var G=function(){return"undefined"==typeof window?null:window},V=function(e,t){if("object"!==(void 0===e?"undefined":q(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G(),n=function(t){return e(t)};if(n.version="2.3.3",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,s=t.DocumentFragment,a=t.HTMLTemplateElement,l=t.Node,c=t.Element,u=t.NodeFilter,h=t.NamedNodeMap,S=void 0===h?t.NamedNodeMap||t.MozNamedAttrMap:h,K=t.Text,Y=t.Comment,X=t.DOMParser,Q=t.trustedTypes,Z=c.prototype,J=R(Z,"cloneNode"),ee=R(Z,"nextSibling"),te=R(Z,"childNodes"),ne=R(Z,"parentNode");if("function"==typeof a){var re=i.createElement("template");re.content&&re.content.ownerDocument&&(i=re.content.ownerDocument)}var ie=V(Q,r),oe=ie&&Fe?ie.createHTML(""):"",se=i,ae=se.implementation,le=se.createNodeIterator,ce=se.createDocumentFragment,ue=se.getElementsByTagName,he=r.importNode,pe={};try{pe=k(i).documentMode?i.documentMode:{}}catch(e){}var de={};n.isSupported="function"==typeof ne&&ae&&void 0!==ae.createHTMLDocument&&9!==pe;var me=F,fe=L,ge=H,ye=U,be=$,we=z,ve=W,Ce=null,Se=E({},[].concat(j(x),j(T),j(D),j(P),j(_))),Ee=null,ke=E({},[].concat(j(N),j(O),j(M),j(B))),Re=null,xe=null,Te=!0,De=!0,Ae=!1,Pe=!1,Ie=!1,_e=!1,Ne=!1,Oe=!1,Me=!1,Be=!0,Fe=!1,Le=!0,He=!0,Ue=!1,We={},$e=null,ze=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qe=null,je=E({},["audio","video","img","source","image","track"]),Ge=null,Ve=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ke="http://www.w3.org/1998/Math/MathML",Ye="http://www.w3.org/2000/svg",Xe="http://www.w3.org/1999/xhtml",Qe=Xe,Ze=!1,Je=void 0,et=["application/xhtml+xml","text/html"],tt="text/html",nt=void 0,rt=null,it=i.createElement("form"),ot=function(e){rt&&rt===e||(e&&"object"===(void 0===e?"undefined":q(e))||(e={}),e=k(e),Ce="ALLOWED_TAGS"in e?E({},e.ALLOWED_TAGS):Se,Ee="ALLOWED_ATTR"in e?E({},e.ALLOWED_ATTR):ke,Ge="ADD_URI_SAFE_ATTR"in e?E(k(Ve),e.ADD_URI_SAFE_ATTR):Ve,qe="ADD_DATA_URI_TAGS"in e?E(k(je),e.ADD_DATA_URI_TAGS):je,$e="FORBID_CONTENTS"in e?E({},e.FORBID_CONTENTS):ze,Re="FORBID_TAGS"in e?E({},e.FORBID_TAGS):{},xe="FORBID_ATTR"in e?E({},e.FORBID_ATTR):{},We="USE_PROFILES"in e&&e.USE_PROFILES,Te=!1!==e.ALLOW_ARIA_ATTR,De=!1!==e.ALLOW_DATA_ATTR,Ae=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=e.SAFE_FOR_TEMPLATES||!1,Ie=e.WHOLE_DOCUMENT||!1,Oe=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,Be=!1!==e.RETURN_DOM_IMPORT,Fe=e.RETURN_TRUSTED_TYPE||!1,Ne=e.FORCE_BODY||!1,Le=!1!==e.SANITIZE_DOM,He=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,ve=e.ALLOWED_URI_REGEXP||ve,Qe=e.NAMESPACE||Xe,Je=Je=-1===et.indexOf(e.PARSER_MEDIA_TYPE)?tt:e.PARSER_MEDIA_TYPE,nt="application/xhtml+xml"===Je?function(e){return e}:f,Pe&&(De=!1),Me&&(Oe=!0),We&&(Ce=E({},[].concat(j(_))),Ee=[],!0===We.html&&(E(Ce,x),E(Ee,N)),!0===We.svg&&(E(Ce,T),E(Ee,O),E(Ee,B)),!0===We.svgFilters&&(E(Ce,D),E(Ee,O),E(Ee,B)),!0===We.mathMl&&(E(Ce,P),E(Ee,M),E(Ee,B))),e.ADD_TAGS&&(Ce===Se&&(Ce=k(Ce)),E(Ce,e.ADD_TAGS)),e.ADD_ATTR&&(Ee===ke&&(Ee=k(Ee)),E(Ee,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&E(Ge,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&($e===ze&&($e=k($e)),E($e,e.FORBID_CONTENTS)),He&&(Ce["#text"]=!0),Ie&&E(Ce,["html","head","body"]),Ce.table&&(E(Ce,["tbody"]),delete Re.tbody),o&&o(e),rt=e)},st=E({},["mi","mo","mn","ms","mtext"]),at=E({},["foreignobject","desc","title","annotation-xml"]),lt=E({},T);E(lt,D),E(lt,A);var ct=E({},P);E(ct,I);var ut=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:Xe,tagName:"template"});var n=f(e.tagName),r=f(t.tagName);if(e.namespaceURI===Ye)return t.namespaceURI===Xe?"svg"===n:t.namespaceURI===Ke?"svg"===n&&("annotation-xml"===r||st[r]):Boolean(lt[n]);if(e.namespaceURI===Ke)return t.namespaceURI===Xe?"math"===n:t.namespaceURI===Ye?"math"===n&&at[r]:Boolean(ct[n]);if(e.namespaceURI===Xe){if(t.namespaceURI===Ye&&!at[r])return!1;if(t.namespaceURI===Ke&&!st[r])return!1;var i=E({},["title","style","font","a","script"]);return!ct[n]&&(i[n]||!lt[n])}return!1},ht=function(e){m(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=oe}catch(t){e.remove()}}},pt=function(e,t){try{m(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){m(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Ee[e])if(Oe||Me)try{ht(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},dt=function(e){var t=void 0,n=void 0;if(Ne)e="<remove></remove>"+e;else{var r=g(e,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===Je&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=ie?ie.createHTML(e):e;if(Qe===Xe)try{t=(new X).parseFromString(o,Je)}catch(e){}if(!t||!t.documentElement){t=ae.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=Ze?"":o}catch(e){}}var s=t.body||t.documentElement;return e&&n&&s.insertBefore(i.createTextNode(n),s.childNodes[0]||null),Qe===Xe?ue.call(t,Ie?"html":"body")[0]:Ie?t.documentElement:s},mt=function(e){return le.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},ft=function(e){return!(e instanceof K||e instanceof Y||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof S&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},gt=function(e){return"object"===(void 0===l?"undefined":q(l))?e instanceof l:e&&"object"===(void 0===e?"undefined":q(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},yt=function(e,t,r){de[e]&&p(de[e],(function(e){e.call(n,t,r,rt)}))},bt=function(e){var t=void 0;if(yt("beforeSanitizeElements",e,null),ft(e))return ht(e),!0;if(g(e.nodeName,/[\u0080-\uFFFF]/))return ht(e),!0;var r=nt(e.nodeName);if(yt("uponSanitizeElement",e,{tagName:r,allowedTags:Ce}),!gt(e.firstElementChild)&&(!gt(e.content)||!gt(e.content.firstElementChild))&&v(/<[/\w]/g,e.innerHTML)&&v(/<[/\w]/g,e.textContent))return ht(e),!0;if("select"===r&&v(/<template/i,e.innerHTML))return ht(e),!0;if(!Ce[r]||Re[r]){if(He&&!$e[r]){var i=ne(e)||e.parentNode,o=te(e)||e.childNodes;if(o&&i)for(var s=o.length-1;s>=0;--s)i.insertBefore(J(o[s],!0),ee(e))}return ht(e),!0}return e instanceof c&&!ut(e)?(ht(e),!0):"noscript"!==r&&"noembed"!==r||!v(/<\/no(script|embed)/i,e.innerHTML)?(Pe&&3===e.nodeType&&(t=e.textContent,t=y(t,me," "),t=y(t,fe," "),e.textContent!==t&&(m(n.removed,{element:e.cloneNode()}),e.textContent=t)),yt("afterSanitizeElements",e,null),!1):(ht(e),!0)},wt=function(e,t,n){if(Le&&("id"===t||"name"===t)&&(n in i||n in it))return!1;if(De&&!xe[t]&&v(ge,t));else if(Te&&v(ye,t));else{if(!Ee[t]||xe[t])return!1;if(Ge[t]);else if(v(ve,y(n,we,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==b(n,"data:")||!qe[e])if(Ae&&!v(be,y(n,we,"")));else if(n)return!1}return!0},vt=function(e){var t=void 0,r=void 0,i=void 0,o=void 0;yt("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ee};for(o=s.length;o--;){var l=t=s[o],c=l.name,u=l.namespaceURI;if(r=w(t.value),i=nt(c),a.attrName=i,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,yt("uponSanitizeAttribute",e,a),r=a.attrValue,!a.forceKeepAttr&&(pt(c,e),a.keepAttr))if(v(/\/>/i,r))pt(c,e);else{Pe&&(r=y(r,me," "),r=y(r,fe," "));var h=nt(e.nodeName);if(wt(h,i,r))try{u?e.setAttributeNS(u,c,r):e.setAttribute(c,r),d(n.removed)}catch(e){}}}yt("afterSanitizeAttributes",e,null)}},Ct=function e(t){var n=void 0,r=mt(t);for(yt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)yt("uponSanitizeShadowNode",n,null),bt(n)||(n.content instanceof s&&e(n.content),vt(n));yt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var o=void 0,a=void 0,c=void 0,u=void 0,h=void 0;if((Ze=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!gt(e)){if("function"!=typeof e.toString)throw C("toString is not a function");if("string"!=typeof(e=e.toString()))throw C("dirty is not a string, aborting")}if(!n.isSupported){if("object"===q(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(gt(e))return t.toStaticHTML(e.outerHTML)}return e}if(_e||ot(i),n.removed=[],"string"==typeof e&&(Ue=!1),Ue);else if(e instanceof l)1===(a=(o=dt("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?o=a:o.appendChild(a);else{if(!Oe&&!Pe&&!Ie&&-1===e.indexOf("<"))return ie&&Fe?ie.createHTML(e):e;if(!(o=dt(e)))return Oe?null:oe}o&&Ne&&ht(o.firstChild);for(var p=mt(Ue?e:o);c=p.nextNode();)3===c.nodeType&&c===u||bt(c)||(c.content instanceof s&&Ct(c.content),vt(c),u=c);if(u=null,Ue)return e;if(Oe){if(Me)for(h=ce.call(o.ownerDocument);o.firstChild;)h.appendChild(o.firstChild);else h=o;return Be&&(h=he.call(r,h,!0)),h}var d=Ie?o.outerHTML:o.innerHTML;return Pe&&(d=y(d,me," "),d=y(d,fe," ")),ie&&Fe?ie.createHTML(d):d},n.setConfig=function(e){ot(e),_e=!0},n.clearConfig=function(){rt=null,_e=!1},n.isValidAttribute=function(e,t,n){rt||ot({});var r=nt(e),i=nt(t);return wt(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(de[e]=de[e]||[],m(de[e],t))},n.removeHook=function(e){de[e]&&d(de[e])},n.removeHooks=function(e){de[e]&&(de[e]=[])},n.removeAllHooks=function(){de={}},n}()}()},9969:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RepositoryDoesNotExistErrorCode=t.GitNotFoundErrorCode=t.GitErrorRegexes=t.GitError=void 0,function(e){e[e.SSHKeyAuditUnverified=0]="SSHKeyAuditUnverified",e[e.SSHAuthenticationFailed=1]="SSHAuthenticationFailed",e[e.SSHPermissionDenied=2]="SSHPermissionDenied",e[e.HTTPSAuthenticationFailed=3]="HTTPSAuthenticationFailed",e[e.RemoteDisconnection=4]="RemoteDisconnection",e[e.HostDown=5]="HostDown",e[e.RebaseConflicts=6]="RebaseConflicts",e[e.MergeConflicts=7]="MergeConflicts",e[e.HTTPSRepositoryNotFound=8]="HTTPSRepositoryNotFound",e[e.SSHRepositoryNotFound=9]="SSHRepositoryNotFound",e[e.PushNotFastForward=10]="PushNotFastForward",e[e.BranchDeletionFailed=11]="BranchDeletionFailed",e[e.DefaultBranchDeletionFailed=12]="DefaultBranchDeletionFailed",e[e.RevertConflicts=13]="RevertConflicts",e[e.EmptyRebasePatch=14]="EmptyRebasePatch",e[e.NoMatchingRemoteBranch=15]="NoMatchingRemoteBranch",e[e.NoExistingRemoteBranch=16]="NoExistingRemoteBranch",e[e.NothingToCommit=17]="NothingToCommit",e[e.NoSubmoduleMapping=18]="NoSubmoduleMapping",e[e.SubmoduleRepositoryDoesNotExist=19]="SubmoduleRepositoryDoesNotExist",e[e.InvalidSubmoduleSHA=20]="InvalidSubmoduleSHA",e[e.LocalPermissionDenied=21]="LocalPermissionDenied",e[e.InvalidMerge=22]="InvalidMerge",e[e.InvalidRebase=23]="InvalidRebase",e[e.NonFastForwardMergeIntoEmptyHead=24]="NonFastForwardMergeIntoEmptyHead",e[e.PatchDoesNotApply=25]="PatchDoesNotApply",e[e.BranchAlreadyExists=26]="BranchAlreadyExists",e[e.BadRevision=27]="BadRevision",e[e.NotAGitRepository=28]="NotAGitRepository",e[e.CannotMergeUnrelatedHistories=29]="CannotMergeUnrelatedHistories",e[e.LFSAttributeDoesNotMatch=30]="LFSAttributeDoesNotMatch",e[e.BranchRenameFailed=31]="BranchRenameFailed",e[e.PathDoesNotExist=32]="PathDoesNotExist",e[e.InvalidObjectName=33]="InvalidObjectName",e[e.OutsideRepository=34]="OutsideRepository",e[e.LockFileAlreadyExists=35]="LockFileAlreadyExists",e[e.NoMergeToAbort=36]="NoMergeToAbort",e[e.LocalChangesOverwritten=37]="LocalChangesOverwritten",e[e.UnresolvedConflicts=38]="UnresolvedConflicts",e[e.GPGFailedToSignData=39]="GPGFailedToSignData",e[e.ConflictModifyDeletedInBranch=40]="ConflictModifyDeletedInBranch",e[e.PushWithFileSizeExceedingLimit=41]="PushWithFileSizeExceedingLimit",e[e.HexBranchNameRejected=42]="HexBranchNameRejected",e[e.ForcePushRejected=43]="ForcePushRejected",e[e.InvalidRefLength=44]="InvalidRefLength",e[e.ProtectedBranchRequiresReview=45]="ProtectedBranchRequiresReview",e[e.ProtectedBranchForcePush=46]="ProtectedBranchForcePush",e[e.ProtectedBranchDeleteRejected=47]="ProtectedBranchDeleteRejected",e[e.ProtectedBranchRequiredStatus=48]="ProtectedBranchRequiredStatus",e[e.PushWithPrivateEmail=49]="PushWithPrivateEmail",e[e.ConfigLockFileAlreadyExists=50]="ConfigLockFileAlreadyExists",e[e.RemoteAlreadyExists=51]="RemoteAlreadyExists",e[e.TagAlreadyExists=52]="TagAlreadyExists",e[e.MergeWithLocalChanges=53]="MergeWithLocalChanges",e[e.RebaseWithLocalChanges=54]="RebaseWithLocalChanges",e[e.MergeCommitNoMainlineOption=55]="MergeCommitNoMainlineOption",e[e.UnsafeDirectory=56]="UnsafeDirectory",e[e.PathExistsButNotInRef=57]="PathExistsButNotInRef"}(n=t.GitError||(t.GitError={})),t.GitErrorRegexes={"ERROR: ([\\s\\S]+?)\\n+\\[EPOLICYKEYAGE\\]\\n+fatal: Could not read from remote repository.":n.SSHKeyAuditUnverified,"fatal: Authentication failed for 'https://":n.HTTPSAuthenticationFailed,"fatal: Authentication failed":n.SSHAuthenticationFailed,"fatal: Could not read from remote repository.":n.SSHPermissionDenied,"The requested URL returned error: 403":n.HTTPSAuthenticationFailed,"fatal: [Tt]he remote end hung up unexpectedly":n.RemoteDisconnection,"fatal: unable to access '(.+)': Failed to connect to (.+): Host is down":n.HostDown,"Cloning into '(.+)'...\nfatal: unable to access '(.+)': Could not resolve host: (.+)":n.HostDown,"Resolve all conflicts manually, mark them as resolved with":n.RebaseConflicts,"(Merge conflict|Automatic merge failed; fix conflicts and then commit the result)":n.MergeConflicts,"fatal: repository '(.+)' not found":n.HTTPSRepositoryNotFound,"ERROR: Repository not found":n.SSHRepositoryNotFound,"\\((non-fast-forward|fetch first)\\)\nerror: failed to push some refs to '.*'":n.PushNotFastForward,"error: unable to delete '(.+)': remote ref does not exist":n.BranchDeletionFailed,"\\[remote rejected\\] (.+) \\(deletion of the current branch prohibited\\)":n.DefaultBranchDeletionFailed,"error: could not revert .*\nhint: after resolving the conflicts, mark the corrected paths\nhint: with 'git add <paths>' or 'git rm <paths>'\nhint: and commit the result with 'git commit'":n.RevertConflicts,"Applying: .*\nNo changes - did you forget to use 'git add'\\?\nIf there is nothing left to stage, chances are that something else\n.*":n.EmptyRebasePatch,"There are no candidates for (rebasing|merging) among the refs that you just fetched.\nGenerally this means that you provided a wildcard refspec which had no\nmatches on the remote end.":n.NoMatchingRemoteBranch,"Your configuration specifies to merge with the ref '(.+)'\nfrom the remote, but no such ref was fetched.":n.NoExistingRemoteBranch,"nothing to commit":n.NothingToCommit,"[Nn]o submodule mapping found in .gitmodules for path '(.+)'":n.NoSubmoduleMapping,"fatal: repository '(.+)' does not exist\nfatal: clone of '.+' into submodule path '(.+)' failed":n.SubmoduleRepositoryDoesNotExist,"Fetched in submodule path '(.+)', but it did not contain (.+). Direct fetching of that commit failed.":n.InvalidSubmoduleSHA,"fatal: could not create work tree dir '(.+)'.*: Permission denied":n.LocalPermissionDenied,"merge: (.+) - not something we can merge":n.InvalidMerge,"invalid upstream (.+)":n.InvalidRebase,"fatal: Non-fast-forward commit does not make sense into an empty head":n.NonFastForwardMergeIntoEmptyHead,"error: (.+): (patch does not apply|already exists in working directory)":n.PatchDoesNotApply,"fatal: [Aa] branch named '(.+)' already exists.?":n.BranchAlreadyExists,"fatal: bad revision '(.*)'":n.BadRevision,"fatal: [Nn]ot a git repository \\(or any of the parent directories\\): (.*)":n.NotAGitRepository,"fatal: refusing to merge unrelated histories":n.CannotMergeUnrelatedHistories,"The .+ attribute should be .+ but is .+":n.LFSAttributeDoesNotMatch,"fatal: Branch rename failed":n.BranchRenameFailed,"fatal: path '(.+)' does not exist .+":n.PathDoesNotExist,"fatal: invalid object name '(.+)'.":n.InvalidObjectName,"fatal: .+: '(.+)' is outside repository":n.OutsideRepository,"Another git process seems to be running in this repository, e.g.":n.LockFileAlreadyExists,"fatal: There is no merge to abort":n.NoMergeToAbort,"error: (?:Your local changes to the following|The following untracked working tree) files would be overwritten by checkout:":n.LocalChangesOverwritten,"You must edit all merge conflicts and then\nmark them as resolved using git add|fatal: Exiting because of an unresolved conflict":n.UnresolvedConflicts,"error: gpg failed to sign the data":n.GPGFailedToSignData,"CONFLICT \\(modify/delete\\): (.+) deleted in (.+) and modified in (.+)":n.ConflictModifyDeletedInBranch,"error: GH001: ":n.PushWithFileSizeExceedingLimit,"error: GH002: ":n.HexBranchNameRejected,"error: GH003: Sorry, force-pushing to (.+) is not allowed.":n.ForcePushRejected,"error: GH005: Sorry, refs longer than (.+) bytes are not allowed":n.InvalidRefLength,"error: GH006: Protected branch update failed for (.+)\nremote: error: At least one approved review is required":n.ProtectedBranchRequiresReview,"error: GH006: Protected branch update failed for (.+)\nremote: error: Cannot force-push to a protected branch":n.ProtectedBranchForcePush,"error: GH006: Protected branch update failed for (.+)\nremote: error: Cannot delete a protected branch":n.ProtectedBranchDeleteRejected,'error: GH006: Protected branch update failed for (.+).\nremote: error: Required status check "(.+)" is expected':n.ProtectedBranchRequiredStatus,"error: GH007: Your push would publish a private email address.":n.PushWithPrivateEmail,"error: could not lock config file (.+): File exists":n.ConfigLockFileAlreadyExists,"error: remote (.+) already exists.":n.RemoteAlreadyExists,"fatal: tag '(.+)' already exists":n.TagAlreadyExists,"error: Your local changes to the following files would be overwritten by merge:\n":n.MergeWithLocalChanges,"error: cannot (pull with rebase|rebase): You have unstaged changes\\.\n\\s*error: [Pp]lease commit or stash them\\.":n.RebaseWithLocalChanges,"error: commit (.+) is a merge but no -m option was given":n.MergeCommitNoMainlineOption,"fatal: detected dubious ownership in repository at (.+)":n.UnsafeDirectory,"fatal: path '(.+)' exists on disk, but not in '(.+)'":n.PathExistsButNotInRef},t.GitNotFoundErrorCode="git-not-found-error",t.RepositoryDoesNotExistErrorCode="repository-does-not-exist-error"},3982:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setupEnvironment=void 0;const r=n(1017);function i(){return null!=process.env.LOCAL_GIT_DIRECTORY?r.resolve(process.env.LOCAL_GIT_DIRECTORY):function(){{const e=r.sep;return r.resolve(__dirname,"..","..","git").replace(/[\\\/]app.asar[\\\/]/,`${e}app.asar.unpacked${e}`)}}()}function o(){if(null!=process.env.GIT_EXEC_PATH)return r.resolve(process.env.GIT_EXEC_PATH);const e=i();return r.join(e,"libexec","git-core")}t.setupEnvironment=function(e){const t=function(){const e=i();return r.join(e,"bin","git")}();let n=process.env.PATH||"";const s=i(),a=Object.assign({},process.env,{GIT_EXEC_PATH:o(),PATH:n},e);{const e=`${s}/share/git-core/templates`;a.GIT_TEMPLATE_DIR=e}return{env:a,gitLocation:t}}},3004:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GitTaskCancelResult=t.GitProcess=void 0;const i=n(7147),o=n(7282),s=n(2081),a=n(9969),l=n(3982);class c{static pathExists(e){try{return i.accessSync(e,i.F_OK),!0}catch(e){return!1}}static spawn(e,t,n){let r={};n&&n.env&&(r=n.env);const{env:i,gitLocation:o}=(0,l.setupEnvironment)(r),a={env:i,cwd:t},c=(0,s.spawn)(o,e,a);return u(c),c}static exec(e,t,n){return this.execTask(e,t,n).result}static execTask(e,t,n){let r;const i=new Promise((function(e){r=e}));let o=new p(new Promise((function(i,h){let p={};n&&n.env&&(p=n.env);const{env:d,gitLocation:m}=(0,l.setupEnvironment)(p),f={cwd:t,encoding:"utf8",maxBuffer:n?n.maxBuffer:10485760,env:d},g=(0,s.execFile)(m,e,f,(function(e,n,r){if(o.updateProcessEnded(),!e)return void i({stdout:n,stderr:r,exitCode:0});let s=e.code;if("string"!=typeof s)"number"!=typeof s?"stdout maxBuffer exceeded"===e.message?h(new Error(`The output from the command could not fit into the allocated stdout buffer. Set options.maxBuffer to a larger value than ${f.maxBuffer} bytes`)):h(e):i({stdout:n,stderr:r,exitCode:s});else if("ENOENT"===s){let n=e.message;!1===c.pathExists(t)?(n="Unable to find path to repository on disk.",s=a.RepositoryDoesNotExistErrorCode):(n=`Git could not be found at the expected path: '${m}'. This might be a problem with how the application is packaged, so confirm this folder hasn't been removed when packaging.`,s=a.GitNotFoundErrorCode);const r=new Error(n);r.name=e.name,r.code=s,h(r)}else h(e)}));r(g.pid),u(g),n&&void 0!==n.stdin&&g.stdin&&(n.stdinEncoding?g.stdin.end(n.stdin,n.stdinEncoding):g.stdin.end(n.stdin)),n&&n.processCallback&&n.processCallback(g)})),i);return o}static parseError(e){for(const[t,n]of Object.entries(a.GitErrorRegexes))if(e.match(t))return n;return null}}function u({stdin:e}){e&&e.on("error",(t=>{const n=t.code;if("EPIPE"!==n&&"EOF"!==n&&"ECONNRESET"!==n&&e.listeners("error").length<=1)throw t}))}var h;t.GitProcess=c,function(e){e[e.successfulCancel=0]="successfulCancel",e[e.processAlreadyEnded=1]="processAlreadyEnded",e[e.noProcessIdDefined=2]="noProcessIdDefined",e[e.failedToCancel=3]="failedToCancel"}(h=t.GitTaskCancelResult||(t.GitTaskCancelResult={}));class p{constructor(e,t){this.result=e,this.pid=t,this.processEnded=!1}updateProcessEnded(){this.processEnded=!0}cancel(){return r(this,void 0,void 0,(function*(){if(this.processEnded)return h.processAlreadyEnded;const e=yield this.pid;if(void 0===e)return h.noProcessIdDefined;try{return(0,o.kill)(e),h.successfulCancel}catch(e){}return h.failedToCancel}))}}},4682:(e,t,n)=>{"use strict";t.Jb=t.ko=t.nY=void 0;var r=n(3004);Object.defineProperty(t,"nY",{enumerable:!0,get:function(){return r.GitProcess}});var i=n(9969);Object.defineProperty(t,"ko",{enumerable:!0,get:function(){return i.GitError}}),Object.defineProperty(t,"Jb",{enumerable:!0,get:function(){return i.RepositoryDoesNotExistErrorCode}})},3558:(e,t,n)=>{var r=n(3417),i=function(){},o=function(e,t,n){if("function"==typeof t)return o(e,null,t);t||(t={}),n=r(n||i);var s=e._writableState,a=e._readableState,l=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,u=function(){e.writable||h()},h=function(){c=!1,l||n.call(e)},p=function(){l=!1,c||n.call(e)},d=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){n.call(e,t)},f=function(){return(!l||a&&a.ended)&&(!c||s&&s.ended)?void 0:n.call(e,new Error("premature close"))},g=function(){e.req.on("finish",h)};return function(e){return e.setHeader&&"function"==typeof e.abort}(e)?(e.on("complete",h),e.on("abort",f),e.req?g():e.on("request",g)):c&&!s&&(e.on("end",u),e.on("close",u)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",d),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",m),e.on("close",f),function(){e.removeListener("complete",h),e.removeListener("abort",f),e.removeListener("request",g),e.req&&e.req.removeListener("finish",h),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",h),e.removeListener("exit",d),e.removeListener("end",p),e.removeListener("error",m),e.removeListener("close",f)}};e.exports=o},7750:function(e,t,n){(function(){var t,r;t=null,e.exports=function(){function e(){var e,t,n;for(this.disposables=new Set,t=0,n=arguments.length;t<n;t++)e=arguments[t],this.add(e)}return e.prototype.disposed=!1,e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposables.forEach((function(e){return e.dispose()})),this.disposables=null)},e.prototype.add=function(){var e,t,n;if(!this.disposed)for(t=0,n=arguments.length;t<n;t+=1)r(e=arguments[t]),this.disposables.add(e)},e.prototype.remove=function(e){this.disposed||this.disposables.delete(e)},e.prototype.delete=function(e){this.remove(e)},e.prototype.clear=function(){this.disposed||this.disposables.clear()},e}(),r=function(e){if(null==t&&(t=n(6122)),!t.isDisposable(e))throw new TypeError("Arguments to CompositeDisposable.add must have a .dispose() method")}}).call(this)},6122:function(e){(function(){e.exports=function(){function e(e){this.disposalAction=e}return e.prototype.disposed=!1,e.isDisposable=function(e){return"function"==typeof(null!=e?e.dispose:void 0)},e.prototype.dispose=function(){this.disposed||(this.disposed=!0,"function"==typeof this.disposalAction&&this.disposalAction(),this.disposalAction=null)},e}()}).call(this)},7601:function(e,t,n){(function(){var t;t=n(6122),e.exports=function(){function e(){this.clear()}return e.exceptionHandlers=[],e.onEventHandlerException=function(e){return 0===this.exceptionHandlers.length&&(this.dispatch=this.exceptionHandlingDispatch),this.exceptionHandlers.push(e),new t((n=this,function(){if(n.exceptionHandlers.splice(n.exceptionHandlers.indexOf(e),1),0===n.exceptionHandlers.length)return n.dispatch=n.simpleDispatch}));var n},e.simpleDispatch=function(e,t){return e(t)},e.exceptionHandlingDispatch=function(e,t){var n,r,i,o,s,a;try{return e(t)}catch(e){for(n=e,a=[],i=0,o=(s=this.exceptionHandlers).length;i<o;i++)r=s[i],a.push(r(n));return a}},e.dispatch=e.simpleDispatch,e.prototype.disposed=!1,e.prototype.clear=function(){return this.handlersByEventName={}},e.prototype.dispose=function(){return this.handlersByEventName=null,this.disposed=!0},e.prototype.on=function(e,n,r){var i;if(null==r&&(r=!1),this.disposed)throw new Error("Emitter has been disposed");if("function"!=typeof n)throw new Error("Handler must be a function");return(i=this.handlersByEventName[e])?this.handlersByEventName[e]=r?[n].concat(i):i.concat(n):this.handlersByEventName[e]=[n],new t(this.off.bind(this,e,n))},e.prototype.once=function(e,t,n){var r,i;return null==n&&(n=!1),i=function(e){return r.dispose(),t(e)},r=this.on(e,i,n)},e.prototype.preempt=function(e,t){return this.on(e,t,!0)},e.prototype.off=function(e,t){var n,r,i,o,s;if(!this.disposed&&(i=this.handlersByEventName[e])){for(r=[],o=0,s=i.length;o<s;o++)(n=i[o])!==t&&r.push(n);r.length>0?this.handlersByEventName[e]=r:delete this.handlersByEventName[e]}},e.prototype.emit=function(e,t){var n,r,i,o,s;if(r=null!=(s=this.handlersByEventName)?s[e]:void 0)for(i=0,o=r.length;i<o;i++)n=r[i],this.constructor.dispatch(n,t)},e.prototype.emitAsync=function(e,t){var n,r,i,o;return(r=null!=(o=this.handlersByEventName)?o[e]:void 0)?(i=function(){var e,i,o;for(o=[],e=0,i=r.length;e<i;e++)n=r[e],o.push(this.constructor.dispatch(n,t));return o}.call(this),Promise.all(i).then((function(){}))):Promise.resolve()},e.prototype.getEventNames=function(){return Object.keys(this.handlersByEventName)},e.prototype.listenerCountForEventName=function(e){var t,n;return null!=(t=null!=(n=this.handlersByEventName[e])?n.length:void 0)?t:0},e.prototype.getTotalListenerCount=function(){var e,t,n,r,i;for(t=0,n=0,r=(i=Object.keys(this.handlersByEventName)).length;n<r;n++)e=i[n],t+=this.handlersByEventName[e].length;return t},e}()}).call(this)},1391:function(e,t,n){(function(){t.Emitter=n(7601),t.Disposable=n(6122),t.CompositeDisposable=n(7750)}).call(this)},8734:(e,t,n)=>{"use strict";n(1017);const r=n(2081),i=n(3861),o=n(6097),s=n(1829),a=n(697),l=n(3675),c=n(8911),u=n(8419),h=n(8047),p=n(5709);function d(e,t,n){let r;return(n=Object.assign({extendEnv:!0,env:{}},n)).extendEnv&&(n.env=Object.assign({},process.env,n.env)),!0===n.__winShell?(delete n.__winShell,r={command:e,args:t,options:n,file:e,original:{cmd:e,args:t}}):r=i._parse(e,t,n),(n=Object.assign({maxBuffer:1e7,buffer:!0,stripEof:!0,preferLocal:!0,localDir:r.options.cwd||process.cwd(),encoding:"utf8",reject:!0,cleanup:!0},r.options)).stdio=p(n),n.preferLocal&&(n.env=s.env(Object.assign({},n,{cwd:n.localDir}))),n.detached&&(n.cleanup=!1),{cmd:r.command,args:r.args,opts:n,parsed:r}}function m(e,t){return t&&e.stripEof&&(t=o(t)),t}function f(e,t,n){let r="/bin/sh",i=["-c",t];return(n=Object.assign({},n)).shell&&(r=n.shell,delete n.shell),e(r,i,n)}function g(e,t,{encoding:n,buffer:r,maxBuffer:i}){if(!e[t])return null;let o;return o=r?n?l(e[t],{encoding:n,maxBuffer:i}):l.buffer(e[t],{maxBuffer:i}):new Promise(((n,r)=>{e[t].once("end",n).once("error",r)})),o.catch((e=>{throw e.stream=t,e.message=`${t} ${e.message}`,e}))}function y(e,t){const{stdout:n,stderr:r}=e;let i=e.error;const{code:o,signal:s}=e,{parsed:a,joinedCmd:l}=t,c=t.timedOut||!1;if(!i){let e="";Array.isArray(a.opts.stdio)?("inherit"!==a.opts.stdio[2]&&(e+=e.length>0?r:`\n${r}`),"inherit"!==a.opts.stdio[1]&&(e+=`\n${n}`)):"inherit"!==a.opts.stdio&&(e=`\n${r}${n}`),i=new Error(`Command failed: ${l}${e}`),i.code=o<0?h(o):o}return i.stdout=n,i.stderr=r,i.failed=!0,i.signal=s||null,i.cmd=l,i.timedOut=c,i}function b(e,t){let n=e;return Array.isArray(t)&&t.length>0&&(n+=" "+t.join(" ")),n}e.exports=(e,t,n)=>{const o=d(e,t,n),{encoding:s,buffer:l,maxBuffer:h}=o.opts,p=b(e,t);let f,w;try{f=r.spawn(o.cmd,o.args,o.opts)}catch(e){return Promise.reject(e)}o.opts.cleanup&&(w=u((()=>{f.kill()})));let v=null,C=!1;const S=()=>{v&&(clearTimeout(v),v=null),w&&w()};o.opts.timeout>0&&(v=setTimeout((()=>{v=null,C=!0,f.kill(o.opts.killSignal)}),o.opts.timeout));const E=new Promise((e=>{f.on("exit",((t,n)=>{S(),e({code:t,signal:n})})),f.on("error",(t=>{S(),e({error:t})})),f.stdin&&f.stdin.on("error",(t=>{S(),e({error:t})}))}));function k(){f.stdout&&f.stdout.destroy(),f.stderr&&f.stderr.destroy()}const R=()=>c(Promise.all([E,g(f,"stdout",{encoding:s,buffer:l,maxBuffer:h}),g(f,"stderr",{encoding:s,buffer:l,maxBuffer:h})]).then((e=>{const t=e[0];if(t.stdout=e[1],t.stderr=e[2],t.error||0!==t.code||null!==t.signal){const e=y(t,{joinedCmd:p,parsed:o,timedOut:C});if(e.killed=e.killed||f.killed,!o.opts.reject)return e;throw e}return{stdout:m(o.opts,t.stdout),stderr:m(o.opts,t.stderr),code:0,failed:!1,killed:!1,signal:null,cmd:p,timedOut:!1}})),k);return i._enoent.hookChildProcess(f,o.parsed),function(e,t){null!=t&&(a(t)?t.pipe(e.stdin):e.stdin.end(t))}(f,o.opts.input),f.then=(e,t)=>R().then(e,t),f.catch=e=>R().catch(e),f},e.exports.stdout=(...t)=>e.exports(...t).then((e=>e.stdout)),e.exports.stderr=(...t)=>e.exports(...t).then((e=>e.stderr)),e.exports.shell=(t,n)=>f(e.exports,t,n),e.exports.sync=(e,t,n)=>{const i=d(e,t,n),o=b(e,t);if(a(i.opts.input))throw new TypeError("The `input` option cannot be a stream in sync mode");const s=r.spawnSync(i.cmd,i.args,i.opts);if(s.code=s.status,s.error||0!==s.status||null!==s.signal){const e=y(s,{joinedCmd:o,parsed:i});if(!i.opts.reject)return e;throw e}return{stdout:m(i.opts,s.stdout),stderr:m(i.opts,s.stderr),code:0,failed:!1,signal:null,cmd:o,timedOut:!1}},e.exports.shellSync=(t,n)=>f(e.exports.sync,t,n)},8047:(e,t,n)=>{"use strict";const r=n(3837);let i;if("function"==typeof r.getSystemErrorName)e.exports=r.getSystemErrorName;else{try{if(i=process.binding("uv"),"function"!=typeof i.errname)throw new TypeError("uv.errname is not a function")}catch(e){console.error("execa/lib/errname: unable to establish process.binding('uv')",e),i=null}e.exports=e=>o(i,e)}function o(e,t){if(e)return e.errname(t);if(!(t<0))throw new Error("err >= 0");return`Unknown system error ${t}`}e.exports.__test__=o},5709:e=>{"use strict";const t=["stdin","stdout","stderr"];e.exports=e=>{if(!e)return null;if(e.stdio&&(e=>t.some((t=>Boolean(e[t]))))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${t.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof e.stdio)return e.stdio;const n=e.stdio||[];if(!Array.isArray(n))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof n}\``);const r=[],i=Math.max(n.length,t.length);for(let o=0;o<i;o++){let i=null;void 0!==n[o]?i=n[o]:void 0!==e[t[o]]&&(i=e[t[o]]),r[o]=i}return r}},697:e=>{"use strict";var t=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};t.writable=function(e){return t(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},t.readable=function(e){return t(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},t.duplex=function(e){return t.writable(e)&&t.readable(e)},t.transform=function(e){return t.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},3318:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=n(6826),u=n(2623),h=n(3470),p=n(4974).createFocusTrap,d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(d,e);var t,n,r,h,p=(r=d,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(r);if(h){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function d(e){var t,n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),i=function(e){t.focusTrapElement=e},(r="setFocusTrapElement")in(n=a(t=p.call(this,e)))?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,"undefined"!=typeof document&&(t.previouslyFocusedElement=document.activeElement),t}return t=d,(n=[{key:"componentDidMount",value:function(){var e=this.props.focusTrapOptions,t={returnFocusOnDeactivate:!1};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&"returnFocusOnDeactivate"!==n&&(t[n]=e[n]);var r=u.findDOMNode(this.focusTrapElement);this.focusTrap=this.props._createFocusTrap(r,t),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause()}},{key:"componentDidUpdate",value:function(e){if(e.active&&!this.props.active){var t={returnFocus:this.props.focusTrapOptions.returnFocusOnDeactivate||!1};this.focusTrap.deactivate(t)}else!e.active&&this.props.active&&this.focusTrap.activate();e.paused&&!this.props.paused?this.focusTrap.unpause():!e.paused&&this.props.paused&&this.focusTrap.pause()}},{key:"componentWillUnmount",value:function(){this.focusTrap.deactivate(),!1!==this.props.focusTrapOptions.returnFocusOnDeactivate&&this.previouslyFocusedElement&&this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus()}},{key:"render",value:function(){var e=this,t=c.Children.only(this.props.children);return c.cloneElement(t,{ref:function(n){e.setFocusTrapElement(n),"function"==typeof t.ref?t.ref(n):t.ref&&(t.ref.current=n)}})}}])&&i(t.prototype,n),d}(c.Component),m="undefined"==typeof Element?Function:Element;d.propTypes={active:h.bool,paused:h.bool,focusTrapOptions:h.shape({onActivate:h.func,onDeactivate:h.func,initialFocus:h.oneOfType([h.instanceOf(m),h.string,h.func]),fallbackFocus:h.oneOfType([h.instanceOf(m),h.string,h.func]),escapeDeactivates:h.bool,clickOutsideDeactivates:h.bool,returnFocusOnDeactivate:h.bool,setReturnFocus:h.oneOfType([h.instanceOf(m),h.string,h.func]),allowOutsideClick:h.oneOfType([h.bool,h.func]),preventScroll:h.bool}),children:h.oneOfType([h.element,h.instanceOf(m)])},d.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:p},e.exports=d},4974:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createFocusTrap:()=>g});let r=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary"],i=r.join(","),o="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function s(e){return!(!a(e)||function(e){return function(e){return p(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;let t=function(e,t){for(let n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}((e.form||e.ownerDocument).querySelectorAll('input[type="radio"][name="'+e.name+'"]'),e.form);return!t||t===e}(e)}(e)||u(e)<0)}function a(e){return!(e.disabled||function(e){return p(e)&&"hidden"===e.type}(e)||function(e){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(e))}let l=r.concat("iframe").join(",");function c(e){if(!e)throw new Error("No node provided");return!1!==o.call(e,l)&&a(e)}function u(e){let t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t}function h(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function p(e){return"INPUT"===e.tagName}var d,m,f=(m=[],{activateTrap:function(e){if(m.length>0){var t=m[m.length-1];t!==e&&t.pause()}var n=m.indexOf(e);-1===n||m.splice(n,1),m.push(e)},deactivateTrap:function(e){var t=m.indexOf(e);-1!==t&&m.splice(t,1),m.length>0&&m[m.length-1].unpause()}});function g(e,t){var n=document,r="string"==typeof e?n.querySelector(e):e,a={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,...t},l={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},p={activate:function(e){if(!l.active){R(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:a.onActivate;return t&&t(),g(),p}},deactivate:m,pause:function(){!l.paused&&l.active&&(l.paused=!0,b())},unpause:function(){l.paused&&l.active&&(l.paused=!1,R(),g())}};return p;function m(e){if(l.active){clearTimeout(d),b(),l.active=!1,l.paused=!1,f.deactivateTrap(p);var t=e&&void 0!==e.onDeactivate?e.onDeactivate:a.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:a.returnFocusOnDeactivate)&&y((function(){var e;x((e=l.nodeFocusedBeforeActivation,w("setReturnFocus")||e))})),p}}function g(){if(l.active)return f.activateTrap(p),d=a.delayInitialFocus?y((function(){x(v())})):x(v()),n.addEventListener("focusin",S,!0),n.addEventListener("mousedown",C,{capture:!0,passive:!1}),n.addEventListener("touchstart",C,{capture:!0,passive:!1}),n.addEventListener("click",k,{capture:!0,passive:!1}),n.addEventListener("keydown",E,{capture:!0,passive:!1}),p}function b(){if(l.active)return n.removeEventListener("focusin",S,!0),n.removeEventListener("mousedown",C,!0),n.removeEventListener("touchstart",C,!0),n.removeEventListener("click",k,!0),n.removeEventListener("keydown",E,!0),p}function w(e){var t=a[e],r=t;if(!t)return null;if("string"==typeof t&&!(r=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(r=t()))throw new Error("`"+e+"` did not return a node");return r}function v(){var e;if(!(e=null!==w("initialFocus")?w("initialFocus"):r.contains(n.activeElement)?n.activeElement:l.firstTabbableNode||w("fallbackFocus")))throw new Error("Your focus-trap needs to have at least one focusable element");return e}function C(e){r.contains(e.target)||(a.clickOutsideDeactivates?m({returnFocus:!c(e.target)}):a.allowOutsideClick&&("boolean"==typeof a.allowOutsideClick?a.allowOutsideClick:a.allowOutsideClick(e))||e.preventDefault())}function S(e){r.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),x(l.mostRecentlyFocusedNode||v()))}function E(e){if(!1!==a.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void m();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(R(),e.shiftKey&&e.target===l.firstTabbableNode)return e.preventDefault(),void x(l.lastTabbableNode);e.shiftKey||e.target!==l.lastTabbableNode||(e.preventDefault(),x(l.firstTabbableNode))}(e)}function k(e){a.clickOutsideDeactivates||r.contains(e.target)||a.allowOutsideClick&&("boolean"==typeof a.allowOutsideClick?a.allowOutsideClick:a.allowOutsideClick(e))||(e.preventDefault(),e.stopImmediatePropagation())}function R(){var e=function(e,t){let n=[],r=[];return function(e,t,n){let r=Array.prototype.slice.apply(e.querySelectorAll(i));return t&&o.call(e,i)&&r.unshift(e),r=r.filter(n),r}(e,(t=t||{}).includeContainer,s).forEach((function(e,t){let i=u(e);0===i?n.push(e):r.push({documentOrder:t,tabIndex:i,node:e})})),r.sort(h).map((e=>e.node)).concat(n)}(r);l.firstTabbableNode=e[0]||v(),l.lastTabbableNode=e[e.length-1]||v()}function x(e){e!==n.activeElement&&(e&&e.focus?(e.focus({preventScroll:!!a.preventScroll}),l.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):x(v()))}}function y(e){return setTimeout(e,0)}},3518:(e,t,n)=>{n(7147);const{spawn:r,spawnSync:i}=n(2081),o=n(2361),s=n(6980),a=e.exports;function l(e,t){return n=>t(0===n?null:new Error(e+" failed with exit status "+n))}a.testMode=!1,Object.assign(a,{clearAuthorizationCache(){s.clearAuthorizationCache()},createWriteStream(e){let t;if(!s.spawnAsAdmin("/bin/echo",[],a.testMode,(()=>{}))){const e=new o;return e.write=e.end=function(){},process.nextTick((()=>e.emit("error",new Error("Failed to obtain credentials")))),e}a.testMode?t=r("/bin/dd",["of="+e]):(t=r("/usr/libexec/authopen",["-extauth","-w","-c",e]),t.stdin.write(s.getAuthorizationForm()));const n=new o;return n.write=(e,n,r)=>{t.stdin.write(e,n,r)},n.end=e=>{e&&n.on("finish",e),t.stdin.end()},t.on("exit",(e=>{0!==e&&n.emit("error",new Error("authopen exited with code "+e)),n.emit("finish")})),n},symlink(e,t,n){s.spawnAsAdmin("/bin/ln",["-s",e,t],a.testMode,l("ln",n))},unlink(e,t){s.spawnAsAdmin("/bin/rm",["-rf",e],a.testMode,l("rm",t))},makeTree(e,t){s.spawnAsAdmin("/bin/mkdir",["-p",e],a.testMode,l("mkdir",t))},recursiveCopy(e,t,n){s.spawnAsAdmin("/bin/rm",["-r","-f",t],a.testMode,l("rm",(r=>{if(r)return n(r);s.spawnAsAdmin("/bin/cp",["-r",e,t],a.testMode,l("cp",n))})))}})},4049:function(e,t,n){(function(){var t,r,i,o;i=n(9247),t=n(7762),n(237),r=function(e){return e.candidate},o=function(e,t){return t.score-e.score},e.exports=function(e,n,s){var a,l,c,u,h,p,d,m,f,g,y,b,w;for(m=[],c=s.key,h=s.maxResults,u=s.maxInners,y=s.usePathScoring,f=null!=u&&u>0?u:e.length+1,a=null!=c,d=y?t:i,b=0,w=e.length;b<w&&(l=e[b],!((g=a?l[c]:l)&&(p=d.score(g,n,s))>0)||(m.push({candidate:l,score:p}),--f));b++);return m.sort(o),e=m.map(r),null!=h&&(e=e.slice(0,h)),e}}).call(this)},5170:function(e,t,n){(function(){var t,r,i,o,s,a,l,c;i=n(4049),o=n(6607),c=n(9247),a=n(7762),t=n(237),l=null,r="win32"===("undefined"!=typeof process&&null!==process?"darwin":void 0)?"\\":"/",e.exports={filter:function(e,t,n){return null==n&&(n={}),(null!=t?t.length:void 0)&&(null!=e?e.length:void 0)?(n=s(n,t),i(e,t,n)):[]},score:function(e,t,n){return null==n&&(n={}),(null!=e?e.length:void 0)&&(null!=t?t.length:void 0)?(n=s(n,t)).usePathScoring?a.score(e,t,n):c.score(e,t,n):0},match:function(e,t,n){var r;return null==n&&(n={}),e&&t?e===t?function(){r=[];for(var t=0,n=e.length;0<=n?t<n:t>n;0<=n?t++:t--)r.push(t);return r}.apply(this):(n=s(n,t),o.match(e,t,n)):[]},wrap:function(e,t,n){return null==n&&(n={}),e&&t?(n=s(n,t),o.wrap(e,t,n)):[]},prepareQuery:function(e,t){return null==t&&(t={}),(t=s(t,e)).preparedQuery}},s=function(e,n){return null==e.allowErrors&&(e.allowErrors=!1),null==e.usePathScoring&&(e.usePathScoring=!0),null==e.useExtensionBonus&&(e.useExtensionBonus=!1),null==e.pathSeparator&&(e.pathSeparator=r),null==e.optCharRegEx&&(e.optCharRegEx=null),null==e.wrap&&(e.wrap=null),null==e.preparedQuery&&(e.preparedQuery=l&&l.query===n?l:l=new t(n,e)),e}}).call(this)},6607:function(e,t,n){(function(){var e,r,i,o,s,a,l,c,u,h;h=n(9247),i=h.isMatch,o=h.isWordStart,u=h.scoreConsecutives,c=h.scoreCharacter,l=h.scoreAcronyms,t.match=s=function(t,n,o){var s,l,c,u,h,p;return s=o.allowErrors,h=o.preparedQuery,u=o.pathSeparator,s||i(t,h.core_lw,h.core_up)?(p=t.toLowerCase(),0===(c=r(t,p,h)).length||t.indexOf(u)>-1&&(l=e(t,p,h,u),c=a(c,l)),c):[]},t.wrap=function(e,t,n){var r,i,o,a,l,c,u,h,p;if(null!=n.wrap&&(c=(p=n.wrap).tagClass,h=p.tagOpen,u=p.tagClose),null==c&&(c="highlight"),null==h&&(h='<strong class="'+c+'">'),null==u&&(u="</strong>"),e===t)return h+e+u;if(0===(o=s(e,0,n)).length)return e;for(a="",r=-1,l=0;++r<o.length;){for((i=o[r])>l&&(a+=e.substring(l,i),l=i);++r<o.length;){if(o[r]!==i+1){r--;break}i++}++i>l&&(a+=h,a+=e.substring(l,i),a+=u,l=i)}return l<=e.length-1&&(a+=e.substring(l)),a},e=function(e,t,n,i){var o,s,a;for(a=e.length-1;e[a]===i;)a--;if(-1===(o=e.lastIndexOf(i,a)))return[];for(s=n.depth;s-- >0;)if(-1===(o=e.lastIndexOf(i,o-1)))return[];return o++,a++,r(e.slice(o,a),t.slice(o,a),n,o)},a=function(e,t){var n,r,i,o,s,a,l;if(s=e.length,0===(a=t.length))return e.slice();if(0===s)return t.slice();for(i=-1,r=t[o=0],l=[];++i<s;){for(n=e[i];r<=n&&++o<a;)r<n&&l.push(r),r=t[o];l.push(n)}for(;o<a;)l.push(t[o++]);return l},r=function(e,t,n,r){var i,s,a,h,p,d,m,f,g,y,b,w,v,C,S,E,k,R,x,T,D,A;for(null==r&&(r=0),C=n.query,S=n.query_lw,g=e.length,w=C.length,i=l(e,t,C,S).score,R=new Array(w),p=new Array(w),A=new Array(g*w),v=-1,f=-1;++f<w;)R[f]=0,p[f]=0;for(m=-1;++m<g;)for(E=0,x=0,h=0,T=t[m],f=-1;++f<w;)d=0,s=0,k=x,S[f]===T&&(D=o(m,e,t),d=h>0?h:u(e,t,C,S,m,f,D),s=k+c(m,f,D,i,d)),x=R[f],h=p[f],E>x?b=2:(E=x,b=1),s>E?(E=s,b=3):d=0,R[f]=E,p[f]=d,A[++v]=E>0?b:0;for(v=(m=g-1)*w+(f=w-1),a=!0,y=[];a&&m>=0&&f>=0;)switch(A[v]){case 1:m--,v-=w;break;case 2:f--,v--;break;case 3:y.push(m+r),f--,m--,v-=w+1;break;default:a=!1}return y.reverse(),y}}).call(this)},7762:function(e,t,n){(function(){var e,r,i,o,s,a,l;l=n(9247),o=l.isMatch,e=l.computeScore,a=l.scoreSize,t.score=function(t,n,r){var i,a,l;return i=r.preparedQuery,r.allowErrors||o(t,i.core_lw,i.core_up)?(l=t.toLowerCase(),a=e(t,l,i),a=s(t,l,a,r),Math.ceil(a)):0},s=function(t,n,o,s){var l,c,u,h,p,d,m,f,g,y;if(0===o)return 0;for(g=s.preparedQuery,y=s.useExtensionBonus,f=s.pathSeparator,p=t.length-1;t[p]===f;)p--;if(m=p-(u=t.lastIndexOf(f,p)),d=1,y&&(o*=d+=i(n,g.ext,u,p,2)),-1===u)return o;for(h=g.depth;u>-1&&h-- >0;)u=t.lastIndexOf(f,u-1);return c=-1===u?o:d*e(t.slice(u+1,p+1),n.slice(u+1,p+1),g),(l=10/(20+r(t,p+1,f)))*c+(1-l)*o*a(0,2.5*m)},t.countDir=r=function(e,t,n){var r,i;if(t<1)return 0;for(r=0,i=-1;++i<t&&e[i]===n;);for(;++i<t;)if(e[i]===n)for(r++;++i<t&&e[i]===n;);return r},t.getExtension=function(e){var t;return(t=e.lastIndexOf("."))<0?"":e.substr(t+1)},i=function(e,t,n,r,o){var s,a,l,c;if(!t.length)return 0;if(!((c=e.lastIndexOf(".",r))>n))return 0;for((s=r-c)<(l=t.length)&&(l=s,s=t.length),c++,a=-1;++a<l&&e[c+a]===t[a];);return 0===a&&o>0?.9*i(e,t,n,c-2,o-1):a/s}}).call(this)},237:function(e,t,n){(function(){var t,r,i,o,s,a,l;l=n(7762),r=l.countDir,o=l.getExtension,e.exports=function(e,n){var s,l,c;if(s=(c=null!=n?n:{}).optCharRegEx,l=c.pathSeparator,!e||!e.length)return null;this.query=e,this.query_lw=e.toLowerCase(),this.core=t(e,s),this.core_lw=this.core.toLowerCase(),this.core_up=a(this.core),this.depth=r(e,e.length,l),this.ext=o(this.query_lw),this.charCodes=i(this.query_lw)},s=/[ _\-:\/\\]/g,t=function(e,t){return null==t&&(t=s),e.replace(t,"")},a=function(e){var t,n,r;for(t="",n=0,r=e.length;n<r;n++)t+=e[n].toUpperCase()[0];return t},i=function(e){var t,n,r;for(r=e.length,n=-1,t=[];++n<r;)t[e.charCodeAt(n)]=!0;return t}}).call(this)},9247:function(e,t){(function(){var e,n,r,i,o,s,a,l,c,u,h,p,d,m,f,g;t.score=function(e,t,r){var i,s,a;return i=r.preparedQuery,r.allowErrors||o(e,i.core_lw,i.core_up)?(a=e.toLowerCase(),s=n(e,a,i),Math.ceil(s)):0},t.isMatch=o=function(e,t,n){var r,i,o,s,a,l,c;if(o=e.length,s=t.length,!o||s>o)return!1;for(r=-1,i=-1;++i<s;){for(a=t.charCodeAt(i),l=n.charCodeAt(i);++r<o&&(c=e.charCodeAt(r))!==a&&c!==l;);if(r===o)return!1}return!0},t.computeScore=n=function(e,t,n){var r,i,o,s,a,m,f,y,b,w,v,C,S,E,k,R,x,T,D,A,P,I,_,N;if(k=n.query,R=n.query_lw,w=e.length,S=k.length,i=(r=c(e,t,k,R)).score,r.count===S)return p(S,w,i,r.pos);if((E=t.indexOf(R))>-1)return d(e,t,k,R,E,S,w);for(A=new Array(S),a=new Array(S),N=g(S,w),C=v=Math.ceil(.75*S)+5,f=!0,b=-1;++b<S;)A[b]=0,a[b]=0;for(y=-1;++y<w;)if(!(I=t[y]).charCodeAt(0)in n.charCodes){if(f){for(b=-1;++b<S;)a[b]=0;f=!1}}else for(T=0,D=0,s=0,x=!0,f=!0,b=-1;++b<S;){if((P=A[b])>T&&(T=P),m=0,R[b]===I)if(_=l(y,e,t),m=s>0?s:h(e,t,k,R,y,b,_),(o=D+u(y,b,_,i,m))>T)T=o,C=v;else{if(x&&--C<=0)return Math.max(T,A[S-1])*N;x=!1}D=P,s=a[b],a[b]=m,A[b]=T}return(T=A[S-1])*N},t.isWordStart=l=function(e,t,n){var r,i;return 0===e||(r=t[e],i=t[e-1],s(i)||r!==n[e]&&i===n[e-1])},t.isWordEnd=a=function(e,t,n,r){var i,o;return e===r-1||(i=t[e],o=t[e+1],s(o)||i===n[e]&&o!==n[e+1])},s=function(e){return" "===e||"."===e||"-"===e||"_"===e||"/"===e||"\\"===e},f=function(e){var t;return e<20?100+(t=20-e)*t:Math.max(120-e,0)},t.scoreSize=g=function(e,t){return 150/(150+Math.abs(t-e))},p=function(e,t,n,r){return 2*e*(150*n+f(r))*g(e,t)},t.scorePattern=m=function(e,t,n,r,i){var o,s;return s=e,o=6,n===e&&(o+=2),r&&(o+=3),i&&(o+=1),e===t&&(r&&(s+=n===t?2:1),i&&(o+=1)),n+s*(s+o)},t.scoreCharacter=u=function(e,t,n,r,i){var o;return o=f(e),n?o+150*((r>i?r:i)+10):o+150*i},t.scoreConsecutives=h=function(e,t,n,r,i,o,s){var l,c,u,h,p,d,f;for(l=(u=(c=e.length)-i)<(p=(h=n.length)-o)?u:p,d=0,f=0,n[o]===e[i]&&d++;++f<l&&r[++o]===t[++i];)n[o]===e[i]&&d++;return f<l&&i--,1===f?1+2*d:m(f,h,d,s,a(i,e,t,c))},t.scoreExactMatch=d=function(e,t,n,r,i,o,s){var c,u,h,d,f;for((f=l(i,e,t))||(h=t.indexOf(r,i+1))>-1&&(f=l(h,e,t))&&(i=h),u=-1,d=0;++u<o;)n[i+u]===e[u]&&d++;return c=a(i+o-1,e,t,s),p(o,s,m(o,o,d,f,c),i)},r=new(e=function(e,t,n){this.score=e,this.pos=t,this.count=n})(0,.1,0),t.scoreAcronyms=c=function(t,n,o,a){var c,u,h,p,d,f,g,y,b,w,v;if(d=t.length,f=o.length,!(d>1&&f>1))return r;for(c=0,w=0,v=0,y=0,h=-1,p=-1;++p<f;){if(g=a[p],s(g)){if((h=n.indexOf(g,h+1))>-1){w++;continue}break}for(;++h<d;)if(g===n[h]&&l(h,t,n)){o[p]===t[h]&&y++,v+=h,c++;break}if(h===d)break}return c<2?r:(u=c===f&&i(t,n,o,c),b=m(c,f,y,!0,u),new e(b,v/c,c+w))},i=function(e,t,n,r){var i,o,s;if(i=0,(s=e.length)>12*n.length)return!1;for(o=-1;++o<s;)if(l(o,e,t)&&++i>r)return!1;return!0}}).call(this)},3603:(e,t,n)=>{"use strict";const{PassThrough:r}=n(2781);e.exports=e=>{e=Object.assign({},e);const{array:t}=e;let{encoding:n}=e;const i="buffer"===n;let o=!1;t?o=!(n||i):n=n||"utf8",i&&(n=null);let s=0;const a=[],l=new r({objectMode:o});return n&&l.setEncoding(n),l.on("data",(e=>{a.push(e),o?s=a.length:s+=e.length})),l.getBufferedValue=()=>t?a:i?Buffer.concat(a,s):a.join(""),l.getBufferedLength=()=>s,l}},3675:(e,t,n)=>{"use strict";const r=n(3021),i=n(3603);class o extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}function s(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t=Object.assign({maxBuffer:1/0},t);const{maxBuffer:n}=t;let s;return new Promise(((a,l)=>{const c=e=>{e&&(e.bufferedData=s.getBufferedValue()),l(e)};s=r(e,i(t),(e=>{e?c(e):a()})),s.on("data",(()=>{s.getBufferedLength()>n&&c(new o)}))})).then((()=>s.getBufferedValue()))}e.exports=s,e.exports.buffer=(e,t)=>s(e,Object.assign({},t,{encoding:"buffer"})),e.exports.array=(e,t)=>s(e,Object.assign({},t,{array:!0})),e.exports.MaxBufferError=o},557:(e,t,n)=>{var r;function i(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,r){i(e,t||{},(function(e,t){e?r(e):n(t)}))}))}r(e,t||{},(function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)}))}n(7147),r=global.TESTING_WINDOWS?n(1905):n(61),e.exports=i,i.sync=function(e,t){try{return r.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},61:(e,t,n)=>{e.exports=i,i.sync=function(e,t){return o(r.statSync(e),t)};var r=n(7147);function i(e,t,n){r.stat(e,(function(e,r){n(e,!e&&o(r,t))}))}function o(e,t){return e.isFile()&&function(e,t){var n=e.mode,r=e.uid,i=e.gid,o=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),s=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),l=parseInt("010",8);return n&parseInt("001",8)||n&l&&i===s||n&a&&r===o||n&(a|l)&&0===o}(e,t)}},1905:(e,t,n)=>{e.exports=o,o.sync=function(e,t){return i(r.statSync(e),e,t)};var r=n(7147);function i(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}(t,n)}function o(e,t,n){r.stat(e,(function(r,o){n(r,!r&&i(o,e,t))}))}},193:(e,t,n)=>{var r=n(6442);function i(e,t){if(!e||e.length<=0)throw new Error(t+" is required.")}e.exports={getPassword:function(e,t){return i(e,"Service"),i(t,"Account"),r.getPassword(e,t)},setPassword:function(e,t,n){return i(e,"Service"),i(t,"Account"),i(n,"Password"),r.setPassword(e,t,n)},deletePassword:function(e,t){return i(e,"Service"),i(t,"Account"),r.deletePassword(e,t)},findPassword:function(e){return i(e,"Service"),r.findPassword(e)},findCredentials:function(e){return i(e,"Service"),r.findCredentials(e)}}},1351:(e,t,n)=>{var r=n(9275)(n(1794),"DataView");e.exports=r},4521:(e,t,n)=>{var r=n(5460),i=n(9722),o=n(2515),s=n(8959),a=n(5505);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},7524:(e,t,n)=>{var r=n(1166),i=n(5498),o=n(5294),s=n(9624),a=n(8377);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},2197:(e,t,n)=>{var r=n(9275)(n(1794),"Map");e.exports=r},3291:(e,t,n)=>{var r=n(6465),i=n(859),o=n(4926),s=n(2611),a=n(798);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},5869:(e,t,n)=>{var r=n(9275)(n(1794),"Promise");e.exports=r},1226:(e,t,n)=>{var r=n(9275)(n(1794),"Set");e.exports=r},6506:(e,t,n)=>{var r=n(3291),i=n(9080),o=n(5843);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},5603:(e,t,n)=>{var r=n(7524),i=n(7125),o=n(6881),s=n(9801),a=n(1744),l=n(1446);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=l,e.exports=c},7325:(e,t,n)=>{var r=n(1794).Symbol;e.exports=r},5569:(e,t,n)=>{var r=n(1794).Uint8Array;e.exports=r},7469:(e,t,n)=>{var r=n(9275)(n(1794),"WeakMap");e.exports=r},3965:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1627:e=>{e.exports=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}},9406:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},2733:(e,t,n)=>{var r=n(4158);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},4197:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},8022:(e,t,n)=>{var r=n(7538),i=n(6369),o=n(2441),s=n(5453),a=n(6771),l=n(1575),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&s(e),p=!n&&!u&&!h&&l(e),d=n||u||h||p,m=d?r(e.length,String):[],f=m.length;for(var g in e)!t&&!c.call(e,g)||d&&("length"==g||h&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,f))||m.push(g);return m}},9382:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},1079:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},6919:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8697:(e,t,n)=>{var r=n(8009);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},3601:(e,t,n)=>{var r=n(4676);e.exports=function(e,t,n,i){return r(e,(function(e,r,o){t(i,e,n(e),o)})),i}},9865:(e,t,n)=>{var r=n(5900);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},4647:(e,t,n)=>{var r=n(6506),i=n(2733),o=n(4197),s=n(9382),a=n(2265),l=n(1243);e.exports=function(e,t,n,c){var u=-1,h=i,p=!0,d=e.length,m=[],f=t.length;if(!d)return m;n&&(t=s(t,a(n))),c?(h=o,p=!1):t.length>=200&&(h=l,p=!1,t=new r(t));e:for(;++u<d;){var g=e[u],y=null==n?g:n(g);if(g=c||0!==g?g:0,p&&y==y){for(var b=f;b--;)if(t[b]===y)continue e;m.push(g)}else h(t,y,c)||m.push(g)}return m}},4676:(e,t,n)=>{var r=n(6299),i=n(2936)(r);e.exports=i},9046:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},7802:(e,t,n)=>{var r=n(1079),i=n(7092);e.exports=function e(t,n,o,s,a){var l=-1,c=t.length;for(o||(o=i),a||(a=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,s,a):r(a,u):s||(a[a.length]=u)}return a}},6428:(e,t,n)=>{var r=n(6903)();e.exports=r},6299:(e,t,n)=>{var r=n(6428),i=n(5351);e.exports=function(e,t){return e&&r(e,t,i)}},4743:(e,t,n)=>{var r=n(2366),i=n(218);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},5985:(e,t,n)=>{var r=n(1079),i=n(2441);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},5635:(e,t,n)=>{var r=n(7325),i=n(7926),o=n(3792),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},9679:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},4158:(e,t,n)=>{var r=n(9046),i=n(2868),o=n(1322);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},969:(e,t,n)=>{var r=n(5635),i=n(8863);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},7896:(e,t,n)=>{var r=n(428),i=n(8863);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,s,e,a))}},428:(e,t,n)=>{var r=n(5603),i=n(3249),o=n(3815),s=n(1513),a=n(7553),l=n(2441),c=n(5453),u=n(1575),h="[object Arguments]",p="[object Array]",d="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,f,g,y){var b=l(e),w=l(t),v=b?p:a(e),C=w?p:a(t),S=(v=v==h?d:v)==d,E=(C=C==h?d:C)==d,k=v==C;if(k&&c(e)){if(!c(t))return!1;b=!0,S=!1}if(k&&!S)return y||(y=new r),b||u(e)?i(e,t,n,f,g,y):o(e,t,v,n,f,g,y);if(!(1&n)){var R=S&&m.call(e,"__wrapped__"),x=E&&m.call(t,"__wrapped__");if(R||x){var T=R?e.value():e,D=x?t.value():t;return y||(y=new r),g(T,D,n,f,y)}}return!!k&&(y||(y=new r),s(e,t,n,f,g,y))}},6529:(e,t,n)=>{var r=n(5603),i=n(7896);e.exports=function(e,t,n,o){var s=n.length,a=s,l=!o;if(null==e)return!a;for(e=Object(e);s--;){var c=n[s];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){var u=(c=n[s])[0],h=e[u],p=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var d=new r;if(o)var m=o(h,p,u,e,t,d);if(!(void 0===m?i(p,h,3,o,d):m))return!1}}return!0}},2868:e=>{e.exports=function(e){return e!=e}},8951:(e,t,n)=>{var r=n(4936),i=n(1111),o=n(6751),s=n(5568),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,p=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?p:a).test(s(e))}},1874:(e,t,n)=>{var r=n(5635),i=n(129),o=n(8863),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},9180:(e,t,n)=>{var r=n(1344),i=n(9527),o=n(676),s=n(2441),a=n(651);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?s(e)?i(e[0],e[1]):r(e):a(e)}},1249:(e,t,n)=>{var r=n(5769),i=n(6481),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},1344:(e,t,n)=>{var r=n(6529),i=n(8550),o=n(4574);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},9527:(e,t,n)=>{var r=n(7896),i=n(7466),o=n(5137),s=n(4481),a=n(704),l=n(4574),c=n(218);e.exports=function(e,t){return s(e)&&a(t)?l(c(e),t):function(n){var s=i(n,e);return void 0===s&&s===t?o(n,e):r(t,s,3)}}},3824:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},4432:(e,t,n)=>{var r=n(4743);e.exports=function(e){return function(t){return r(t,e)}}},5329:(e,t,n)=>{var r=n(676),i=n(4988),o=n(6574);e.exports=function(e,t){return o(i(e,t,r),e+"")}},1633:(e,t,n)=>{var r=n(6539),i=n(5900),o=n(676),s=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=s},7538:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},5760:(e,t,n)=>{var r=n(9382);e.exports=function(e,t){return r(t,(function(t){return[t,e[t]]}))}},8849:(e,t,n)=>{var r=n(7325),i=n(9382),o=n(2441),s=n(6307),a=r?r.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},3029:(e,t,n)=>{var r=n(6987),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},2265:e=>{e.exports=function(e){return function(t){return e(t)}}},2423:(e,t,n)=>{var r=n(6506),i=n(2733),o=n(4197),s=n(1243),a=n(9497),l=n(439);e.exports=function(e,t,n){var c=-1,u=i,h=e.length,p=!0,d=[],m=d;if(n)p=!1,u=o;else if(h>=200){var f=t?null:a(e);if(f)return l(f);p=!1,u=s,m=new r}else m=t?[]:d;e:for(;++c<h;){var g=e[c],y=t?t(g):g;if(g=n||0!==g?g:0,p&&y==y){for(var b=m.length;b--;)if(m[b]===y)continue e;t&&m.push(y),d.push(g)}else u(m,y,n)||(m!==d&&m.push(y),d.push(g))}return d}},8541:(e,t,n)=>{var r=n(4647),i=n(7802),o=n(2423);e.exports=function(e,t,n){var s=e.length;if(s<2)return s?o(e[0]):[];for(var a=-1,l=Array(s);++a<s;)for(var c=e[a],u=-1;++u<s;)u!=a&&(l[a]=r(l[a]||c,e[u],t,n));return o(i(l,1),t,n)}},1243:e=>{e.exports=function(e,t){return e.has(t)}},2366:(e,t,n)=>{var r=n(2441),i=n(4481),o=n(4586),s=n(9948);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(s(e))}},9789:(e,t,n)=>{var r=n(1794)["__core-js_shared__"];e.exports=r},1562:(e,t,n)=>{var r=n(1627),i=n(3601),o=n(9180),s=n(2441);e.exports=function(e,t){return function(n,a){var l=s(n)?r:i,c=t?t():{};return l(n,e,o(a,2),c)}}},2936:(e,t,n)=>{var r=n(9303);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,s=t?o:-1,a=Object(n);(t?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},6903:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}},9497:(e,t,n)=>{var r=n(1226),i=n(5478),o=n(439),s=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=s},364:(e,t,n)=>{var r=n(5760),i=n(7553),o=n(732),s=n(3210);e.exports=function(e){return function(t){var n=i(t);return"[object Map]"==n?o(t):"[object Set]"==n?s(t):r(t,e(t))}}},5900:(e,t,n)=>{var r=n(9275),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},3249:(e,t,n)=>{var r=n(6506),i=n(6919),o=n(1243);e.exports=function(e,t,n,s,a,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var p=l.get(e),d=l.get(t);if(p&&d)return p==t&&d==e;var m=-1,f=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++m<u;){var y=e[m],b=t[m];if(s)var w=c?s(b,y,m,t,e,l):s(y,b,m,e,t,l);if(void 0!==w){if(w)continue;f=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(y===e||a(y,e,n,s,l)))return g.push(t)}))){f=!1;break}}else if(y!==b&&!a(y,b,n,s,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},3815:(e,t,n)=>{var r=n(7325),i=n(5569),o=n(8009),s=n(3249),a=n(732),l=n(439),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=a;case"[object Set]":var m=1&r;if(d||(d=l),e.size!=t.size&&!m)return!1;var f=p.get(e);if(f)return f==t;r|=2,p.set(e,t);var g=s(d(e),d(t),r,c,h,p);return p.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},1513:(e,t,n)=>{var r=n(7740),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var p=c[h];if(!(l?p in t:i.call(t,p)))return!1}var d=a.get(e),m=a.get(t);if(d&&m)return d==t&&m==e;var f=!0;a.set(e,t),a.set(t,e);for(var g=l;++h<u;){var y=e[p=c[h]],b=t[p];if(o)var w=l?o(b,y,p,t,e,a):o(y,b,p,e,t,a);if(!(void 0===w?y===b||s(y,b,n,o,a):w)){f=!1;break}g||(g="constructor"==p)}if(f&&!g){var v=e.constructor,C=t.constructor;v==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof C&&C instanceof C||(f=!1)}return a.delete(e),a.delete(t),f}},1331:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},7740:(e,t,n)=>{var r=n(5985),i=n(895),o=n(5351);e.exports=function(e){return r(e,o,i)}},4935:(e,t,n)=>{var r=n(3190);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},8550:(e,t,n)=>{var r=n(704),i=n(5351);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],s=e[o];t[n]=[o,s,r(s)]}return t}},9275:(e,t,n)=>{var r=n(8951),i=n(4260);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},7926:(e,t,n)=>{var r=n(7325),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},895:(e,t,n)=>{var r=n(9406),i=n(8172),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},7553:(e,t,n)=>{var r=n(1351),i=n(2197),o=n(5869),s=n(1226),a=n(7469),l=n(5635),c=n(5568),u="[object Map]",h="[object Promise]",p="[object Set]",d="[object WeakMap]",m="[object DataView]",f=c(r),g=c(i),y=c(o),b=c(s),w=c(a),v=l;(r&&v(new r(new ArrayBuffer(1)))!=m||i&&v(new i)!=u||o&&v(o.resolve())!=h||s&&v(new s)!=p||a&&v(new a)!=d)&&(v=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return m;case g:return u;case y:return h;case b:return p;case w:return d}return t}),e.exports=v},4260:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},6925:(e,t,n)=>{var r=n(2366),i=n(6369),o=n(2441),s=n(6771),a=n(129),l=n(218);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,h=!1;++c<u;){var p=l(t[c]);if(!(h=null!=e&&n(e,p)))break;e=e[p]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&a(u)&&s(p,u)&&(o(e)||i(e))}},5460:(e,t,n)=>{var r=n(8437);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},9722:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2515:(e,t,n)=>{var r=n(8437),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},8959:(e,t,n)=>{var r=n(8437),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},5505:(e,t,n)=>{var r=n(8437);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7092:(e,t,n)=>{var r=n(7325),i=n(6369),o=n(2441),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(s&&e&&e[s])}},6771:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},4481:(e,t,n)=>{var r=n(2441),i=n(6307),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||s.test(e)||!o.test(e)||null!=t&&e in Object(t)}},3190:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},1111:(e,t,n)=>{var r,i=n(9789),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},5769:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},704:(e,t,n)=>{var r=n(6751);e.exports=function(e){return e==e&&!r(e)}},1166:e=>{e.exports=function(){this.__data__=[],this.size=0}},5498:(e,t,n)=>{var r=n(8697),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},5294:(e,t,n)=>{var r=n(8697);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},9624:(e,t,n)=>{var r=n(8697);e.exports=function(e){return r(this.__data__,e)>-1}},8377:(e,t,n)=>{var r=n(8697);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},6465:(e,t,n)=>{var r=n(4521),i=n(7524),o=n(2197);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},859:(e,t,n)=>{var r=n(4935);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},4926:(e,t,n)=>{var r=n(4935);e.exports=function(e){return r(this,e).get(e)}},2611:(e,t,n)=>{var r=n(4935);e.exports=function(e){return r(this,e).has(e)}},798:(e,t,n)=>{var r=n(4935);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},732:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4574:e=>{e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},3499:(e,t,n)=>{var r=n(8743);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},8437:(e,t,n)=>{var r=n(9275)(Object,"create");e.exports=r},6481:(e,t,n)=>{var r=n(5423)(Object.keys,Object);e.exports=r},9673:(e,t,n)=>{e=n.nmd(e);var r=n(1331),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},3792:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5423:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},4988:(e,t,n)=>{var r=n(3965),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,a=i(o.length-t,0),l=Array(a);++s<a;)l[s]=o[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=o[s];return c[t]=n(l),r(e,this,c)}}},1794:(e,t,n)=>{var r=n(1331),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},9080:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5843:e=>{e.exports=function(e){return this.__data__.has(e)}},439:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},3210:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}},6574:(e,t,n)=>{var r=n(1633),i=n(2578)(r);e.exports=i},2578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},7125:(e,t,n)=>{var r=n(7524);e.exports=function(){this.__data__=new r,this.size=0}},6881:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},9801:e=>{e.exports=function(e){return this.__data__.get(e)}},1744:e=>{e.exports=function(e){return this.__data__.has(e)}},1446:(e,t,n)=>{var r=n(7524),i=n(2197),o=n(3291);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},1322:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},4586:(e,t,n)=>{var r=n(3499),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=s},218:(e,t,n)=>{var r=n(6307);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},5568:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},6987:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},6539:e=>{e.exports=function(e){return function(){return e}}},4397:(e,t,n)=>{var r=n(6751),i=n(9344),o=n(4258),s=Math.max,a=Math.min;e.exports=function(e,t,n){var l,c,u,h,p,d,m=0,f=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=l,r=c;return l=c=void 0,m=t,h=e.apply(r,n)}function w(e){return m=e,p=setTimeout(C,t),f?b(e):h}function v(e){var n=e-d;return void 0===d||n>=t||n<0||g&&e-m>=u}function C(){var e=i();if(v(e))return S(e);p=setTimeout(C,function(e){var n=t-(e-d);return g?a(n,u-(e-m)):n}(e))}function S(e){return p=void 0,y&&l?b(e):(l=c=void 0,h)}function E(){var e=i(),n=v(e);if(l=arguments,c=this,d=e,n){if(void 0===p)return w(d);if(g)return clearTimeout(p),p=setTimeout(C,t),b(d)}return void 0===p&&(p=setTimeout(C,t)),h}return t=o(t)||0,r(n)&&(f=!!n.leading,u=(g="maxWait"in n)?s(o(n.maxWait)||0,t):u,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==p&&clearTimeout(p),m=0,l=d=c=p=void 0},E.flush=function(){return void 0===p?h:S(i())},E}},2373:(e,t,n)=>{e.exports=n(2159)},8009:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},2229:(e,t,n)=>{var r=n(9948),i=/[\\^$.*+?()[\]{}|]/g,o=RegExp(i.source);e.exports=function(e){return(e=r(e))&&o.test(e)?e.replace(i,"\\$&"):e}},7466:(e,t,n)=>{var r=n(4743);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},8228:(e,t,n)=>{var r=n(9865),i=n(1562),o=Object.prototype.hasOwnProperty,s=i((function(e,t,n){o.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=s},5137:(e,t,n)=>{var r=n(9679),i=n(6925);e.exports=function(e,t){return null!=e&&i(e,t,r)}},676:e=>{e.exports=function(e){return e}},6369:(e,t,n)=>{var r=n(969),i=n(8863),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},2441:e=>{var t=Array.isArray;e.exports=t},9303:(e,t,n)=>{var r=n(4936),i=n(129);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},2893:(e,t,n)=>{var r=n(9303),i=n(8863);e.exports=function(e){return i(e)&&r(e)}},5453:(e,t,n)=>{e=n.nmd(e);var r=n(1794),i=n(3989),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},4936:(e,t,n)=>{var r=n(5635),i=n(6751);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},129:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6751:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},8863:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6307:(e,t,n)=>{var r=n(5635),i=n(8863);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},1575:(e,t,n)=>{var r=n(1874),i=n(2265),o=n(9673),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},5351:(e,t,n)=>{var r=n(8022),i=n(1249),o=n(9303);e.exports=function(e){return o(e)?r(e):i(e)}},8743:(e,t,n)=>{var r=n(3291);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},5478:e=>{e.exports=function(){}},9344:(e,t,n)=>{var r=n(1794);e.exports=function(){return r.Date.now()}},651:(e,t,n)=>{var r=n(3824),i=n(4432),o=n(4481),s=n(218);e.exports=function(e){return o(e)?r(s(e)):i(e)}},8172:e=>{e.exports=function(){return[]}},3989:e=>{e.exports=function(){return!1}},4258:(e,t,n)=>{var r=n(3029),i=n(6751),o=n(6307),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},2159:(e,t,n)=>{var r=n(364)(n(5351));e.exports=r},9948:(e,t,n)=>{var r=n(8849);e.exports=function(e){return null==e?"":r(e)}},8033:(e,t,n)=>{var r=n(2423);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?r(e,void 0,t):[]}},7952:(e,t,n)=>{var r=n(9406),i=n(5329),o=n(8541),s=n(2893),a=i((function(e){return o(r(e,s))}));e.exports=a},3229:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}l((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(3766));function s(e,t="maxAge"){let n,i,s;const a=()=>r(this,void 0,void 0,(function*(){if(void 0!==n)return;const a=a=>r(this,void 0,void 0,(function*(){s=o.default();const r=a[1][t]-Date.now();return r<=0?(e.delete(a[0]),void s.resolve()):(n=a[0],i=setTimeout((()=>{e.delete(a[0]),s&&s.resolve()}),r),"function"==typeof i.unref&&i.unref(),s.promise)}));try{for(const t of e)yield a(t)}catch(e){}n=void 0})),l=e.set.bind(e);return e.set=(t,r)=>{e.has(t)&&e.delete(t);const o=l(t,r);return n&&n===t&&(n=void 0,void 0!==i&&(clearTimeout(i),i=void 0),void 0!==s&&(s.reject(void 0),s=void 0)),a(),o},a(),e}t.default=s,e.exports=s,e.exports.default=s},2878:(e,t,n)=>{"use strict";const r=n(1689),i=n(3264),o=n(3229),s=new WeakMap,a=(...e)=>{if(0===e.length)return"__defaultKey";if(1===e.length){const[t]=e;if(null==t||"function"!=typeof t&&"object"!=typeof t)return t}return JSON.stringify(e)},l=(e,t)=>{"number"==typeof(t=Object.assign({cacheKey:a,cache:new Map,cachePromiseRejection:!1},t)).maxAge&&o(t.cache);const{cache:n}=t;t.maxAge=t.maxAge||0;const l=function(...r){const o=t.cacheKey(...r);if(n.has(o))return n.get(o).data;const s=e.call(this,...r);return((e,r)=>{n.set(e,{data:r,maxAge:Date.now()+t.maxAge})})(o,s),i(s)&&!1===t.cachePromiseRejection&&s.catch((()=>n.delete(o))),s};try{r(l,e)}catch(e){}return s.set(l,t.cache),l};e.exports=l,e.exports.default=l,e.exports.clear=e=>{const t=s.get(e);t&&"function"==typeof t.clear&&t.clear()}},1689:e=>{"use strict";const t=(e,t)=>{for(const n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};e.exports=t,e.exports.default=t},5419:e=>{"use strict";e.exports=function(e){try{return e()}catch(e){}}},1829:(e,t,n)=>{"use strict";const r=n(1017),i=n(5620);e.exports=e=>{let t;e=Object.assign({cwd:process.cwd(),path:process.env[i()]},e);let n=r.resolve(e.cwd);const o=[];for(;t!==n;)o.push(r.join(n,"node_modules/.bin")),t=n,n=r.resolve(n,"..");return o.push(r.dirname(process.execPath)),o.concat(e.path).join(r.delimiter)},e.exports.env=t=>{t=Object.assign({env:process.env},t);const n=Object.assign({},t.env),r=i({env:n});return t.path=n[r],n[r]=e.exports(t),n}},109:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var s,a,l=i(e),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))n.call(s,u)&&(l[u]=s[u]);if(t){a=t(s);for(var h=0;h<a.length;h++)r.call(s,a[h])&&(l[a[h]]=s[a[h]])}}return l}},3417:(e,t,n)=>{var r=n(4934);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=r(i),e.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},3766:e=>{"use strict";e.exports=()=>{const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}},8911:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},3264:e=>{"use strict";const t=e=>e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch;e.exports=t,e.exports.default=t},9093:(e,t,n)=>{"use strict";const r=n(9867),i=e=>{if(e<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const t=[];let n=0;const i=()=>{n--,t.length>0&&t.shift()()},o=(e,t,...o)=>{n++;const s=r(e,...o);t(s),s.then(i,i)},s=(r,...i)=>new Promise((s=>((r,i,...s)=>{n<e?o(r,i,...s):t.push(o.bind(null,r,i,...s))})(r,s,...i)));return Object.defineProperties(s,{activeCount:{get:()=>n},pendingCount:{get:()=>t.length}}),s};e.exports=i,e.exports.default=i},9867:e=>{"use strict";const t=(e,...t)=>new Promise((n=>{n(e(...t))}));e.exports=t,e.exports.default=t},5620:e=>{"use strict";e.exports=e=>{const t=(e=e||{}).env||process.env;return"win32"!==(e.platform||"darwin")?"PATH":Object.keys(t).find((e=>"PATH"===e.toUpperCase()))||"Path"}},4051:(e,t,n)=>{"use strict";var r=n(8464);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},3470:(e,t,n)=>{e.exports=n(4051)()},8464:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3021:(e,t,n)=>{var r=n(3417),i=n(3558),o=n(7147),s=function(){},a=/^v?\.0/.test(process.version),l=function(e){return"function"==typeof e},c=function(e,t,n,c){c=r(c);var u=!1;e.on("close",(function(){u=!0})),i(e,{readable:t,writable:n},(function(e){if(e)return c(e);u=!0,c()}));var h=!1;return function(t){if(!u&&!h)return h=!0,function(e){return!!a&&!!o&&(e instanceof(o.ReadStream||s)||e instanceof(o.WriteStream||s))&&l(e.close)}(e)?e.close(s):function(e){return e.setHeader&&l(e.abort)}(e)?e.abort():l(e.destroy)?e.destroy():void c(t||new Error("stream was destroyed"))}},u=function(e){e()},h=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=l(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r=t.map((function(i,o){var s=o<t.length-1;return c(i,s,o>0,(function(t){e||(e=t),t&&r.forEach(u),s||(r.forEach(u),n(e))}))}));return t.reduce(h)}},4333:e=>{"use strict";class t{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return this._size+e}}e.exports=t,e.exports.default=t},6215:function(e,t,n){var r;"undefined"!=typeof self&&self,e.exports=(r=n(6826),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=r},function(e,t,n){"use strict";var r={linear:function(e,t,n,r){return(n-t)*e/r+t},easeInQuad:function(e,t,n,r){return(n-t)*(e/=r)*e+t},easeOutQuad:function(e,t,n,r){return-(n-t)*(e/=r)*(e-2)+t},easeInOutQuad:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,n,r){return(n-t)*(e/=r)*e*e+t},easeOutCubic:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e+t},easeOutQuart:function(e,t,n,r){return-(n-t)*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,n,r){return(n-t)*(e/=r)*e*e*e*e+t},easeOutQuint:function(e,t,n,r){return(n-t)*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,n,r){var i=n-t;return-i*Math.cos(e/r*(Math.PI/2))+i+t},easeOutSine:function(e,t,n,r){return(n-t)*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(e,t,n,r){return-(n-t)/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(e,t,n,r){return 0==e?t:(n-t)*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(e,t,n,r){var i=n-t;return e==r?t+i:i*(1-Math.pow(2,-10*e/r))+t},easeInOutExpo:function(e,t,n,r){var i=n-t;return 0===e?t:e===r?t+i:(e/=r/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,n,r){return-(n-t)*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(e,t,n,r){return(n-t)*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(e,t,n,r){var i=n-t;return(e/=r/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,n,r){var i,o,s,a=n-t;return s=1.70158,0===e?t:1==(e/=r)?t+a:((o=0)||(o=.3*r),(i=a)<Math.abs(a)?(i=a,s=o/4):s=o/(2*Math.PI)*Math.asin(a/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/o)+t)},easeOutElastic:function(e,t,n,r){var i,o,s,a=n-t;return s=1.70158,0===e?t:1==(e/=r)?t+a:((o=0)||(o=.3*r),(i=a)<Math.abs(a)?(i=a,s=o/4):s=o/(2*Math.PI)*Math.asin(a/i),i*Math.pow(2,-10*e)*Math.sin((e*r-s)*(2*Math.PI)/o)+a+t)},easeInOutElastic:function(e,t,n,r){var i,o,s,a=n-t;return s=1.70158,0===e?t:2==(e/=r/2)?t+a:((o=0)||(o=r*(.3*1.5)),(i=a)<Math.abs(a)?(i=a,s=o/4):s=o/(2*Math.PI)*Math.asin(a/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/o)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-s)*(2*Math.PI)/o)*.5+a+t)},easeInBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(n-t)*(e/=r)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,n,r,i){return void 0===i&&(i=1.70158),(n-t)*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,n,r,i){var o=n-t;return void 0===i&&(i=1.70158),(e/=r/2)<1?o/2*(e*e*((1+(i*=1.525))*e-i))+t:o/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,t,n,i){var o=n-t;return o-r.easeOutBounce(i-e,0,o,i)+t},easeOutBounce:function(e,t,n,r){var i=n-t;return(e/=r)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,n,i){var o=n-t;return e<i/2?.5*r.easeInBounce(2*e,0,o,i)+t:.5*r.easeOutBounce(2*e-i,0,o,i)+.5*o+t}};e.exports=r},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";n.r(t),n.d(t,"ReactConfetti",(function(){return F}));var r,i,o=n(0),s=n.n(o),a=n(1),l=n.n(a);function c(e,t){return e+Math.random()*(t-e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.Circle=0]="Circle",e[e.Square=1]="Square",e[e.Strip=2]="Strip"}(r||(r={})),function(e){e[e.Positive=1]="Positive",e[e.Negative=-1]="Negative"}(i||(i={}));var p=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"context",void 0),h(this,"radius",void 0),h(this,"x",void 0),h(this,"y",void 0),h(this,"w",void 0),h(this,"h",void 0),h(this,"vx",void 0),h(this,"vy",void 0),h(this,"shape",void 0),h(this,"angle",void 0),h(this,"angularSpin",void 0),h(this,"color",void 0),h(this,"rotateY",void 0),h(this,"rotationDirection",void 0),h(this,"getOptions",void 0),this.getOptions=n;var s=this.getOptions(),a=s.colors,l=s.initialVelocityX,u=s.initialVelocityY;this.context=t,this.x=r,this.y=o,this.w=c(5,20),this.h=c(5,20),this.radius=c(5,10),this.vx="number"==typeof l?c(-l,l):c(l.min,l.max),this.vy="number"==typeof u?c(-u,0):c(u.min,u.max),this.shape=(0,2,Math.floor(0+3*Math.random())),this.angle=c(0,360)*Math.PI/180,this.angularSpin=c(-.2,.2),this.color=a[Math.floor(Math.random()*a.length)],this.rotateY=c(0,1),this.rotationDirection=c(0,1)?i.Positive:i.Negative}var t,n;return t=e,(n=[{key:"update",value:function(){var e=this.getOptions(),t=e.gravity,n=e.wind,o=e.friction,s=e.opacity,a=e.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=t,this.vx+=n,this.vx*=o,this.vy*=o,this.rotateY>=1&&this.rotationDirection===i.Positive?this.rotationDirection=i.Negative:this.rotateY<=-1&&this.rotationDirection===i.Negative&&(this.rotationDirection=i.Positive);var l=.1*this.rotationDirection;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=s,this.context.lineCap="round",this.context.lineWidth=2,a&&"function"==typeof a)a.call(this,this.context);else switch(this.shape){case r.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case r.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case r.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&u(t.prototype,n),e}();function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"canvas",void 0),d(this,"context",void 0),d(this,"getOptions",void 0),d(this,"x",0),d(this,"y",0),d(this,"w",0),d(this,"h",0),d(this,"lastNumberOfPieces",0),d(this,"tweenInitTime",Date.now()),d(this,"particles",[]),d(this,"particlesGenerated",0),d(this,"removeParticleAt",(function(e){r.particles.splice(e,1)})),d(this,"getParticle",(function(){var e=c(r.x,r.w+r.x),t=c(r.y,r.h+r.y);return new p(r.context,r.getOptions,e,t)})),d(this,"animate",(function(){var e=r.canvas,t=r.context,n=r.particlesGenerated,i=r.lastNumberOfPieces,o=r.getOptions(),s=o.run,a=o.recycle,l=o.numberOfPieces,c=o.debug,u=o.tweenFunction,h=o.tweenDuration;if(!s)return!1;var p=r.particles.length,d=a?p:n,m=Date.now();if(d<l){i!==l&&(r.tweenInitTime=m,r.lastNumberOfPieces=l);for(var f=r.tweenInitTime,g=u(m-f>h?h:Math.max(0,m-f),d,l,h),y=Math.round(g-d),b=0;b<y;b++)r.particles.push(r.getParticle());r.particlesGenerated+=y}return c&&(t.font="12px sans-serif",t.fillStyle="#333",t.textAlign="right",t.fillText("Particles: ".concat(p),e.width-10,e.height-20)),r.particles.forEach((function(t,n){t.update(),(t.y>e.height||t.y<-100||t.x>e.width+100||t.x<-100)&&(a&&d<=l?r.particles[n]=r.getParticle():r.removeParticleAt(n))})),p>0||d<l})),this.canvas=t;var i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.getOptions=n};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={width:"undefined"!=typeof window?window.innerWidth:300,height:"undefined"!=typeof window?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:l.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},v=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"canvas",void 0),b(this,"context",void 0),b(this,"_options",void 0),b(this,"generator",void 0),b(this,"rafId",void 0),b(this,"setOptionsWithDefaults",(function(e){var t={confettiSource:{x:0,y:0,w:r.canvas.width,h:0}};r._options=g(g(g({},t),w),e),Object.assign(r,e.confettiSource)})),b(this,"update",(function(){var e=r.options,t=e.run,n=e.onConfettiComplete,i=r.canvas,o=r.context;t&&(o.fillStyle="white",o.clearRect(0,0,i.width,i.height)),r.generator.animate()?r.rafId=requestAnimationFrame(r.update):(n&&"function"==typeof n&&r.generator.particlesGenerated>0&&n.call(r,r),r._options.run=!1)})),b(this,"reset",(function(){r.generator&&r.generator.particlesGenerated>0&&(r.generator.particlesGenerated=0,r.generator.particles=[],r.generator.lastNumberOfPieces=0)})),b(this,"stop",(function(){r.options={run:!1},r.rafId&&(cancelAnimationFrame(r.rafId),r.rafId=void 0)})),this.canvas=t;var i=this.canvas.getContext("2d");if(!i)throw new Error("Could not get canvas context");this.context=i,this.generator=new m(this.canvas,(function(){return r.options})),this.options=n,this.update()}var t,n;return t=e,(n=[{key:"options",get:function(){return this._options},set:function(e){var t=this._options&&this._options.run,n=this._options&&this._options.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),"boolean"==typeof e.recycle&&e.recycle&&!1===n&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),"boolean"==typeof e.run&&e.run&&!1===t&&this.update()}}])&&y(t.prototype,n),e}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=s.a.createRef(),M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}(i);function i(e){var t;T(this,i);for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return N(I(t=r.call.apply(r,[this,e].concat(o))),"canvas",s.a.createRef()),N(I(t),"confetti",void 0),t.canvas=e.canvasRef||O,t}return t=i,(n=[{key:"componentDidMount",value:function(){if(this.canvas.current){var e=B(this.props)[0];this.confetti=new v(this.canvas.current,e)}}},{key:"componentDidUpdate",value:function(){var e=B(this.props)[0];this.confetti&&(this.confetti.options=e)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(B(this.props),2),t=e[0],n=e[1],r=k({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},n.style);return s.a.createElement("canvas",S({width:t.width,height:t.height,ref:this.canvas},n,{style:r}))}}])&&D(t.prototype,n),i}(o.Component);function B(e){var t={},n={},r=[].concat(function(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.keys(w)),["confettiSource","drawShape","onConfettiComplete"]),i=["canvasRef"];for(var o in e){var s=e[o];r.includes(o)?t[o]=s:i.includes(o)?i[o]=s:n[o]=s}return[t,n,{}]}N(M,"defaultProps",k({},w)),N(M,"displayName","ReactConfetti");var F=s.a.forwardRef((function(e,t){return s.a.createElement(M,S({canvasRef:t},e))}));t.default=F}]).default)},1782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=d(n(6826)),l=n(2623),c=(d(n(3470)),d(n(5402))),u=d(n(7587)),h=d(n(1388)),p=d(n(7532));function d(e){return e&&e.__esModule?e:{default:e}}n(5325);var m=a.default.createFactory(p.default),f=(i=r=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return i.handleDoneAppearing=function(e){delete i.transitioningKeys[e],e!==i.state.currentKey&&i.performLeave(e)},i.performLeave=function(e){i.transitioningKeys[e]=!0,i.childRefs[e].componentWillLeave(i.handleDoneLeaving.bind(i,e)),i.state.currentChild&&(0,l.findDOMNode)(i.childRefs[i.state.currentKey])||i.enqueueHeightTransition()},i.performHeightTransition=function(){if(!i.unmounted){var e=i.state,t=e.currentChild?(0,l.findDOMNode)(i.childRefs[e.currentKey]):null;i.setState({height:t?t.offsetHeight:0,width:i.props.changeWidth?t?t.offsetWidth:0:null})}i.rafHandle=null},i.childRefs=Object.create(null),i.state={currentKey:"1",currentChild:i.props.children?a.default.Children.only(i.props.children):void 0,prevChildren:{},height:null,width:null},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf,function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}}(e,t))}(t,e),t.prototype.componentWillMount=function(){this.shouldEnterCurrent=!1,this.keysToLeave=[],this.transitioningKeys={}},t.prototype.componentDidMount=function(){this.props.transitionAppear&&this.state.currentChild&&this.performAppear(this.state.currentKey)},t.prototype.componentWillUnmount=function(){this.unmounted=!0},t.prototype.componentWillReceiveProps=function(e){var t=e.children?a.default.Children.only(e.children):void 0,n=this.state.currentChild;if(n&&t&&t.key===n.key&&!this.state.nextChild)return this.setState({currentChild:t});var r=this.state,i=r.currentKey,o=r.prevChildren,c={currentKey:String(Number(i)+1),currentChild:t,height:0,width:this.props.changeWidth?0:null};if(t&&(this.shouldEnterCurrent=!0),n){var u,h=(0,l.findDOMNode)(this.childRefs[i]);c.height=h?h.offsetHeight:0,c.width=this.props.changeWidth?h?h.offsetWidth:0:null,c.prevChildren=s({},o,((u={})[i]=n,u)),this.transitioningKeys[i]||this.keysToLeave.push(i)}this.setState(c)},t.prototype.componentDidUpdate=function(){this.shouldEnterCurrent&&(this.shouldEnterCurrent=!1,(0,l.findDOMNode)(this.childRefs[this.state.currentKey])&&this.performEnter(this.state.currentKey));var e=this.keysToLeave;this.keysToLeave=[],e.forEach(this.performLeave)},t.prototype.performAppear=function(e){this.transitioningKeys[e]=!0,this.childRefs[e].componentWillAppear(this.handleDoneAppearing.bind(this,e))},t.prototype.performEnter=function(e){this.transitioningKeys[e]=!0,this.childRefs[e].componentWillEnter(this.handleDoneEntering.bind(this,e)),this.enqueueHeightTransition()},t.prototype.handleDoneEntering=function(e){delete this.transitioningKeys[e],e===this.state.currentKey?this.setState({height:null}):this.performLeave(e)},t.prototype.handleDoneLeaving=function(e){delete this.transitioningKeys[e];var t={prevChildren:s({},this.state.prevChildren)};delete t.prevChildren[e],delete this.childRefs[e],this.state.currentChild&&(0,l.findDOMNode)(this.childRefs[this.state.currentKey])||(t.height=null),this.setState(t)},t.prototype.enqueueHeightTransition=function(){this.rafHandle||(this.rafHandle=(0,h.default)(this.performHeightTransition))},t.prototype.wrapChild=function(e,t){var n=this.props.transitionName;return"object"===(void 0===n?"undefined":o(n))&&null!==n&&delete(n=s({},n)).height,m(s({name:n,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},t),e)},t.prototype.storeChildRef=function(e,t){var n=this,r="string"!=typeof e.ref;return(0,u.default)(r,"string refs are not supported on children of ReactCSSTransitionReplace and will be ignored. Please use a callback ref instead: https://facebook.github.io/react/docs/refs-and-the-dom.html#the-ref-callback-attribute"),(0,c.default)(r?e.ref:null,(function(e){n.childRefs[t]=e}))},t.prototype.render=function(){var e=this,t=this.state,n=t.currentKey,r=t.currentChild,i=t.prevChildren,o=t.height,l=t.width,c=[],u=this.props,h=u.overflowHidden,p=u.transitionName,d=u.component,m=u.childComponent,f=u.notifyLeaving,g=(u.transitionAppear,u.transitionEnter,u.transitionLeave,u.changeWidth,u.transitionAppearTimeout,u.transitionEnterTimeout,u.transitionLeaveTimeout,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(u,["overflowHidden","transitionName","component","childComponent","notifyLeaving","transitionAppear","transitionEnter","transitionLeave","changeWidth","transitionAppearTimeout","transitionEnterTimeout","transitionLeaveTimeout"])),y=this.shouldEnterCurrent||this.keysToLeave.length||Object.keys(this.transitioningKeys).length;if(g.style=s({},g.style),y&&(g.style.position="relative",h&&(g.style.overflow="hidden")),null!==o){var b="string"==typeof p?p+"-height":p&&p.height||"";g.className=String(g.className||"")+" "+String(b),g.style.height=o}null!==l&&(g.style.width=l);var w={position:"absolute",top:0,left:0,right:0,bottom:0,userSelect:"none"};return Object.keys(i).forEach((function(t){var n=i[t];c.push(a.default.createElement(m,{key:t,style:w},e.wrapChild(f&&"string"!=typeof n.type?a.default.cloneElement(n,{isLeaving:!0}):n,{ref:e.storeChildRef(n,t)})))})),r&&c.push(a.default.createElement(m,{key:n,style:this.transitioningKeys[n]?w:y?{position:"relative"}:null},this.wrapChild(r,{ref:this.storeChildRef(r,n)}))),a.default.createElement(d,g,c)},t}(a.default.Component),r.displayName="ReactCSSTransitionReplace",r.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0,overflowHidden:!0,changeWidth:!1,notifyLeaving:!1,component:"div",childComponent:"span"},i);t.default=f,e.exports=t.default},7532:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=m(n(2843)),a=m(n(3199)),l=m(n(1388)),c=n(1721),u=m(n(6826)),h=m(n(3470)),p=n(2623),d=n(5325);function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=[];c.transitionEnd&&y.push(c.transitionEnd),c.animationEnd&&y.push(c.animationEnd),h.default.node,d.nameShape.isRequired,h.default.bool,h.default.bool,h.default.bool,h.default.number,h.default.number,h.default.number;var b=(i=r=function(e){function t(){var n,r;f(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=g(this,e.call.apply(e,[this].concat(o))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},g(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf,function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}}(e,t))}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,p.findDOMNode)(this);if(r){var i=this.props.name[e]||this.props.name+"-"+e,o=this.props.name[e+"Active"]||i+"-active",l=null,u=void 0;(0,s.default)(r,i),this.queueClassAndNode(o,r);var h=function(e){e&&e.target!==r||(clearTimeout(l),u&&u(),(0,a.default)(r,i),(0,a.default)(r,o),u&&u(),t&&t())};n?(l=setTimeout(h,n),this.transitionTimeouts.push(l)):c.transitionEnd&&(u=function(e,t){return y.length?y.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){y.length&&y.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(r,h))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,l.default)((function(){return n.flushClassNameAndNodeQueueOnNextFrame()})))},t.prototype.flushClassNameAndNodeQueueOnNextFrame=function(){var e=this;this.rafHandle=(0,l.default)((function(){return e.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,s.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=o({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,u.default.cloneElement(u.default.Children.only(this.props.children),e)},t}(u.default.Component),r.displayName="CSSTransitionGroupChild",i);t.default=b,e.exports=t.default},5325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};var r,i=(r=n(3470))&&r.__esModule?r:{default:r};t.nameShape=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,leave:i.default.string,active:i.default.string,height:i.default.string}),i.default.shape({enter:i.default.string,enterActive:i.default.string,leave:i.default.string,leaveActive:i.default.string,appear:i.default.string,appearActive:i.default.string,height:i.default.string,heightActive:i.default.string})])},6075:(e,t,n)=>{"use strict";var r=n(6826),i=n(109),o=n(3991);function s(e,t,n,r,i,o,s,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],c=0;(e=Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw e.framesToPop=1,e}}function a(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);s(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}function l(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}r||a("227");var c=!1,u=null,h=!1,p=null,d={onError:function(e){c=!0,u=e}};function m(e,t,n,r,i,o,s,a,h){c=!1,u=null,l.apply(d,arguments)}var f=null,g={};function y(){if(f)for(var e in g){var t=g[e],n=f.indexOf(e);if(-1<n||a("96",e),!w[n])for(var r in t.extractEvents||a("97",e),w[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,l=r;v.hasOwnProperty(l)&&a("99",l),v[l]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&b(c[i],s,l);i=!0}else o.registrationName?(b(o.registrationName,s,l),i=!0):i=!1;i||a("98",r,e)}}}function b(e,t,n){C[e]&&a("100",e),C[e]=t,S[e]=t.eventTypes[n].dependencies}var w=[],v={},C={},S={},E=null,k=null,R=null;function x(e,t,n){var r=e.type||"unknown-event";e.currentTarget=R(n),function(e,t,n,r,i,o,s,l,d){if(m.apply(this,arguments),c){if(c){var f=u;c=!1,u=null}else a("198"),f=void 0;h||(h=!0,p=f)}}(r,t,void 0,e),e.currentTarget=null}function T(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function D(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var A=null;function P(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)x(e,t[r],n[r]);else t&&x(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var I={injectEventPluginOrder:function(e){f&&a("101"),f=Array.prototype.slice.call(e),y()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];g.hasOwnProperty(t)&&g[t]===r||(g[t]&&a("102",t),g[t]=r,n=!0)}n&&y()}};function _(e,t){var n=e.stateNode;if(!n)return null;var r=E(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&a("231",t,typeof n),n)}function N(e){if(null!==e&&(A=T(A,e)),e=A,A=null,e&&(D(e,P),A&&a("95"),h))throw e=p,h=!1,p=null,e}var O=Math.random().toString(36).slice(2),M="__reactInternalInstance$"+O,B="__reactEventHandlers$"+O;function F(e){if(e[M])return e[M];for(;!e[M];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[M]).tag||6===e.tag?e:null}function L(e){return!(e=e[M])||5!==e.tag&&6!==e.tag?null:e}function H(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function U(e){return e[B]||null}function W(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function $(e,t,n){(t=_(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function z(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=W(t);for(t=n.length;0<t--;)$(n[t],"captured",e);for(t=0;t<n.length;t++)$(n[t],"bubbled",e)}}function q(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=_(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function j(e){e&&e.dispatchConfig.registrationName&&q(e._targetInst,null,e)}function G(e){D(e,z)}var V=!("undefined"==typeof window||!window.document||!window.document.createElement);function K(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Y={animationend:K("Animation","AnimationEnd"),animationiteration:K("Animation","AnimationIteration"),animationstart:K("Animation","AnimationStart"),transitionend:K("Transition","TransitionEnd")},X={},Q={};function Z(e){if(X[e])return X[e];if(!Y[e])return e;var t,n=Y[e];for(t in n)if(n.hasOwnProperty(t)&&t in Q)return X[e]=n[t];return e}V&&(Q=document.createElement("div").style,"AnimationEvent"in window||(delete Y.animationend.animation,delete Y.animationiteration.animation,delete Y.animationstart.animation),"TransitionEvent"in window||delete Y.transitionend.transition);var J=Z("animationend"),ee=Z("animationiteration"),te=Z("animationstart"),ne=Z("transitionend"),re="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ie=null,oe=null,se=null;function ae(){if(se)return se;var e,t,n=oe,r=n.length,i="value"in ie?ie.value:ie.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return se=i.slice(e,1<t?1-t:void 0)}function le(){return!0}function ce(){return!1}function ue(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?le:ce,this.isPropagationStopped=ce,this}function he(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function pe(e){e instanceof this||a("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=he,e.release=pe}i(ue.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=le)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=le)},persist:function(){this.isPersistent=le},isPersistent:ce,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ce,this._dispatchInstances=this._dispatchListeners=null}}),ue.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ue.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,de(n),n},de(ue);var me=ue.extend({data:null}),fe=ue.extend({data:null}),ge=[9,13,27,32],ye=V&&"CompositionEvent"in window,be=null;V&&"documentMode"in document&&(be=document.documentMode);var we=V&&"TextEvent"in window&&!be,ve=V&&(!ye||be&&8<be&&11>=be),Ce=String.fromCharCode(32),Se={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ee=!1;function ke(e,t){switch(e){case"keyup":return-1!==ge.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Re(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var xe=!1,Te={eventTypes:Se,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(ye)e:{switch(e){case"compositionstart":i=Se.compositionStart;break e;case"compositionend":i=Se.compositionEnd;break e;case"compositionupdate":i=Se.compositionUpdate;break e}i=void 0}else xe?ke(e,n)&&(i=Se.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Se.compositionStart);return i?(ve&&"ko"!==n.locale&&(xe||i!==Se.compositionStart?i===Se.compositionEnd&&xe&&(o=ae()):(oe="value"in(ie=r)?ie.value:ie.textContent,xe=!0)),i=me.getPooled(i,t,n,r),(o||null!==(o=Re(n)))&&(i.data=o),G(i),o=i):o=null,(e=we?function(e,t){switch(e){case"compositionend":return Re(t);case"keypress":return 32!==t.which?null:(Ee=!0,Ce);case"textInput":return(e=t.data)===Ce&&Ee?null:e;default:return null}}(e,n):function(e,t){if(xe)return"compositionend"===e||!ye&&ke(e,t)?(e=ae(),se=oe=ie=null,xe=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ve&&"ko"!==t.locale?null:t.data}}(e,n))?((t=fe.getPooled(Se.beforeInput,t,n,r)).data=e,G(t)):t=null,null===o?t:null===t?o:[o,t]}},De=null,Ae=null,Pe=null;function Ie(e){if(e=k(e)){"function"!=typeof De&&a("280");var t=E(e.stateNode);De(e.stateNode,e.type,t)}}function _e(e){Ae?Pe?Pe.push(e):Pe=[e]:Ae=e}function Ne(){if(Ae){var e=Ae,t=Pe;if(Pe=Ae=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Oe(e,t){return e(t)}function Me(e,t,n){return e(t,n)}function Be(){}var Fe=!1;function Le(e,t){if(Fe)return e(t);Fe=!0;try{return Oe(e,t)}finally{Fe=!1,(null!==Ae||null!==Pe)&&(Be(),Ne())}}var He={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ue(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!He[e.type]:"textarea"===t}function We(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function $e(e){if(!V)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function ze(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function qe(e){e._valueTracker||(e._valueTracker=function(e){var t=ze(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function je(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ze(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Ge=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ge.hasOwnProperty("ReactCurrentDispatcher")||(Ge.ReactCurrentDispatcher={current:null});var Ve=/^(.*)[\\\/]/,Ke="function"==typeof Symbol&&Symbol.for,Ye=Ke?Symbol.for("react.element"):60103,Xe=Ke?Symbol.for("react.portal"):60106,Qe=Ke?Symbol.for("react.fragment"):60107,Ze=Ke?Symbol.for("react.strict_mode"):60108,Je=Ke?Symbol.for("react.profiler"):60114,et=Ke?Symbol.for("react.provider"):60109,tt=Ke?Symbol.for("react.context"):60110,nt=Ke?Symbol.for("react.concurrent_mode"):60111,rt=Ke?Symbol.for("react.forward_ref"):60112,it=Ke?Symbol.for("react.suspense"):60113,ot=Ke?Symbol.for("react.memo"):60115,st=Ke?Symbol.for("react.lazy"):60116,at="function"==typeof Symbol&&Symbol.iterator;function lt(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=at&&e[at]||e["@@iterator"])?e:null}function ct(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case nt:return"ConcurrentMode";case Qe:return"Fragment";case Xe:return"Portal";case Je:return"Profiler";case Ze:return"StrictMode";case it:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case tt:return"Context.Consumer";case et:return"Context.Provider";case rt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case ot:return ct(e.type);case st:if(e=1===e._status?e._result:null)return ct(e)}return null}function ut(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ct(e.type);n=null,r&&(n=ct(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Ve,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var ht=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pt=Object.prototype.hasOwnProperty,dt={},mt={};function ft(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){gt[e]=new ft(e,0,!1,e,null)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];gt[t]=new ft(t,1,!1,e[1],null)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){gt[e]=new ft(e,2,!1,e.toLowerCase(),null)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){gt[e]=new ft(e,2,!1,e,null)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){gt[e]=new ft(e,3,!1,e.toLowerCase(),null)})),["checked","multiple","muted","selected"].forEach((function(e){gt[e]=new ft(e,3,!0,e,null)})),["capture","download"].forEach((function(e){gt[e]=new ft(e,4,!1,e,null)})),["cols","rows","size","span"].forEach((function(e){gt[e]=new ft(e,6,!1,e,null)})),["rowSpan","start"].forEach((function(e){gt[e]=new ft(e,5,!1,e.toLowerCase(),null)}));var yt=/[\-:]([a-z])/g;function bt(e){return e[1].toUpperCase()}function wt(e,t,n,r){var i=gt.hasOwnProperty(t)?gt[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!pt.call(mt,e)||!pt.call(dt,e)&&(ht.test(e)?mt[e]=!0:(dt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function vt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ct(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function St(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=vt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Et(e,t){null!=(t=t.checked)&&wt(e,"checked",t,!1)}function kt(e,t){Et(e,t);var n=vt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?xt(e,t.type,n):t.hasOwnProperty("defaultValue")&&xt(e,t.type,vt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Rt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function xt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(yt,bt);gt[t]=new ft(t,1,!1,e,null)})),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(yt,bt);gt[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink")})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(yt,bt);gt[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")})),["tabIndex","crossOrigin"].forEach((function(e){gt[e]=new ft(e,1,!1,e.toLowerCase(),null)}));var Tt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Dt(e,t,n){return(e=ue.getPooled(Tt.change,e,t,n)).type="change",_e(n),G(e),e}var At=null,Pt=null;function It(e){N(e)}function _t(e){if(je(H(e)))return e}function Nt(e,t){if("change"===e)return t}var Ot=!1;function Mt(){At&&(At.detachEvent("onpropertychange",Bt),Pt=At=null)}function Bt(e){"value"===e.propertyName&&_t(Pt)&&Le(It,e=Dt(Pt,e,We(e)))}function Ft(e,t,n){"focus"===e?(Mt(),Pt=n,(At=t).attachEvent("onpropertychange",Bt)):"blur"===e&&Mt()}function Lt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _t(Pt)}function Ht(e,t){if("click"===e)return _t(t)}function Ut(e,t){if("input"===e||"change"===e)return _t(t)}V&&(Ot=$e("input")&&(!document.documentMode||9<document.documentMode));var Wt={eventTypes:Tt,_isInputEventSupported:Ot,extractEvents:function(e,t,n,r){var i=t?H(t):window,o=void 0,s=void 0,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type?o=Nt:Ue(i)?Ot?o=Ut:(o=Lt,s=Ft):(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Ht),o&&(o=o(e,t)))return Dt(o,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&xt(i,"number",i.value)}},$t=ue.extend({view:null,detail:null}),zt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=zt[e])&&!!t[e]}function jt(){return qt}var Gt=0,Vt=0,Kt=!1,Yt=!1,Xt=$t.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:jt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Gt;return Gt=e.screenX,Kt?"mousemove"===e.type?e.screenX-t:0:(Kt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Vt;return Vt=e.screenY,Yt?"mousemove"===e.type?e.screenY-t:0:(Yt=!0,0)}}),Qt=Xt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Zt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Jt={eventTypes:Zt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?F(t):null):o=null,o===t)return null;var s=void 0,a=void 0,l=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(s=Xt,a=Zt.mouseLeave,l=Zt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(s=Qt,a=Zt.pointerLeave,l=Zt.pointerEnter,c="pointer");var u=null==o?i:H(o);if(i=null==t?i:H(t),(e=s.getPooled(a,o,n,r)).type=c+"leave",e.target=u,e.relatedTarget=i,(n=s.getPooled(l,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=u,r=t,o&&r)e:{for(i=r,c=0,s=t=o;s;s=W(s))c++;for(s=0,l=i;l;l=W(l))s++;for(;0<c-s;)t=W(t),c--;for(;0<s-c;)i=W(i),s--;for(;c--;){if(t===i||t===i.alternate)break e;t=W(t),i=W(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)t.push(o),o=W(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=W(r);for(r=0;r<t.length;r++)q(t[r],"bubbled",e);for(r=o.length;0<r--;)q(o[r],"captured",n);return[e,n]}};function en(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var tn=Object.prototype.hasOwnProperty;function nn(e,t){if(en(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!tn.call(t,n[r])||!en(e[n[r]],t[n[r]]))return!1;return!0}function rn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function on(e){2!==rn(e)&&a("188")}function sn(e){if(e=function(e){var t=e.alternate;if(!t)return 3===(t=rn(e))&&a("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return on(i),e;if(s===r)return on(i),t;s=s.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}s||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var an=ue.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ln=ue.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cn=$t.extend({relatedTarget:null});function un(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn=$t.extend({key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=un(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:jt,charCode:function(e){return"keypress"===e.type?un(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?un(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),mn=Xt.extend({dataTransfer:null}),fn=$t.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:jt}),gn=ue.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),yn=Xt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),bn=[["abort","abort"],[J,"animationEnd"],[ee,"animationIteration"],[te,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ne,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],wn={},vn={};function Cn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},wn[e]=t,vn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach((function(e){Cn(e,!0)})),bn.forEach((function(e){Cn(e,!1)}));var Sn={eventTypes:wn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=vn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=vn[e];if(!i)return null;switch(e){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":e=dn;break;case"blur":case"focus":e=cn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Xt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=fn;break;case J:case ee:case te:e=an;break;case ne:e=gn;break;case"scroll":e=$t;break;case"wheel":e=yn;break;case"copy":case"cut":case"paste":e=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Qt;break;default:e=ue}return G(t=e.getPooled(i,t,n,r)),t}},En=Sn.isInteractiveTopLevelEventType,kn=[];function Rn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=F(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=We(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,s=null,a=0;a<w.length;a++){var l=w[a];l&&(l=l.extractEvents(r,t,o,i))&&(s=T(s,l))}N(s)}}var xn=!0;function Tn(e,t){if(!t)return null;var n=(En(e)?An:Pn).bind(null,e);t.addEventListener(e,n,!1)}function Dn(e,t){if(!t)return null;var n=(En(e)?An:Pn).bind(null,e);t.addEventListener(e,n,!0)}function An(e,t){Me(Pn,e,t)}function Pn(e,t){if(xn){var n=We(t);if(null===(n=F(n))||"number"!=typeof n.tag||2===rn(n)||(n=null),kn.length){var r=kn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Le(Rn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>kn.length&&kn.push(e)}}}var In={},_n=0,Nn="_reactListenersID"+(""+Math.random()).slice(2);function On(e){return Object.prototype.hasOwnProperty.call(e,Nn)||(e[Nn]=_n++,In[e[Nn]]={}),In[e[Nn]]}function Mn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Bn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fn(e,t){var n,r=Bn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Bn(r)}}function Ln(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ln(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Hn(){for(var e=window,t=Mn();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=Mn(e.document)}return t}function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Wn(e){var t=Hn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ln(n.ownerDocument.documentElement,n)){if(null!==r&&Un(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Fn(n,o);var s=Fn(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $n=V&&"documentMode"in document&&11>=document.documentMode,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},qn=null,jn=null,Gn=null,Vn=!1;function Kn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Vn||null==qn||qn!==Mn(n)?null:(n="selectionStart"in(n=qn)&&Un(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Gn&&nn(Gn,n)?null:(Gn=n,(e=ue.getPooled(zn.select,jn,e,t)).type="select",e.target=qn,G(e),e))}var Yn={eventTypes:zn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=On(o),i=S.onSelect;for(var s=0;s<i.length;s++){var a=i[s];if(!o.hasOwnProperty(a)||!o[a]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?H(t):window,e){case"focus":(Ue(o)||"true"===o.contentEditable)&&(qn=o,jn=t,Gn=null);break;case"blur":Gn=jn=qn=null;break;case"mousedown":Vn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Vn=!1,Kn(n,r);case"selectionchange":if($n)break;case"keydown":case"keyup":return Kn(n,r)}return null}};function Xn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Qn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Zn(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&a("92"),Array.isArray(t)&&(1>=t.length||a("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:vt(n)}}function er(e,t){var n=vt(t.value),r=vt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function tr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}I.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),E=U,k=L,R=H,I.injectEventPluginsByName({SimpleEventPlugin:Sn,EnterLeaveEventPlugin:Jt,ChangeEventPlugin:Wt,SelectEventPlugin:Yn,BeforeInputEventPlugin:Te});var nr="http://www.w3.org/1999/xhtml";function rr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ir(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?rr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var or,sr=void 0,ar=(or=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((sr=sr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=sr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return or(e,t)}))}:or);function lr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var cr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ur=["Webkit","ms","Moz","O"];function hr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||cr.hasOwnProperty(e)&&cr[e]?(""+t).trim():t+"px"}function pr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=hr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(cr).forEach((function(e){ur.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cr[t]=cr[e]}))}));var dr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mr(e,t){t&&(dr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!=typeof t.style&&a("62",""))}function fr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function gr(e,t){var n=On(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Dn("scroll",e);break;case"focus":case"blur":Dn("focus",e),Dn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":$e(i)&&Dn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===re.indexOf(i)&&Tn(i,e)}n[i]=!0}}}function yr(){}var br=null,wr=null;function vr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Cr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sr="function"==typeof setTimeout?setTimeout:void 0,Er="function"==typeof clearTimeout?clearTimeout:void 0,kr=o.unstable_scheduleCallback,Rr=o.unstable_cancelCallback;function xr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Tr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Dr=[],Ar=-1;function Pr(e){0>Ar||(e.current=Dr[Ar],Dr[Ar]=null,Ar--)}function Ir(e,t){Ar++,Dr[Ar]=e.current,e.current=t}var _r={},Nr={current:_r},Or={current:!1},Mr=_r;function Br(e,t){var n=e.type.contextTypes;if(!n)return _r;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Fr(e){return null!=e.childContextTypes}function Lr(e){Pr(Or),Pr(Nr)}function Hr(e){Pr(Or),Pr(Nr)}function Ur(e,t,n){Nr.current!==_r&&a("168"),Ir(Nr,t),Ir(Or,n)}function Wr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in e||a("108",ct(t)||"Unknown",o);return i({},n,r)}function $r(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||_r,Mr=Nr.current,Ir(Nr,t),Ir(Or,Or.current),!0}function zr(e,t,n){var r=e.stateNode;r||a("169"),n?(t=Wr(e,t,Mr),r.__reactInternalMemoizedMergedChildContext=t,Pr(Or),Pr(Nr),Ir(Nr,t)):Pr(Or),Ir(Or,n)}var qr=null,jr=null;function Gr(e){return function(t){try{return e(t)}catch(e){}}}function Vr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Kr(e,t,n,r){return new Vr(e,t,n,r)}function Yr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Xr(e,t){var n=e.alternate;return null===n?((n=Kr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qr(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Yr(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case Qe:return Zr(n.children,i,o,t);case nt:return Jr(n,3|i,o,t);case Ze:return Jr(n,2|i,o,t);case Je:return(e=Kr(12,n,t,4|i)).elementType=Je,e.type=Je,e.expirationTime=o,e;case it:return(e=Kr(13,n,t,i)).elementType=it,e.type=it,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case et:s=10;break e;case tt:s=9;break e;case rt:s=11;break e;case ot:s=14;break e;case st:s=16,r=null;break e}a("130",null==e?e:typeof e,"")}return(t=Kr(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Zr(e,t,n,r){return(e=Kr(7,e,r,t)).expirationTime=n,e}function Jr(e,t,n,r){return e=Kr(8,e,r,t),t=0==(1&t)?Ze:nt,e.elementType=t,e.type=t,e.expirationTime=n,e}function ei(e,t,n){return(e=Kr(6,e,null,t)).expirationTime=n,e}function ti(e,t,n){return(t=Kr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ni(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),oi(t,e)}function ri(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),oi(t,e)}function ii(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function oi(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function si(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ai=(new r.Component).refs;function li(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var ci={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===rn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ga(),i=jo(r=Ws(r,e));i.payload=t,null!=n&&(i.callback=n),Ms(),Vo(e,i),js(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ga(),i=jo(r=Ws(r,e));i.tag=Uo,i.payload=t,null!=n&&(i.callback=n),Ms(),Vo(e,i),js(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ga(),r=jo(n=Ws(n,e));r.tag=Wo,null!=t&&(r.callback=t),Ms(),Vo(e,r),js(e,n)}};function ui(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!(t.prototype&&t.prototype.isPureReactComponent&&nn(n,r)&&nn(i,o))}function hi(e,t,n){var r=!1,i=_r,o=t.contextType;return"object"==typeof o&&null!==o?o=Bo(o):(i=Fr(t)?Mr:Nr.current,o=(r=null!=(r=t.contextTypes))?Br(e,i):_r),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ci,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function pi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ci.enqueueReplaceState(t,t.state,null)}function di(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ai;var o=t.contextType;"object"==typeof o&&null!==o?i.context=Bo(o):(o=Fr(t)?Mr:Nr.current,i.context=Br(e,o)),null!==(o=e.updateQueue)&&(Qo(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(li(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ci.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(Qo(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var mi=Array.isArray;function fi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("309"),r=n.stateNode),r||a("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ai&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}"string"!=typeof e&&a("284"),n._owner||a("290",e)}return e}function gi(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function yi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Xr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=ei(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=fi(e,t,n),r.return=e,r):((r=Qr(n.type,n.key,n.props,null,e.mode,r)).ref=fi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ti(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Zr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=ei(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Ye:return(n=Qr(t.type,t.key,t.props,null,e.mode,n)).ref=fi(e,null,t),n.return=e,n;case Xe:return(t=ti(t,e.mode,n)).return=e,t}if(mi(t)||lt(t))return(t=Zr(t,e.mode,n,null)).return=e,t;gi(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Ye:return n.key===i?n.type===Qe?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case Xe:return n.key===i?u(e,t,n,r):null}if(mi(n)||lt(n))return null!==i?null:h(e,t,n,r,null);gi(e,n)}return null}function m(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Ye:return e=e.get(null===r.key?n:r.key)||null,r.type===Qe?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case Xe:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(mi(r)||lt(r))return h(t,e=e.get(n)||null,r,i,null);gi(t,r)}return null}function f(i,s,a,l){for(var c=null,u=null,h=s,f=s=0,g=null;null!==h&&f<a.length;f++){h.index>f?(g=h,h=null):g=h.sibling;var y=d(i,h,a[f],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,f),null===u?c=y:u.sibling=y,u=y,h=g}if(f===a.length)return n(i,h),c;if(null===h){for(;f<a.length;f++)(h=p(i,a[f],l))&&(s=o(h,s,f),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);f<a.length;f++)(g=m(h,i,f,a[f],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?f:g.key),s=o(g,s,f),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,s,l,c){var u=lt(l);"function"!=typeof u&&a("150"),null==(l=u.call(l))&&a("151");for(var h=u=null,f=s,g=s=0,y=null,b=l.next();null!==f&&!b.done;g++,b=l.next()){f.index>g?(y=f,f=null):y=f.sibling;var w=d(i,f,b.value,c);if(null===w){f||(f=y);break}e&&f&&null===w.alternate&&t(i,f),s=o(w,s,g),null===h?u=w:h.sibling=w,h=w,f=y}if(b.done)return n(i,f),u;if(null===f){for(;!b.done;g++,b=l.next())null!==(b=p(i,b.value,c))&&(s=o(b,s,g),null===h?u=b:h.sibling=b,h=b);return u}for(f=r(i,f);!b.done;g++,b=l.next())null!==(b=m(f,i,g,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?g:b.key),s=o(b,s,g),null===h?u=b:h.sibling=b,h=b);return e&&f.forEach((function(e){return t(i,e)})),u}return function(e,r,o,l){var c="object"==typeof o&&null!==o&&o.type===Qe&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case Ye:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){if(7===c.tag?o.type===Qe:c.elementType===o.type){n(e,c.sibling),(r=i(c,o.type===Qe?o.props.children:o.props)).ref=fi(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===Qe?((r=Zr(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Qr(o.type,o.key,o.props,null,e.mode,l)).ref=fi(e,r,o),l.return=e,e=l)}return s(e);case Xe:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ti(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=ei(o,e.mode,l)).return=e,e=r),s(e);if(mi(o))return f(e,r,o,l);if(lt(o))return g(e,r,o,l);if(u&&gi(e,o),void 0===o&&!c)switch(e.tag){case 1:case 0:a("152",(l=e.type).displayName||l.name||"Component")}return n(e,r)}}var bi=yi(!0),wi=yi(!1),vi={},Ci={current:vi},Si={current:vi},Ei={current:vi};function ki(e){return e===vi&&a("174"),e}function Ri(e,t){Ir(Ei,t),Ir(Si,e),Ir(Ci,vi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ir(null,"");break;default:t=ir(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Pr(Ci),Ir(Ci,t)}function xi(e){Pr(Ci),Pr(Si),Pr(Ei)}function Ti(e){ki(Ei.current);var t=ki(Ci.current),n=ir(t,e.type);t!==n&&(Ir(Si,e),Ir(Ci,n))}function Di(e){Si.current===e&&(Pr(Ci),Pr(Si))}var Ai=Ge.ReactCurrentDispatcher,Pi=0,Ii=null,_i=null,Ni=null,Oi=null,Mi=null,Bi=null,Fi=0,Li=null,Hi=0,Ui=!1,Wi=null,$i=0;function zi(){a("307")}function qi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function ji(e,t,n,r,i,o){if(Pi=o,Ii=t,Ni=null!==e?e.memoizedState:null,Ai.current=null===Ni?io:oo,t=n(r,i),Ui){do{Ui=!1,$i+=1,Ni=null!==e?e.memoizedState:null,Bi=Oi,Li=Mi=_i=null,Ai.current=oo,t=n(r,i)}while(Ui);Wi=null,$i=0}return Ai.current=ro,(e=Ii).memoizedState=Oi,e.expirationTime=Fi,e.updateQueue=Li,e.effectTag|=Hi,e=null!==_i&&null!==_i.next,Pi=0,Bi=Mi=Oi=Ni=_i=Ii=null,Fi=0,Li=null,Hi=0,e&&a("300"),t}function Gi(){Ai.current=ro,Pi=0,Bi=Mi=Oi=Ni=_i=Ii=null,Fi=0,Li=null,Hi=0,Ui=!1,Wi=null,$i=0}function Vi(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Mi?Oi=Mi=e:Mi=Mi.next=e,Mi}function Ki(){if(null!==Bi)Bi=(Mi=Bi).next,Ni=null!==(_i=Ni)?_i.next:null;else{null===Ni&&a("310");var e={memoizedState:(_i=Ni).memoizedState,baseState:_i.baseState,queue:_i.queue,baseUpdate:_i.baseUpdate,next:null};Mi=null===Mi?Oi=e:Mi.next=e,Ni=_i.next}return Mi}function Yi(e,t){return"function"==typeof t?t(e):t}function Xi(e){var t=Ki(),n=t.queue;if(null===n&&a("311"),0<$i){var r=n.dispatch;if(null!==Wi){var i=Wi.get(n);if(void 0!==i){Wi.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return en(o,t.memoizedState)||(yo=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.eagerReducer=e,n.eagerState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var l=i=null,c=r,u=!1;do{var h=c.expirationTime;h<Pi?(u||(u=!0,l=s,i=o),h>Fi&&(Fi=h)):o=c.eagerReducer===e?c.eagerState:e(o,c.action),s=c,c=c.next}while(null!==c&&c!==r);u||(l=s,i=o),en(o,t.memoizedState)||(yo=!0),t.memoizedState=o,t.baseUpdate=l,t.baseState=i,n.eagerReducer=e,n.eagerState=o}return[t.memoizedState,n.dispatch]}function Qi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Li?(Li={lastEffect:null}).lastEffect=e.next=e:null===(t=Li.lastEffect)?Li.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Li.lastEffect=e),e}function Zi(e,t,n,r){var i=Vi();Hi|=e,i.memoizedState=Qi(t,n,void 0,void 0===r?null:r)}function Ji(e,t,n,r){var i=Ki();r=void 0===r?null:r;var o=void 0;if(null!==_i){var s=_i.memoizedState;if(o=s.destroy,null!==r&&qi(r,s.deps))return void Qi(0,n,o,r)}Hi|=e,i.memoizedState=Qi(t,n,o,r)}function eo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function to(){}function no(e,t,n){25>$i||a("301");var r=e.alternate;if(e===Ii||null!==r&&r===Ii)if(Ui=!0,e={expirationTime:Pi,action:n,eagerReducer:null,eagerState:null,next:null},null===Wi&&(Wi=new Map),void 0===(n=Wi.get(t)))Wi.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Ms();var i=ga(),o={expirationTime:i=Ws(i,e),action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)o.next=o;else{var l=s.next;null!==l&&(o.next=l),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.eagerReducer))try{var c=t.eagerState,u=r(c,n);if(o.eagerReducer=r,o.eagerState=u,en(u,c))return}catch(e){}js(e,i)}}var ro={readContext:Bo,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi},io={readContext:Bo,useCallback:function(e,t){return Vi().memoizedState=[e,void 0===t?null:t],e},useContext:Bo,useEffect:function(e,t){return Zi(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Zi(4,36,eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zi(4,36,e,t)},useMemo:function(e,t){var n=Vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Vi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,eagerReducer:e,eagerState:t}).dispatch=no.bind(null,Ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Vi().memoizedState=e},useState:function(e){var t=Vi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,eagerReducer:Yi,eagerState:e}).dispatch=no.bind(null,Ii,e),[t.memoizedState,e]},useDebugValue:to},oo={readContext:Bo,useCallback:function(e,t){var n=Ki();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&qi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Bo,useEffect:function(e,t){return Ji(516,192,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ji(4,36,eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ji(4,36,e,t)},useMemo:function(e,t){var n=Ki();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&qi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:Xi,useRef:function(){return Ki().memoizedState},useState:function(e){return Xi(Yi)},useDebugValue:to},so=null,ao=null,lo=!1;function co(e,t){var n=Kr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function ho(e){if(lo){var t=ao;if(t){var n=t;if(!uo(e,t)){if(!(t=xr(n))||!uo(e,t))return e.effectTag|=2,lo=!1,void(so=e);co(so,n)}so=e,ao=Tr(t)}else e.effectTag|=2,lo=!1,so=e}}function po(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;so=e}function mo(e){if(e!==so)return!1;if(!lo)return po(e),lo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Cr(t,e.memoizedProps))for(t=ao;t;)co(e,t),t=xr(t);return po(e),ao=so?xr(e.stateNode):null,!0}function fo(){ao=so=null,lo=!1}var go=Ge.ReactCurrentOwner,yo=!1;function bo(e,t,n,r){t.child=null===e?wi(t,null,n,r):bi(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var o=t.ref;return Mo(t,i),r=ji(e,t,n,r,o,i),null===e||yo?(t.effectTag|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Do(e,t,i))}function vo(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!=typeof s||Yr(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Qr(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Co(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:nn)(i,r)&&e.ref===t.ref)?Do(e,t,o):(t.effectTag|=1,(e=Xr(s,r)).ref=t.ref,e.return=t,t.child=e)}function Co(e,t,n,r,i,o){return null!==e&&nn(e.memoizedProps,r)&&e.ref===t.ref&&(yo=!1,i<o)?Do(e,t,o):Eo(e,t,n,r,o)}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Eo(e,t,n,r,i){var o=Fr(n)?Mr:Nr.current;return o=Br(t,o),Mo(t,i),n=ji(e,t,n,r,o,i),null===e||yo?(t.effectTag|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Do(e,t,i))}function ko(e,t,n,r,i){if(Fr(n)){var o=!0;$r(t)}else o=!1;if(Mo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),hi(t,n,r),di(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;c="object"==typeof c&&null!==c?Bo(c):Br(t,c=Fr(n)?Mr:Nr.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&pi(t,s,r,c),$o=!1;var p=t.memoizedState;l=s.state=p;var d=t.updateQueue;null!==d&&(Qo(t,d,r,s,i),l=t.memoizedState),a!==r||p!==l||Or.current||$o?("function"==typeof u&&(li(t,n,u,r),l=t.memoizedState),(a=$o||ui(t,n,a,r,p,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,a=t.memoizedProps,s.props=t.type===t.elementType?a:si(t.type,a),l=s.context,c="object"==typeof(c=n.contextType)&&null!==c?Bo(c):Br(t,c=Fr(n)?Mr:Nr.current),(h="function"==typeof(u=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&pi(t,s,r,c),$o=!1,l=t.memoizedState,p=s.state=l,null!==(d=t.updateQueue)&&(Qo(t,d,r,s,i),p=t.memoizedState),a!==r||l!==p||Or.current||$o?("function"==typeof u&&(li(t,n,u,r),p=t.memoizedState),(u=$o||ui(t,n,a,r,l,p,c))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=c,r=u):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Ro(e,t,n,r,o,i)}function Ro(e,t,n,r,i,o){So(e,t);var s=0!=(64&t.effectTag);if(!r&&!s)return i&&zr(t,n,!1),Do(e,t,o);r=t.stateNode,go.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=bi(t,e.child,null,o),t.child=bi(t,null,a,o)):bo(e,t,a,o),t.memoizedState=r.state,i&&zr(t,n,!0),t.child}function xo(e){var t=e.stateNode;t.pendingContext?Ur(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ur(0,t.context,!1),Ri(e,t.containerInfo)}function To(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var s=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},s=!0,t.effectTag&=-65;if(null===e)if(s){var a=i.fallback;e=Zr(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Zr(a,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=wi(t,null,i.children,n);else null!==e.memoizedState?(a=(r=e.child).sibling,s?(n=i.fallback,i=Xr(r,r.pendingProps),0==(1&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=s),r=i.sibling=Xr(a,n,a.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=bi(t,r.child,i.children,n)):(a=e.child,s?(s=i.fallback,(i=Zr(null,r,0,null)).child=a,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Zr(s,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=bi(t,a,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Do(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(n=Xr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Xr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}var Ao={current:null},Po=null,Io=null,_o=null;function No(e,t){var n=e.type._context;Ir(Ao,n._currentValue),n._currentValue=t}function Oo(e){var t=Ao.current;Pr(Ao),e.type._context._currentValue=t}function Mo(e,t){Po=e,_o=Io=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(yo=!0),e.contextDependencies=null}function Bo(e,t){return _o!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(_o=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Io?(null===Po&&a("308"),Io=t,Po.contextDependencies={first:t,expirationTime:0}):Io=Io.next=t),e._currentValue}var Fo,Lo,Ho,Uo=1,Wo=2,$o=!1;function zo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function qo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function jo(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Go(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Vo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=zo(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=zo(e.memoizedState),i=n.updateQueue=zo(n.memoizedState)):r=e.updateQueue=qo(i):null===i&&(i=n.updateQueue=qo(r));null===i||r===i?Go(r,t):null===r.lastUpdate||null===i.lastUpdate?(Go(r,t),Go(i,t)):(Go(r,t),i.lastUpdate=t)}function Ko(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=zo(e.memoizedState):Yo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function Yo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=qo(t)),t}function Xo(e,t,n,r,o,s){switch(n.tag){case Uo:return"function"==typeof(e=n.payload)?e.call(s,r,o):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(o="function"==typeof(e=n.payload)?e.call(s,r,o):e))break;return i({},r,o);case Wo:$o=!0}return r}function Qo(e,t,n,r,i){$o=!1;for(var o=(t=Yo(e,t)).baseState,s=null,a=0,l=t.firstUpdate,c=o;null!==l;){var u=l.expirationTime;u<i?(null===s&&(s=l,o=c),a<u&&(a=u)):(c=Xo(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=l:(t.lastEffect.nextEffect=l,t.lastEffect=l))),l=l.next}for(u=null,l=t.firstCapturedUpdate;null!==l;){var h=l.expirationTime;h<i?(null===u&&(u=l,null===s&&(o=c)),a<h&&(a=h)):(c=Xo(e,0,l,c,n,r),null!==l.callback&&(e.effectTag|=32,l.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=l:(t.lastCapturedEffect.nextEffect=l,t.lastCapturedEffect=l))),l=l.next}null===s&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===s&&null===u&&(o=c),t.baseState=o,t.firstUpdate=s,t.firstCapturedUpdate=u,e.expirationTime=a,e.memoizedState=c}function Zo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Jo(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Jo(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Jo(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&a("191",n),n.call(r)}e=e.nextEffect}}function es(e,t){return{value:e,source:t,stack:ut(t)}}function ts(e){e.effectTag|=4}Fo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a=t.stateNode;switch(ki(Ci.current),e=null,n){case"input":s=Ct(a,s),r=Ct(a,r),e=[];break;case"option":s=Xn(a,s),r=Xn(a,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=Zn(a,s),r=Zn(a,r),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(a.onclick=yr)}mr(n,r),a=n=void 0;var l=null;for(n in s)if(!r.hasOwnProperty(n)&&s.hasOwnProperty(n)&&null!=s[n])if("style"===n){var c=s[n];for(a in c)c.hasOwnProperty(a)&&(l||(l={}),l[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(C.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var u=r[n];if(c=null!=s?s[n]:void 0,r.hasOwnProperty(n)&&u!==c&&(null!=u||null!=c))if("style"===n)if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(l||(l={}),l[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(l||(l={}),l[a]=u[a])}else l||(e||(e=[]),e.push(n,l)),l=u;else"dangerouslySetInnerHTML"===n?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(n,""+u)):"children"===n?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(n,""+u):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(C.hasOwnProperty(n)?(null!=u&&gr(o,n),e||c===u||(e=[])):(e=e||[]).push(n,u))}l&&(e=e||[]).push("style",l),o=e,(t.updateQueue=o)&&ts(t)}},Ho=function(e,t,n,r){n!==r&&ts(t)};var ns="function"==typeof WeakSet?WeakSet:Set;function rs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ut(n)),null!==n&&ct(n.type),t=t.value,null!==e&&1===e.tag&&ct(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function is(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Us(e,t)}else t.current=null}function os(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ss(e){switch("function"==typeof jr&&jr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){Us(i,e)}}n=n.next}while(n!==t)}break;case 1:if(is(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Us(e,t)}break;case 5:is(e);break;case 4:cs(e)}}function as(e){return 5===e.tag||3===e.tag||4===e.tag}function ls(e){e:{for(var t=e.return;null!==t;){if(as(t)){var n=t;break e}t=t.return}a("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(lr(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||as(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,s=i.stateNode,l=n;8===o.nodeType?o.parentNode.insertBefore(s,l):o.insertBefore(s,l)}else t.insertBefore(i.stateNode,n);else r?(s=t,l=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(l,s):(o=s).appendChild(l),null!=(s=s._reactRootContainer)||null!==o.onclick||(o.onclick=yr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function cs(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,s=o;;)if(ss(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=t.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(ss(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function us(e,t){switch(t.tag){case 0:case 11:case 14:case 15:os(4,8,t);break;case 1:case 3:case 12:case 17:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&function(e,t,n,r,i){e[B]=i,"input"===n&&"radio"===i.type&&null!=i.name&&Et(e,i),fr(n,r),r=fr(n,i);for(var o=0;o<t.length;o+=2){var s=t[o],a=t[o+1];"style"===s?pr(e,a):"dangerouslySetInnerHTML"===s?ar(e,a):"children"===s?lr(e,a):wt(e,s,a,r)}switch(n){case"input":kt(e,i);break;case"textarea":er(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Qn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Qn(e,!!i.multiple,i.defaultValue,!0):Qn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,o,i,e,r)}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=ga())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=hr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new ns),n.forEach((function(e){var n=zs.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))}))}break;default:a("163")}}var hs="function"==typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=jo(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){xa(r),rs(e,t)},n}function ds(e,t,n){(n=jo(n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===As?As=new Set([this]):As.add(this));var n=t.value,i=t.stack;rs(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function ms(e){switch(e.tag){case 1:Fr(e.type)&&Lr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return xi(),Hr(),0!=(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return Di(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:default:return null;case 4:return xi(),null;case 10:return Oo(e),null}}var fs=Ge.ReactCurrentDispatcher,gs=Ge.ReactCurrentOwner,ys=1073741822,bs=!1,ws=null,vs=null,Cs=0,Ss=-1,Es=!1,ks=null,Rs=!1,xs=null,Ts=null,Ds=null,As=null;function Ps(){if(null!==ws)for(var e=ws.return;null!==e;){var t=e;switch(t.tag){case 1:null!=t.type.childContextTypes&&Lr();break;case 3:xi(),Hr();break;case 5:Di(t);break;case 4:xi();break;case 10:Oo(t)}e=e.return}vs=null,Cs=0,Ss=-1,Es=!1,ws=null}function Is(){for(;null!==ks;){var e=ks.effectTag;if(16&e&&lr(ks.stateNode,""),128&e){var t=ks.alternate;null!==t&&null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null)}switch(14&e){case 2:ls(ks),ks.effectTag&=-3;break;case 6:ls(ks),ks.effectTag&=-3,us(ks.alternate,ks);break;case 4:us(ks.alternate,ks);break;case 8:cs(e=ks),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}ks=ks.nextEffect}}function _s(){for(;null!==ks;){if(256&ks.effectTag)e:{var e=ks.alternate,t=ks;switch(t.tag){case 0:case 11:case 15:os(2,0,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:si(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}ks=ks.nextEffect}}function Ns(e,t){for(;null!==ks;){var n=ks.effectTag;if(36&n){var r=ks.alternate,i=ks,o=t;switch(i.tag){case 0:case 11:case 15:os(16,32,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var l=i.elementType===i.type?r.memoizedProps:si(i.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&Zo(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if(s=null,null!==i.child)switch(i.child.tag){case 5:case 1:s=i.child.stateNode}Zo(0,r,s)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&vr(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&n&&null!==(i=ks.ref)&&(o=ks.stateNode,"function"==typeof i?i(o):i.current=o),512&n&&(xs=e),ks=ks.nextEffect}}function Os(e,t){Ds=Ts=xs=null;var n=Qs;Qs=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;os(128,0,o),os(0,64,o)}catch(e){r=!0,i=e}r&&Us(t,i)}t=t.nextEffect}while(null!==t);Qs=n,0!==(n=e.expirationTime)&&ya(e,n),ra||Qs||Sa(1073741823,!1)}function Ms(){null!==Ts&&Rr(Ts),null!==Ds&&Ds()}function Bs(e,t){Rs=bs=!0,e.current===t&&a("177");var n=e.pendingCommitExpirationTime;0===n&&a("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?ni(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,ni(e,t)):t>n&&ni(e,t)}oi(0,e)}(e,i>r?i:r),gs.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,br=xn,wr=function(){var e=Hn();if(Un(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,s=-1,a=-1,l=0,c=0,u=e,h=null;t:for(;;){for(var p;u!==t||0!==r&&3!==u.nodeType||(s=o+r),u!==i||0!==n&&3!==u.nodeType||(a=o+n),3===u.nodeType&&(o+=u.nodeValue.length),null!==(p=u.firstChild);)h=u,u=p;for(;;){if(u===e)break t;if(h===t&&++l===r&&(s=o),h===i&&++c===n&&(a=o),null!==(p=u.nextSibling))break;h=(u=h).parentNode}u=p}t=-1===s||-1===a?null:{start:s,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),xn=!1,ks=r;null!==ks;){i=!1;var s=void 0;try{_s()}catch(e){i=!0,s=e}i&&(null===ks&&a("178"),Us(ks,s),null!==ks&&(ks=ks.nextEffect))}for(ks=r;null!==ks;){i=!1,s=void 0;try{Is()}catch(e){i=!0,s=e}i&&(null===ks&&a("178"),Us(ks,s),null!==ks&&(ks=ks.nextEffect))}for(Wn(wr),wr=null,xn=!!br,br=null,e.current=t,ks=r;null!==ks;){i=!1,s=void 0;try{Ns(e,n)}catch(e){i=!0,s=e}i&&(null===ks&&a("178"),Us(ks,s),null!==ks&&(ks=ks.nextEffect))}if(null!==r&&null!==xs){var l=Os.bind(null,e,r);Ts=o.unstable_runWithPriority(o.unstable_NormalPriority,(function(){return kr(l)})),Ds=l}bs=Rs=!1,"function"==typeof qr&&qr(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(As=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Fs(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){ws=e;e:{var o=t,s=Cs,l=(t=e).pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 18:break;case 1:case 17:Fr(t.type)&&Lr();break;case 3:xi(),Hr(),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==o&&null!==o.child||(mo(t),t.effectTag&=-3);break;case 5:Di(t);var c=ki(Ei.current);if(s=t.type,null!==o&&null!=t.stateNode)Lo(o,t,s,l,c),o.ref!==t.ref&&(t.effectTag|=128);else if(l){var u=ki(Ci.current);if(mo(t)){o=(l=t).stateNode;var h=l.type,p=l.memoizedProps,d=c;switch(o[M]=l,o[B]=p,s=void 0,c=h){case"iframe":case"object":Tn("load",o);break;case"video":case"audio":for(h=0;h<re.length;h++)Tn(re[h],o);break;case"source":Tn("error",o);break;case"img":case"image":case"link":Tn("error",o),Tn("load",o);break;case"form":Tn("reset",o),Tn("submit",o);break;case"details":Tn("toggle",o);break;case"input":St(o,p),Tn("invalid",o),gr(d,"onChange");break;case"select":o._wrapperState={wasMultiple:!!p.multiple},Tn("invalid",o),gr(d,"onChange");break;case"textarea":Jn(o,p),Tn("invalid",o),gr(d,"onChange")}for(s in mr(c,p),h=null,p)p.hasOwnProperty(s)&&(u=p[s],"children"===s?"string"==typeof u?o.textContent!==u&&(h=["children",u]):"number"==typeof u&&o.textContent!==""+u&&(h=["children",""+u]):C.hasOwnProperty(s)&&null!=u&&gr(d,s));switch(c){case"input":qe(o),Rt(o,p,!0);break;case"textarea":qe(o),tr(o);break;case"select":case"option":break;default:"function"==typeof p.onClick&&(o.onclick=yr)}s=h,l.updateQueue=s,(l=null!==s)&&ts(t)}else{p=t,o=s,d=l,h=9===c.nodeType?c:c.ownerDocument,u===nr&&(u=rr(o)),u===nr?"script"===o?((o=h.createElement("div")).innerHTML="<script><\/script>",h=o.removeChild(o.firstChild)):"string"==typeof d.is?h=h.createElement(o,{is:d.is}):(h=h.createElement(o),"select"===o&&d.multiple&&(h.multiple=!0)):h=h.createElementNS(u,o),(o=h)[M]=p,o[B]=l,Fo(o,t),d=o;var m=c,f=fr(h=s,p=l);switch(h){case"iframe":case"object":Tn("load",d),c=p;break;case"video":case"audio":for(c=0;c<re.length;c++)Tn(re[c],d);c=p;break;case"source":Tn("error",d),c=p;break;case"img":case"image":case"link":Tn("error",d),Tn("load",d),c=p;break;case"form":Tn("reset",d),Tn("submit",d),c=p;break;case"details":Tn("toggle",d),c=p;break;case"input":St(d,p),c=Ct(d,p),Tn("invalid",d),gr(m,"onChange");break;case"option":c=Xn(d,p);break;case"select":d._wrapperState={wasMultiple:!!p.multiple},c=i({},p,{value:void 0}),Tn("invalid",d),gr(m,"onChange");break;case"textarea":Jn(d,p),c=Zn(d,p),Tn("invalid",d),gr(m,"onChange");break;default:c=p}mr(h,c),u=void 0;var g=h,y=d,b=c;for(u in b)if(b.hasOwnProperty(u)){var w=b[u];"style"===u?pr(y,w):"dangerouslySetInnerHTML"===u?null!=(w=w?w.__html:void 0)&&ar(y,w):"children"===u?"string"==typeof w?("textarea"!==g||""!==w)&&lr(y,w):"number"==typeof w&&lr(y,""+w):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(C.hasOwnProperty(u)?null!=w&&gr(m,u):null!=w&&wt(y,u,w,f))}switch(h){case"input":qe(d),Rt(d,p,!1);break;case"textarea":qe(d),tr(d);break;case"option":null!=p.value&&d.setAttribute("value",""+vt(p.value));break;case"select":(c=d).multiple=!!p.multiple,null!=(d=p.value)?Qn(c,!!p.multiple,d,!1):null!=p.defaultValue&&Qn(c,!!p.multiple,p.defaultValue,!0);break;default:"function"==typeof c.onClick&&(d.onclick=yr)}(l=vr(s,l))&&ts(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:o&&null!=t.stateNode?Ho(0,t,o.memoizedProps,l):("string"!=typeof l&&null===t.stateNode&&a("166"),o=ki(Ei.current),ki(Ci.current),mo(t)?(s=(l=t).stateNode,o=l.memoizedProps,s[M]=l,(l=s.nodeValue!==o)&&ts(t)):(s=t,(l=(9===o.nodeType?o:o.ownerDocument).createTextNode(l))[M]=t,s.stateNode=l));break;case 13:if(l=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=s,ws=t;break e}l=null!==l,s=null!==o&&null!==o.memoizedState,null!==o&&!l&&s&&null!==(o=o.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=o,o.nextEffect=c):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8),(l||s)&&(t.effectTag|=4);break;case 4:xi();break;case 10:Oo(t);break;default:a("156")}ws=null}if(t=e,1===Cs||1!==t.childExpirationTime){for(l=0,s=t.child;null!==s;)(o=s.expirationTime)>l&&(l=o),(c=s.childExpirationTime)>l&&(l=c),s=s.sibling;t.childExpirationTime=l}if(null!==ws)return ws;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=ms(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Ls(e){var t=function(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Or.current)yo=!0;else if(r<n){switch(yo=!1,t.tag){case 3:xo(t),fo();break;case 5:Ti(t);break;case 1:Fr(t.type)&&$r(t);break;case 4:Ri(t,t.stateNode.containerInfo);break;case 10:No(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?To(e,t,n):null!==(t=Do(e,t,n))?t.sibling:null}return Do(e,t,n)}}else yo=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Br(t,Nr.current);if(Mo(t,n),i=ji(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Gi(),Fr(r)){var o=!0;$r(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"==typeof s&&li(t,r,s,e),i.updater=ci,t.stateNode=i,i._reactInternalFiber=t,di(t,r,e,n),t=Ro(null,t,r,!0,o,n)}else t.tag=0,bo(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)})),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return Yr(e)?1:0;if(null!=e){if((e=e.$$typeof)===rt)return 11;if(e===ot)return 14}return 2}(e),o=si(e,o),s=void 0,i){case 0:s=Eo(null,t,e,o,n);break;case 1:s=ko(null,t,e,o,n);break;case 11:s=wo(null,t,e,o,n);break;case 14:s=vo(null,t,e,si(e.type,o),r,n);break;default:a("306",e,"")}return s;case 0:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:si(r,i),n);case 1:return r=t.type,i=t.pendingProps,ko(e,t,r,i=t.elementType===r?i:si(r,i),n);case 3:return xo(t),null===(r=t.updateQueue)&&a("282"),i=null!==(i=t.memoizedState)?i.element:null,Qo(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(fo(),t=Do(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(ao=Tr(t.stateNode.containerInfo),so=t,i=lo=!0),i?(t.effectTag|=2,t.child=wi(t,null,r,n)):(bo(e,t,r,n),fo()),t=t.child),t;case 5:return Ti(t),null===e&&ho(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,Cr(r,i)?s=null:null!==o&&Cr(r,o)&&(t.effectTag|=16),So(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(bo(e,t,s,n),t=t.child),t;case 6:return null===e&&ho(t),null;case 13:return To(e,t,n);case 4:return Ri(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:si(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,No(t,o=i.value),null!==s){var l=s.value;if(0==(o=en(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!Or.current){t=Do(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.contextDependencies;if(null!==c){s=l.child;for(var u=c.first;null!==u;){if(u.context===r&&0!=(u.observedBits&o)){1===l.tag&&((u=jo(n)).tag=Wo,Vo(l,u)),l.expirationTime<n&&(l.expirationTime=n),null!==(u=l.alternate)&&u.expirationTime<n&&(u.expirationTime=n),u=n;for(var h=l.return;null!==h;){var p=h.alternate;if(h.childExpirationTime<u)h.childExpirationTime=u,null!==p&&p.childExpirationTime<u&&(p.childExpirationTime=u);else{if(!(null!==p&&p.childExpirationTime<u))break;p.childExpirationTime=u}h=h.return}c.expirationTime<n&&(c.expirationTime=n);break}u=u.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Mo(t,n),r=r(i=Bo(i,o.unstable_observedBits)),t.effectTag|=1,bo(e,t,r,n),t.child;case 14:return o=si(i=t.type,t.pendingProps),vo(e,t,i,o=si(i.type,o),r,n);case 15:return Co(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:si(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Fr(r)?(e=!0,$r(t)):e=!1,Mo(t,n),hi(t,r,i),di(t,r,i,n),Ro(null,t,r,!0,e,n)}a("156")}(e.alternate,e,Cs);return e.memoizedProps=e.pendingProps,null===t&&(t=Fs(e)),gs.current=null,t}function Hs(e,t){bs&&a("243"),Ms(),bs=!0;var n=fs.current;fs.current=ro;var r=e.nextExpirationTimeToWorkOn;r===Cs&&e===vs&&null!==ws||(Ps(),Cs=r,ws=Xr((vs=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==ws&&!va();)ws=Ls(ws);else for(;null!==ws;)ws=Ls(ws)}catch(t){if(_o=Io=Po=null,Gi(),null===ws)i=!0,xa(t);else{null===ws&&a("271");var o=ws,s=o.return;if(null!==s){e:{var l=e,c=s,u=o,h=t;if(s=Cs,u.effectTag|=1024,u.firstEffect=u.lastEffect=null,null!==h&&"object"==typeof h&&"function"==typeof h.then){var p=h;h=c;var d=-1,m=-1;do{if(13===h.tag){var f=h.alternate;if(null!==f&&null!==(f=f.memoizedState)){m=10*(1073741822-f.timedOutAt);break}"number"==typeof(f=h.pendingProps.maxDuration)&&(0>=f?d=0:(-1===d||f<d)&&(d=f))}h=h.return}while(null!==h);h=c;do{if((f=13===h.tag)&&(f=void 0!==h.memoizedProps.fallback&&null===h.memoizedState),f){if(null===(c=h.updateQueue)?((c=new Set).add(p),h.updateQueue=c):c.add(p),0==(1&h.mode)){h.effectTag|=64,u.effectTag&=-1957,1===u.tag&&(null===u.alternate?u.tag=17:((s=jo(1073741823)).tag=Wo,Vo(u,s))),u.expirationTime=1073741823;break e}c=s;var g=(u=l).pingCache;null===g?(g=u.pingCache=new hs,f=new Set,g.set(p,f)):void 0===(f=g.get(p))&&(f=new Set,g.set(p,f)),f.has(c)||(f.add(c),u=$s.bind(null,u,p,c),p.then(u,u)),-1===d?l=1073741823:(-1===m&&(m=10*(1073741822-ii(l,s))-5e3),l=m+d),0<=l&&Ss<l&&(Ss=l),h.effectTag|=2048,h.expirationTime=s;break e}h=h.return}while(null!==h);h=Error((ct(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ut(u))}Es=!0,h=es(h,u),l=c;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,Ko(l,s=ps(l,h,s));break e;case 1:if(d=h,m=l.type,u=l.stateNode,0==(64&l.effectTag)&&("function"==typeof m.getDerivedStateFromError||null!==u&&"function"==typeof u.componentDidCatch&&(null===As||!As.has(u)))){l.effectTag|=2048,l.expirationTime=s,Ko(l,s=ds(l,d,s));break e}}l=l.return}while(null!==l)}ws=Fs(o);continue}i=!0,xa(t)}}break}if(bs=!1,fs.current=n,_o=Io=Po=null,Gi(),i)vs=null,e.finishedWork=null;else if(null!==ws)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&a("281"),vs=null,Es){if(i=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==s&&s<r)return ri(e,r),void ma(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void ma(e,n,r,t,-1)}t&&-1!==Ss?(ri(e,r),(t=10*(1073741822-ii(e,r)))<Ss&&(Ss=t),t=10*(1073741822-ga()),t=Ss-t,ma(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Us(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===As||!As.has(r)))return Vo(n,e=ds(n,e=es(t,e),1073741823)),void js(n,1073741823);break;case 3:return Vo(n,e=ps(n,e=es(t,e),1073741823)),void js(n,1073741823)}n=n.return}3===e.tag&&(Vo(e,n=ps(e,n=es(t,e),1073741823)),js(e,1073741823))}function Ws(e,t){var n=o.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(bs&&!Rs)r=Cs;else{switch(n){case o.unstable_ImmediatePriority:r=1073741823;break;case o.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case o.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:r=1;break;default:a("313")}null!==vs&&r===Cs&&--r}return n===o.unstable_UserBlockingPriority&&(0===ea||r<ea)&&(ea=r),r}function $s(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==vs&&Cs===n?vs=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),oi(n,e),0!==(n=e.expirationTime)&&ya(e,n)))}function zs(e,t){var n=e.stateNode;null!==n&&n.delete(t),null!==(e=qs(e,t=Ws(t=ga(),e)))&&(ni(e,t),0!==(t=e.expirationTime)&&ya(e,t))}function qs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function js(e,t){null!==(e=qs(e,t))&&(!bs&&0!==Cs&&t>Cs&&Ps(),ni(e,t),bs&&!Rs&&vs===e||ya(e,e.expirationTime),ua>ca&&(ua=0,a("185")))}function Gs(e,t,n,r,i){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,(function(){return e(t,n,r,i)}))}var Vs=null,Ks=null,Ys=0,Xs=void 0,Qs=!1,Zs=null,Js=0,ea=0,ta=!1,na=null,ra=!1,ia=!1,oa=null,sa=o.unstable_now(),aa=1073741822-(sa/10|0),la=aa,ca=50,ua=0,ha=null;function pa(){aa=1073741822-((o.unstable_now()-sa)/10|0)}function da(e,t){if(0!==Ys){if(t<Ys)return;null!==Xs&&o.unstable_cancelCallback(Xs)}Ys=t,e=o.unstable_now()-sa,Xs=o.unstable_scheduleCallback(Ca,{timeout:10*(1073741822-t)-e})}function ma(e,t,n,r,i){e.expirationTime=r,0!==i||va()?0<i&&(e.timeoutHandle=Sr(fa.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function fa(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,pa(),la=aa,Ea(e,n)}function ga(){return Qs||(ba(),0!==Js&&1!==Js||(pa(),la=aa)),la}function ya(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===Ks?(Vs=Ks=e,e.nextScheduledRoot=e):(Ks=Ks.nextScheduledRoot=e).nextScheduledRoot=Vs):t>e.expirationTime&&(e.expirationTime=t),Qs||(ra?ia&&(Zs=e,Js=1073741823,ka(e,1073741823,!1)):1073741823===t?Sa(1073741823,!1):da(e,t))}function ba(){var e=0,t=null;if(null!==Ks)for(var n=Ks,r=Vs;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===Ks)&&a("244"),r===r.nextScheduledRoot){Vs=Ks=r.nextScheduledRoot=null;break}if(r===Vs)Vs=i=r.nextScheduledRoot,Ks.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===Ks){(Ks=n).nextScheduledRoot=Vs,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===Ks)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}Zs=t,Js=e}var wa=!1;function va(){return!!wa||!!o.unstable_shouldYield()&&(wa=!0)}function Ca(){try{if(!va()&&null!==Vs){pa();var e=Vs;do{var t=e.expirationTime;0!==t&&aa<=t&&(e.nextExpirationTimeToWorkOn=aa),e=e.nextScheduledRoot}while(e!==Vs)}Sa(0,!0)}finally{wa=!1}}function Sa(e,t){if(ba(),t)for(pa(),la=aa;null!==Zs&&0!==Js&&e<=Js&&!(wa&&aa>Js);)ka(Zs,Js,aa>Js),ba(),pa(),la=aa;else for(;null!==Zs&&0!==Js&&e<=Js;)ka(Zs,Js,!1),ba();if(t&&(Ys=0,Xs=null),0!==Js&&da(Zs,Js),ua=0,ha=null,null!==oa)for(e=oa,oa=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ta||(ta=!0,na=e)}}if(ta)throw e=na,na=null,ta=!1,e}function Ea(e,t){Qs&&a("253"),Zs=e,Js=t,ka(e,t,!1),Sa(1073741823,!1)}function ka(e,t,n){if(Qs&&a("245"),Qs=!0,n){var r=e.finishedWork;null!==r?Ra(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Er(r)),Hs(e,n),null!==(r=e.finishedWork)&&(va()?e.finishedWork=r:Ra(e,r,t)))}else null!==(r=e.finishedWork)?Ra(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,Er(r)),Hs(e,n),null!==(r=e.finishedWork)&&Ra(e,r,t));Qs=!1}function Ra(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===oa?oa=[r]:oa.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===ha?ua++:(ha=e,ua=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,(function(){Bs(e,t)}))}function xa(e){null===Zs&&a("246"),Zs.expirationTime=0,ta||(ta=!0,na=e)}function Ta(e,t){var n=ra;ra=!0;try{return e(t)}finally{(ra=n)||Qs||Sa(1073741823,!1)}}function Da(e,t){if(ra&&!ia){ia=!0;try{return e(t)}finally{ia=!1}}return e(t)}function Aa(e,t,n){ra||Qs||0===ea||(Sa(ea,!1),ea=0);var r=ra;ra=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,(function(){return e(t,n)}))}finally{(ra=r)||Qs||Sa(1073741823,!1)}}function Pa(e,t,n,r,i){var o=t.current;e:if(n){t:{2===rn(n=n._reactInternalFiber)&&1===n.tag||a("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Fr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===n.tag){var l=n.type;if(Fr(l)){n=Wr(n,l,s);break e}}n=s}else n=_r;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=jo(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Ms(),Vo(o,i),js(o,r),r}function Ia(e,t,n,r){var i=t.current;return Pa(e,t,n,i=Ws(ga(),i),r)}function _a(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Na(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Xe,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Oa(e){var t=1073741822-25*(1+((1073741822-ga()+500)/25|0));t>=ys&&(t=ys-1),this._expirationTime=ys=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ma(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ba(e,t,n){e={current:t=Kr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Fa(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function La(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"==typeof i){var s=i;i=function(){var e=_a(o._internalRoot);s.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ba(e,!1,t)}(n,r),"function"==typeof i){var a=i;i=function(){var e=_a(o._internalRoot);a.call(e)}}Da((function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}))}return _a(o._internalRoot)}function Ha(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Fa(t)||a("200"),Na(e,t,null,n)}De=function(e,t,n){switch(t){case"input":if(kt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=U(r);i||a("90"),je(r),kt(r,i)}}}break;case"textarea":er(e,n);break;case"select":null!=(t=n.value)&&Qn(e,!!n.multiple,t,!1)}},Oa.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Ma;return Pa(e,t,null,n,r._onCommit),r},Oa.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Oa.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&a("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Ea(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Oa.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Ma.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ma.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&a("191",n),n()}}},Ba.prototype.render=function(e,t){var n=this._internalRoot,r=new Ma;return null!==(t=void 0===t?null:t)&&r.then(t),Ia(e,n,null,r._onCommit),r},Ba.prototype.unmount=function(e){var t=this._internalRoot,n=new Ma;return null!==(e=void 0===e?null:e)&&n.then(e),Ia(null,t,null,n._onCommit),n},Ba.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Ma;return null!==(n=void 0===n?null:n)&&i.then(n),Ia(t,r,e,i._onCommit),i},Ba.prototype.createBatch=function(){var e=new Oa(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Oe=Ta,Me=Aa,Be=function(){Qs||0===ea||(Sa(ea,!1),ea=0)};var Ua={createPortal:Ha,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?a("188"):a("268",Object.keys(e))),null===(e=sn(t))?null:e.stateNode},hydrate:function(e,t,n){return Fa(t)||a("200"),La(null,e,t,!0,n)},render:function(e,t,n){return Fa(t)||a("200"),La(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Fa(n)||a("200"),(null==e||void 0===e._reactInternalFiber)&&a("38"),La(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Fa(e)||a("40"),!!e._reactRootContainer&&(Da((function(){La(null,null,e,!1,(function(){e._reactRootContainer=null}))})),!0)},unstable_createPortal:function(){return Ha.apply(void 0,arguments)},unstable_batchedUpdates:Ta,unstable_interactiveUpdates:Aa,flushSync:function(e,t){Qs&&a("187");var n=ra;ra=!0;try{return Gs(e,t)}finally{ra=n,Sa(1073741823,!1)}},unstable_createRoot:function(e,t){return Fa(e)||a("299","unstable_createRoot"),new Ba(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=ra;ra=!0;try{Gs(e)}finally{(ra=t)||Qs||Sa(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[L,H,U,I.injectEventPluginsByName,v,G,function(e){D(e,j)},_e,Ne,Pn,N]}};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);qr=Gr((function(e){return t.onCommitFiberRoot(n,e)})),jr=Gr((function(e){return t.onCommitFiberUnmount(n,e)}))}catch(e){}}(i({},e,{overrideProps:null,currentDispatcherRef:Ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=sn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:F,bundleType:0,version:"16.8.4",rendererPackageName:"react-dom"});var Wa={default:Ua},$a=Wa&&Ua||Wa;e.exports=$a.default||$a},2623:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(6075)},6335:(e,t,n)=>{"use strict";var r=n(109),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,m=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y="function"==typeof Symbol&&Symbol.iterator;function b(e,t,n,r,i,o,s,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,s,a],c=0;(e=Error(t.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw e.framesToPop=1,e}}function w(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);b(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={};function S(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||v}function E(){}function k(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||v}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&w("85"),this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=S.prototype;var R=k.prototype=new E;R.constructor=k,r(R,S.prototype),R.isPureReactComponent=!0;var x={current:null},T={current:null},D=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r=void 0,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)D.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:T.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var _=/\/+/g,N=[];function O(e,t,n,r){if(N.length){var i=N.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>N.length&&N.push(e)}function B(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case s:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+L(i=e[l],l);a+=B(i,c,n,r)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=y&&e[y]||e["@@iterator"])?c:null))for(e=c.call(e),l=0;!(i=e.next()).done;)a+=B(i=i.value,c=t+L(i,l++),n,r);else"object"===i&&w("31","[object Object]"==(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return a}function F(e,t,n){return null==e?0:B(e,"",t,n)}function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function H(e,t){e.func.call(e.context,t,e.count++)}function U(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?W(e,r,n,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+n)),r.push(e))}function W(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(_,"$&/")+"/"),F(e,U,t=O(t,o,r,i)),M(t)}function $(){var e=x.current;return null===e&&w("307"),e}var z={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return W(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;F(e,H,t=O(null,null,t,n)),M(t)},count:function(e){return F(e,(function(){return null}),null)},toArray:function(e){var t=[];return W(e,t,null,(function(e){return e})),t},only:function(e){return I(e)||w("143"),e}},createRef:function(){return{current:null}},Component:S,PureComponent:k,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return $().useCallback(e,t)},useContext:function(e,t){return $().useContext(e,t)},useEffect:function(e,t){return $().useEffect(e,t)},useImperativeHandle:function(e,t,n){return $().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return $().useLayoutEffect(e,t)},useMemo:function(e,t){return $().useMemo(e,t)},useReducer:function(e,t,n){return $().useReducer(e,t,n)},useRef:function(e){return $().useRef(e)},useState:function(e){return $().useState(e)},Fragment:a,StrictMode:l,Suspense:m,createElement:P,cloneElement:function(e,t,n){null==e&&w("267",e);var i=void 0,s=r({},e.props),a=e.key,l=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(l=t.ref,c=T.current),void 0!==t.key&&(a=""+t.key);var u=void 0;for(i in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)D.call(t,i)&&!A.hasOwnProperty(i)&&(s[i]=void 0===t[i]&&void 0!==u?u[i]:t[i])}if(1==(i=arguments.length-2))s.children=n;else if(1<i){u=Array(i);for(var h=0;h<i;h++)u[h]=arguments[h+2];s.children=u}return{$$typeof:o,type:e.type,key:a,ref:l,props:s,_owner:c}},createFactory:function(e){var t=P.bind(null,e);return t.type=e,t},isValidElement:I,version:"16.8.4",unstable_ConcurrentMode:p,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentOwner:T,assign:r}},q={default:z},j=q&&z||q;e.exports=j.default||j},6826:(e,t,n)=>{"use strict";e.exports=n(6335)},6969:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5820),t)},5820:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setValueSafe=t.setValue=t.createKeySafe=t.createKey=t.enumerateKeysSafe=t.enumerateKeys=t.enumerateValuesSafe=t.enumerateValues=t.HKEY=t.RegistryValueType=void 0;function n(e,t){return[]}function r(e,t){return[]}function i(e,t){return!1}function o(e,t,n,r,i){return!1}!function(e){e.REG_BINARY="REG_BINARY",e.REG_DWORD="REG_DWORD",e.REG_DWORD_LITTLE_ENDIAN="REG_DWORD_LITTLE_ENDIAN",e.REG_DWORD_BIG_ENDIAN="REG_DWORD_BIG_ENDIAN",e.REG_EXPAND_SZ="REG_EXPAND_SZ",e.REG_LINK="REG_LINK",e.REG_MULTI_SZ="REG_MULTI_SZ",e.REG_NONE="REG_NONE",e.REG_QWORD="REG_QWORD",e.REG_QWORD_LITTLE_ENDIAN="REG_QWORD_LITTLE_ENDIAN",e.REG_SZ="REG_SZ"}(t.RegistryValueType||(t.RegistryValueType={})),function(e){e.HKEY_CLASSES_ROOT="HKEY_CLASSES_ROOT",e.HKEY_CURRENT_CONFIG="HKEY_CURRENT_CONFIG",e.HKEY_DYN_DATA="HKEY_DYN_DATA",e.HKEY_CURRENT_USER_LOCAL_SETTINGS="HKEY_CURRENT_USER_LOCAL_SETTINGS",e.HKEY_CURRENT_USER="HKEY_CURRENT_USER",e.HKEY_LOCAL_MACHINE="HKEY_LOCAL_MACHINE",e.HKEY_PERFORMANCE_DATA="HKEY_PERFORMANCE_DATA",e.HKEY_PERFORMANCE_TEXT="HKEY_PERFORMANCE_TEXT",e.HKEY_PERFORMANCE_NLSTEXT="HKEY_PERFORMANCE_NLSTEXT",e.HKEY_USERS="HKEY_USERS"}(t.HKEY||(t.HKEY={})),t.enumerateValues=n,t.enumerateValuesSafe=function(e,t){try{return[]}catch(e){return[]}},t.enumerateKeys=r,t.enumerateKeysSafe=function(e,t){try{return[]}catch(e){return[]}},t.createKey=i,t.createKeySafe=function(e,t){try{return!1}catch(e){return!1}},t.setValue=o,t.setValueSafe=function(e,t,n,r,i){try{return!1}catch(e){return!1}}},8818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,s=-1,a=!1,l=!1;function c(){if(!a){var e=n.expirationTime;l?E():l=!0,S(p,e)}}function u(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,a=s;i=e,s=t;try{var l=r()}finally{i=o,s=a}if("function"==typeof l)if(l={callback:l,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=l.next=l.previous=l;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=l,c()),(t=r.previous).next=r.previous=l,l.next=r,l.previous=t}}function h(){if(-1===o&&null!==n&&1===n.priorityLevel){a=!0;try{do{u()}while(null!==n&&1===n.priorityLevel)}finally{a=!1,null!==n?c():l=!1}}}function p(e){a=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;do{u()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{u()}while(null!==n&&!k())}finally{a=!1,r=i,null!==n?c():l=!1,h()}}var d,m,f=Date,g="function"==typeof setTimeout?setTimeout:void 0,y="function"==typeof clearTimeout?clearTimeout:void 0,b="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,w="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function v(e){d=b((function(t){y(m),e(t)})),m=g((function(){w(d),e(t.unstable_now())}),100)}if("object"==typeof performance&&"function"==typeof performance.now){var C=performance;t.unstable_now=function(){return C.now()}}else t.unstable_now=function(){return f.now()};var S,E,k,R=null;if("undefined"!=typeof window?R=window:"undefined"!=typeof global&&(R=global),R&&R._schedMock){var x=R._schedMock;S=x[0],E=x[1],k=x[2],t.unstable_now=x[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var T=null,D=function(e){if(null!==T)try{T(e)}finally{T=null}};S=function(e){null!==T?setTimeout(S,0,e):(T=e,setTimeout(D,0,!1))},E=function(){T=null},k=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof b&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof w&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var A=null,P=!1,I=-1,_=!1,N=!1,O=0,M=33,B=33;k=function(){return O<=t.unstable_now()};var F=new MessageChannel,L=F.port2;F.port1.onmessage=function(){P=!1;var e=A,n=I;A=null,I=-1;var r=t.unstable_now(),i=!1;if(0>=O-r){if(!(-1!==n&&n<=r))return _||(_=!0,v(H)),A=e,void(I=n);i=!0}if(null!==e){N=!0;try{e(i)}finally{N=!1}}};var H=function(e){if(null!==A){v(H);var t=e-O+B;t<B&&M<B?(8>t&&(t=8),B=t<M?M:t):M=t,O=e+B,P||(P=!0,L.postMessage(void 0))}else _=!1};S=function(e,t){A=e,I=t,N||0>t?L.postMessage(void 0):_||(_=!0,v(H))},E=function(){A=null,P=!1,I=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,s=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=s,h()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,s=o;i=n,o=t.unstable_now();try{return e()}finally{i=r,o=s,h()}},t.unstable_scheduleCallback=function(e,r){var s=-1!==o?o:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=s+r.timeout;else switch(i){case 1:r=s+-1;break;case 2:r=s+250;break;case 5:r=s+1073741823;break;case 4:r=s+1e4;break;default:r=s+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{s=null;var a=n;do{if(a.expirationTime>r){s=a;break}a=a.next}while(a!==n);null===s?s=n:s===n&&(n=e,c()),(r=s.previous).next=s.previous=e,e.next=s,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,s=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=s,h()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<s||k())},t.unstable_continueExecution=function(){null!==n&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}},3991:(e,t,n)=>{"use strict";e.exports=n(8818)},7891:(e,t)=>{var n;t=e.exports=Y,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],o=t.safeRe=[],s=t.src=[],a=0,l=[["\\s",1],["\\d",256],["[a-zA-Z0-9-]",250]];function c(e){for(var t=0;t<l.length;t++){var n=l[t][0],r=l[t][1];e=e.split(n+"*").join(n+"{0,"+r+"}").split(n+"+").join(n+"{1,"+r+"}")}return e}var u=a++;s[u]="0|[1-9]\\d*";var h=a++;s[h]="\\d+";var p=a++;s[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=a++;s[d]="("+s[u]+")\\.("+s[u]+")\\.("+s[u]+")";var m=a++;s[m]="("+s[h]+")\\.("+s[h]+")\\.("+s[h]+")";var f=a++;s[f]="(?:"+s[u]+"|"+s[p]+")";var g=a++;s[g]="(?:"+s[h]+"|"+s[p]+")";var y=a++;s[y]="(?:-("+s[f]+"(?:\\."+s[f]+")*))";var b=a++;s[b]="(?:-?("+s[g]+"(?:\\."+s[g]+")*))";var w=a++;s[w]="[a-zA-Z0-9-]+";var v=a++;s[v]="(?:\\+("+s[w]+"(?:\\."+s[w]+")*))";var C=a++,S="v?"+s[d]+s[y]+"?"+s[v]+"?";s[C]="^"+S+"$";var E="[v=\\s]*"+s[m]+s[b]+"?"+s[v]+"?",k=a++;s[k]="^"+E+"$";var R=a++;s[R]="((?:<|>)?=?)";var x=a++;s[x]=s[h]+"|x|X|\\*";var T=a++;s[T]=s[u]+"|x|X|\\*";var D=a++;s[D]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[y]+")?"+s[v]+"?)?)?";var A=a++;s[A]="[v=\\s]*("+s[x]+")(?:\\.("+s[x]+")(?:\\.("+s[x]+")(?:"+s[b]+")?"+s[v]+"?)?)?";var P=a++;s[P]="^"+s[R]+"\\s*"+s[D]+"$";var I=a++;s[I]="^"+s[R]+"\\s*"+s[A]+"$";var _=a++;s[_]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var N=a++;s[N]="(?:~>?)";var O=a++;s[O]="(\\s*)"+s[N]+"\\s+",i[O]=new RegExp(s[O],"g"),o[O]=new RegExp(c(s[O]),"g");var M=a++;s[M]="^"+s[N]+s[D]+"$";var B=a++;s[B]="^"+s[N]+s[A]+"$";var F=a++;s[F]="(?:\\^)";var L=a++;s[L]="(\\s*)"+s[F]+"\\s+",i[L]=new RegExp(s[L],"g"),o[L]=new RegExp(c(s[L]),"g");var H=a++;s[H]="^"+s[F]+s[D]+"$";var U=a++;s[U]="^"+s[F]+s[A]+"$";var W=a++;s[W]="^"+s[R]+"\\s*("+E+")$|^$";var $=a++;s[$]="^"+s[R]+"\\s*("+S+")$|^$";var z=a++;s[z]="(\\s*)"+s[R]+"\\s*("+E+"|"+s[D]+")",i[z]=new RegExp(s[z],"g"),o[z]=new RegExp(c(s[z]),"g");var q=a++;s[q]="^\\s*("+s[D]+")\\s+-\\s+("+s[D]+")\\s*$";var j=a++;s[j]="^\\s*("+s[A]+")\\s+-\\s+("+s[A]+")\\s*$";var G=a++;s[G]="(<|>)?=?\\s*\\*";for(var V=0;V<35;V++)n(V,s[V]),i[V]||(i[V]=new RegExp(s[V]),o[V]=new RegExp(c(s[V])));function K(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Y)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[k]:o[C]).test(e))return null;try{return new Y(e,t)}catch(e){return null}}function Y(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Y){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof Y))return new Y(e,t);n("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[k]:o[C]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=K,t.valid=function(e,t){var n=K(e,t);return n?n.version:null},t.clean=function(e,t){var n=K(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=Y,Y.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Y.prototype.toString=function(){return this.version},Y.prototype.compare=function(e){return n("SemVer.compare",this.version,this.options,e),e instanceof Y||(e=new Y(e,this.options)),this.compareMain(e)||this.comparePre(e)},Y.prototype.compareMain=function(e){return e instanceof Y||(e=new Y(e,this.options)),Q(this.major,e.major)||Q(this.minor,e.minor)||Q(this.patch,e.patch)},Y.prototype.comparePre=function(e){if(e instanceof Y||(e=new Y(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return Q(r,i)}while(++t)},Y.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new Y(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(te(e,t))return null;var n=K(e),r=K(t),i="";if(n.prerelease.length||r.prerelease.length){i="pre";var o="prerelease"}for(var s in n)if(("major"===s||"minor"===s||"patch"===s)&&n[s]!==r[s])return i+s;return o},t.compareIdentifiers=Q;var X=/^[0-9]+$/;function Q(e,t){var n=X.test(e),r=X.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1}function Z(e,t,n){return new Y(e,n).compare(new Y(t,n))}function J(e,t,n){return Z(e,t,n)>0}function ee(e,t,n){return Z(e,t,n)<0}function te(e,t,n){return 0===Z(e,t,n)}function ne(e,t,n){return 0!==Z(e,t,n)}function re(e,t,n){return Z(e,t,n)>=0}function ie(e,t,n){return Z(e,t,n)<=0}function oe(e,t,n,r){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return te(e,n,r);case"!=":return ne(e,n,r);case">":return J(e,n,r);case">=":return re(e,n,r);case"<":return ee(e,n,r);case"<=":return ie(e,n,r);default:throw new TypeError("Invalid operator: "+t)}}function se(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof se){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof se))return new se(e,t);e=e.trim().split(/\s+/).join(" "),n("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===ae?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return Q(t,e)},t.major=function(e,t){return new Y(e,t).major},t.minor=function(e,t){return new Y(e,t).minor},t.patch=function(e,t){return new Y(e,t).patch},t.compare=Z,t.compareLoose=function(e,t){return Z(e,t,!0)},t.rcompare=function(e,t,n){return Z(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=J,t.lt=ee,t.eq=te,t.neq=ne,t.gte=re,t.lte=ie,t.cmp=oe,t.Comparator=se;var ae={};function le(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof le)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new le(e.raw,t);if(e instanceof se)return new le(e.value,t);if(!(this instanceof le))return new le(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function ce(e){return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,n,r,i,o,s,a,l,c,u,h,p){return((t=ce(n)?"":ce(r)?">="+n+".0.0":ce(i)?">="+n+"."+r+".0":">="+t)+" "+(a=ce(l)?"":ce(c)?"<"+(+l+1)+".0.0":ce(u)?"<"+l+"."+(+c+1)+".0":h?"<="+l+"."+c+"."+u+"-"+h:"<="+a)).trim()}function he(e,t,r){for(var i=0;i<e.length;i++)if(!e[i].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(i=0;i<e.length;i++)if(n(e[i].semver),e[i].semver!==ae&&e[i].semver.prerelease.length>0){var o=e[i].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function pe(e,t,n){try{t=new le(t,n)}catch(e){return!1}return t.test(e)}function de(e,t,n,r){var i,o,s,a,l;switch(e=new Y(e,r),t=new le(t,r),n){case">":i=J,o=ie,s=ee,a=">",l=">=";break;case"<":i=ee,o=re,s=J,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(e,t,r))return!1;for(var c=0;c<t.set.length;++c){var u=t.set[c],h=null,p=null;if(u.forEach((function(e){e.semver===ae&&(e=new se(">=0.0.0")),h=h||e,p=p||e,i(e.semver,h.semver,r)?h=e:s(e.semver,p.semver,r)&&(p=e)})),h.operator===a||h.operator===l)return!1;if((!p.operator||p.operator===a)&&o(e,p.semver))return!1;if(p.operator===l&&s(e,p.semver))return!1}return!0}se.prototype.parse=function(e){var t=this.options.loose?o[W]:o[$],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new Y(n[2],this.options.loose):this.semver=ae},se.prototype.toString=function(){return this.value},se.prototype.test=function(e){return n("Comparator.test",e,this.options.loose),this.semver===ae||("string"==typeof e&&(e=new Y(e,this.options)),oe(e,this.operator,this.semver,this.options))},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Comparator is required");var n;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return n=new le(e.value,t),pe(this.value,n,t);if(""===e.operator)return n=new le(this.value,t),pe(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,s=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=oe(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=oe(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||o&&s||a||l},t.Range=le,le.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(e){var t=this.options.loose,r=t?o[j]:o[q];e=e.replace(r,ue),n("hyphen replace",e),e=e.replace(o[z],"$1$2$3"),n("comparator trim",e,o[z]),e=(e=e.replace(o[O],"$1~")).replace(o[L],"$1^");var i=t?o[W]:o[$],s=e.split(" ").map((function(e){return function(e,t){return n("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t.loose?o[U]:o[H];return e.replace(r,(function(t,r,i,o,s){var a;return n("caret",e,t,r,i,o,s),ce(r)?a="":ce(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ce(o)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":s?(n("replaceCaret pr",s),a="0"===r?"0"===i?">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+"-"+s+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+o+" <"+r+"."+i+"."+(+o+1):">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+o+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t.loose?o[B]:o[M];return e.replace(r,(function(t,r,i,o,s){var a;return n("tilde",e,t,r,i,o,s),ce(r)?a="":ce(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":ce(o)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":s?(n("replaceTilde pr",s),a=">="+r+"."+i+"."+o+"-"+s+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+o+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t.loose?o[I]:o[P];return e.replace(r,(function(t,r,i,o,s,a){n("xRange",e,t,r,i,o,s,a);var l=ce(i),c=l||ce(o),u=c||ce(s);return"="===r&&u&&(r=""),l?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(c&&(o=0),s=0,">"===r?(r=">=",c?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",c?i=+i+1:o=+o+1),t=r+i+"."+o+"."+s):c?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(o[G],"")}(e,t),n("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s.map((function(e){return new se(e,this.options)}),this)},le.prototype.intersects=function(e,t){if(!(e instanceof le))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new le(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},le.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new Y(e,this.options));for(var t=0;t<this.set.length;t++)if(he(this.set[t],e,this.options))return!0;return!1},t.satisfies=pe,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var o=new le(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&-1!==i.compare(e)||(i=new Y(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var o=new le(t,n)}catch(e){return null}return e.forEach((function(e){o.test(e)&&(r&&1!==i.compare(e)||(i=new Y(r=e,n)))})),r},t.minVersion=function(e,t){e=new le(e,t);var n=new Y("0.0.0");if(e.test(n))return n;if(n=new Y("0.0.0-0"),e.test(n))return n;n=null;for(var r=0;r<e.set.length;++r)e.set[r].forEach((function(e){var t=new Y(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!J(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return n&&e.test(n)?n:null},t.validRange=function(e,t){try{return new le(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return de(e,t,"<",n)},t.gtr=function(e,t,n){return de(e,t,">",n)},t.outside=de,t.prerelease=function(e,t){var n=K(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new le(e,n),t=new le(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof Y)return e;if("string"!=typeof e)return null;var t=e.match(o[_]);return null==t?null:K(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},7306:(e,t,n)=>{"use strict";var r=n(5663);e.exports=function(e){var t=e.match(r);if(!t)return null;var n=t[0].replace(/#! ?/,"").split(" "),i=n[0].split("/").pop(),o=n[1];return"env"===i?o:i+(o?" "+o:"")}},5663:e=>{"use strict";e.exports=/^#!.*/},8419:(e,t,n)=>{var r,i=n(9491),o=n(9291),s=n(2361);function a(){u&&(u=!1,o.forEach((function(e){try{process.removeListener(e,c[e])}catch(e){}})),process.emit=m,process.reallyExit=p,r.count-=1)}function l(e,t,n){r.emitted[e]||(r.emitted[e]=!0,r.emit(e,t,n))}"function"!=typeof s&&(s=s.EventEmitter),process.__signal_exit_emitter__?r=process.__signal_exit_emitter__:((r=process.__signal_exit_emitter__=new s).count=0,r.emitted={}),r.infinite||(r.setMaxListeners(1/0),r.infinite=!0),e.exports=function(e,t){i.equal(typeof e,"function","a callback must be provided for exit handler"),!1===u&&h();var n="exit";return t&&t.alwaysLast&&(n="afterexit"),r.on(n,e),function(){r.removeListener(n,e),0===r.listeners("exit").length&&0===r.listeners("afterexit").length&&a()}},e.exports.unload=a;var c={};o.forEach((function(e){c[e]=function(){process.listeners(e).length===r.count&&(a(),l("exit",null,e),l("afterexit",null,e),process.kill(process.pid,e))}})),e.exports.signals=function(){return o},e.exports.load=h;var u=!1;function h(){u||(u=!0,r.count+=1,o=o.filter((function(e){try{return process.on(e,c[e]),!0}catch(e){return!1}})),process.emit=f,process.reallyExit=d)}var p=process.reallyExit;function d(e){process.exitCode=e||0,l("exit",process.exitCode,null),l("afterexit",process.exitCode,null),p.call(process,process.exitCode)}var m=process.emit;function f(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var n=m.apply(this,arguments);return l("exit",process.exitCode,null),l("afterexit",process.exitCode,null),n}return m.apply(this,arguments)}},9291:e=>{e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT")},9764:(e,t,n)=>{var r,i=n(6947).SourceMapConsumer,o=n(1017);try{(r=n(7147)).existsSync&&r.readFileSync||(r=null)}catch(e){}var s=!1,a=!1,l=!1,c="auto",u={},h={},p=/^data:application\/json[^,]+base64,/,d=[],m=[];function f(){return"browser"===c||"node"!==c&&"undefined"!=typeof window&&"function"==typeof XMLHttpRequest&&!(window.require&&window.module&&window.process&&"renderer"===window.process.type)}function g(e){return function(t){for(var n=0;n<e.length;n++){var r=e[n](t);if(r)return r}return null}}var y=g(d);function b(e,t){if(!e)return t;var n=o.dirname(e),r=/^\w+:\/\/[^\/]*/.exec(n),i=r?r[0]:"";return i+o.resolve(n.slice(i.length),t)}d.push((function(e){if((e=e.trim())in u)return u[e];var t=null;if(r){if(r.existsSync(e))try{t=r.readFileSync(e,"utf8")}catch(e){t=""}}else{var n=new XMLHttpRequest;n.open("GET",e,!1),n.send(null),t=null,4===n.readyState&&200===n.status&&(t=n.responseText)}return u[e]=t}));var w=g(m);function v(e){var t=h[e.source];if(!t){var n=w(e.source);n?(t=h[e.source]={url:n.url,map:new i(n.map)}).map.sourcesContent&&t.map.sources.forEach((function(e,n){var r=t.map.sourcesContent[n];if(r){var i=b(t.url,e);u[i]=r}})):t=h[e.source]={url:null,map:null}}if(t&&t.map){var r=t.map.originalPositionFor(e);if(null!==r.source)return r.source=b(t.url,r.source),r}return e}function C(e){var t=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(e);if(t){var n=v({source:t[2],line:+t[3],column:t[4]-1});return"eval at "+t[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return(t=/^eval at ([^(]+) \((.+)\)$/.exec(e))?"eval at "+t[1]+" ("+C(t[2])+")":e}function S(){var e,t="";if(this.isNative())t="native";else{!(e=this.getScriptNameOrSourceURL())&&this.isEval()&&(t=this.getEvalOrigin(),t+=", "),t+=e||"<anonymous>";var n=this.getLineNumber();if(null!=n){t+=":"+n;var r=this.getColumnNumber();r&&(t+=":"+r)}}var i="",o=this.getFunctionName(),s=!0,a=this.isConstructor();if(this.isToplevel()||a)a?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=t,s=!1);else{var l=this.getTypeName();"[object Object]"===l&&(l="null");var c=this.getMethodName();o?(l&&0!=o.indexOf(l)&&(i+=l+"."),i+=o,c&&o.indexOf("."+c)!=o.length-c.length-1&&(i+=" [as "+c+"]")):i+=l+"."+(c||"<anonymous>")}return s&&(i+=" ("+t+")"),i}function E(e){var t={};return Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){t[n]=/^(?:is|get)/.test(n)?function(){return e[n].call(e)}:e[n]})),t.toString=S,t}function k(e){if(e.isNative())return e;var t=e.getFileName()||e.getScriptNameOrSourceURL();if(t){var n=e.getLineNumber(),r=e.getColumnNumber()-1;1===n&&r>62&&!f()&&!e.isEval()&&(r-=62);var i=v({source:t,line:n,column:r});return(e=E(e)).getFileName=function(){return i.source},e.getLineNumber=function(){return i.line},e.getColumnNumber=function(){return i.column+1},e.getScriptNameOrSourceURL=function(){return i.source},e}var o=e.isEval()&&e.getEvalOrigin();return o?(o=C(o),(e=E(e)).getEvalOrigin=function(){return o},e):e}function R(e,t){return l&&(u={},h={}),e+t.map((function(e){return"\n    at "+k(e)})).join("")}function x(e){var t=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(e.stack);if(t){var n=t[1],i=+t[2],o=+t[3],s=u[n];if(!s&&r&&r.existsSync(n))try{s=r.readFileSync(n,"utf8")}catch(e){s=""}if(s){var a=s.split(/(?:\r\n|\r|\n)/)[i-1];if(a)return n+":"+i+"\n"+a+"\n"+new Array(o).join(" ")+"^"}}return null}function T(e){var t=x(e);t&&(console.error(),console.error(t)),console.error(e.stack),process.exit(1)}m.push((function(e){var t,n=function(e){var t;if(f())try{var n=new XMLHttpRequest;n.open("GET",e,!1),n.send(null),t=4===n.readyState?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch(e){}t=y(e);for(var i,o,s=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^\*]+?)[ \t]*(?:\*\/)[ \t]*$)/gm;o=s.exec(t);)i=o;return i?i[1]:null}(e);if(!n)return null;if(p.test(n)){var r=n.slice(n.indexOf(",")+1);t=new Buffer(r,"base64").toString(),n=e}else n=b(e,n),t=y(n);return t?{url:n,map:t}:null})),t.wrapCallSite=k,t.getErrorSource=x,t.mapSourcePosition=v,t.retrieveSourceMap=w,t.install=function(e){if((e=e||{}).environment&&(c=e.environment,-1===["node","browser","auto"].indexOf(c)))throw new Error("environment "+c+" was unknown. Available options are {auto, browser, node}");if(e.retrieveFile&&(e.overrideRetrieveFile&&(d.length=0),d.unshift(e.retrieveFile)),e.retrieveSourceMap&&(e.overrideRetrieveSourceMap&&(m.length=0),m.unshift(e.retrieveSourceMap)),e.hookRequire&&!f()){var t;try{t=n(8188)}catch(e){}var r=t.prototype._compile;r.__sourceMapSupport||(t.prototype._compile=function(e,t){return u[t]=e,h[t]=void 0,r.call(this,e,t)},t.prototype._compile.__sourceMapSupport=!0)}var i;l||(l="emptyCacheBetweenOperations"in e&&e.emptyCacheBetweenOperations),s||(s=!0,Error.prepareStackTrace=R),a||(!("handleUncaughtExceptions"in e)||e.handleUncaughtExceptions)&&"object"==typeof process&&null!==process&&"function"==typeof process.on&&(a=!0,i=process.emit,process.emit=function(e){if("uncaughtException"===e){var t=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(t&&!n)return T(arguments[1])}return i.apply(this,arguments)})}},1862:(e,t,n)=>{var r=n(6268),i=Object.prototype.hasOwnProperty,o="undefined"!=typeof Map;function s(){this._array=[],this._set=o?new Map:Object.create(null)}s.fromArray=function(e,t){for(var n=new s,r=0,i=e.length;r<i;r++)n.add(e[r],t);return n},s.prototype.size=function(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(e,t){var n=o?e:r.toSetString(e),s=o?this.has(e):i.call(this._set,n),a=this._array.length;s&&!t||this._array.push(e),s||(o?this._set.set(e,a):this._set[n]=a)},s.prototype.has=function(e){if(o)return this._set.has(e);var t=r.toSetString(e);return i.call(this._set,t)},s.prototype.indexOf=function(e){if(o){var t=this._set.get(e);if(t>=0)return t}else{var n=r.toSetString(e);if(i.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},s.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},s.prototype.toArray=function(){return this._array.slice()},t.I=s},4754:(e,t,n)=>{var r=n(5978);t.encode=function(e){var t,n="",i=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&i,(i>>>=5)>0&&(t|=32),n+=r.encode(t)}while(i>0);return n},t.decode=function(e,t,n){var i,o,s,a,l=e.length,c=0,u=0;do{if(t>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));i=!!(32&o),c+=(o&=31)<<u,u+=5}while(i);n.value=(a=(s=c)>>1,1==(1&s)?-a:a),n.rest=t}},5978:(e,t)=>{var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.encode=function(e){if(0<=e&&e<n.length)return n[e];throw new TypeError("Must be between 0 and 63: "+e)},t.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},5583:(e,t)=>{function n(e,r,i,o,s,a){var l=Math.floor((r-e)/2)+e,c=s(i,o[l],!0);return 0===c?l:c>0?r-l>1?n(l,r,i,o,s,a):a==t.LEAST_UPPER_BOUND?r<o.length?r:-1:l:l-e>1?n(e,l,i,o,s,a):a==t.LEAST_UPPER_BOUND?l:e<0?-1:e}t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2,t.search=function(e,r,i,o){if(0===r.length)return-1;var s=n(-1,r.length,e,r,i,o||t.GREATEST_LOWER_BOUND);if(s<0)return-1;for(;s-1>=0&&0===i(r[s],r[s-1],!0);)--s;return s}},6546:(e,t,n)=>{var r=n(6268);function i(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}i.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},i.prototype.add=function(e){var t,n,i,o,s,a;n=e,i=(t=this._last).generatedLine,o=n.generatedLine,s=t.generatedColumn,a=n.generatedColumn,o>i||o==i&&a>=s||r.compareByGeneratedPositionsInflated(t,n)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},i.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},t.H=i},9888:(e,t)=>{function n(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function r(e,t,i,o){if(i<o){var s=i-1;n(e,(u=i,h=o,Math.round(u+Math.random()*(h-u))),o);for(var a=e[o],l=i;l<o;l++)t(e[l],a)<=0&&n(e,s+=1,l);n(e,s+1,l);var c=s+1;r(e,t,i,c-1),r(e,t,c+1,o)}var u,h}t.U=function(e,t){r(e,t,0,e.length-1)}},5600:(e,t,n)=>{var r=n(6268),i=n(5583),o=n(1862).I,s=n(4754),a=n(9888).U;function l(e){var t=e;return"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,""))),null!=t.sections?new h(t):new c(t)}function c(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sources"),s=r.getArg(t,"names",[]),a=r.getArg(t,"sourceRoot",null),l=r.getArg(t,"sourcesContent",null),c=r.getArg(t,"mappings"),u=r.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);i=i.map(String).map(r.normalize).map((function(e){return a&&r.isAbsolute(a)&&r.isAbsolute(e)?r.relative(a,e):e})),this._names=o.fromArray(s.map(String),!0),this._sources=o.fromArray(i,!0),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this.file=u}function u(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function h(e){var t=e;"string"==typeof e&&(t=JSON.parse(e.replace(/^\)\]\}'/,"")));var n=r.getArg(t,"version"),i=r.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new o,this._names=new o;var s={line:-1,column:0};this._sections=i.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=r.getArg(e,"offset"),n=r.getArg(t,"line"),i=r.getArg(t,"column");if(n<s.line||n===s.line&&i<s.column)throw new Error("Section offsets must be ordered and non-overlapping.");return s=t,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new l(r.getArg(e,"map"))}}))}l.fromSourceMap=function(e){return c.fromSourceMap(e)},l.prototype._version=3,l.prototype.__generatedMappings=null,Object.defineProperty(l.prototype,"_generatedMappings",{get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),l.prototype.__originalMappings=null,Object.defineProperty(l.prototype,"_originalMappings",{get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),l.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return";"===n||","===n},l.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},l.GENERATED_ORDER=1,l.ORIGINAL_ORDER=2,l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.prototype.eachMapping=function(e,t,n){var i,o=t||null;switch(n||l.GENERATED_ORDER){case l.GENERATED_ORDER:i=this._generatedMappings;break;case l.ORIGINAL_ORDER:i=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;i.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return null!=t&&null!=s&&(t=r.join(s,t)),{source:t,generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,o)},l.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),n={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(null!=this.sourceRoot&&(n.source=r.relative(this.sourceRoot,n.source)),!this._sources.has(n.source))return[];n.source=this._sources.indexOf(n.source);var o=[],s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,i.LEAST_UPPER_BOUND);if(s>=0){var a=this._originalMappings[s];if(void 0===e.column)for(var l=a.originalLine;a&&a.originalLine===l;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s];else for(var c=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==c;)o.push({line:r.getArg(a,"generatedLine",null),column:r.getArg(a,"generatedColumn",null),lastColumn:r.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++s]}return o},t.SourceMapConsumer=l,c.prototype=Object.create(l.prototype),c.prototype.consumer=l,c.fromSourceMap=function(e){var t=Object.create(c.prototype),n=t._names=o.fromArray(e._names.toArray(),!0),i=t._sources=o.fromArray(e._sources.toArray(),!0);t.sourceRoot=e._sourceRoot,t.sourcesContent=e._generateSourcesContent(t._sources.toArray(),t.sourceRoot),t.file=e._file;for(var s=e._mappings.toArray().slice(),l=t.__generatedMappings=[],h=t.__originalMappings=[],p=0,d=s.length;p<d;p++){var m=s[p],f=new u;f.generatedLine=m.generatedLine,f.generatedColumn=m.generatedColumn,m.source&&(f.source=i.indexOf(m.source),f.originalLine=m.originalLine,f.originalColumn=m.originalColumn,m.name&&(f.name=n.indexOf(m.name)),h.push(f)),l.push(f)}return a(t.__originalMappings,r.compareByOriginalPositions),t},c.prototype._version=3,Object.defineProperty(c.prototype,"sources",{get:function(){return this._sources.toArray().map((function(e){return null!=this.sourceRoot?r.join(this.sourceRoot,e):e}),this)}}),c.prototype._parseMappings=function(e,t){for(var n,i,o,l,c,h=1,p=0,d=0,m=0,f=0,g=0,y=e.length,b=0,w={},v={},C=[],S=[];b<y;)if(";"===e.charAt(b))h++,b++,p=0;else if(","===e.charAt(b))b++;else{for((n=new u).generatedLine=h,l=b;l<y&&!this._charIsMappingSeparator(e,l);l++);if(o=w[i=e.slice(b,l)])b+=i.length;else{for(o=[];b<l;)s.decode(e,b,v),c=v.value,b=v.rest,o.push(c);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");w[i]=o}n.generatedColumn=p+o[0],p=n.generatedColumn,o.length>1&&(n.source=f+o[1],f+=o[1],n.originalLine=d+o[2],d=n.originalLine,n.originalLine+=1,n.originalColumn=m+o[3],m=n.originalColumn,o.length>4&&(n.name=g+o[4],g+=o[4])),S.push(n),"number"==typeof n.originalLine&&C.push(n)}a(S,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=S,a(C,r.compareByOriginalPositions),this.__originalMappings=C},c.prototype._findMapping=function(e,t,n,r,o,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return i.search(e,t,o,s)},c.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},c.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",l.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===t.generatedLine){var o=r.getArg(i,"source",null);null!==o&&(o=this._sources.at(o),null!=this.sourceRoot&&(o=r.join(this.sourceRoot,o)));var s=r.getArg(i,"name",null);return null!==s&&(s=this._names.at(s)),{source:o,line:r.getArg(i,"originalLine",null),column:r.getArg(i,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},c.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e}))},c.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;if(null!=this.sourceRoot&&(e=r.relative(this.sourceRoot,e)),this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];var n;if(null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var i=e.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(i))return this.sourcesContent[this._sources.indexOf(i)];if((!n.path||"/"==n.path)&&this._sources.has("/"+e))return this.sourcesContent[this._sources.indexOf("/"+e)]}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},c.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if(null!=this.sourceRoot&&(t=r.relative(this.sourceRoot,t)),!this._sources.has(t))return{line:null,column:null,lastColumn:null};var n={source:t=this._sources.indexOf(t),originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",l.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},h.prototype=Object.create(l.prototype),h.prototype.constructor=l,h.prototype._version=3,Object.defineProperty(h.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var n=0;n<this._sections[t].consumer.sources.length;n++)e.push(this._sections[t].consumer.sources[n]);return e}}),h.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},n=i.search(t,this._sections,(function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn})),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},h.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},h.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var r=this._sections[n].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},h.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(-1!==n.consumer.sources.indexOf(r.getArg(e,"source"))){var i=n.consumer.generatedPositionFor(e);if(i)return{line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},h.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,s=0;s<o.length;s++){var l=o[s],c=i.consumer._sources.at(l.source);null!==i.consumer.sourceRoot&&(c=r.join(i.consumer.sourceRoot,c)),this._sources.add(c),c=this._sources.indexOf(c);var u=i.consumer._names.at(l.name);this._names.add(u),u=this._names.indexOf(u);var h={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(h),"number"==typeof h.originalLine&&this.__originalMappings.push(h)}a(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),a(this.__originalMappings,r.compareByOriginalPositions)}},9947:(e,t,n)=>{var r=n(4754),i=n(6268),o=n(1862).I,s=n(6546).H;function a(e){e||(e={}),this._file=i.getArg(e,"file",null),this._sourceRoot=i.getArg(e,"sourceRoot",null),this._skipValidation=i.getArg(e,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new s,this._sourcesContents=null}a.prototype._version=3,a.fromSourceMap=function(e){var t=e.sourceRoot,n=new a({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=i.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),n.addMapping(r)})),e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&n.setSourceContent(t,r)})),n},a.prototype.addMapping=function(e){var t=i.getArg(e,"generated"),n=i.getArg(e,"original",null),r=i.getArg(e,"source",null),o=i.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,r,o),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=o&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=n&&n.line,originalColumn:null!=n&&n.column,source:r,name:o})},a.prototype.setSourceContent=function(e,t){var n=e;null!=this._sourceRoot&&(n=i.relative(this._sourceRoot,n)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[i.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[i.toSetString(n)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},a.prototype.applySourceMap=function(e,t,n){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var s=this._sourceRoot;null!=s&&(r=i.relative(s,r));var a=new o,l=new o;this._mappings.unsortedForEach((function(t){if(t.source===r&&null!=t.originalLine){var o=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=o.source&&(t.source=o.source,null!=n&&(t.source=i.join(n,t.source)),null!=s&&(t.source=i.relative(s,t.source)),t.originalLine=o.line,t.originalColumn=o.column,null!=o.name&&(t.name=o.name))}var c=t.source;null==c||a.has(c)||a.add(c);var u=t.name;null==u||l.has(u)||l.add(u)}),this),this._sources=a,this._names=l,e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&(null!=n&&(t=i.join(n,t)),null!=s&&(t=i.relative(s,t)),this.setSourceContent(t,r))}),this)},a.prototype._validateMapping=function(e,t,n,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||n||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:r}))},a.prototype._serializeMappings=function(){for(var e,t,n,o,s=0,a=1,l=0,c=0,u=0,h=0,p="",d=this._mappings.toArray(),m=0,f=d.length;m<f;m++){if(e="",(t=d[m]).generatedLine!==a)for(s=0;t.generatedLine!==a;)e+=";",a++;else if(m>0){if(!i.compareByGeneratedPositionsInflated(t,d[m-1]))continue;e+=","}e+=r.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(o=this._sources.indexOf(t.source),e+=r.encode(o-h),h=o,e+=r.encode(t.originalLine-1-c),c=t.originalLine-1,e+=r.encode(t.originalColumn-l),l=t.originalColumn,null!=t.name&&(n=this._names.indexOf(t.name),e+=r.encode(n-u),u=n)),p+=e}return p},a.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=i.relative(t,e));var n=i.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,n)?this._sourcesContents[n]:null}),this)},a.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},a.prototype.toString=function(){return JSON.stringify(this.toJSON())},t.h=a},4047:(e,t,n)=>{var r=n(9947).h,i=n(6268),o=/(\r?\n)/,s="$$$isSourceNode$$$";function a(e,t,n,r,i){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==n?null:n,this.name=null==i?null:i,this[s]=!0,null!=r&&this.add(r)}a.fromStringWithSourceMap=function(e,t,n){var r=new a,s=e.split(o),l=0,c=function(){return e()+(e()||"");function e(){return l<s.length?s[l++]:void 0}},u=1,h=0,p=null;return t.eachMapping((function(e){if(null!==p){if(!(u<e.generatedLine)){var t=(n=s[l]).substr(0,e.generatedColumn-h);return s[l]=n.substr(e.generatedColumn-h),h=e.generatedColumn,d(p,t),void(p=e)}d(p,c()),u++,h=0}for(;u<e.generatedLine;)r.add(c()),u++;if(h<e.generatedColumn){var n=s[l];r.add(n.substr(0,e.generatedColumn)),s[l]=n.substr(e.generatedColumn),h=e.generatedColumn}p=e}),this),l<s.length&&(p&&d(p,c()),r.add(s.splice(l).join(""))),t.sources.forEach((function(e){var o=t.sourceContentFor(e);null!=o&&(null!=n&&(e=i.join(n,e)),r.setSourceContent(e,o))})),r;function d(e,t){if(null===e||void 0===e.source)r.add(t);else{var o=n?i.join(n,e.source):e.source;r.add(new a(e.originalLine,e.originalColumn,o,t,e.name))}}},a.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},a.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},a.prototype.walk=function(e){for(var t,n=0,r=this.children.length;n<r;n++)(t=this.children[n])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},a.prototype.join=function(e){var t,n,r=this.children.length;if(r>0){for(t=[],n=0;n<r-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this},a.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[s]?n.replaceRight(e,t):"string"==typeof n?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this},a.prototype.setSourceContent=function(e,t){this.sourceContents[i.toSetString(e)]=t},a.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,n=r.length;t<n;t++)e(i.fromSetString(r[t]),this.sourceContents[r[t]])},a.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},a.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new r(e),i=!1,o=null,s=null,a=null,l=null;return this.walk((function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(o===r.source&&s===r.line&&a===r.column&&l===r.name||n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),o=r.source,s=r.line,a=r.column,l=r.name,i=!0):i&&(n.addMapping({generated:{line:t.line,column:t.column}}),o=null,i=!1);for(var c=0,u=e.length;c<u;c++)10===e.charCodeAt(c)?(t.line++,t.column=0,c+1===u?(o=null,i=!1):i&&n.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++})),this.walkSourceContents((function(e,t){n.setSourceContent(e,t)})),{code:t.code,map:n}}},6268:(e,t)=>{t.getArg=function(e,t,n){if(t in e)return e[t];if(3===arguments.length)return n;throw new Error('"'+t+'" is a required argument.')};var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/,r=/^data:.+\,.+$/;function i(e){var t=e.match(n);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function o(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function s(e){var n=e,r=i(e);if(r){if(!r.path)return e;n=r.path}for(var s,a=t.isAbsolute(n),l=n.split(/\/+/),c=0,u=l.length-1;u>=0;u--)"."===(s=l[u])?l.splice(u,1):".."===s?c++:c>0&&(""===s?(l.splice(u+1,c),c=0):(l.splice(u,2),c--));return""===(n=l.join("/"))&&(n=a?"/":"."),r?(r.path=n,o(r)):n}t.urlParse=i,t.urlGenerate=o,t.normalize=s,t.join=function(e,t){""===e&&(e="."),""===t&&(t=".");var n=i(t),a=i(e);if(a&&(e=a.path||"/"),n&&!n.scheme)return a&&(n.scheme=a.scheme),o(n);if(n||t.match(r))return t;if(a&&!a.host&&!a.path)return a.host=t,o(a);var l="/"===t.charAt(0)?t:s(e.replace(/\/+$/,"")+"/"+t);return a?(a.path=l,o(a)):l},t.isAbsolute=function(e){return"/"===e.charAt(0)||!!e.match(n)},t.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var n=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++n}return Array(n+1).join("../")+t.substr(e.length+1)};var a=!("__proto__"in Object.create(null));function l(e){return e}function c(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var n=t-10;n>=0;n--)if(36!==e.charCodeAt(n))return!1;return!0}function u(e,t){return e===t?0:e>t?1:-1}t.toSetString=a?l:function(e){return c(e)?"$"+e:e},t.fromSetString=a?l:function(e){return c(e)?e.slice(1):e},t.compareByOriginalPositions=function(e,t,n){var r=e.source-t.source;return 0!==r||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)||n||0!=(r=e.generatedColumn-t.generatedColumn)||0!=(r=e.generatedLine-t.generatedLine)?r:e.name-t.name},t.compareByGeneratedPositionsDeflated=function(e,t,n){var r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||n||0!=(r=e.source-t.source)||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:e.name-t.name},t.compareByGeneratedPositionsInflated=function(e,t){var n=e.generatedLine-t.generatedLine;return 0!==n||0!=(n=e.generatedColumn-t.generatedColumn)||0!==(n=u(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:u(e.name,t.name)}},6947:(e,t,n)=>{n(9947).h,t.SourceMapConsumer=n(5600).SourceMapConsumer,n(4047)},6097:e=>{"use strict";e.exports=function(e){var t="string"==typeof e?"\n":"\n".charCodeAt(),n="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}},4878:e=>{!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function i(e,i,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var s=o&&o.debug||!1;if(s){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var c=l.style,u=window.getComputedStyle?getComputedStyle(e):e.currentStyle;c.whiteSpace="pre-wrap","INPUT"!==e.nodeName&&(c.wordWrap="break-word"),c.position="absolute",s||(c.visibility="hidden"),t.forEach((function(e){c[e]=u[e]})),r?e.scrollHeight>parseInt(u.height)&&(c.overflowY="scroll"):c.overflow="hidden",l.textContent=e.value.substring(0,i),"INPUT"===e.nodeName&&(l.textContent=l.textContent.replace(/\s/g," "));var h=document.createElement("span");h.textContent=e.value.substring(i)||".",l.appendChild(h);var p={top:h.offsetTop+parseInt(u.borderTopWidth),left:h.offsetLeft+parseInt(u.borderLeftWidth)};return s?h.style.backgroundColor="#aaa":document.body.removeChild(l),p}void 0!==e.exports?e.exports=i:n&&(window.getCaretCoordinates=i)}()},4143:(e,t,n)=>{"use strict";const r=n(2037).homedir();e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);return r?e.replace(/^~($|\/|\\)/,`${r}$1`):e}},4515:(e,t,n)=>{"use strict";const r=n(2037),i=n(8734),o=n(2878),s=()=>{const{env:e}=process;return e.SUDO_USER||e.C9_USER||e.LOGNAME||e.USER||e.LNAME||e.USERNAME},a=()=>{try{return r.userInfo().username}catch(e){}},l=e=>`no-username-${e}`;e.exports=o((async()=>{const e=s();if(e)return e;const t=a();if(t)return t;try{const e=await i.stdout("id",["-u"]);try{return await i.stdout("id",["-un",e])}catch(e){}return l(e)}catch(e){}})),e.exports.sync=o((()=>{const e=s();if(e)return e;const t=a();if(t)return t;try{const e=i.sync("id",["-u"]).stdout;try{return i.sync("id",["-un",e]).stdout}catch(e){}return l(e)}catch(e){}}))},1875:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},8621:e=>{var t,n=global.crypto||global.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);t=function(){return n.getRandomValues(r),r}}if(!t){var i=new Array(16);t=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=t},4790:(e,t,n)=>{var r=n(8621),i=n(1875);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},7587:e=>{"use strict";e.exports=function(){}},9891:(e,t,n)=>{e.exports=c,c.sync=function(e,t){for(var n=l(e,t=t||{}),r=n.env,o=n.ext,c=n.extExe,u=[],h=0,p=r.length;h<p;h++){var d=r[h];'"'===d.charAt(0)&&'"'===d.slice(-1)&&(d=d.slice(1,-1));var m=i.join(d,e);!d&&/^\.[\\\/]/.test(e)&&(m=e.slice(0,2)+m);for(var f=0,g=o.length;f<g;f++){var y=m+o[f];try{if(s.sync(y,{pathExt:c})){if(!t.all)return y;u.push(y)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw a(e)};var r="cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,i=n(1017),o=r?";":":",s=n(557);function a(e){var t=new Error("not found: "+e);return t.code="ENOENT",t}function l(e,t){var n=t.colon||o,i=t.path||process.env.PATH||"",s=[""];i=i.split(n);var a="";return r&&(i.unshift(process.cwd()),s=(a=t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(n),-1!==e.indexOf(".")&&""!==s[0]&&s.unshift("")),(e.match(/\//)||r&&e.match(/\\/))&&(i=[""]),{env:i,ext:s,extExe:a}}function c(e,t,n){"function"==typeof t&&(n=t,t={});var r=l(e,t),o=r.env,c=r.ext,u=r.extExe,h=[];!function r(l,p){if(l===p)return t.all&&h.length?n(null,h):n(a(e));var d=o[l];'"'===d.charAt(0)&&'"'===d.slice(-1)&&(d=d.slice(1,-1));var m=i.join(d,e);!d&&/^\.[\\\/]/.test(e)&&(m=e.slice(0,2)+m),function e(i,o){if(i===o)return r(l+1,p);var a=c[i];s(m+a,{pathExt:u},(function(r,s){if(!r&&s){if(!t.all)return n(null,m+a);h.push(m+a)}return e(i+1,o)}))}(0,c.length)}(0,o.length)}},4934:e=>{e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),r}}},33:(e,t,n)=>{e=n.nmd(e);const r=n(1017).join(__dirname,"desktop-notifications.node");try{global.process.dlopen(e,r)}catch(e){throw new Error("Cannot open "+r+": "+e)}},6980:(e,t,n)=>{e=n.nmd(e);const r=n(1017).join(__dirname,"fs_admin.node");try{global.process.dlopen(e,r)}catch(e){throw new Error("Cannot open "+r+": "+e)}},6442:(e,t,n)=>{e=n.nmd(e);const r=n(1017).join(__dirname,"keytar.node");try{global.process.dlopen(e,r)}catch(e){throw new Error("Cannot open "+r+": "+e)}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3822:(e,t,n)=>{"use strict";n.r(t)},4281:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,s,a,l;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var c=("number"!=typeof l&&(l=0),l+".".length>(a=e).length||-1===a.indexOf(".",l)?"argument":"property");s='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(r(t,"type"))}return s+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},6753:(e,t,n)=>{"use strict";var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n(9481),o=n(4229);n(5717)(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var l=s[a];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},2725:(e,t,n)=>{"use strict";e.exports=i;var r=n(4605);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(5717)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},9481:(e,t,n)=>{"use strict";var r;e.exports=k,k.ReadableState=E,n(2361).EventEmitter;var i,o=function(e,t){return e.listeners(t).length},s=n(2503),a=n(4300).Buffer,l=global.Uint8Array||function(){},c=n(3837);i=c&&c.debuglog?c.debuglog("stream"):function(){};var u,h,p,d=n(7327),m=n(1195),f=n(2457).getHighWaterMark,g=n(4281).q,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(5717)(k,s);var C=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function E(e,t,i){r=r||n(6753),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=f(this,e,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=n(2553).s),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function k(e){if(r=r||n(6753),!(this instanceof k))return new k(e);var t=this instanceof r;this._readableState=new E(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function R(e,t,n,r,o){i("readableAddChunk",t);var s,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?A(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}(e,c);else if(o||(s=function(e,t){var n,r;return r=t,a.isBuffer(r)||r instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(c,t)),s)C(e,s);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)c.endEmitted?C(e,new v):x(e,c,t,!0);else if(c.ended)C(e,new b);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?x(e,c,t,!1):I(e,c)):x(e,c,t,!1)}else r||(c.reading=!1,I(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function x(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&A(e)),I(e,t)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),k.prototype.destroy=m.destroy,k.prototype._undestroy=m.undestroy,k.prototype._destroy=function(e,t){t(e)},k.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),R(this,e,t,!1,n)},k.prototype.unshift=function(e){return R(this,e,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(e){u||(u=n(2553).s);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function D(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(P,e))}function P(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function I(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(_,e,t))}function _(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(i("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){i("readable nexttick read 0"),e.read(0)}function M(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(H,t,e))}function H(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}k.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return i("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):A(this),null;if(0===(e=D(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,o=t.needReadable;return i("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&i("length less than watermark",o=!0),t.ended||t.reading?i("reading or ended",o=!1):o&&(i("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=D(n,t))),null===(r=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},k.prototype._read=function(e){C(this,new w("_read()"))},k.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,t);var s=t&&!1===t.end||e===process.stdout||e===process.stderr?m:a;function a(){i("onend"),e.end()}r.endEmitted?process.nextTick(s):n.once("end",s),e.on("unpipe",(function t(o,s){i("onunpipe"),o===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,i("cleanup"),e.removeListener("close",p),e.removeListener("finish",d),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",t),n.removeListener("end",a),n.removeListener("end",m),n.removeListener("data",u),c=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;i("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,B(e))}}(n);e.on("drain",l);var c=!1;function u(t){i("ondata");var o=e.write(t);i("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==U(r.pipes,e))&&!c&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(t){i("onerror",t),m(),e.removeListener("error",h),0===o(e,"error")&&C(e,t)}function p(){e.removeListener("finish",d),m()}function d(){i("onfinish"),e.removeListener("close",p),m()}function m(){i("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",h),e.once("close",p),e.once("finish",d),e.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),e},k.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},k.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?A(this):r.reading||process.nextTick(O,this))),n},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(N,this),n},k.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(N,this),t},k.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(M,e,t))}(this,e)),e.paused=!1,this},k.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var o in e.on("end",(function(){if(i("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){i("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(t.push(o)||(r=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<S.length;s++)e.on(S[s],this.emit.bind(this,S[s]));return this._read=function(t){i("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(5850)),h(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),k._fromList=F,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(e,t){return void 0===p&&(p=n(5167)),p(k,e,t)})},4605:(e,t,n)=>{"use strict";e.exports=u;var r=n(4281).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(6753);function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,n){p(e,t,n)}))}function p(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(5717)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new i("_transform()"))},u.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},4229:(e,t,n)=>{"use strict";function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=k,k.WritableState=E;var o,s={deprecate:n(4927)},a=n(2503),l=n(4300).Buffer,c=global.Uint8Array||function(){},u=n(1195),h=n(2457).getHighWaterMark,p=n(4281).q,d=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,f=p.ERR_MULTIPLE_CALLBACK,g=p.ERR_STREAM_CANNOT_PIPE,y=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,v=p.ERR_UNKNOWN_ENCODING,C=u.errorOrDestroy;function S(){}function E(e,t,o){i=i||n(6753),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new f;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(process.nextTick(i,r),process.nextTick(P,e,t),e._writableState.errorEmitted=!0,C(e,r)):(i(r),e._writableState.errorEmitted=!0,C(e,r),P(e,t))}(e,n,r,t,i);else{var o=D(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),r?process.nextTick(x,e,n,o,i):x(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function k(e){var t=this instanceof(i=i||n(6753));if(!t&&!o.call(k,this))return new k(e);this._writableState=new E(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function R(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),P(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var a=0,l=!0;n;)o[a]=n,n.isBuf||(l=!1),n=n.next,a+=1;o.allBuffers=l,R(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(R(e,t,!1,t.objectMode?1:c.length,c,u,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final((function(n){t.pendingcb--,n&&C(e,n),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var n=D(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(A,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(5717)(k,a),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===k&&e&&e._writableState instanceof E}})):o=function(e){return e instanceof this},k.prototype.pipe=function(){C(this,new g)},k.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,l.isBuffer(r)||r instanceof c);return s&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=S),i.ending?function(e,t){var n=new w;C(e,n),process.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i;return null===n?i=new b:"string"==typeof n||t.objectMode||(i=new d("chunk",["string","Buffer"],n)),!i||(C(e,i),process.nextTick(r,i),!1)}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else R(e,t,!1,a,r,i,o);return c}(this,i,s,e,t,n)),o},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},k.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(e,t,n){n(new m("_write()"))},k.prototype._writev=null,k.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),k.prototype.destroy=u.destroy,k.prototype._undestroy=u.undestroy,k.prototype._destroy=function(e,t){t(e)}},5850:(e,t,n)=>{"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(8610),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function d(e,t){return{value:e,done:t}}function m(e){var t=e[s];if(null!==t){var n=e[p].read();null!==n&&(e[u]=null,e[s]=null,e[a]=null,t(d(n,!1)))}}function f(e){process.nextTick(m,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(r={get stream(){return this[p]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(void 0,!0));if(this[p].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[l]?n(e[l]):t(d(void 0,!0))}))}));var n,r=this[u];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[c]?n(d(void 0,!0)):t[h](n,r)}),r)}}(r,this));else{var i=this[p].read();if(null!==i)return Promise.resolve(d(i,!1));n=new Promise(this[h])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[p].destroy(null,(function(e){e?n(e):t(d(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(y,(i(t={},p,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var r=n[p].read();r?(n[u]=null,n[s]=null,n[a]=null,e(d(r,!1))):(n[s]=e,n[a]=t)},writable:!0}),t));return n[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[u]=null,n[s]=null,n[a]=null,t(e)),void(n[l]=e)}var r=n[s];null!==r&&(n[u]=null,n[s]=null,n[a]=null,r(d(void 0,!0))),n[c]=!0})),e.on("readable",f.bind(null,n)),n}},7327:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=n(4300).Buffer,a=n(3837).inspect,l=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,r,i=s.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,s.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&o(t.prototype,n),e}()},1195:e=>{"use strict";function t(e,t){r(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,e)):process.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(n,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):i?(process.nextTick(n,o),i(e)):process.nextTick(n,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,n)=>{"use strict";var r=n(4281).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){a=!1,c=!0,s||o.call(t)},h=t._readableState&&t._readableState.endEmitted,p=function(){s=!1,h=!0,a||o.call(t)},d=function(e){o.call(t,e)},m=function(){var e;return s&&!h?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!c?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},f=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",m),t.req?f():t.on("request",f)):a&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",p),t.on("finish",u),!1!==n.error&&t.on("error",d),t.on("close",m),function(){t.removeListener("complete",u),t.removeListener("abort",m),t.removeListener("request",f),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",p),t.removeListener("error",d),t.removeListener("close",m)}}},5167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},9946:(e,t,n)=>{"use strict";var r,i=n(4281).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function l(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===r&&(r=n(8610)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var l=!1;return function(t){if(!a&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}function c(e){e()}function u(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var s=t.map((function(e,n){var o=n<t.length-1;return l(e,o,n>0,(function(e){r||(r=e),e&&s.forEach(c),o||(s.forEach(c),i(r))}))}));return t.reduce(u)}},2457:(e,t,n)=>{"use strict";var r=n(4281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},2503:(e,t,n)=>{e.exports=n(2361).EventEmitter},8473:(e,t,n)=>{(t=e.exports=n(9481)).Stream=t,t.Readable=t,t.Writable=n(4229),t.Duplex=n(6753),t.Transform=n(4605),t.PassThrough=n(2725),t.finished=n(8610),t.pipeline=n(9946)},9509:(e,t,n)=>{var r=n(4300),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},861:(e,t,n)=>{"use strict";const{Transform:r}=n(8473),{StringDecoder:i}=n(1576),o=Symbol("last"),s=Symbol("decoder");function a(e,t,n){var r;if(this.overflow){if(1===(r=this[s].write(e).split(this.matcher)).length)return n();r.shift(),this.overflow=!1}else this[o]+=this[s].write(e),r=this[o].split(this.matcher);this[o]=r.pop();for(var i=0;i<r.length;i++)try{c(this,this.mapper(r[i]))}catch(e){return n(e)}if(this.overflow=this[o].length>this.maxLength,this.overflow&&!this.skipOverflow)return n(new Error("maximum buffer reached"));n()}function l(e){if(this[o]+=this[s].end(),this[o])try{c(this,this.mapper(this[o]))}catch(t){return e(t)}e()}function c(e,t){void 0!==t&&e.push(t)}function u(e){return e}e.exports=function(e,t,n){switch(e=e||/\r?\n/,t=t||u,n=n||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||(n=e,e=/\r?\n/);break;case 2:"function"==typeof e?(n=t,t=e,e=/\r?\n/):"object"==typeof t&&(n=t,t=u)}(n=Object.assign({},n)).transform=a,n.flush=l,n.readableObjectMode=!0;const c=new r(n);return c[o]="",c[s]=new i("utf8"),c.matcher=e,c.mapper=t,c.maxLength=n.maxLength,c.skipOverflow=n.skipOverflow,c.overflow=!1,c}},2553:(e,t,n)=>{"use strict";var r=n(9509).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},858:()=>{"use strict";const e=document.createElement("div");e.style.setProperty("visibility","hidden"),e.style.setProperty("position","absolute");const t=["--font-size","--font-size-sm","--font-size-md","--font-size-lg","--font-size-xl","--font-size-xxl","--font-size-xs"];for(const n of t){const t=document.createElement("span");t.style.setProperty("font-size",`var(${n}`),t.style.setProperty("font-family","Arial","important"),t.textContent="🤦🏿‍♀️",e.appendChild(t)}document.body.appendChild(e),e.offsetHeight.toString(),document.body.removeChild(e)},8156:(e,t,n)=>{"use strict";n.r(t),n.d(t,{measure:()=>a,start:()=>o,stop:()=>s});let r=!1,i=0;function o(){r=!0}function s(){r=!1}async function a(e,t){const n=++i,o=performance&&performance.now?performance.now():null;!function(e,t){if(!r)return;const n=`${e}::${t}`;performance.mark(n)}(n,e);try{return await t()}finally{if(o){const t=performance.now()-o;if(t>1e3){const n=(t/1e3).toFixed(3);log.info(`Executing ${e} (took ${n}s)`)}}!function(e,t){if(!r)return;const n=`${e}::${t}`,i=t;performance.measure(i,n),performance.clearMarks(n),performance.clearMeasures(i)}(n,e)}}},4927:e=>{function t(e){try{if(!global.localStorage)return!1}catch(e){return!1}var t=global.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,n){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)}}},4793:(e,t,n)=>{"use strict";e.exports=n.p+"a7b45a45d471743a8d54.cmd"},9491:e=>{"use strict";e.exports=require("assert")},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},8188:e=>{"use strict";e.exports=require("module")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},7282:e=>{"use strict";e.exports=require("process")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},9512:e=>{"use strict";e.exports=require("timers")},3837:e=>{"use strict";e.exports=require("util")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})();var r={};(()=>{"use strict";n.r(r);var e=n(1017),t=n(7147),i=n(9764);const o=require("url"),s=["renderer.js","main.js"];function a(n){if(!s.some((e=>n.endsWith(e))))return null;n.startsWith("file://")&&(n=(0,o.fileURLToPath)(n));const r=`${n}.map`;if(!t.existsSync(r))return null;try{const n=t.readFileSync(r,"utf8");return{url:e.basename(r),map:n}}catch(e){return null}}const l=new WeakMap;let c;function u(e,t){return l.set(e,t),e+t.map((e=>`\n    at ${e}`)).join("")}function h(e){return{name:e.name,message:e.message,stack:p(e)}}function p(e){let t=l.get(e);return t||((e.stack||"").toString(),t=l.get(e)),t?c(e,t):e.stack}function d(e,t){return t?function(e,t){return(e=h(e)).stack?t?`${t}\n${e.stack}`:e.stack.trim():t?`${t}\n${e.name}: ${e.message}`:`${e.name}: ${e.message}`}(t,e):e}const m=require("electron");function f(e,...t){return m.ipcRenderer.sendSync(e,...t)}function g(e,t){m.ipcRenderer.on(e,t)}const y=require("fs/promises");var b=n(2081);const w=(0,n(3837).promisify)(b.execFile);var v=n(6539),C=n.n(v);const S=e=>(0,y.access)(e).then(C()(!0),C()(!1));function E(e,t){return(...n)=>(n=n.length!==t?n.slice(0,t):n,function(e,...t){return m.ipcRenderer.invoke(e,...t)}(e,...n))}function k(e,t){return(...n)=>{n=n.length!==t?n.slice(0,t):n,function(e,...t){m.ipcRenderer.send(e,...t)}(e,...n)}}const R=k("select-all-window-contents",0),x=k("update-menu-state",1),T=k("renderer-ready",1),D=k("execute-menu-item-by-id",1),A=E("is-window-focused",0),P=k("focus-window",0),I=E("show-item-in-folder",1),_=k("unsafe-open-directory",1),N=E("open-external",1),O=E("move-to-trash",1),M=E("get-current-window-state",0),B=E("get-current-window-zoom-factor",0),F=(k("set-window-zoom-factor",1),E("check-for-updates",1)),L=k("quit-and-install-updates",0),H=k("quit-app",0),U=k("set-native-theme-source",1),W=E("should-use-dark-colors",0),$=k("minimize-window",0),z=k("maximize-window",0),q=k("unmaximize-window",0),j=(k("close-window",0),E("is-window-maximized",0)),G=E("get-apple-action-on-double-click",0),V=k("show-certificate-trust-dialog",2),K=E("get-path",1),Y=E("get-app-architecture",0),X=E("get-app-path",0),Q=E("is-running-under-arm64-translation",0),Z=E("move-to-applications-folder",0),J=k("get-app-menu",0),ee=E("show-contextual-menu",2),te=k("update-preferred-app-menu-item-labels",1);function ne(e){return{message:e.message||`${e}`,name:e.name||`${e.name}`,stack:e.stack||void 0}}const re=k("uncaught-exception",1),ie=k("send-error-report",3),oe=k("update-accounts",1),se=E("resolve-proxy",1),ae=E("is-in-application-folder",0),le=E("show-save-dialog",1),ce=E("show-open-dialog",1),ue=E("save-guid",1),he=E("get-guid",0),pe=E("show-notification",3),de=E("get-notifications-permission",0),me=E("request-notifications-permission",0),fe=global,ge=k("log",2);function ye(e,t,n){ge(e,d(`[ui] ${t}`,n))}fe.log={error(e,t){ye("error",e,t),console.error(d(e,t))},warn(e,t){ye("warn",e,t),console.warn(d(e,t))},info(e,t){ye("info",e,t),console.info(d(e,t))},debug(e,t){ye("debug",e,t),console.debug(d(e,t))}};var be=n(6826),we=n.n(be),ve=n(2623),Ce=n.n(ve);function Se(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Ee(){return Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function ke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}const Re=we().createContext(null);function xe(e,t){var n=Object.create(null);return e&&be.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,be.isValidElement)(e)?t(e):e}(e)})),n}function Te(e,t,n){return null!=n[t]?n[t]:e.props[t]}function De(e,t,n){var r=xe(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var s in e)s in t?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];a[i[l][r]]=n(c)}a[l]=n(l)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(t,r);return Object.keys(i).forEach((function(o){var s=i[o];if((0,be.isValidElement)(s)){var a=o in t,l=o in r,c=t[o],u=(0,be.isValidElement)(c)&&!c.props.in;!l||a&&!u?l||!a||u?l&&a&&(0,be.isValidElement)(c)&&(i[o]=(0,be.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:Te(s,"exit",e),enter:Te(s,"enter",e)})):i[o]=(0,be.cloneElement)(s,{in:!1}):i[o]=(0,be.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:Te(s,"exit",e),enter:Te(s,"enter",e)})}})),i}var Ae=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Pe=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}ke(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,xe(n.children,(function(e){return(0,be.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:Te(e,"appear",n),enter:Te(e,"enter",n),exit:Te(e,"exit",n)})}))):De(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=xe(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Ee({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Se(e,["component","childFactory"]),i=this.state.contextValue,o=Ae(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?we().createElement(Re.Provider,{value:i},o):we().createElement(Re.Provider,{value:i},we().createElement(t,r,o))},t}(we().Component);Pe.propTypes={},Pe.defaultProps={component:"div",childFactory:function(e){return e}};const Ie=Pe;function _e(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Ne="unmounted",Oe="exited",Me="entering",Be="entered",Fe="exiting",Le=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Oe,r.appearStatus=Me):i=Be:i=t.unmountOnExit||t.mountOnEnter?Ne:Oe,r.state={status:i},r.nextCallback=null,r}ke(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Ne?{status:Oe}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Me&&n!==Be&&(t=Me):n!==Me&&n!==Be||(t=Fe)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===Me?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===Oe&&this.setState({status:Ne})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Ce().findDOMNode(this),r],o=i[0],s=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;e||n?(this.props.onEnter(o,s),this.safeSetState({status:Me},(function(){t.props.onEntering(o,s),t.onTransitionEnd(l,(function(){t.safeSetState({status:Be},(function(){t.props.onEntered(o,s)}))}))}))):this.safeSetState({status:Be},(function(){t.props.onEntered(o)}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Ce().findDOMNode(this);t?(this.props.onExit(r),this.safeSetState({status:Fe},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Oe},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Oe},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Ce().findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],s=i[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===Ne)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Se(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return we().createElement(Re.Provider,{value:null},"function"==typeof n?n(e,r):we().cloneElement(we().Children.only(n),r))},t}(we().Component);function He(){}Le.contextType=Re,Le.propTypes={},Le.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:He,onEntering:He,onEntered:He,onExit:He,onExiting:He,onExited:He},Le.UNMOUNTED=Ne,Le.EXITED=Oe,Le.ENTERING=Me,Le.ENTERED=Be,Le.EXITING=Fe;const Ue=Le;var We=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"==typeof n.className?n.className=_e(n.className,r):n.setAttribute("class",_e(n.className&&n.className.baseVal||"",r)));var n,r}))},$e=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,i=r?(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}ke(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&We(e,r),i&&We(e,i),o&&We(e,o)},n.render=function(){var e=this.props,t=(e.classNames,Se(e,["classNames"]));return we().createElement(Ue,Ee({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(we().Component);$e.defaultProps={classNames:""},$e.propTypes={};const ze=$e;var qe,je,Ge,Ve,Ke,Ye;function Xe(e){return"merge"===e.kind}function Qe(e){return"rebase"===e.kind}function Ze(e){return"cherryPick"===e.kind}function Je(e){throw new Error(e)}function et(e,t){throw new Error(t)}function tt(e,t){return null==t?Je(e):t}function nt(e,t){if(null==e)return Je(t)}!function(e){e[e.Repository=0]="Repository",e[e.CloningRepository=1]="CloningRepository",e[e.MissingRepository=2]="MissingRepository"}(qe||(qe={})),function(e){e[e.Repository=0]="Repository",e[e.Branch=1]="Branch",e[e.AppMenu=2]="AppMenu",e[e.AddMenu=3]="AddMenu",e[e.PushPull=4]="PushPull"}(je||(je={})),function(e){e[e.Changes=0]="Changes",e[e.History=1]="History"}(Ge||(Ge={})),function(e){e.WorkingDirectory="WorkingDirectory",e.Stash="Stash"}(Ve||(Ve={})),function(e){e.History="History",e.Compare="Compare"}(Ke||(Ke={})),function(e){e.Ahead="Ahead",e.Behind="Behind"}(Ye||(Ye={}));const rt={moveItemToTrash:O,beep:m.shell.beep,openExternal:N,showItemInFolder:e=>S(e).then((()=>I(e))).catch((t=>log.error(`Unable show item in folder '${e}'`,t))),showFolderContents:async function(e){const t=await(0,y.stat)(e).catch((t=>(log.error(`Unable to retrieve file information for ${e}`,t),null)));if(!t)return;if(!t.isDirectory())return log.error(`Trying to get the folder contents of a non-folder at '${e}'`),void await I(e);const n=await async function(e){const{stdout:t}=await w("mdls",["-name","kMDItemContentType","-name","kMDItemContentTypeTree",e]);return["com.apple.application-bundle","com.apple.application","public.executable"].some((e=>t.includes(`"${e}"`)))}(e).catch((t=>(log.error(`Failed to load metadata for path '${e}'`,t),!0)));n?(log.info(`Preventing direct open of path '${e}' as it appears to be an application bundle`),await I(e)):_(e)},openPath:m.shell.openPath};function it(t,n){const r=e.join(t.path,n);return rt.showItemInFolder(r)}var ot,st=n(1391);!function(e){e[e.Push=1]="Push",e[e.Pull=2]="Pull",e[e.Fetch=3]="Fetch",e[e.Clone=4]="Clone",e[e.Checkout=5]="Checkout",e[e.Merge=6]="Merge",e[e.Rebase=7]="Rebase",e[e.CherryPick=8]="CherryPick",e[e.CreateBranchForCherryPick=9]="CreateBranchForCherryPick",e[e.Squash=10]="Squash",e[e.Reorder=11]="Reorder",e[e.DiscardChanges=12]="DiscardChanges"}(ot||(ot={}));class at extends Error{metadata;underlyingError;constructor(e,t){super(e.message),this.name=e.name,this.stack=e.stack,this.underlyingError=e,this.metadata=t}}class lt extends at{constructor(e,t,n){super(e,{gitContext:{kind:"checkout",branchToCheckout:n},retryAction:{type:ot.Checkout,branch:n,repository:t},repository:t})}}class ct extends at{constructor(e,t,n){super(e,{retryAction:{type:ot.DiscardChanges,files:n,repository:t}})}}var ut=n(7891);let ht=null,pt=null;async function dt(){return ht||(ht=await X()),ht}var mt=n(2878),ft=n.n(mt),gt=n(4333),yt=n.n(gt);const bt=ft()(Intl.DateTimeFormat,{cache:new(yt())({maxSize:100}),cacheKey:(...e)=>JSON.stringify(e)}),wt=(e,t)=>isNaN(e.valueOf())?"Invalid date":bt("en-US",t).format(e),vt={year:31536e6,years:31536e6,day:864e5,days:864e5,hour:36e5,hours:36e5,minute:6e4,minutes:6e4,second:1e3,seconds:1e3},Ct=(e,t)=>function(e,t,n){const r=e.valueOf()+t*vt[n];return"number"==typeof e?r:new Date(r)}(Date.now(),e,t),St=(...t)=>(0,o.pathToFileURL)(e.resolve(...t)).toString();const Et=/^\[([a-z]{1,})\]\s((.|\n)*)/i;function kt(e){return null!=e}function Rt(e){const t=e.notes.map((e=>function(e){const t=e.trim(),n=Et.exec(t);if(null===n)return log.debug(`[ReleaseNotes] unable to convert text into entry: ${e}`),null;const r=n[1].toLowerCase(),i=n[2];return"new"===r||"fixed"===r||"improved"===r||"added"===r||"pretext"===r||"removed"===r?{kind:r,message:i}:(log.debug(`[ReleaseNotes] kind ${r} was found but is not a valid entry`),{kind:"other",message:i})}(e))).filter(kt),n=t.filter((e=>"new"===e.kind||"added"===e.kind||"improved"===e.kind)),r=t.filter((e=>"fixed"===e.kind)),i=t.filter((e=>"removed"===e.kind||"other"===e.kind)),o=t.filter((e=>e.message.includes(" Thanks @"))),s=t.filter((e=>"pretext"===e.kind));return{latestVersion:e.version,datePublished:wt(new Date(e.pub_date),{dateStyle:"long"}),pretext:s,enhancements:n,bugfixes:r,other:i,thankYous:o}}async function xt(e){const t=new URL("https://central.github.com/deployments/desktop/desktop/changelog.json");void 0!==e&&t.searchParams.set("limit",e.toString());const n=await fetch(t.toString());return n.ok?await n.json():[]}async function Tt(e){const t=await xt(),n=new ut.SemVer(e??"3.3.5"),r=t.filter((e=>ut.gt(new ut.SemVer(e.version),n)&&new Date(e.pub_date).getTime()>Ct(-90,"days")));return r.length>0?r.map(Rt):[Rt(t[0])]}function Dt(e,t){return Object.values(e).find((e=>e===t))}function At(e,t){const n=localStorage.getItem(e);return null===n?t:"1"===n||"true"===n||"0"!==n&&"false"!==n&&t}function Pt(e,t){localStorage.setItem(e,t?"1":"0")}function It(e,t){const n=localStorage.getItem(e);if(null===n||0===n.length)return t;const r=parseInt(n,10);return isNaN(r)?t:r}function _t(e,t){localStorage.setItem(e,t.toString())}function Nt(e){return(localStorage.getItem(e)||"").split(Mt).map(parseFloat).filter((e=>!isNaN(e)))}function Ot(e,t){localStorage.setItem(e,t.join(Mt))}St(__dirname,"static/release-note-header-left.svg"),St(__dirname,"static/release-note-header-right.svg");const Mt=",";function Bt(e,t){const n=localStorage.getItem(e);return null===n?void 0:Dt(t,n)}function Ft(){return"1"===process.env.GITHUB_DESKTOP_PREVIEW_FEATURES}function Lt(){return Ft()||!1}function Ht(){return Lt()}const Ut=Lt;function Wt(){return Lt()}const $t=Lt,zt="stats-guid";let qt=null;async function jt(){return qt=qt??await he(),qt}const Gt="last-successful-update-check",Vt="version-of-last-showcase";var Kt;!function(e){e[e.CheckingForUpdates=0]="CheckingForUpdates",e[e.UpdateAvailable=1]="UpdateAvailable",e[e.UpdateNotAvailable=2]="UpdateNotAvailable",e[e.UpdateReady=3]="UpdateReady",e[e.UpdateNotChecked=4]="UpdateNotChecked"}(Kt||(Kt={}));const Yt=new class{emitter=new st.Emitter;status=Kt.UpdateNotChecked;lastSuccessfulCheck=null;newReleases=null;isX64ToARM64ImmediateAutoUpdate=!1;userInitiatedUpdate=!0;constructor(){const e=It(Gt,0);e>0&&(this.lastSuccessfulCheck=new Date(e)),g("auto-updater-error",this.onAutoUpdaterError),g("auto-updater-checking-for-update",this.onCheckingForUpdate),g("auto-updater-update-available",this.onUpdateAvailable),function(e){g("auto-updater-update-not-available",e)}(this.onUpdateNotAvailable),function(e){g("auto-updater-update-downloaded",e)}(this.onUpdateDownloaded)}touchLastChecked(){const e=new Date;this.lastSuccessfulCheck=e,_t(Gt,e.getTime())}onAutoUpdaterError=(e,t)=>{this.status=Kt.UpdateNotAvailable,this.emitError(t)};onCheckingForUpdate=()=>{this.status=Kt.CheckingForUpdates,this.emitDidChange()};onUpdateAvailable=()=>{this.touchLastChecked(),this.status=Kt.UpdateAvailable,this.emitDidChange()};onUpdateNotAvailable=async()=>{this.newReleases=await Tt(),this.touchLastChecked(),this.status=Kt.UpdateNotAvailable,this.emitDidChange()};onUpdateDownloaded=async()=>{this.newReleases=await Tt(),this.isX64ToARM64ImmediateAutoUpdate=this.supportsImmediateUpdateFromEmulatedX64ToARM64()&&null!==this.newReleases&&1===this.newReleases.length&&"3.3.5"===this.newReleases[0].latestVersion&&await Q(),this.status=Kt.UpdateReady,this.emitDidChange()};supportsImmediateUpdateFromEmulatedX64ToARM64(){return!0}onDidChange(e){return this.emitter.on("did-change",e)}emitDidChange(){this.emitter.emit("did-change",this.state)}onError(e){return this.emitter.on("error",e)}emitError(e){const t=new at(e,{backgroundTask:!this.userInitiatedUpdate});this.emitter.emit("error",t)}get state(){return{status:this.status,lastSuccessfulCheck:this.lastSuccessfulCheck,newReleases:this.newReleases,isX64ToARM64ImmediateAutoUpdate:this.isX64ToARM64ImmediateAutoUpdate}}async checkForUpdates(e,t){if(this.status===Kt.UpdateReady)return;const n=await this.getUpdatesUrl(t);if(null===n)return;this.userInitiatedUpdate=!e;const r=await F(n);void 0!==r&&this.emitError(r)}async getUpdatesUrl(e){let t=null;try{t=new URL("https://central.github.com/api/deployments/desktop/desktop/latest?version=3.3.5&env=production")}catch(e){return log.error("Error parsing updates url",e),"https://central.github.com/api/deployments/desktop/desktop/latest?version=3.3.5&env=production"}return t.searchParams.set("guid",await jt()),e&&t.searchParams.set("skipGuidCheck","1"),!0===await Q()&&(t.pathname=t.pathname.replace(/\/desktop\/desktop\/(x64\/)?latest/,"/desktop/desktop/arm64/latest"),this.supportsImmediateUpdateFromEmulatedX64ToARM64()&&t.searchParams.set("version","0.0.64")),t.toString()}quitAndInstallUpdate(){f("will-quit"),L()}async isUpdateShowcase(){if(null===this.newReleases)return!1;const e=localStorage.getItem(Vt);if(null!==e){const t=new ut.SemVer(e),n=new ut.SemVer(this.newReleases[0].latestVersion);if((0,ut.gte)(t,n))return!1}return this.newReleases.filter((e=>new Date(e.datePublished).getTime()>Ct(-15,"days"))).some((e=>e.pretext.length>0))}setIsx64ToARM64ImmediateAutoUpdate(e){}};var Xt;!function(e){e[e.BackgroundTask=0]="BackgroundTask",e[e.UserInitiatedTask=1]="UserInitiatedTask"}(Xt||(Xt={}));const Qt=function(e,t,n){const r=()=>At("features/should-render-application-menu",!1);{const e=r();return()=>e}}();var Zt,Jt=n(2037);function en(e,t){return e.endpoint===t.endpoint&&e.id===t.id}class tn{login;endpoint;token;emails;avatarURL;id;name;plan;static anonymous(){return new tn("",Qn(),"",[],"",-1,"","free")}constructor(e,t,n,r,i,o,s,a){this.login=e,this.endpoint=t,this.token=n,this.emails=r,this.avatarURL=i,this.id=o,this.name=s,this.plan=a}withToken(e){return new tn(this.login,this.endpoint,e,this.emails,this.avatarURL,this.id,this.name,this.plan)}get friendlyName(){return""!==this.name?this.name:this.login}}class nn extends Error{apiError;responseStatus;constructor(e,t){let n;if(t&&t.message){n=t.message;const e=t.errors,r=e&&e.map((e=>e.message)).join(", ");r&&(n=`${n} (${r})`)}else n=`API error ${e.url}: ${e.statusText} (${e.status})`;super(n),this.responseStatus=e.status,this.apiError=t}}async function rn(e){try{return await e.json()}catch(t){const n=e.headers.get("Content-Length")||"(missing)",r=e.headers.get("X-GitHub-Request-Id")||"(missing)";throw log.warn(`deserialize: invalid JSON found at '${e.url}' - status: ${e.status}, length: '${n}' id: '${r}'`,t),t}}function on(e,t,n,r,i,s,a=!1){const l=function(e,t){let n="/"===t[0]?t.substring(1):t;n.startsWith("api/v3/")&&(n=n.substring(7));const r=e.endsWith("/")?e:`${e}/`;return new o.URL(n,r).toString()}(e,r);let c={Accept:"application/vnd.github.v3+json, application/json","Content-Type":"application/json","User-Agent":"GitHubDesktop/3.3.5 (Macintosh)"};t&&(c.Authorization=`token ${t}`),c={...c,...s};const u={headers:c,method:n,body:JSON.stringify(i)};return a&&(u.cache="reload"),fetch(l,u)}async function sn(e){if(e.ok)return rn(e);{let t;try{t=await rn(e)}catch(t){throw new nn(e,null)}throw new nn(e,t)}}function an(e,t){const n=Object.keys(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&");return n.length?-1===e.indexOf("?")?`${e}?${n}`:`${e}&${n}`:e}function ln(e){return e===Zt.Sms?"We just sent you a message via SMS with your authentication code. Enter the code in the form below to verify your identity.":"Open the two-factor authentication app on your device to view your authentication code and verify your identity."}!function(e){e[e.Sms=0]="Sms",e[e.App=1]="App"}(Zt||(Zt={}));const cn=require("crypto");var un=n(4790),hn=n.n(un);function pn(e){if("undefined"!=typeof window&&window.crypto){const t=new Uint8Array(e);return crypto.getRandomValues(t),t}return(0,cn.randomBytes)(e)}function dn(){return hn()({random:pn(16)})}var mn=n(4515),fn=n.n(mn);const gn=new ut.SemVer("3.1.0"),yn=new ut.SemVer("3.2.0"),bn=new Map,wn=new Map,vn=e=>`endpoint-version:${e}`,Cn=e=>e===Qn(),Sn=e=>/^https:\/\/[a-z0-9-]+\.ghe\.com$/i.test(e);function En(e){const t=vn(e),n=wn.get(t);if(void 0!==n)return n;const r=localStorage.getItem(t),i=null===r?null:ut.parse(r);return null!==i&&wn.set(t,i),i}function kn(e,t,n){return!1!==e&&(!0===e?t:(nt(n,"Need to provide a version to compare against"),t&&ut.satisfies(n,e)))}const Rn=({dotcom:e,ae:t,es:n},r=En)=>i=>kn(e,Cn(i))||kn(t,Sn(i),yn)||kn(n,(e=>!Cn(e)&&!Sn(e))(i),r(i)??gn),xn=Rn({dotcom:!1,ae:">= 3.0.0",es:">= 3.0.0"}),Tn=Rn({dotcom:!0,ae:">= 3.4.0",es:">= 3.4.0"}),Dn=Rn({dotcom:!0,ae:!1,es:!1}),An=Rn({dotcom:!0,ae:!1,es:!1}),Pn=Rn({dotcom:!0,ae:!1,es:!1}),In=Rn({dotcom:!0,ae:!1,es:!1}),_n=process.env.DESKTOP_GITHUB_DOTCOM_API_ENDPOINT,Nn=process.env.DESKTOP_GITHUB_DOTCOM_HTML_URL,On=process.env.DESKTOP_GITHUB_DOTCOM_ADDITIONAL_COOKIES;void 0!==On&&(document.cookie+="; "+On);const Mn="de0e3c7e9973e1c4dd77",Bn="1273305a5fc2737c2ca2911948ba24a9d961e2a3";Mn.length&&Bn.length||log.warn("DESKTOP_OAUTH_CLIENT_ID and/or DESKTOP_OAUTH_CLIENT_SECRET is undefined. You won't be able to authenticate new users.");const Fn=["repo","user","workflow"];var Ln,Hn,Un,Wn,$n,zn;!function(e){e[e.NotModified=304]="NotModified",e[e.NotFound=404]="NotFound"}(Ln||(Ln={}));class qn extends Error{}function jn(e){const t=e.headers.get("Link");if(!t)return null;for(const e of t.split(",")){const t=e.match(/<([^>]+)>; rel="([^"]+)"/);if(t&&"next"===t[2])return o.parse(t[1]).path||null}return null}function Gn(e){const t=jn(e);if(!t)return null;const{pathname:n,query:r}=o.parse(t,!0),{per_page:i,page:s}=r,a="string"==typeof i?parseInt(i,10):NaN,l="string"==typeof s?parseInt(s,10):NaN;if(!a||!l)return t;const c=(l-1)*a,u=Math.min(100,2*a);return a!==u&&c%u==0?(r.per_page=`${u}`,r.page=""+(c/u+1),o.format({pathname:n,query:r})):t}!function(e){e.Queued="queued",e.InProgress="in_progress",e.Completed="completed"}(Hn||(Hn={})),function(e){e.ActionRequired="action_required",e.Canceled="cancelled",e.TimedOut="timed_out",e.Failure="failure",e.Neutral="neutral",e.Success="success",e.Skipped="skipped",e.Stale="stale"}(Un||(Un={})),function(e){e.Creation="creation",e.Update="update",e.RequiredDeployments="required_deployments",e.RequiredSignatures="required_signatures",e.RequiredStatusChecks="required_status_checks",e.PullRequest="pull_request",e.CommitMessagePattern="commit_message_pattern",e.CommitAuthorEmailPattern="commit_author_email_pattern",e.CommitterEmailPattern="committer_email_pattern",e.BranchNamePattern="branch_name_pattern"}(Wn||(Wn={})),function(e){e.StartsWith="starts_with",e.EndsWith="ends_with",e.Contains="contains",e.RegexMatch="regex"}($n||($n={}));class Vn{static TOKEN_INVALIDATED_EVENT="token-invalidated";static emitter=new st.Emitter;static onTokenInvalidated(e){Vn.emitter.on(Vn.TOKEN_INVALIDATED_EVENT,e)}static emitTokenInvalidated(e){Vn.emitter.emit(Vn.TOKEN_INVALIDATED_EVENT,e)}static fromAccount(e){return new Vn(e.endpoint,e.token)}endpoint;token;constructor(e,t){this.endpoint=e,this.token=t}async getAliveDesktopChannel(){try{const e=await this.request("GET","/desktop_internal/alive-channel");return await sn(e)}catch(e){return log.warn(`Alive channel request failed: ${e}`),null}}async getAliveWebSocketURL(){try{const e=await this.request("GET","/alive_internal/websocket-url");return e.status===Ln.NotFound?null:(await sn(e)).url}catch(e){throw log.warn(`Alive web socket request failed: ${e}`),e}}async fetchIssueComment(e,t,n){try{const r=await this.request("GET",`repos/${e}/${t}/issues/comments/${n}`);return r.status===Ln.NotFound?(log.warn(`fetchIssueComment: '${e}/${t}/issues/comments/${n}' returned a 404`),null):await sn(r)}catch(r){return log.warn(`fetchIssueComment: an error occurred for '${e}/${t}/issues/comments/${n}'`,r),null}}async fetchPullRequestReviewComment(e,t,n){try{const r=await this.request("GET",`repos/${e}/${t}/pulls/comments/${n}`);return r.status===Ln.NotFound?(log.warn(`fetchPullRequestReviewComment: '${e}/${t}/pulls/comments/${n}' returned a 404`),null):await sn(r)}catch(r){return log.warn(`fetchPullRequestReviewComment: an error occurred for '${e}/${t}/pulls/comments/${n}'`,r),null}}async fetchRepository(e,t){try{const n=await this.request("GET",`repos/${e}/${t}`);return n.status===Ln.NotFound?(log.warn(`fetchRepository: '${e}/${t}' returned a 404`),null):await sn(n)}catch(n){return log.warn(`fetchRepository: an error occurred for '${e}/${t}'`,n),null}}async fetchRepositoryCloneInfo(e,t,n){const r=await this.request("GET",`repos/${e}/${t}`,{reloadCache:!0});if(r.status===Ln.NotFound)return null;const i=await sn(r);return{url:"ssh"===n?i.ssh_url:i.clone_url,defaultBranch:i.default_branch}}async streamUserRepositories(e,t,n){try{const r="user/repos",i=t?`${r}?affiliation=${t}`:r;await this.fetchAll(i,{...n,onPage:t=>{e(t.filter((e=>null!==e.owner))),n?.onPage?.(t)}})}catch(e){log.warn(`streamUserRepositories: failed with endpoint ${this.endpoint}`,e)}}async fetchAccount(){try{const e=await this.request("GET","user");return await sn(e)}catch(e){throw log.warn(`fetchAccount: failed with endpoint ${this.endpoint}`,e),e}}async fetchEmails(){try{const e=await this.request("GET","user/emails"),t=await sn(e);return Array.isArray(t)?t:[]}catch(e){return log.warn(`fetchEmails: failed with endpoint ${this.endpoint}`,e),[]}}async fetchOrgs(){try{return await this.fetchAll("user/orgs")}catch(e){return log.warn(`fetchOrgs: failed with endpoint ${this.endpoint}`,e),[]}}async createRepository(e,t,n,r){try{const i=e?`orgs/${e.login}/repos`:"user/repos",o=await this.request("POST",i,{body:{name:t,description:n,private:r}});return await sn(o)}catch(t){if(t instanceof nn){if(null!==e)throw new Error(`Unable to create repository for organization '${e.login}'. Verify that the repository does not already exist and that you have permission to create a repository there.`);throw t}throw log.error(`createRepository: failed with endpoint ${this.endpoint}`,t),new Error("Unable to publish repository. Please check if you have an internet connection and try again.")}}async forkRepository(e,t){try{const n=`/repos/${e}/${t}/forks`,r=await this.request("POST",n);return await sn(r)}catch(n){throw log.error(`forkRepository: failed to fork ${e}/${t} at endpoint: ${this.endpoint}`,n),n}}async fetchIssues(e,t,n,r){const i={state:n};r&&!isNaN(r.getTime())&&(i.since=r.toISOString().replace(/\.\d{3}Z$/,"Z"));const o=an(`repos/${e}/${t}/issues`,i);try{return(await this.fetchAll(o)).filter((e=>!e.pullRequest))}catch(n){throw log.warn(`fetchIssues: failed for repository ${e}/${t}`,n),n}}async fetchAllOpenPullRequests(e,t){const n=an(`repos/${e}/${t}/pulls`,{state:"open"});try{return await this.fetchAll(n)}catch(n){throw log.warn(`failed fetching open PRs for repository ${e}/${t}`,n),n}}async fetchUpdatedPullRequests(e,t,n,r=320){const i=n.getTime(),o=an(`repos/${e}/${t}/pulls`,{state:"all",sort:"updated",direction:"desc"});try{return(await this.fetchAll(o,{perPage:10,getNextPagePath:Gn,continue(e){if(e.length>=r)throw new qn("got max pull requests, aborting");const t=e.at(-1);return void 0!==t&&Date.parse(t.updated_at)>i},suppressErrors:!1})).filter((e=>Date.parse(e.updated_at)>=i))}catch(n){throw log.warn(`failed fetching updated PRs for repository ${e}/${t}`,n),n}}async fetchPullRequest(e,t,n){try{const r=`/repos/${e}/${t}/pulls/${n}`,i=await this.request("GET",r);return await sn(i)}catch(r){throw log.warn(`failed fetching PR for ${e}/${t}/pulls/${n}`,r),r}}async fetchPullRequestReview(e,t,n,r){try{const i=`/repos/${e}/${t}/pulls/${n}/reviews/${r}`,o=await this.request("GET",i);return await sn(o)}catch(i){return log.debug(`failed fetching PR review ${r} for ${e}/${t}/pulls/${n}`,i),null}}async fetchPullRequestReviews(e,t,n){try{const r=`/repos/${e}/${t}/pulls/${n}/reviews`,i=await this.request("GET",r);return await sn(i)}catch(r){return log.debug(`failed fetching PR reviews for ${e}/${t}/pulls/${n}`,r),[]}}async fetchPullRequestReviewComments(e,t,n,r){try{const i=`/repos/${e}/${t}/pulls/${n}/reviews/${r}/comments`,o=await this.request("GET",i);return await sn(o)}catch(r){return log.debug(`failed fetching PR review comments for ${e}/${t}/pulls/${n}`,r),[]}}async fetchPullRequestComments(e,t,n){try{const r=`/repos/${e}/${t}/pulls/${n}/comments`,i=await this.request("GET",r);return await sn(i)}catch(r){return log.debug(`failed fetching PR comments for ${e}/${t}/pulls/${n}`,r),[]}}async fetchIssueComments(e,t,n){try{const r=`/repos/${e}/${t}/issues/${n}/comments`,i=await this.request("GET",r);return await sn(i)}catch(r){return log.debug(`failed fetching issue comments for ${e}/${t}/issues/${n}`,r),[]}}async fetchCombinedRefStatus(e,t,n,r=!1){const i=`repos/${e}/${t}/commits/${encodeURIComponent(n)}/status?per_page=100`,o=await this.request("GET",i,{reloadCache:r});try{return await sn(o)}catch(r){return log.debug(`Failed fetching check runs for ref ${n} (${e}/${t})`,r),null}}async fetchRefCheckRuns(e,t,n,r=!1){const i=`repos/${e}/${t}/commits/${encodeURIComponent(n)}/check-runs?per_page=100`,o=await this.request("GET",i,{customHeaders:{Accept:"application/vnd.github.antiope-preview+json"},reloadCache:r});try{return await sn(o)}catch(r){return log.debug(`Failed fetching check runs for ref ${n} (${e}/${t})`,r),null}}async fetchPRWorkflowRunsByBranchName(e,t,n){const r=`repos/${e}/${t}/actions/runs?event=pull_request&branch=${encodeURIComponent(n)}`,i=await this.request("GET",r,{customHeaders:{Accept:"application/vnd.github.antiope-preview+json"}});try{return await sn(i)}catch(r){log.debug(`Failed fetching workflow runs for ${n} (${e}/${t})`)}return null}async fetchPRActionWorkflowRunByCheckSuiteId(e,t,n){const r=`repos/${e}/${t}/actions/runs?event=pull_request&check_suite_id=${n}`,i=await this.request("GET",r,{customHeaders:{Accept:"application/vnd.github.antiope-preview+json"}});try{const e=await sn(i);if(e.workflow_runs.length>0)return e.workflow_runs[0]}catch(r){log.debug(`Failed fetching workflow runs for ${n} (${e}/${t})`)}return null}async fetchWorkflowRunJobs(e,t,n){const r=`repos/${e}/${t}/actions/runs/${n}/jobs`,i=await this.request("GET",r,{customHeaders:{Accept:"application/vnd.github.antiope-preview+json"}});try{return await sn(i)}catch(r){log.debug(`Failed fetching workflow jobs (${e}/${t}) workflow run: ${n}`)}return null}async rerequestCheckSuite(e,t,n){const r=`/repos/${e}/${t}/check-suites/${n}/rerequest`;return this.request("POST",r).then((e=>e.ok)).catch((r=>(log.debug(`Failed retry check suite id ${n} (${e}/${t})`,r),!1)))}async rerunFailedJobs(e,t,n){const r=`/repos/${e}/${t}/actions/runs/${n}/rerun-failed-jobs`;return this.request("POST",r).then((e=>e.ok)).catch((r=>(log.debug(`Failed to rerun failed workflow jobs for (${e}/${t}): ${n}`,r),!1)))}async rerunJob(e,t,n){const r=`/repos/${e}/${t}/actions/jobs/${n}/rerun`;return this.request("POST",r).then((e=>e.ok)).catch((r=>(log.debug(`Failed to rerun workflow job (${e}/${t}): ${n}`,r),!1)))}async fetchCheckSuite(e,t,n){const r=`/repos/${e}/${t}/check-suites/${n}`,i=await this.request("GET",r);try{return await sn(i)}catch(r){log.debug(`[fetchCheckSuite] Failed fetch check suite id ${n} (${e}/${t})`)}return null}async fetchPushControl(e,t,n){const r=`repos/${e}/${t}/branches/${encodeURIComponent(n)}/push_control`,i={Accept:"application/vnd.github.phandalin-preview"};try{const e=await this.request("GET",r,{customHeaders:i});return await sn(e)}catch(e){return log.info("[fetchPushControl] unable to check if branch is potentially pushable",e),{pattern:null,required_signatures:!1,required_status_checks:[],required_approving_review_count:0,required_linear_history:!1,allow_actor:!0,allow_deletions:!0,allow_force_pushes:!0}}}async fetchProtectedBranches(e,t){const n=`repos/${e}/${t}/branches?protected=true`;try{const e=await this.request("GET",n);return await sn(e)}catch(e){return log.info("[fetchProtectedBranches] unable to list protected branches",e),new Array}}async fetchRepoRulesForBranch(e,t,n){const r=`repos/${e}/${t}/rules/branches/${encodeURIComponent(n)}`;try{const e=await this.request("GET",r);return await sn(e)}catch(e){return log.info(`[fetchRepoRulesForBranch] unable to fetch repo rules for branch: ${n} | ${r}`,e),new Array}}async fetchAllRepoRulesets(e,t){const n=`repos/${e}/${t}/rulesets`;try{const e=await this.request("GET",n);return await sn(e)}catch(e){return log.info(`[fetchAllRepoRulesets] unable to fetch all repo rulesets | ${n}`,e),null}}async fetchRepoRuleset(e,t,n){const r=`repos/${e}/${t}/rulesets/${n}`;try{const e=await this.request("GET",r);return await sn(e)}catch(e){return log.info(`[fetchRepoRuleset] unable to fetch repo ruleset for ID: ${n} | ${r}`,e),null}}async fetchAll(e,t){const n=new Array,r={perPage:100,...t};let i=an(e,{per_page:`${r.perPage}`}),o=[];do{const t=await this.request("GET",i);if(!1!==r.suppressErrors&&!t.ok)return log.warn(`fetchAll: '${e}' returned a ${t.status}`),n;o=await sn(t),o&&(n.push(...o),r.onPage?.(o)),i=r.getNextPagePath?r.getNextPagePath(t):jn(t)}while(i&&(!r.continue||await r.continue(n)));return n}async request(e,t,n={}){const r=await on(this.endpoint,this.token,e,t,n.body,n.customHeaders,n.reloadCache);return 401===r.status&&r.headers.has("X-GitHub-Request-Id")&&!r.headers.has("X-GitHub-OTP")&&Vn.emitTokenInvalidated(this.endpoint),Jn(this.endpoint,r),r}async getFetchPollInterval(e,t){const n=`repos/${e}/${t}/git`;try{const e=(await this.request("HEAD",n)).headers.get("x-poll-interval");if(e){const t=parseInt(e,10);return isNaN(t)?null:t}return null}catch(n){return log.warn(`getFetchPollInterval: failed for ${e}/${t}`,n),null}}async fetchMentionables(e,t,n){const r={Accept:"application/vnd.github.jerry-maguire-preview"};void 0!==n&&(r["If-None-Match"]=n);try{const n=`repos/${e}/${t}/mentionables/users`,i=await this.request("GET",n,{customHeaders:r});if(i.status===Ln.NotFound)return log.warn(`fetchMentionables: '${n}' returned a 404`),null;if(i.status===Ln.NotModified)return null;return{users:await sn(i),etag:i.headers.get("etag")||void 0}}catch(n){return log.warn(`fetchMentionables: failed for ${e}/${t}`,n),null}}async fetchUser(e){try{const t=await this.request("GET",`users/${encodeURIComponent(e)}`);return 404===t.status?null:await sn(t)}catch(e){throw log.warn(`fetchUser: failed with endpoint ${this.endpoint}`,e),e}}}async function Kn(e,t,n,r){const i=`Basic ${Buffer.from(`${t}:${n}`,"utf8").toString("base64")}`,o=r?{"X-GitHub-OTP":r}:{},s=await async function(){let e=await fn()();return void 0===e&&(e="unknown",log.error(`getNote: unable to resolve machine username, using '${e}' as a fallback`)),`GitHub Desktop on ${e}@${Jt.hostname()}`}(),a=await on(e,null,"POST","authorizations",{scopes:Fn,client_id:Mn,client_secret:Bn,note:s,note_url:"https://desktop.github.com/",fingerprint:dn()},{Authorization:i,...o});Jn(e,a);try{const e=await sn(a);if(e){const t=e.token;if(t&&"string"==typeof t&&t.length)return{kind:zn.Authorized,token:t}}}catch(e){if(401===a.status){const e=a.headers.get("x-github-otp");if(e){const t=e.split(";");if(2===t.length)switch(t[1].trim()){case"app":return{kind:zn.TwoFactorAuthenticationRequired,type:Zt.App};case"sms":return{kind:zn.TwoFactorAuthenticationRequired,type:Zt.Sms};default:return{kind:zn.Failed,response:a}}}return{kind:zn.Failed,response:a}}const t=e instanceof nn&&e.apiError;if(t){if(403===a.status&&"This API can only be accessed with username and password Basic Auth"===t.message)return{kind:zn.PersonalAccessTokenBlocked};if(410===a.status)return{kind:zn.WebFlowRequired};if(422===a.status)if(t.errors)for(const e of t.errors){const t="oauthaccess"===e.resource.toLowerCase();if("user"===e.field.toLowerCase()&&t)return{kind:zn.UserRequiresVerification}}else if("Invalid OAuth application client_id or secret."===t.message)return{kind:zn.EnterpriseTooOld}}}return{kind:zn.Error,response:a}}async function Yn(e,t){const n=new Vn(e,t);try{const r=await n.fetchAccount(),i=await n.fetchEmails();return new tn(r.login,e,t,i,r.avatar_url,r.id,r.name||r.login,r.plan?.name)}catch(t){throw log.warn(`fetchUser: failed with endpoint ${e}`,t),t}}function Xn(e){if(void 0!==Nn)return Nn;if(e!==Qn()||_n){const t=o.parse(e);return`${t.protocol}//${t.hostname}`}return"https://github.com"}function Qn(){return _n&&_n.length>0?_n:"https://api.github.com"}function Zn(e,t){return e.find((e=>e.endpoint===t))||null}function Jn(e,t){const n=t.headers.get("x-github-enterprise-version");null!==n&&function(e,t){const n=vn(e);if(bn.get(n)!==t){const e=ut.parse(t);localStorage.setItem(n,t),bn.set(n,t),wn.set(n,e)}}(e,n)}!function(e){e[e.Authorized=0]="Authorized",e[e.Failed=1]="Failed",e[e.TwoFactorAuthenticationRequired=2]="TwoFactorAuthenticationRequired",e[e.UserRequiresVerification=3]="UserRequiresVerification",e[e.PersonalAccessTokenBlocked=4]="PersonalAccessTokenBlocked",e[e.Error=5]="Error",e[e.EnterpriseTooOld=6]="EnterpriseTooOld",e[e.WebFlowRequired=7]="WebFlowRequired"}(zn||(zn={}));const er=[{protocol:"https",regex:new RegExp("^https?://(?:.+@)?(.+)/([^/]+)/([^/]+?)(?:/|\\.git/?)?$")},{protocol:"ssh",regex:new RegExp("^git@(.+):([^/]+)/([^/]+?)(?:/|\\.git)?$")},{protocol:"ssh",regex:new RegExp("^(?:.+)@(.+\\.ghe\\.com):([^/]+)/([^/]+?)(?:/|\\.git)?$")},{protocol:"ssh",regex:new RegExp("^git:(.+)/([^/]+)/([^/]+?)(?:/|\\.git)?$")},{protocol:"ssh",regex:new RegExp("^ssh://git@(.+)/(.+)/(.+?)(?:/|\\.git)?$")}];function tr(e){for(const{protocol:t,regex:n}of er){const r=n.exec(e);if(null!==r&&r.length>=4)return{protocol:t,hostname:r[1],owner:r[2],name:r[3]}}return null}function nr(e){const t=tr(e);if(t){const{owner:e,name:n,hostname:r}=t;if(e&&n)return{owner:e,name:n,hostname:r}}const n=e.split("/");return 2===n.length&&n[0].length>0&&n[1].length>0?{owner:n[0],name:n[1],hostname:null}:null}function rr(e,t){return e<t?-1:e>t?1:0}function ir(e,t){return e<t?1:e>t?-1:0}function or(e,t){return e.toLowerCase()===t.toLowerCase()}function sr(e,t){return rr(e.toLowerCase(),t.toLowerCase())}function ar(e,t){for(const n of e){const e=Xn(n.endpoint),{hostname:r}=o.parse(e),i=tr(t);if(null!==i&&null!==r&&i.hostname.toLowerCase()===r.toLowerCase())return{name:i.name,owner:i.owner,account:n}}return null}function lr(t,n){const r=t=>e.normalize(t),i=r(n);return t.find((e=>r(e.path)===i))}function cr(e,t){return ur(e.htmlURL,t)||ur(e.cloneURL,t)}function ur(e,t){if(null==e)return!1;const n=tr(e),r=tr(t.url);return null!=r&&null!=n&&!!or(r.hostname,n.hostname)&&null!=r.owner&&null!=n.owner&&null!=r.name&&null!=n.name&&or(r.owner,n.owner)&&or(r.name,n.name)}function hr(e,t){const n=nr(e),r=nr(t);return null!==n&&null!==r&&n.hostname===r.hostname&&n.owner===r.owner&&n.name===r.name}var pr=n(7492),dr=function(e,t){return e===t};const mr=function(e,t){var n;void 0===t&&(t=dr);var r,i=[],o=!1,s=function(e,n){return t(e,i[n])};return function(){for(var t=arguments.length,a=new Array(t),l=0;l<t;l++)a[l]=arguments[l];return o&&n===this&&a.length===i.length&&a.every(s)||(r=e.apply(this,a),o=!0,n=this,i=a),r}};function fr(){return"getSystemVersion"in process?process.getSystemVersion():void 0}function gr(e){const t=fr();return void 0!==t&&(0,pr.compare)(t,e,">=")}function yr(e){const t=fr();return void 0!==t&&(0,pr.compare)(t,e,"<")}function br(){return`Mac OS ${fr()}`}const wr=mr((()=>gr("13.0")&&yr("14.0"))),vr=mr((()=>yr("10.16"))),Cr=mr((()=>gr("10.13.0"))),Sr=mr((()=>gr("10.16"))),Er=(mr((()=>!1)),mr((()=>!1)));function kr(...e){return e.join("+")}class Rr{name;owner;dbID;isPrivate;htmlURL;cloneURL;issuesEnabled;isArchived;permissions;parent;hash;constructor(e,t,n,r=null,i=null,o=null,s=null,a=null,l=null,c=null){this.name=e,this.owner=t,this.dbID=n,this.isPrivate=r,this.htmlURL=i,this.cloneURL=o,this.issuesEnabled=s,this.isArchived=a,this.permissions=l,this.parent=c,this.hash=kr(this.name,this.owner.login,this.dbID,this.isPrivate,this.htmlURL,this.cloneURL,this.issuesEnabled,this.isArchived,this.permissions,this.parent?.hash)}get endpoint(){return this.owner.endpoint}get fullName(){return`${this.owner.login}/${this.name}`}get fork(){return!!this.parent}}function xr(e){return null===e.permissions||"read"!==e.permissions}var Tr,Dr,Ar,Pr;!function(e){e.Parent="parent",e.Self="self"}(Tr||(Tr={}));class Ir{id;gitHubRepository;missing;alias;workflowPreferences;isTutorialRepository;name;mainWorkTree;hash;constructor(t,n,r,i,o=null,s={},a=!1){this.id=n,this.gitHubRepository=r,this.missing=i,this.alias=o,this.workflowPreferences=s,this.isTutorialRepository=a,this.mainWorkTree={path:t},this.name=r&&r.name||function(t){const n=e.basename(t);return 0===n.length?t:n}(t),this.hash=kr(t,this.id,r?.hash,this.missing,this.alias,this.workflowPreferences.forkContributionTarget,this.isTutorialRepository)}get path(){return this.mainWorkTree.path}}function _r(e){return e.gitHubRepository instanceof Rr}function Nr(e){return _r(e)&&null!==e.gitHubRepository.parent}function Or(e){const{gitHubRepository:t}=e;return null!==t?t.fullName:e.name}function Mr(e){return _r(e)?Br(e).htmlURL:null}function Br(e){if(!Nr(e))return e.gitHubRepository;switch(Fr(e)){case Tr.Self:return e.gitHubRepository;case Tr.Parent:return e.gitHubRepository.parent;default:return et(0,"Invalid fork contribution target")}}function Fr(e){return void 0!==e.workflowPreferences.forkContributionTarget?e.workflowPreferences.forkContributionTarget:Tr.Parent}function Lr(e){return Nr(e)&&Fr(e)===Tr.Parent}function Hr(e,t=new Map){for(const n of e.items)t.set(n.id,n),"submenuItem"===n.type&&Hr(n.menu,t);return t}function Ur(e){return"menuItem"===e.type||"submenuItem"===e.type||"checkbox"===e.type||"radio"===e.type}function Wr(e){return"separator"!==e.type&&e.enabled&&e.visible}function $r(e,t){const n=e.toLowerCase();for(const e of t)if(Ur(e)&&e.accessKey&&e.accessKey.toLowerCase()===n)return e;return null}!function(e){e[e.Accounts=0]="Accounts",e[e.Integrations=1]="Integrations",e[e.Git=2]="Git",e[e.Appearance=3]="Appearance",e[e.Notifications=4]="通知",e[e.Prompts=5]="Prompts",e[e.Advanced=6]="Advanced"}(Dr||(Dr={}));class zr{menu;openMenus;menuItemById;static fromMenu(e){const t=Hr(e);return new zr(e,[e],t)}constructor(e,t,n){this.menu=e,this.openMenus=t,this.menuItemById=n}getItemById(e){return this.menuItemById.get(e)}withMenu(e){const t=Hr(e),n=new Array;for(const r of this.openMenus){let i,o;if(r.id){const e=t.get(r.id);if(!e||"submenuItem"!==e.type)break;i=e.menu}else i=e;r.selectedItem&&(o=t.get(r.selectedItem.id)),n.push({id:i.id,type:"menu",items:i.items,selectedItem:o})}return new zr(e,n,t)}withOpenedMenu(e,t=!1){const n=this.menuItemById.get(e.id);if(!n)return this;if("submenuItem"!==n.type)throw new Error(`Attempt to open a submenu from an item of wrong type: ${n.type}`);const r=this.openMenus.findIndex((e=>-1!==e.items.indexOf(n)));if(-1===r)return this;const i=this.openMenus.slice(0,r+1);if(t){const e=n.menu.items.find(Wr);i.push({...n.menu,selectedItem:e})}else i.push(n.menu);return new zr(this.menu,i,this.menuItemById)}withClosedMenu(e){if(!e.id)return this;const t=this.openMenus.findIndex((t=>t.id===e.id));if(-1===t)return this;const n=this.openMenus.slice(0,t);return new zr(this.menu,n,this.menuItemById)}withLastMenu(e){const t=this.openMenus.findIndex((t=>t.id===e.id));if(-1===t)return this;const n=this.openMenus.slice(0,t+1);return new zr(this.menu,n,this.menuItemById)}withSelectedItem(e){const t=this.menuItemById.get(e.id);if(!t)return this;const n=this.openMenus.findIndex((e=>-1!==e.items.indexOf(t)));if(-1===n)return this;const r=this.openMenus.slice(),i=r[n];r[n]={...i,selectedItem:t};for(let e=n+1;e<r.length;e++)r[e]={...r[e],selectedItem:void 0};for(let e=n-1;e>=0;e--){const t=r[e],n=r[e+1],i=t.items.find((e=>"submenuItem"===e.type&&e.id===n.id));r[e]={...t,selectedItem:i}}return new zr(this.menu,r,this.menuItemById)}withDeselectedMenu(e){const t=this.openMenus.findIndex((t=>t.id===e.id));if(-1===t)return this;const n=this.openMenus[t],r=this.openMenus.slice();r[t]={...n,selectedItem:void 0};for(let e=t-1;e>=0;e--){const t=r[e],n=r[e+1],i=t.items.find((e=>"submenuItem"===e.type&&e.id===n.id));r[e]={...t,selectedItem:i}}return new zr(this.menu,r,this.menuItemById)}withReset(){return new zr(this.menu,[this.menu],this.menuItemById)}}!function(e){e.Unknown="Unknown",e.Unborn="Unborn",e.Detached="Detached",e.Valid="Valid"}(Ar||(Ar={})),function(e){e[e.DotCom=0]="DotCom",e[e.Enterprise=1]="Enterprise",e[e.Generic=2]="Generic"}(Pr||(Pr={}));let qr=1;class jr{path;url;id=qr++;constructor(e,t){this.path=e,this.url=t}get name(){return e.basename(this.url,".git")}get hash(){return`${this.id}+${this.path}+${this.url}`}}var Gr=n(8076),Vr=n.n(Gr);const Kr=new Set;function Yr(e){const t=`__${e}`.replace(/[^a-z0-9\-_:.]+/gi,"_");for(let e=0;e<100;e++){const n=e>0?`${t}_${e}`:t;if(!Kr.has(n))return Kr.add(n),n}return dn()}function Xr(e){Kr.delete(e)}function Qr(e,t){return e===t||e.left===t.left&&e.right===t.right&&e.top===t.top&&e.bottom===t.bottom&&e.width===t.width&&e.height===t.height}var Zr;!function(e){e.NORTH="n",e.NORTH_EAST="ne",e.EAST="e",e.SOUTH_EAST="se",e.SOUTH="s",e.SOUTH_WEST="sw",e.WEST="w",e.NORTH_WEST="nw"}(Zr||(Zr={}));class Jr extends be.Component{mouseRect=new DOMRect;mouseOverTarget=!1;mouseOverTooltip=!1;showTooltipTimeout=null;hideTooltipTimeout=null;tooltipRef=null;resizeObserver;constructor(e){super(e);const t=e.target.current;this.state={target:t,measure:!1,show:!1,targetRect:new DOMRect,hostRect:new DOMRect,windowRect:new DOMRect,tooltipRect:new DOMRect,tooltipHost:ti(t)},this.resizeObserver=new ResizeObserver((e=>{for(const t of e)if(t.target===this.tooltipRef){const e=this.tooltipRef.getBoundingClientRect();Qr(this.state.tooltipRect,e)||this.setState({tooltipRect:e})}else if(t.target===this.state.target){const e=this.state.target.getBoundingClientRect();Qr(this.state.targetRect,e)||this.setState({targetRect:e})}}))}componentDidMount(){const{target:e}=this.props;e.subscribe(this.onTargetRef),null!==e.current&&this.state.target!==e.current?this.onTargetRef(e.current):null!==this.state.target&&this.installTooltip(this.state.target)}onTargetRef=e=>{this.setState({target:e,tooltipHost:ti(e)})};onTooltipRef=e=>{if(null===e){this.state.id&&(Xr(this.state.id),this.setState({id:void 0})),this.resizeObserver.disconnect();const{tooltipRef:e}=this;null!==e&&(e.removeEventListener("mouseenter",this.onTooltipMouseEnter),e.removeEventListener("mouseleave",this.onTooltipMouseLeave))}else this.setState({tooltipRect:e.getBoundingClientRect()??new DOMRect,show:!0,measure:!1,id:this.state.id??Yr("tooltip")}),this.state.target?.dispatchEvent(new CustomEvent("tooltip-shown",{bubbles:!0})),this.resizeObserver.observe(e),!0===this.props.interactive&&(e.addEventListener("mouseenter",this.onTooltipMouseEnter),e.addEventListener("mouseleave",this.onTooltipMouseLeave));this.tooltipRef=e};onTooltipMouseEnter=e=>{this.mouseOverTooltip=!0,this.cancelHideTooltip()};onTooltipMouseLeave=e=>{this.mouseOverTooltip=!1,this.beginHideTooltip()};componentDidUpdate(e,t){const{target:n}=this.state;e.target!==this.props.target&&(e.target.unsubscribe(this.onTargetRef),this.props.target.subscribe(this.onTargetRef)),n!==t.target&&(this.removeTooltip(t.target),null!==n&&this.installTooltip(n)),this.state.show!==t.show&&(this.state.show&&!1!==this.props.accessible&&this.state.id?this.addToTargetAriaDescribedBy(n):this.removeFromTargetAriaDescribedBy(n)),e.ancestorFocused!==this.props.ancestorFocused&&this.updateBasedOnAncestorFocused()}addToTargetAriaDescribedBy(e){if(!e||!this.state.id)return;const t=e.getAttribute("aria-describedby"),n=t?t.split(" "):[];n.includes(this.state.id)||(n.push(this.state.id),e.setAttribute("aria-describedby",n.join(" ")))}removeFromTargetAriaDescribedBy(e){if(!e||!this.state.id)return;const t=e.getAttribute("aria-describedby"),n=t?t.split(" "):[],r=n.indexOf(this.state.id);-1!==r&&(n.splice(r,1),0===n.length?e.removeAttribute("aria-describedby"):e.setAttribute("aria-describedby",n.join(" ")))}updateBasedOnAncestorFocused(){const{target:e}=this.state;if(null===e)return;const{ancestorFocused:t}=this.props;!0===t?this.beginShowTooltip():!1===t&&this.beginHideTooltip()}installTooltip(e){e.addEventListener("mouseenter",this.onTargetMouseEnter),e.addEventListener("mouseleave",this.onTargetMouseLeave),e.addEventListener("mousemove",this.onTargetMouseMove),e.addEventListener("mousedown",this.onTargetMouseDown),e.addEventListener("focus",this.onTargetFocus),e.addEventListener("focusin",this.onTargetFocusIn),e.addEventListener("focusout",this.onTargetBlur),e.addEventListener("blur",this.onTargetBlur),e.addEventListener("tooltip-shown",this.onTooltipShown),e.addEventListener("tooltip-hidden",this.onTooltipHidden),e.addEventListener("click",this.onTargetClick)}removeTooltip(e){null!==e&&(e.getAttribute("aria-describedby")&&this.removeFromTargetAriaDescribedBy(e),e.removeEventListener("mouseenter",this.onTargetMouseEnter),e.removeEventListener("mouseleave",this.onTargetMouseLeave),e.removeEventListener("mousemove",this.onTargetMouseMove),e.removeEventListener("mousedown",this.onTargetMouseDown),e.removeEventListener("focus",this.onTargetFocus),e.removeEventListener("focusin",this.onTargetFocusIn),e.removeEventListener("focusout",this.onTargetBlur),e.removeEventListener("blur",this.onTargetBlur),e.removeEventListener("click",this.onTargetClick))}updateMouseRect=e=>{this.mouseRect=new DOMRect(e.clientX-10,e.clientY-10,20,20)};onTargetMouseEnter=e=>{this.updateMouseRect(e),this.mouseOverTarget=!0,this.cancelHideTooltip(),this.state.show||this.beginShowTooltip()};onTargetMouseMove=e=>{this.updateMouseRect(e)};onTargetMouseDown=e=>{this.props.isToggleTip||this.hideTooltip()};onTargetFocus=e=>{this.state.target?.matches(":focus-visible")&&!this.props.isToggleTip&&this.beginShowTooltip()};onTargetClick=e=>{this.state.show||!this.props.isToggleTip&&!this.props.openOnTargetClick||this.beginShowTooltip()};onTargetFocusIn=e=>{this.props.openOnFocus&&this.beginShowTooltip()};onTargetBlur=e=>{this.mouseOverTarget||this.mouseOverTooltip||this.beginHideTooltip()};onTooltipShown=e=>{e.target!==this.state.target&&this.state.show&&this.hideTooltip()};onTooltipHidden=e=>{e.target!==this.state.target&&this.mouseOverTarget&&this.beginShowTooltip()};beginShowTooltip(){this.cancelShowTooltip(),this.showTooltipTimeout=window.setTimeout(this.showTooltip,this.props.delay??400)}isTargetOverflowed(){const{isTargetOverflowed:e}=this.props,{target:t}=this.state;return null!==t&&(void 0===e?t.scrollWidth>t.clientWidth:"boolean"==typeof e?e:e(t))}showTooltip=()=>{this.cancelShowTooltip();const{tooltipHost:e,target:t}=this.state;null!==e&&null!==t&&(this.props.onlyWhenOverflowed&&!this.isTargetOverflowed()||this.setState({measure:!0,show:!1,targetRect:this.getTargetRect(t),hostRect:e.getBoundingClientRect(),windowRect:new DOMRect(0,0,window.innerWidth,window.innerHeight)}))};getTargetRect(e){const{direction:t,tooltipOffset:n}=this.props;return((e,t,n)=>new DOMRect(e.x+t,e.y+n,e.width,e.height))(void 0===t?this.mouseRect:e.getBoundingClientRect(),n?.x??0,n?.y??0)}cancelShowTooltip(){null!==this.showTooltipTimeout&&(clearTimeout(this.showTooltipTimeout),this.showTooltipTimeout=null)}onTargetMouseLeave=e=>{this.mouseOverTarget=!1,this.beginHideTooltip()};beginHideTooltip(){this.cancelShowTooltip(),!0===this.props.interactive&&null===this.hideTooltipTimeout?this.hideTooltipTimeout=window.setTimeout(this.hideTooltip,250):this.hideTooltip()}hideTooltip=()=>{this.cancelShowTooltip(),this.cancelHideTooltip(),this.state.show&&this.state.target?.dispatchEvent(new CustomEvent("tooltip-hidden",{bubbles:!0})),this.setState({show:!1,measure:!1})};cancelHideTooltip(){null!==this.hideTooltipTimeout&&(clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=null)}componentWillUnmount(){this.cancelShowTooltip(),this.props.target.unsubscribe(this.onTargetRef),this.removeTooltip(this.state.target),this.state.id&&Xr(this.state.id)}render(){return null===this.state.target||null===this.state.tooltipHost?null:ve.createPortal(this.renderPortal(),this.state.tooltipHost)}renderPortal(){const{show:e,measure:t}=this.state;if(!e&&!t)return null;const n=e&&!t,{targetRect:r,hostRect:i,windowRect:o,tooltipRect:s}=this.state,a=n?function(e,t,n,r){const i=e=>function(e,t){return e===t||t.top>=e.top&&t.left>=e.left&&t.bottom<=e.bottom&&t.right<=e.right}(n,ei(t,e,r));let o=new Set([Zr.NORTH,Zr.NORTH_EAST,Zr.NORTH_WEST,Zr.SOUTH,Zr.SOUTH_EAST,Zr.SOUTH_WEST,Zr.EAST,Zr.WEST]);if(void 0!==e){if(i(e))return e;e.startsWith(Zr.SOUTH)?o=new Set([Zr.SOUTH,Zr.SOUTH_EAST,Zr.SOUTH_WEST,...o]):e.startsWith(Zr.NORTH)&&(o=new Set([Zr.NORTH,Zr.NORTH_EAST,Zr.NORTH_WEST,...o])),o.delete(e)}else o=new Set([Zr.SOUTH_EAST,Zr.NORTH_EAST,...o]);for(const e of o)if(i(e))return e;return Zr.SOUTH}(this.props.direction,r,o,s):Zr.SOUTH,l=n?function(e,t,n,r){const i=ei(t,e,r);return i.x-=n.x,i.y-=n.y,{transform:`translate(${i.left}px, ${i.top}px)`}}(a,r,i,s):{visibility:"hidden",left:"0px",top:"0px"},c=Vr()("tooltip",this.props.className,{interactive:this.props.interactive,[`tooltip-${a}`]:e});return be.createElement("div",{role:"tooltip","aria-hidden":"true",className:c,id:this.state.id,style:l,ref:this.onTooltipRef,onClick:ni,onContextMenu:ni,onDoubleClick:ni,onDrag:ni,onDragEnd:ni,onDragEnter:ni,onDragExit:ni,onDragLeave:ni,onDragOver:ni,onDragStart:ni,onDrop:ni,onMouseDown:ni,onMouseEnter:ni,onMouseLeave:ni,onMouseMove:ni,onMouseOver:ni,onMouseOut:ni,onMouseUp:ni,onKeyDown:ni,onKeyPress:ni,onKeyUp:ni,onFocus:ni,onBlur:ni,onChange:ni,onInput:ni,onInvalid:ni,onSubmit:ni},be.createElement("div",{className:"tooltip-content"},this.props.children))}}function ei(e,t,n){const{left:r,right:i,bottom:o}=e,s=e.left+e.width/2,a=e.top-n.height,l=e.top+e.height/2-n.height/2,{width:c,height:u}=n,h=new DOMRect(10,0,6,6);switch(t){case Zr.NORTH_EAST:return new DOMRect(s-h.x-h.width,a-h.height,c,u);case Zr.NORTH:return new DOMRect(s-c/2,a-h.height,c,u);case Zr.NORTH_WEST:return new DOMRect(s-c+h.right,a-h.height,c,u);case Zr.EAST:return new DOMRect(i+h.width,l,c,u);case Zr.SOUTH_EAST:return new DOMRect(s-h.x-h.width,o+h.height,c,u);case Zr.SOUTH:return new DOMRect(s-c/2,o+h.height,c,u);case Zr.SOUTH_WEST:return new DOMRect(s-c+h.right,o+h.height,c,u);case Zr.WEST:return new DOMRect(r-c-h.width,l,c,u);default:return et(0,`Unknown direction ${t}`)}}const ti=e=>e?.closest(".tooltip-host")??document.body,ni=e=>e.stopPropagation();function ri(e){const t=new Set,n=Object.assign((e=>{n.current=e,t.forEach((t=>t(e)))}),{current:e??null,subscribe:e=>t.add(e),unsubscribe:e=>t.delete(e)});return n}class ii extends be.Component{innerButtonRef=ri();constructor(e){super(e),this.innerButtonRef.subscribe((e=>this.props.onButtonRef?.(e)))}focus=()=>{this.innerButtonRef.current?.focus()};blur(){this.innerButtonRef.current?.blur()}getBoundingClientRect(){return this.innerButtonRef.current?.getBoundingClientRect()}render(){const{disabled:e,tooltip:t}=this.props,n=Vr()("button-component",this.props.className,{"small-button":"small"===this.props.size});return be.createElement("button",{className:n,onClick:e?oi:this.onClick,onKeyDown:this.props.onKeyDown,onContextMenu:e?oi:this.onContextMenu,type:this.props.type||"button",ref:this.innerButtonRef,tabIndex:this.props.tabIndex,onMouseEnter:e?oi:this.props.onMouseEnter,role:this.props.role,"aria-expanded":this.props.ariaExpanded,"aria-disabled":e?"true":void 0,"aria-label":this.props.ariaLabel,"aria-describedby":this.props.ariaDescribedBy,"aria-haspopup":this.props.ariaHaspopup,"aria-pressed":this.props.ariaPressed,"aria-hidden":this.props.ariaHidden,"aria-controls":this.props.ariaControls,autoFocus:this.props.autoFocus},t&&be.createElement(Jr,{className:this.props.tooltipClassName,target:this.innerButtonRef,direction:this.props.toolTipDirection??Zr.NORTH,delay:e?0:void 0,onlyWhenOverflowed:this.props.onlyShowTooltipWhenOverflowed,openOnTargetClick:this.props.openTooltipOnClick},t),this.props.children)}onClick=e=>{this.props.onClick&&this.props.onClick(e),void 0===this.props.type&&e.preventDefault()};onContextMenu=e=>{this.props.onContextMenu?.(e),void 0===this.props.type&&e.preventDefault()}}const oi=e=>e.preventDefault();be.Component;class si extends be.Component{svgRef=ri();render(){const{symbol:e,title:t,tooltipDirection:n}=this.props,r=`0 0 ${e.w} ${e.h}`,i=Vr()("octicon",this.props.className),o=void 0===t?"true":void 0,s=n??Zr.NORTH;return be.createElement("svg",{"aria-hidden":o,className:i,version:"1.1",viewBox:r,ref:this.svgRef,tabIndex:-1},void 0!==t&&be.createElement(Jr,{target:this.svgRef,direction:s},t),be.createElement("path",{fillRule:e.fr,d:e.d}))}}const ai={w:16,h:16,d:"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z",fr:"evenodd"},li={w:16,h:16,d:"M13.03 8.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.47 9.28a.75.75 0 011.06-1.06l2.97 2.97V3.75a.75.75 0 011.5 0v7.44l2.97-2.97a.75.75 0 011.06 0z",fr:"evenodd"},ci={w:16,h:16,d:"M8.22 2.97a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06l2.97-2.97H3.75a.75.75 0 010-1.5h7.44L8.22 4.03a.75.75 0 010-1.06z",fr:"evenodd"},ui={w:16,h:16,d:"M3.47 7.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L9 4.81v7.44a.75.75 0 01-1.5 0V4.81L4.53 7.78a.75.75 0 01-1.06 0z",fr:"evenodd"},hi={w:16,h:16,d:"M8 16a2 2 0 0 0 1.985-1.75c.017-.137-.097-.25-.235-.25h-3.5c-.138 0-.252.113-.235.25A2 2 0 0 0 8 16ZM3 5a5 5 0 0 1 10 0v2.947c0 .05.015.098.042.139l1.703 2.555A1.519 1.519 0 0 1 13.482 13H2.518a1.516 1.516 0 0 1-1.263-2.36l1.703-2.554A.255.255 0 0 0 3 7.947Zm5-3.5A3.5 3.5 0 0 0 4.5 5v2.947c0 .346-.102.683-.294.97l-1.703 2.556a.017.017 0 0 0-.003.01l.001.006c0 .002.002.004.004.006l.006.004.007.001h10.964l.007-.001.006-.004.004-.006.001-.007a.017.017 0 0 0-.003-.01l-1.703-2.554a1.745 1.745 0 0 1-.294-.97V5A3.5 3.5 0 0 0 8 1.5Z",fr:void 0},pi={w:16,h:16,d:"M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z",fr:"evenodd"},di={w:16,h:16,d:"M8 16A8 8 0 108 0a8 8 0 000 16zm3.78-9.72a.75.75 0 00-1.06-1.06L6.75 9.19 5.28 7.72a.75.75 0 00-1.06 1.06l2 2a.75.75 0 001.06 0l4.5-4.5z",fr:"evenodd"},mi={w:16,h:16,d:"M12.78 6.22a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06 0L3.22 7.28a.75.75 0 011.06-1.06L8 9.94l3.72-3.72a.75.75 0 011.06 0z",fr:"evenodd"},fi={w:16,h:16,d:"M6.22 3.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L9.94 8 6.22 4.28a.75.75 0 010-1.06z",fr:"evenodd"},gi={w:16,h:16,d:"M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z",fr:"evenodd"},yi={w:24,h:24,d:"M4.75 3A1.75 1.75 0 003 4.75v9.5c0 .966.784 1.75 1.75 1.75h1.5a.75.75 0 000-1.5h-1.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.25-.25h9.5a.25.25 0 01.25.25v1.5a.75.75 0 001.5 0v-1.5A1.75 1.75 0 0014.25 3h-9.5zm5 5A1.75 1.75 0 008 9.75v9.5c0 .966.784 1.75 1.75 1.75h9.5A1.75 1.75 0 0021 19.25v-9.5A1.75 1.75 0 0019.25 8h-9.5zM9.5 9.75a.25.25 0 01.25-.25h9.5a.25.25 0 01.25.25v9.5a.25.25 0 01-.25.25h-9.5a.25.25 0 01-.25-.25v-9.5z",fr:"evenodd"},bi={w:16,h:16,d:"M8.75 5V.75a.75.75 0 00-1.5 0V5H5.104a.25.25 0 00-.177.427l2.896 2.896a.25.25 0 00.354 0l2.896-2.896A.25.25 0 0010.896 5H8.75zM1.5 2.75a.25.25 0 01.25-.25h3a.75.75 0 000-1.5h-3A1.75 1.75 0 000 2.75v7.5C0 11.216.784 12 1.75 12h3.727c-.1 1.041-.52 1.872-1.292 2.757A.75.75 0 004.75 16h6.5a.75.75 0 00.565-1.243c-.772-.885-1.193-1.716-1.292-2.757h3.727A1.75 1.75 0 0016 10.25v-7.5A1.75 1.75 0 0014.25 1h-3a.75.75 0 000 1.5h3a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-7.5zM9.018 12H6.982a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5z",fr:"evenodd"},wi={w:16,h:16,d:"M1.75 2.5h12.5a.25.25 0 01.25.25v7.5a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-7.5a.25.25 0 01.25-.25zM14.25 1H1.75A1.75 1.75 0 000 2.75v7.5C0 11.216.784 12 1.75 12h3.727c-.1 1.041-.52 1.872-1.292 2.757A.75.75 0 004.75 16h6.5a.75.75 0 00.565-1.243c-.772-.885-1.193-1.716-1.292-2.757h3.727A1.75 1.75 0 0016 10.25v-7.5A1.75 1.75 0 0014.25 1zM9.018 12H6.982a5.72 5.72 0 01-.765 2.5h3.566a5.72 5.72 0 01-.765-2.5z",fr:"evenodd"},vi={w:16,h:16,d:"M8.75 1.75a.75.75 0 00-1.5 0V5H4a.75.75 0 000 1.5h3.25v3.25a.75.75 0 001.5 0V6.5H12A.75.75 0 0012 5H8.75V1.75zM4 13a.75.75 0 000 1.5h8a.75.75 0 100-1.5H4z",fr:"evenodd"},Ci={w:16,h:16,d:"M13.25 2.5H2.75a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25V2.75a.25.25 0 00-.25-.25zM2.75 1h10.5c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0113.25 15H2.75A1.75 1.75 0 011 13.25V2.75C1 1.784 1.784 1 2.75 1zM8 4a.75.75 0 01.75.75v2.5h2.5a.75.75 0 010 1.5h-2.5v2.5a.75.75 0 01-1.5 0v-2.5h-2.5a.75.75 0 010-1.5h2.5v-2.5A.75.75 0 018 4z",fr:"evenodd"},Si={w:16,h:16,d:"M2.75 2.5h10.5a.25.25 0 01.25.25v10.5a.25.25 0 01-.25.25H2.75a.25.25 0 01-.25-.25V2.75a.25.25 0 01.25-.25zM13.25 1H2.75A1.75 1.75 0 001 2.75v10.5c0 .966.784 1.75 1.75 1.75h10.5A1.75 1.75 0 0015 13.25V2.75A1.75 1.75 0 0013.25 1zM8 10a2 2 0 100-4 2 2 0 000 4z",fr:"evenodd"},Ei={w:16,h:16,d:"M2.75 2.5h10.5a.25.25 0 01.25.25v10.5a.25.25 0 01-.25.25H2.75a.25.25 0 01-.25-.25V2.75a.25.25 0 01.25-.25zM13.25 1H2.75A1.75 1.75 0 001 2.75v10.5c0 .966.784 1.75 1.75 1.75h10.5A1.75 1.75 0 0015 13.25V2.75A1.75 1.75 0 0013.25 1zm-2 7.75a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5z",fr:"evenodd"},ki={w:16,h:16,d:"M2.75 2.5h10.5a.25.25 0 01.25.25v10.5a.25.25 0 01-.25.25H2.75a.25.25 0 01-.25-.25V2.75a.25.25 0 01.25-.25zM13.25 1H2.75A1.75 1.75 0 001 2.75v10.5c0 .966.784 1.75 1.75 1.75h10.5A1.75 1.75 0 0015 13.25V2.75A1.75 1.75 0 0013.25 1zm-1.47 7.53a.75.75 0 000-1.06L8.53 4.22a.75.75 0 00-1.06 1.06l1.97 1.97H4.75a.75.75 0 000 1.5h4.69l-1.97 1.97a.75.75 0 101.06 1.06l3.25-3.25z",fr:"evenodd"},Ri={w:16,h:16,d:"M8 4a4 4 0 100 8 4 4 0 000-8z",fr:"evenodd"},xi={w:16,h:16,d:"M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z",fr:"evenodd"},Ti={w:16,h:16,d:"M.143 2.31a.75.75 0 011.047-.167l14.5 10.5a.75.75 0 11-.88 1.214l-2.248-1.628C11.346 13.19 9.792 14 8 14c-1.981 0-3.67-.992-4.933-2.078C1.797 10.832.88 9.577.43 8.9a1.618 1.618 0 010-1.797c.353-.533.995-1.42 1.868-2.305L.31 3.357A.75.75 0 01.143 2.31zm3.386 3.378a14.21 14.21 0 00-1.85 2.244.12.12 0 00-.022.068c0 .021.006.045.022.068.412.621 1.242 1.75 2.366 2.717C5.175 11.758 6.527 12.5 8 12.5c1.195 0 2.31-.488 3.29-1.191L9.063 9.695A2 2 0 016.058 7.52l-2.53-1.832zM8 3.5c-.516 0-1.017.09-1.499.251a.75.75 0 11-.473-1.423A6.23 6.23 0 018 2c1.981 0 3.67.992 4.933 2.078 1.27 1.091 2.187 2.345 2.637 3.023a1.619 1.619 0 010 1.798c-.11.166-.248.365-.41.587a.75.75 0 11-1.21-.887c.148-.201.272-.382.371-.53a.119.119 0 000-.137c-.412-.621-1.242-1.75-2.366-2.717C10.825 4.242 9.473 3.5 8 3.5z",fr:"evenodd"},Di={w:16,h:16,d:"M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z",fr:"evenodd"},Ai={w:16,h:16,d:"M4 1.75C4 .784 4.784 0 5.75 0h5.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v8.586A1.75 1.75 0 0114.25 15h-9a.75.75 0 010-1.5h9a.25.25 0 00.25-.25V6h-2.75A1.75 1.75 0 0110 4.25V1.5H5.75a.25.25 0 00-.25.25v2.5a.75.75 0 01-1.5 0v-2.5zm7.5-.188V4.25c0 .138.112.25.25.25h2.688a.252.252 0 00-.011-.013l-2.914-2.914a.272.272 0 00-.013-.011zM5.72 6.72a.75.75 0 000 1.06l1.47 1.47-1.47 1.47a.75.75 0 101.06 1.06l2-2a.75.75 0 000-1.06l-2-2a.75.75 0 00-1.06 0zM3.28 7.78a.75.75 0 00-1.06-1.06l-2 2a.75.75 0 000 1.06l2 2a.75.75 0 001.06-1.06L1.81 9.25l1.47-1.47z",fr:"evenodd"},Pi={w:16,h:16,d:"M2.75 1.5a.25.25 0 00-.25.25v12.5c0 .138.112.25.25.25h10.5a.25.25 0 00.25-.25V4.664a.25.25 0 00-.073-.177l-2.914-2.914a.25.25 0 00-.177-.073H2.75zM1 1.75C1 .784 1.784 0 2.75 0h7.586c.464 0 .909.184 1.237.513l2.914 2.914c.329.328.513.773.513 1.237v9.586A1.75 1.75 0 0113.25 16H2.75A1.75 1.75 0 011 14.25V1.75zm7 1.5a.75.75 0 01.75.75v1.5h1.5a.75.75 0 010 1.5h-1.5v1.5a.75.75 0 01-1.5 0V7h-1.5a.75.75 0 010-1.5h1.5V4A.75.75 0 018 3.25zm-3 8a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75z",fr:"evenodd"},Ii={w:16,h:16,d:"M1.75 1A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25v-8.5A1.75 1.75 0 0014.25 3h-6.5a.25.25 0 01-.2-.1l-.9-1.2c-.33-.44-.85-.7-1.4-.7h-3.5z",fr:"evenodd"},_i={w:16,h:16,d:"M10.896 2H8.75V.75a.75.75 0 00-1.5 0V2H5.104a.25.25 0 00-.177.427l2.896 2.896a.25.25 0 00.354 0l2.896-2.896A.25.25 0 0010.896 2zM8.75 15.25a.75.75 0 01-1.5 0V14H5.104a.25.25 0 01-.177-.427l2.896-2.896a.25.25 0 01.354 0l2.896 2.896a.25.25 0 01-.177.427H8.75v1.25zm-6.5-6.5a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 016 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 0112 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z",fr:"evenodd"},Ni={w:16,h:16,d:"M8.177 14.323l2.896-2.896a.25.25 0 00-.177-.427H8.75V7.764a.75.75 0 10-1.5 0V11H5.104a.25.25 0 00-.177.427l2.896 2.896a.25.25 0 00.354 0zM2.25 5a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 4.25a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5a.75.75 0 01.75.75zM8.25 5a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 4.25a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5a.75.75 0 01.75.75zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z",fr:"evenodd"},Oi={w:16,h:16,d:"M7.823 1.677L4.927 4.573A.25.25 0 005.104 5H7.25v3.236a.75.75 0 101.5 0V5h2.146a.25.25 0 00.177-.427L8.177 1.677a.25.25 0 00-.354 0zM13.75 11a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5zm-3.75.75a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5a.75.75 0 01-.75-.75zM7.75 11a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5zM4 11.75a.75.75 0 01.75-.75h.5a.75.75 0 010 1.5h-.5a.75.75 0 01-.75-.75zM1.75 11a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5z",fr:"evenodd"},Mi={w:16,h:16,d:"M7.429 1.525a6.593 6.593 0 011.142 0c.036.003.108.036.137.146l.289 1.105c.147.56.55.967.997 1.189.174.086.341.183.501.29.417.278.97.423 1.53.27l1.102-.303c.11-.03.175.016.195.046.219.31.41.641.573.989.014.031.022.11-.059.19l-.815.806c-.411.406-.562.957-.53 1.456a4.588 4.588 0 010 .582c-.032.499.119 1.05.53 1.456l.815.806c.08.08.073.159.059.19a6.494 6.494 0 01-.573.99c-.02.029-.086.074-.195.045l-1.103-.303c-.559-.153-1.112-.008-1.529.27-.16.107-.327.204-.5.29-.449.222-.851.628-.998 1.189l-.289 1.105c-.029.11-.101.143-.137.146a6.613 6.613 0 01-1.142 0c-.036-.003-.108-.037-.137-.146l-.289-1.105c-.147-.56-.55-.967-.997-1.189a4.502 4.502 0 01-.501-.29c-.417-.278-.97-.423-1.53-.27l-1.102.303c-.11.03-.175-.016-.195-.046a6.492 6.492 0 01-.573-.989c-.014-.031-.022-.11.059-.19l.815-.806c.411-.406.562-.957.53-1.456a4.587 4.587 0 010-.582c.032-.499-.119-1.05-.53-1.456l-.815-.806c-.08-.08-.073-.159-.059-.19a6.44 6.44 0 01.573-.99c.02-.029.086-.075.195-.045l1.103.303c.559.153 1.112.008 1.529-.27.16-.107.327-.204.5-.29.449-.222.851-.628.998-1.189l.289-1.105c.029-.11.101-.143.137-.146zM8 0c-.236 0-.47.01-.701.03-.743.065-1.29.615-1.458 1.261l-.29 1.106c-.017.066-.078.158-.211.224a5.994 5.994 0 00-.668.386c-.123.082-.233.09-.3.071L3.27 2.776c-.644-.177-1.392.02-1.82.63a7.977 7.977 0 00-.704 1.217c-.315.675-.111 1.422.363 1.891l.815.806c.05.048.098.147.088.294a6.084 6.084 0 000 .772c.01.147-.038.246-.088.294l-.815.806c-.474.469-.678 1.216-.363 1.891.2.428.436.835.704 1.218.428.609 1.176.806 1.82.63l1.103-.303c.066-.019.176-.011.299.071.213.143.436.272.668.386.133.066.194.158.212.224l.289 1.106c.169.646.715 1.196 1.458 1.26a8.094 8.094 0 001.402 0c.743-.064 1.29-.614 1.458-1.26l.29-1.106c.017-.066.078-.158.211-.224a5.98 5.98 0 00.668-.386c.123-.082.233-.09.3-.071l1.102.302c.644.177 1.392-.02 1.82-.63.268-.382.505-.789.704-1.217.315-.675.111-1.422-.364-1.891l-.814-.806c-.05-.048-.098-.147-.088-.294a6.1 6.1 0 000-.772c-.01-.147.039-.246.088-.294l.814-.806c.475-.469.679-1.216.364-1.891a7.992 7.992 0 00-.704-1.218c-.428-.609-1.176-.806-1.82-.63l-1.103.303c-.066.019-.176.011-.299-.071a5.991 5.991 0 00-.668-.386c-.133-.066-.194-.158-.212-.224L10.16 1.29C9.99.645 9.444.095 8.701.031A8.094 8.094 0 008 0zm1.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM11 8a3 3 0 11-6 0 3 3 0 016 0z",fr:"evenodd"},Bi={w:16,h:16,d:"M11.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122V6A2.5 2.5 0 0110 8.5H6a1 1 0 00-1 1v1.128a2.251 2.251 0 11-1.5 0V5.372a2.25 2.25 0 111.5 0v1.836A2.492 2.492 0 016 7h4a1 1 0 001-1v-.628A2.25 2.25 0 019.5 3.25zM4.25 12a.75.75 0 100 1.5.75.75 0 000-1.5zM3.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0z",fr:"evenodd"},Fi={w:16,h:16,d:"M10.5 7.75a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm1.43.75a4.002 4.002 0 01-7.86 0H.75a.75.75 0 110-1.5h3.32a4.001 4.001 0 017.86 0h3.32a.75.75 0 110 1.5h-3.32z",fr:"evenodd"},Li={w:16,h:16,d:"M5 3.254V3.25v.005a.75.75 0 110-.005v.004zm.45 1.9a2.25 2.25 0 10-1.95.218v5.256a2.25 2.25 0 101.5 0V7.123A5.735 5.735 0 009.25 9h1.378a2.251 2.251 0 100-1.5H9.25a4.25 4.25 0 01-3.8-2.346zM12.75 9a.75.75 0 100-1.5.75.75 0 000 1.5zm-8.5 4.5a.75.75 0 100-1.5.75.75 0 000 1.5z",fr:"evenodd"},Hi={w:16,h:16,d:"M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z",fr:"evenodd"},Ui={w:16,h:16,d:"M2.5 3.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.25 1a2.25 2.25 0 00-.75 4.372v5.256a2.251 2.251 0 101.5 0V5.372A2.25 2.25 0 003.25 1zm0 11a.75.75 0 100 1.5.75.75 0 000-1.5zm9.5 3a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zm0-3a.75.75 0 100 1.5.75.75 0 000-1.5zM14 7.5a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0zm0-4.25a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z",fr:"evenodd"},Wi={w:16,h:16,d:"M8.156 1.835a.25.25 0 00-.312 0l-5.25 4.2a.25.25 0 00-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 01.75-.75h3.5a.75.75 0 01.75.75v5.25h2.75a.25.25 0 00.25-.25V6.23a.25.25 0 00-.094-.195l-5.25-4.2zM6.906.664a1.75 1.75 0 012.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0113.25 15h-3.5a.75.75 0 01-.75-.75V9H7v5.25a.75.75 0 01-.75.75h-3.5A1.75 1.75 0 011 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2h-.001z",fr:"evenodd"},$i={w:16,h:16,d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm6.5-.25A.75.75 0 017.25 7h1a.75.75 0 01.75.75v2.75h.25a.75.75 0 010 1.5h-2a.75.75 0 010-1.5h.25v-2h-.25a.75.75 0 01-.75-.75zM8 6a1 1 0 100-2 1 1 0 000 2z",fr:"evenodd"},zi={w:16,h:16,d:"M8 1.5a6.491 6.491 0 00-5.285 2.715l1.358 1.358A.25.25 0 013.896 6H.25A.25.25 0 010 5.75V2.104a.25.25 0 01.427-.177l1.216 1.216a8 8 0 0114.315 4.03.748.748 0 01-.668.83.75.75 0 01-.824-.676A6.501 6.501 0 008 1.5zM.712 8.004a.75.75 0 01.822.67 6.501 6.501 0 0011.751 3.111l-1.358-1.358a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.216-1.216A8 8 0 01.042 8.827a.75.75 0 01.67-.823zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-6.25a.75.75 0 00-1.5 0v3.5a.75.75 0 001.5 0v-3.5z",fr:"evenodd"},qi={w:16,h:16,d:"M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 01-1.484.211c-.04-.282-.163-.547-.37-.847a8.695 8.695 0 00-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.75.75 0 01-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75zM6 15.25a.75.75 0 01.75-.75h2.5a.75.75 0 010 1.5h-2.5a.75.75 0 01-.75-.75zM5.75 12a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5z",fr:"evenodd"},ji={w:16,h:16,d:"M10.604 1h4.146a.25.25 0 01.25.25v4.146a.25.25 0 01-.427.177L13.03 4.03 9.28 7.78a.75.75 0 01-1.06-1.06l3.75-3.75-1.543-1.543A.25.25 0 0110.604 1zM3.75 2A1.75 1.75 0 002 3.75v8.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 12.25v-3.5a.75.75 0 00-1.5 0v3.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-8.5a.25.25 0 01.25-.25h3.5a.75.75 0 000-1.5h-3.5z",fr:"evenodd"},Gi={w:16,h:16,d:"M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z",fr:"evenodd"},Vi={w:16,h:16,d:"M4 4v2h-.25A1.75 1.75 0 002 7.75v5.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-5.5A1.75 1.75 0 0012.25 6H12V4a4 4 0 10-8 0zm6.5 2V4a2.5 2.5 0 00-5 0v2h5zM12 7.5h.25a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-5.5a.25.25 0 01.25-.25H12z",fr:"evenodd"},Ki={w:16,h:16,d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z",fr:"evenodd"},Yi={w:16,h:16,d:"M7.693 1.066a.75.75 0 01.614 0l7.25 3.25a.75.75 0 010 1.368L13 6.831v2.794c0 1.024-.81 1.749-1.66 2.173-.893.447-2.075.702-3.34.702-.278 0-.55-.012-.816-.036a.75.75 0 01.133-1.494c.22.02.45.03.683.03 1.082 0 2.025-.221 2.67-.543.69-.345.83-.682.83-.832V7.503L8.307 8.934a.75.75 0 01-.614 0L4 7.28v1.663c.296.105.575.275.812.512.438.438.688 1.059.688 1.796v3a.75.75 0 01-.75.75h-3a.75.75 0 01-.75-.75v-3c0-.737.25-1.358.688-1.796.237-.237.516-.407.812-.512V6.606L.443 5.684a.75.75 0 010-1.368l7.25-3.25zM2.583 5L8 7.428 13.416 5 8 2.572 2.583 5zM2.5 11.25c0-.388.125-.611.25-.735a.704.704 0 01.5-.203c.19 0 .37.071.5.203.125.124.25.347.25.735v2.25H2.5v-2.25z",fr:"evenodd"},Xi={w:16,h:16,d:"M11.134 1.535C9.722 2.562 8.16 4.057 6.889 5.312 5.8 6.387 5.041 7.401 4.575 8.294a3.745 3.745 0 00-3.227 1.054c-.43.431-.69 1.066-.86 1.657a11.982 11.982 0 00-.358 1.914A21.263 21.263 0 000 15.203v.054l.75-.007-.007.75h.054a14.404 14.404 0 00.654-.012 21.243 21.243 0 001.63-.118c.62-.07 1.3-.18 1.914-.357.592-.17 1.226-.43 1.657-.861a3.745 3.745 0 001.055-3.217c.908-.461 1.942-1.216 3.04-2.3 1.279-1.262 2.764-2.825 3.775-4.249.501-.706.923-1.428 1.125-2.096.2-.659.235-1.469-.368-2.07-.606-.607-1.42-.55-2.069-.34-.66.213-1.376.646-2.076 1.155zm-3.95 8.48a3.76 3.76 0 00-1.19-1.192 9.758 9.758 0 011.161-1.607l1.658 1.658a9.853 9.853 0 01-1.63 1.142zM.742 16l.007-.75-.75.008A.75.75 0 00.743 16zM12.016 2.749c-1.224.89-2.605 2.189-3.822 3.384l1.718 1.718c1.21-1.205 2.51-2.597 3.387-3.833.47-.662.78-1.227.912-1.662.134-.444.032-.551.009-.575h-.001V1.78c-.014-.014-.112-.113-.548.027-.432.14-.995.462-1.655.942zM1.62 13.089a19.56 19.56 0 00-.104 1.395 19.55 19.55 0 001.396-.104 10.528 10.528 0 001.668-.309c.526-.151.856-.325 1.011-.48a2.25 2.25 0 00-3.182-3.182c-.155.155-.329.485-.48 1.01a10.515 10.515 0 00-.309 1.67z",fr:"evenodd"},Qi={w:16,h:16,d:"M10.5 5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm.061 3.073a4 4 0 10-5.123 0 6.004 6.004 0 00-3.431 5.142.75.75 0 001.498.07 4.5 4.5 0 018.99 0 .75.75 0 101.498-.07 6.005 6.005 0 00-3.432-5.142z",fr:"evenodd"},Zi={w:16,h:16,d:"M8 2a.75.75 0 01.75.75v4.5h4.5a.75.75 0 010 1.5h-4.5v4.5a.75.75 0 01-1.5 0v-4.5h-4.5a.75.75 0 010-1.5h4.5v-4.5A.75.75 0 018 2z",fr:"evenodd"},Ji={w:16,h:16,d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 019 6.25c0 .177-.04.264-.077.318a.956.956 0 01-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 00-.313.195 2.416 2.416 0 00-.692.661.75.75 0 001.248.832.956.956 0 01.276-.245 6.3 6.3 0 01.26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 008 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 101.342.67z",fr:"evenodd"},eo={w:16,h:16,d:"M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z",fr:"evenodd"},to={w:16,h:16,d:"M15 0H9v7c0 .55.45 1 1 1h1v1h1V8h3c.55 0 1-.45 1-1V1c0-.55-.45-1-1-1zm-4 7h-1V6h1v1zm4 0h-3V6h3v1zm0-2h-4V1h4v4zM4 5H3V4h1v1zm0-2H3V2h1v1zM2 1h6V0H1C.45 0 0 .45 0 1v12c0 .55.45 1 1 1h2v2l1.5-1.5L6 16v-2h5c.55 0 1-.45 1-1v-3H2V1zm9 10v2H6v-1H3v1H1v-2h10zM3 8h1v1H3V8zm1-1H3V6h1v1z",fr:"evenodd"},no={w:16,h:16,d:"M5 3.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm0 2.122a2.25 2.25 0 10-1.5 0v.878A2.25 2.25 0 005.75 8.5h1.5v2.128a2.251 2.251 0 101.5 0V8.5h1.5a2.25 2.25 0 002.25-2.25v-.878a2.25 2.25 0 10-1.5 0v.878a.75.75 0 01-.75.75h-4.5A.75.75 0 015 6.25v-.878zm3.75 7.378a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm3-8.75a.75.75 0 100-1.5.75.75 0 000 1.5z",fr:"evenodd"},ro={w:16,h:16,d:"M1.75 1A1.75 1.75 0 000 2.75v4c0 .372.116.717.314 1a1.742 1.742 0 00-.314 1v4c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0016 12.75v-4c0-.372-.116-.717-.314-1 .198-.283.314-.628.314-1v-4A1.75 1.75 0 0014.25 1H1.75zm0 7.5a.25.25 0 00-.25.25v4c0 .138.112.25.25.25h12.5a.25.25 0 00.25-.25v-4a.25.25 0 00-.25-.25H1.75zM1.5 2.75a.25.25 0 01.25-.25h12.5a.25.25 0 01.25.25v4a.25.25 0 01-.25.25H1.75a.25.25 0 01-.25-.25v-4zm5.5 2A.75.75 0 017.75 4h4.5a.75.75 0 010 1.5h-4.5A.75.75 0 017 4.75zM7.75 10a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-4.5zM3 4.75A.75.75 0 013.75 4h.5a.75.75 0 010 1.5h-.5A.75.75 0 013 4.75zM3.75 10a.75.75 0 000 1.5h.5a.75.75 0 000-1.5h-.5z",fr:"evenodd"},io={w:24,h:24,d:"M11.31 2.525a9.648 9.648 0 011.38 0c.055.004.135.05.162.16l.351 1.45c.153.628.626 1.08 1.173 1.278.205.074.405.157.6.249a1.832 1.832 0 001.733-.074l1.275-.776c.097-.06.186-.036.228 0 .348.302.674.628.976.976.036.042.06.13 0 .228l-.776 1.274a1.832 1.832 0 00-.074 1.734c.092.195.175.395.248.6.198.547.652 1.02 1.278 1.172l1.45.353c.111.026.157.106.161.161a9.653 9.653 0 010 1.38c-.004.055-.05.135-.16.162l-1.45.351a1.833 1.833 0 00-1.278 1.173 6.926 6.926 0 01-.25.6 1.832 1.832 0 00.075 1.733l.776 1.275c.06.097.036.186 0 .228a9.555 9.555 0 01-.976.976c-.042.036-.13.06-.228 0l-1.275-.776a1.832 1.832 0 00-1.733-.074 6.926 6.926 0 01-.6.248 1.833 1.833 0 00-1.172 1.278l-.353 1.45c-.026.111-.106.157-.161.161a9.653 9.653 0 01-1.38 0c-.055-.004-.135-.05-.162-.16l-.351-1.45a1.833 1.833 0 00-1.173-1.278 6.928 6.928 0 01-.6-.25 1.832 1.832 0 00-1.734.075l-1.274.776c-.097.06-.186.036-.228 0a9.56 9.56 0 01-.976-.976c-.036-.042-.06-.13 0-.228l.776-1.275a1.832 1.832 0 00.074-1.733 6.948 6.948 0 01-.249-.6 1.833 1.833 0 00-1.277-1.172l-1.45-.353c-.111-.026-.157-.106-.161-.161a9.648 9.648 0 010-1.38c.004-.055.05-.135.16-.162l1.45-.351a1.833 1.833 0 001.278-1.173 6.95 6.95 0 01.249-.6 1.832 1.832 0 00-.074-1.734l-.776-1.274c-.06-.097-.036-.186 0-.228.302-.348.628-.674.976-.976.042-.036.13-.06.228 0l1.274.776a1.832 1.832 0 001.734.074 6.95 6.95 0 01.6-.249 1.833 1.833 0 001.172-1.277l.353-1.45c.026-.111.106-.157.161-.161zM12 1c-.268 0-.534.01-.797.028-.763.055-1.345.617-1.512 1.304l-.352 1.45c-.02.078-.09.172-.225.22a8.45 8.45 0 00-.728.303c-.13.06-.246.044-.315.002l-1.274-.776c-.604-.368-1.412-.354-1.99.147-.403.348-.78.726-1.129 1.128-.5.579-.515 1.387-.147 1.99l.776 1.275c.042.069.059.185-.002.315a8.45 8.45 0 00-.302.728c-.05.135-.143.206-.221.225l-1.45.352c-.687.167-1.249.749-1.304 1.512a11.149 11.149 0 000 1.594c.055.763.617 1.345 1.304 1.512l1.45.352c.078.02.172.09.22.225.09.248.191.491.303.729.06.129.044.245.002.314l-.776 1.274c-.368.604-.354 1.412.147 1.99.348.403.726.78 1.128 1.129.579.5 1.387.515 1.99.147l1.275-.776c.069-.042.185-.059.315.002.237.112.48.213.728.302.135.05.206.143.225.221l.352 1.45c.167.687.749 1.249 1.512 1.303a11.125 11.125 0 001.594 0c.763-.054 1.345-.616 1.512-1.303l.352-1.45c.02-.078.09-.172.225-.22.248-.09.491-.191.729-.303.129-.06.245-.044.314-.002l1.274.776c.604.368 1.412.354 1.99-.147.403-.348.78-.726 1.129-1.128.5-.579.515-1.387.147-1.99l-.776-1.275c-.042-.069-.059-.185.002-.315.112-.237.213-.48.302-.728.05-.135.143-.206.221-.225l1.45-.352c.687-.167 1.249-.749 1.303-1.512a11.125 11.125 0 000-1.594c-.054-.763-.616-1.345-1.303-1.512l-1.45-.352c-.078-.02-.172-.09-.22-.225a8.469 8.469 0 00-.303-.728c-.06-.13-.044-.246-.002-.315l.776-1.274c.368-.604.354-1.412-.147-1.99-.348-.403-.726-.78-1.128-1.129-.579-.5-1.387-.515-1.99-.147l-1.275.776c-.069.042-.185.059-.315-.002a8.465 8.465 0 00-.728-.302c-.135-.05-.206-.143-.225-.221l-.352-1.45c-.167-.687-.749-1.249-1.512-1.304A11.149 11.149 0 0012 1zm2.5 11a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0zm1.5 0a4 4 0 11-8 0 4 4 0 018 0z",fr:"evenodd"},oo={w:16,h:16,d:"M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zm3.28 5.78a.75.75 0 00-1.06-1.06l-5.5 5.5a.75.75 0 101.06 1.06l5.5-5.5z",fr:"evenodd"},so={w:16,h:16,d:"M5.75 4A1.75 1.75 0 004 5.75v4.5c0 .966.784 1.75 1.75 1.75h4.5A1.75 1.75 0 0012 10.25v-4.5A1.75 1.75 0 0010.25 4h-4.5z",fr:"evenodd"},ao={w:16,h:16,d:"M4.47.22A.75.75 0 015 0h6a.75.75 0 01.53.22l4.25 4.25c.141.14.22.331.22.53v6a.75.75 0 01-.22.53l-4.25 4.25A.75.75 0 0111 16H5a.75.75 0 01-.53-.22L.22 11.53A.75.75 0 010 11V5a.75.75 0 01.22-.53L4.47.22zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5H5.31zM8 4a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 018 4zm0 8a1 1 0 100-2 1 1 0 000 2z",fr:"evenodd"},lo={w:16,h:16,d:"M8 2.5a5.487 5.487 0 00-4.131 1.869l1.204 1.204A.25.25 0 014.896 6H1.25A.25.25 0 011 5.75V2.104a.25.25 0 01.427-.177l1.38 1.38A7.001 7.001 0 0114.95 7.16a.75.75 0 11-1.49.178A5.501 5.501 0 008 2.5zM1.705 8.005a.75.75 0 01.834.656 5.501 5.501 0 009.592 2.97l-1.204-1.204a.25.25 0 01.177-.427h3.646a.25.25 0 01.25.25v3.646a.25.25 0 01-.427.177l-1.38-1.38A7.001 7.001 0 011.05 8.84a.75.75 0 01.656-.834z",fr:"evenodd"},co={w:16,h:16,d:"M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z",fr:"evenodd"},uo={w:16,h:16,d:"M4.427 6.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 6H4.604a.25.25 0 00-.177.427z",fr:void 0},ho={w:16,h:16,d:"M6.427 4.427l3.396 3.396a.25.25 0 010 .354l-3.396 3.396A.25.25 0 016 11.396V4.604a.25.25 0 01.427-.177z",fr:void 0},po={w:16,h:16,d:"M4.427 9.573l3.396-3.396a.25.25 0 01.354 0l3.396 3.396a.25.25 0 01-.177.427H4.604a.25.25 0 01-.177-.427z",fr:void 0},mo={w:16,h:16,d:"M8.177.677l2.896 2.896a.25.25 0 01-.177.427H8.75v1.25a.75.75 0 01-1.5 0V4H5.104a.25.25 0 01-.177-.427L7.823.677a.25.25 0 01.354 0zM7.25 10.75a.75.75 0 011.5 0V12h2.146a.25.25 0 01.177.427l-2.896 2.896a.25.25 0 01-.354 0l-2.896-2.896A.25.25 0 015.104 12H7.25v-1.25zm-5-2a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM6 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 016 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5zM12 8a.75.75 0 01-.75.75h-.5a.75.75 0 010-1.5h.5A.75.75 0 0112 8zm2.25.75a.75.75 0 000-1.5h-.5a.75.75 0 000 1.5h.5z",fr:"evenodd"},fo={w:16,h:16,d:"M8.53 1.22a.75.75 0 00-1.06 0L3.72 4.97a.75.75 0 001.06 1.06l2.47-2.47v6.69a.75.75 0 001.5 0V3.56l2.47 2.47a.75.75 0 101.06-1.06L8.53 1.22zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z",fr:"evenodd"},go={w:16,h:16,d:"M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z",fr:"evenodd"},yo={w:24,h:24,d:"M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm8.036-4.024a.75.75 0 00-1.06 1.06L10.939 12l-2.963 2.963a.75.75 0 101.06 1.06L12 13.06l2.963 2.964a.75.75 0 001.061-1.06L13.061 12l2.963-2.964a.75.75 0 10-1.06-1.06L12 10.939 9.036 7.976z",fr:"evenodd"};function bo(){return Sr()?26:22}class wo extends be.Component{getStyle=mr((e=>{const t={height:bo()};return void 0!==e&&(t.zoom=1/e),t}));onTitlebarDoubleClickDarwin=async()=>{switch(await G()){case"Minimize":$();break;case"None":return;default:await j()?q():z()}};render(){this.props.windowState,this.props.windowState;const e="light"===this.props.titleBarStyle?"light-title-bar":"",t=this.props.showAppIcon?be.createElement(si,{className:"app-icon",symbol:Ki}):null,n=this.onTitlebarDoubleClickDarwin;return be.createElement("div",{className:e,id:"desktop-app-title-bar",onDoubleClick:n,style:this.getStyle(this.props.windowZoomFactor)},null,null,t,this.props.children,null)}}class vo extends be.Component{infoDisappearTimeoutId=null;transitionGroupDisappearTimeoutId=null;constructor(e){super(e),this.state={windowZoomFactor:e.windowZoomFactor,renderTransitionGroup:!1,renderInfo:!1,transitionName:"zoom-in"}}componentWillReceiveProps(e){const t=this.state.windowZoomFactor!==e.windowZoomFactor;if(!t)return;null!==this.infoDisappearTimeoutId&&window.clearTimeout(this.infoDisappearTimeoutId),null!==this.transitionGroupDisappearTimeoutId&&window.clearTimeout(this.transitionGroupDisappearTimeoutId),this.infoDisappearTimeoutId=window.setTimeout(this.onInfoDisappearTimeout,750),this.transitionGroupDisappearTimeoutId=window.setTimeout(this.onTransitionGroupDisappearTimeout,950);const n=e.windowZoomFactor>this.state.windowZoomFactor?"zoom-in":"zoom-out";this.setState({windowZoomFactor:e.windowZoomFactor,renderTransitionGroup:t,renderInfo:t,transitionName:n})}onInfoDisappearTimeout=()=>{this.setState({renderInfo:!1})};onTransitionGroupDisappearTimeout=()=>{this.setState({renderTransitionGroup:!1})};renderZoomInfo(){if(!this.state.renderInfo)return null;const e=`${(100*this.state.windowZoomFactor).toFixed(0)}%`;return be.createElement(ze,{classNames:this.state.transitionName,appear:!0,enter:!1,exit:!0,timeout:100},be.createElement("div",null,be.createElement("span",null,e)))}render(){return this.state.renderTransitionGroup?be.createElement(Ie,{id:"window-zoom-info"},this.renderZoomInfo()):null}}class Co extends be.Component{render(){return this.props.darwinKeys.map(((e,t)=>be.createElement(be.Fragment,{key:e+t},be.createElement("kbd",null,e),null)))}}const So={appear:100,exit:250};class Eo extends be.Component{static getDerivedStateFromProps(e,t){if("hidden"===e.windowState)return null;if(t.windowState!==e.windowState){const t="full-screen"===e.windowState;return{windowState:e.windowState,renderInfo:t,renderTransitionGroup:t}}return null}infoDisappearTimeoutId=null;transitionGroupDisappearTimeoutId=null;constructor(e){super(e),this.state={renderInfo:!1,renderTransitionGroup:!1}}componentDidMount(){this.state.renderInfo&&this.scheduleInfoDisappear(),this.state.renderTransitionGroup&&this.scheduleTransitionGroupDisappear()}componentDidUpdate(e,t){t.renderInfo!==this.state.renderInfo&&(this.state.renderInfo?this.scheduleInfoDisappear():this.clearInfoDisappearTimeout()),t.renderTransitionGroup!==this.state.renderTransitionGroup&&(this.state.renderTransitionGroup?this.scheduleTransitionGroupDisappear():this.clearTransitionGroupDisappearTimeout())}componentWillUnmount(){this.clearInfoDisappearTimeout(),this.clearTransitionGroupDisappearTimeout()}scheduleInfoDisappear(){this.infoDisappearTimeoutId=window.setTimeout(this.onInfoDisappearTimeout,3e3)}clearInfoDisappearTimeout(){null!==this.infoDisappearTimeoutId&&(window.clearTimeout(this.infoDisappearTimeoutId),this.infoDisappearTimeoutId=null)}scheduleTransitionGroupDisappear(){this.transitionGroupDisappearTimeoutId=window.setTimeout(this.onTransitionGroupDisappearTimeout,So.appear+3e3+So.exit)}clearTransitionGroupDisappearTimeout(){null!==this.transitionGroupDisappearTimeoutId&&(window.clearTimeout(this.transitionGroupDisappearTimeoutId),this.transitionGroupDisappearTimeoutId=null)}onInfoDisappearTimeout=()=>{this.setState({renderInfo:!1})};onTransitionGroupDisappearTimeout=()=>{this.setState({renderTransitionGroup:!1})};renderFullScreenNotification(){return this.state.renderInfo?be.createElement(ze,{classNames:"toast-animation",appear:!0,enter:!1,exit:!0,timeout:So},be.createElement("div",{key:"notification",className:"toast-notification"},"Press ",be.createElement(Co,{darwinKeys:["^","⌘","F"],keys:["F11"]})," ","to exit fullscreen")):null}render(){return this.state.renderTransitionGroup?be.createElement(Ie,{className:"toast-notification-container"},this.renderFullScreenNotification()):null}}function ko(e){if(e instanceof jr)return bi;if(e.missing)return ai;const t=e.gitHubRepository;return t?t.isPrivate?Vi:t.fork?no:eo:wi}var Ro,xo,To,Do,Ao,Po,Io,_o;function No(e){switch(e.trim()){case"CR":return"CR";case"LF":return"LF";case"CRLF":return"CRLF";default:return null}}!function(e){e[e.Text=0]="Text",e[e.Image=1]="Image",e[e.Binary=2]="Binary",e[e.Submodule=3]="Submodule",e[e.LargeText=4]="LargeText",e[e.Unrenderable=5]="Unrenderable"}(Ro||(Ro={})),function(e){e[e.Context=0]="Context",e[e.Add=1]="Add",e[e.Delete=2]="Delete",e[e.Hunk=3]="Hunk"}(xo||(xo={}));class Oo{text;type;originalLineNumber;oldLineNumber;newLineNumber;noTrailingNewLine;constructor(e,t,n,r,i,o=!1){this.text=e,this.type=t,this.originalLineNumber=n,this.oldLineNumber=r,this.newLineNumber=i,this.noTrailingNewLine=o}withNoTrailingNewLine(e){return new Oo(this.text,this.type,this.originalLineNumber,this.oldLineNumber,this.newLineNumber,e)}isIncludeableLine(){return this.type===xo.Add||this.type===xo.Delete}get content(){return this.text.substring(1)}equals(e){return this.text===e.text&&this.type===e.type&&this.originalLineNumber===e.originalLineNumber&&this.oldLineNumber===e.oldLineNumber&&this.newLineNumber===e.newLineNumber&&this.noTrailingNewLine===e.noTrailingNewLine}}function Mo(e,t){switch(e){case To.All:return t;case To.None:return!t;case To.Partial:return!1;default:return et(0,`Unknown selection type ${e}`)}}!function(e){e.All="All",e.Partial="Partial",e.None="None"}(To||(To={}));class Bo{defaultSelectionType;divergingLines;selectableLines;static fromInitialSelection(e){return e!==To.All&&e!==To.None?et(0,"Can only instantiate a DiffSelection with All or None as the initial selection"):new Bo(e,null,null)}constructor(e,t=null,n=null){this.defaultSelectionType=e,this.divergingLines=t,this.selectableLines=n}getSelectionType(){const e=this.divergingLines,t=this.selectableLines;if(!e)return this.defaultSelectionType;if(0===e.size)return this.defaultSelectionType;if(t&&t.size===e.size){const n=[...t].every((t=>e.has(t)));if(n)return this.defaultSelectionType===To.All?To.None:To.All}return To.Partial}isSelected(e){const t=!!this.divergingLines&&this.divergingLines.has(e);return this.defaultSelectionType===To.All?!t:this.defaultSelectionType===To.None?t:et(this.defaultSelectionType,`Unknown base selection type ${this.defaultSelectionType}`)}isSelectable(e){return!this.selectableLines||this.selectableLines.has(e)}withLineSelection(e,t){return this.withRangeSelection(e,1,t)}withRangeSelection(e,t,n){const r=this.getSelectionType(),i=e+t;if(Mo(r,n))return this;if(r===To.Partial){const t=new Set(this.divergingLines);if(Mo(this.defaultSelectionType,n))for(let n=e;n<i;n++)t.delete(n);else for(let n=e;n<i;n++)this.isSelectable(n)&&t.add(n);return new Bo(this.defaultSelectionType,0===t.size?null:t,this.selectableLines)}{const t=new Set;for(let n=e;n<i;n++)this.isSelectable(n)&&t.add(n);return new Bo(r,t,this.selectableLines)}}withToggleLineSelection(e){return this.withLineSelection(e,!this.isSelected(e))}withSelectAll(){return new Bo(To.All,null,this.selectableLines)}withSelectNone(){return new Bo(To.None,null,this.selectableLines)}withSelectableLines(e){const t=this.divergingLines?new Set([...this.divergingLines].filter((t=>e.has(t)))):null;return new Bo(this.defaultSelectionType,t,e)}}class Fo{contents;mediaType;bytes;constructor(e,t,n){this.contents=e,this.mediaType=t,this.bytes=n}}!function(e){e.None="None",e.Up="Up",e.Down="Down",e.Both="Both",e.Short="Short"}(Do||(Do={}));class Lo{header;lines;unifiedDiffStart;unifiedDiffEnd;expansionType;constructor(e,t,n,r,i){this.header=e,this.lines=t,this.unifiedDiffStart=n,this.unifiedDiffEnd=r,this.expansionType=i}equals(e){return this===e||this.header.equals(e.header)&&this.unifiedDiffStart===e.unifiedDiffStart&&this.unifiedDiffEnd===e.unifiedDiffEnd&&this.expansionType===e.expansionType&&this.lines.length===e.lines.length&&this.lines.every(((t,n)=>t.equals(e.lines[n])))}}class Ho{oldStartLine;oldLineCount;newStartLine;newLineCount;constructor(e,t,n,r){this.oldStartLine=e,this.oldLineCount=t,this.newStartLine=n,this.newLineCount=r}toDiffLineRepresentation(){return`@@ -${this.oldStartLine},${this.oldLineCount} +${this.newStartLine},${this.newLineCount} @@`}equals(e){return this.oldStartLine===e.oldStartLine&&this.oldLineCount===e.oldLineCount&&this.newStartLine===e.newStartLine&&this.oldStartLine===e.oldStartLine}}function Uo(e){return e.kind===Io.Conflicted}function Wo(e){return e.hasOwnProperty("conflictMarkerCount")}function $o(e){return!e.hasOwnProperty("conflictMarkerCount")}!function(e){e[e.TwoUp=0]="TwoUp",e[e.Swipe=1]="Swipe",e[e.OnionSkin=2]="OnionSkin",e[e.Difference=3]="Difference"}(Ao||(Ao={})),function(e){e.Modified="M",e.Added="A",e.Deleted="D",e.Renamed="R",e.Copied="C",e.Unchanged=".",e.Untracked="?",e.Ignored="!",e.UpdatedButUnmerged="U"}(Po||(Po={})),function(e){e.New="New",e.Modified="Modified",e.Deleted="Deleted",e.Copied="Copied",e.Renamed="Renamed",e.Conflicted="Conflicted",e.Untracked="Untracked"}(Io||(Io={})),function(e){e.AddedByUs="added-by-us",e.DeletedByUs="deleted-by-us",e.AddedByThem="added-by-them",e.DeletedByThem="deleted-by-them",e.BothDeleted="both-deleted",e.BothAdded="both-added",e.BothModified="both-modified"}(_o||(_o={}));class zo{path;status;id;constructor(e,t){this.path=e,this.status=t,t.kind===Io.Renamed||t.kind===Io.Copied?this.id=`${t.kind}+${e}+${t.oldPath}`:this.id=`${t.kind}+${e}`}}class qo extends zo{selection;constructor(e,t,n){super(e,t),this.selection=n}withIncludeAll(e){const t=e?this.selection.withSelectAll():this.selection.withSelectNone();return this.withSelection(t)}withSelection(e){return new qo(this.path,this.status,e)}}class jo extends zo{commitish;parentCommitish;constructor(e,t,n,r){super(e,t),this.commitish=n,this.parentCommitish=r,this.commitish=n}}class Go{files;includeAll;static fromFiles(e){return new Go(e,function(e){if(!e.length)return!0;const t=e.every((e=>e.selection.getSelectionType()===To.All)),n=e.every((e=>e.selection.getSelectionType()===To.None));let r=null;return t?r=!0:n&&(r=!1),r}(e))}fileIxById=new Map;constructor(e,t=!0){this.files=e,this.includeAll=t,e.forEach(((e,t)=>this.fileIxById.set(e.id,t)))}withIncludeAllFiles(e){const t=this.files.map((t=>t.withIncludeAll(e)));return new Go(t,e)}findFileWithID(e){const t=this.fileIxById.get(e);return void 0!==t&&this.files[t]||null}findFileIndexByID(e){const t=this.fileIxById.get(e);return void 0!==t?t:-1}}function Vo(e){switch(e.kind){case Io.New:case Io.Untracked:return Ci;case Io.Modified:return Si;case Io.Deleted:return Ei;case Io.Renamed:return ki;case Io.Conflicted:return Wo(e)?e.conflictMarkerCount>0?ai:pi:ai;case Io.Copied:return Ci;default:return et(0,`Unknown file status ${e}`)}}const Ko={w:16,h:16,d:"M8 2.5c1.645 0 3.123.722 4.131 1.869l-1.204 1.204a.25.25 0 0 0 .177.427h3.646a.25.25 0 0 0 .25-.25V2.104a.25.25 0 0 0-.427-.177l-1.38 1.38A7.001 7.001 0 0 0 1.05 7.16a.75.75 0 1 0 1.49.178A5.501 5.501 0 0 1 8 2.5zm6.294 5.505a.75.75 0 0 0-.833.656 5.501 5.501 0 0 1-9.592 2.97l1.204-1.204A.25.25 0 0 0 4.896 10H1.25a.25.25 0 0 0-.25.25v3.646c0 .223.27.335.427.177l1.38-1.38A7.001 7.001 0 0 0 14.95 8.84a.75.75 0 0 0-.657-.834z",fr:"evenodd"},Yo=({text:e,highlight:t})=>be.createElement("span",null,e.split("").map(((e,n)=>[e,t.includes(n)])).concat([["",!1]]).reduce(((e,[t,n],r,i)=>{if(n===e.matched&&r<i.length-1)e.str+=t;else{const i=e.matched?"mark":"span";e.result.push(be.createElement(i,{key:r},e.str)),e.str=t,e.matched=n}return e}),{matched:!1,str:"",result:new Array}).result);class Xo extends be.Component{wrapperRef=ri();render(){const{tooltip:e,tagName:t,children:n,className:r,tooltipClassName:i,...o}=this.props;return be.createElement(t??"span",{ref:this.wrapperRef,className:r,children:be.createElement(be.Fragment,null,void 0!==e&&be.createElement(Jr,{target:this.wrapperRef,className:i,...o},e),n)})}}class Qo extends be.Component{listItemRef=ri();render(){const e=this.props.repository,t=e instanceof Ir?e.gitHubRepository:null,n=this.props.changedFilesCount>0,r=e instanceof Ir?e.alias:null;let i=null;this.props.needsDisambiguation&&t&&(i=`${t.owner.login}/`);const o=Vr()("name",{alias:null!==r});return be.createElement("div",{className:"repository-list-item",ref:this.listItemRef},be.createElement(Jr,{target:this.listItemRef},this.renderTooltip()),be.createElement(si,{className:"icon-for-repository",symbol:ko(e)}),be.createElement("div",{className:Vr()(o)},i?be.createElement("span",{className:"prefix"},i):null,be.createElement(Yo,{text:r??e.name,highlight:this.props.matches.title})),e instanceof Ir&&Zo({aheadBehind:this.props.aheadBehind,hasChanges:n}))}renderTooltip(){const e=this.props.repository,t=e instanceof Ir?e.gitHubRepository:null,n=e instanceof Ir?e.alias:null,r=t?t.fullName:e.name;return be.createElement(be.Fragment,null,be.createElement("div",null,be.createElement("strong",null,r),n&&be.createElement(be.Fragment,null," (",n,")")),be.createElement("div",null,e.path))}shouldComponentUpdate(e){return!(e.repository instanceof Ir&&this.props.repository instanceof Ir)||e.repository.id!==this.props.repository.id||e.matches!==this.props.matches}}const Zo=e=>be.createElement("div",{className:"repo-indicators"},e.aheadBehind&&Jo(e.aheadBehind),e.hasChanges&&es()),Jo=e=>{const{ahead:t,behind:n}=e;if(0===t&&0===n)return null;const r="The currently checked out branch is"+(n?` ${ts(n)} behind `:"")+(n&&t?"and":"")+(t?` ${ts(t)} ahead of `:"")+"its tracked branch.";return be.createElement(Xo,{className:"ahead-behind",tagName:"div",tooltip:r},t>0&&be.createElement(si,{symbol:ui}),n>0&&be.createElement(si,{symbol:li}))},es=()=>be.createElement(Xo,{className:"change-indicator-wrapper",tooltip:"There are uncommitted changes in this repository"},be.createElement(si,{symbol:Ri})),ts=e=>`${e} commit${e>1?"s":""}`;var ns;!function(e){e.Enterprise="_Enterprise_",e.NonGitHub="_Non-GitHub_"}(ns||(ns={}));const rs={changedFilesCount:0,aheadBehind:null};function is(e,t,n){const r=new Map;for(const n of e){const e=t.find((e=>e.id===n));if(void 0!==e){const t=(e instanceof Ir?e.alias:null)??e.name,n=r.get(t)||0;r.set(t,n+1)}}const i=new Array;for(const o of e){const e=t.find((e=>e.id===o));if(void 0===e)continue;const{aheadBehind:s,changedFilesCount:a}=n.get(o)||rs,l=e instanceof Ir?e.alias:null,c=e instanceof Ir?[l??e.name,Or(e)]:[e.name],u=r.get(l??e.name)||0;i.push({text:c,id:o.toString(),repository:e,needsDisambiguation:u>1,aheadBehind:s,changedFilesCount:a})}return{identifier:"Recent",items:i}}const os=e=>e instanceof Ir&&null!==e.alias?e.alias:e.name;var ss=n(6218),as=n(1698),ls=n.n(as),cs=n(5682),us=n(5256),hs=n(9002),ps=n(4122);var ds=function(e){function t(){var e,n,r,i;(0,cs.Z)(this,t);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return n=r=(0,hs.Z)(this,(e=t.__proto__||ls()(t)).call.apply(e,[this].concat(s))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,i=e.onResize;if(r._parentNode){var o=r._parentNode.offsetHeight||0,s=r._parentNode.offsetWidth||0,a=window.getComputedStyle(r._parentNode)||{},l=parseInt(a.paddingLeft,10)||0,c=parseInt(a.paddingRight,10)||0,u=parseInt(a.paddingTop,10)||0,h=parseInt(a.paddingBottom,10)||0,p=o-u-h,d=s-l-c;(!t&&r.state.height!==p||!n&&r.state.width!==d)&&(r.setState({height:o-u-h,width:s-l-c}),i({height:o,width:s}))}},r._setRef=function(e){r._autoSizer=e},i=n,(0,hs.Z)(r,i)}return(0,ps.Z)(t,e),(0,us.Z)(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var n="undefined"!=typeof document&&document.attachEvent;if(!n){var r=function(){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)};return function(t){return e(t)}}(),i=function(){var e=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;return function(t){return e(t)}}(),o=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;o(this),this.__resizeRAF__&&i(this.__resizeRAF__),this.__resizeRAF__=r((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},a=!1,l="",c="animationstart",u="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),p=document.createElement("fakeelement");if(void 0!==p.style.animationName&&(a=!0),!1===a)for(var d=0;d<u.length;d++)if(void 0!==p.style[u[d]+"AnimationName"]){l="-"+u[d].toLowerCase()+"-",c=h[d],a=!0;break}var m="resizeanim",f="@"+l+"keyframes "+m+" { from { opacity: 0; } to { opacity: 0; } } ",g=l+"animation: 1ms "+m+"; "}return{addResizeListener:function(r,i){if(n)r.attachEvent("onresize",i);else{if(!r.__resizeTriggers__){var a=r.ownerDocument,l=t.getComputedStyle(r);l&&"static"==l.position&&(r.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var n=(f||"")+".resize-triggers { "+(g||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(t.createTextNode(n)),r.appendChild(i)}}(a),r.__resizeLast__={},r.__resizeListeners__=[],(r.__resizeTriggers__=a.createElement("div")).className="resize-triggers",r.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',r.appendChild(r.__resizeTriggers__),o(r),r.addEventListener("scroll",s,!0),c&&(r.__resizeTriggers__.__animationListener__=function(e){e.animationName==m&&o(r)},r.__resizeTriggers__.addEventListener(c,r.__resizeTriggers__.__animationListener__))}r.__resizeListeners__.push(i)}},removeResizeListener:function(e,t){if(n)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",s,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(c,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.disableHeight,i=e.disableWidth,o=e.style,s=this.state,a=s.height,l=s.width,c={overflow:"visible"},u={};return r||(c.height=0,u.height=a),i||(c.width=0,u.width=l),be.createElement("div",{className:n,ref:this._setRef,style:(0,ss.Z)({},c,o)},t(u))}}]),t}(be.PureComponent);ds.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},ds.propTypes=null;const ms=ds;var fs=n(9159),gs=n.n(fs);function ys(e){var t=e.cellCount,n=e.cellSize,r=e.computeMetadataCallback,i=e.computeMetadataCallbackProps,o=e.nextCellsCount,s=e.nextCellSize,a=e.nextScrollToIndex,l=e.scrollToIndex,c=e.updateScrollOffsetForScrollToIndex;t===o&&("number"!=typeof n&&"number"!=typeof s||n===s)||(r(i),l>=0&&l===a&&c())}var bs=n(9326),ws=function(){function e(t){var n=t.cellCount,r=t.cellSizeGetter,i=t.estimatedCellSize;(0,cs.Z)(this,e),this._cellSizeAndPositionData={},this._lastMeasuredIndex=-1,this._lastBatchedIndex=-1,this._cellSizeGetter=r,this._cellCount=n,this._estimatedCellSize=i}return(0,us.Z)(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize,r=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=n,this._cellSizeGetter=r}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index "+e+" is outside of range 0.."+this._cellCount);if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,r=this._lastMeasuredIndex+1;r<=e;r++){var i=this._cellSizeGetter({index:r});if(void 0===i||isNaN(i))throw Error("Invalid size returned for cell "+r+" of value "+i);null===i?(this._cellSizeAndPositionData[r]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[r]={offset:n,size:i},n+=i,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,r=e.containerSize,i=e.currentOffset,o=e.targetIndex;if(r<=0)return 0;var s=this.getSizeAndPositionOfCell(o),a=s.offset,l=a-r+s.size,c=void 0;switch(n){case"start":c=a;break;case"end":c=l;break;case"center":c=a-(r-s.size)/2;break;default:c=Math.max(l,Math.min(a,i))}var u=this.getTotalSize();return Math.max(0,Math.min(u-r,c))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;if(0===this.getTotalSize())return{};var r=n+t,i=this._findNearestCell(n),o=this.getSizeAndPositionOfCell(i);n=o.offset+o.size;for(var s=i;n<r&&s<this._cellCount-1;)s++,n+=this.getSizeAndPositionOfCell(s).size;return{start:i,stop:s}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,n){for(;t<=e;){var r=t+Math.floor((e-t)/2),i=this.getSizeAndPositionOfCell(r).offset;if(i===n)return r;i<n?t=r+1:i>n&&(e=r-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var n=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=n,n*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(n,0,e):this._exponentialSearch(n,e)}}]),e}();const vs=ws;const Cs=function(){function e(t){var n=t.maxScrollSize,r=void 0===n?"undefined"!=typeof window&&window.chrome&&window.chrome.webstore?16777100:15e5:n,i=(0,bs.Z)(t,["maxScrollSize"]);(0,cs.Z)(this,e),this._cellSizeAndPositionManager=new vs(i),this._maxScrollSize=r}return(0,us.Z)(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize(),o=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:i});return Math.round(o*(i-r))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,r=e.containerSize,i=e.currentOffset,o=e.targetIndex;i=this._safeOffsetToOffset({containerSize:r,offset:i});var s=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:r,currentOffset:i,targetIndex:o});return this._offsetToSafeOffset({containerSize:r,offset:s})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,r=e.totalSize;return r<=t?0:n/(r-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(r===i)return n;var o=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(o*(i-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(r===i)return n;var o=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:i});return Math.round(o*(r-t))}}]),e}();var Ss=n(4578),Es=n.n(Ss);function ks(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var r=n.callback,i=n.indices,o=Es()(i),s=!e||o.every((function(e){var t=i[e];return Array.isArray(t)?t.length>0:t>=0})),a=o.length!==Es()(t).length||o.some((function(e){var n=t[e],r=i[e];return Array.isArray(r)?n.join(",")!==r.join(","):n!==r}));t=i,s&&a&&r(i)}}function Rs(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,i=e.startIndex,o=e.stopIndex;return 1===r?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(t-1,o+n)}:{overscanStartIndex:Math.max(0,i-n),overscanStopIndex:Math.min(t-1,o)}}function xs(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,r=e.previousCellsCount,i=e.previousCellSize,o=e.previousScrollToAlignment,s=e.previousScrollToIndex,a=e.previousSize,l=e.scrollOffset,c=e.scrollToAlignment,u=e.scrollToIndex,h=e.size,p=e.sizeJustIncreasedFromZero,d=e.updateScrollIndexCallback,m=n.getCellCount(),f=u>=0&&u<m;f&&(h!==a||p||!i||"number"==typeof t&&t!==i||c!==o||u!==s)?d(u):!f&&m>0&&(h<a||m<r)&&l>n.getTotalSize()-h&&d(m-1)}var Ts=n(6328),Ds=n.n(Ts);function As(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function Ps(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function Is(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}As.__suppressDeprecationWarning=!0,Ps.__suppressDeprecationWarning=!0,Is.__suppressDeprecationWarning=!0;var _s=void 0,Ns=(_s="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||_s.webkitRequestAnimationFrame||_s.mozRequestAnimationFrame||_s.oRequestAnimationFrame||_s.msRequestAnimationFrame||function(e){return _s.setTimeout(e,1e3/60)},Os=_s.cancelAnimationFrame||_s.webkitCancelAnimationFrame||_s.mozCancelAnimationFrame||_s.oCancelAnimationFrame||_s.msCancelAnimationFrame||function(e){_s.clearTimeout(e)},Ms=Ns,Bs=Os,Fs=function(e){return Bs(e.id)},Ls="requested",Hs=function(e){function t(e){(0,cs.Z)(this,t);var n=(0,hs.Z)(this,(t.__proto__||ls()(t)).call(this,e));n._onGridRenderedMemoizer=ks(),n._onScrollMemoizer=ks(!1),n._deferredInvalidateColumnIndex=null,n._deferredInvalidateRowIndex=null,n._recomputeScrollLeftFlag=!1,n._recomputeScrollTopFlag=!1,n._horizontalScrollBarSize=0,n._verticalScrollBarSize=0,n._scrollbarPresenceChanged=!1,n._renderedColumnStartIndex=0,n._renderedColumnStopIndex=0,n._renderedRowStartIndex=0,n._renderedRowStopIndex=0,n._styleCache={},n._cellCache={},n._debounceScrollEndedCallback=function(){n._disablePointerEventsTimeoutId=null,n.setState({isScrolling:!1,needToResetStyleCache:!1})},n._invokeOnGridRenderedHelper=function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})},n._setScrollingContainerRef=function(e){n._scrollingContainer=e},n._onScroll=function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)};var r=new Cs({cellCount:e.columnCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.columnWidth)(n)},estimatedCellSize:t._getEstimatedColumnSize(e)}),i=new Cs({cellCount:e.rowCount,cellSizeGetter:function(n){return t._wrapSizeGetter(e.rowHeight)(n)},estimatedCellSize:t._getEstimatedRowSize(e)});return n.state={instanceProps:{columnSizeAndPositionManager:r,rowSizeAndPositionManager:i,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(n._initialScrollTop=n._getCalculatedScrollTop(e,n.state)),e.scrollToColumn>0&&(n._initialScrollLeft=n._getCalculatedScrollLeft(e,n.state)),n}return(0,ps.Z)(t,e),(0,us.Z)(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?this.props.scrollToAlignment:t,r=e.columnIndex,i=void 0===r?this.props.scrollToColumn:r,o=e.rowIndex,s=void 0===o?this.props.scrollToRow:o,a=(0,ss.Z)({},this.props,{scrollToAlignment:n,scrollToColumn:i,scrollToRow:s});return{scrollLeft:this._getCalculatedScrollLeft(a),scrollTop:this._getCalculatedScrollTop(a)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,n=void 0===t?0:t,r=e.scrollTop,i=void 0===r?0:r;if(!(i<0)){this._debounceScrollEnded();var o=this.props,s=o.autoHeight,a=o.autoWidth,l=o.height,c=o.width,u=this.state.instanceProps,h=u.scrollbarSize,p=u.rowSizeAndPositionManager.getTotalSize(),d=u.columnSizeAndPositionManager.getTotalSize(),m=Math.min(Math.max(0,d-c+h),n),f=Math.min(Math.max(0,p-l+h),i);if(this.state.scrollLeft!==m||this.state.scrollTop!==f){var g={isScrolling:!0,scrollDirectionHorizontal:m!==this.state.scrollLeft?m>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:f!==this.state.scrollTop?f>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:"observed"};s||(g.scrollTop=f),a||(g.scrollLeft=m),g.needToResetStyleCache=!1,this.setState(g)}this._invokeOnScrollMemoizer({scrollLeft:m,scrollTop:f,totalColumnsWidth:d,totalRowsHeight:p})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount,r=this.state.instanceProps;r.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),r.rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,i=void 0===r?0:r,o=this.props,s=o.scrollToColumn,a=o.scrollToRow,l=this.state.instanceProps;l.columnSizeAndPositionManager.resetCell(n),l.rowSizeAndPositionManager.resetCell(i),this._recomputeScrollLeftFlag=s>=0&&n<=s,this._recomputeScrollTopFlag=a>=0&&i<=a,this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,r=this.props.columnCount,i=this.props;r>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn((0,ss.Z)({},i,{scrollToColumn:t})),void 0!==n&&this._updateScrollTopForScrollToRow((0,ss.Z)({},i,{scrollToRow:n}))}},{key:"componentDidMount",value:function(){var e=this.props,n=e.getScrollbarSize,r=e.height,i=e.scrollLeft,o=e.scrollToColumn,s=e.scrollTop,a=e.scrollToRow,l=e.width,c=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),c.scrollbarSizeMeasured||this.setState((function(e){var t=(0,ss.Z)({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=n(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof i&&i>=0||"number"==typeof s&&s>=0){var u=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:i,scrollTop:s});u&&(u.needToResetStyleCache=!1,this.setState(u))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var h=r>0&&l>0;o>=0&&h&&this._updateScrollLeftForScrollToColumn(),a>=0&&h&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:i||0,scrollTop:s||0,totalColumnsWidth:c.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:c.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,i=r.autoHeight,o=r.autoWidth,s=r.columnCount,a=r.height,l=r.rowCount,c=r.scrollToAlignment,u=r.scrollToColumn,h=r.scrollToRow,p=r.width,d=this.state,m=d.scrollLeft,f=d.scrollPositionChangeReason,g=d.scrollTop,y=d.instanceProps;this._handleInvalidatedGridSize();var b=s>0&&0===e.columnCount||l>0&&0===e.rowCount;f===Ls&&(!o&&m>=0&&(m!==this._scrollingContainer.scrollLeft||b)&&(this._scrollingContainer.scrollLeft=m),!i&&g>=0&&(g!==this._scrollingContainer.scrollTop||b)&&(this._scrollingContainer.scrollTop=g));var w=(0===e.width||0===e.height)&&a>0&&p>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):xs({cellSizeAndPositionManager:y.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:m,scrollToAlignment:c,scrollToIndex:u,size:p,sizeJustIncreasedFromZero:w,updateScrollIndexCallback:function(){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):xs({cellSizeAndPositionManager:y.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:g,scrollToAlignment:c,scrollToIndex:h,size:a,sizeJustIncreasedFromZero:w,updateScrollIndexCallback:function(){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),m!==t.scrollLeft||g!==t.scrollTop){var v=y.rowSizeAndPositionManager.getTotalSize(),C=y.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:m,scrollTop:g,totalColumnsWidth:C,totalRowsHeight:v})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Fs(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,r=e.autoWidth,i=e.className,o=e.containerProps,s=e.containerRole,a=e.containerStyle,l=e.height,c=e.id,u=e.noContentRenderer,h=e.role,p=e.style,d=e.tabIndex,m=e.width,f=this.state,g=f.instanceProps,y=f.needToResetStyleCache,b=this._isScrolling(),w={boxSizing:"border-box",direction:"ltr",height:n?"auto":l,position:"relative",width:r?"auto":m,WebkitOverflowScrolling:"touch",willChange:"transform"};y&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var v=g.columnSizeAndPositionManager.getTotalSize(),C=g.rowSizeAndPositionManager.getTotalSize(),S=C>l?g.scrollbarSize:0,E=v>m?g.scrollbarSize:0;E===this._horizontalScrollBarSize&&S===this._verticalScrollBarSize||(this._horizontalScrollBarSize=E,this._verticalScrollBarSize=S,this._scrollbarPresenceChanged=!0),w.overflowX=v+S<=m?"hidden":"auto",w.overflowY=C+E<=l?"hidden":"auto";var k=this._childrenToDisplay,R=0===k.length&&l>0&&m>0;return be.createElement("div",(0,ss.Z)({ref:this._setScrollingContainerRef},o,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Vr()("ReactVirtualized__Grid",i),id:c,onScroll:this._onScroll,role:h,style:(0,ss.Z)({},w,p),tabIndex:d}),k.length>0&&be.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:s,style:(0,ss.Z)({width:t?"auto":v,height:C,maxWidth:v,maxHeight:C,overflow:"hidden",pointerEvents:b?"none":"",position:"relative"},a)},k),R&&u())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,r=e.cellRangeRenderer,i=e.columnCount,o=e.deferredMeasurementCache,s=e.height,a=e.overscanColumnCount,l=e.overscanIndicesGetter,c=e.overscanRowCount,u=e.rowCount,h=e.width,p=e.isScrollingOptOut,d=t.scrollDirectionHorizontal,m=t.scrollDirectionVertical,f=t.instanceProps,g=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,y=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,b=this._isScrolling(e,t);if(this._childrenToDisplay=[],s>0&&h>0){var w=f.columnSizeAndPositionManager.getVisibleCellRange({containerSize:h,offset:y}),v=f.rowSizeAndPositionManager.getVisibleCellRange({containerSize:s,offset:g}),C=f.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:h,offset:y}),S=f.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:s,offset:g});this._renderedColumnStartIndex=w.start,this._renderedColumnStopIndex=w.stop,this._renderedRowStartIndex=v.start,this._renderedRowStopIndex=v.stop;var E=l({direction:"horizontal",cellCount:i,overscanCellsCount:a,scrollDirection:d,startIndex:"number"==typeof w.start?w.start:0,stopIndex:"number"==typeof w.stop?w.stop:-1}),k=l({direction:"vertical",cellCount:u,overscanCellsCount:c,scrollDirection:m,startIndex:"number"==typeof v.start?v.start:0,stopIndex:"number"==typeof v.stop?v.stop:-1}),R=E.overscanStartIndex,x=E.overscanStopIndex,T=k.overscanStartIndex,D=k.overscanStopIndex;if(o){if(!o.hasFixedHeight())for(var A=T;A<=D;A++)if(!o.has(A,0)){R=0,x=i-1;break}if(!o.hasFixedWidth())for(var P=R;P<=x;P++)if(!o.has(0,P)){T=0,D=u-1;break}}this._childrenToDisplay=r({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:f.columnSizeAndPositionManager,columnStartIndex:R,columnStopIndex:x,deferredMeasurementCache:o,horizontalOffsetAdjustment:C,isScrolling:b,isScrollingOptOut:p,parent:this,rowSizeAndPositionManager:f.rowSizeAndPositionManager,rowStartIndex:T,rowStopIndex:D,scrollLeft:y,scrollTop:g,styleCache:this._styleCache,verticalOffsetAdjustment:S,visibleColumnIndices:w,visibleRowIndices:v}),this._columnStartIndex=R,this._columnStopIndex=x,this._rowStartIndex=T,this._rowStopIndex=D}}},{key:"_debounceScrollEnded",value:function(){var e,t,n,r,i=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Fs(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=(e=this._debounceScrollEndedCallback,t=i,n=Date.now(),r={id:Ms((function i(){Date.now()-n>=t?e.call():r.id=Ms(i)}))})}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,r=e.scrollTop,i=e.totalColumnsWidth,o=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,r=e.scrollTop,s=t.props,a=s.height;(0,s.onScroll)({clientHeight:a,clientWidth:s.width,scrollHeight:o,scrollLeft:n,scrollTop:r,scrollWidth:i})},indices:{scrollLeft:n,scrollTop:r}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var n=e.scrollLeft,r=e.scrollTop,i=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:n,scrollTop:r});i&&(i.needToResetStyleCache=!1,this.setState(i))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,n)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,r=t._getScrollLeftForScrollToColumnStateUpdate(e,n);r&&(r.needToResetStyleCache=!1,this.setState(r))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,n)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,n=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var r=this._rowStartIndex;r<=this._rowStopIndex;r++)for(var i=this._columnStartIndex;i<=this._columnStopIndex;i++){var o=r+"-"+i;this._styleCache[o]=e[o],n&&(this._cellCache[o]=t[o])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,r=t._getScrollTopForScrollToRowStateUpdate(e,n);r&&(r.needToResetStyleCache=!1,this.setState(r))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var r={};0===e.columnCount&&0!==n.scrollLeft||0===e.rowCount&&0!==n.scrollTop?(r.scrollLeft=0,r.scrollTop=0):(e.scrollLeft!==n.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==n.scrollTop&&e.scrollToRow<0)&&gs()(r,t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var i=n.instanceProps;r.needToResetStyleCache=!1,e.columnWidth===i.prevColumnWidth&&e.rowHeight===i.prevRowHeight||(r.needToResetStyleCache=!0),i.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),i.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==i.prevColumnCount&&0!==i.prevRowCount||(i.prevColumnCount=0,i.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===i.prevIsScrolling&&gs()(r,{isScrolling:!1});var o=void 0,s=void 0;return ys({cellCount:i.prevColumnCount,cellSize:"number"==typeof i.prevColumnWidth?i.prevColumnWidth:null,computeMetadataCallback:function(){return i.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:i.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){o=t._getScrollLeftForScrollToColumnStateUpdate(e,n)}}),ys({cellCount:i.prevRowCount,cellSize:"number"==typeof i.prevRowHeight?i.prevRowHeight:null,computeMetadataCallback:function(){return i.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:i.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){s=t._getScrollTopForScrollToRowStateUpdate(e,n)}}),i.prevColumnCount=e.columnCount,i.prevColumnWidth=e.columnWidth,i.prevIsScrolling=!0===e.isScrolling,i.prevRowCount=e.rowCount,i.prevRowHeight=e.rowHeight,i.prevScrollToColumn=e.scrollToColumn,i.prevScrollToRow=e.scrollToRow,i.scrollbarSize=e.getScrollbarSize(),void 0===i.scrollbarSize?(i.scrollbarSizeMeasured=!1,i.scrollbarSize=0):i.scrollbarSizeMeasured=!0,r.instanceProps=i,(0,ss.Z)({},r,o,s)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,n=e.scrollLeft,r=e.scrollTop,i={scrollPositionChangeReason:Ls};return"number"==typeof n&&n>=0&&(i.scrollDirectionHorizontal=n>t.scrollLeft?1:-1,i.scrollLeft=n),"number"==typeof r&&r>=0&&(i.scrollDirectionVertical=r>t.scrollTop?1:-1,i.scrollTop=r),"number"==typeof n&&n>=0&&n!==t.scrollLeft||"number"==typeof r&&r>=0&&r!==t.scrollTop?i:null}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var n=e.columnCount,r=e.height,i=e.scrollToAlignment,o=e.scrollToColumn,s=e.width,a=t.scrollLeft,l=t.instanceProps;if(n>0){var c=n-1,u=o<0?c:Math.min(c,o),h=l.rowSizeAndPositionManager.getTotalSize(),p=l.scrollbarSizeMeasured&&h>r?l.scrollbarSize:0;return l.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:s-p,currentOffset:a,targetIndex:u})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,n){var r=n.scrollLeft,i=t._getCalculatedScrollLeft(e,n);return"number"==typeof i&&i>=0&&r!==i?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:i,scrollTop:-1}):null}},{key:"_getCalculatedScrollTop",value:function(e,t){var n=e.height,r=e.rowCount,i=e.scrollToAlignment,o=e.scrollToRow,s=e.width,a=t.scrollTop,l=t.instanceProps;if(r>0){var c=r-1,u=o<0?c:Math.min(c,o),h=l.columnSizeAndPositionManager.getTotalSize(),p=l.scrollbarSizeMeasured&&h>s?l.scrollbarSize:0;return l.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:n-p,currentOffset:a,targetIndex:u})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,n){var r=n.scrollTop,i=t._getCalculatedScrollTop(e,n);return"number"==typeof i&&i>=0&&r!==i?t._getScrollToPositionStateUpdate({prevState:n,scrollLeft:-1,scrollTop:i}):null}}]),t}(be.PureComponent);Hs.defaultProps={"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,n=e.cellRenderer,r=e.columnSizeAndPositionManager,i=e.columnStartIndex,o=e.columnStopIndex,s=e.deferredMeasurementCache,a=e.horizontalOffsetAdjustment,l=e.isScrolling,c=e.isScrollingOptOut,u=e.parent,h=e.rowSizeAndPositionManager,p=e.rowStartIndex,d=e.rowStopIndex,m=e.styleCache,f=e.verticalOffsetAdjustment,g=e.visibleColumnIndices,y=e.visibleRowIndices,b=[],w=r.areOffsetsAdjusted()||h.areOffsetsAdjusted(),v=!l&&!w,C=p;C<=d;C++)for(var S=h.getSizeAndPositionOfCell(C),E=i;E<=o;E++){var k=r.getSizeAndPositionOfCell(E),R=E>=g.start&&E<=g.stop&&C>=y.start&&C<=y.stop,x=C+"-"+E,T=void 0;v&&m[x]?T=m[x]:s&&!s.has(C,E)?T={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(T={height:S.size,left:k.offset+a,position:"absolute",top:S.offset+f,width:k.size},m[x]=T);var D={columnIndex:E,isScrolling:l,isVisible:R,key:x,parent:u,rowIndex:C,style:T},A=void 0;!c&&!l||a||f?A=n(D):(t[x]||(t[x]=n(D)),A=t[x]),null!=A&&!1!==A&&b.push(A)}return b},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:Ds(),noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:Rs,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1},Hs.propTypes=null,function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,i=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=e.displayName||e.name,s="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+s+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=As,t.componentWillReceiveProps=Ps),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Is;var a=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;a.call(this,e,t,r)}}}(Hs);const Us=Hs;var Ws=n(9177),$s=n.n(Ws);function zs(e,t){return $s()(e,t,{strict:!0})}function qs(e,t){if(Object.is(e,t))return!0;if(null===e||null===t||"object"!=typeof e||"object"!=typeof t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!Object.hasOwn(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function js(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Gs(e,t){if(e===t)return!0;if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n))return!1;return!0}class Vs extends be.Component{wrapperRef=null;focusWithinChangedTimeoutId=null;constructor(e){super(e),this.state={focusWithin:!1}}onFocusWithinChanged(e){this.setState({focusWithin:e}),null!==this.focusWithinChangedTimeoutId&&(cancelAnimationFrame(this.focusWithinChangedTimeoutId),this.focusWithinChangedTimeoutId=null),this.focusWithinChangedTimeoutId=requestAnimationFrame((()=>{this.props.onFocusWithinChanged&&this.props.onFocusWithinChanged(e),this.focusWithinChangedTimeoutId=null}))}onWrapperRef=e=>{e&&(e.addEventListener("focusin",(()=>{this.onFocusWithinChanged(!0)})),e.addEventListener("focusout",(()=>{this.onFocusWithinChanged(!1)}))),this.wrapperRef=e};onClick=e=>{this.props.onClick&&this.props.onClick(e)};onKeyDown=e=>{this.props.onKeyDown&&this.props.onKeyDown(e)};onMouseDown=e=>{e.target===this.wrapperRef&&e.preventDefault()};render(){const e=Vr()("focus-container",this.props.className,{"focus-within":this.state.focusWithin});return be.createElement("div",{className:e,ref:this.onWrapperRef,role:this.props.role,onClick:this.onClick,onMouseDown:this.onMouseDown,onKeyDown:this.onKeyDown},this.props.children)}}class Ks extends be.Component{keyboardFocusDetectionState="ready";onRef=e=>{this.props.onRowRef?.(this.props.rowIndex,e)};onRowMouseDown=e=>{this.props.onRowMouseDown(this.props.rowIndex,e)};onRowMouseUp=e=>{this.props.onRowMouseUp(this.props.rowIndex,e)};onRowClick=e=>{this.props.onRowClick(this.props.rowIndex,e)};onRowDoubleClick=e=>{this.props.onRowDoubleClick(this.props.rowIndex,e)};onRowKeyDown=e=>{this.props.onRowKeyDown(this.props.rowIndex,e),this.keyboardFocusDetectionState="failed"};onRowKeyUp=e=>{"focused"===this.keyboardFocusDetectionState&&this.props.onRowKeyboardFocus?.(this.props.rowIndex,e),this.keyboardFocusDetectionState="ready"};onFocus=e=>{this.props.onRowFocus?.(this.props.rowIndex,e),"ready"===this.keyboardFocusDetectionState&&(this.keyboardFocusDetectionState="focused")};onBlur=e=>{this.keyboardFocusDetectionState="ready",this.props.onRowBlur?.(this.props.rowIndex,e)};onContextMenu=e=>{this.props.onContextMenu?.(this.props.rowIndex,e)};render(){const{selected:e,selectable:t,className:n,style:r,rowCount:i,id:o,tabIndex:s,rowIndex:a,children:l,sectionHasHeader:c}=this.props,u=Vr()("list-item",{selected:e},{"not-selectable":!1===t},n),h={...r,width:"100%"};let p=i,d=a.row+1;return c&&(0===a.row?(p=void 0,d=void 0):(p-=1,d-=1)),be.createElement("div",{id:o,role:c&&0===a.row?"presentation":"option","aria-setsize":p,"aria-posinset":d,"aria-selected":t?e:void 0,"aria-label":this.props.ariaLabel,className:u,tabIndex:s,ref:this.onRef,onMouseDown:this.onRowMouseDown,onMouseUp:this.onRowMouseUp,onClick:this.onRowClick,onDoubleClick:this.onRowDoubleClick,onKeyDown:this.onRowKeyDown,onKeyUp:this.onRowKeyUp,style:h,onFocus:this.onFocus,onBlur:this.onBlur,onContextMenu:this.onContextMenu},be.createElement("div",{className:"list-item-content-wrapper","aria-hidden":void 0!==this.props.ariaLabel},l))}}function Ys(e,t,n=(e=>!0)){if(0===e)return null;const{direction:r,row:i}=t,o=t.wrap??!0;let s=i<0||i>=e?"up"===r?e-1:0:i;"down"===r&&-1===i&&(s=-1);const a="up"===r?-1:1;for(let t=0;t<e;t++){if(s+=a,s>=e){if(!o)break;s=0}else if(s<0){if(!o)break;s=e-1}if(i!==s&&n(s))return s}return null}function Xs(e,t,n){let r="up"===e?0:t-1;const i="up"===e?1:-1;for(;r>=0&&r<t;r+=i)if(n(r))return r;return null}function Qs(e,t,n){null===t&&(t=e||0,e=0),n||(n=t<e?-1:1);const r=Math.max(Math.ceil((t-e)/n),0),i=new Array(r);for(let t=0;t<r;t++,e+=n)i[t]=e;return i}const Zs=new class{_isDragInProgress=!1;_dragData=null;emitter=new st.Emitter;get isDragInProgress(){return this._isDragInProgress}emitEnterDropTarget(e){this.emitter.emit("enter-drop-target",e)}emitLeaveDropTarget(){this.emitter.emit("leave-drop-target",{})}onEnterDropTarget(e){return this.emitter.on("enter-drop-target",e)}onLeaveDropTarget(e){return this.emitter.on("leave-drop-target",e)}onDragStarted(e){return this.emitter.on("drag-started",e)}onDragEnded(e){return this.emitter.on("drag-ended",e)}dragStarted(){this._isDragInProgress=!0,this.emitter.emit("drag-started",{})}dragEnded(e){this._isDragInProgress=!1,this.emitter.emit("drag-ended",e)}emitEnterDragZone(e){this.emitter.emit("enter-drop-zone",e)}onEnterDragZone(e){return this.emitter.on("enter-drop-zone",e)}setDragData(e){this._dragData=e}get dragData(){return this._dragData}isDragOfTypeInProgress(e){return this._isDragInProgress&&this.isDragOfType(e)}isDragOfType(e){return null!==this._dragData&&this._dragData.type===e}};var Js,ea,ta,na;!function(e){e[e.Commit=0]="Commit"}(Js||(Js={})),function(e){e[e.Branch=0]="Branch",e[e.Commit=1]="Commit",e[e.ListInsertionPoint=2]="ListInsertionPoint"}(ea||(ea={})),function(e){e.Branch=".branches-list-item",e.PullRequest=".pull-request-item",e.Commit=".commit",e.ListInsertionPoint=".list-insertion-point"}(ta||(ta={})),function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom"}(na||(na={}));class ra extends be.PureComponent{onDragStartedDisposable=null;onDragEndedDisposable=null;constructor(e){super(e),this.state={isDragInProgress:this.isDragInProgress(),feedbackType:na.None}}componentDidMount(){this.onDragStartedDisposable=Zs.onDragStarted(this.updateDragInProgressState),this.onDragEndedDisposable=Zs.onDragEnded((e=>{this.updateDragInProgressState()}))}componentWillUnmount(){null!==this.onDragStartedDisposable&&(this.onDragStartedDisposable.dispose(),this.onDragStartedDisposable=null),null!==this.onDragEndedDisposable&&(this.onDragEndedDisposable.dispose(),this.onDragEndedDisposable=null)}updateDragInProgressState=()=>{const e=this.isDragInProgress();this.setState({isDragInProgress:e,feedbackType:e?this.state.feedbackType:na.None})};renderInsertionIndicator(e){const t=e===na.Top,n=Vr()("list-item-insertion-indicator",{top:t,bottom:!t});return be.createElement(be.Fragment,null,be.createElement("div",{className:`${n} darwin-circle`}),be.createElement("div",{className:`${n} darwin-line`}))}render(){return be.createElement("div",{className:"list-item-insertion-overlay"},this.state.isDragInProgress&&this.renderTopElements(),this.props.children,this.state.isDragInProgress&&this.renderBottomElements())}renderTopElements(){return be.createElement(be.Fragment,null,be.createElement("div",{className:"list-insertion-point top",onMouseEnter:this.getOnInsertionAreaMouseEnter(na.Top),onMouseLeave:this.onInsertionAreaMouseLeave,onMouseUp:this.onInsertionAreaMouseUp}),this.state.feedbackType===na.Top&&this.renderInsertionIndicator(na.Top))}renderBottomElements(){return be.createElement(be.Fragment,null,this.state.feedbackType===na.Bottom&&this.renderInsertionIndicator(na.Bottom),be.createElement("div",{className:"list-insertion-point bottom",onMouseEnter:this.getOnInsertionAreaMouseEnter(na.Bottom),onMouseLeave:this.onInsertionAreaMouseLeave,onMouseUp:this.onInsertionAreaMouseUp}))}isDragInProgress(){return Zs.isDragOfTypeInProgress(this.props.dragType)}getOnInsertionAreaMouseEnter(e){return t=>{this.switchToInsertionFeedbackType(e)}}onInsertionAreaMouseLeave=e=>{this.switchToInsertionFeedbackType(na.None)};switchToInsertionFeedbackType(e){(e===na.None||this.state.isDragInProgress)&&(this.setState({feedbackType:e}),e===na.None?Zs.emitLeaveDropTarget():this.state.isDragInProgress&&null!==Zs.dragData&&Zs.emitEnterDropTarget({type:ea.ListInsertionPoint,data:Zs.dragData,index:this.props.itemIndex}))}onInsertionAreaMouseUp=()=>{if(this.state.isDragInProgress&&this.state.feedbackType!==na.None&&null!==Zs.dragData){if(void 0!==this.props.onDropDataInsertion){let e=this.props.itemIndex;this.state.feedbackType===na.Bottom&&(e={...e,row:e.row+1}),this.props.onDropDataInsertion(e,Zs.dragData)}this.switchToInsertionFeedbackType(na.None)}}}const ia="has-shown-welcome-flow";function oa(){return At(ia,!1)}function sa(e,t){const n=Object.assign({},e);for(const e in t)n[e]=t[e];return n}var aa;function la(e){switch(e){case aa.Light:return"light";case aa.Dark:return"dark";default:return"system"}}!function(e){e.Light="light",e.Dark="dark",e.System="system"}(aa||(aa={}));const ca="autoSwitchTheme",ua="theme";async function ha(){return await W()?aa.Dark:aa.Light}function pa(){return"system"===function(){const e=At(ca,!1);return localStorage.removeItem(ca),e?(da(aa.System),"system"):null}()?aa.System:function(){const e=localStorage.getItem(ua);return e===aa.Light||e===aa.Dark?e:aa.System}()}function da(e){const t=la(e);localStorage.setItem(ua,e),U(t)}function ma(){return Cr()}const fa="show-side-by-side-diff";function ga(){return At(fa,!1)}function ya(e){return`refs/pull/${e}/head`}class ba{ref;sha;gitHubRepository;constructor(e,t,n){this.ref=e,this.sha=t,this.gitHubRepository=n}}class wa{created;title;pullRequestNumber;head;base;author;draft;body;constructor(e,t,n,r,i,o,s,a){this.created=e,this.title=t,this.pullRequestNumber=n,this.head=r,this.base=i,this.author=o,this.draft=s,this.body=a}}var va;!function(e){e.PreviewPullRequest="PreviewPullRequest",e.CreatePullRequest="CreatePullRequest"}(va||(va={}));const Ca=va.PreviewPullRequest,Sa=[["d",864e5],["h",36e5],["m",6e4],["s",1e3]],Ea=e=>{const t=new Array;e=Math.abs(e);for(const[n,r]of Sa)if(t.length>0||e>=r||"s"===n){const i=Math.floor(e/r);e-=i*r,t.push(`${i}${n}`)}return t.join(" ")};function ka(e){let t,n=null;return"success"===e.state?(t=Hn.Completed,n=Un.Success):"pending"===e.state?t=Hn.InProgress:(t=Hn.Completed,n=Un.Failure),{id:e.id,name:e.context,description:xa(t,n),status:t,conclusion:n,appName:"",checkSuiteId:null,htmlUrl:e.target_url}}function Ra(e){if(null===e)return"In progress";switch(e){case Un.ActionRequired:return"Action required";case Un.Canceled:return"Canceled";case Un.TimedOut:return"Timed out";case Un.Failure:return"Failed";case Un.Neutral:return"Neutral";case Un.Success:return"Successful";case Un.Skipped:return"Skipped";case Un.Stale:return"Marked as stale"}}function xa(e,t,n){if(e!==Hn.Completed||null===t)return"In progress";const r=Ra(t);if([Un.ActionRequired,Un.Skipped,Un.Stale].includes(t))return r;const i=t===Un.Success?"in":"after";return void 0!==n&&n>0?`${r} ${i} ${Ea(n)}`:r}const Ta=e=>Date.parse(e.completed_at)-Date.parse(e.started_at);function Da(e){return{id:e.id,name:e.name,description:xa(e.status,e.conclusion,Ta(e)),status:e.status,conclusion:e.conclusion,appName:e.app.name,checkSuiteId:e.check_suite.id,htmlUrl:e.html_url}}function Aa(e){if(0===e.length)return null;if(1===e.length){const{status:t,conclusion:n}=e[0];return{status:t,conclusion:n,checks:e}}return e.some(Pa)?{status:Hn.Completed,conclusion:Un.Failure,checks:e}:e.every(_a)?{status:Hn.Completed,conclusion:Un.Success,checks:e}:{status:Hn.InProgress,conclusion:null,checks:e}}function Pa(e){return function(e){if("completed"===e.status)switch(e.conclusion){case"timed_out":case"stale":case"cancelled":return!0}return!1}(e)||Ia(e)}function Ia(e){if("completed"===e.status)switch(e.conclusion){case"failure":case"action_required":return!0}return!1}function _a(e){if("completed"===e.status)switch(e.conclusion){case"success":case"neutral":case"skipped":return!0}return!1}function Na(e){const t=new Map;for(const n of e){const e=n.name+(n.pull_requests.length>0?"isPullRequestCheckRun":"isPushCheckRun"),r=t.get(e);(void 0===r||r.check_suite.id<n.check_suite.id)&&t.set(e,n)}return[...t.values()]}async function Oa(e,t,n,r){const i=new Map,o=new Array;for(const s of r){if(void 0===s.actionsWorkflow){o.push(s);continue}const{id:r}=s.actionsWorkflow,a=i.get(r)??await e.fetchWorkflowRunJobs(t,n,r);i.set(r,a);const l=a?.jobs.find((e=>e.id===s.id));void 0!==l?o.push({...s,htmlUrl:l.html_url,actionJobSteps:l.steps}):o.push(s)}return o}async function Ma(e,t,n,r,i){const o=Vn.fromAccount(e);return An(e.endpoint)?async function(e,t,n,r){if(0===r.length)return r;const i=new Array,o=new Map;for(const s of r){if(null===s.checkSuiteId){i.push(s);continue}const r=o.get(s.checkSuiteId),a=void 0===r?await e.fetchPRActionWorkflowRunByCheckSuiteId(t,n,s.checkSuiteId):r;o.set(s.checkSuiteId,a),null!==a?i.push({...s,actionsWorkflow:a}):i.push(s)}return i}(o,t,n,i):async function(e,t,n,r,i){const o=await async function(e,t,n,r){const i=new Map,o=await e.fetchPRWorkflowRunsByBranchName(t,n,r);if(null===o)return[];for(const e of o.workflow_runs){const t=i.get(e.workflow_id);if(void 0===t){i.set(e.workflow_id,e);continue}const n=new Date(t.created_at),r=new Date(e.created_at);n.getTime()<r.getTime()&&i.set(e.workflow_id,e)}return Array.from(i.values())}(e,t,n,r);return 0===o.length?i:function(e,t){if(0===t.length||0===e.length)return e;const n=new Array;for(const r of e){const e=t.find((e=>e.check_suite_id===r.checkSuiteId));void 0!==e?n.push({...r,actionsWorkflow:e}):n.push(r)}return n}(i,o)}(o,t,n,r,i)}function Ba(e,t,n,r){return null===e.htmlUrl&&null===n.htmlURL?null:null!==e.htmlUrl?`${e.htmlUrl}/#step:${t.number}:1`:`${n.htmlURL}/pull/${r}`}function Fa(e){const t=new Set(e.map((e=>e.actionsWorkflow?.event)).filter((e=>void 0!==e&&""!==e.trim()))),n=t.size>1,r=new Map;for(const t of e){let e=t.actionsWorkflow?.name||"Other";n&&void 0!==t.actionsWorkflow&&""!==t.actionsWorkflow.event.trim()&&(e=`${e} (${t.actionsWorkflow.event})`),"Other"===e&&"GitHub Code Scanning"===t.appName&&(e="Code scanning results");const i=r.get(e),o=void 0!==i?[...i,t]:[t];r.set(e,o)}return La(r).forEach((e=>{const t=r.get(e);if(void 0!==t){const n=t.sort(((e,t)=>e.name.localeCompare(t.name)));r.set(e,n)}})),r}function La(e){const t=[...e.keys()];return t.sort(((e,t)=>"Other"===e&&"Other"!==t?1:"Other"!==e&&"Other"===t?-1:"Other"===e&&"Other"===t?0:e.localeCompare(t))),t}const Ha=[Un.Failure,Un.Canceled,Un.ActionRequired,Un.TimedOut];var Ua=n(4682),Wa=n(8156);function $a(e){return e instanceof Error&&"string"==typeof e.code&&"string"==typeof e.syscall}var za=n(861),qa=n.n(za);function ja(e,t){const n=function(e,t){if(!1===t.global)throw new Error("A regex has been provided that is not marked as global, and has the potential to execute forever if it finds a match");const n=new Array;let r=t.exec(e);for(;null!==r;)n.push(r),r=t.exec(e);return n}(e,t),r=n.reduce(((e,t)=>e.concat([t.slice(1)])),new Array);return r}const Ga=require("net");function Va(e){return Ka(e.endpoint)}function Ka(e){return`GitHub - ${e}`}class Ya{emitter=new st.Emitter;emitUpdate(){this.emitter.emit("did-update",{})}emitError(e){this.emitter.emit("did-error",e)}onDidUpdate(e){return this.emitter.on("did-update",e)}onDidError(e){return this.emitter.on("did-error",e)}}class Xa{emitter=new st.Emitter;emitUpdate(e){this.emitter.emit("did-update",e)}emitError(e){this.emitter.emit("did-error",e)}onDidUpdate(e){return this.emitter.on("did-update",e)}onDidError(e){return this.emitter.on("did-error",e)}}function Qa(e){const t=e.match(/.*?\/(.*)/);return!t||t.length<2?null:t[1]}const Za="github-desktop-";var Ja,el,tl,nl;!function(e){e[e.Local=0]="Local",e[e.Remote=1]="Remote"}(Ja||(Ja={})),function(e){e.CurrentBranch="CurrentBranch",e.DefaultBranch="DefaultBranch",e.Head="Head",e.UpstreamDefaultBranch="UpstreamDefaultBranch"}(el||(el={}));class rl{name;upstream;tip;type;ref;constructor(e,t,n,r,i){this.name=e,this.upstream=t,this.tip=n,this.type=r,this.ref=i}get upstreamRemoteName(){const e=this.upstream;if(!e)return null;const t=e.match(/(.*?)\/.*/);return!t||t.length<2?null:t[1]}get remoteName(){if(this.type===Ja.Local)return null;const e=this.ref.match(/^refs\/remotes\/(.*?)\/.*/);if(!e||2!==e.length)throw new Error(`Remote branch ref has unexpected format: ${this.ref}`);return e[1]}get upstreamWithoutRemote(){return this.upstream?Qa(this.upstream):null}get nameWithoutRemote(){return this.type===Ja.Local?this.name:Qa(this.name)||this.name}get isDesktopForkRemoteBranch(){return this.type===Ja.Remote&&this.name.startsWith(Za)}}function il(e,t,n=!1){return al(t,e.path,n)}function ol(e,t){return al(e,null,!1,void 0,t)}async function sl(e,t,n=!1,r){const i=await al(t,e.path,n,"bool",r);return null===i?null:"false"!==i}async function al(e,t,n=!1,r,i){const o=["config","-z"];t?n&&o.push("--local"):o.push("--global"),void 0!==r&&o.push("--type",r),o.push(e);const s=await qw(o,t||__dirname,"getConfigValueInPath",{successExitCodes:new Set([0,1]),env:i});return 1===s.exitCode?null:s.stdout.split("\0")[0]}async function ll(e,t,n,r){return hl(t,n,e.path,r)}async function cl(e,t,n){return hl(e,t,null,n)}async function ul(e){await async function(e,t){const{stdout:n,exitCode:r}=await qw(["config","--global","-z","--get-all",e,t],__dirname,"addGlobalConfigValue",{successExitCodes:new Set([0,1])});1!==r&&n.split("\0").includes(t)||await async function(e,t){await qw(["config","--global","--add","safe.directory",t],__dirname,"addGlobalConfigValue")}(0,t)}("safe.directory",e)}async function hl(e,t,n,r){const i=r?{env:r}:void 0,o=["config"];n||o.push("--global"),o.push("--replace-all",e,t),await qw(o,n||__dirname,"setConfigValueInPath",i)}async function pl(e,t,n){return async function(e,t,n){const r=n?{env:n}:void 0,i=["config"];t||i.push("--global"),i.push("--unset-all",e),await qw(i,t||__dirname,"removeConfigValueInPath",r)}(t,e.path,n)}function dl(e){return"co-authored-by"===e.token.toLowerCase()}function ml(e,t){const n=e.split("\n"),r=new Array;for(const e of n){const n=fl(e,t);n&&r.push(n)}return r}function fl(e,t){for(const n of t){const t=e.indexOf(n);if(t>0)return{token:e.substring(0,t).trim(),value:e.substring(t+1).trim()}}return null}async function gl(e){return await il(e,"trailer.separators")||":"}async function yl(e,t,n,r=!1){const i=["interpret-trailers"];i.push("--no-divider"),r&&i.push("--unfold");for(const e of n)i.push("--trailer",`${e.token}=${e.value}`);return(await qw(i,e.path,"mergeTrailers",{stdin:t})).stdout}!function(e){e[e.Branches=0]="Branches",e[e.PullRequests=1]="PullRequests"}(tl||(tl={}));class bl{name;email;static parse(e){const t=e.match(/^(.*?)\s+<(.*?)>/);return null===t?null:new bl(t[1],t[2])}constructor(e,t){this.name=e,this.email=t}toString(){return`${this.name} <${this.email}>`}}function wl(e){return e.slice(0,9)}class vl{sha;shortSha;summary;body;author;committer;parentSHAs;trailers;tags;coAuthors;bodyNoCoAuthors;authoredByCommitter;isMergeCommit;constructor(e,t,n,r,i,o,s,a,l){this.sha=e,this.shortSha=t,this.summary=n,this.body=r,this.author=i,this.committer=o,this.parentSHAs=s,this.trailers=a,this.tags=l,this.coAuthors=function(e){const t=[];for(const n of e)if(dl(n)){const e=bl.parse(n.value);e&&t.push(e)}return t}(a),this.authoredByCommitter=this.author.name===this.committer.name&&this.author.email===this.committer.email,this.bodyNoCoAuthors=function(e,t){let n=t;return e.filter(dl).forEach((({token:e,value:t})=>{n=n.replace(`${e}: ${t}`,"")})),n}(a,r),this.isMergeCommit=s.length>1}}!function(e){e.RenameBranch="RenameBranch",e.DeleteBranch="DeleteBranch",e.DeleteRemoteBranch="DeleteRemoteBranch",e.ConfirmDiscardChanges="ConfirmDiscardChanges",e.Preferences="Preferences",e.RepositorySettings="RepositorySettings",e.AddRepository="AddRepository",e.CreateRepository="CreateRepository",e.CloneRepository="CloneRepository",e.CreateBranch="CreateBranch",e.SignIn="SignIn",e.About="About",e.InstallGit="InstallGit",e.PublishRepository="PublishRepository",e.Acknowledgements="Acknowledgements",e.UntrustedCertificate="UntrustedCertificate",e.RemoveRepository="RemoveRepository",e.TermsAndConditions="TermsAndConditions",e.PushBranchCommits="PushBranchCommits",e.CLIInstalled="CLIInstalled",e.GenericGitAuthentication="GenericGitAuthentication",e.ExternalEditorFailed="ExternalEditorFailed",e.OpenShellFailed="OpenShellFailed",e.InitializeLFS="InitializeLFS",e.LFSAttributeMismatch="LFSAttributeMismatch",e.UpstreamAlreadyExists="UpstreamAlreadyExists",e.ReleaseNotes="ReleaseNotes",e.DeletePullRequest="DeletePullRequest",e.OversizedFiles="OversizedFiles",e.CommitConflictsWarning="CommitConflictsWarning",e.PushNeedsPull="PushNeedsPull",e.ConfirmForcePush="ConfirmForcePush",e.StashAndSwitchBranch="StashAndSwitchBranch",e.ConfirmOverwriteStash="ConfirmOverwriteStash",e.ConfirmDiscardStash="ConfirmDiscardStash",e.ConfirmCheckoutCommit="ConfirmCheckoutCommit",e.CreateTutorialRepository="CreateTutorialRepository",e.ConfirmExitTutorial="ConfirmExitTutorial",e.PushRejectedDueToMissingWorkflowScope="PushRejectedDueToMissingWorkflowScope",e.SAMLReauthRequired="SAMLReauthRequired",e.CreateFork="CreateFork",e.CreateTag="CreateTag",e.DeleteTag="DeleteTag",e.LocalChangesOverwritten="LocalChangesOverwritten",e.ChooseForkSettings="ChooseForkSettings",e.ConfirmDiscardSelection="ConfirmDiscardSelection",e.MoveToApplicationsFolder="MoveToApplicationsFolder",e.ChangeRepositoryAlias="ChangeRepositoryAlias",e.ThankYou="ThankYou",e.CommitMessage="CommitMessage",e.MultiCommitOperation="MultiCommitOperation",e.WarnLocalChangesBeforeUndo="WarnLocalChangesBeforeUndo",e.WarningBeforeReset="WarningBeforeReset",e.InvalidatedToken="InvalidatedToken",e.AddSSHHost="AddSSHHost",e.SSHKeyPassphrase="SSHKeyPassphrase",e.SSHUserPassword="SSHUserPassword",e.PullRequestChecksFailed="PullRequestChecksFailed",e.CICheckRunRerun="CICheckRunRerun",e.WarnForcePush="WarnForcePush",e.DiscardChangesRetry="DiscardChangesRetry",e.PullRequestReview="PullRequestReview",e.UnreachableCommits="UnreachableCommits",e.StartPullRequest="StartPullRequest",e.Error="Error",e.InstallingUpdate="InstallingUpdate",e.TestNotifications="TestNotifications",e.PullRequestComment="PullRequestComment",e.UnknownAuthors="UnknownAuthors",e.ConfirmRepoRulesBypass="ConfirmRepoRulesBypass"}(nl||(nl={}));const Cl=new class{emitter=new st.Emitter;constructor(){this.subscribe()}subscribe=()=>{ma()&&g("native-theme-updated",this.onThemeNotificationUpdated)};onThemeNotificationUpdated=async()=>{const e=await ha();this.emitThemeChanged(e)};onThemeChanged(e){return this.emitter.on("theme-changed",e)}emitThemeChanged(e){this.emitter.emit("theme-changed",e)}};class Sl extends Error{metadata;constructor(e,t={}){super(e),this.metadata=t}}const El="Visual Studio Code",kl="https://code.visualstudio.com";var Rl=n(8469),xl=n.n(Rl);const Tl=[{name:"Atom",bundleIdentifiers:["com.github.atom"]},{name:"Aptana Studio",bundleIdentifiers:["aptana.studio"]},{name:"Eclipse IDE for Java Developers",bundleIdentifiers:["epp.package.java"]},{name:"Eclipse IDE for Enterprise Java and Web Developers",bundleIdentifiers:["epp.package.jee"]},{name:"Eclipse IDE for C/C++ Developers",bundleIdentifiers:["epp.package.cpp"]},{name:"Eclipse IDE for Eclipse Committers",bundleIdentifiers:["epp.package.committers"]},{name:"Eclipse IDE for Embedded C/C++ Developers",bundleIdentifiers:["epp.package.embedcpp"]},{name:"Eclipse IDE for PHP Developers",bundleIdentifiers:["epp.package.php"]},{name:"Eclipse IDE for Java and DSL Developers",bundleIdentifiers:["epp.package.dsl"]},{name:"Eclipse IDE for RCP and RAP Developers",bundleIdentifiers:["epp.package.rcp"]},{name:"Eclipse Modeling Tools",bundleIdentifiers:["epp.package.modeling"]},{name:"Eclipse IDE for Scientific Computing",bundleIdentifiers:["epp.package.parallel"]},{name:"Eclipse IDE for Scout Developers",bundleIdentifiers:["epp.package.scout"]},{name:"MacVim",bundleIdentifiers:["org.vim.MacVim"]},{name:"Neovide",bundleIdentifiers:["com.neovide.neovide"]},{name:"VimR",bundleIdentifiers:["com.qvacua.VimR"]},{name:"Visual Studio Code",bundleIdentifiers:["com.microsoft.VSCode"]},{name:"Visual Studio Code (Insiders)",bundleIdentifiers:["com.microsoft.VSCodeInsiders"]},{name:"VSCodium",bundleIdentifiers:["com.visualstudio.code.oss","com.vscodium"]},{name:"Sublime Text",bundleIdentifiers:["com.sublimetext.4","com.sublimetext.3","com.sublimetext.2"]},{name:"BBEdit",bundleIdentifiers:["com.barebones.bbedit"]},{name:"PhpStorm",bundleIdentifiers:["com.jetbrains.PhpStorm"]},{name:"PyCharm",bundleIdentifiers:["com.jetbrains.PyCharm"]},{name:"PyCharm Community Edition",bundleIdentifiers:["com.jetbrains.pycharm.ce"]},{name:"DataSpell",bundleIdentifiers:["com.jetbrains.DataSpell"]},{name:"RubyMine",bundleIdentifiers:["com.jetbrains.RubyMine"]},{name:"RStudio",bundleIdentifiers:["org.rstudio.RStudio","com.rstudio.desktop"]},{name:"TextMate",bundleIdentifiers:["com.macromates.TextMate"]},{name:"Brackets",bundleIdentifiers:["io.brackets.appshell"]},{name:"WebStorm",bundleIdentifiers:["com.jetbrains.WebStorm"]},{name:"CLion",bundleIdentifiers:["com.jetbrains.CLion"]},{name:"Typora",bundleIdentifiers:["abnerworks.Typora"]},{name:"CodeRunner",bundleIdentifiers:["com.krill.CodeRunner"]},{name:"SlickEdit",bundleIdentifiers:["com.slickedit.SlickEditPro2018","com.slickedit.SlickEditPro2017","com.slickedit.SlickEditPro2016","com.slickedit.SlickEditPro2015"]},{name:"IntelliJ",bundleIdentifiers:["com.jetbrains.intellij"]},{name:"IntelliJ Community Edition",bundleIdentifiers:["com.jetbrains.intellij.ce"]},{name:"Xcode",bundleIdentifiers:["com.apple.dt.Xcode"]},{name:"GoLand",bundleIdentifiers:["com.jetbrains.goland"]},{name:"Android Studio",bundleIdentifiers:["com.google.android.studio"]},{name:"Rider",bundleIdentifiers:["com.jetbrains.rider"]},{name:"Nova",bundleIdentifiers:["com.panic.Nova"]},{name:"Emacs",bundleIdentifiers:["org.gnu.Emacs"]},{name:"Lite XL",bundleIdentifiers:["com.lite-xl"]},{name:"Fleet",bundleIdentifiers:["Fleet.app"]},{name:"Pulsar",bundleIdentifiers:["dev.pulsar-edit.pulsar"]},{name:"Zed",bundleIdentifiers:["dev.zed.Zed"]},{name:"Zed (Preview)",bundleIdentifiers:["dev.zed.Zed-Preview"]},{name:"Cursor",bundleIdentifiers:["com.todesktop.230313mzl4w4u92"]}];async function Dl(e){for(const t of e.bundleIdentifiers)try{const n=await xl()(t).catch((e=>"Couldn't find the app"===e.message?Promise.resolve(null):Promise.reject(e)));if(n&&await S(n))return n;log.debug(`App installation for ${e.name} not found at '${n}'`)}catch(t){log.debug(`Unable to locate ${e.name} installation`,t)}return null}var Al=n(6969);const Pl=(t,...n)=>({key:t,subKey:e.win32.join(...n)}),Il="SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall",_l=e=>Pl(Al.HKEY.HKEY_CURRENT_USER,Il,e),Nl=e=>Pl(Al.HKEY.HKEY_LOCAL_MACHINE,Il,e),Ol=e=>Pl(Al.HKEY.HKEY_LOCAL_MACHINE,"SOFTWARE\\WOW6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall",e),Ml=e=>{const t=(new Date).getFullYear(),n=t-2,r=new Array;for(let i=n;i<=t;i++)for(let t=1;t<=5;t++)for(let n=0;n<=5;n++){let o=`${e} ${i}.${t}`;n>0&&(o=`${o}.${n}`),r.push(Ol(o)),r.push(_l(o))}return r.reverse()},Bl=e=>[["bin",`${e}64.exe`],["bin",`${e}.exe`]];_l("atom"),_l("atom-beta"),_l("atom-nightly"),_l("{771FD6B0-FA20-440A-A002-3B3BAC16DC50}_is1"),_l("{D628A17A-9713-46BF-8D57-E671B46A741E}_is1"),_l("{D9E514E7-1A56-452D-9337-2990C0DC4310}_is1"),Nl("{EA457B21-F73E-494C-ACAB-524FDE069978}_is1"),Ol("{F8A2A208-72B3-4D61-95FC-8A65D340689B}_is1"),Nl("{A5270FC5-65AD-483E-AC30-2C276B63D0AC}_is1"),_l("{217B4C08-948D-4276-BFBB-BEE930AE5A2C}_is1"),_l("{26F4A15E-E392-4887-8C09-7BC55712FD5B}_is1"),_l("{69BD8F7B-65EB-4C6F-A14E-44CFA83712C0}_is1"),Nl("{1287CAD5-7C8D-410D-88B9-0D1EE4A83FF2}_is1"),Ol("{C26E74D1-022E-4238-8B9D-1E7564A36CC9}_is1"),Nl("{0AEDB616-9614-463B-97D7-119DD86CCA64}_is1"),_l("{2E1F05D1-C245-4562-81EE-28188DB6FD17}_is1"),_l("{0FD05EB4-651E-4E78-A062-515204B47A3A}_is1"),_l("{57FD70A5-1B8D-4875-9F40-C5553F094828}_is1"),Nl("{88DA3577-054F-4CA1-8122-7D820494CFFB}_is1"),Ol("{763CBF88-25C6-4B10-952F-326AE657F16B}_is1"),Nl("{67DEE444-3D04-4258-B92A-BC1F0FF2CAE4}_is1"),_l("{C6065F05-9603-4FC4-8101-B9781A25D88E}}_is1"),_l("{3AEBF0C8-F733-4AD4-BADE-FDB816D53D7B}_is1"),Nl("{D77B7E06-80BA-4137-BCF4-654B95CCEBC5}_is1"),Ol("{E34003BB-9E10-4501-8C11-BE3FAA83F23F}_is1"),Nl("{D1ACE434-89C5-48D1-88D3-E2991DF85475}_is1"),_l("{20F79D0D-A9AC-4220-9A81-CE675FFB6B41}_is1"),_l("{ED2E5618-3E7E-4888-BF3C-A6CCC84F586F}_is1"),_l("{2E362F92-14EA-455A-9ABD-3E656BBBFE71}_is1"),Nl("{B2E0DDB2-120E-4D34-9F7E-8C688FF839A2}_is1"),Ol("{EF35BB36-FA7E-4BB9-B7DA-D1E09F2DA9C9}_is1"),Nl("{44721278-64C6-4513-BC45-D48E07830599}_is1"),Nl("Sublime Text_is1"),Nl("Sublime Text 3_is1"),Ol("{4F3B6E8C-401B-4EDE-A423-6481C239D6FF}"),Nl("Adobe ColdFusion Builder 3_is1"),Nl("Adobe ColdFusion Builder 2016"),Nl("{37771A20-7167-44C0-B322-FD3E54C56156}_is1"),Ol("{37771A20-7167-44C0-B322-FD3E54C56156}_is1"),Nl("{18406187-F49E-4822-CAF2-1D25C0C83BA2}"),Ol("{18006187-F49E-4822-CAF2-1D25C0C83BA2}"),Nl("{18606187-F49E-4822-CAF2-1D25C0C83BA2}"),Ol("{18206187-F49E-4822-CAF2-1D25C0C83BA2}"),Nl("{15406187-F49E-4822-CAF2-1D25C0C83BA2}"),Ol("{15006187-F49E-4822-CAF2-1D25C0C83BA2}"),Nl("{10C06187-F49E-4822-CAF2-1D25C0C83BA2}"),Nl("{10406187-F49E-4822-CAF2-1D25C0C83BA2}"),Nl("{0DC06187-F49E-4822-CAF2-1D25C0C83BA2}"),Nl("{0D406187-F49E-4822-CAF2-1D25C0C83BA2}"),Nl("{7CC0E567-ACD6-41E8-95DA-154CEEDB0A18}"),Ol("{2D6C1116-78C6-469C-9923-3E549218773F}"),Ml("WebStorm"),Bl("webstorm"),Ml("PhpStorm"),Bl("phpstorm"),Nl("Android Studio"),Nl("Notepad++"),Ol("Notepad++"),Ml("JetBrains Rider"),Bl("rider"),Ol("RStudio"),Ml("IntelliJ IDEA"),Bl("idea"),Ml("IntelliJ IDEA Community Edition"),Bl("idea"),Ml("PyCharm"),Bl("pycharm"),Ml("PyCharm Community Edition"),Bl("pycharm"),Ml("CLion"),Bl("clion"),Ml("RubyMine"),Bl("rubymine"),Ml("GoLand"),Bl("goland"),Nl("Fleet"),Ml("DataSpell"),Bl("dataspell"),_l("0949b555-c22c-56b7-873a-a960bdefa81f"),Nl("0949b555-c22c-56b7-873a-a960bdefa81f");let Fl=null;async function Ll(){return Fl&&Fl.length>0||(Fl=await async function(){const e=[];for(const t of Tl){const n=await Dl(t);n&&e.push({editor:t.name,path:n})}return e}()),Fl}async function Hl(e){const t=await Ll();if(0===t.length)return null;if(e){const n=t.find((t=>t.editor===e))||null;if(!n)throw new Sl(`The editor '${e}' could not be found. Please open Settings and choose an available editor.`,{openPreferences:!0});return n}return t[0]}async function Ul(e,t){const{summary:n,description:r,trailers:i}=t,o=`${n}\n\n${r||""}\n`.replace(/\s+$/,"\n");return void 0!==i&&i.length>0?yl(e,o,i):o}var Wl=n(193);const $l={setItem:function(e,t,n){return Wl.setPassword(e,t,n)},getItem:function(e,t){return Wl.getPassword(e,t)},deleteItem:function(e,t){return Wl.deletePassword(e,t)}};function zl(e){const t=tr(e);if(t)return t.hostname;return o.parse(e).hostname||e}function ql(e){return`genericGitAuth/username/${e}`}function jl(e){const t=ql(e);return localStorage.getItem(t)}function Gl(e,t){const n=t.gitHubRepository;return n?Zn(e,n.endpoint):null}async function Vl(e,t){const n=["lfs","install"];t&&n.push("--force"),await qw(n,e.path,"installLFSHooks")}async function Kl(e,t){const{stdout:n}=await qw(["check-attr","filter",t],e.path,"checkAttrForLFS");return null!==/: filter: lfs/.exec(n)}function Yl(e){switch(e.kind){case Io.New:case Io.Untracked:return"New";case Io.Modified:return"Modified";case Io.Deleted:return"Deleted";case Io.Renamed:return"Renamed";case Io.Conflicted:return Wo(e)?e.conflictMarkerCount>0?"Conflicted":"Resolved":"Conflicted";case Io.Copied:return"Copied";default:return et(0,`Unknown file status ${e}`)}}function Xl(e){return e.kind===Io.Conflicted}function Ql(e){return e.files.some((e=>Xl(e.status)))}function Zl(e,t){return void 0===t&&(!Wo(e)||e.conflictMarkerCount>0)}function Jl(e,t){const n=t?` from ${t}`:"";switch(e){case Po.Added:return`Using the added file${n}`;case Po.UpdatedButUnmerged:return`Using the modified file${n}`;case Po.Deleted:return`Using the deleted file${n}`;default:return et(0,"Unknown status entry to format")}}function ec(e,t){const n=t?` from ${t}`:"";switch(e){case Po.Added:return`Use the added file${n}`;case Po.UpdatedButUnmerged:return`Use the modified file${n}`;case Po.Deleted:return"Do not include this file"+(t?` on ${t}`:"");default:return et(0,"Unknown status entry to format")}}function tc(e,t){return e.files.filter((e=>Uo(e.status)&&!Zl(e.status,t.get(e.path))))}function nc(e,t){return e.files.filter((e=>Uo(e.status)&&Zl(e.status,t.get(e.path))))}function rc(e,{defaultBranch:t,upstreamDefaultBranch:n}){return _r(e)?n??t:t}class ic{_state;constructor(e=new Map){this._state=e}get state(){return new Map(this._state)}updateMenuItem(e,t){const n=this._state.get(e)||{};this._state.set(e,sa(n,t))}enable(e){return this.updateMenuItem(e,{enabled:!0}),this}disable(e){return this.updateMenuItem(e,{enabled:!1}),this}setEnabled(e,t){return this.updateMenuItem(e,{enabled:t}),this}merge(e){const t=new Map(this._state);for(const[n,r]of e._state)t.set(n,r);return new ic(t)}}function oc(e,t){return void 0===e.enabled||"separator"===t.type||t.enabled===e.enabled}const sc=["rename-branch","delete-branch","discard-all-changes","stash-all-changes","preferences","update-branch-with-contribution-target-branch","compare-to-branch","merge-branch","rebase-branch","view-repository-on-github","compare-on-github","branch-on-github","open-in-shell","push","pull","branch","repository","go-to-commit-message","create-branch","show-changes","show-history","show-repository-list","show-branches-list","open-working-directory","show-repository-settings","open-external-editor","remove-repository","new-repository","add-local-repository","clone-repository","about","create-pull-request","preview-pull-request","squash-and-merge-branch"];function ac(e){return e.currentPopup?function(){const e=new ic;for(const t of sc)e.disable(t);return e}().state:function(){const e=new ic;for(const t of sc)e.enable(t);return e}().merge(function(e){const t=e.selectedState,n=!(!t||!(r=t.repository)||r instanceof jr||!r.gitHubRepository||null===r.gitHubRepository.htmlURL);var r;let i=!1,o=!1,s=!1,a=!1,l=!1,c=!1,u=!1,h=!1,p=!1,d=!1,m=!1,f=!1,g=!1,y=!1;const b=null!==t&&t.repository instanceof Ir&&function(e){if(_r(e)){const t=e.gitHubRepository;return t.parent?!1!==t.parent.issuesEnabled&&!0!==t.parent.isArchived:!1!==t.issuesEnabled&&!0!==t.isArchived}return!1}(t.repository);if(t&&t.type===qe.Repository){i=!0;const{branchesState:e,changesState:n}=t.state,r=e.tip,b=e.defaultBranch;s=r.kind===Ar.Valid,a=r.kind===Ar.Detached,p=r.kind===Ar.Unknown,d=r.kind===Ar.Unborn;const w=rc(t.repository,e);y=null!==w,g=r.kind===Ar.Valid&&w?.name===r.branch.name,r.kind===Ar.Valid?(o=null===b||r.branch.name!==b.name,u=!!r.branch.upstream,f=null!==n.stashEntry):o=!0,h=t.state.isPushPullFetchInProgress;const{conflictState:v,workingDirectory:C}=t.state.changesState;m=null!==v&&"rebase"===v.kind,c=null!==n.conflictState||Ql(C),l=C.files.length>0}const w=["branch","repository","remove-repository","open-in-shell","open-working-directory","show-repository-settings","go-to-commit-message","show-changes","show-history","show-branches-list","open-external-editor","compare-to-branch"],v=new ic,C="hidden"!==e.windowState,S=e.showWelcomeFlow,E=C&&i&&!S;if(E){for(const e of w)v.enable(e);v.setEnabled("rename-branch",(o||!u)&&!d&&!a),v.setEnabled("delete-branch",o&&!d&&!a),v.setEnabled("update-branch-with-contribution-target-branch",s&&y&&!g),v.setEnabled("merge-branch",s),v.setEnabled("squash-and-merge-branch",s),v.setEnabled("rebase-branch",s),v.setEnabled("compare-on-github",n&&u),v.setEnabled("branch-on-github",n&&u),v.setEnabled("view-repository-on-github",n),v.setEnabled("create-issue-in-repository-on-github",b),v.setEnabled("create-pull-request",n&&!d&&!a),v.setEnabled("preview-pull-request",!d&&!a&&n),v.setEnabled("push",!d&&!a&&!h),v.setEnabled("pull",u&&!h),v.setEnabled("create-branch",!p&&!d&&!m),v.setEnabled("discard-all-changes",E&&l&&!m),v.setEnabled("stash-all-changes",l&&s&&!m&&!c),v.setEnabled("compare-to-branch",!a),v.setEnabled("toggle-stashed-changes",f),t&&t.type===qe.MissingRepository&&v.disable("open-external-editor")}else{for(const e of w)v.disable(e);v.disable("view-repository-on-github"),v.disable("create-pull-request"),v.disable("preview-pull-request"),t&&t.type===qe.MissingRepository&&(t.repository.gitHubRepository&&v.enable("view-repository-on-github"),v.enable("remove-repository")),v.disable("create-branch"),v.disable("rename-branch"),v.disable("delete-branch"),v.disable("discard-all-changes"),v.disable("stash-all-changes"),v.disable("update-branch-with-contribution-target-branch"),v.disable("merge-branch"),v.disable("squash-and-merge-branch"),v.disable("rebase-branch"),v.disable("push"),v.disable("pull"),v.disable("compare-to-branch"),v.disable("compare-on-github"),v.disable("branch-on-github"),v.disable("toggle-stashed-changes")}return v}(e)).merge(function(e){const t=new ic,n=e.resizablePaneActive;return t.setEnabled("increase-active-resizable-width",n),t.setEnabled("decrease-active-resizable-width",n),t}(e)).merge(function(e){const t=["new-repository","add-local-repository","clone-repository","preferences","about"],n=new ic;if(e)for(const e of t)n.disable(e);else for(const e of t)n.enable(e);return n}(e.showWelcomeFlow)).merge(function(e){const t=["show-repository-list"],n=new ic;if(0===e.repositories.length)for(const e of t)n.disable(e);return n}(e)).state}function lc(e,t=-1/0,n=1/0){return"number"!=typeof e?lc(e.value,e.min,e.max):e<t?t:e>n?n:e}var cc,uc;function hc(e){return Math.round(100*lc(e,0,1))/100}function pc(e,t){if(null===t)return cc.NotAvailable;const{ahead:n,behind:r}=t;if(0===r||0===n)return cc.NotAvailable;const{tip:i,forcePushBranches:o}=e;let s=!1;if(i.kind===Ar.Valid){const e=i.branch.nameWithoutRemote,{sha:t}=i.branch.tip;s=o.get(e)===t}return s?cc.Recommended:cc.Available}!function(e){e[e.NotAvailable=0]="NotAvailable",e[e.Available=1]="Available",e[e.Recommended=2]="Recommended"}(cc||(cc={})),function(e){e.Terminal="Terminal",e.Hyper="Hyper",e.iTerm2="iTerm2",e.PowerShellCore="PowerShell Core",e.Kitty="Kitty",e.Alacritty="Alacritty",e.Tabby="Tabby",e.WezTerm="WezTerm",e.Warp="Warp"}(uc||(uc={}));const dc=uc.Terminal;function mc(e){switch(e){case uc.Terminal:return"com.apple.Terminal";case uc.iTerm2:return"com.googlecode.iterm2";case uc.Hyper:return"co.zeit.hyper";case uc.PowerShellCore:return"com.microsoft.powershell";case uc.Kitty:return"net.kovidgoyal.kitty";case uc.Alacritty:return"io.alacritty";case uc.Tabby:return"org.tabby";case uc.WezTerm:return"com.github.wez.wezterm";case uc.Warp:return"dev.warp.Warp-Stable";default:return et(0,`Unknown shell: ${e}`)}}async function fc(e){const t=mc(e);try{return await xl()(t)}catch(e){return null}}var gc,yc;!function(e){e.Cmd="Command Prompt",e.PowerShell="PowerShell",e.PowerShellCore="PowerShell Core",e.Hyper="Hyper",e.GitBash="Git Bash",e.Cygwin="Cygwin",e.WSL="WSL",e.WindowTerminal="Windows Terminal",e.FluentTerminal="Fluent Terminal",e.Alacritty="Alacritty"}(gc||(gc={})),gc.Cmd,function(e){e.Gnome="GNOME Terminal",e.Mate="MATE Terminal",e.Tilix="Tilix",e.Terminator="Terminator",e.Urxvt="URxvt",e.Konsole="Konsole",e.Xterm="XTerm",e.Terminology="Terminology",e.Deepin="Deepin Terminal",e.Elementary="Elementary Terminal",e.XFCE="XFCE Terminal",e.Alacritty="Alacritty",e.Kitty="Kitty"}(yc||(yc={})),yc.Gnome;class bc extends Error{}const wc=dc;let vc=null;function Cc(e){return function(e){return Dt(uc,e)??dc}(e)}async function Sc(){return vc||(vc=await async function(){const[e,t,n,r,i,o,s,a,l]=await Promise.all([fc(uc.Terminal),fc(uc.Hyper),fc(uc.iTerm2),fc(uc.PowerShellCore),fc(uc.Kitty),fc(uc.Alacritty),fc(uc.Tabby),fc(uc.WezTerm),fc(uc.Warp)]),c=[];if(e&&c.push({shell:uc.Terminal,path:e}),t&&c.push({shell:uc.Hyper,path:t}),n&&c.push({shell:uc.iTerm2,path:n}),r&&c.push({shell:uc.PowerShellCore,path:r}),i){const e=`${i}/Contents/MacOS/kitty`;c.push({shell:uc.Kitty,path:e})}if(o){const e=`${o}/Contents/MacOS/alacritty`;c.push({shell:uc.Alacritty,path:e})}if(s){const e=`${s}/Contents/MacOS/Tabby`;c.push({shell:uc.Tabby,path:e})}if(a){const e=`${a}/Contents/MacOS/wezterm`;c.push({shell:uc.WezTerm,path:e})}if(l){const e=`${l}/Contents/MacOS/stable`;c.push({shell:uc.Warp,path:e})}return c}(),vc)}function Ec(e,t){return Promise.all([e(),kc(t)]).then((e=>e[0]))}async function kc(e){return new Promise((t=>window.setTimeout(t,e)))}const Rc=36e5;class xc{repository;account;fetch;shouldPerformFetch;timeoutHandle=null;stopped=!1;constructor(e,t,n,r){this.repository=e,this.account=t,this.fetch=n,this.shouldPerformFetch=r}start(e){this.stopped&&Je("Cannot start a background fetcher that has been stopped.");const t=this.repository.gitHubRepository;t&&(e?this.timeoutHandle=window.setTimeout((()=>this.performAndScheduleFetch(t)),Dc()):this.performAndScheduleFetch(t))}stop(){this.stopped=!0;const e=this.timeoutHandle;e&&(window.clearTimeout(e),this.timeoutHandle=null)}async performAndScheduleFetch(e){if(this.stopped)return;const t=await this.shouldPerformFetch(this.repository);if(this.stopped)return;if(t)try{await this.fetch(this.repository)}catch(e){const t=this.repository.gitHubRepository,n=null!==t?t.fullName:this.repository.name;log.error(`Error performing periodic fetch for '${n}'`,e)}if(this.stopped)return;const n=await this.getFetchInterval(e);this.stopped||(this.timeoutHandle=window.setTimeout((()=>this.performAndScheduleFetch(e)),n))}async getFetchInterval(e){const t=Vn.fromAccount(this.account);let n=Rc;try{const r=await t.getFetchPollInterval(e.owner.login,e.name);n=r?Math.max(r,3e5):Rc}catch(e){log.error("Error fetching poll interval",e)}return n+Dc()}}let Tc=null;function Dc(){if(null!==Tc)return Tc;const e=Math.ceil(3e4*Math.random());return Tc=e,e}function Ac(e){return St(__dirname,"emoji",e)}function Pc(e){const t=e.toString(16);return t.length>=4?t:("0000"+t).substring(t.length)}const Ic={summary:"",description:""};async function _c(){return new Promise(((e,t)=>{requestAnimationFrame(e)}))}class Nc extends Error{repository;existingRemote;constructor(e,t){super(`The remote '${t.name}' 已存在`),this.repository=e,this.existingRemote=t}}const Oc="upstream";function Mc(e,t){const n=t.find((e=>e.name===Oc));return n&&cr(e,n)?n:null}function Bc(e){return"known"===e.kind}var Fc;!function(e){e.NotLoaded="NotLoaded",e.Loading="Loading",e.Loaded="Loaded"}(Fc||(Fc={}));class Lc{name;email;date;tzOffset;static parseIdentity(e){const t=e.match(/^(.*?) <(.*?)> (\d+) (\+|-)?(\d{2})(\d{2})/);if(!t)throw new Error(`Couldn't parse identity ${e}`);const n=t[1],r=t[2],i=new Date(1e3*parseInt(t[3],10));if(isNaN(i.valueOf()))throw new Error(`Couldn't parse identity ${e}, invalid date`);const o="-"===t[4]?"-":"+",s=t[5],a=t[6],l=60*parseInt(s,10)+parseInt(a,10);return new Lc(n,r,i,l*("-"===o?-1:1))}constructor(e,t,n,r=(new Date).getTimezoneOffset()){this.name=e,this.email=t,this.date=n,this.tzOffset=r}toString(){return`${this.name} <${this.email}>`}}function Hc(e){const t=Object.keys(e);return{formatArgs:["-z",`--format=${Object.values(e).join("%x00")}`],parse:e=>{const n=e.split("\0"),r=[];for(let e=0;e<n.length-t.length;e+=t.length){const i={};t.forEach(((t,r)=>i[t]=n[e+r])),r.push(i)}return r}}}function Uc(e){const t=Object.keys(e);return{formatArgs:[`--format=%00${Object.values(e).join("%00")}%00`],parse:e=>{const n=e.split("\0"),r=new Array;let i,o=0;for(let e=1;e<n.length-1;e++)if(e%(t.length+1)!=0)i=i??{},i[t[o%t.length]]=n[e],o++,o%t.length==0&&(r.push(i),i=void 0);else if("\n"!==n[e])throw new Error("Expected newline");return r}}}const Wc="160000";function $c(e,t,n,r){const i=e.trim(),o=function(e,t,n){return t===Wc&&n===Wc&&"M"===e?{commitChanged:!0,untrackedChanges:!1,modifiedChanges:!1}:t===Wc&&"D"===e||n===Wc&&"A"===e?{commitChanged:!1,untrackedChanges:!1,modifiedChanges:!1}:void 0}(i,n,r);return"M"===i?{kind:Io.Modified,submoduleStatus:o}:"A"===i?{kind:Io.New,submoduleStatus:o}:"?"===i?{kind:Io.Untracked,submoduleStatus:o}:"D"===i?{kind:Io.Deleted,submoduleStatus:o}:"R"===i&&null!=t?{kind:Io.Renamed,oldPath:t,submoduleStatus:o}:"C"===i&&null!=t?{kind:Io.Copied,oldPath:t,submoduleStatus:o}:i.match(/R[0-9]+/)&&null!=t?{kind:Io.Renamed,oldPath:t,submoduleStatus:o}:i.match(/C[0-9]+/)&&null!=t?{kind:Io.Copied,oldPath:t,submoduleStatus:o}:{kind:Io.Modified,submoduleStatus:o}}const zc=e=>e.kind===Io.Copied||e.kind===Io.Renamed;async function qc(e,t,n,r,i=[]){const{formatArgs:o,parse:s}=Hc({sha:"%H",shortSha:"%h",summary:"%s",body:"%b",author:"%an <%ae> %ad",committer:"%cn <%ce> %cd",parents:"%P",trailers:"%(trailers:unfold,only)",refs:"%D"}),a=["log"];void 0!==t&&a.push(t),a.push("--date=raw"),void 0!==n&&a.push(`--max-count=${n}`),void 0!==r&&a.push(`--skip=${r}`),a.push(...o,"--no-show-signature","--no-color",...i,"--");const l=await qw(a,e.path,"getCommits",{successExitCodes:new Set([0,128])});return 128===l.exitCode?new Array:s(l.stdout).map((e=>{const t=ja(e.refs,/tag: ([^\s,]+)/g).filter((e=>void 0!==e[0])).map((e=>e[0]));return new vl(e.sha,e.shortSha,e.summary,e.body,Lc.parseIdentity(e.author),Lc.parseIdentity(e.committer),e.parents.length>0?e.parents.split(" "):[],ml(e.trailers,":"),t)}))}function jc(e,t,n){const r=new Array;let i=0,o=0,s=0;const a=e.split("\0");for(let e=0;e<a.length-1;e++){const l=a[e];if(l.startsWith(":")){const i=l.split(" "),o=tt("Invalid log output (srcMode)",i[0]?.replace(":","")),s=tt("Invalid log output (dstMode)",i[1]),c=tt("Invalid log output (status)",i.at(-1)),u=/^R|C/.test(c)?tt("Missing old path",a.at(++e)):void 0,h=tt("Missing path",a.at(++e));r.push(new jo(h,$c(c,u,o,s),t,n))}else{const t=/^(\d+|-)\t(\d+|-)\t/.exec(l),[,n,a]=tt("Invalid numstat line",t);i+="-"===n?0:parseInt(n,10),o+="-"===a?0:parseInt(a,10),zc(r[s].status)&&(e+=2),s++}}return{files:r,linesAdded:i,linesDeleted:o}}async function Gc(e,t){const n=await qc(e,t,1);return n.length<1?null:n[0]}async function Vc(e,t){const n=null===t?void 0:qp(t,"HEAD");return(await qc(e,n,void 0,void 0,["--merges"])).length>0}async function Kc(e,t,n={}){if(0===t.length)return;const r=["update-index"];!1!==n.add&&r.push("--add"),!1===n.remove&&!0!==n.forceRemove||r.push("--remove"),n.forceRemove&&r.push("--force-remove"),!1!==n.replace&&r.push("--replace"),r.push("-z","--stdin"),await qw(r,e.path,"updateIndex",{stdin:t.join("\0")})}async function Yc(e,t){const n=[],r=[],i=[],o=[];for(const e of t)e.selection.getSelectionType()===To.All?(n.push(e.path),e.status.kind===Io.Renamed?r.push(e.status.oldPath):e.status.kind===Io.Deleted&&o.push(e.path)):i.push(e);await Kc(e,r,{forceRemove:!0}),await Kc(e,n),await Kc(e,o,{forceRemove:!0});for(const t of i)await Jw(e,t)}const Xc=/!!GitHub_Desktop<(.+)>$/;async function Qc(e){const{formatArgs:t,parse:n}=Hc({name:"%gD",stashSha:"%H",message:"%gs",tree:"%T",parents:"%P"}),r=await qw(["log","-g",...t,"refs/stash"],e.path,"getStashEntries",{successExitCodes:new Set([0,128])});if(128===r.exitCode)return{desktopEntries:[],stashEntryCount:0};const i=[],o={kind:Fc.NotLoaded},s=n(r.stdout);for(const{name:e,message:t,stashSha:n,tree:r,parents:a}of s){const s=ru(t);null!==s&&i.push({name:e,stashSha:n,branchName:s,tree:r,parents:a.length>0?a.split(" "):[],files:o})}return{desktopEntries:i,stashEntryCount:s.length-1}}async function Zc(e,t){const n=await Qc(e),r="string"==typeof t?t:t.name;return n.desktopEntries.find((e=>e.branchName===r))||null}function Jc(e){return`!!GitHub_Desktop<${e}>`}async function eu(e,t){return(await Qc(e)).desktopEntries.find((e=>e.stashSha===t))||null}async function tu(e,t){const n=await eu(e,t);if(null!==n){const t=["stash","drop",n.name];await qw(t,e.path,"dropStashEntry")}}async function nu(e,t){const n=new Set([Ua.ko.MergeConflicts]),r=new Set([0,1]),i=await eu(e,t);if(null!==i){const o=["stash","pop","--quiet",`${i.name}`],s=await qw(o,e.path,"popStashEntry",{expectedErrors:n,successExitCodes:r});if(1===s.exitCode){if(s.stderr.length>0)throw new zw(s,o);log.info(`[popStashEntry] a stash was popped successfully but exit code ${s.exitCode} reported.`),await tu(e,t)}}}function ru(e){const t=Xc.exec(e);return null===t||0===t[1].length?null:t[1]}function iu(e,t){0===t.length?ou(e):function(e,t){const n=JSON.stringify(t);localStorage.setItem(e,n)}(su(e),t)}function ou(e){localStorage.removeItem(su(e))}function su(e){return`tags-to-push-${e.id}`}const au="init.defaultBranch",lu=["main","master"];async function cu(){return await async function(){return ol(au)}()??"main"}const uu=100,hu="history";class pu extends Ya{repository;shell;statsStore;commitLookup=new Map;pullWithRebase;_history=[];requestsInFight=new Set;_tip={kind:Ar.Unknown};_defaultBranch=null;_upstreamDefaultBranch=null;_localTags=null;_allBranches=[];_recentBranches=[];_localCommitSHAs=[];_commitMessage=Ic;_showCoAuthoredBy=!1;_coAuthors=[];_aheadBehind=null;_tagsToPush=[];_defaultRemote=null;_currentRemote=null;_upstreamRemote=null;_lastFetched=null;_desktopStashEntries=new Map;_stashEntryCount=0;constructor(e,t,n){super(),this.repository=e,this.shell=t,this.statsStore=n,this._tagsToPush=function(e){return function(e){const t=localStorage.getItem(e)||"[]";try{const e=JSON.parse(t);return e instanceof Array?e.some((e=>"string"!=typeof e))?[]:e:[]}catch(e){return[]}}(su(e))}(e)}async reconcileHistory(e){if(0===this._history.length)return;if(this.requestsInFight.has(hu))return;this.requestsInFight.add(hu);const t=qp("HEAD",e),n=await this.performFailableOperation((()=>qc(this.repository,t,uu)));if(null==n)return;const r=this._history,i=r.findIndex((t=>t===e));if(i>-1){log.debug(`reconciling history - adding ${n.length} commits before merge base ${e.substring(0,8)}`);const t=r.slice(i);this._history=[...n.map((e=>e.sha)),...t]}this.storeCommits(n),this.requestsInFight.delete(hu),this.emitUpdate()}async loadCommitBatch(e,t){if(this.requestsInFight.has(hu))return null;const n=`history/compare/${e}/skip/${t}`;if(this.requestsInFight.has(n))return null;this.requestsInFight.add(n);const r=await this.performFailableOperation((()=>qc(this.repository,e,uu,t)));return this.requestsInFight.delete(n),r?(this.storeCommits(r),r.map((e=>e.sha))):null}async refreshTags(){const e=this._localTags,t=await this.performFailableOperation((()=>async function(e){const t=(await qw(["show-ref","--tags","-d"],e.path,"getAllTags",{successExitCodes:new Set([0,1])})).stdout.split("\n").filter((e=>""!==e)).map((e=>{const[t,n]=e.split(" ");return[n.replace(/^refs\/tags\//,"").replace(/\^\{\}$/,""),t]}));return new Map(t)}(this.repository)));if(void 0!==t){this._localTags=t;for(const e of this._tagsToPush)this._localTags.has(e)||this.removeTagToPush(e);null!==e&&this.emitUpdatesForChangedTags(e,this._localTags)}}async emitUpdatesForChangedTags(e,t){const n=new Set;let r=0;for(const[r,i]of e){const e=t.get(r);e?e!==i&&(n.add(i),n.add(e)):n.add(i)}for(const[i,o]of t)e.has(i)||(n.add(o),r++);r>0&&this.statsStore.recordTagCreated(r);const i=[];for(const e of n){const t=await Gc(this.repository,e);null!==t&&i.push(t)}this.storeCommits(i)}async createBranch(e,t,n=!1){const r=await this.performFailableOperation((async()=>(await async function(e,t,n,r){const i=null!==n?["branch",t,n]:["branch",t];r&&i.push("--no-track"),await qw(i,e.path,"createBranch")}(this.repository,e,t,n),!0)));if(!0===r)return await this.loadBranches(),this.allBranches.find((t=>t.type===Ja.Local&&t.name===e))}async createTag(e,t){const n=await this.performFailableOperation((async()=>(await async function(e,t,n){const r=["tag","-a","-m","",t,n];await qw(r,e.path,"createTag")}(this.repository,e,t),!0)));void 0!==n&&(await this.refreshTags(),this.addTagToPush(e),this.statsStore.increment("tagsCreatedInDesktop"))}async deleteTag(e){const t=await this.performFailableOperation((async()=>(await async function(e,t){const n=["tag","-d",t];await qw(n,e.path,"deleteTag")}(this.repository,e),!0)));void 0!==t&&(await this.refreshTags(),this.removeTagToPush(e),this.statsStore.increment("tagsDeleted"))}get history(){return this._history}get tagsToPush(){return this._tagsToPush}get localTags(){return this._localTags}async loadBranches(){const[e,t]=await Promise.all([this.performFailableOperation((()=>gv(this.repository)))||[],this.performFailableOperation((()=>async function(e,t){const n=new RegExp(/.*? (renamed|checkout)(?:: moving from|\s*) (?:refs\/heads\/|\s*)(.*?) to (?:refs\/heads\/|\s*)(.*?)$/i),r=await qw(["log","-g","--no-abbrev-commit","--pretty=oneline","HEAD","-n","2500","--"],e.path,"getRecentBranches",{successExitCodes:new Set([0,128])});if(128===r.exitCode)return[];const i=r.stdout.split("\n"),o=new Set,s=new Set;for(const e of i){const t=n.exec(e);if(t&&4===t.length){const e=t[1],n=t[2],r=t[3];"renamed"===e&&s.add(n),s.has(r)||o.add(r)}if(6===o.size)break}return[...o]}(this.repository)))]);e&&(this._allBranches=this.mergeRemoteAndLocalBranches(e),await this.refreshDefaultBranch(),this.refreshRecentBranches(t),await this.checkPullWithRebase(),this.emitUpdate())}mergeRemoteAndLocalBranches(e){const t=new Array,n=new Array;for(const r of e)r.type===Ja.Local?t.push(r):r.type===Ja.Remote&&n.push(r);const r=new Set,i=new Array;for(const e of t)i.push(e),e.upstream&&r.add(e.upstream);for(const e of n)r.has(e.name)||i.push(e);return i}async checkPullWithRebase(){const e=await il(this.repository,"pull.rebase");null===e||""===e?this.pullWithRebase=void 0:"true"===e?this.pullWithRebase=!0:"false"===e?this.pullWithRebase=!1:(log.warn(`Unexpected value found for pull.rebase in config: '${e}'`),this.pullWithRebase=void 0)}async refreshDefaultBranch(){if(this._defaultBranch=await async function(e,t,n){const r=Lr(e)?Oc:n,i=r?await lv(e,r):null,o=i??await cu(),s=i?`${r}/${i}`:void 0;let a,l,c;for(const e of t)e.type===Ja.Local?(e.name===o&&(a=e),s&&e.upstream===s&&(l&&e.name!==o||(l=e))):s&&e.name===s&&(c=e);return l??a??c??null}(this.repository,this.allBranches,this.defaultRemote?.name),!Nr(this.repository)||Br(this.repository)===this.repository.gitHubRepository)return void(this._upstreamDefaultBranch=null);const e=await lv(this.repository,Oc)??cu();this._upstreamDefaultBranch=this._allBranches.find((t=>t.type===Ja.Remote&&t.remoteName===Oc&&t.nameWithoutRemote===e))??null}addTagToPush(e){this._tagsToPush=[...this._tagsToPush,e],iu(this.repository,this._tagsToPush),this.emitUpdate()}removeTagToPush(e){this._tagsToPush=this._tagsToPush.filter((t=>t!==e)),iu(this.repository,this._tagsToPush),this.emitUpdate()}clearTagsToPush(){this._tagsToPush=[],iu(this.repository,this._tagsToPush),this.emitUpdate()}refreshRecentBranches(e){if(!e||!e.length)return void(this._recentBranches=[]);const t=new Map;for(const e of this._allBranches)e.type===Ja.Local&&t.set(e.name,e);const n=new Array;for(const r of e){if(r===this.defaultBranch?.name)continue;const e=t.get(r);if(e&&(n.push(e),n.length>=5))break}this._recentBranches=n}get tip(){return this._tip}get defaultBranch(){return this._defaultBranch}get upstreamDefaultBranch(){return this._upstreamDefaultBranch}get allBranches(){return this._allBranches}get recentBranches(){return this._recentBranches}async loadLocalCommits(e){if(null===e)return void(this._localCommitSHAs=[]);let t;if(e.upstream){const n=qp(e.upstream,e.name);t=await this.performFailableOperation((()=>qc(this.repository,n,uu)))}else t=await this.performFailableOperation((()=>qc(this.repository,"HEAD",uu,void 0,["--not","--remotes"])));t&&(this.storeCommits(t),this._localCommitSHAs=t.map((e=>e.sha)),this.emitUpdate())}get localCommitSHAs(){return this._localCommitSHAs}storeCommits(e){for(const t of e)this.commitLookup.set(t.sha,t)}async undoFirstCommit(e){const t=await this.performFailableOperation((()=>od(this.repository)));if(null==t)throw new Error("Unable to undo commit because there are too many files in your repository's working directory.");const n=t.workingDirectory.files.filter((e=>e.status.kind===Io.Deleted)),r=n.map((e=>e.path));return await async function(e,t){await qw(["checkout","HEAD","--",...t],e.path,"checkoutPaths")}(e,r),await nv(e,"HEAD","Reverting first commit"),await async function(e){await qw(["rm","--cached","-r","-f","."],e.path,"unstageAllFiles")}(e),!0}async undoCommit(e){if(void 0!==await this.performFailableOperation((()=>0===e.parentSHAs.length?this.undoFirstCommit(this.repository):pv(this.repository,2,e.parentSHAs[0])))){if(this.repository.gitHubRepository)try{return await this.loadCommitAndCoAuthors(e),void this.emitUpdate()}catch(e){log.error("Failed to restore commit and co-authors, falling back",e)}this._commitMessage={summary:e.summary,description:e.body},this.emitUpdate()}}async loadCommitAndCoAuthors(e){const t=this.repository,n=await Ul(t,{summary:e.summary,description:e.body}),r=await async function(e,t){const n=await qw(["interpret-trailers","--parse"],e.path,"parseTrailers",{stdin:t});if(0===n.stdout.length)return[];const r=await gl(e);return ml(n.stdout,r)}(t,n),i=r.filter(dl);if(0===i.length)return void(this._commitMessage={summary:e.summary,description:e.body});const o=(await yl(t,n,[],!0)).split("\n");let s;const a=/^co-authored-by(.)\s(.*)/i,l=[];for(let e=o.length-1;e>=0;e--){const t=o[e],n=a.exec(t);if(!n)continue;if(s??=await gl(this.repository),-1===s.indexOf(n[1]))continue;const r=fl(t,n[1]);if(!r)continue;const c=i.findIndex((e=>e.value===r.value));-1!==c&&(l.unshift(i[c]),i.splice(c,1),o.splice(e,1))}o.splice(0,2);const c=o.join("\n").trim();this._commitMessage={summary:e.summary,description:c};const u=l.map((e=>bl.parse(e.value))),h=new Array;for(let e=0;e<u.length;e++){const t=u[e];if(null===t)continue;const{name:n,email:r}=t,i=this.coAuthors.filter(Bc).find((e=>e.name===n&&e.email===r&&null!==e.username));h.push(i||{kind:"known",name:n,email:r,username:null})}this._coAuthors=h,this._coAuthors.length>0&&!1===this._showCoAuthoredBy&&(this._showCoAuthoredBy=!0)}async performFailableOperation(e,t){try{return await e()}catch(e){return e=new at(e,{repository:this.repository,...t}),void this.emitError(e)}}get commitMessage(){return this._commitMessage}get showCoAuthoredBy(){return this._showCoAuthoredBy}get coAuthors(){return this._coAuthors}async fetch(e,t,n){const r=new Map;if(null!==this.currentRemote&&r.set(this.currentRemote.name,this.currentRemote),null!==this.defaultRemote&&r.set(this.defaultRemote.name,this.defaultRemote),null!==this.upstreamRemote&&r.set(this.upstreamRemote.name,this.upstreamRemote),r.size>0&&await this.fetchRemotes(e,[...r.values()],t,n),this.tip.kind===Ar.Valid){const e=this.tip.branch;if(null!==e.upstreamRemoteName&&null!==e.upstream){const t=jp(e.name,e.upstream);this._aheadBehind=await Gp(this.repository,t)}else this._aheadBehind=null}else this._aheadBehind=null;this.emitUpdate()}async fetchRemotes(e,t,n,r){if(!t.length)return;const i=1/t.length;for(let o=0;o<t.length;o++){const s=t[o],a=o*i;await this.fetchRemote(e,s,n,(e=>{e&&r&&r({...e,value:a+e.value*i})}))}}async fetchRemote(e,t,n,r){const i={type:ot.Fetch,repository:this.repository};await this.performFailableOperation((()=>async function(e,t,n,r){let i={successExitCodes:new Set([0]),env:await uh(t,n.url)};if(r){const e=`同步 ${n.name}`,t="fetch";i=await nh({...i,trackLFSProgress:!0},new qu,(i=>{if("context"===i.kind&&!i.text.startsWith("remote: Counting objects"))return;const o="progress"===i.kind?i.details.text:i.text,s=i.percent;r({kind:t,title:e,description:o,value:s,remote:n.name})})),r({kind:t,title:e,value:0,remote:n.name})}const o=await async function(e,t,n,r){return null!=r?[...Yw(),"fetch","--progress","--prune","--recurse-submodules=on-demand",t]:[...Yw(),"fetch","--prune","--recurse-submodules=on-demand",t]}(0,n.name,0,r);await qw(o,e.path,"fetch",i)}(this.repository,e,t,r)),{backgroundTask:n,retryAction:i}),await av(this.repository,e,t)}async fetchRefspec(e,t){const n=await rv(this.repository);for(const r of n)await this.performFailableOperation((()=>fv(this.repository,e,r,t)))}async loadStatus(){const e=await this.performFailableOperation((()=>od(this.repository)));if(!e)return null;this._aheadBehind=e.branchAheadBehind||null;const{currentBranch:t,currentTip:n}=e;if(t||n)if(n&&t){const r=await this.lookupCommit(n),i=new rl(t,e.currentUpstreamBranch||null,r,Ja.Local,`refs/heads/${t}`);this._tip={kind:Ar.Valid,branch:i}}else n?this._tip={kind:Ar.Detached,currentSha:n}:t&&(this._tip={kind:Ar.Unborn,ref:t});else this._tip={kind:Ar.Unknown};return this.emitUpdate(),e}async lookupCommit(e){const t=this.commitLookup.get(e);if(null!=t)return Promise.resolve(t);const n=await this.performFailableOperation((()=>Gc(this.repository,e)));if(null!=n)return this.commitLookup.set(e,n),n;throw new Error(`Could not load commit: '${e}'`)}async loadStashEntries(){const e=new Map,t=await Qc(this.repository);for(const n of t.desktopEntries)if(!e.has(n.branchName)){const t=this._desktopStashEntries.get(n.branchName);void 0!==t&&t.stashSha===n.stashSha?e.set(n.branchName,{...n,files:t.files}):e.set(n.branchName,n)}this._desktopStashEntries=e,this._stashEntryCount=t.stashEntryCount,this.emitUpdate(),this.loadFilesForCurrentStashEntry()}get currentBranchStashEntry(){return this._tip&&this._tip.kind===Ar.Valid&&this._desktopStashEntries.get(this._tip.branch.name)||null}get desktopStashEntries(){return this._desktopStashEntries}get stashEntryCount(){return this._stashEntryCount}get desktopStashEntryCount(){return this._desktopStashEntries.size}async loadFilesForCurrentStashEntry(){const e=this.currentBranchStashEntry;if(!e||e.files.kind!==Fc.NotLoaded)return;const{branchName:t}=e;this._desktopStashEntries.set(t,{...e,files:{kind:Fc.Loading}}),this.emitUpdate();const n=await async function(e,t){const n=["stash","show",t,"--raw","--numstat","-z","--format=format:","--no-show-signature","--"],{stdout:r}=await qw(n,e.path,"getStashedFiles");return jc(r,t,`${t}^`).files}(this.repository,e.stashSha),r=this._desktopStashEntries.get(t);r&&r.stashSha===e.stashSha&&(this._desktopStashEntries.set(t,{...r,files:{kind:Fc.Loaded,files:n}}),this.emitUpdate())}async loadRemotes(){const e=await rv(this.repository);this._defaultRemote=function(e){return e.find((e=>"origin"===e.name))||e[0]||null}(e);const t=this.tip.kind===Ar.Valid&&null!==this.tip.branch.upstreamRemoteName?this.tip.branch.upstreamRemoteName:null;this._currentRemote=null!==t&&e.find((e=>e.name===t))||this._defaultRemote;const n=this.repository.gitHubRepository&&this.repository.gitHubRepository.parent;this._upstreamRemote=n?Mc(n,e):null,this.emitUpdate()}async addUpstreamRemoteIfNeeded(){const e=this.repository.gitHubRepository&&this.repository.gitHubRepository.parent;if(!e)return;const t=await rv(this.repository);if(Mc(e,t))return;const n=t.find((e=>e.name===Oc));if(n){const e=new Nc(this.repository,n);return void this.emitError(e)}const r=tt("Parent repositories are fully loaded",e.cloneURL);this._upstreamRemote=await this.performFailableOperation((()=>iv(this.repository,Oc,r)))??null}async ensureUpstreamRemoteURL(e){await this.performFailableOperation((async()=>{try{await iv(this.repository,Oc,e)}catch(t){if(!(t instanceof zw&&t.result.gitError===Ua.ko.RemoteAlreadyExists))throw t;await sv(this.repository,Oc,e)}}))}get aheadBehind(){return this._aheadBehind}get defaultRemote(){return this._defaultRemote}get currentRemote(){return this._currentRemote}get upstreamRemote(){return this._upstreamRemote}setShowCoAuthoredBy(e){this._showCoAuthoredBy=e,e||(this._coAuthors=[]),this.emitUpdate()}setCoAuthors(e){this._coAuthors=e,this.emitUpdate()}setCommitMessage(e){return this._commitMessage=e,this.emitUpdate(),Promise.resolve()}get lastFetched(){return this._lastFetched}async updateLastFetched(){const t=e.join(this.repository.path,".git","FETCH_HEAD");try{const e=await(0,y.stat)(t);e.size>0&&(this._lastFetched=e.mtime)}catch{this._lastFetched=null}return this.emitUpdate(),this._lastFetched}merge(e,t=!1){if(this.tip.kind!==Ar.Valid)throw new Error(`unable to merge as tip state is '${this.tip.kind}' and the application expects the repository to be on a branch currently`);const n=this.tip.branch.name;return this.performFailableOperation((()=>async function(e,t,n=!1){const r=["merge"];n&&r.push("--squash"),r.push(t);const{exitCode:i,stdout:o}=await qw(r,e.path,"merge",{expectedErrors:new Set([Ua.ko.MergeConflicts])});if(0!==i)return Wh.Failed;if(n){const{exitCode:t}=await qw(["commit","--no-edit"],e.path,"createSquashMergeCommit");if(0!==t)return Wh.Failed}return o===$h?Wh.AlreadyUpToDate:Wh.Success}(this.repository,e.name,t)),{gitContext:{kind:"merge",currentBranch:n,theirBranch:e.name},retryAction:{type:ot.Merge,currentBranch:n,theirBranch:e,repository:this.repository}})}async setRemoteURL(e,t){const n=!0===await this.performFailableOperation((()=>sv(this.repository,e,t)));return await this.loadRemotes(),this.emitUpdate(),n}async discardChanges(t,n=!0,r=!1){const i=new Array,o=new Array,s=await async function(t){const[n,r]=await Promise.all([S(e.join(t.path,".gitmodules")),S(e.join(t.path,".git","modules"))]);if(!n&&!r)return log.info('No submodules found. Skipping "git submodule status"'),[];const{stdout:i,exitCode:o}=await qw(["submodule","status","--"],t.path,"listSubmodules",{successExitCodes:new Set([0,128])});if(128===o)return[];const s=new Array,a=/^.([^ ]+) (.+) \((.+?)\)$/gm;for(const[,e,t,n]of i.matchAll(a))s.push(new Ev(e,t,n));return s}(this.repository);await async function(e,t){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;){const e=await _c();do{await Promise.resolve(t(r.value)),r=n.next()}while(!r.done&&performance.now()-e<10)}}(t,(async a=>{const l=s.some((e=>e.path===a.path));if(a.status.kind!==Io.Deleted&&!l&&n)try{await this.shell.moveItemToTrash(e.resolve(this.repository.path,a.path))}catch(e){if(r)throw new ct(e,this.repository,t)}a.status.kind===Io.Copied||a.status.kind===Io.Renamed?(o.push(a.path),i.push(a.status.oldPath),o.push(a.status.oldPath)):(i.push(a.path),o.push(a.path))}));const a=await async function(e){const t=["diff-index","--cached","--name-status","--no-renames","-z"];let n=await qw([...t,"HEAD","--"],e.path,"getIndexChanges",{successExitCodes:new Set([0,128])});128===n.exitCode&&(n=await qw([...t,Rp],e.path,"getIndexChanges"));const r=new Map,i=n.stdout.split("\0");for(let e=0;e<i.length-1;e+=2){const t=kp(i[e]),n=i[e+1];r.set(n,t)}return r}(this.repository),l=o.filter((e=>a.has(e))),c=i.filter((e=>s.find((t=>t.path===e)))),u=i.filter((e=>-1===c.indexOf(e)||a.get(e)!==Ep.Added));await this.performFailableOperation((async()=>{c.length>0&&await async function(e,t){0!==t.length&&await qw(["submodule","update","--recursive","--force","--",...t],e.path,"updateSubmodule")}(this.repository,c),await async function(e,t,n,r){if(!r.length)return;{const t=[...hv(2,"HEAD"),"--",...r];await qw(t,e.path,"resetPaths")}}(this.repository,0,0,l),await async function(e,t){if(!t.length)return;const n={successExitCodes:new Set([0,1]),stdin:t.join("\0")};await qw(["checkout-index","-f","-u","-q","--stdin","-z"],e.path,"checkoutIndex",n)}(this.repository,u)}))}async discardChangesFromSelection(e,t,n){await this.performFailableOperation((()=>async function(e,t,n,r){const i=function(e,t,n){let r="";return t.hunks.forEach(((e,t)=>{let i="",o=0,s=0,a=!1;e.lines.forEach(((t,r)=>{const l=e.unifiedDiffStart+r;if(t.type!==xo.Hunk){if(t.type===xo.Context)i+=`${t.text}\n`,o++,s++;else if(n.isSelected(l))t.type===xo.Add?(i+=`-${t.text.substring(1)}\n`,s++):t.type===xo.Delete?(i+=`+${t.text.substring(1)}\n`,o++):et(t.type,`Unsupported line type ${t.type}`),a=!0;else if(t.type===xo.Add)o++,s++,i+=` ${t.text.substring(1)}\n`;else{if(t.type===xo.Delete)return;et(t.type,`Unsupported line type ${t.type}`)}t.noTrailingNewLine&&(i+="\\ No newline at end of file\n")}})),a&&(r+=Zw(e.header.newStartLine,s,e.header.oldStartLine,o),r+=i)})),0===r.length?null:Qw(e,e)+r}(t,n,r);if(null===i)return;await qw(["apply","--unidiff-zero","--whitespace=nowarn","-"],e.path,"discardChangesFromSelection",{stdin:i})}(this.repository,e,t,n)))}async revertCommit(e,t,n,r){await this.performFailableOperation((()=>async function(e,t,n,r){const i=[...Yw(),"revert"];t.parentSHAs.length>1&&i.push("-m","1"),i.push(t.sha);let o={};if(r){const t=await uh(n,ch(n,e));o=await nh({env:t,trackLFSProgress:!0},new Sv,(e=>{const t="progress"===e.kind?e.details.text:e.text,n="progress"===e.kind?e.details.title:"",i=e.percent;r({kind:"revert",description:t,value:i,title:n})}))}await qw(i,e.path,"revert",o)}(e,t,n,r))),this.emitUpdate()}async updateExistingUpstreamRemote(){const e=tt("To update an upstream remote, the repository must be a GitHub repository",this.repository.gitHubRepository),t=tt("To update an upstream remote, the repository must have a parent",e.parent),n=tt("Parent repositories are always fully loaded",t.cloneURL);await this.performFailableOperation((()=>sv(this.repository,Oc,n)))}async getCompareCommits(e,t){if(this.tip.kind!==Ar.Valid)return null;const n=this.tip.branch,r=await Gp(this.repository,jp(n.name,e.name));if(null==r)return null;const i=t===Ye.Ahead?qp(e.name,n.name):qp(n.name,e.name),o=t===Ye.Ahead?r.ahead:r.behind,s=await qc(this.repository,i,o);return s.length>0&&this.storeCommits(s),{commits:s,ahead:r.ahead,behind:r.behind}}async pruneForkedRemotes(e){const t=function(e,t,n){const r=new Set(t.map((e=>e.head.gitHubRepository.cloneURL))),i=new Set(n.map((e=>e.upstreamRemoteName)));return e.filter((e=>e.name.startsWith(Za)&&!r.has(e.url)&&!i.has(e.name)))}(await rv(this.repository),e,this.allBranches);for(const e of t)await ov(this.repository,e.name)}async getCommitsBetweenBranches(e,t){const n=qp(e.name,t.name),r=await this.performFailableOperation((()=>qc(this.repository,n)));return null==r?[]:(r.length>0&&this.storeCommits(r),r)}}class du{shell;statsStore;onGitStoreUpdated;onDidError;gitStores=new Map;constructor(e,t,n,r){this.shell=e,this.statsStore=t,this.onGitStoreUpdated=n,this.onDidError=r}remove(e){this.gitStores.has(e.hash)&&this.gitStores.delete(e.hash)}get(e){let t=this.gitStores.get(e.hash);return void 0===t&&(t=new pu(e,this.shell,this.statsStore),t.onDidUpdate((()=>this.onGitStoreUpdated(e,t))),t.onDidError((e=>this.onDidError(e))),this.gitStores.set(e.hash,t)),t}}function mu(e,t,n){const r=e.conflictState,i=function(e,t){if(null!==e.rebaseInternalState){const{currentTip:n}=e;if(null==n)return null;const{targetBranch:r,originalBranchTip:i,baseBranchTip:o}=e.rebaseInternalState;return{kind:"rebase",currentTip:n,manualResolutions:t,targetBranch:r,originalBranchTip:i,baseBranchTip:o}}if(e.isCherryPickingHeadFound){const{currentBranch:n}=e;return null==n?null:{kind:"cherryPick",manualResolutions:t,targetBranchName:n}}const{currentBranch:n,currentTip:r,mergeHeadFound:i,squashMsgFound:o}=e;return null==n||null==r||!i&&!o||!i&&!e.doConflictedFilesExist?null:{kind:"merge",currentBranch:n,currentTip:r,manualResolutions:t}}(t,null!==r?r.manualResolutions:new Map);return null==r&&null==i?null:null!=r&&!Xe(r)||null!=i&&!Xe(i)?(null!=r&&!Qe(r)||null!=i&&!Qe(i)||function(e,t,n,r){const i=null!=e?e.targetBranch:null,o=null!=t?t.targetBranch:null;if(null!=i&&null!=o&&i!==o)return void r.increment("rebaseAbortedAfterConflictsCount");const{currentTip:s,currentBranch:a}=n;null!=e&&null==t&&null!=s&&null!=a&&(e.originalBranchTip!==s&&a===e.targetBranch||r.increment("rebaseAbortedAfterConflictsCount"))}(r,i,t,n),i):(function(e,t,n,r){const i=null!=e?e.currentBranch:null,o=null!=t?t.currentBranch:null;if(null!=i&&null!=o&&i!==o)return void r.increment("mergeAbortedAfterConflictsCount");const{currentTip:s}=n;null!=e&&null==t&&null!=s&&(e.currentTip!==s?r.increment("mergeSuccessAfterConflictsCount"):r.increment("mergeAbortedAfterConflictsCount"))}(r,i,t,n),i)}const fu=ft()(((e,t)=>new Intl.RelativeTimeFormat(e,t)),{cache:new(yt())({maxSize:100}),cacheKey:(...e)=>JSON.stringify(e)});function gu(e){const t=fu("en-US",{numeric:"auto"}),n=e<0?-1:1,r=Math.round(Math.abs(e)/1e3),i=Math.round(r/60),o=Math.round(i/60),s=Math.round(o/24),a=Math.round(s/30),l=Math.round(a/12);return r<45?t.format(r*n,"second"):i<45?t.format(i*n,"minute"):o<24?t.format(o*n,"hour"):s<30?t.format(s*n,"day"):a<18?t.format(a*n,"month"):t.format(l*n,"year")}const yu=["HEAD","refs/heads/main","refs/heads/master","refs/heads/gh-pages","refs/heads/develop","refs/heads/dev","refs/heads/development","refs/heads/trunk","refs/heads/devel","refs/heads/release"],bu={enforcePruneThreshold:!0,deleteBranch:!0};class wu{repository;gitStoreCache;repositoriesStore;repositoriesStateCache;onPruneCompleted;timer=null;constructor(e,t,n,r,i){this.repository=e,this.gitStoreCache=t,this.repositoriesStore=n,this.repositoriesStateCache=r,this.onPruneCompleted=i}async start(){null!==this.timer&&Je(`A background prune task is already active and cannot begin pruning on ${this.repository.name}`),await this.pruneLocalBranches(bu),this.timer=window.setInterval((()=>this.pruneLocalBranches(bu)),144e5)}stop(){null!==this.timer&&(clearInterval(this.timer),this.timer=null)}async testPrune(){return this.pruneLocalBranches({enforcePruneThreshold:!1,deleteBranch:!1})}async findBranchesMergedIntoDefaultBranch(e,t){const n=this.gitStoreCache.get(e),r=await n.performFailableOperation((()=>async function(e,t){const n=ev(t),{formatArgs:r,parse:i}=Uc({sha:"%(objectname)",canonicalRef:"%(refname)"}),o=["branch",...r,"--merged",t],s=new Map,{stdout:a}=await qw(o,e.path,"mergedBranches");for(const e of i(a))e.canonicalRef!==n&&s.set(e.canonicalRef,e.sha);return s}(e,t.name)));if(void 0===r)return new Map;const i=await tv(e,"HEAD");return i&&r.delete(i),r}async pruneLocalBranches(e){if(!_r(this.repository))return;const t=await this.repositoriesStore.getLastPruneDate(this.repository),n=Ct(-24,"hours");if(e.enforcePruneThreshold&&null!=t&&n<t){const e=gu(t-Date.now());return void log.info(`[BranchPruner] Last prune took place ${e} - skipping`)}await this.repositoriesStore.updateLastPruneDate(this.repository,Date.now());const{branchesState:r}=this.repositoriesStateCache.get(this.repository),{defaultBranch:i,allBranches:o}=r;if(null===i)return;const s=await this.findBranchesMergedIntoDefaultBranch(this.repository,i);if(0===s.size)return void log.info("[BranchPruner] No branches to prune.");const a=new Date(Ct(-14,"days")),l=await async function(e,t){const n=new RegExp(/^[a-z0-9]{40}\sHEAD@{(.*)}\scheckout: moving from\s.*\sto\s(.*)$/),r=await qw(["reflog","--date=iso",`--after="${t.toISOString()}"`,"--pretty=%H %gd %gs","--grep-reflog=checkout: moving from .* to .*$","--"],e.path,"getCheckoutsAfterDate",{successExitCodes:new Set([0,128])}),i=new Map;if(128===r.exitCode&&yv.test(r.stderr))return i;const o=r.stdout.split("\n");for(const e of o){const t=n.exec(e);if(null===t||3!==t.length)continue;const[,r,o]=t;i.has(o)||i.set(o,new Date(r))}return i}(this.repository,a),c=new Set([...l.keys()].map(ev)),u=(await gv(this.repository,"refs/remotes/")).map((e=>ev(e.name))),h=Array.from(s.keys()).filter((e=>{if(yu.includes(e))return!1;if(c.has(e))return!1;const t=function(e,t){const n=t.find((t=>ev(t.name)===e));if(void 0===n)return;const{upstream:r}=n;return null!==r?ev(r):void 0}(e,o);return void 0!==t&&!u.includes(t)}));log.info(`[BranchPruner] Pruning ${h.length} branches that have been merged into the default branch, ${i.name} (${i.tip.sha}), from '${this.repository.name}`);const p=this.gitStoreCache.get(this.repository),d="refs/heads/";for(const t of h){if(!t.startsWith(d))continue;const n=t.substring(d.length);e.deleteBranch?await p.performFailableOperation((()=>cv(this.repository,n)))&&log.info(`[BranchPruner] Pruned branch ${n} ((was ${s.get(t)}))`):log.info(`[BranchPruner] Branch '${n}' marked for deletion`)}this.onPruneCompleted(this.repository)}}var vu,Cu,Su;!function(e){e.SuccessfulMerge="SuccessfulMerge",e.MergeConflictsFound="MergeConflictsFound",e.SuccessfulRebase="SuccessfulRebase",e.RebaseConflictsFound="RebaseConflictsFound",e.BranchAlreadyUpToDate="BranchAlreadyUpToDate",e.SuccessfulCherryPick="SuccessfulCherryPick",e.CherryPickConflictsFound="CherryPickConflictsFound",e.CherryPickUndone="CherryPickUndone",e.SquashUndone="SquashUndone",e.ReorderUndone="ReorderUndone",e.OpenThankYouCard="OpenThankYouCard",e.SuccessfulSquash="SuccessfulSquash",e.SuccessfulReorder="SuccessfulReorder",e.ConflictsFound="ConflictsFound",e.WindowsVersionNoLongerSupported="WindowsVersionNoLongerSupported"}(vu||(vu={})),function(e){e.Loading="loading",e.Clean="clean",e.Conflicts="conflicts",e.Invalid="invalid"}(Cu||(Cu={})),function(e){e.AskForConfirmation="AskForConfirmation",e.StashOnCurrentBranch="StashOnCurrentBranch",e.MoveToNewBranch="MoveToNewBranch"}(Su||(Su={}));const Eu=Su.AskForConfirmation;function ku(e,t,n){return e.kind!==Ar.Valid?null:null!==e.branch.upstreamWithoutRemote&&null!==t&&function(e,t){return null!==t.cloneURL&&hr(t.cloneURL,e)}(t.url,n)?e.branch.upstreamWithoutRemote:e.branch.nameWithoutRemote}var Ru;function xu(e){return e!==Ru.NotApplicable&&e!==Ru.Paused}!function(e){e.NotApplicable="NotApplicable",e.PickEditor="PickEditor",e.CreateBranch="CreateBranch",e.EditFile="EditFile",e.MakeCommit="MakeCommit",e.PushBranch="PushBranch",e.OpenPullRequest="OpenPullRequest",e.AllDone="AllDone",e.Paused="Paused"}(Ru||(Ru={}));const Tu=[Ru.PickEditor,Ru.CreateBranch,Ru.EditFile,Ru.MakeCommit,Ru.PushBranch,Ru.OpenPullRequest,Ru.AllDone],Du="tutorial-install-editor-skipped",Au="tutorial-pull-request-step-complete",Pu="tutorial-paused";class Iu{getResolvedExternalEditor;installEditorSkipped=At(Du,!1);prStepComplete=At(Au,!1);tutorialPaused=At(Pu,!1);constructor(e){this.getResolvedExternalEditor=e}async getCurrentStep(e,t){return e?this.tutorialPaused?Ru.Paused:await this.isEditorInstalled()?this.isBranchCheckedOut(t)?this.hasChangedFile(t)?this.hasMultipleCommits(t)?this.commitPushed(t)?this.pullRequestCreated(t)?Ru.AllDone:Ru.OpenPullRequest:Ru.PushBranch:Ru.MakeCommit:Ru.EditFile:Ru.CreateBranch:Ru.PickEditor:(this.tutorialPaused&&this.resumeTutorial(),Ru.NotApplicable)}async isEditorInstalled(){return this.installEditorSkipped||null!==this.getResolvedExternalEditor()}isBranchCheckedOut(e){const{branchesState:t}=e,{tip:n}=t,r=n.kind===Ar.Valid?n.branch.name:null,i=null!==t.defaultBranch?t.defaultBranch.name:null;return null!==r&&null!==i&&r!==i}hasChangedFile(e){if(this.hasMultipleCommits(e))return!0;const{changesState:t}=e;return t.workingDirectory.files.length>0}hasMultipleCommits(e){const{branchesState:t}=e,{tip:n}=t;if(n.kind===Ar.Valid){const t=e.commitLookup.get(n.branch.tip.sha);return void 0!==t&&t.parentSHAs.some((e=>e.length>0))}return!1}commitPushed(e){const{aheadBehind:t}=e;return null!==t&&0===t.ahead}pullRequestCreated(e){return null!==e.branchesState.currentPullRequest&&this.markPullRequestTutorialStepAsComplete(),this.prStepComplete}skipPickEditor=()=>{this.installEditorSkipped=!0,Pt(Du,this.installEditorSkipped)};markPullRequestTutorialStepAsComplete=()=>{this.prStepComplete=!0,Pt(Au,this.prStepComplete)};onNewTutorialRepository=()=>{this.installEditorSkipped=!1,localStorage.removeItem(Du),this.prStepComplete=!1,localStorage.removeItem(Au),this.tutorialPaused=!1,localStorage.removeItem(Pu)};pauseTutorial(){this.tutorialPaused=!0,Pt(Pu,this.tutorialPaused)}resumeTutorial(){this.tutorialPaused=!1,Pt(Pu,this.tutorialPaused)}}function _u(e,t,n){return null==e.upstreamWithoutRemote?null:t.find((t=>Nu(e,t,n)))||null}function Nu(e,t,n){return t.head.ref===e.upstreamWithoutRemote&&cr(t.head.gitHubRepository,n)}class Ou{steps;stepIndex=0;lastPercent=0;constructor(e){if(!e.length)throw new Error("must specify at least one step");const t=e.reduce(((e,t)=>e+t.weight),0);this.steps=e.map((e=>({title:e.title,weight:e.weight/t})))}parse(e){const t=function(e){const t=e.lastIndexOf(": ");if(0===t)return null;if(t-2>=e.length)return null;const n=e.substring(0,t),r=e.substring(n.length+2).trim();if(!r.length)return null;const i=r.split(", ");if(!i.length)return null;let o,s,a;if(Bu.test(i[0])){if(o=parseInt(i[0],10),isNaN(o))return null}else{const e=Mu.exec(i[0]);if(!e||4!==e.length)return null;if(a=parseInt(e[1],10),o=parseInt(e[2],10),s=parseInt(e[3],10),isNaN(a)||isNaN(o)||isNaN(s))return null}let l=!1;for(let e=1;e<i.length;e++)if("done."===i[e]){l=!0;break}return{title:n,value:o,percent:a,total:s,done:l,text:e}}(e);if(!t)return{kind:"context",text:e,percent:this.lastPercent};let n=0;for(let e=0;e<this.steps.length;e++){const r=this.steps[e];if(e>=this.stepIndex&&t.title===r.title)return t.total&&(n+=r.weight*(t.value/t.total)),this.stepIndex=e,this.lastPercent=n,{kind:"progress",percent:n,details:t};n+=r.weight}return{kind:"context",text:e,percent:this.lastPercent}}}const Mu=/^(\d{1,3})% \((\d+)\/(\d+)\)$/,Bu=/^\d+$/,Fu=[{title:"检出文件",weight:1}];class Lu extends Ou{constructor(){super(Fu)}}const Hu=[{title:"远程: 压缩对象",weight:.1},{title:"接收对象",weight:.6},{title:"解决增量",weight:.1},{title:"检出文件",weight:.2}];class Uu extends Ou{constructor(){super(Hu)}}const Wu=[{title:"压缩对象",weight:.2},{title:"写入对象",weight:.7},{title:"远程: 解决增量",weight:.1}];class $u extends Ou{constructor(){super(Wu)}}const zu=[{title:"远程: 压缩对象",weight:.1},{title:"接收对象",weight:.7},{title:"解决增量",weight:.2}];class qu extends Ou{constructor(){super(zu)}}const ju=[{title:"远程: 压缩对象",weight:.1},{title:"接收对象",weight:.7},{title:"解决增量",weight:.15},{title:"检出文件",weight:.15}];class Gu extends Ou{constructor(){super(ju)}}var Vu=n(8122),Ku=n.n(Vu);class Yu{path;emitter=new st.Emitter;state=null;constructor(e){this.path=e}onDataAvailable(e){return this.emitter.on("data",e)}onError(e){return this.emitter.on("error",e)}handleError(e){this.state=null,this.emitter.emit("error",e)}start(){if(this.state)throw new Error("Tailer already running");try{const e=t.watch(this.path,this.onWatchEvent);e.on("error",(e=>{this.handleError(e)})),this.state={watcher:e,position:0}}catch(e){this.handleError(e)}}onWatchEvent=e=>{"change"===e&&this.state&&t.stat(this.path,((e,t)=>{if(e)return;const n=this.state;n&&(t.size<=n.position||(this.state={...n,position:t.size},this.readChunk(t,n.position)))}))};readChunk(e,n){const r=t.createReadStream(this.path,{start:n,end:e.size});this.emitter.emit("data",r)}stop(){const e=this.state;e&&(e.watcher.close(),this.state=null)}}async function Xu(t){const n=e.join(Jt.tmpdir(),`${t}-`),r=await(0,y.mkdtemp)(n);return e.join(r,t)}function Qu(e,t){if(t<=0)return Math.round(e);const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}const Zu=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];function Ju(e,t=0,n=!0){if(!Number.isFinite(e))return`${e}`;const r=Math.floor(Math.log(Math.abs(e))/Math.log(1024)),i=Qu(e/Math.pow(1024,r),t);return`${n?i.toFixed(t):i} ${Zu[r]}`}const eh=/^(.+?)\s{1}(\d+)\/(\d+)\s{1}(\d+)\/(\d+)\s{1}(.+)$/;class th{files=new Map;parse(e){const t=e.match(eh);if(!t||7!==t.length)return{kind:"context",percent:0,text:e};const n=t[1],r=parseInt(t[3],10),i=parseInt(t[4],10),o=parseInt(t[5],10),s=t[6];if(isNaN(r)||isNaN(i)||isNaN(o))return{kind:"context",percent:0,text:e};this.files.set(s,{transferred:i,size:o,done:i===o});let a=0,l=0,c=0;const u=Math.max(r,this.files.size);for(const e of this.files.values())a+=e.transferred,l+=e.size,c+=e.done?1:0;const h=`${Ju(a,1)} / ${Ju(l,1)}`,p=this.directionToHumanFacingVerb(n);return{kind:"progress",percent:0,details:{title:`${p} "${s}"`,value:a,total:l,percent:0,done:!1,text:`${p} ${s} (${c} out of an estimated ${u} completed, ${h})`}}}directionToHumanFacingVerb(e){switch(e){case"download":default:return"Downloading";case"upload":return"Uploading";case"checkout":return"Checking out"}}}async function nh(e,t,n){let r=null,i={};if(e.trackLFSProgress)try{r=await async function(){const e=await Xu("GitHubDesktop-lfs-progress");return await(0,y.open)(e,"wx").then((e=>e.close())),e}(),i={GIT_LFS_PROGRESS:r}}catch(e){log.error("Error writing LFS progress file",e),i={GIT_LFS_PROGRESS:null}}return sa(e,{processCallback:rh(t,r,n),env:sa(e.env,i)})}function rh(n,r,i){return o=>{let s=!1;if(r){const n=new th,a=function(e,t){const r=new Yu(e),o=r.onError((t=>{log.warn(`Unable to tail path: ${e}`,t)})),a=r.onDataAvailable((e=>{Ku()(e).on("data",(e=>{if(a.disposed)return;(e=>{const t=n.parse(e);"progress"===t.kind&&(s=!0,i(t))})(e.toString())}))}));return r.start(),new st.Disposable((()=>{a.dispose(),o.dispose(),r.stop()}))}(r);o.on("close",(()=>{a.dispose(),t.unlink(r,(n=>{if(null==n){const n=e.dirname(r);t.rmdir(n,(()=>{}))}}))}))}o.stderr&&Ku()(o.stderr).on("data",(e=>{const t=n.parse(e);if(s){if("context"===t.kind)return;const{title:e,done:n}=t.details;if("Filtering content"===e)return void(n&&(s=!1))}i(t)}))}}function ih(e){return e.endpoint===Qn()?"GitHub.com":o.parse(e.endpoint).hostname||e.endpoint}function oh(e){const t={GIT_TERMINAL_PROMPT:"0",GIT_TRACE:localStorage.getItem("git-trace")||"0"};return e?{...t,DESKTOP_USERNAME:e.login,DESKTOP_ENDPOINT:e.endpoint}:t}const sh=new Set([Ua.ko.HTTPSAuthenticationFailed,Ua.ko.SSHAuthenticationFailed,Ua.ko.HTTPSRepositoryNotFound,Ua.ko.SSHRepositoryNotFound]);function ah(e,t){switch(e.toLowerCase()){case"proxy":case"http":return`http://${t}`;case"https":return`https://${t}`;case"socks":case"socks4":return`socks4://${t}`;case"socks5":return`socks5://${t}`}return null}async function lh(e){const t=function(e){if("DIRECT"===e)return null;const t=e.trim().split(/\s*;\s*/),n=new Array;for(const e of t){if(e.match(/^direct/i))break;const[t,r]=e.split(/\s+/,2);if(void 0!==r){const i=ah(t,r);null!==i?n.push(i):log.warn(`Skipping proxy spec: ${e}`)}}return n.length>0?n:null}(await se(e).catch((t=>(log.error(`Failed resolving proxy for '${e}'`,t),"DIRECT"))));if(null!==t)for(const e of t)return e}function ch(e,t){return null!==e?e.endpoint===Qn()?"https://github.com":e.endpoint:null!==t.gitHubRepository&&null!==t.gitHubRepository.cloneURL?t.gitHubRepository.cloneURL:"https://github.com"}async function uh(e,t){return{...oh(e),...await hh(t)}}async function hh(e,t=process.env,n=lh){const r=/^(https?):\/\//i.exec(e);if(null===r)return;const i=r[1].toLowerCase();if("ALL_PROXY"in t||"all_proxy"in t)return void log.info("proxy url not resolved, ALL_PROXY already set");const o=`${i}_proxy`;if(o in t||"https"===i&&"HTTPS_PROXY"in t)return void log.info(`proxy url not resolved, ${o} already set`);const s=await n(e).catch((e=>{log.error("Failed resolving Git proxy",e)}));return void 0===s?void 0:{[o]:s}}const ph="last-clone-location";async function dh(){return localStorage.getItem(ph)||e.join(await async function(){if(!pt)try{pt=await K("documents")}catch(e){pt=await K("home")}return pt}(),"GitHub")}function mh(e){localStorage.setItem(ph,e)}const fh=Math.ceil(3e4*Math.random());class gh{getRepositories;refreshRepositoryIndicators;running=!1;refreshTimeoutId=null;paused=!1;pausePromise=Promise.resolve();resolvePausePromise=null;lastRefreshStartedAt=null;constructor(e,t){this.getRepositories=e,this.refreshRepositoryIndicators=t}start(){this.running||(log.debug("[RepositoryIndicatorUpdater] Starting"),this.running=!0,this.scheduleRefresh())}scheduleRefresh(){if(this.running&&null===this.refreshTimeoutId){const e=null===this.lastRefreshStartedAt?1/0:Date.now()-this.lastRefreshStartedAt,t=Math.max(9e5-e,0)+fh,n=isFinite(e)?`${(e/1e3).toFixed(3)}s前`:"never",r=`${(t/1e3).toFixed(3)}s`;log.debug(`[RepositoryIndicatorUpdater] Last refresh: ${n}, scheduling in ${r}`),this.refreshTimeoutId=window.setTimeout((()=>this.refreshAllRepositories()),t)}}async refreshAllRepositories(){if(this.refreshTimeoutId=null,log.debug("[RepositoryIndicatorUpdater] Running refreshAllRepositories"),this.paused&&(log.debug("[RepositoryIndicatorUpdater] Paused before starting refreshAllRepositories"),await this.pausePromise,!this.running))return;let e;this.lastRefreshStartedAt=Date.now();const t=new Set,n=()=>this.getRepositories().find((e=>!t.has(e.id))),r=Date.now();let i=0;for(;this.running&&void 0!==(e=n());){if(await this.refreshRepositoryIndicators(e),this.paused){log.debug(`[RepositoryIndicatorUpdater] Pausing after ${t.size} repositories`);const e=Date.now();await this.pausePromise,i+=Date.now()-e,log.debug(`[RepositoryIndicatorUpdater] Resuming after ${i/1e3}s`)}t.add(e.id)}if(t.size>=1){const e=Date.now()-r,n=((e-i)/1e3).toFixed(1),o=(i/1e3).toFixed(1),s=(e/1e3).toFixed(1);log.info(`[RepositoryIndicatorUpdater]: Refreshing sidebar indicators for ${t.size} repositories took ${n}s of which ${o}s paused, total ${s}s`)}this.scheduleRefresh()}clearRefreshTimeout(){null!==this.refreshTimeoutId&&(window.clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=null)}stop(){this.running&&(log.debug("[RepositoryIndicatorUpdater] Stopping"),this.running=!1,this.clearRefreshTimeout())}pause(){!1===this.paused&&(this.pausePromise=new Promise((e=>{this.resolvePausePromise=e})),this.paused=!0)}resume(){this.paused&&(null!==this.resolvePausePromise&&(this.resolvePausePromise(),this.resolvePausePromise=null),this.paused=!1)}}function yh(e){const t=e.emails;if(0===t.length)return vh(e.id,e.login,e.endpoint);const n=t.find((e=>e.primary));if(n&&("public"===(r=n).visibility||!r.visibility))return n.email;var r;const i=`@${bh(e.endpoint)}`,o=t.find((e=>e.email.toLowerCase().endsWith(i)));return o?o.email:t[0].email}function bh(e){return Qn()!==e?`users.noreply.${o.parse(e).hostname}`:"users.noreply.github.com"}function wh(e,t){return`${e}@${bh(t)}`}function vh(e,t,n){return`${e}+${t}@${bh(n)}`}const Ch=(e,t)=>{const{id:n,login:r,endpoint:i,emails:o}=e,s=t.toLowerCase();return o.some((({email:e})=>e.toLowerCase()===s))||vh(n,r,i).toLowerCase()===s||wh(r,i).toLowerCase()===s},Sh="复制文件路径",Eh="复制文件相对路径",kh="打开于 External Editor",Rh="在Finder中显示",xh="Trash",Th="使用默认程序打开",Dh=(e,t,n,r)=>Ww((i=>Wa.measure(`${n}: git ${e.join(" ")}`,(async()=>Ua.nY.spawn(e,t,{...r,env:{...r?.env,...i}})))));async function Ah(e,t,n,r,i){return new Promise((async(o,s)=>{const a=await Dh(e,t,n);a.on("error",(e=>{$a(e)?s(new Error(`Failed to execute ${n}: ${e.code}`)):s(e)}));let l=0,c=!1;const u=new Array;a.stdout&&a.stdout.on("data",(e=>{(!i||l<i)&&(u.push(e),l+=e.length),i&&l>=i&&!c&&(a.kill(),c=!0)}));const h=new Array;a.stderr&&a.stderr.on("data",(e=>{h.push(e)})),a.on("close",((e,t)=>{const a=Buffer.concat(u,i?Math.min(i,l):l),c=Buffer.concat(h),p=r||new Set([0]);null!==e&&p.has(e)||t?o({output:a,error:c,exitCode:e}):s(new Error(`Git returned an unexpected exit code '${e}' which should be handled by the caller (${n}).'`))}))}))}async function Ph(e){const{output:t}=await Ah(["diff","--check"],e,"getFilesWithConflictMarkers",new Set([0,2])),n=ja(t.toString("utf8"),Ih);return 0===n.length?new Map:n.reduce(((e,t)=>e.concat(t))).reduce(((e,t)=>e.set(t,(e.get(t)||0)+1)),new Map)}const Ih=/(.+):\d+: leftover conflict marker/gi;function _h(e){return"header"===e.kind}function Nh(e){return"entry"===e.kind}const Oh=/^1 ([MADRCUTX?!.]{2}) (N\.\.\.|S[C.][M.][U.]) (\d+) (\d+) (\d+) ([a-f0-9]+) ([a-f0-9]+) ([\s\S]*?)$/;function Mh(e){const t=Oh.exec(e);if(!t)throw log.debug(`parseChangedEntry parse error: ${e}`),new Error("Failed to parse status line for changed entry");return{kind:"entry",statusCode:t[1],submoduleStatusCode:t[2],path:t[8]}}const Bh=/^2 ([MADRCUTX?!.]{2}) (N\.\.\.|S[C.][M.][U.]) (\d+) (\d+) (\d+) ([a-f0-9]+) ([a-f0-9]+) ([RC]\d+) ([\s\S]*?)$/;function Fh(e,t){const n=Bh.exec(e);if(!n)throw log.debug(`parsedRenamedOrCopiedEntry parse error: ${e}`),new Error("Failed to parse status line for renamed or copied entry");if(!t)throw new Error("Failed to parse renamed or copied entry, could not parse old path");return{kind:"entry",statusCode:n[1],submoduleStatusCode:n[2],oldPath:t,path:n[9]}}const Lh=/^u ([DAU]{2}) (N\.\.\.|S[C.][M.][U.]) (\d+) (\d+) (\d+) (\d+) ([a-f0-9]+) ([a-f0-9]+) ([a-f0-9]+) ([\s\S]*?)$/;function Hh(e){const t=Lh.exec(e);if(!t)throw log.debug(`parseUnmergedEntry parse error: ${e}`),new Error("Failed to parse status line for unmerged entry");return{kind:"entry",statusCode:t[1],submoduleStatusCode:t[2],path:t[10]}}function Uh(e){return{kind:"entry",statusCode:"??",submoduleStatusCode:"????",path:e.substring(2)}}var Wh;!function(e){e[e.Success=0]="Success",e[e.AlreadyUpToDate=1]="AlreadyUpToDate",e[e.Failed=2]="Failed"}(Wh||(Wh={}));const $h="Already up to date.\n";async function zh(e,t,n){const r=await qw(["merge-base",t,n],e.path,"merge-base",{successExitCodes:new Set([0,1,128])});return 1===r.exitCode||128===r.exitCode?null:r.stdout.trim()}async function qh(e,t,n,r){return async function(e,t,n,r){const i=["show",`${t}:${n}`],o=await qw(i,e.path,"getPartialBlobContentsCatchPathNotInRef",{maxBuffer:r,expectedErrors:new Set([Ua.ko.PathExistsButNotInRef])});return o.gitError===Ua.ko.PathExistsButNotInRef?null:Buffer.from(o.combinedOutput)}(e,t,n,r)}function jh(e){return e.location+e.length}function Gh(e,t,n,r,i){const o=Math.min(t.length,r.length),s=i?jh(t)-1:t.location,a=i?jh(r)-1:r.location,l=i?-1:1;let c=0;for(;Math.abs(c)<o&&e[s+c]===n[a+c];)c+=l;return Math.abs(c)}var Vh,Kh,Yh=n(4045);function Xh(e,t){const n=e.find((e=>t>=e.unifiedDiffStart&&t<=e.unifiedDiffEnd));return n||null}function Qh(e,t){const n=function(e,t){const n=Xh(e,t);if(!n)return null;const r=n.lines[t-n.unifiedDiffStart];return r?{hunk:n,line:r}:null}(e,t);return null===n?null:n.line}function Zh(e,t){const n=function(e,t){const n=Xh(e,t);if(!n)return null;const r=t-n.unifiedDiffStart;let i=ep(null,n.lines[r]),o=null;for(let e=r-1;e>=0;e--){const t=n.lines[e];if(!t.isIncludeableLine()){const t=e+1;o=n.unifiedDiffStart+t;break}i=ep(i,t)}const s=null!==o?o:n.unifiedDiffStart+1;let a=null;for(let e=r+1;e<n.lines.length;e++){const t=n.lines[e];if(!t.isIncludeableLine()){const t=e-1;a=n.unifiedDiffStart+t;break}i=ep(i,t)}return{from:s,to:null!==a?a:n.unifiedDiffEnd,type:i}}(e,t);if(null===n)return null;const r=Jh(e,n.from),i=Jh(e,n.to);return null===r||null===i?null:{...n,from:r,to:i}}function Jh(e,t){const n=Qh(e,t);return null===n?null:n.originalLineNumber}function ep(e,t){return t.type!==xo.Add&&t.type!==xo.Delete?e:null===e?t.type===xo.Add?Vh.Additions:Vh.Deletions:e===Vh.Mixed?e:t.type===xo.Add&&e!==Vh.Additions||t.type===xo.Delete&&e!==Vh.Deletions?Vh.Mixed:e}!function(e){e[e.Additions=0]="Additions",e[e.Deletions=1]="Deletions",e[e.Mixed=2]="Mixed"}(Vh||(Vh={})),n(6406),function(e){e.Add="diff-add",e.Delete="diff-delete",e.Hunk="diff-hunk",e.Context="diff-context"}(Kh||(Kh={}));const tp={"+":Kh.Add,"-":Kh.Delete,"@":Kh.Hunk," ":Kh.Context};function np(e,t){return e.skipToEnd(),t.diffLineIndex++,null}function rp(e,t=[]){const n=t.map((e=>`line-background-${e}`)).join(" ");return`line-${e} line-background-${e} ${n}`}function ip(e,t){return void 0!==t&&null!==e&&void 0!==t[e-1]?t[e-1]:null}class op{static ModeName="github-diff-syntax";hunks;oldTokens;newTokens;constructor(e,t,n){this.hunks=e,this.oldTokens=t,this.newTokens=n}startState(){return{diffLineIndex:0,previousHunkOldEndLine:null,prevLineToken:void 0}}blankLine(e){return void 0===this.hunks||this.hunks.length>0&&Qh(this.hunks,e.diffLineIndex)?.type===xo.Hunk?rp(Kh.Hunk):void e.diffLineIndex++}token=(e,t)=>{if(e.sol()){const n=e.next();if(e.eol()&&t.diffLineIndex++,null===n)return null;const r=tp[n];if(void 0===r)return null;const i=e.lookAhead(1),o="string"==typeof i?tp[i[0]]:void 0,s=function(e,t,n){if(![Kh.Add,Kh.Delete].includes(e))return[];const r=[];return t!==e&&r.push("is-first"),n!==e&&r.push("is-last"),r}(r,t.prevLineToken,o);t.prevLineToken=r;let a=rp(r,s);if(r===Kh.Hunk){const n=e.match(/\@ -(\d+),(\d+) \+\d+,\d+ \@\@/);if(null!==n){const e=parseInt(n[1]),i=parseInt(n[2]);null!==t.previousHunkOldEndLine&&e-t.previousHunkOldEndLine>dp&&(a+=` line-${r}-expandable-both`),t.previousHunkOldEndLine=e+i}e.eol()&&t.diffLineIndex++}return a}if(null==this.hunks)return np(e,t);const n=Qh(this.hunks,t.diffLineIndex);if(!n)return np(e,t);const r=function(e,t,n){const r=ip(e.oldLineNumber,t);return null!==r?r:ip(e.newLineNumber,n)}(n,this.oldTokens,this.newTokens);if(!r)return np(e,t);const i=r[e.pos-e.lineStart-1];if(i)e.pos+=i.length;else do{e.pos++}while(!e.eol()&&!r[e.pos-e.lineStart-1]);return e.eol()&&t.diffLineIndex++,i?i.token:null}}var sp,ap;function lp(e,t){const n=function(e,t){let n={location:0,length:t.length},r={location:0,length:e.length};const i=Gh(t,n,e,r,!1);n={location:n.location+i,length:n.length-i},r={location:r.location+i,length:r.length-i};const o=Gh(t,n,e,r,!0);return n.length-=o,r.length-=o,{stringARange:r,stringBRange:n}}(e,t);return{before:{[n.stringARange.location]:{token:"diff-delete-inner",length:n.stringARange.length}},after:{[n.stringBRange.location]:{token:"diff-add-inner",length:n.stringBRange.length}}}}function cp(e){return e instanceof qo}function up(e){if(0===e.length)return 0;for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=n.lines.length-1;e>=0;e--){const t=n.lines[e];if(t.type===xo.Hunk)continue;const r=t.newLineNumber??0,i=t.oldLineNumber??0;return r>i?r:i}}return 0}Yh.defineMode(op.ModeName,(function(e,t){if(!t)throw new Error("I needs me some options");return new op(t.hunks,t.oldTokens,t.newTokens)})),function(e){e.Context="Context",e.Hunk="Hunk",e.Added="Added",e.Deleted="Deleted",e.Modified="Modified"}(sp||(sp={})),function(e){e.Before="before",e.After="after"}(ap||(ap={}));function hp(e,t,n,r){const i=new Array,o=[r,sp.Modified];return o.includes(e.type)?(void 0!==t&&o.includes(t.type)||i.push("is-first"),void 0!==n&&o.includes(n.type)||i.push("is-last"),i):[]}function pp(e,t){return e===t||e.text===t.text&&e.kind===t.kind&&e.hasHiddenBidiChars===t.hasHiddenBidiChars&&e.lineEndingsChange===t.lineEndingsChange&&e.hunks.length===t.hunks.length&&(0===e.hunks.length||e.hunks[e.hunks.length-1].equals(t.hunks[t.hunks.length-1]))}const dp=20;function mp(e){return e.reduce(((e,t)=>e.concat(t.lines)),[]).map((e=>e.text)).join("\n")}function fp(e,t){const n=e.lines.slice(1),r=t.lines.slice(1),i=new Ho(e.header.oldStartLine,e.header.oldLineCount+t.header.oldLineCount,e.header.newStartLine,e.header.newLineCount+t.header.newLineCount),o=[new Oo(i.toDiffLineRepresentation(),xo.Hunk,null,null,null,!1),...n,...r];return new Lo(i,o,e.unifiedDiffStart,e.unifiedDiffStart+o.length-1,e.expansionType)}function gp(e,t,n){const r=null===n?1/0:t.oldStartLine-n.header.oldStartLine-n.header.oldLineCount;return 0===e?t.oldStartLine>1&&t.newStartLine>1?Do.Up:Do.None:r<=dp?Do.Short:Do.Both}function yp(e,t,n,r,i=dp){const o=e.hunks.indexOf(t);if(-1===o)return;const s="up"===n,a=s&&o>0?o-1:!s&&o<e.hunks.length-1?o+1:null,l=null!==a?e.hunks[a]:null,c=null!==l&&!1===s&&1===l.lines.length&&l.lines[0].type===xo.Hunk&&a===e.hunks.length-1,u=t.header.newStartLine,h=t.header.oldStartLine;let[p,d]=s?[u-i,u]:[u+t.header.newLineCount,u+t.header.newLineCount+i],m=!1;if(null!==l)if(s){const e=l.header.newStartLine+l.header.newLineCount;p=Math.max(p,e),m=p===e}else if(!1===c){const e=l.header.newStartLine;d=Math.min(d,e),m=d===e}const f=r.slice(Math.max(p-1,0),Math.min(d-1,r.length)),g=f.length;if(0===g)return;const y=f.map(((e,n)=>{const r=s?u-(g-n):u+t.header.newLineCount+n,i=s?h-(g-n):h+t.header.oldLineCount+n;return new Oo(" "+e,xo.Context,null,i,r,!1)})),b=e.hasHiddenBidiChars||f.some((e=>wp.test(e))),w=new Ho(s?t.header.oldStartLine-g:t.header.oldStartLine,t.header.oldLineCount+g,s?t.header.newStartLine-g:t.header.newStartLine,t.header.newLineCount+g),v=t.lines[0],C=new Oo(w.toDiffLineRepresentation(),xo.Hunk,null,v.oldLineNumber,v.newLineNumber,v.noTrailingNewLine),S=t.lines.slice(1),E=s?[C,...y,...S]:[C,...S,...y];let k=E.length-t.lines.length;const R=gp(o,w,0===o?null:e.hunks[o-1]);let x=new Lo(w,E,t.unifiedDiffStart,t.unifiedDiffEnd+k,R),T=0,D=0;m&&null!==l?(s?(x=fp(l,x),T=o-1,D=o+1):(T=o,D=o+2,x=fp(x,l)),k-=1):(T=o,D=o+1);const A=e.hunks.slice(0,T),P=w.newStartLine+w.newLineCount-1>=r.length?[]:e.hunks.slice(D).map(((t,n)=>{const r=n+D===e.hunks.length-1&&1===t.lines.length&&t.lines[0].type===xo.Hunk,i=0===n&&!r;return new Lo(t.header,t.lines,t.unifiedDiffStart+k,t.unifiedDiffEnd+k,i?gp(D,t.header,x):t.expansionType)})),I=[...A,x,...P],_=mp(I);return{...e,text:_,hunks:I,maxLineNumber:up(I),hasHiddenBidiChars:b}}const bp=/^@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/,wp=/[\u202A-\u202E]|[\u2066-\u2069]/,vp=new Set(["+","-"," ","\\"]);class Cp{ls;le;text;constructor(){this.reset()}reset(){this.ls=0,this.le=-1,this.text=""}nextLine(){return this.ls=this.le+1,!(this.ls>=this.text.length)&&(this.le=this.text.indexOf("\n",this.ls),-1===this.le&&(this.le=this.text.length),this.ls!==this.le)}readLine(){return this.nextLine()?this.text.substring(this.ls,this.le):null}lineStartsWith(e){return this.text.startsWith(e,this.ls)}lineEndsWith(e){return this.text.endsWith(e,this.le)}peek(){const e=this.le+1;return e<this.text.length?this.text[e]:null}parseDiffHeader(){for(;this.nextLine();){if(this.lineStartsWith("Binary files ")&&this.lineEndsWith("differ"))return{isBinary:!0};if(this.lineStartsWith("+++"))return{isBinary:!1}}return null}numberFromGroup(e,t,n=null){const r=e[t];if(!r){if(!n)throw new Error(`Group ${t} missing from regexp match and no defaultValue was provided`);return n}const i=parseInt(r,10);if(isNaN(i))throw new Error(`Could not parse capture group ${t} into number: ${r}`);return i}parseHunkHeader(e){const t=bp.exec(e);if(!t)throw new Error("Invalid hunk header format");const n=this.numberFromGroup(t,1),r=this.numberFromGroup(t,2,1),i=this.numberFromGroup(t,3),o=this.numberFromGroup(t,4,1);return new Ho(n,r,i,o)}parseLinePrefix(e){return e&&e.length&&vp.has(e[0])?e[0]:null}parseHunk(e,t,n){const r=this.readLine();if(!r)throw new Error("Expected hunk header but reached end of diff");const i=this.parseHunkHeader(r),o=new Array;let s;o.push(new Oo(r,xo.Hunk,1,null,null));let a=i.oldStartLine,l=i.newStartLine,c=e;for(;s=this.parseLinePrefix(this.peek());){const e=this.readLine();if(c++,!e)throw new Error("Expected unified diff line but reached end of diff");if("\\"===s){if(e.length<12)throw new Error('Expected "no newline at end of file" marker to be at least 12 bytes long');const t=o.length-1,n=o[t];o[t]=n.withNoTrailingNewLine(!0);continue}let t;if("+"===s)t=new Oo(e,xo.Add,c,null,l++);else if("-"===s)t=new Oo(e,xo.Delete,c,a++,null);else{if(" "!==s)return et(0,`Unknown DiffLinePrefix: ${s}`);t=new Oo(e,xo.Context,c,a++,l++)}o.push(t)}if(1===o.length)throw new Error("Malformed diff, empty hunk");return new Lo(i,o,e,e+o.length-1,gp(t,i,n))}parse(e){this.text=e;try{const t=this.parseDiffHeader(),n=this.le,r=this.text.substring(0,n);if(!t)return{header:r,contents:"",hunks:[],isBinary:!1,maxLineNumber:0,hasHiddenBidiChars:!1};if(t.isBinary)return{header:r,contents:"",hunks:[],isBinary:!0,maxLineNumber:0,hasHiddenBidiChars:!1};const i=new Array;let o=0,s=null;do{const e=this.parseHunk(o,i.length,s);i.push(e),s=e,o+=e.lines.length}while(this.peek());return{header:r,contents:this.text.substring(n+1,this.le).replace(/\n\\ No newline at end of file/g,""),hunks:i,isBinary:t.isBinary,maxLineNumber:up(i),hasHiddenBidiChars:wp.test(e)}}finally{this.reset()}}}function Sp(e){return e.status.kind===Io.Renamed||e.status.kind===Io.Copied?e.status.oldPath:e.path}var Ep;function kp(e){const t=function(e){switch(e[0]){case"A":return Ep.Added;case"C":return Ep.Copied;case"D":return Ep.Deleted;case"M":return Ep.Modified;case"R":return Ep.Renamed;case"T":return Ep.TypeChanged;case"U":return Ep.Unmerged;case"X":return Ep.Unknown;default:throw new Error(`Unknown index status: ${e}`)}}(e);switch(t){case Ep.Copied:case Ep.Renamed:throw new Error(`Invalid index status for no-rename index status: ${t}`)}return t}!function(e){e[e.Unknown=0]="Unknown",e[e.Added=1]="Added",e[e.Copied=2]="Copied",e[e.Deleted=3]="Deleted",e[e.Modified=4]="Modified",e[e.Renamed=5]="Renamed",e[e.TypeChanged=6]="TypeChanged",e[e.Unmerged=7]="Unmerged"}(Ep||(Ep={}));const Rp="4b825dc642cb6eb9a060e54bf8d69288fbee4904",xp=new Set([".png",".jpg",".jpeg",".gif",".ico",".webp",".bmp",".avif"]);async function Tp(e,t,n,r=!1){const i=["log",n,...r?["-w"]:[],"-m","-1","--first-parent","--patch-with-raw","-z","--no-color","--",t.path];t.status.kind!==Io.Renamed&&t.status.kind!==Io.Copied||i.push(t.status.oldPath);const{output:o}=await Ah(i,e.path,"getCommitDiff");return Np(o,e,t,n)}async function Dp(e,t,n,r=!1,i=!1){if(0===n.length)throw new Error("No commits to diff...");const o=i?Rp:`${n[0]}^`,s=n.at(-1)??"",a=["diff",o,s,...r?["-w"]:[],"--patch-with-raw","-z","--no-color","--",t.path];t.status.kind!==Io.Renamed&&t.status.kind!==Io.Copied||a.push(t.status.oldPath);const l=await qw(a,e.path,"getCommitsDiff",{maxBuffer:1/0,expectedErrors:new Set([Ua.ko.BadRevision])});return l.gitError===Ua.ko.BadRevision&&!1===i?Dp(e,t,n,r,!0):Np(Buffer.from(l.stdout),e,t,s)}async function Ap(e,t,n=!1){if(0===t.length)throw new Error("No commits to diff...");const r=n?Rp:`${t[0]}^`,i=t.at(-1)??"",o=["diff",r,i,"-C","-M","-z","--raw","--numstat","--"],{stdout:s,gitError:a}=await qw(o,e.path,"getCommitRangeChangedFiles",{expectedErrors:new Set([Ua.ko.BadRevision])});return a===Ua.ko.BadRevision&&!1===n?Ap(e,t,!0):jc(s,i,r)}async function Pp(e,t,n=!1){const r=["diff",...n?["-w"]:[],"--no-ext-diff","--patch-with-raw","-z","--no-color"],i=new Set([0]);void 0!==t.status.submoduleStatus||t.status.kind!==Io.New&&t.status.kind!==Io.Untracked?t.status.kind===Io.Renamed?r.push("--",t.path):r.push("HEAD","--",t.path):(i.add(1),r.push("--no-index","--","/dev/null",t.path));const{output:o,error:s}=await Ah(r,e.path,"getWorkingDirectoryDiff",i),a=function(e){if(0===e.length)return;const t=e.toString("utf-8"),n=_p.exec(t);if(n){const e=No(n[1]),t=No(n[2]);if(e&&t)return{from:e,to:t}}}(s);return Np(o,e,t,"HEAD",a)}function Ip(e){return".png"===e?"image/png":".jpg"===e||".jpeg"===e?"image/jpg":".gif"===e?"image/gif":".ico"===e?"image/x-icon":".webp"===e?"image/webp":".bmp"===e?"image/bmp":".avif"===e?"image/avif":"text/plain"}const _p=/', (CRLF|CR|LF) will be replaced by (CRLF|CR|LF) the .*/;async function Np(t,n,r,i,o){if(void 0!==r.status.submoduleStatus)return async function(t,n,r,i){const o=r.path,s=e.join(n.path,o),a=await il(n,`submodule.${o}.url`,!0);let l=null,c=null;if(i.commitChanged||r.status.kind===Io.New||r.status.kind===Io.Deleted){const e=t.toString("utf-8").split("\n"),n="Subproject commit ([^-]+)(-dirty)?$",r=new RegExp("-"+n),i=new RegExp("\\+"+n),o=t=>e.flatMap((e=>{const n=e.match(t);return n?n[1]:[]})).at(0)??null;l=o(r),c=o(i)}return{kind:Ro.Submodule,fullPath:s,path:o,url:a,status:i,oldSHA:l,newSHA:c}}(t,n,r,r.status.submoduleStatus);if(!function(e){return e.length<=7e7}(t))return{kind:Ro.Unrenderable};const s=function(e){const t=e.toString("utf-8").split("\0");return(new Cp).parse(tt("Invalid diff output",t.at(-1)))}(t);return function(e){return e.length>=4375e3}(t)||function(e){for(const t of e.hunks)for(const e of t.lines)if(e.text.length>5e3)return!0;return!1}(s)?{kind:Ro.LargeText,text:s.contents,hunks:s.hunks,lineEndingsChange:o,maxLineNumber:s.maxLineNumber,hasHiddenBidiChars:s.hasHiddenBidiChars}:async function(t,n,r,i,o){const s=e.extname(n.path).toLowerCase();return r.isBinary?xp.has(s)?async function(t,n,r){let i,o;if(n instanceof qo){if(n.status.kind===Io.Conflicted)return{kind:Ro.Image};n.status.kind!==Io.Deleted&&(i=await async function(t,n){const r=await(0,y.readFile)(e.join(t.path,n.path));return new Fo(r.toString("base64"),Ip(e.extname(n.path)),r.length)}(t,n)),n.status.kind!==Io.New&&n.status.kind!==Io.Untracked&&(o=await Op(t,Sp(n),"HEAD"))}else n.status.kind!==Io.Deleted&&(i=await Op(t,n.path,r)),n.status.kind!==Io.New&&n.status.kind!==Io.Untracked&&(o=await Op(t,Sp(n),`${r}^`));return{kind:Ro.Image,previous:o,current:i}}(t,n,i):{kind:Ro.Binary}:{kind:Ro.Text,text:r.contents,hunks:r.hunks,lineEndingsChange:o,maxLineNumber:r.maxLineNumber,hasHiddenBidiChars:r.hasHiddenBidiChars}}(n,r,s,i,o)}async function Op(t,n,r){const i=e.extname(n),o=await async function(e,t,n){const r=["show",`${t}:${n}`],i={successExitCodes:new Set([0,1]),processCallback:e=>{e.stdout&&e.stdout.setEncoding("binary")}},o=await qw(r,e.path,"getBlobContents",i);return Buffer.from(o.stdout,"binary")}(t,r,n);return new Fo(o.toString("base64"),Ip(i),o.length)}async function Mp(e,t){const{output:n}=await Ah(["diff","--numstat","-z",t],e.path,"getBinaryPaths"),r=ja(n.toString("utf8"),Bp);return 0===r.length?[]:r.reduce(((e,t)=>e.concat(t)))}const Bp=/-\t-\t(?:\0.+\0)?([^\0]*)/gi;var Fp,Lp;function Hp(e){return null!=e?[...Yw(),"checkout","--progress"]:[...Yw(),"checkout"]}async function Up(e){const t=[];return e.type===Ja.Remote?t.concat(e.name,"-b",e.nameWithoutRemote,"--recurse-submodules","--"):t.concat(e.name,"--recurse-submodules","--")}async function Wp(e,t,n,r,i,o){const s={env:await uh(t,ch(t,e)),expectedErrors:sh};if(!i)return s;const a="checkout";return i({kind:a,title:n,description:o??n,value:0,target:r}),await nh({...s,trackLFSProgress:!0},new Lu,(e=>{if("progress"===e.kind){const t=e.details.text,o=e.percent;i({kind:a,title:n,description:t,value:o,target:r})}}))}async function $p(e,t,n,r){const i=await Wp(e,t,`Checking out branch ${n.name}`,n.name,r,"切换到 Branch"),o=[...Hp(r),...await Up(n)];return await qw(o,e.path,"checkoutBranch",i),!0}async function zp(e,t,n){const{status:r}=t;if(!Uo(r))return void log.error(`tried to manually resolve unconflicted file (${t.path})`);if(Wo(r)&&0===r.conflictMarkerCount)return;const i=n===Fp.theirs?r.entry.them:r.entry.us,o=r.entry.us===Po.Added&&r.entry.them===Po.Added;switch((i===Po.UpdatedButUnmerged||o)&&await async function(e,t,n){await qw(["checkout",`--${n}`,"--",t.path],e.path,"checkoutConflictedFile")}(e,t,n),i){case Po.Deleted:return async function(e,t){await qw(["rm","--",t.path],e.path,"removeConflictedFile")}(e,t);case Po.Added:case Po.UpdatedButUnmerged:return async function(e,t){await qw(["add","--",t.path],e.path,"addConflictedFile")}(e,t);default:et(0,"unaccounted for git status entry possibility")}}function qp(e,t){return`${e}..${t}`}function jp(e,t){return`${e}...${t}`}async function Gp(e,t){const n=["rev-list","--left-right","--count",t,"--"],r=await qw(n,e.path,"getAheadBehind",{expectedErrors:new Set([Ua.ko.BadRevision])});if(r.gitError===Ua.ko.BadRevision)return null;const i=r.stdout.split("\t");if(2!==i.length)return null;const o=parseInt(i[0],10);if(isNaN(o))return null;const s=parseInt(i[1],10);return isNaN(s)?null:{ahead:o,behind:s}}async function Vp(e,t,n){return Kp(e,qp(t,n))}async function Kp(e,t){const n=["rev-list",t,"--reverse","--oneline","--no-abbrev-commit","--"],r={expectedErrors:new Set([Ua.ko.BadRevision])},i=await qw(n,e.path,"getCommitsInRange",r);if(i.gitError===Ua.ko.BadRevision)return null;const o=i.stdout.split("\n"),s=new Array,a=/^([a-z0-9]{40}) (.*)$/;for(const e of o){const t=a.exec(e);if(null!==t&&3===t.length){const e=t[1],n=t[2];s.push({sha:e,summary:n})}}return s}function Yp(t){const n=e.join(t.path,".git","REBASE_HEAD");return S(n)}async function Xp(t){if(!await Yp(t))return null;let n=null,r=null,i=null;try{n=await(0,y.readFile)(e.join(t.path,".git","rebase-merge","orig-head"),"utf8"),n=n.trim(),r=await(0,y.readFile)(e.join(t.path,".git","rebase-merge","head-name"),"utf8"),r.startsWith("refs/heads/")&&(r=r.substring(11).trim()),i=await(0,y.readFile)(e.join(t.path,".git","rebase-merge","onto"),"utf8"),i=i.trim()}catch{}return null!=n&&null!=r&&null!=i?{originalBranchTip:n,targetBranch:r,baseBranchTip:i}:null}async function Qp(t){if(!await Yp(t))return null;let n=-1,r=-1,i=null,o=null;try{const s=await(0,y.readFile)(e.join(t.path,".git","rebase-merge","msgnum"),"utf8");n=parseInt(s,10),isNaN(n)&&(log.warn(`[getCurrentProgress] found '${s}' in .git/rebase-merge/msgnum which could not be parsed to a valid number`),n=-1);const a=await(0,y.readFile)(e.join(t.path,".git","rebase-merge","end"),"utf8");r=parseInt(a,10),isNaN(r)&&(log.warn(`[getCurrentProgress] found '${a}' in .git/rebase-merge/last which could not be parsed to a valid number`),r=-1),i=await(0,y.readFile)(e.join(t.path,".git","rebase-merge","orig-head"),"utf8"),i=i.trim(),o=await(0,y.readFile)(e.join(t.path,".git","rebase-merge","onto"),"utf8"),o=o.trim()}catch{}if(n>0&&r>0&&null!==i&&null!==o){const e=hc(n/r),s=await Vp(t,o,i);if(null===s||0===s.length)return null;const a=n-1;return{progress:{kind:"multiCommitOperation",value:e,position:n,totalCommitCount:r,currentCommitSummary:s.length>0&&a>=0&&a<s.length?s[a].summary:""},commits:s}}return null}!function(e){e.theirs="theirs",e.ours="ours"}(Fp||(Fp={})),function(e){e.CompletedWithoutError="CompletedWithoutError",e.AlreadyUpToDate="AlreadyUpToDate",e.ConflictsEncountered="ConflictsEncountered",e.OutstandingFilesNotStaged="OutstandingFilesNotStaged",e.Aborted="Aborted",e.Error="Error"}(Lp||(Lp={}));const Zp=/^Rebasing \((\d+)\/(\d+)\)$/;class Jp{commits;constructor(e){this.commits=e}parse(e){const t=Zp.exec(e);if(null===t||3!==t.length)return null;const n=parseInt(t[1],10),r=parseInt(t[2],10);if(isNaN(n)||isNaN(r))return null;const i=this.commits[n-1]?.summary??"";return{kind:"multiCommitOperation",value:hc(n/r),position:n,totalCommitCount:r,currentCommitSummary:i}}}function ed(e,t){if(void 0===t)return e;const{commits:n,progressCallback:r}=t;return sa(e,{processCallback:e=>{if(null===e.stderr)return;const t=new Jp(n);Ku()(e.stderr).on("data",(e=>{const n=t.parse(e);null!=n&&r(n)}))}})}function td(e){if(0===e.exitCode)return e.stdout.trim().match(/^Current branch [^ ]+ is up to date.$/i)?Lp.AlreadyUpToDate:Lp.CompletedWithoutError;if(e.gitError===Ua.ko.RebaseConflicts)return Lp.ConflictsEncountered;if(e.gitError===Ua.ko.UnresolvedConflicts)return Lp.OutstandingFilesNotStaged;throw new Error(`Unhandled result found: '${JSON.stringify(e)}'`)}async function nd(e,t,n,r="Interactive rebase",i=":",o,s){const a={expectedErrors:new Set([Ua.ko.RebaseConflicts]),env:{GIT_EDITOR:i}};let l=a;if(void 0!==o){if(void 0===s)return log.warn("Unable to interactively rebase if no commits"),Lp.Error;l=ed(a,{commits:s,progressCallback:o})}const c=null==n?"--root":n;return td(await qw(["-c",`sequence.editor=cat "${t}" >`,"rebase","-i",c],e.path,r,l))}function rd(e,t,n,r){if("ordinary"===t.kind)switch(t.type){case"added":return{kind:Io.New,submoduleStatus:t.submoduleStatus};case"modified":return{kind:Io.Modified,submoduleStatus:t.submoduleStatus};case"deleted":return{kind:Io.Deleted,submoduleStatus:t.submoduleStatus}}else{if("copied"===t.kind&&null!=r)return{kind:Io.Copied,oldPath:r,submoduleStatus:t.submoduleStatus};if("renamed"===t.kind&&null!=r)return{kind:Io.Renamed,oldPath:r,submoduleStatus:t.submoduleStatus};if("untracked"===t.kind)return{kind:Io.Untracked,submoduleStatus:t.submoduleStatus};if("conflicted"===t.kind)return function(e,t,n){switch(e.action){case _o.BothAdded:case _o.BothModified:return n.binaryFilePaths.includes(t)?{kind:Io.Conflicted,entry:e}:{kind:Io.Conflicted,entry:e,conflictMarkerCount:n.conflictCountsByPath.get(t)||0};default:return{kind:Io.Conflicted,entry:e}}}(t,e,n)}return Je(`Unknown file status ${status}`)}const id=["DD","AU","UD","UA","DU","AA","UU"];async function od(t){const n=await Ah(["--no-optional-locks","status","--untracked-files=all","--branch","--porcelain=2","-z"],t.path,"getStatus",new Set([0,128]));if(128===n.exitCode)return log.debug(`'git status' returned 128 for '${t.path}' and is likely missing its .git directory`),null;if(n.output.length>2e7)return log.error(`'git status' emitted ${n.output.length} bytes, which is beyond the supported threshold of 20000000 bytes`),null;const r=function(e){const t=new Array,n=e.split("\0");for(let e=0;e<n.length;e++){const r=n[e];if(r.startsWith("# ")&&r.length>2){t.push({kind:"header",value:r.substring(2)});continue}const i=r.substring(0,1);"1"===i?t.push(Mh(r)):"2"===i?t.push(Fh(r,n[++e])):"u"===i?t.push(Hh(r)):"?"===i&&t.push(Uh(r))}return t}(n.output.toString("utf8")),i=r.filter(_h),o=r.filter(Nh),s=await async function(t){const n=e.join(t.path,".git","MERGE_HEAD");return await S(n)}(t),a=o.some((e=>id.indexOf(e.statusCode)>-1)),l=await Xp(t),c=await async function(e,t,n,r){try{if(t)return await async function(e){return{conflictCountsByPath:await Ph(e.path),binaryFilePaths:await Mp(e,"MERGE_HEAD")}}(e);if(null!==r)return await async function(e){return{conflictCountsByPath:await Ph(e.path),binaryFilePaths:await Mp(e,"REBASE_HEAD")}}(e);if(n)return await async function(e){const t=await Ph(e.path);let n=[];try{n=await Mp(e,"HEAD")}catch(e){}return{conflictCountsByPath:t,binaryFilePaths:n}}(e)}catch(e){log.error("Unexpected error from git operations in getConflictDetails",e)}return{conflictCountsByPath:new Map,binaryFilePaths:new Array}}(t,s,a,l),u=o.reduce(((e,t)=>function(e,t,n){const r=function(e,t){const n=function(e){if(e.startsWith("S"))return{commitChanged:"C"===e[1],modifiedChanges:"M"===e[2],untrackedChanges:"U"===e[3]}}(t);return"??"===e?{kind:"untracked",submoduleStatus:n}:".M"===e?{kind:"ordinary",type:"modified",index:Po.Unchanged,workingTree:Po.Modified,submoduleStatus:n}:"M."===e?{kind:"ordinary",type:"modified",index:Po.Modified,workingTree:Po.Unchanged,submoduleStatus:n}:".A"===e?{kind:"ordinary",type:"added",index:Po.Unchanged,workingTree:Po.Added,submoduleStatus:n}:"A."===e?{kind:"ordinary",type:"added",index:Po.Added,workingTree:Po.Unchanged,submoduleStatus:n}:".D"===e?{kind:"ordinary",type:"deleted",index:Po.Unchanged,workingTree:Po.Deleted,submoduleStatus:n}:"D."===e?{kind:"ordinary",type:"deleted",index:Po.Deleted,workingTree:Po.Unchanged,submoduleStatus:n}:"R."===e?{kind:"renamed",index:Po.Renamed,workingTree:Po.Unchanged,submoduleStatus:n}:".R"===e?{kind:"renamed",index:Po.Unchanged,workingTree:Po.Renamed,submoduleStatus:n}:"C."===e?{kind:"copied",index:Po.Copied,workingTree:Po.Unchanged,submoduleStatus:n}:".C"===e?{kind:"copied",index:Po.Unchanged,workingTree:Po.Copied,submoduleStatus:n}:"AD"===e?{kind:"ordinary",type:"added",index:Po.Added,workingTree:Po.Deleted,submoduleStatus:n}:"AM"===e?{kind:"ordinary",type:"added",index:Po.Added,workingTree:Po.Modified,submoduleStatus:n}:"RM"===e?{kind:"renamed",index:Po.Renamed,workingTree:Po.Modified,submoduleStatus:n}:"RD"===e?{kind:"renamed",index:Po.Renamed,workingTree:Po.Deleted,submoduleStatus:n}:"DD"===e?{kind:"conflicted",action:_o.BothDeleted,us:Po.Deleted,them:Po.Deleted,submoduleStatus:n}:"AU"===e?{kind:"conflicted",action:_o.AddedByUs,us:Po.Added,them:Po.UpdatedButUnmerged,submoduleStatus:n}:"UD"===e?{kind:"conflicted",action:_o.DeletedByThem,us:Po.UpdatedButUnmerged,them:Po.Deleted,submoduleStatus:n}:"UA"===e?{kind:"conflicted",action:_o.AddedByThem,us:Po.UpdatedButUnmerged,them:Po.Added,submoduleStatus:n}:"DU"===e?{kind:"conflicted",action:_o.DeletedByUs,us:Po.Deleted,them:Po.UpdatedButUnmerged,submoduleStatus:n}:"AA"===e?{kind:"conflicted",action:_o.BothAdded,us:Po.Added,them:Po.Added,submoduleStatus:n}:"UU"===e?{kind:"conflicted",action:_o.BothModified,us:Po.UpdatedButUnmerged,them:Po.UpdatedButUnmerged,submoduleStatus:n}:{kind:"ordinary",type:"modified",submoduleStatus:n}}(t.statusCode,t.submoduleStatusCode);if("ordinary"===r.kind&&r.index===Po.Added&&r.workingTree===Po.Deleted)return e;"untracked"===r.kind&&e.delete(t.path);const i=rd(t.path,r,n,t.oldPath),o=i.kind!==Io.Modified||void 0===i.submoduleStatus||i.submoduleStatus.commitChanged?To.All:To.None,s=Bo.fromInitialSelection(o);return e.set(t.path,new qo(t.path,i,s)),e}(e,t,c)),new Map),{currentBranch:h,currentUpstreamBranch:p,currentTip:d,branchAheadBehind:m}=i.reduce(sd,{currentBranch:void 0,currentUpstreamBranch:void 0,currentTip:void 0,branchAheadBehind:void 0,match:null}),f=Go.fromFiles([...u.values()]),g=await dd(t),y=await async function(t){const n=e.join(t.path,".git","SQUASH_MSG");return await S(n)}(t);return{currentBranch:h,currentTip:d,currentUpstreamBranch:p,branchAheadBehind:m,exists:!0,mergeHeadFound:s,rebaseInternalState:l,workingDirectory:f,isCherryPickingHeadFound:g,squashMsgFound:y,doConflictedFilesExist:a}}function sd(e,t){let{currentBranch:n,currentUpstreamBranch:r,currentTip:i,branchAheadBehind:o,match:s}=e;const a=t.value;if(s=a.match(/^branch\.oid ([a-f0-9]+)$/))i=s[1];else if(s=a.match(/^branch.head (.*)/))"(detached)"!==s[1]&&(n=s[1]);else if(s=a.match(/^branch.upstream (.*)/))r=s[1];else if(s=a.match(/^branch.ab \+(\d+) -(\d+)$/)){const e=parseInt(s[1],10),t=parseInt(s[2],10);isNaN(e)||isNaN(t)||(o={ahead:e,behind:t})}return{currentBranch:n,currentUpstreamBranch:r,currentTip:i,branchAheadBehind:o,match:s}}var ad;!function(e){e.CompletedWithoutError="CompletedWithoutError",e.ConflictsEncountered="ConflictsEncountered",e.OutstandingFilesNotStaged="OutstandingFilesNotStaged",e.UnableToStart="UnableToStart",e.Error="Error"}(ad||(ad={}));class ld{commits;count;constructor(e,t=0){this.commits=e,this.count=t}parse(e){return null===/^\[(.*\s.*)\]/.exec(e)?null:(this.count++,{kind:"multiCommitOperation",value:Qu(this.count/this.commits.length,2),position:this.count,totalCommitCount:this.commits.length,currentCommitSummary:this.commits[this.count-1]?.summary??""})}}function cd(e,t,n,r=0){return sa(e,{processCallback:e=>{if(null===e.stdout)return;const i=new ld(t,r);Ku()(e.stdout).on("data",(e=>{const t=i.parse(e);null!=t&&n(t)}))}})}function ud(e){if(0===e.exitCode)return ad.CompletedWithoutError;switch(e.gitError){case Ua.ko.ConflictModifyDeletedInBranch:case Ua.ko.MergeConflicts:return ad.ConflictsEncountered;case Ua.ko.UnresolvedConflicts:return ad.OutstandingFilesNotStaged;default:throw new Error(`Unhandled result found: '${JSON.stringify(e)}'`)}}async function hd(t){if(!dd(t))return null;let n="",r="";const i=[];try{if(n=(await(0,y.readFile)(e.join(t.path,".git","sequencer","abort-safety"),"utf8")).trim(),""===n)return null;if(r=(await(0,y.readFile)(e.join(t.path,".git","sequencer","head"),"utf8")).trim(),""===r)return null;const o=(await(0,y.readFile)(e.join(t.path,".git","sequencer","todo"),"utf8")).trim();if(""===o)return null;if(o.split("\n").forEach((e=>{if((e=e.replace(/^pick /,"")).trim().includes(" ")){const t=e.substr(0,e.indexOf(" ")),n={sha:t,summary:e.substr(t.length+1)};i.push(n)}})),0===i.length)return null}catch{if(!dd(t))return null;const n=(await(0,y.readFile)(e.join(t.path,".git","CHERRY_PICK_HEAD"),"utf8")).trim(),i=await Gc(t,n);return null===i?null:{progress:{kind:"multiCommitOperation",value:1,position:1,totalCommitCount:1,currentCommitSummary:i.summary},remainingCommits:[],commits:[{sha:i.sha,summary:i.summary}],targetBranchUndoSha:r,cherryPickedCount:0}}const o=n!==r?await Kp(t,qp(r,n)):[];if(null===o)return null;const s=[...o,...i],a=o.length+1;return{progress:{kind:"multiCommitOperation",value:Qu(a/s.length,2),position:a,totalCommitCount:s.length,currentCommitSummary:i[0].summary??""},remainingCommits:i,commits:s,targetBranchUndoSha:r,cherryPickedCount:o.length}}async function pd(e){await qw(["cherry-pick","--abort"],e.path,"abortCherryPick")}async function dd(t){try{const n=e.join(t.path,".git","CHERRY_PICK_HEAD");return S(n)}catch(e){return log.warn("[cherryPick] a problem was encountered reading .git/CHERRY_PICK_HEAD,\n       so it is unsafe to continue cherry-picking",e),!1}}function md(e){return e.kind===Ar.Valid?e.branch.tip.sha:e.kind===Ar.Detached?e.currentSha:"(unknown)"}const fd="useWindowsOpenSSH",gd=mr((async()=>!1));function yd(e){return"Rebase"===e||"Cherry-pick"===e||"Squash"===e||"Merge"===e||"Reorder"===e}const bd=["ShowConflicts","ConfirmAbort"];function wd(e,t){const{defaultBranch:n,allBranches:r,recentBranches:i,tip:o}=e.branchesState;let s=null;if(o.kind!==Ar.Valid)throw new Error("Tip is not in a valid state, which is required to start the multi commit operation");return s=o.branch,{kind:"ChooseBranch",defaultBranch:n,currentBranch:s,allBranches:r,recentBranches:i,initialBranch:null!==t?t:void 0}}const vd=/^(merged|added in remote|removed in remote|changed in both|removed in local|added in both)$/,Cd=/^\+[<>=]{7}$/;async function Sd(e,t,n){const r=await zh(e,t.tip.sha,n.tip.sha);if(null===r)return{kind:Cu.Invalid};if(r===t.tip.sha||r===n.tip.sha)return{kind:Cu.Clean};const i=await Dh(["merge-tree",r,t.tip.sha,n.tip.sha],e.path,"mergeTree");return await new Promise(((e,t)=>{const n=null!==i.stdout?(r=i.stdout,new Promise((e=>{let t=!1,n=0;r.pipe(Ku()()).on("data",(e=>{vd.test(e)?t&&(n++,t=!1):Cd.test(e)&&(t=!0)})).on("end",(()=>{t&&n++,e(n>0?{kind:Cu.Conflicts,conflictedFiles:n}:{kind:Cu.Clean})}))}))):Promise.reject(new Error("Failed reading merge-tree output"));var r;i.on("error",(e=>t($a(e)?new Error(`merge-tree failed: ${e.code}`):e))),i.on("exit",(r=>{0!==r?t(new Error(`merge-tree exited with code '${r}'`)):n.then(e,t)}))}))}class Ed{popupLimit;popupStack=[];constructor(e=50){this.popupLimit=e}get currentPopup(){return this.popupStack.at(-1)??null}get allPopups(){return this.popupStack}get isAPopupOpen(){return null!==this.currentPopup}getPopupsOfType(e){return this.popupStack.filter((t=>t.type===e))}areTherePopupsOfType(e){return this.popupStack.some((t=>t.type===e))}addPopup(e){if(e.type===nl.Error)return this.addErrorPopup(e.error);const t=this.getPopupsOfType(e.type),n={id:dn(),...e};return t.length>0?(log.warn(`Attempted to add a popup of already existing type - ${e.type}.`),e):(this.insertBeforeErrorPopups(n),this.checkStackLength(),n)}insertBeforeErrorPopups(e){if(this.popupStack.at(-1)?.type!==nl.Error)return void(this.popupStack=this.popupStack.concat(e));const t=this.getPopupsOfType(nl.Error),n=this.popupStack.filter((e=>e.type!==nl.Error));this.popupStack=[...n,e,...t]}addErrorPopup(e){const t={id:dn(),type:nl.Error,error:e};return this.popupStack=this.popupStack.concat(t),this.checkStackLength(),t}checkStackLength(){if(this.popupStack.length>this.popupLimit){const e=this.popupStack[0],t=e.type===nl.Error?`: ${e.error.message}`:null,n=this.currentPopup?.type===nl.Error?`Just added another Error: ${this.currentPopup.error.message}.`:null;iC("TooManyPopups",new Error(`Max number of ${this.popupLimit} popups reached while adding popup of type ${this.currentPopup?.type}.\n          Removing last popup from the stack. Type ${e.type}${t}.\n          ${n}`)),this.popupStack=this.popupStack.slice(1)}}updatePopup(e){if(void 0===e.id)return void log.warn("Attempted to update a popup without an id.");const t=this.popupStack.findIndex((t=>t.id===e.id));t<0?log.warn("Attempted to update a popup not in the stack."):this.popupStack=[...this.popupStack.slice(0,t),e,...this.popupStack.slice(t+1)]}removePopup(e){void 0!==e.id?this.popupStack=this.popupStack.filter((t=>t.id!==e.id)):log.warn("Attempted to remove a popup without an id.")}removePopupByType(e){this.popupStack=this.popupStack.filter((t=>t.type!==e))}removePopupById(e){this.popupStack=this.popupStack.filter((t=>t.id!==e))}}var kd;!function(e){e.Increase="Increase",e.Decrease="Decrease"}(kd||(kd={}));class Rd extends be.Component{resizeContainer=null;startWidth=null;startX=null;getCurrentWidth(){return this.clampWidth(this.props.width)}clampWidth(e){const{minimumWidth:t,maximumWidth:n}=this.props;return lc(e,t??200,n??350)}handleDragStart=e=>{this.startX=e.clientX,this.startWidth=this.getCurrentWidth(),document.addEventListener("mousemove",this.handleDragMove),document.addEventListener("mouseup",this.handleDragStop),e.preventDefault()};handleDragMove=e=>{if(null===this.startWidth||null===this.startX)return;const t=e.clientX-this.startX,n=this.startWidth+t;this.props.onResize(this.clampWidth(n)),e.preventDefault()};unsubscribeFromGlobalEvents(){document.removeEventListener("mousemove",this.handleDragMove),document.removeEventListener("mouseup",this.handleDragStop)}handleDragStop=e=>{this.unsubscribeFromGlobalEvents(),e.preventDefault()};handleMenuResizeEventIncrease=e=>{this.handleMenuResizeEvent(kd.Increase),e?.preventDefault()};handleMenuResizeEventDecrease=e=>{this.handleMenuResizeEvent(kd.Decrease),e?.preventDefault()};handleMenuResizeEvent(e){const{width:t}=this.props,n=e===kd.Decrease?t-5:t+5,r=this.clampWidth(n);this.props.onResize(this.clampWidth(r))}onResizableRef=e=>{null===e?(this.resizeContainer?.removeEventListener("increase-active-resizable-width",this.handleMenuResizeEventIncrease),this.resizeContainer?.removeEventListener("decrease-active-resizable-width",this.handleMenuResizeEventDecrease)):(e.addEventListener("increase-active-resizable-width",this.handleMenuResizeEventIncrease),e.addEventListener("decrease-active-resizable-width",this.handleMenuResizeEventDecrease)),this.resizeContainer=e};render(){const e={width:this.getCurrentWidth(),maxWidth:this.props.maximumWidth,minWidth:this.props.minimumWidth};return be.createElement("div",{id:this.props.id,className:"resizable-component",style:e,ref:this.onResizableRef},this.props.children,be.createElement("div",{onMouseDown:this.handleDragStart,onDoubleClick:this.props.onReset,className:"resize-handle"}))}}class xd{static FOLD_CASE=1;static LITERAL=2;static CLASS_NL=4;static DOT_NL=8;static ONE_LINE=16;static NON_GREEDY=32;static PERL_X=64;static UNICODE_GROUPS=128;static WAS_DOLLAR=256;static MATCH_NL=xd.CLASS_NL|xd.DOT_NL;static PERL=xd.CLASS_NL|xd.ONE_LINE|xd.PERL_X|xd.UNICODE_GROUPS;static POSIX=0;static UNANCHORED=0;static ANCHOR_START=1;static ANCHOR_BOTH=2}class Td{static CODES=new Map([["",7],["\b",8],["\t",9],["\n",10],["\v",11],["\f",12],["\r",13],[" ",32],['"',34],["$",36],["&",38],["(",40],[")",41],["*",42],["+",43],["-",45],[".",46],["0",48],["1",49],["2",50],["3",51],["4",52],["5",53],["6",54],["7",55],["8",56],["9",57],[":",58],["<",60],[">",62],["?",63],["A",65],["B",66],["C",67],["F",70],["P",80],["Q",81],["U",85],["Z",90],["[",91],["\\",92],["]",93],["^",94],["_",95],["a",97],["b",98],["f",102],["i",105],["m",109],["n",110],["r",114],["s",115],["t",116],["v",118],["x",120],["z",122],["{",123],["|",124],["}",125]]);static toUpperCase(e){const t=String.fromCodePoint(e).toUpperCase();if(t.length>1)return e;const n=String.fromCodePoint(t.codePointAt(0)).toLowerCase();return n.length>1||n.codePointAt(0)!==e?e:t.codePointAt(0)}static toLowerCase(e){const t=String.fromCodePoint(e).toLowerCase();if(t.length>1)return e;const n=String.fromCodePoint(t.codePointAt(0)).toUpperCase();return n.length>1||n.codePointAt(0)!==e?e:t.codePointAt(0)}}class Dd{static CASE_ORBIT=new Map([[75,107],[107,8490],[8490,75],[83,115],[115,383],[383,83],[181,924],[924,956],[956,181],[197,229],[229,8491],[8491,197],[452,453],[453,454],[454,452],[455,456],[456,457],[457,455],[458,459],[459,460],[460,458],[497,498],[498,499],[499,497],[837,921],[921,953],[953,8126],[8126,837],[914,946],[946,976],[976,914],[917,949],[949,1013],[1013,917],[920,952],[952,977],[977,1012],[1012,920],[922,954],[954,1008],[1008,922],[928,960],[960,982],[982,928],[929,961],[961,1009],[1009,929],[931,962],[962,963],[963,931],[934,966],[966,981],[981,934],[937,969],[969,8486],[8486,937],[1042,1074],[1074,7296],[7296,1042],[1044,1076],[1076,7297],[7297,1044],[1054,1086],[1086,7298],[7298,1054],[1057,1089],[1089,7299],[7299,1057],[1058,1090],[1090,7300],[7300,7301],[7301,1058],[1066,1098],[1098,7302],[7302,1066],[1122,1123],[1123,7303],[7303,1122],[7304,42570],[42570,42571],[42571,7304],[7776,7777],[7777,7835],[7835,7776],[223,7838],[7838,223],[8064,8072],[8072,8064],[8065,8073],[8073,8065],[8066,8074],[8074,8066],[8067,8075],[8075,8067],[8068,8076],[8076,8068],[8069,8077],[8077,8069],[8070,8078],[8078,8070],[8071,8079],[8079,8071],[8080,8088],[8088,8080],[8081,8089],[8089,8081],[8082,8090],[8090,8082],[8083,8091],[8091,8083],[8084,8092],[8092,8084],[8085,8093],[8093,8085],[8086,8094],[8094,8086],[8087,8095],[8095,8087],[8096,8104],[8104,8096],[8097,8105],[8105,8097],[8098,8106],[8106,8098],[8099,8107],[8107,8099],[8100,8108],[8108,8100],[8101,8109],[8109,8101],[8102,8110],[8110,8102],[8103,8111],[8111,8103],[8115,8124],[8124,8115],[8131,8140],[8140,8131],[8179,8188],[8188,8179],[66560,66600],[66600,66560],[66561,66601],[66601,66561],[66562,66602],[66602,66562],[66563,66603],[66603,66563],[66564,66604],[66604,66564],[66565,66605],[66605,66565],[66566,66606],[66606,66566],[66567,66607],[66607,66567],[66568,66608],[66608,66568],[66569,66609],[66609,66569],[66570,66610],[66610,66570],[66571,66611],[66611,66571],[66572,66612],[66612,66572],[66573,66613],[66613,66573],[66574,66614],[66614,66574],[66575,66615],[66615,66575],[66576,66616],[66616,66576],[66577,66617],[66617,66577],[66578,66618],[66618,66578],[66579,66619],[66619,66579],[66580,66620],[66620,66580],[66581,66621],[66621,66581],[66582,66622],[66622,66582],[66583,66623],[66623,66583],[66584,66624],[66624,66584],[66585,66625],[66625,66585],[66586,66626],[66626,66586],[66587,66627],[66627,66587],[66588,66628],[66628,66588],[66589,66629],[66629,66589],[66590,66630],[66630,66590],[66591,66631],[66631,66591],[66592,66632],[66632,66592],[66593,66633],[66633,66593],[66594,66634],[66634,66594],[66595,66635],[66635,66595],[66596,66636],[66636,66596],[66597,66637],[66637,66597],[66598,66638],[66638,66598],[66599,66639],[66639,66599],[66736,66776],[66776,66736],[66737,66777],[66777,66737],[66738,66778],[66778,66738],[66739,66779],[66779,66739],[66740,66780],[66780,66740],[66741,66781],[66781,66741],[66742,66782],[66782,66742],[66743,66783],[66783,66743],[66744,66784],[66784,66744],[66745,66785],[66785,66745],[66746,66786],[66786,66746],[66747,66787],[66787,66747],[66748,66788],[66788,66748],[66749,66789],[66789,66749],[66750,66790],[66790,66750],[66751,66791],[66791,66751],[66752,66792],[66792,66752],[66753,66793],[66793,66753],[66754,66794],[66794,66754],[66755,66795],[66795,66755],[66756,66796],[66796,66756],[66757,66797],[66797,66757],[66758,66798],[66798,66758],[66759,66799],[66799,66759],[66760,66800],[66800,66760],[66761,66801],[66801,66761],[66762,66802],[66802,66762],[66763,66803],[66803,66763],[66764,66804],[66804,66764],[66765,66805],[66805,66765],[66766,66806],[66806,66766],[66767,66807],[66807,66767],[66768,66808],[66808,66768],[66769,66809],[66809,66769],[66770,66810],[66810,66770],[66771,66811],[66811,66771],[66928,66967],[66967,66928],[66929,66968],[66968,66929],[66930,66969],[66969,66930],[66931,66970],[66970,66931],[66932,66971],[66971,66932],[66933,66972],[66972,66933],[66934,66973],[66973,66934],[66935,66974],[66974,66935],[66936,66975],[66975,66936],[66937,66976],[66976,66937],[66938,66977],[66977,66938],[66940,66979],[66979,66940],[66941,66980],[66980,66941],[66942,66981],[66981,66942],[66943,66982],[66982,66943],[66944,66983],[66983,66944],[66945,66984],[66984,66945],[66946,66985],[66985,66946],[66947,66986],[66986,66947],[66948,66987],[66987,66948],[66949,66988],[66988,66949],[66950,66989],[66989,66950],[66951,66990],[66990,66951],[66952,66991],[66991,66952],[66953,66992],[66992,66953],[66954,66993],[66993,66954],[66956,66995],[66995,66956],[66957,66996],[66996,66957],[66958,66997],[66997,66958],[66959,66998],[66998,66959],[66960,66999],[66999,66960],[66961,67e3],[67e3,66961],[66962,67001],[67001,66962],[66964,67003],[67003,66964],[66965,67004],[67004,66965],[68736,68800],[68800,68736],[68737,68801],[68801,68737],[68738,68802],[68802,68738],[68739,68803],[68803,68739],[68740,68804],[68804,68740],[68741,68805],[68805,68741],[68742,68806],[68806,68742],[68743,68807],[68807,68743],[68744,68808],[68808,68744],[68745,68809],[68809,68745],[68746,68810],[68810,68746],[68747,68811],[68811,68747],[68748,68812],[68812,68748],[68749,68813],[68813,68749],[68750,68814],[68814,68750],[68751,68815],[68815,68751],[68752,68816],[68816,68752],[68753,68817],[68817,68753],[68754,68818],[68818,68754],[68755,68819],[68819,68755],[68756,68820],[68820,68756],[68757,68821],[68821,68757],[68758,68822],[68822,68758],[68759,68823],[68823,68759],[68760,68824],[68824,68760],[68761,68825],[68825,68761],[68762,68826],[68826,68762],[68763,68827],[68827,68763],[68764,68828],[68828,68764],[68765,68829],[68829,68765],[68766,68830],[68830,68766],[68767,68831],[68831,68767],[68768,68832],[68832,68768],[68769,68833],[68833,68769],[68770,68834],[68834,68770],[68771,68835],[68835,68771],[68772,68836],[68836,68772],[68773,68837],[68837,68773],[68774,68838],[68838,68774],[68775,68839],[68839,68775],[68776,68840],[68840,68776],[68777,68841],[68841,68777],[68778,68842],[68842,68778],[68779,68843],[68843,68779],[68780,68844],[68844,68780],[68781,68845],[68845,68781],[68782,68846],[68846,68782],[68783,68847],[68847,68783],[68784,68848],[68848,68784],[68785,68849],[68849,68785],[68786,68850],[68850,68786],[71840,71872],[71872,71840],[71841,71873],[71873,71841],[71842,71874],[71874,71842],[71843,71875],[71875,71843],[71844,71876],[71876,71844],[71845,71877],[71877,71845],[71846,71878],[71878,71846],[71847,71879],[71879,71847],[71848,71880],[71880,71848],[71849,71881],[71881,71849],[71850,71882],[71882,71850],[71851,71883],[71883,71851],[71852,71884],[71884,71852],[71853,71885],[71885,71853],[71854,71886],[71886,71854],[71855,71887],[71887,71855],[71856,71888],[71888,71856],[71857,71889],[71889,71857],[71858,71890],[71890,71858],[71859,71891],[71891,71859],[71860,71892],[71892,71860],[71861,71893],[71893,71861],[71862,71894],[71894,71862],[71863,71895],[71895,71863],[71864,71896],[71896,71864],[71865,71897],[71897,71865],[71866,71898],[71898,71866],[71867,71899],[71899,71867],[71868,71900],[71900,71868],[71869,71901],[71901,71869],[71870,71902],[71902,71870],[71871,71903],[71903,71871],[93760,93792],[93792,93760],[93761,93793],[93793,93761],[93762,93794],[93794,93762],[93763,93795],[93795,93763],[93764,93796],[93796,93764],[93765,93797],[93797,93765],[93766,93798],[93798,93766],[93767,93799],[93799,93767],[93768,93800],[93800,93768],[93769,93801],[93801,93769],[93770,93802],[93802,93770],[93771,93803],[93803,93771],[93772,93804],[93804,93772],[93773,93805],[93805,93773],[93774,93806],[93806,93774],[93775,93807],[93807,93775],[93776,93808],[93808,93776],[93777,93809],[93809,93777],[93778,93810],[93810,93778],[93779,93811],[93811,93779],[93780,93812],[93812,93780],[93781,93813],[93813,93781],[93782,93814],[93814,93782],[93783,93815],[93815,93783],[93784,93816],[93816,93784],[93785,93817],[93817,93785],[93786,93818],[93818,93786],[93787,93819],[93819,93787],[93788,93820],[93820,93788],[93789,93821],[93821,93789],[93790,93822],[93822,93790],[93791,93823],[93823,93791],[125184,125218],[125218,125184],[125185,125219],[125219,125185],[125186,125220],[125220,125186],[125187,125221],[125221,125187],[125188,125222],[125222,125188],[125189,125223],[125223,125189],[125190,125224],[125224,125190],[125191,125225],[125225,125191],[125192,125226],[125226,125192],[125193,125227],[125227,125193],[125194,125228],[125228,125194],[125195,125229],[125229,125195],[125196,125230],[125230,125196],[125197,125231],[125231,125197],[125198,125232],[125232,125198],[125199,125233],[125233,125199],[125200,125234],[125234,125200],[125201,125235],[125235,125201],[125202,125236],[125236,125202],[125203,125237],[125237,125203],[125204,125238],[125238,125204],[125205,125239],[125239,125205],[125206,125240],[125240,125206],[125207,125241],[125241,125207],[125208,125242],[125242,125208],[125209,125243],[125243,125209],[125210,125244],[125244,125210],[125211,125245],[125245,125211],[125212,125246],[125246,125212],[125213,125247],[125247,125213],[125214,125248],[125248,125214],[125215,125249],[125249,125215],[125216,125250],[125250,125216],[125217,125251],[125251,125217]]);static C=[[0,31,1],[127,159,1],[173,888,715],[889,896,7],[897,899,1],[907,909,2],[930,1328,398],[1367,1368,1],[1419,1420,1],[1424,1480,56],[1481,1487,1],[1515,1518,1],[1525,1541,1],[1564,1757,193],[1806,1807,1],[1867,1868,1],[1970,1983,1],[2043,2044,1],[2094,2095,1],[2111,2140,29],[2141,2143,2],[2155,2159,1],[2191,2199,1],[2274,2436,162],[2445,2446,1],[2449,2450,1],[2473,2481,8],[2483,2485,1],[2490,2491,1],[2501,2502,1],[2505,2506,1],[2511,2518,1],[2520,2523,1],[2526,2532,6],[2533,2559,26],[2560,2564,4],[2571,2574,1],[2577,2578,1],[2601,2609,8],[2612,2618,3],[2619,2621,2],[2627,2630,1],[2633,2634,1],[2638,2640,1],[2642,2648,1],[2653,2655,2],[2656,2661,1],[2679,2688,1],[2692,2702,10],[2706,2729,23],[2737,2740,3],[2746,2747,1],[2758,2766,4],[2767,2769,2],[2770,2783,1],[2788,2789,1],[2802,2808,1],[2816,2820,4],[2829,2830,1],[2833,2834,1],[2857,2865,8],[2868,2874,6],[2875,2885,10],[2886,2889,3],[2890,2894,4],[2895,2900,1],[2904,2907,1],[2910,2916,6],[2917,2936,19],[2937,2945,1],[2948,2955,7],[2956,2957,1],[2961,2966,5],[2967,2968,1],[2971,2973,2],[2976,2978,1],[2981,2983,1],[2987,2989,1],[3002,3005,1],[3011,3013,1],[3017,3022,5],[3023,3025,2],[3026,3030,1],[3032,3045,1],[3067,3071,1],[3085,3089,4],[3113,3130,17],[3131,3141,10],[3145,3150,5],[3151,3156,1],[3159,3163,4],[3164,3166,2],[3167,3172,5],[3173,3184,11],[3185,3190,1],[3213,3217,4],[3241,3252,11],[3258,3259,1],[3269,3273,4],[3278,3284,1],[3287,3292,1],[3295,3300,5],[3301,3312,11],[3316,3327,1],[3341,3345,4],[3397,3401,4],[3408,3411,1],[3428,3429,1],[3456,3460,4],[3479,3481,1],[3506,3516,10],[3518,3519,1],[3527,3529,1],[3531,3534,1],[3541,3543,2],[3552,3557,1],[3568,3569,1],[3573,3584,1],[3643,3646,1],[3676,3712,1],[3715,3717,2],[3723,3748,25],[3750,3774,24],[3775,3781,6],[3783,3791,8],[3802,3803,1],[3808,3839,1],[3912,3949,37],[3950,3952,1],[3992,4029,37],[4045,4059,14],[4060,4095,1],[4294,4296,2],[4297,4300,1],[4302,4303,1],[4681,4686,5],[4687,4695,8],[4697,4702,5],[4703,4745,42],[4750,4751,1],[4785,4790,5],[4791,4799,8],[4801,4806,5],[4807,4823,16],[4881,4886,5],[4887,4955,68],[4956,4989,33],[4990,4991,1],[5018,5023,1],[5110,5111,1],[5118,5119,1],[5789,5791,1],[5881,5887,1],[5910,5918,1],[5943,5951,1],[5972,5983,1],[5997,6001,4],[6004,6015,1],[6110,6111,1],[6122,6127,1],[6138,6143,1],[6158,6170,12],[6171,6175,1],[6265,6271,1],[6315,6319,1],[6390,6399,1],[6431,6444,13],[6445,6447,1],[6460,6463,1],[6465,6467,1],[6510,6511,1],[6517,6527,1],[6572,6575,1],[6602,6607,1],[6619,6621,1],[6684,6685,1],[6751,6781,30],[6782,6794,12],[6795,6799,1],[6810,6815,1],[6830,6831,1],[6863,6911,1],[6989,6991,1],[7039,7156,117],[7157,7163,1],[7224,7226,1],[7242,7244,1],[7305,7311,1],[7355,7356,1],[7368,7375,1],[7419,7423,1],[7958,7959,1],[7966,7967,1],[8006,8007,1],[8014,8015,1],[8024,8030,2],[8062,8063,1],[8117,8133,16],[8148,8149,1],[8156,8176,20],[8177,8181,4],[8191,8203,12],[8204,8207,1],[8234,8238,1],[8288,8303,1],[8306,8307,1],[8335,8349,14],[8350,8351,1],[8385,8399,1],[8433,8447,1],[8588,8591,1],[9255,9279,1],[9291,9311,1],[11124,11125,1],[11158,11508,350],[11509,11512,1],[11558,11560,2],[11561,11564,1],[11566,11567,1],[11624,11630,1],[11633,11646,1],[11671,11679,1],[11687,11743,8],[11870,11903,1],[11930,12020,90],[12021,12031,1],[12246,12271,1],[12352,12439,87],[12440,12544,104],[12545,12548,1],[12592,12687,95],[12772,12782,1],[12831,42125,29294],[42126,42127,1],[42183,42191,1],[42540,42559,1],[42744,42751,1],[42955,42959,1],[42962,42964,2],[42970,42993,1],[43053,43055,1],[43066,43071,1],[43128,43135,1],[43206,43213,1],[43226,43231,1],[43348,43358,1],[43389,43391,1],[43470,43482,12],[43483,43485,1],[43519,43575,56],[43576,43583,1],[43598,43599,1],[43610,43611,1],[43715,43738,1],[43767,43776,1],[43783,43784,1],[43791,43792,1],[43799,43807,1],[43815,43823,8],[43884,43887,1],[44014,44015,1],[44026,44031,1],[55204,55215,1],[55239,55242,1],[55292,63743,1],[64110,64111,1],[64218,64255,1],[64263,64274,1],[64280,64284,1],[64311,64317,6],[64319,64325,3],[64451,64466,1],[64912,64913,1],[64968,64974,1],[64976,65007,1],[65050,65055,1],[65107,65127,20],[65132,65135,1],[65141,65277,136],[65278,65280,1],[65471,65473,1],[65480,65481,1],[65488,65489,1],[65496,65497,1],[65501,65503,1],[65511,65519,8],[65520,65531,1],[65534,65535,1],[65548,65575,27],[65595,65598,3],[65614,65615,1],[65630,65663,1],[65787,65791,1],[65795,65798,1],[65844,65846,1],[65935,65949,14],[65950,65951,1],[65953,65999,1],[66046,66175,1],[66205,66207,1],[66257,66271,1],[66300,66303,1],[66340,66348,1],[66379,66383,1],[66427,66431,1],[66462,66500,38],[66501,66503,1],[66518,66559,1],[66718,66719,1],[66730,66735,1],[66772,66775,1],[66812,66815,1],[66856,66863,1],[66916,66926,1],[66939,66955,16],[66963,66966,3],[66978,66994,16],[67002,67005,3],[67006,67071,1],[67383,67391,1],[67414,67423,1],[67432,67455,1],[67462,67505,43],[67515,67583,1],[67590,67591,1],[67593,67638,45],[67641,67643,1],[67645,67646,1],[67670,67743,73],[67744,67750,1],[67760,67807,1],[67827,67830,3],[67831,67834,1],[67868,67870,1],[67898,67902,1],[67904,67967,1],[68024,68027,1],[68048,68049,1],[68100,68103,3],[68104,68107,1],[68116,68120,4],[68150,68151,1],[68155,68158,1],[68169,68175,1],[68185,68191,1],[68256,68287,1],[68327,68330,1],[68343,68351,1],[68406,68408,1],[68438,68439,1],[68467,68471,1],[68498,68504,1],[68509,68520,1],[68528,68607,1],[68681,68735,1],[68787,68799,1],[68851,68857,1],[68904,68911,1],[68922,69215,1],[69247,69290,43],[69294,69295,1],[69298,69372,1],[69416,69423,1],[69466,69487,1],[69514,69551,1],[69580,69599,1],[69623,69631,1],[69710,69713,1],[69750,69758,1],[69821,69827,6],[69828,69839,1],[69865,69871,1],[69882,69887,1],[69941,69960,19],[69961,69967,1],[70007,70015,1],[70112,70133,21],[70134,70143,1],[70162,70210,48],[70211,70271,1],[70279,70281,2],[70286,70302,16],[70314,70319,1],[70379,70383,1],[70394,70399,1],[70404,70413,9],[70414,70417,3],[70418,70441,23],[70449,70452,3],[70458,70469,11],[70470,70473,3],[70474,70478,4],[70479,70481,2],[70482,70486,1],[70488,70492,1],[70500,70501,1],[70509,70511,1],[70517,70655,1],[70748,70754,6],[70755,70783,1],[70856,70863,1],[70874,71039,1],[71094,71095,1],[71134,71167,1],[71237,71247,1],[71258,71263,1],[71277,71295,1],[71354,71359,1],[71370,71423,1],[71451,71452,1],[71468,71471,1],[71495,71679,1],[71740,71839,1],[71923,71934,1],[71943,71944,1],[71946,71947,1],[71956,71959,3],[71990,71993,3],[71994,72007,13],[72008,72015,1],[72026,72095,1],[72104,72105,1],[72152,72153,1],[72165,72191,1],[72264,72271,1],[72355,72367,1],[72441,72447,1],[72458,72703,1],[72713,72759,46],[72774,72783,1],[72813,72815,1],[72848,72849,1],[72872,72887,15],[72888,72959,1],[72967,72970,3],[73015,73017,1],[73019,73022,3],[73032,73039,1],[73050,73055,1],[73062,73065,3],[73103,73106,3],[73113,73119,1],[73130,73439,1],[73465,73471,1],[73489,73531,42],[73532,73533,1],[73562,73647,1],[73649,73663,1],[73714,73726,1],[74650,74751,1],[74863,74869,6],[74870,74879,1],[75076,77711,1],[77811,77823,1],[78896,78911,1],[78934,82943,1],[83527,92159,1],[92729,92735,1],[92767,92778,11],[92779,92781,1],[92863,92874,11],[92875,92879,1],[92910,92911,1],[92918,92927,1],[92998,93007,1],[93018,93026,8],[93048,93052,1],[93072,93759,1],[93851,93951,1],[94027,94030,1],[94088,94094,1],[94112,94175,1],[94181,94191,1],[94194,94207,1],[100344,100351,1],[101590,101631,1],[101641,110575,1],[110580,110588,8],[110591,110883,292],[110884,110897,1],[110899,110927,1],[110931,110932,1],[110934,110947,1],[110952,110959,1],[111356,113663,1],[113771,113775,1],[113789,113791,1],[113801,113807,1],[113818,113819,1],[113824,118527,1],[118574,118575,1],[118599,118607,1],[118724,118783,1],[119030,119039,1],[119079,119080,1],[119155,119162,1],[119275,119295,1],[119366,119487,1],[119508,119519,1],[119540,119551,1],[119639,119647,1],[119673,119807,1],[119893,119965,72],[119968,119969,1],[119971,119972,1],[119975,119976,1],[119981,119994,13],[119996,120004,8],[120070,120075,5],[120076,120085,9],[120093,120122,29],[120127,120133,6],[120135,120137,1],[120145,120486,341],[120487,120780,293],[120781,121484,703],[121485,121498,1],[121504,121520,16],[121521,122623,1],[122655,122660,1],[122667,122879,1],[122887,122905,18],[122906,122914,8],[122917,122923,6],[122924,122927,1],[122990,123022,1],[123024,123135,1],[123181,123183,1],[123198,123199,1],[123210,123213,1],[123216,123535,1],[123567,123583,1],[123642,123646,1],[123648,124111,1],[124154,124895,1],[124903,124908,5],[124911,124927,16],[125125,125126,1],[125143,125183,1],[125260,125263,1],[125274,125277,1],[125280,126064,1],[126133,126208,1],[126270,126463,1],[126468,126496,28],[126499,126501,2],[126502,126504,2],[126515,126520,5],[126522,126524,2],[126525,126529,1],[126531,126534,1],[126536,126540,2],[126544,126547,3],[126549,126550,1],[126552,126560,2],[126563,126565,2],[126566,126571,5],[126579,126589,5],[126591,126602,11],[126620,126624,1],[126628,126634,6],[126652,126703,1],[126706,126975,1],[127020,127023,1],[127124,127135,1],[127151,127152,1],[127168,127184,16],[127222,127231,1],[127406,127461,1],[127491,127503,1],[127548,127551,1],[127561,127567,1],[127570,127583,1],[127590,127743,1],[128728,128731,1],[128749,128751,1],[128765,128767,1],[128887,128890,1],[128986,128991,1],[129004,129007,1],[129009,129023,1],[129036,129039,1],[129096,129103,1],[129114,129119,1],[129160,129167,1],[129198,129199,1],[129202,129279,1],[129620,129631,1],[129646,129647,1],[129661,129663,1],[129673,129679,1],[129726,129734,8],[129735,129741,1],[129756,129759,1],[129769,129775,1],[129785,129791,1],[129939,129995,56],[129996,130031,1],[130042,131071,1],[173792,173823,1],[177978,177983,1],[178206,178207,1],[183970,183983,1],[191457,194559,1],[195102,196607,1],[201547,201551,1],[205744,917759,1],[918e3,1114111,1]];static Cc=[[0,31,1],[127,159,1]];static Cf=[[173,1536,1363],[1537,1541,1],[1564,1757,193],[1807,2192,385],[2193,2274,81],[6158,8203,2045],[8204,8207,1],[8234,8238,1],[8288,8292,1],[8294,8303,1],[65279,65529,250],[65530,65531,1],[69821,69837,16],[78896,78911,1],[113824,113827,1],[119155,119162,1],[917505,917536,31],[917537,917631,1]];static Co=[[57344,63743,1],[983040,1048573,1],[1048576,1114109,1]];static Cs=[[55296,57343,1]];static L=[[65,90,1],[97,122,1],[170,181,11],[186,192,6],[193,214,1],[216,246,1],[248,705,1],[710,721,1],[736,740,1],[748,750,2],[880,884,1],[886,887,1],[890,893,1],[895,902,7],[904,906,1],[908,910,2],[911,929,1],[931,1013,1],[1015,1153,1],[1162,1327,1],[1329,1366,1],[1369,1376,7],[1377,1416,1],[1488,1514,1],[1519,1522,1],[1568,1610,1],[1646,1647,1],[1649,1747,1],[1749,1765,16],[1766,1774,8],[1775,1786,11],[1787,1788,1],[1791,1808,17],[1810,1839,1],[1869,1957,1],[1969,1994,25],[1995,2026,1],[2036,2037,1],[2042,2048,6],[2049,2069,1],[2074,2084,10],[2088,2112,24],[2113,2136,1],[2144,2154,1],[2160,2183,1],[2185,2190,1],[2208,2249,1],[2308,2361,1],[2365,2384,19],[2392,2401,1],[2417,2432,1],[2437,2444,1],[2447,2448,1],[2451,2472,1],[2474,2480,1],[2482,2486,4],[2487,2489,1],[2493,2510,17],[2524,2525,1],[2527,2529,1],[2544,2545,1],[2556,2565,9],[2566,2570,1],[2575,2576,1],[2579,2600,1],[2602,2608,1],[2610,2611,1],[2613,2614,1],[2616,2617,1],[2649,2652,1],[2654,2674,20],[2675,2676,1],[2693,2701,1],[2703,2705,1],[2707,2728,1],[2730,2736,1],[2738,2739,1],[2741,2745,1],[2749,2768,19],[2784,2785,1],[2809,2821,12],[2822,2828,1],[2831,2832,1],[2835,2856,1],[2858,2864,1],[2866,2867,1],[2869,2873,1],[2877,2908,31],[2909,2911,2],[2912,2913,1],[2929,2947,18],[2949,2954,1],[2958,2960,1],[2962,2965,1],[2969,2970,1],[2972,2974,2],[2975,2979,4],[2980,2984,4],[2985,2986,1],[2990,3001,1],[3024,3077,53],[3078,3084,1],[3086,3088,1],[3090,3112,1],[3114,3129,1],[3133,3160,27],[3161,3162,1],[3165,3168,3],[3169,3200,31],[3205,3212,1],[3214,3216,1],[3218,3240,1],[3242,3251,1],[3253,3257,1],[3261,3293,32],[3294,3296,2],[3297,3313,16],[3314,3332,18],[3333,3340,1],[3342,3344,1],[3346,3386,1],[3389,3406,17],[3412,3414,1],[3423,3425,1],[3450,3455,1],[3461,3478,1],[3482,3505,1],[3507,3515,1],[3517,3520,3],[3521,3526,1],[3585,3632,1],[3634,3635,1],[3648,3654,1],[3713,3714,1],[3716,3718,2],[3719,3722,1],[3724,3747,1],[3749,3751,2],[3752,3760,1],[3762,3763,1],[3773,3776,3],[3777,3780,1],[3782,3804,22],[3805,3807,1],[3840,3904,64],[3905,3911,1],[3913,3948,1],[3976,3980,1],[4096,4138,1],[4159,4176,17],[4177,4181,1],[4186,4189,1],[4193,4197,4],[4198,4206,8],[4207,4208,1],[4213,4225,1],[4238,4256,18],[4257,4293,1],[4295,4301,6],[4304,4346,1],[4348,4680,1],[4682,4685,1],[4688,4694,1],[4696,4698,2],[4699,4701,1],[4704,4744,1],[4746,4749,1],[4752,4784,1],[4786,4789,1],[4792,4798,1],[4800,4802,2],[4803,4805,1],[4808,4822,1],[4824,4880,1],[4882,4885,1],[4888,4954,1],[4992,5007,1],[5024,5109,1],[5112,5117,1],[5121,5740,1],[5743,5759,1],[5761,5786,1],[5792,5866,1],[5873,5880,1],[5888,5905,1],[5919,5937,1],[5952,5969,1],[5984,5996,1],[5998,6e3,1],[6016,6067,1],[6103,6108,5],[6176,6264,1],[6272,6276,1],[6279,6312,1],[6314,6320,6],[6321,6389,1],[6400,6430,1],[6480,6509,1],[6512,6516,1],[6528,6571,1],[6576,6601,1],[6656,6678,1],[6688,6740,1],[6823,6917,94],[6918,6963,1],[6981,6988,1],[7043,7072,1],[7086,7087,1],[7098,7141,1],[7168,7203,1],[7245,7247,1],[7258,7293,1],[7296,7304,1],[7312,7354,1],[7357,7359,1],[7401,7404,1],[7406,7411,1],[7413,7414,1],[7418,7424,6],[7425,7615,1],[7680,7957,1],[7960,7965,1],[7968,8005,1],[8008,8013,1],[8016,8023,1],[8025,8031,2],[8032,8061,1],[8064,8116,1],[8118,8124,1],[8126,8130,4],[8131,8132,1],[8134,8140,1],[8144,8147,1],[8150,8155,1],[8160,8172,1],[8178,8180,1],[8182,8188,1],[8305,8319,14],[8336,8348,1],[8450,8455,5],[8458,8467,1],[8469,8473,4],[8474,8477,1],[8484,8490,2],[8491,8493,1],[8495,8505,1],[8508,8511,1],[8517,8521,1],[8526,8579,53],[8580,11264,2684],[11265,11492,1],[11499,11502,1],[11506,11507,1],[11520,11557,1],[11559,11565,6],[11568,11623,1],[11631,11648,17],[11649,11670,1],[11680,11686,1],[11688,11694,1],[11696,11702,1],[11704,11710,1],[11712,11718,1],[11720,11726,1],[11728,11734,1],[11736,11742,1],[11823,12293,470],[12294,12337,43],[12338,12341,1],[12347,12348,1],[12353,12438,1],[12445,12447,1],[12449,12538,1],[12540,12543,1],[12549,12591,1],[12593,12686,1],[12704,12735,1],[12784,12799,1],[13312,19903,1],[19968,42124,1],[42192,42237,1],[42240,42508,1],[42512,42527,1],[42538,42539,1],[42560,42606,1],[42623,42653,1],[42656,42725,1],[42775,42783,1],[42786,42888,1],[42891,42954,1],[42960,42961,1],[42963,42965,2],[42966,42969,1],[42994,43009,1],[43011,43013,1],[43015,43018,1],[43020,43042,1],[43072,43123,1],[43138,43187,1],[43250,43255,1],[43259,43261,2],[43262,43274,12],[43275,43301,1],[43312,43334,1],[43360,43388,1],[43396,43442,1],[43471,43488,17],[43489,43492,1],[43494,43503,1],[43514,43518,1],[43520,43560,1],[43584,43586,1],[43588,43595,1],[43616,43638,1],[43642,43646,4],[43647,43695,1],[43697,43701,4],[43702,43705,3],[43706,43709,1],[43712,43714,2],[43739,43741,1],[43744,43754,1],[43762,43764,1],[43777,43782,1],[43785,43790,1],[43793,43798,1],[43808,43814,1],[43816,43822,1],[43824,43866,1],[43868,43881,1],[43888,44002,1],[44032,55203,1],[55216,55238,1],[55243,55291,1],[63744,64109,1],[64112,64217,1],[64256,64262,1],[64275,64279,1],[64285,64287,2],[64288,64296,1],[64298,64310,1],[64312,64316,1],[64318,64320,2],[64321,64323,2],[64324,64326,2],[64327,64433,1],[64467,64829,1],[64848,64911,1],[64914,64967,1],[65008,65019,1],[65136,65140,1],[65142,65276,1],[65313,65338,1],[65345,65370,1],[65382,65470,1],[65474,65479,1],[65482,65487,1],[65490,65495,1],[65498,65500,1],[65536,65547,1],[65549,65574,1],[65576,65594,1],[65596,65597,1],[65599,65613,1],[65616,65629,1],[65664,65786,1],[66176,66204,1],[66208,66256,1],[66304,66335,1],[66349,66368,1],[66370,66377,1],[66384,66421,1],[66432,66461,1],[66464,66499,1],[66504,66511,1],[66560,66717,1],[66736,66771,1],[66776,66811,1],[66816,66855,1],[66864,66915,1],[66928,66938,1],[66940,66954,1],[66956,66962,1],[66964,66965,1],[66967,66977,1],[66979,66993,1],[66995,67001,1],[67003,67004,1],[67072,67382,1],[67392,67413,1],[67424,67431,1],[67456,67461,1],[67463,67504,1],[67506,67514,1],[67584,67589,1],[67592,67594,2],[67595,67637,1],[67639,67640,1],[67644,67647,3],[67648,67669,1],[67680,67702,1],[67712,67742,1],[67808,67826,1],[67828,67829,1],[67840,67861,1],[67872,67897,1],[67968,68023,1],[68030,68031,1],[68096,68112,16],[68113,68115,1],[68117,68119,1],[68121,68149,1],[68192,68220,1],[68224,68252,1],[68288,68295,1],[68297,68324,1],[68352,68405,1],[68416,68437,1],[68448,68466,1],[68480,68497,1],[68608,68680,1],[68736,68786,1],[68800,68850,1],[68864,68899,1],[69248,69289,1],[69296,69297,1],[69376,69404,1],[69415,69424,9],[69425,69445,1],[69488,69505,1],[69552,69572,1],[69600,69622,1],[69635,69687,1],[69745,69746,1],[69749,69763,14],[69764,69807,1],[69840,69864,1],[69891,69926,1],[69956,69959,3],[69968,70002,1],[70006,70019,13],[70020,70066,1],[70081,70084,1],[70106,70108,2],[70144,70161,1],[70163,70187,1],[70207,70208,1],[70272,70278,1],[70280,70282,2],[70283,70285,1],[70287,70301,1],[70303,70312,1],[70320,70366,1],[70405,70412,1],[70415,70416,1],[70419,70440,1],[70442,70448,1],[70450,70451,1],[70453,70457,1],[70461,70480,19],[70493,70497,1],[70656,70708,1],[70727,70730,1],[70751,70753,1],[70784,70831,1],[70852,70853,1],[70855,71040,185],[71041,71086,1],[71128,71131,1],[71168,71215,1],[71236,71296,60],[71297,71338,1],[71352,71424,72],[71425,71450,1],[71488,71494,1],[71680,71723,1],[71840,71903,1],[71935,71942,1],[71945,71948,3],[71949,71955,1],[71957,71958,1],[71960,71983,1],[71999,72001,2],[72096,72103,1],[72106,72144,1],[72161,72163,2],[72192,72203,11],[72204,72242,1],[72250,72272,22],[72284,72329,1],[72349,72368,19],[72369,72440,1],[72704,72712,1],[72714,72750,1],[72768,72818,50],[72819,72847,1],[72960,72966,1],[72968,72969,1],[72971,73008,1],[73030,73056,26],[73057,73061,1],[73063,73064,1],[73066,73097,1],[73112,73440,328],[73441,73458,1],[73474,73476,2],[73477,73488,1],[73490,73523,1],[73648,73728,80],[73729,74649,1],[74880,75075,1],[77712,77808,1],[77824,78895,1],[78913,78918,1],[82944,83526,1],[92160,92728,1],[92736,92766,1],[92784,92862,1],[92880,92909,1],[92928,92975,1],[92992,92995,1],[93027,93047,1],[93053,93071,1],[93760,93823,1],[93952,94026,1],[94032,94099,67],[94100,94111,1],[94176,94177,1],[94179,94208,29],[94209,100343,1],[100352,101589,1],[101632,101640,1],[110576,110579,1],[110581,110587,1],[110589,110590,1],[110592,110882,1],[110898,110928,30],[110929,110930,1],[110933,110948,15],[110949,110951,1],[110960,111355,1],[113664,113770,1],[113776,113788,1],[113792,113800,1],[113808,113817,1],[119808,119892,1],[119894,119964,1],[119966,119967,1],[119970,119973,3],[119974,119977,3],[119978,119980,1],[119982,119993,1],[119995,119997,2],[119998,120003,1],[120005,120069,1],[120071,120074,1],[120077,120084,1],[120086,120092,1],[120094,120121,1],[120123,120126,1],[120128,120132,1],[120134,120138,4],[120139,120144,1],[120146,120485,1],[120488,120512,1],[120514,120538,1],[120540,120570,1],[120572,120596,1],[120598,120628,1],[120630,120654,1],[120656,120686,1],[120688,120712,1],[120714,120744,1],[120746,120770,1],[120772,120779,1],[122624,122654,1],[122661,122666,1],[122928,122989,1],[123136,123180,1],[123191,123197,1],[123214,123536,322],[123537,123565,1],[123584,123627,1],[124112,124139,1],[124896,124902,1],[124904,124907,1],[124909,124910,1],[124912,124926,1],[124928,125124,1],[125184,125251,1],[125259,126464,1205],[126465,126467,1],[126469,126495,1],[126497,126498,1],[126500,126503,3],[126505,126514,1],[126516,126519,1],[126521,126523,2],[126530,126535,5],[126537,126541,2],[126542,126543,1],[126545,126546,1],[126548,126551,3],[126553,126561,2],[126562,126564,2],[126567,126570,1],[126572,126578,1],[126580,126583,1],[126585,126588,1],[126590,126592,2],[126593,126601,1],[126603,126619,1],[126625,126627,1],[126629,126633,1],[126635,126651,1],[131072,173791,1],[173824,177977,1],[177984,178205,1],[178208,183969,1],[183984,191456,1],[194560,195101,1],[196608,201546,1],[201552,205743,1]];static foldL=[[837,837,1]];static Ll=[[97,122,1],[181,223,42],[224,246,1],[248,255,1],[257,311,2],[312,328,2],[329,375,2],[378,382,2],[383,384,1],[387,389,2],[392,396,4],[397,402,5],[405,409,4],[410,411,1],[414,417,3],[419,421,2],[424,426,2],[427,429,2],[432,436,4],[438,441,3],[442,445,3],[446,447,1],[454,460,3],[462,476,2],[477,495,2],[496,499,3],[501,505,4],[507,563,2],[564,569,1],[572,575,3],[576,578,2],[583,591,2],[592,659,1],[661,687,1],[881,883,2],[887,891,4],[892,893,1],[912,940,28],[941,974,1],[976,977,1],[981,983,1],[985,1007,2],[1008,1011,1],[1013,1019,3],[1020,1072,52],[1073,1119,1],[1121,1153,2],[1163,1215,2],[1218,1230,2],[1231,1327,2],[1376,1416,1],[4304,4346,1],[4349,4351,1],[5112,5117,1],[7296,7304,1],[7424,7467,1],[7531,7543,1],[7545,7578,1],[7681,7829,2],[7830,7837,1],[7839,7935,2],[7936,7943,1],[7952,7957,1],[7968,7975,1],[7984,7991,1],[8e3,8005,1],[8016,8023,1],[8032,8039,1],[8048,8061,1],[8064,8071,1],[8080,8087,1],[8096,8103,1],[8112,8116,1],[8118,8119,1],[8126,8130,4],[8131,8132,1],[8134,8135,1],[8144,8147,1],[8150,8151,1],[8160,8167,1],[8178,8180,1],[8182,8183,1],[8458,8462,4],[8463,8467,4],[8495,8505,5],[8508,8509,1],[8518,8521,1],[8526,8580,54],[11312,11359,1],[11361,11365,4],[11366,11372,2],[11377,11379,2],[11380,11382,2],[11383,11387,1],[11393,11491,2],[11492,11500,8],[11502,11507,5],[11520,11557,1],[11559,11565,6],[42561,42605,2],[42625,42651,2],[42787,42799,2],[42800,42801,1],[42803,42865,2],[42866,42872,1],[42874,42876,2],[42879,42887,2],[42892,42894,2],[42897,42899,2],[42900,42901,1],[42903,42921,2],[42927,42933,6],[42935,42947,2],[42952,42954,2],[42961,42969,2],[42998,43002,4],[43824,43866,1],[43872,43880,1],[43888,43967,1],[64256,64262,1],[64275,64279,1],[65345,65370,1],[66600,66639,1],[66776,66811,1],[66967,66977,1],[66979,66993,1],[66995,67001,1],[67003,67004,1],[68800,68850,1],[71872,71903,1],[93792,93823,1],[119834,119859,1],[119886,119892,1],[119894,119911,1],[119938,119963,1],[119990,119993,1],[119995,119997,2],[119998,120003,1],[120005,120015,1],[120042,120067,1],[120094,120119,1],[120146,120171,1],[120198,120223,1],[120250,120275,1],[120302,120327,1],[120354,120379,1],[120406,120431,1],[120458,120485,1],[120514,120538,1],[120540,120545,1],[120572,120596,1],[120598,120603,1],[120630,120654,1],[120656,120661,1],[120688,120712,1],[120714,120719,1],[120746,120770,1],[120772,120777,1],[120779,122624,1845],[122625,122633,1],[122635,122654,1],[122661,122666,1],[125218,125251,1]];static foldLl=[[65,90,1],[192,214,1],[216,222,1],[256,302,2],[306,310,2],[313,327,2],[330,376,2],[377,381,2],[385,386,1],[388,390,2],[391,393,2],[394,395,1],[398,401,1],[403,404,1],[406,408,1],[412,413,1],[415,416,1],[418,422,2],[423,425,2],[428,430,2],[431,433,2],[434,435,1],[437,439,2],[440,444,4],[452,453,1],[455,456,1],[458,459,1],[461,475,2],[478,494,2],[497,498,1],[500,502,2],[503,504,1],[506,562,2],[570,571,1],[573,574,1],[577,579,2],[580,582,1],[584,590,2],[837,880,43],[882,886,4],[895,902,7],[904,906,1],[908,910,2],[911,913,2],[914,929,1],[931,939,1],[975,984,9],[986,1006,2],[1012,1015,3],[1017,1018,1],[1021,1071,1],[1120,1152,2],[1162,1216,2],[1217,1229,2],[1232,1326,2],[1329,1366,1],[4256,4293,1],[4295,4301,6],[5024,5109,1],[7312,7354,1],[7357,7359,1],[7680,7828,2],[7838,7934,2],[7944,7951,1],[7960,7965,1],[7976,7983,1],[7992,7999,1],[8008,8013,1],[8025,8031,2],[8040,8047,1],[8072,8079,1],[8088,8095,1],[8104,8111,1],[8120,8124,1],[8136,8140,1],[8152,8155,1],[8168,8172,1],[8184,8188,1],[8486,8490,4],[8491,8498,7],[8579,11264,2685],[11265,11311,1],[11360,11362,2],[11363,11364,1],[11367,11373,2],[11374,11376,1],[11378,11381,3],[11390,11392,1],[11394,11490,2],[11499,11501,2],[11506,42560,31054],[42562,42604,2],[42624,42650,2],[42786,42798,2],[42802,42862,2],[42873,42877,2],[42878,42886,2],[42891,42893,2],[42896,42898,2],[42902,42922,2],[42923,42926,1],[42928,42932,1],[42934,42948,2],[42949,42951,1],[42953,42960,7],[42966,42968,2],[42997,65313,22316],[65314,65338,1],[66560,66599,1],[66736,66771,1],[66928,66938,1],[66940,66954,1],[66956,66962,1],[66964,66965,1],[68736,68786,1],[71840,71871,1],[93760,93791,1],[125184,125217,1]];static Lm=[[688,705,1],[710,721,1],[736,740,1],[748,750,2],[884,890,6],[1369,1600,231],[1765,1766,1],[2036,2037,1],[2042,2074,32],[2084,2088,4],[2249,2417,168],[3654,3782,128],[4348,6103,1755],[6211,6823,612],[7288,7293,1],[7468,7530,1],[7544,7579,35],[7580,7615,1],[8305,8319,14],[8336,8348,1],[11388,11389,1],[11631,11823,192],[12293,12337,44],[12338,12341,1],[12347,12445,98],[12446,12540,94],[12541,12542,1],[40981,42232,1251],[42233,42237,1],[42508,42623,115],[42652,42653,1],[42775,42783,1],[42864,42888,24],[42994,42996,1],[43e3,43001,1],[43471,43494,23],[43632,43741,109],[43763,43764,1],[43868,43871,1],[43881,65392,21511],[65438,65439,1],[67456,67461,1],[67463,67504,1],[67506,67514,1],[92992,92995,1],[94099,94111,1],[94176,94177,1],[94179,110576,16397],[110577,110579,1],[110581,110587,1],[110589,110590,1],[122928,122989,1],[123191,123197,1],[124139,125259,1120]];static Lo=[[170,186,16],[443,448,5],[449,451,1],[660,1488,828],[1489,1514,1],[1519,1522,1],[1568,1599,1],[1601,1610,1],[1646,1647,1],[1649,1747,1],[1749,1774,25],[1775,1786,11],[1787,1788,1],[1791,1808,17],[1810,1839,1],[1869,1957,1],[1969,1994,25],[1995,2026,1],[2048,2069,1],[2112,2136,1],[2144,2154,1],[2160,2183,1],[2185,2190,1],[2208,2248,1],[2308,2361,1],[2365,2384,19],[2392,2401,1],[2418,2432,1],[2437,2444,1],[2447,2448,1],[2451,2472,1],[2474,2480,1],[2482,2486,4],[2487,2489,1],[2493,2510,17],[2524,2525,1],[2527,2529,1],[2544,2545,1],[2556,2565,9],[2566,2570,1],[2575,2576,1],[2579,2600,1],[2602,2608,1],[2610,2611,1],[2613,2614,1],[2616,2617,1],[2649,2652,1],[2654,2674,20],[2675,2676,1],[2693,2701,1],[2703,2705,1],[2707,2728,1],[2730,2736,1],[2738,2739,1],[2741,2745,1],[2749,2768,19],[2784,2785,1],[2809,2821,12],[2822,2828,1],[2831,2832,1],[2835,2856,1],[2858,2864,1],[2866,2867,1],[2869,2873,1],[2877,2908,31],[2909,2911,2],[2912,2913,1],[2929,2947,18],[2949,2954,1],[2958,2960,1],[2962,2965,1],[2969,2970,1],[2972,2974,2],[2975,2979,4],[2980,2984,4],[2985,2986,1],[2990,3001,1],[3024,3077,53],[3078,3084,1],[3086,3088,1],[3090,3112,1],[3114,3129,1],[3133,3160,27],[3161,3162,1],[3165,3168,3],[3169,3200,31],[3205,3212,1],[3214,3216,1],[3218,3240,1],[3242,3251,1],[3253,3257,1],[3261,3293,32],[3294,3296,2],[3297,3313,16],[3314,3332,18],[3333,3340,1],[3342,3344,1],[3346,3386,1],[3389,3406,17],[3412,3414,1],[3423,3425,1],[3450,3455,1],[3461,3478,1],[3482,3505,1],[3507,3515,1],[3517,3520,3],[3521,3526,1],[3585,3632,1],[3634,3635,1],[3648,3653,1],[3713,3714,1],[3716,3718,2],[3719,3722,1],[3724,3747,1],[3749,3751,2],[3752,3760,1],[3762,3763,1],[3773,3776,3],[3777,3780,1],[3804,3807,1],[3840,3904,64],[3905,3911,1],[3913,3948,1],[3976,3980,1],[4096,4138,1],[4159,4176,17],[4177,4181,1],[4186,4189,1],[4193,4197,4],[4198,4206,8],[4207,4208,1],[4213,4225,1],[4238,4352,114],[4353,4680,1],[4682,4685,1],[4688,4694,1],[4696,4698,2],[4699,4701,1],[4704,4744,1],[4746,4749,1],[4752,4784,1],[4786,4789,1],[4792,4798,1],[4800,4802,2],[4803,4805,1],[4808,4822,1],[4824,4880,1],[4882,4885,1],[4888,4954,1],[4992,5007,1],[5121,5740,1],[5743,5759,1],[5761,5786,1],[5792,5866,1],[5873,5880,1],[5888,5905,1],[5919,5937,1],[5952,5969,1],[5984,5996,1],[5998,6e3,1],[6016,6067,1],[6108,6176,68],[6177,6210,1],[6212,6264,1],[6272,6276,1],[6279,6312,1],[6314,6320,6],[6321,6389,1],[6400,6430,1],[6480,6509,1],[6512,6516,1],[6528,6571,1],[6576,6601,1],[6656,6678,1],[6688,6740,1],[6917,6963,1],[6981,6988,1],[7043,7072,1],[7086,7087,1],[7098,7141,1],[7168,7203,1],[7245,7247,1],[7258,7287,1],[7401,7404,1],[7406,7411,1],[7413,7414,1],[7418,8501,1083],[8502,8504,1],[11568,11623,1],[11648,11670,1],[11680,11686,1],[11688,11694,1],[11696,11702,1],[11704,11710,1],[11712,11718,1],[11720,11726,1],[11728,11734,1],[11736,11742,1],[12294,12348,54],[12353,12438,1],[12447,12449,2],[12450,12538,1],[12543,12549,6],[12550,12591,1],[12593,12686,1],[12704,12735,1],[12784,12799,1],[13312,19903,1],[19968,40980,1],[40982,42124,1],[42192,42231,1],[42240,42507,1],[42512,42527,1],[42538,42539,1],[42606,42656,50],[42657,42725,1],[42895,42999,104],[43003,43009,1],[43011,43013,1],[43015,43018,1],[43020,43042,1],[43072,43123,1],[43138,43187,1],[43250,43255,1],[43259,43261,2],[43262,43274,12],[43275,43301,1],[43312,43334,1],[43360,43388,1],[43396,43442,1],[43488,43492,1],[43495,43503,1],[43514,43518,1],[43520,43560,1],[43584,43586,1],[43588,43595,1],[43616,43631,1],[43633,43638,1],[43642,43646,4],[43647,43695,1],[43697,43701,4],[43702,43705,3],[43706,43709,1],[43712,43714,2],[43739,43740,1],[43744,43754,1],[43762,43777,15],[43778,43782,1],[43785,43790,1],[43793,43798,1],[43808,43814,1],[43816,43822,1],[43968,44002,1],[44032,55203,1],[55216,55238,1],[55243,55291,1],[63744,64109,1],[64112,64217,1],[64285,64287,2],[64288,64296,1],[64298,64310,1],[64312,64316,1],[64318,64320,2],[64321,64323,2],[64324,64326,2],[64327,64433,1],[64467,64829,1],[64848,64911,1],[64914,64967,1],[65008,65019,1],[65136,65140,1],[65142,65276,1],[65382,65391,1],[65393,65437,1],[65440,65470,1],[65474,65479,1],[65482,65487,1],[65490,65495,1],[65498,65500,1],[65536,65547,1],[65549,65574,1],[65576,65594,1],[65596,65597,1],[65599,65613,1],[65616,65629,1],[65664,65786,1],[66176,66204,1],[66208,66256,1],[66304,66335,1],[66349,66368,1],[66370,66377,1],[66384,66421,1],[66432,66461,1],[66464,66499,1],[66504,66511,1],[66640,66717,1],[66816,66855,1],[66864,66915,1],[67072,67382,1],[67392,67413,1],[67424,67431,1],[67584,67589,1],[67592,67594,2],[67595,67637,1],[67639,67640,1],[67644,67647,3],[67648,67669,1],[67680,67702,1],[67712,67742,1],[67808,67826,1],[67828,67829,1],[67840,67861,1],[67872,67897,1],[67968,68023,1],[68030,68031,1],[68096,68112,16],[68113,68115,1],[68117,68119,1],[68121,68149,1],[68192,68220,1],[68224,68252,1],[68288,68295,1],[68297,68324,1],[68352,68405,1],[68416,68437,1],[68448,68466,1],[68480,68497,1],[68608,68680,1],[68864,68899,1],[69248,69289,1],[69296,69297,1],[69376,69404,1],[69415,69424,9],[69425,69445,1],[69488,69505,1],[69552,69572,1],[69600,69622,1],[69635,69687,1],[69745,69746,1],[69749,69763,14],[69764,69807,1],[69840,69864,1],[69891,69926,1],[69956,69959,3],[69968,70002,1],[70006,70019,13],[70020,70066,1],[70081,70084,1],[70106,70108,2],[70144,70161,1],[70163,70187,1],[70207,70208,1],[70272,70278,1],[70280,70282,2],[70283,70285,1],[70287,70301,1],[70303,70312,1],[70320,70366,1],[70405,70412,1],[70415,70416,1],[70419,70440,1],[70442,70448,1],[70450,70451,1],[70453,70457,1],[70461,70480,19],[70493,70497,1],[70656,70708,1],[70727,70730,1],[70751,70753,1],[70784,70831,1],[70852,70853,1],[70855,71040,185],[71041,71086,1],[71128,71131,1],[71168,71215,1],[71236,71296,60],[71297,71338,1],[71352,71424,72],[71425,71450,1],[71488,71494,1],[71680,71723,1],[71935,71942,1],[71945,71948,3],[71949,71955,1],[71957,71958,1],[71960,71983,1],[71999,72001,2],[72096,72103,1],[72106,72144,1],[72161,72163,2],[72192,72203,11],[72204,72242,1],[72250,72272,22],[72284,72329,1],[72349,72368,19],[72369,72440,1],[72704,72712,1],[72714,72750,1],[72768,72818,50],[72819,72847,1],[72960,72966,1],[72968,72969,1],[72971,73008,1],[73030,73056,26],[73057,73061,1],[73063,73064,1],[73066,73097,1],[73112,73440,328],[73441,73458,1],[73474,73476,2],[73477,73488,1],[73490,73523,1],[73648,73728,80],[73729,74649,1],[74880,75075,1],[77712,77808,1],[77824,78895,1],[78913,78918,1],[82944,83526,1],[92160,92728,1],[92736,92766,1],[92784,92862,1],[92880,92909,1],[92928,92975,1],[93027,93047,1],[93053,93071,1],[93952,94026,1],[94032,94208,176],[94209,100343,1],[100352,101589,1],[101632,101640,1],[110592,110882,1],[110898,110928,30],[110929,110930,1],[110933,110948,15],[110949,110951,1],[110960,111355,1],[113664,113770,1],[113776,113788,1],[113792,113800,1],[113808,113817,1],[122634,123136,502],[123137,123180,1],[123214,123536,322],[123537,123565,1],[123584,123627,1],[124112,124138,1],[124896,124902,1],[124904,124907,1],[124909,124910,1],[124912,124926,1],[124928,125124,1],[126464,126467,1],[126469,126495,1],[126497,126498,1],[126500,126503,3],[126505,126514,1],[126516,126519,1],[126521,126523,2],[126530,126535,5],[126537,126541,2],[126542,126543,1],[126545,126546,1],[126548,126551,3],[126553,126561,2],[126562,126564,2],[126567,126570,1],[126572,126578,1],[126580,126583,1],[126585,126588,1],[126590,126592,2],[126593,126601,1],[126603,126619,1],[126625,126627,1],[126629,126633,1],[126635,126651,1],[131072,173791,1],[173824,177977,1],[177984,178205,1],[178208,183969,1],[183984,191456,1],[194560,195101,1],[196608,201546,1],[201552,205743,1]];static Lt=[[453,459,3],[498,8072,7574],[8073,8079,1],[8088,8095,1],[8104,8111,1],[8124,8140,16],[8188,8188,1]];static foldLt=[[452,454,2],[455,457,2],[458,460,2],[497,499,2],[8064,8071,1],[8080,8087,1],[8096,8103,1],[8115,8131,16],[8179,8179,1]];static Lu=[[65,90,1],[192,214,1],[216,222,1],[256,310,2],[313,327,2],[330,376,2],[377,381,2],[385,386,1],[388,390,2],[391,393,2],[394,395,1],[398,401,1],[403,404,1],[406,408,1],[412,413,1],[415,416,1],[418,422,2],[423,425,2],[428,430,2],[431,433,2],[434,435,1],[437,439,2],[440,444,4],[452,461,3],[463,475,2],[478,494,2],[497,500,3],[502,504,1],[506,562,2],[570,571,1],[573,574,1],[577,579,2],[580,582,1],[584,590,2],[880,882,2],[886,895,9],[902,904,2],[905,906,1],[908,910,2],[911,913,2],[914,929,1],[931,939,1],[975,978,3],[979,980,1],[984,1006,2],[1012,1015,3],[1017,1018,1],[1021,1071,1],[1120,1152,2],[1162,1216,2],[1217,1229,2],[1232,1326,2],[1329,1366,1],[4256,4293,1],[4295,4301,6],[5024,5109,1],[7312,7354,1],[7357,7359,1],[7680,7828,2],[7838,7934,2],[7944,7951,1],[7960,7965,1],[7976,7983,1],[7992,7999,1],[8008,8013,1],[8025,8031,2],[8040,8047,1],[8120,8123,1],[8136,8139,1],[8152,8155,1],[8168,8172,1],[8184,8187,1],[8450,8455,5],[8459,8461,1],[8464,8466,1],[8469,8473,4],[8474,8477,1],[8484,8490,2],[8491,8493,1],[8496,8499,1],[8510,8511,1],[8517,8579,62],[11264,11311,1],[11360,11362,2],[11363,11364,1],[11367,11373,2],[11374,11376,1],[11378,11381,3],[11390,11392,1],[11394,11490,2],[11499,11501,2],[11506,42560,31054],[42562,42604,2],[42624,42650,2],[42786,42798,2],[42802,42862,2],[42873,42877,2],[42878,42886,2],[42891,42893,2],[42896,42898,2],[42902,42922,2],[42923,42926,1],[42928,42932,1],[42934,42948,2],[42949,42951,1],[42953,42960,7],[42966,42968,2],[42997,65313,22316],[65314,65338,1],[66560,66599,1],[66736,66771,1],[66928,66938,1],[66940,66954,1],[66956,66962,1],[66964,66965,1],[68736,68786,1],[71840,71871,1],[93760,93791,1],[119808,119833,1],[119860,119885,1],[119912,119937,1],[119964,119966,2],[119967,119973,3],[119974,119977,3],[119978,119980,1],[119982,119989,1],[120016,120041,1],[120068,120069,1],[120071,120074,1],[120077,120084,1],[120086,120092,1],[120120,120121,1],[120123,120126,1],[120128,120132,1],[120134,120138,4],[120139,120144,1],[120172,120197,1],[120224,120249,1],[120276,120301,1],[120328,120353,1],[120380,120405,1],[120432,120457,1],[120488,120512,1],[120546,120570,1],[120604,120628,1],[120662,120686,1],[120720,120744,1],[120778,125184,4406],[125185,125217,1]];static Upper=this.Lu;static foldLu=[[97,122,1],[181,223,42],[224,246,1],[248,255,1],[257,303,2],[307,311,2],[314,328,2],[331,375,2],[378,382,2],[383,384,1],[387,389,2],[392,396,4],[402,405,3],[409,410,1],[414,417,3],[419,421,2],[424,429,5],[432,436,4],[438,441,3],[445,447,2],[453,454,1],[456,457,1],[459,460,1],[462,476,2],[477,495,2],[498,499,1],[501,505,4],[507,543,2],[547,563,2],[572,575,3],[576,578,2],[583,591,2],[592,596,1],[598,599,1],[601,603,2],[604,608,4],[609,613,2],[614,616,2],[617,620,1],[623,625,2],[626,629,3],[637,640,3],[642,643,1],[647,652,1],[658,669,11],[670,837,167],[881,883,2],[887,891,4],[892,893,1],[940,943,1],[945,974,1],[976,977,1],[981,983,1],[985,1007,2],[1008,1011,1],[1013,1019,3],[1072,1119,1],[1121,1153,2],[1163,1215,2],[1218,1230,2],[1231,1327,2],[1377,1414,1],[4304,4346,1],[4349,4351,1],[5112,5117,1],[7296,7304,1],[7545,7549,4],[7566,7681,115],[7683,7829,2],[7835,7841,6],[7843,7935,2],[7936,7943,1],[7952,7957,1],[7968,7975,1],[7984,7991,1],[8e3,8005,1],[8017,8023,2],[8032,8039,1],[8048,8061,1],[8112,8113,1],[8126,8144,18],[8145,8160,15],[8161,8165,4],[8526,8580,54],[11312,11359,1],[11361,11365,4],[11366,11372,2],[11379,11382,3],[11393,11491,2],[11500,11502,2],[11507,11520,13],[11521,11557,1],[11559,11565,6],[42561,42605,2],[42625,42651,2],[42787,42799,2],[42803,42863,2],[42874,42876,2],[42879,42887,2],[42892,42897,5],[42899,42900,1],[42903,42921,2],[42933,42947,2],[42952,42954,2],[42961,42967,6],[42969,42998,29],[43859,43888,29],[43889,43967,1],[65345,65370,1],[66600,66639,1],[66776,66811,1],[66967,66977,1],[66979,66993,1],[66995,67001,1],[67003,67004,1],[68800,68850,1],[71872,71903,1],[93792,93823,1],[125218,125251,1]];static M=[[768,879,1],[1155,1161,1],[1425,1469,1],[1471,1473,2],[1474,1476,2],[1477,1479,2],[1552,1562,1],[1611,1631,1],[1648,1750,102],[1751,1756,1],[1759,1764,1],[1767,1768,1],[1770,1773,1],[1809,1840,31],[1841,1866,1],[1958,1968,1],[2027,2035,1],[2045,2070,25],[2071,2073,1],[2075,2083,1],[2085,2087,1],[2089,2093,1],[2137,2139,1],[2200,2207,1],[2250,2273,1],[2275,2307,1],[2362,2364,1],[2366,2383,1],[2385,2391,1],[2402,2403,1],[2433,2435,1],[2492,2494,2],[2495,2500,1],[2503,2504,1],[2507,2509,1],[2519,2530,11],[2531,2558,27],[2561,2563,1],[2620,2622,2],[2623,2626,1],[2631,2632,1],[2635,2637,1],[2641,2672,31],[2673,2677,4],[2689,2691,1],[2748,2750,2],[2751,2757,1],[2759,2761,1],[2763,2765,1],[2786,2787,1],[2810,2815,1],[2817,2819,1],[2876,2878,2],[2879,2884,1],[2887,2888,1],[2891,2893,1],[2901,2903,1],[2914,2915,1],[2946,3006,60],[3007,3010,1],[3014,3016,1],[3018,3021,1],[3031,3072,41],[3073,3076,1],[3132,3134,2],[3135,3140,1],[3142,3144,1],[3146,3149,1],[3157,3158,1],[3170,3171,1],[3201,3203,1],[3260,3262,2],[3263,3268,1],[3270,3272,1],[3274,3277,1],[3285,3286,1],[3298,3299,1],[3315,3328,13],[3329,3331,1],[3387,3388,1],[3390,3396,1],[3398,3400,1],[3402,3405,1],[3415,3426,11],[3427,3457,30],[3458,3459,1],[3530,3535,5],[3536,3540,1],[3542,3544,2],[3545,3551,1],[3570,3571,1],[3633,3636,3],[3637,3642,1],[3655,3662,1],[3761,3764,3],[3765,3772,1],[3784,3790,1],[3864,3865,1],[3893,3897,2],[3902,3903,1],[3953,3972,1],[3974,3975,1],[3981,3991,1],[3993,4028,1],[4038,4139,101],[4140,4158,1],[4182,4185,1],[4190,4192,1],[4194,4196,1],[4199,4205,1],[4209,4212,1],[4226,4237,1],[4239,4250,11],[4251,4253,1],[4957,4959,1],[5906,5909,1],[5938,5940,1],[5970,5971,1],[6002,6003,1],[6068,6099,1],[6109,6155,46],[6156,6157,1],[6159,6277,118],[6278,6313,35],[6432,6443,1],[6448,6459,1],[6679,6683,1],[6741,6750,1],[6752,6780,1],[6783,6832,49],[6833,6862,1],[6912,6916,1],[6964,6980,1],[7019,7027,1],[7040,7042,1],[7073,7085,1],[7142,7155,1],[7204,7223,1],[7376,7378,1],[7380,7400,1],[7405,7412,7],[7415,7417,1],[7616,7679,1],[8400,8432,1],[11503,11505,1],[11647,11744,97],[11745,11775,1],[12330,12335,1],[12441,12442,1],[42607,42610,1],[42612,42621,1],[42654,42655,1],[42736,42737,1],[43010,43014,4],[43019,43043,24],[43044,43047,1],[43052,43136,84],[43137,43188,51],[43189,43205,1],[43232,43249,1],[43263,43302,39],[43303,43309,1],[43335,43347,1],[43392,43395,1],[43443,43456,1],[43493,43561,68],[43562,43574,1],[43587,43596,9],[43597,43643,46],[43644,43645,1],[43696,43698,2],[43699,43700,1],[43703,43704,1],[43710,43711,1],[43713,43755,42],[43756,43759,1],[43765,43766,1],[44003,44010,1],[44012,44013,1],[64286,65024,738],[65025,65039,1],[65056,65071,1],[66045,66272,227],[66422,66426,1],[68097,68099,1],[68101,68102,1],[68108,68111,1],[68152,68154,1],[68159,68325,166],[68326,68900,574],[68901,68903,1],[69291,69292,1],[69373,69375,1],[69446,69456,1],[69506,69509,1],[69632,69634,1],[69688,69702,1],[69744,69747,3],[69748,69759,11],[69760,69762,1],[69808,69818,1],[69826,69888,62],[69889,69890,1],[69927,69940,1],[69957,69958,1],[70003,70016,13],[70017,70018,1],[70067,70080,1],[70089,70092,1],[70094,70095,1],[70188,70199,1],[70206,70209,3],[70367,70378,1],[70400,70403,1],[70459,70460,1],[70462,70468,1],[70471,70472,1],[70475,70477,1],[70487,70498,11],[70499,70502,3],[70503,70508,1],[70512,70516,1],[70709,70726,1],[70750,70832,82],[70833,70851,1],[71087,71093,1],[71096,71104,1],[71132,71133,1],[71216,71232,1],[71339,71351,1],[71453,71467,1],[71724,71738,1],[71984,71989,1],[71991,71992,1],[71995,71998,1],[72e3,72002,2],[72003,72145,142],[72146,72151,1],[72154,72160,1],[72164,72193,29],[72194,72202,1],[72243,72249,1],[72251,72254,1],[72263,72273,10],[72274,72283,1],[72330,72345,1],[72751,72758,1],[72760,72767,1],[72850,72871,1],[72873,72886,1],[73009,73014,1],[73018,73020,2],[73021,73023,2],[73024,73029,1],[73031,73098,67],[73099,73102,1],[73104,73105,1],[73107,73111,1],[73459,73462,1],[73472,73473,1],[73475,73524,49],[73525,73530,1],[73534,73538,1],[78912,78919,7],[78920,78933,1],[92912,92916,1],[92976,92982,1],[94031,94033,2],[94034,94087,1],[94095,94098,1],[94180,94192,12],[94193,113821,19628],[113822,118528,4706],[118529,118573,1],[118576,118598,1],[119141,119145,1],[119149,119154,1],[119163,119170,1],[119173,119179,1],[119210,119213,1],[119362,119364,1],[121344,121398,1],[121403,121452,1],[121461,121476,15],[121499,121503,1],[121505,121519,1],[122880,122886,1],[122888,122904,1],[122907,122913,1],[122915,122916,1],[122918,122922,1],[123023,123184,161],[123185,123190,1],[123566,123628,62],[123629,123631,1],[124140,124143,1],[125136,125142,1],[125252,125258,1],[917760,917999,1]];static foldM=[[921,953,32],[8126,8126,1]];static Mc=[[2307,2363,56],[2366,2368,1],[2377,2380,1],[2382,2383,1],[2434,2435,1],[2494,2496,1],[2503,2504,1],[2507,2508,1],[2519,2563,44],[2622,2624,1],[2691,2750,59],[2751,2752,1],[2761,2763,2],[2764,2818,54],[2819,2878,59],[2880,2887,7],[2888,2891,3],[2892,2903,11],[3006,3007,1],[3009,3010,1],[3014,3016,1],[3018,3020,1],[3031,3073,42],[3074,3075,1],[3137,3140,1],[3202,3203,1],[3262,3264,2],[3265,3268,1],[3271,3272,1],[3274,3275,1],[3285,3286,1],[3315,3330,15],[3331,3390,59],[3391,3392,1],[3398,3400,1],[3402,3404,1],[3415,3458,43],[3459,3535,76],[3536,3537,1],[3544,3551,1],[3570,3571,1],[3902,3903,1],[3967,4139,172],[4140,4145,5],[4152,4155,3],[4156,4182,26],[4183,4194,11],[4195,4196,1],[4199,4205,1],[4227,4228,1],[4231,4236,1],[4239,4250,11],[4251,4252,1],[5909,5940,31],[6070,6078,8],[6079,6085,1],[6087,6088,1],[6435,6438,1],[6441,6443,1],[6448,6449,1],[6451,6456,1],[6681,6682,1],[6741,6743,2],[6753,6755,2],[6756,6765,9],[6766,6770,1],[6916,6965,49],[6971,6973,2],[6974,6977,1],[6979,6980,1],[7042,7073,31],[7078,7079,1],[7082,7143,61],[7146,7148,1],[7150,7154,4],[7155,7204,49],[7205,7211,1],[7220,7221,1],[7393,7415,22],[12334,12335,1],[43043,43044,1],[43047,43136,89],[43137,43188,51],[43189,43203,1],[43346,43347,1],[43395,43444,49],[43445,43450,5],[43451,43454,3],[43455,43456,1],[43567,43568,1],[43571,43572,1],[43597,43643,46],[43645,43755,110],[43758,43759,1],[43765,44003,238],[44004,44006,2],[44007,44009,2],[44010,44012,2],[69632,69634,2],[69762,69808,46],[69809,69810,1],[69815,69816,1],[69932,69957,25],[69958,70018,60],[70067,70069,1],[70079,70080,1],[70094,70188,94],[70189,70190,1],[70194,70195,1],[70197,70368,171],[70369,70370,1],[70402,70403,1],[70462,70463,1],[70465,70468,1],[70471,70472,1],[70475,70477,1],[70487,70498,11],[70499,70709,210],[70710,70711,1],[70720,70721,1],[70725,70832,107],[70833,70834,1],[70841,70843,2],[70844,70846,1],[70849,71087,238],[71088,71089,1],[71096,71099,1],[71102,71216,114],[71217,71218,1],[71227,71228,1],[71230,71340,110],[71342,71343,1],[71350,71456,106],[71457,71462,5],[71724,71726,1],[71736,71984,248],[71985,71989,1],[71991,71992,1],[71997,72e3,3],[72002,72145,143],[72146,72147,1],[72156,72159,1],[72164,72249,85],[72279,72280,1],[72343,72751,408],[72766,72873,107],[72881,72884,3],[73098,73102,1],[73107,73108,1],[73110,73461,351],[73462,73475,13],[73524,73525,1],[73534,73535,1],[73537,94033,20496],[94034,94087,1],[94192,94193,1],[119141,119142,1],[119149,119154,1]];static Me=[[1160,1161,1],[6846,8413,1567],[8414,8416,1],[8418,8420,1],[42608,42610,1]];static Mn=[[768,879,1],[1155,1159,1],[1425,1469,1],[1471,1473,2],[1474,1476,2],[1477,1479,2],[1552,1562,1],[1611,1631,1],[1648,1750,102],[1751,1756,1],[1759,1764,1],[1767,1768,1],[1770,1773,1],[1809,1840,31],[1841,1866,1],[1958,1968,1],[2027,2035,1],[2045,2070,25],[2071,2073,1],[2075,2083,1],[2085,2087,1],[2089,2093,1],[2137,2139,1],[2200,2207,1],[2250,2273,1],[2275,2306,1],[2362,2364,2],[2369,2376,1],[2381,2385,4],[2386,2391,1],[2402,2403,1],[2433,2492,59],[2497,2500,1],[2509,2530,21],[2531,2558,27],[2561,2562,1],[2620,2625,5],[2626,2631,5],[2632,2635,3],[2636,2637,1],[2641,2672,31],[2673,2677,4],[2689,2690,1],[2748,2753,5],[2754,2757,1],[2759,2760,1],[2765,2786,21],[2787,2810,23],[2811,2815,1],[2817,2876,59],[2879,2881,2],[2882,2884,1],[2893,2901,8],[2902,2914,12],[2915,2946,31],[3008,3021,13],[3072,3076,4],[3132,3134,2],[3135,3136,1],[3142,3144,1],[3146,3149,1],[3157,3158,1],[3170,3171,1],[3201,3260,59],[3263,3270,7],[3276,3277,1],[3298,3299,1],[3328,3329,1],[3387,3388,1],[3393,3396,1],[3405,3426,21],[3427,3457,30],[3530,3538,8],[3539,3540,1],[3542,3633,91],[3636,3642,1],[3655,3662,1],[3761,3764,3],[3765,3772,1],[3784,3790,1],[3864,3865,1],[3893,3897,2],[3953,3966,1],[3968,3972,1],[3974,3975,1],[3981,3991,1],[3993,4028,1],[4038,4141,103],[4142,4144,1],[4146,4151,1],[4153,4154,1],[4157,4158,1],[4184,4185,1],[4190,4192,1],[4209,4212,1],[4226,4229,3],[4230,4237,7],[4253,4957,704],[4958,4959,1],[5906,5908,1],[5938,5939,1],[5970,5971,1],[6002,6003,1],[6068,6069,1],[6071,6077,1],[6086,6089,3],[6090,6099,1],[6109,6155,46],[6156,6157,1],[6159,6277,118],[6278,6313,35],[6432,6434,1],[6439,6440,1],[6450,6457,7],[6458,6459,1],[6679,6680,1],[6683,6742,59],[6744,6750,1],[6752,6754,2],[6757,6764,1],[6771,6780,1],[6783,6832,49],[6833,6845,1],[6847,6862,1],[6912,6915,1],[6964,6966,2],[6967,6970,1],[6972,6978,6],[7019,7027,1],[7040,7041,1],[7074,7077,1],[7080,7081,1],[7083,7085,1],[7142,7144,2],[7145,7149,4],[7151,7153,1],[7212,7219,1],[7222,7223,1],[7376,7378,1],[7380,7392,1],[7394,7400,1],[7405,7412,7],[7416,7417,1],[7616,7679,1],[8400,8412,1],[8417,8421,4],[8422,8432,1],[11503,11505,1],[11647,11744,97],[11745,11775,1],[12330,12333,1],[12441,12442,1],[42607,42612,5],[42613,42621,1],[42654,42655,1],[42736,42737,1],[43010,43014,4],[43019,43045,26],[43046,43052,6],[43204,43205,1],[43232,43249,1],[43263,43302,39],[43303,43309,1],[43335,43345,1],[43392,43394,1],[43443,43446,3],[43447,43449,1],[43452,43453,1],[43493,43561,68],[43562,43566,1],[43569,43570,1],[43573,43574,1],[43587,43596,9],[43644,43696,52],[43698,43700,1],[43703,43704,1],[43710,43711,1],[43713,43756,43],[43757,43766,9],[44005,44008,3],[44013,64286,20273],[65024,65039,1],[65056,65071,1],[66045,66272,227],[66422,66426,1],[68097,68099,1],[68101,68102,1],[68108,68111,1],[68152,68154,1],[68159,68325,166],[68326,68900,574],[68901,68903,1],[69291,69292,1],[69373,69375,1],[69446,69456,1],[69506,69509,1],[69633,69688,55],[69689,69702,1],[69744,69747,3],[69748,69759,11],[69760,69761,1],[69811,69814,1],[69817,69818,1],[69826,69888,62],[69889,69890,1],[69927,69931,1],[69933,69940,1],[70003,70016,13],[70017,70070,53],[70071,70078,1],[70089,70092,1],[70095,70191,96],[70192,70193,1],[70196,70198,2],[70199,70206,7],[70209,70367,158],[70371,70378,1],[70400,70401,1],[70459,70460,1],[70464,70502,38],[70503,70508,1],[70512,70516,1],[70712,70719,1],[70722,70724,1],[70726,70750,24],[70835,70840,1],[70842,70847,5],[70848,70850,2],[70851,71090,239],[71091,71093,1],[71100,71101,1],[71103,71104,1],[71132,71133,1],[71219,71226,1],[71229,71231,2],[71232,71339,107],[71341,71344,3],[71345,71349,1],[71351,71453,102],[71454,71455,1],[71458,71461,1],[71463,71467,1],[71727,71735,1],[71737,71738,1],[71995,71996,1],[71998,72003,5],[72148,72151,1],[72154,72155,1],[72160,72193,33],[72194,72202,1],[72243,72248,1],[72251,72254,1],[72263,72273,10],[72274,72278,1],[72281,72283,1],[72330,72342,1],[72344,72345,1],[72752,72758,1],[72760,72765,1],[72767,72850,83],[72851,72871,1],[72874,72880,1],[72882,72883,1],[72885,72886,1],[73009,73014,1],[73018,73020,2],[73021,73023,2],[73024,73029,1],[73031,73104,73],[73105,73109,4],[73111,73459,348],[73460,73472,12],[73473,73526,53],[73527,73530,1],[73536,73538,2],[78912,78919,7],[78920,78933,1],[92912,92916,1],[92976,92982,1],[94031,94095,64],[94096,94098,1],[94180,113821,19641],[113822,118528,4706],[118529,118573,1],[118576,118598,1],[119143,119145,1],[119163,119170,1],[119173,119179,1],[119210,119213,1],[119362,119364,1],[121344,121398,1],[121403,121452,1],[121461,121476,15],[121499,121503,1],[121505,121519,1],[122880,122886,1],[122888,122904,1],[122907,122913,1],[122915,122916,1],[122918,122922,1],[123023,123184,161],[123185,123190,1],[123566,123628,62],[123629,123631,1],[124140,124143,1],[125136,125142,1],[125252,125258,1],[917760,917999,1]];static foldMn=[[921,953,32],[8126,8126,1]];static N=[[48,57,1],[178,179,1],[185,188,3],[189,190,1],[1632,1641,1],[1776,1785,1],[1984,1993,1],[2406,2415,1],[2534,2543,1],[2548,2553,1],[2662,2671,1],[2790,2799,1],[2918,2927,1],[2930,2935,1],[3046,3058,1],[3174,3183,1],[3192,3198,1],[3302,3311,1],[3416,3422,1],[3430,3448,1],[3558,3567,1],[3664,3673,1],[3792,3801,1],[3872,3891,1],[4160,4169,1],[4240,4249,1],[4969,4988,1],[5870,5872,1],[6112,6121,1],[6128,6137,1],[6160,6169,1],[6470,6479,1],[6608,6618,1],[6784,6793,1],[6800,6809,1],[6992,7001,1],[7088,7097,1],[7232,7241,1],[7248,7257,1],[8304,8308,4],[8309,8313,1],[8320,8329,1],[8528,8578,1],[8581,8585,1],[9312,9371,1],[9450,9471,1],[10102,10131,1],[11517,12295,778],[12321,12329,1],[12344,12346,1],[12690,12693,1],[12832,12841,1],[12872,12879,1],[12881,12895,1],[12928,12937,1],[12977,12991,1],[42528,42537,1],[42726,42735,1],[43056,43061,1],[43216,43225,1],[43264,43273,1],[43472,43481,1],[43504,43513,1],[43600,43609,1],[44016,44025,1],[65296,65305,1],[65799,65843,1],[65856,65912,1],[65930,65931,1],[66273,66299,1],[66336,66339,1],[66369,66378,9],[66513,66517,1],[66720,66729,1],[67672,67679,1],[67705,67711,1],[67751,67759,1],[67835,67839,1],[67862,67867,1],[68028,68029,1],[68032,68047,1],[68050,68095,1],[68160,68168,1],[68221,68222,1],[68253,68255,1],[68331,68335,1],[68440,68447,1],[68472,68479,1],[68521,68527,1],[68858,68863,1],[68912,68921,1],[69216,69246,1],[69405,69414,1],[69457,69460,1],[69573,69579,1],[69714,69743,1],[69872,69881,1],[69942,69951,1],[70096,70105,1],[70113,70132,1],[70384,70393,1],[70736,70745,1],[70864,70873,1],[71248,71257,1],[71360,71369,1],[71472,71483,1],[71904,71922,1],[72016,72025,1],[72784,72812,1],[73040,73049,1],[73120,73129,1],[73552,73561,1],[73664,73684,1],[74752,74862,1],[92768,92777,1],[92864,92873,1],[93008,93017,1],[93019,93025,1],[93824,93846,1],[119488,119507,1],[119520,119539,1],[119648,119672,1],[120782,120831,1],[123200,123209,1],[123632,123641,1],[124144,124153,1],[125127,125135,1],[125264,125273,1],[126065,126123,1],[126125,126127,1],[126129,126132,1],[126209,126253,1],[126255,126269,1],[127232,127244,1],[130032,130041,1]];static Nd=[[48,57,1],[1632,1641,1],[1776,1785,1],[1984,1993,1],[2406,2415,1],[2534,2543,1],[2662,2671,1],[2790,2799,1],[2918,2927,1],[3046,3055,1],[3174,3183,1],[3302,3311,1],[3430,3439,1],[3558,3567,1],[3664,3673,1],[3792,3801,1],[3872,3881,1],[4160,4169,1],[4240,4249,1],[6112,6121,1],[6160,6169,1],[6470,6479,1],[6608,6617,1],[6784,6793,1],[6800,6809,1],[6992,7001,1],[7088,7097,1],[7232,7241,1],[7248,7257,1],[42528,42537,1],[43216,43225,1],[43264,43273,1],[43472,43481,1],[43504,43513,1],[43600,43609,1],[44016,44025,1],[65296,65305,1],[66720,66729,1],[68912,68921,1],[69734,69743,1],[69872,69881,1],[69942,69951,1],[70096,70105,1],[70384,70393,1],[70736,70745,1],[70864,70873,1],[71248,71257,1],[71360,71369,1],[71472,71481,1],[71904,71913,1],[72016,72025,1],[72784,72793,1],[73040,73049,1],[73120,73129,1],[73552,73561,1],[92768,92777,1],[92864,92873,1],[93008,93017,1],[120782,120831,1],[123200,123209,1],[123632,123641,1],[124144,124153,1],[125264,125273,1],[130032,130041,1]];static Nl=[[5870,5872,1],[8544,8578,1],[8581,8584,1],[12295,12321,26],[12322,12329,1],[12344,12346,1],[42726,42735,1],[65856,65908,1],[66369,66378,9],[66513,66517,1],[74752,74862,1]];static No=[[178,179,1],[185,188,3],[189,190,1],[2548,2553,1],[2930,2935,1],[3056,3058,1],[3192,3198,1],[3416,3422,1],[3440,3448,1],[3882,3891,1],[4969,4988,1],[6128,6137,1],[6618,8304,1686],[8308,8313,1],[8320,8329,1],[8528,8543,1],[8585,9312,727],[9313,9371,1],[9450,9471,1],[10102,10131,1],[11517,12690,1173],[12691,12693,1],[12832,12841,1],[12872,12879,1],[12881,12895,1],[12928,12937,1],[12977,12991,1],[43056,43061,1],[65799,65843,1],[65909,65912,1],[65930,65931,1],[66273,66299,1],[66336,66339,1],[67672,67679,1],[67705,67711,1],[67751,67759,1],[67835,67839,1],[67862,67867,1],[68028,68029,1],[68032,68047,1],[68050,68095,1],[68160,68168,1],[68221,68222,1],[68253,68255,1],[68331,68335,1],[68440,68447,1],[68472,68479,1],[68521,68527,1],[68858,68863,1],[69216,69246,1],[69405,69414,1],[69457,69460,1],[69573,69579,1],[69714,69733,1],[70113,70132,1],[71482,71483,1],[71914,71922,1],[72794,72812,1],[73664,73684,1],[93019,93025,1],[93824,93846,1],[119488,119507,1],[119520,119539,1],[119648,119672,1],[125127,125135,1],[126065,126123,1],[126125,126127,1],[126129,126132,1],[126209,126253,1],[126255,126269,1],[127232,127244,1]];static P=[[33,35,1],[37,42,1],[44,47,1],[58,59,1],[63,64,1],[91,93,1],[95,123,28],[125,161,36],[167,171,4],[182,183,1],[187,191,4],[894,903,9],[1370,1375,1],[1417,1418,1],[1470,1472,2],[1475,1478,3],[1523,1524,1],[1545,1546,1],[1548,1549,1],[1563,1565,2],[1566,1567,1],[1642,1645,1],[1748,1792,44],[1793,1805,1],[2039,2041,1],[2096,2110,1],[2142,2404,262],[2405,2416,11],[2557,2678,121],[2800,3191,391],[3204,3572,368],[3663,3674,11],[3675,3844,169],[3845,3858,1],[3860,3898,38],[3899,3901,1],[3973,4048,75],[4049,4052,1],[4057,4058,1],[4170,4175,1],[4347,4960,613],[4961,4968,1],[5120,5742,622],[5787,5788,1],[5867,5869,1],[5941,5942,1],[6100,6102,1],[6104,6106,1],[6144,6154,1],[6468,6469,1],[6686,6687,1],[6816,6822,1],[6824,6829,1],[7002,7008,1],[7037,7038,1],[7164,7167,1],[7227,7231,1],[7294,7295,1],[7360,7367,1],[7379,8208,829],[8209,8231,1],[8240,8259,1],[8261,8273,1],[8275,8286,1],[8317,8318,1],[8333,8334,1],[8968,8971,1],[9001,9002,1],[10088,10101,1],[10181,10182,1],[10214,10223,1],[10627,10648,1],[10712,10715,1],[10748,10749,1],[11513,11516,1],[11518,11519,1],[11632,11776,144],[11777,11822,1],[11824,11855,1],[11858,11869,1],[12289,12291,1],[12296,12305,1],[12308,12319,1],[12336,12349,13],[12448,12539,91],[42238,42239,1],[42509,42511,1],[42611,42622,11],[42738,42743,1],[43124,43127,1],[43214,43215,1],[43256,43258,1],[43260,43310,50],[43311,43359,48],[43457,43469,1],[43486,43487,1],[43612,43615,1],[43742,43743,1],[43760,43761,1],[44011,64830,20819],[64831,65040,209],[65041,65049,1],[65072,65106,1],[65108,65121,1],[65123,65128,5],[65130,65131,1],[65281,65283,1],[65285,65290,1],[65292,65295,1],[65306,65307,1],[65311,65312,1],[65339,65341,1],[65343,65371,28],[65373,65375,2],[65376,65381,1],[65792,65794,1],[66463,66512,49],[66927,67671,744],[67871,67903,32],[68176,68184,1],[68223,68336,113],[68337,68342,1],[68409,68415,1],[68505,68508,1],[69293,69461,168],[69462,69465,1],[69510,69513,1],[69703,69709,1],[69819,69820,1],[69822,69825,1],[69952,69955,1],[70004,70005,1],[70085,70088,1],[70093,70107,14],[70109,70111,1],[70200,70205,1],[70313,70731,418],[70732,70735,1],[70746,70747,1],[70749,70854,105],[71105,71127,1],[71233,71235,1],[71264,71276,1],[71353,71484,131],[71485,71486,1],[71739,72004,265],[72005,72006,1],[72162,72255,93],[72256,72262,1],[72346,72348,1],[72350,72354,1],[72448,72457,1],[72769,72773,1],[72816,72817,1],[73463,73464,1],[73539,73551,1],[73727,74864,1137],[74865,74868,1],[77809,77810,1],[92782,92783,1],[92917,92983,66],[92984,92987,1],[92996,93847,851],[93848,93850,1],[94178,113823,19645],[121479,121483,1],[125278,125279,1]];static Pc=[[95,8255,8160],[8256,8276,20],[65075,65076,1],[65101,65103,1],[65343,65343,1]];static Pd=[[45,1418,1373],[1470,5120,3650],[6150,8208,2058],[8209,8213,1],[11799,11802,3],[11834,11835,1],[11840,11869,29],[12316,12336,20],[12448,65073,52625],[65074,65112,38],[65123,65293,170],[69293,69293,1]];static Pe=[[41,93,52],[125,3899,3774],[3901,5788,1887],[8262,8318,56],[8334,8969,635],[8971,9002,31],[10089,10101,2],[10182,10215,33],[10217,10223,2],[10628,10648,2],[10713,10715,2],[10749,11811,1062],[11813,11817,2],[11862,11868,2],[12297,12305,2],[12309,12315,2],[12318,12319,1],[64830,65048,218],[65078,65092,2],[65096,65114,18],[65116,65118,2],[65289,65341,52],[65373,65379,3]];static Pf=[[187,8217,8030],[8221,8250,29],[11779,11781,2],[11786,11789,3],[11805,11809,4]];static Pi=[[171,8216,8045],[8219,8220,1],[8223,8249,26],[11778,11780,2],[11785,11788,3],[11804,11808,4]];static Po=[[33,35,1],[37,39,1],[42,46,2],[47,58,11],[59,63,4],[64,92,28],[161,167,6],[182,183,1],[191,894,703],[903,1370,467],[1371,1375,1],[1417,1472,55],[1475,1478,3],[1523,1524,1],[1545,1546,1],[1548,1549,1],[1563,1565,2],[1566,1567,1],[1642,1645,1],[1748,1792,44],[1793,1805,1],[2039,2041,1],[2096,2110,1],[2142,2404,262],[2405,2416,11],[2557,2678,121],[2800,3191,391],[3204,3572,368],[3663,3674,11],[3675,3844,169],[3845,3858,1],[3860,3973,113],[4048,4052,1],[4057,4058,1],[4170,4175,1],[4347,4960,613],[4961,4968,1],[5742,5867,125],[5868,5869,1],[5941,5942,1],[6100,6102,1],[6104,6106,1],[6144,6149,1],[6151,6154,1],[6468,6469,1],[6686,6687,1],[6816,6822,1],[6824,6829,1],[7002,7008,1],[7037,7038,1],[7164,7167,1],[7227,7231,1],[7294,7295,1],[7360,7367,1],[7379,8214,835],[8215,8224,9],[8225,8231,1],[8240,8248,1],[8251,8254,1],[8257,8259,1],[8263,8273,1],[8275,8277,2],[8278,8286,1],[11513,11516,1],[11518,11519,1],[11632,11776,144],[11777,11782,5],[11783,11784,1],[11787,11790,3],[11791,11798,1],[11800,11801,1],[11803,11806,3],[11807,11818,11],[11819,11822,1],[11824,11833,1],[11836,11839,1],[11841,11843,2],[11844,11855,1],[11858,11860,1],[12289,12291,1],[12349,12539,190],[42238,42239,1],[42509,42511,1],[42611,42622,11],[42738,42743,1],[43124,43127,1],[43214,43215,1],[43256,43258,1],[43260,43310,50],[43311,43359,48],[43457,43469,1],[43486,43487,1],[43612,43615,1],[43742,43743,1],[43760,43761,1],[44011,65040,21029],[65041,65046,1],[65049,65072,23],[65093,65094,1],[65097,65100,1],[65104,65106,1],[65108,65111,1],[65119,65121,1],[65128,65130,2],[65131,65281,150],[65282,65283,1],[65285,65287,1],[65290,65294,2],[65295,65306,11],[65307,65311,4],[65312,65340,28],[65377,65380,3],[65381,65792,411],[65793,65794,1],[66463,66512,49],[66927,67671,744],[67871,67903,32],[68176,68184,1],[68223,68336,113],[68337,68342,1],[68409,68415,1],[68505,68508,1],[69461,69465,1],[69510,69513,1],[69703,69709,1],[69819,69820,1],[69822,69825,1],[69952,69955,1],[70004,70005,1],[70085,70088,1],[70093,70107,14],[70109,70111,1],[70200,70205,1],[70313,70731,418],[70732,70735,1],[70746,70747,1],[70749,70854,105],[71105,71127,1],[71233,71235,1],[71264,71276,1],[71353,71484,131],[71485,71486,1],[71739,72004,265],[72005,72006,1],[72162,72255,93],[72256,72262,1],[72346,72348,1],[72350,72354,1],[72448,72457,1],[72769,72773,1],[72816,72817,1],[73463,73464,1],[73539,73551,1],[73727,74864,1137],[74865,74868,1],[77809,77810,1],[92782,92783,1],[92917,92983,66],[92984,92987,1],[92996,93847,851],[93848,93850,1],[94178,113823,19645],[121479,121483,1],[125278,125279,1]];static Ps=[[40,91,51],[123,3898,3775],[3900,5787,1887],[8218,8222,4],[8261,8317,56],[8333,8968,635],[8970,9001,31],[10088,10100,2],[10181,10214,33],[10216,10222,2],[10627,10647,2],[10712,10714,2],[10748,11810,1062],[11812,11816,2],[11842,11861,19],[11863,11867,2],[12296,12304,2],[12308,12314,2],[12317,64831,52514],[65047,65077,30],[65079,65091,2],[65095,65113,18],[65115,65117,2],[65288,65339,51],[65371,65375,4],[65378,65378,1]];static S=[[36,43,7],[60,62,1],[94,96,2],[124,126,2],[162,166,1],[168,169,1],[172,174,2],[175,177,1],[180,184,4],[215,247,32],[706,709,1],[722,735,1],[741,747,1],[749,751,2],[752,767,1],[885,900,15],[901,1014,113],[1154,1421,267],[1422,1423,1],[1542,1544,1],[1547,1550,3],[1551,1758,207],[1769,1789,20],[1790,2038,248],[2046,2047,1],[2184,2546,362],[2547,2554,7],[2555,2801,246],[2928,3059,131],[3060,3066,1],[3199,3407,208],[3449,3647,198],[3841,3843,1],[3859,3861,2],[3862,3863,1],[3866,3871,1],[3892,3896,2],[4030,4037,1],[4039,4044,1],[4046,4047,1],[4053,4056,1],[4254,4255,1],[5008,5017,1],[5741,6107,366],[6464,6622,158],[6623,6655,1],[7009,7018,1],[7028,7036,1],[8125,8127,2],[8128,8129,1],[8141,8143,1],[8157,8159,1],[8173,8175,1],[8189,8190,1],[8260,8274,14],[8314,8316,1],[8330,8332,1],[8352,8384,1],[8448,8449,1],[8451,8454,1],[8456,8457,1],[8468,8470,2],[8471,8472,1],[8478,8483,1],[8485,8489,2],[8494,8506,12],[8507,8512,5],[8513,8516,1],[8522,8525,1],[8527,8586,59],[8587,8592,5],[8593,8967,1],[8972,9e3,1],[9003,9254,1],[9280,9290,1],[9372,9449,1],[9472,10087,1],[10132,10180,1],[10183,10213,1],[10224,10626,1],[10649,10711,1],[10716,10747,1],[10750,11123,1],[11126,11157,1],[11159,11263,1],[11493,11498,1],[11856,11857,1],[11904,11929,1],[11931,12019,1],[12032,12245,1],[12272,12287,1],[12292,12306,14],[12307,12320,13],[12342,12343,1],[12350,12351,1],[12443,12444,1],[12688,12689,1],[12694,12703,1],[12736,12771,1],[12783,12800,17],[12801,12830,1],[12842,12871,1],[12880,12896,16],[12897,12927,1],[12938,12976,1],[12992,13311,1],[19904,19967,1],[42128,42182,1],[42752,42774,1],[42784,42785,1],[42889,42890,1],[43048,43051,1],[43062,43065,1],[43639,43641,1],[43867,43882,15],[43883,64297,20414],[64434,64450,1],[64832,64847,1],[64975,65020,45],[65021,65023,1],[65122,65124,2],[65125,65126,1],[65129,65284,155],[65291,65308,17],[65309,65310,1],[65342,65344,2],[65372,65374,2],[65504,65510,1],[65512,65518,1],[65532,65533,1],[65847,65855,1],[65913,65929,1],[65932,65934,1],[65936,65948,1],[65952,66e3,48],[66001,66044,1],[67703,67704,1],[68296,71487,3191],[73685,73713,1],[92988,92991,1],[92997,113820,20823],[118608,118723,1],[118784,119029,1],[119040,119078,1],[119081,119140,1],[119146,119148,1],[119171,119172,1],[119180,119209,1],[119214,119274,1],[119296,119361,1],[119365,119552,187],[119553,119638,1],[120513,120539,26],[120571,120597,26],[120629,120655,26],[120687,120713,26],[120745,120771,26],[120832,121343,1],[121399,121402,1],[121453,121460,1],[121462,121475,1],[121477,121478,1],[123215,123647,432],[126124,126128,4],[126254,126704,450],[126705,126976,271],[126977,127019,1],[127024,127123,1],[127136,127150,1],[127153,127167,1],[127169,127183,1],[127185,127221,1],[127245,127405,1],[127462,127490,1],[127504,127547,1],[127552,127560,1],[127568,127569,1],[127584,127589,1],[127744,128727,1],[128732,128748,1],[128752,128764,1],[128768,128886,1],[128891,128985,1],[128992,129003,1],[129008,129024,16],[129025,129035,1],[129040,129095,1],[129104,129113,1],[129120,129159,1],[129168,129197,1],[129200,129201,1],[129280,129619,1],[129632,129645,1],[129648,129660,1],[129664,129672,1],[129680,129725,1],[129727,129733,1],[129742,129755,1],[129760,129768,1],[129776,129784,1],[129792,129938,1],[129940,129994,1]];static Sc=[[36,162,126],[163,165,1],[1423,1547,124],[2046,2047,1],[2546,2547,1],[2555,2801,246],[3065,3647,582],[6107,8352,2245],[8353,8384,1],[43064,65020,21956],[65129,65284,155],[65504,65505,1],[65509,65510,1],[73693,73696,1],[123647,126128,2481]];static Sk=[[94,96,2],[168,175,7],[180,184,4],[706,709,1],[722,735,1],[741,747,1],[749,751,2],[752,767,1],[885,900,15],[901,2184,1283],[8125,8127,2],[8128,8129,1],[8141,8143,1],[8157,8159,1],[8173,8175,1],[8189,8190,1],[12443,12444,1],[42752,42774,1],[42784,42785,1],[42889,42890,1],[43867,43882,15],[43883,64434,20551],[64435,64450,1],[65342,65344,2],[65507,127995,62488],[127996,127999,1]];static Sm=[[43,60,17],[61,62,1],[124,126,2],[172,177,5],[215,247,32],[1014,1542,528],[1543,1544,1],[8260,8274,14],[8314,8316,1],[8330,8332,1],[8472,8512,40],[8513,8516,1],[8523,8592,69],[8593,8596,1],[8602,8603,1],[8608,8614,3],[8622,8654,32],[8655,8658,3],[8660,8692,32],[8693,8959,1],[8992,8993,1],[9084,9115,31],[9116,9139,1],[9180,9185,1],[9655,9665,10],[9720,9727,1],[9839,10176,337],[10177,10180,1],[10183,10213,1],[10224,10239,1],[10496,10626,1],[10649,10711,1],[10716,10747,1],[10750,11007,1],[11056,11076,1],[11079,11084,1],[64297,65122,825],[65124,65126,1],[65291,65308,17],[65309,65310,1],[65372,65374,2],[65506,65513,7],[65514,65516,1],[120513,120539,26],[120571,120597,26],[120629,120655,26],[120687,120713,26],[120745,120771,26],[126704,126705,1]];static So=[[166,169,3],[174,176,2],[1154,1421,267],[1422,1550,128],[1551,1758,207],[1769,1789,20],[1790,2038,248],[2554,2928,374],[3059,3064,1],[3066,3199,133],[3407,3449,42],[3841,3843,1],[3859,3861,2],[3862,3863,1],[3866,3871,1],[3892,3896,2],[4030,4037,1],[4039,4044,1],[4046,4047,1],[4053,4056,1],[4254,4255,1],[5008,5017,1],[5741,6464,723],[6622,6655,1],[7009,7018,1],[7028,7036,1],[8448,8449,1],[8451,8454,1],[8456,8457,1],[8468,8470,2],[8471,8478,7],[8479,8483,1],[8485,8489,2],[8494,8506,12],[8507,8522,15],[8524,8525,1],[8527,8586,59],[8587,8597,10],[8598,8601,1],[8604,8607,1],[8609,8610,1],[8612,8613,1],[8615,8621,1],[8623,8653,1],[8656,8657,1],[8659,8661,2],[8662,8691,1],[8960,8967,1],[8972,8991,1],[8994,9e3,1],[9003,9083,1],[9085,9114,1],[9140,9179,1],[9186,9254,1],[9280,9290,1],[9372,9449,1],[9472,9654,1],[9656,9664,1],[9666,9719,1],[9728,9838,1],[9840,10087,1],[10132,10175,1],[10240,10495,1],[11008,11055,1],[11077,11078,1],[11085,11123,1],[11126,11157,1],[11159,11263,1],[11493,11498,1],[11856,11857,1],[11904,11929,1],[11931,12019,1],[12032,12245,1],[12272,12287,1],[12292,12306,14],[12307,12320,13],[12342,12343,1],[12350,12351,1],[12688,12689,1],[12694,12703,1],[12736,12771,1],[12783,12800,17],[12801,12830,1],[12842,12871,1],[12880,12896,16],[12897,12927,1],[12938,12976,1],[12992,13311,1],[19904,19967,1],[42128,42182,1],[43048,43051,1],[43062,43063,1],[43065,43639,574],[43640,43641,1],[64832,64847,1],[64975,65021,46],[65022,65023,1],[65508,65512,4],[65517,65518,1],[65532,65533,1],[65847,65855,1],[65913,65929,1],[65932,65934,1],[65936,65948,1],[65952,66e3,48],[66001,66044,1],[67703,67704,1],[68296,71487,3191],[73685,73692,1],[73697,73713,1],[92988,92991,1],[92997,113820,20823],[118608,118723,1],[118784,119029,1],[119040,119078,1],[119081,119140,1],[119146,119148,1],[119171,119172,1],[119180,119209,1],[119214,119274,1],[119296,119361,1],[119365,119552,187],[119553,119638,1],[120832,121343,1],[121399,121402,1],[121453,121460,1],[121462,121475,1],[121477,121478,1],[123215,126124,2909],[126254,126976,722],[126977,127019,1],[127024,127123,1],[127136,127150,1],[127153,127167,1],[127169,127183,1],[127185,127221,1],[127245,127405,1],[127462,127490,1],[127504,127547,1],[127552,127560,1],[127568,127569,1],[127584,127589,1],[127744,127994,1],[128e3,128727,1],[128732,128748,1],[128752,128764,1],[128768,128886,1],[128891,128985,1],[128992,129003,1],[129008,129024,16],[129025,129035,1],[129040,129095,1],[129104,129113,1],[129120,129159,1],[129168,129197,1],[129200,129201,1],[129280,129619,1],[129632,129645,1],[129648,129660,1],[129664,129672,1],[129680,129725,1],[129727,129733,1],[129742,129755,1],[129760,129768,1],[129776,129784,1],[129792,129938,1],[129940,129994,1]];static Z=[[32,160,128],[5760,8192,2432],[8193,8202,1],[8232,8233,1],[8239,8287,48],[12288,12288,1]];static Zl=[[8232,8232,1]];static Zp=[[8233,8233,1]];static Zs=[[32,160,128],[5760,8192,2432],[8193,8202,1],[8239,8287,48],[12288,12288,1]];static Adlam=[[125184,125259,1],[125264,125273,1],[125278,125279,1]];static Ahom=[[71424,71450,1],[71453,71467,1],[71472,71494,1]];static Anatolian_Hieroglyphs=[[82944,83526,1]];static Arabic=[[1536,1540,1],[1542,1547,1],[1549,1562,1],[1564,1566,1],[1568,1599,1],[1601,1610,1],[1622,1647,1],[1649,1756,1],[1758,1791,1],[1872,1919,1],[2160,2190,1],[2192,2193,1],[2200,2273,1],[2275,2303,1],[64336,64450,1],[64467,64829,1],[64832,64911,1],[64914,64967,1],[64975,65008,33],[65009,65023,1],[65136,65140,1],[65142,65276,1],[69216,69246,1],[69373,69375,1],[126464,126467,1],[126469,126495,1],[126497,126498,1],[126500,126503,3],[126505,126514,1],[126516,126519,1],[126521,126523,2],[126530,126535,5],[126537,126541,2],[126542,126543,1],[126545,126546,1],[126548,126551,3],[126553,126561,2],[126562,126564,2],[126567,126570,1],[126572,126578,1],[126580,126583,1],[126585,126588,1],[126590,126592,2],[126593,126601,1],[126603,126619,1],[126625,126627,1],[126629,126633,1],[126635,126651,1],[126704,126705,1]];static Armenian=[[1329,1366,1],[1369,1418,1],[1421,1423,1],[64275,64279,1]];static Avestan=[[68352,68405,1],[68409,68415,1]];static Balinese=[[6912,6988,1],[6992,7038,1]];static Bamum=[[42656,42743,1],[92160,92728,1]];static Bassa_Vah=[[92880,92909,1],[92912,92917,1]];static Batak=[[7104,7155,1],[7164,7167,1]];static Bengali=[[2432,2435,1],[2437,2444,1],[2447,2448,1],[2451,2472,1],[2474,2480,1],[2482,2486,4],[2487,2489,1],[2492,2500,1],[2503,2504,1],[2507,2510,1],[2519,2524,5],[2525,2527,2],[2528,2531,1],[2534,2558,1]];static Bhaiksuki=[[72704,72712,1],[72714,72758,1],[72760,72773,1],[72784,72812,1]];static Bopomofo=[[746,747,1],[12549,12591,1],[12704,12735,1]];static Brahmi=[[69632,69709,1],[69714,69749,1],[69759,69759,1]];static Braille=[[10240,10495,1]];static Buginese=[[6656,6683,1],[6686,6687,1]];static Buhid=[[5952,5971,1]];static Canadian_Aboriginal=[[5120,5759,1],[6320,6389,1],[72368,72383,1]];static Carian=[[66208,66256,1]];static Caucasian_Albanian=[[66864,66915,1],[66927,66927,1]];static Chakma=[[69888,69940,1],[69942,69959,1]];static Cham=[[43520,43574,1],[43584,43597,1],[43600,43609,1],[43612,43615,1]];static Cherokee=[[5024,5109,1],[5112,5117,1],[43888,43967,1]];static Chorasmian=[[69552,69579,1]];static Common=[[0,64,1],[91,96,1],[123,169,1],[171,185,1],[187,191,1],[215,247,32],[697,735,1],[741,745,1],[748,767,1],[884,894,10],[901,903,2],[1541,1548,7],[1563,1567,4],[1600,1757,157],[2274,2404,130],[2405,3647,1242],[4053,4056,1],[4347,5867,1520],[5868,5869,1],[5941,5942,1],[6146,6147,1],[6149,7379,1230],[7393,7401,8],[7402,7404,1],[7406,7411,1],[7413,7415,1],[7418,8192,774],[8193,8203,1],[8206,8292,1],[8294,8304,1],[8308,8318,1],[8320,8334,1],[8352,8384,1],[8448,8485,1],[8487,8489,1],[8492,8497,1],[8499,8525,1],[8527,8543,1],[8585,8587,1],[8592,9254,1],[9280,9290,1],[9312,10239,1],[10496,11123,1],[11126,11157,1],[11159,11263,1],[11776,11869,1],[12272,12292,1],[12294,12296,2],[12297,12320,1],[12336,12343,1],[12348,12351,1],[12443,12444,1],[12448,12539,91],[12540,12688,148],[12689,12703,1],[12736,12771,1],[12783,12832,49],[12833,12895,1],[12927,13007,1],[13055,13144,89],[13145,13311,1],[19904,19967,1],[42752,42785,1],[42888,42890,1],[43056,43065,1],[43310,43471,161],[43867,43882,15],[43883,64830,20947],[64831,65040,209],[65041,65049,1],[65072,65106,1],[65108,65126,1],[65128,65131,1],[65279,65281,2],[65282,65312,1],[65339,65344,1],[65371,65381,1],[65392,65438,46],[65439,65504,65],[65505,65510,1],[65512,65518,1],[65529,65533,1],[65792,65794,1],[65799,65843,1],[65847,65855,1],[65936,65948,1],[66e3,66044,1],[66273,66299,1],[113824,113827,1],[118608,118723,1],[118784,119029,1],[119040,119078,1],[119081,119142,1],[119146,119162,1],[119171,119172,1],[119180,119209,1],[119214,119274,1],[119488,119507,1],[119520,119539,1],[119552,119638,1],[119648,119672,1],[119808,119892,1],[119894,119964,1],[119966,119967,1],[119970,119973,3],[119974,119977,3],[119978,119980,1],[119982,119993,1],[119995,119997,2],[119998,120003,1],[120005,120069,1],[120071,120074,1],[120077,120084,1],[120086,120092,1],[120094,120121,1],[120123,120126,1],[120128,120132,1],[120134,120138,4],[120139,120144,1],[120146,120485,1],[120488,120779,1],[120782,120831,1],[126065,126132,1],[126209,126269,1],[126976,127019,1],[127024,127123,1],[127136,127150,1],[127153,127167,1],[127169,127183,1],[127185,127221,1],[127232,127405,1],[127462,127487,1],[127489,127490,1],[127504,127547,1],[127552,127560,1],[127568,127569,1],[127584,127589,1],[127744,128727,1],[128732,128748,1],[128752,128764,1],[128768,128886,1],[128891,128985,1],[128992,129003,1],[129008,129024,16],[129025,129035,1],[129040,129095,1],[129104,129113,1],[129120,129159,1],[129168,129197,1],[129200,129201,1],[129280,129619,1],[129632,129645,1],[129648,129660,1],[129664,129672,1],[129680,129725,1],[129727,129733,1],[129742,129755,1],[129760,129768,1],[129776,129784,1],[129792,129938,1],[129940,129994,1],[130032,130041,1],[917505,917536,31],[917537,917631,1]];static foldCommon=[[924,956,32]];static Coptic=[[994,1007,1],[11392,11507,1],[11513,11519,1]];static Cuneiform=[[73728,74649,1],[74752,74862,1],[74864,74868,1],[74880,75075,1]];static Cypriot=[[67584,67589,1],[67592,67594,2],[67595,67637,1],[67639,67640,1],[67644,67647,3]];static Cypro_Minoan=[[77712,77810,1]];static Cyrillic=[[1024,1156,1],[1159,1327,1],[7296,7304,1],[7467,7544,77],[11744,11775,1],[42560,42655,1],[65070,65071,1],[122928,122989,1],[123023,123023,1]];static Deseret=[[66560,66639,1]];static Devanagari=[[2304,2384,1],[2389,2403,1],[2406,2431,1],[43232,43263,1],[72448,72457,1]];static Dives_Akuru=[[71936,71942,1],[71945,71948,3],[71949,71955,1],[71957,71958,1],[71960,71989,1],[71991,71992,1],[71995,72006,1],[72016,72025,1]];static Dogra=[[71680,71739,1]];static Duployan=[[113664,113770,1],[113776,113788,1],[113792,113800,1],[113808,113817,1],[113820,113823,1]];static Egyptian_Hieroglyphs=[[77824,78933,1]];static Elbasan=[[66816,66855,1]];static Elymaic=[[69600,69622,1]];static Ethiopic=[[4608,4680,1],[4682,4685,1],[4688,4694,1],[4696,4698,2],[4699,4701,1],[4704,4744,1],[4746,4749,1],[4752,4784,1],[4786,4789,1],[4792,4798,1],[4800,4802,2],[4803,4805,1],[4808,4822,1],[4824,4880,1],[4882,4885,1],[4888,4954,1],[4957,4988,1],[4992,5017,1],[11648,11670,1],[11680,11686,1],[11688,11694,1],[11696,11702,1],[11704,11710,1],[11712,11718,1],[11720,11726,1],[11728,11734,1],[11736,11742,1],[43777,43782,1],[43785,43790,1],[43793,43798,1],[43808,43814,1],[43816,43822,1],[124896,124902,1],[124904,124907,1],[124909,124910,1],[124912,124926,1]];static Georgian=[[4256,4293,1],[4295,4301,6],[4304,4346,1],[4348,4351,1],[7312,7354,1],[7357,7359,1],[11520,11557,1],[11559,11565,6]];static Glagolitic=[[11264,11359,1],[122880,122886,1],[122888,122904,1],[122907,122913,1],[122915,122916,1],[122918,122922,1]];static Gothic=[[66352,66378,1]];static Grantha=[[70400,70403,1],[70405,70412,1],[70415,70416,1],[70419,70440,1],[70442,70448,1],[70450,70451,1],[70453,70457,1],[70460,70468,1],[70471,70472,1],[70475,70477,1],[70480,70487,7],[70493,70499,1],[70502,70508,1],[70512,70516,1]];static Greek=[[880,883,1],[885,887,1],[890,893,1],[895,900,5],[902,904,2],[905,906,1],[908,910,2],[911,929,1],[931,993,1],[1008,1023,1],[7462,7466,1],[7517,7521,1],[7526,7530,1],[7615,7936,321],[7937,7957,1],[7960,7965,1],[7968,8005,1],[8008,8013,1],[8016,8023,1],[8025,8031,2],[8032,8061,1],[8064,8116,1],[8118,8132,1],[8134,8147,1],[8150,8155,1],[8157,8175,1],[8178,8180,1],[8182,8190,1],[8486,43877,35391],[65856,65934,1],[65952,119296,53344],[119297,119365,1]];static foldGreek=[[181,837,656]];static Gujarati=[[2689,2691,1],[2693,2701,1],[2703,2705,1],[2707,2728,1],[2730,2736,1],[2738,2739,1],[2741,2745,1],[2748,2757,1],[2759,2761,1],[2763,2765,1],[2768,2784,16],[2785,2787,1],[2790,2801,1],[2809,2815,1]];static Gunjala_Gondi=[[73056,73061,1],[73063,73064,1],[73066,73102,1],[73104,73105,1],[73107,73112,1],[73120,73129,1]];static Gurmukhi=[[2561,2563,1],[2565,2570,1],[2575,2576,1],[2579,2600,1],[2602,2608,1],[2610,2611,1],[2613,2614,1],[2616,2617,1],[2620,2622,2],[2623,2626,1],[2631,2632,1],[2635,2637,1],[2641,2649,8],[2650,2652,1],[2654,2662,8],[2663,2678,1]];static Han=[[11904,11929,1],[11931,12019,1],[12032,12245,1],[12293,12295,2],[12321,12329,1],[12344,12347,1],[13312,19903,1],[19968,40959,1],[63744,64109,1],[64112,64217,1],[94178,94179,1],[94192,94193,1],[131072,173791,1],[173824,177977,1],[177984,178205,1],[178208,183969,1],[183984,191456,1],[194560,195101,1],[196608,201546,1],[201552,205743,1]];static Hangul=[[4352,4607,1],[12334,12335,1],[12593,12686,1],[12800,12830,1],[12896,12926,1],[43360,43388,1],[44032,55203,1],[55216,55238,1],[55243,55291,1],[65440,65470,1],[65474,65479,1],[65482,65487,1],[65490,65495,1],[65498,65500,1]];static Hanifi_Rohingya=[[68864,68903,1],[68912,68921,1]];static Hanunoo=[[5920,5940,1]];static Hatran=[[67808,67826,1],[67828,67829,1],[67835,67839,1]];static Hebrew=[[1425,1479,1],[1488,1514,1],[1519,1524,1],[64285,64310,1],[64312,64316,1],[64318,64320,2],[64321,64323,2],[64324,64326,2],[64327,64335,1]];static Hiragana=[[12353,12438,1],[12445,12447,1],[110593,110879,1],[110898,110928,30],[110929,110930,1],[127488,127488,1]];static Imperial_Aramaic=[[67648,67669,1],[67671,67679,1]];static Inherited=[[768,879,1],[1157,1158,1],[1611,1621,1],[1648,2385,737],[2386,2388,1],[6832,6862,1],[7376,7378,1],[7380,7392,1],[7394,7400,1],[7405,7412,7],[7416,7417,1],[7616,7679,1],[8204,8205,1],[8400,8432,1],[12330,12333,1],[12441,12442,1],[65024,65039,1],[65056,65069,1],[66045,66272,227],[70459,118528,48069],[118529,118573,1],[118576,118598,1],[119143,119145,1],[119163,119170,1],[119173,119179,1],[119210,119213,1],[917760,917999,1]];static foldInherited=[[921,953,32],[8126,8126,1]];static Inscriptional_Pahlavi=[[68448,68466,1],[68472,68479,1]];static Inscriptional_Parthian=[[68416,68437,1],[68440,68447,1]];static Javanese=[[43392,43469,1],[43472,43481,1],[43486,43487,1]];static Kaithi=[[69760,69826,1],[69837,69837,1]];static Kannada=[[3200,3212,1],[3214,3216,1],[3218,3240,1],[3242,3251,1],[3253,3257,1],[3260,3268,1],[3270,3272,1],[3274,3277,1],[3285,3286,1],[3293,3294,1],[3296,3299,1],[3302,3311,1],[3313,3315,1]];static Katakana=[[12449,12538,1],[12541,12543,1],[12784,12799,1],[13008,13054,1],[13056,13143,1],[65382,65391,1],[65393,65437,1],[110576,110579,1],[110581,110587,1],[110589,110590,1],[110592,110880,288],[110881,110882,1],[110933,110948,15],[110949,110951,1]];static Kawi=[[73472,73488,1],[73490,73530,1],[73534,73561,1]];static Kayah_Li=[[43264,43309,1],[43311,43311,1]];static Kharoshthi=[[68096,68099,1],[68101,68102,1],[68108,68115,1],[68117,68119,1],[68121,68149,1],[68152,68154,1],[68159,68168,1],[68176,68184,1]];static Khitan_Small_Script=[[94180,101120,6940],[101121,101589,1]];static Khmer=[[6016,6109,1],[6112,6121,1],[6128,6137,1],[6624,6655,1]];static Khojki=[[70144,70161,1],[70163,70209,1]];static Khudawadi=[[70320,70378,1],[70384,70393,1]];static Lao=[[3713,3714,1],[3716,3718,2],[3719,3722,1],[3724,3747,1],[3749,3751,2],[3752,3773,1],[3776,3780,1],[3782,3784,2],[3785,3790,1],[3792,3801,1],[3804,3807,1]];static Latin=[[65,90,1],[97,122,1],[170,186,16],[192,214,1],[216,246,1],[248,696,1],[736,740,1],[7424,7461,1],[7468,7516,1],[7522,7525,1],[7531,7543,1],[7545,7614,1],[7680,7935,1],[8305,8319,14],[8336,8348,1],[8490,8491,1],[8498,8526,28],[8544,8584,1],[11360,11391,1],[42786,42887,1],[42891,42954,1],[42960,42961,1],[42963,42965,2],[42966,42969,1],[42994,43007,1],[43824,43866,1],[43868,43876,1],[43878,43881,1],[64256,64262,1],[65313,65338,1],[65345,65370,1],[67456,67461,1],[67463,67504,1],[67506,67514,1],[122624,122654,1],[122661,122666,1]];static Lepcha=[[7168,7223,1],[7227,7241,1],[7245,7247,1]];static Limbu=[[6400,6430,1],[6432,6443,1],[6448,6459,1],[6464,6468,4],[6469,6479,1]];static Linear_A=[[67072,67382,1],[67392,67413,1],[67424,67431,1]];static Linear_B=[[65536,65547,1],[65549,65574,1],[65576,65594,1],[65596,65597,1],[65599,65613,1],[65616,65629,1],[65664,65786,1]];static Lisu=[[42192,42239,1],[73648,73648,1]];static Lycian=[[66176,66204,1]];static Lydian=[[67872,67897,1],[67903,67903,1]];static Mahajani=[[69968,70006,1]];static Makasar=[[73440,73464,1]];static Malayalam=[[3328,3340,1],[3342,3344,1],[3346,3396,1],[3398,3400,1],[3402,3407,1],[3412,3427,1],[3430,3455,1]];static Mandaic=[[2112,2139,1],[2142,2142,1]];static Manichaean=[[68288,68326,1],[68331,68342,1]];static Marchen=[[72816,72847,1],[72850,72871,1],[72873,72886,1]];static Masaram_Gondi=[[72960,72966,1],[72968,72969,1],[72971,73014,1],[73018,73020,2],[73021,73023,2],[73024,73031,1],[73040,73049,1]];static Medefaidrin=[[93760,93850,1]];static Meetei_Mayek=[[43744,43766,1],[43968,44013,1],[44016,44025,1]];static Mende_Kikakui=[[124928,125124,1],[125127,125142,1]];static Meroitic_Cursive=[[68e3,68023,1],[68028,68047,1],[68050,68095,1]];static Meroitic_Hieroglyphs=[[67968,67999,1]];static Miao=[[93952,94026,1],[94031,94087,1],[94095,94111,1]];static Modi=[[71168,71236,1],[71248,71257,1]];static Mongolian=[[6144,6145,1],[6148,6150,2],[6151,6169,1],[6176,6264,1],[6272,6314,1],[71264,71276,1]];static Mro=[[92736,92766,1],[92768,92777,1],[92782,92783,1]];static Multani=[[70272,70278,1],[70280,70282,2],[70283,70285,1],[70287,70301,1],[70303,70313,1]];static Myanmar=[[4096,4255,1],[43488,43518,1],[43616,43647,1]];static Nabataean=[[67712,67742,1],[67751,67759,1]];static Nag_Mundari=[[124112,124153,1]];static Nandinagari=[[72096,72103,1],[72106,72151,1],[72154,72164,1]];static New_Tai_Lue=[[6528,6571,1],[6576,6601,1],[6608,6618,1],[6622,6623,1]];static Newa=[[70656,70747,1],[70749,70753,1]];static Nko=[[1984,2042,1],[2045,2047,1]];static Nushu=[[94177,110960,16783],[110961,111355,1]];static Nyiakeng_Puachue_Hmong=[[123136,123180,1],[123184,123197,1],[123200,123209,1],[123214,123215,1]];static Ogham=[[5760,5788,1]];static Ol_Chiki=[[7248,7295,1]];static Old_Hungarian=[[68736,68786,1],[68800,68850,1],[68858,68863,1]];static Old_Italic=[[66304,66339,1],[66349,66351,1]];static Old_North_Arabian=[[68224,68255,1]];static Old_Permic=[[66384,66426,1]];static Old_Persian=[[66464,66499,1],[66504,66517,1]];static Old_Sogdian=[[69376,69415,1]];static Old_South_Arabian=[[68192,68223,1]];static Old_Turkic=[[68608,68680,1]];static Old_Uyghur=[[69488,69513,1]];static Oriya=[[2817,2819,1],[2821,2828,1],[2831,2832,1],[2835,2856,1],[2858,2864,1],[2866,2867,1],[2869,2873,1],[2876,2884,1],[2887,2888,1],[2891,2893,1],[2901,2903,1],[2908,2909,1],[2911,2915,1],[2918,2935,1]];static Osage=[[66736,66771,1],[66776,66811,1]];static Osmanya=[[66688,66717,1],[66720,66729,1]];static Pahawh_Hmong=[[92928,92997,1],[93008,93017,1],[93019,93025,1],[93027,93047,1],[93053,93071,1]];static Palmyrene=[[67680,67711,1]];static Pau_Cin_Hau=[[72384,72440,1]];static Phags_Pa=[[43072,43127,1]];static Phoenician=[[67840,67867,1],[67871,67871,1]];static Psalter_Pahlavi=[[68480,68497,1],[68505,68508,1],[68521,68527,1]];static Rejang=[[43312,43347,1],[43359,43359,1]];static Runic=[[5792,5866,1],[5870,5880,1]];static Samaritan=[[2048,2093,1],[2096,2110,1]];static Saurashtra=[[43136,43205,1],[43214,43225,1]];static Sharada=[[70016,70111,1]];static Shavian=[[66640,66687,1]];static Siddham=[[71040,71093,1],[71096,71133,1]];static SignWriting=[[120832,121483,1],[121499,121503,1],[121505,121519,1]];static Sinhala=[[3457,3459,1],[3461,3478,1],[3482,3505,1],[3507,3515,1],[3517,3520,3],[3521,3526,1],[3530,3535,5],[3536,3540,1],[3542,3544,2],[3545,3551,1],[3558,3567,1],[3570,3572,1],[70113,70132,1]];static Sogdian=[[69424,69465,1]];static Sora_Sompeng=[[69840,69864,1],[69872,69881,1]];static Soyombo=[[72272,72354,1]];static Sundanese=[[7040,7103,1],[7360,7367,1]];static Syloti_Nagri=[[43008,43052,1]];static Syriac=[[1792,1805,1],[1807,1866,1],[1869,1871,1],[2144,2154,1]];static Tagalog=[[5888,5909,1],[5919,5919,1]];static Tagbanwa=[[5984,5996,1],[5998,6e3,1],[6002,6003,1]];static Tai_Le=[[6480,6509,1],[6512,6516,1]];static Tai_Tham=[[6688,6750,1],[6752,6780,1],[6783,6793,1],[6800,6809,1],[6816,6829,1]];static Tai_Viet=[[43648,43714,1],[43739,43743,1]];static Takri=[[71296,71353,1],[71360,71369,1]];static Tamil=[[2946,2947,1],[2949,2954,1],[2958,2960,1],[2962,2965,1],[2969,2970,1],[2972,2974,2],[2975,2979,4],[2980,2984,4],[2985,2986,1],[2990,3001,1],[3006,3010,1],[3014,3016,1],[3018,3021,1],[3024,3031,7],[3046,3066,1],[73664,73713,1],[73727,73727,1]];static Tangsa=[[92784,92862,1],[92864,92873,1]];static Tangut=[[94176,94208,32],[94209,100343,1],[100352,101119,1],[101632,101640,1]];static Telugu=[[3072,3084,1],[3086,3088,1],[3090,3112,1],[3114,3129,1],[3132,3140,1],[3142,3144,1],[3146,3149,1],[3157,3158,1],[3160,3162,1],[3165,3168,3],[3169,3171,1],[3174,3183,1],[3191,3199,1]];static Thaana=[[1920,1969,1]];static Thai=[[3585,3642,1],[3648,3675,1]];static Tibetan=[[3840,3911,1],[3913,3948,1],[3953,3991,1],[3993,4028,1],[4030,4044,1],[4046,4052,1],[4057,4058,1]];static Tifinagh=[[11568,11623,1],[11631,11632,1],[11647,11647,1]];static Tirhuta=[[70784,70855,1],[70864,70873,1]];static Toto=[[123536,123566,1]];static Ugaritic=[[66432,66461,1],[66463,66463,1]];static Vai=[[42240,42539,1]];static Vithkuqi=[[66928,66938,1],[66940,66954,1],[66956,66962,1],[66964,66965,1],[66967,66977,1],[66979,66993,1],[66995,67001,1],[67003,67004,1]];static Wancho=[[123584,123641,1],[123647,123647,1]];static Warang_Citi=[[71840,71922,1],[71935,71935,1]];static Yezidi=[[69248,69289,1],[69291,69293,1],[69296,69297,1]];static Yi=[[40960,42124,1],[42128,42182,1]];static Zanabazar_Square=[[72192,72263,1]];static CATEGORIES=new Map([["C",Dd.C],["Cc",Dd.Cc],["Cf",Dd.Cf],["Co",Dd.Co],["Cs",Dd.Cs],["L",Dd.L],["Ll",Dd.Ll],["Lm",Dd.Lm],["Lo",Dd.Lo],["Lt",Dd.Lt],["Lu",Dd.Lu],["M",Dd.M],["Mc",Dd.Mc],["Me",Dd.Me],["Mn",Dd.Mn],["N",Dd.N],["Nd",Dd.Nd],["Nl",Dd.Nl],["No",Dd.No],["P",Dd.P],["Pc",Dd.Pc],["Pd",Dd.Pd],["Pe",Dd.Pe],["Pf",Dd.Pf],["Pi",Dd.Pi],["Po",Dd.Po],["Ps",Dd.Ps],["S",Dd.S],["Sc",Dd.Sc],["Sk",Dd.Sk],["Sm",Dd.Sm],["So",Dd.So],["Z",Dd.Z],["Zl",Dd.Zl],["Zp",Dd.Zp],["Zs",Dd.Zs]]);static SCRIPTS=new Map([["Adlam",Dd.Adlam],["Ahom",Dd.Ahom],["Anatolian_Hieroglyphs",Dd.Anatolian_Hieroglyphs],["Arabic",Dd.Arabic],["Armenian",Dd.Armenian],["Avestan",Dd.Avestan],["Balinese",Dd.Balinese],["Bamum",Dd.Bamum],["Bassa_Vah",Dd.Bassa_Vah],["Batak",Dd.Batak],["Bengali",Dd.Bengali],["Bhaiksuki",Dd.Bhaiksuki],["Bopomofo",Dd.Bopomofo],["Brahmi",Dd.Brahmi],["Braille",Dd.Braille],["Buginese",Dd.Buginese],["Buhid",Dd.Buhid],["Canadian_Aboriginal",Dd.Canadian_Aboriginal],["Carian",Dd.Carian],["Caucasian_Albanian",Dd.Caucasian_Albanian],["Chakma",Dd.Chakma],["Cham",Dd.Cham],["Cherokee",Dd.Cherokee],["Chorasmian",Dd.Chorasmian],["Common",Dd.Common],["Coptic",Dd.Coptic],["Cuneiform",Dd.Cuneiform],["Cypriot",Dd.Cypriot],["Cypro_Minoan",Dd.Cypro_Minoan],["Cyrillic",Dd.Cyrillic],["Deseret",Dd.Deseret],["Devanagari",Dd.Devanagari],["Dives_Akuru",Dd.Dives_Akuru],["Dogra",Dd.Dogra],["Duployan",Dd.Duployan],["Egyptian_Hieroglyphs",Dd.Egyptian_Hieroglyphs],["Elbasan",Dd.Elbasan],["Elymaic",Dd.Elymaic],["Ethiopic",Dd.Ethiopic],["Georgian",Dd.Georgian],["Glagolitic",Dd.Glagolitic],["Gothic",Dd.Gothic],["Grantha",Dd.Grantha],["Greek",Dd.Greek],["Gujarati",Dd.Gujarati],["Gunjala_Gondi",Dd.Gunjala_Gondi],["Gurmukhi",Dd.Gurmukhi],["Han",Dd.Han],["Hangul",Dd.Hangul],["Hanifi_Rohingya",Dd.Hanifi_Rohingya],["Hanunoo",Dd.Hanunoo],["Hatran",Dd.Hatran],["Hebrew",Dd.Hebrew],["Hiragana",Dd.Hiragana],["Imperial_Aramaic",Dd.Imperial_Aramaic],["Inherited",Dd.Inherited],["Inscriptional_Pahlavi",Dd.Inscriptional_Pahlavi],["Inscriptional_Parthian",Dd.Inscriptional_Parthian],["Javanese",Dd.Javanese],["Kaithi",Dd.Kaithi],["Kannada",Dd.Kannada],["Katakana",Dd.Katakana],["Kawi",Dd.Kawi],["Kayah_Li",Dd.Kayah_Li],["Kharoshthi",Dd.Kharoshthi],["Khitan_Small_Script",Dd.Khitan_Small_Script],["Khmer",Dd.Khmer],["Khojki",Dd.Khojki],["Khudawadi",Dd.Khudawadi],["Lao",Dd.Lao],["Latin",Dd.Latin],["Lepcha",Dd.Lepcha],["Limbu",Dd.Limbu],["Linear_A",Dd.Linear_A],["Linear_B",Dd.Linear_B],["Lisu",Dd.Lisu],["Lycian",Dd.Lycian],["Lydian",Dd.Lydian],["Mahajani",Dd.Mahajani],["Makasar",Dd.Makasar],["Malayalam",Dd.Malayalam],["Mandaic",Dd.Mandaic],["Manichaean",Dd.Manichaean],["Marchen",Dd.Marchen],["Masaram_Gondi",Dd.Masaram_Gondi],["Medefaidrin",Dd.Medefaidrin],["Meetei_Mayek",Dd.Meetei_Mayek],["Mende_Kikakui",Dd.Mende_Kikakui],["Meroitic_Cursive",Dd.Meroitic_Cursive],["Meroitic_Hieroglyphs",Dd.Meroitic_Hieroglyphs],["Miao",Dd.Miao],["Modi",Dd.Modi],["Mongolian",Dd.Mongolian],["Mro",Dd.Mro],["Multani",Dd.Multani],["Myanmar",Dd.Myanmar],["Nabataean",Dd.Nabataean],["Nag_Mundari",Dd.Nag_Mundari],["Nandinagari",Dd.Nandinagari],["New_Tai_Lue",Dd.New_Tai_Lue],["Newa",Dd.Newa],["Nko",Dd.Nko],["Nushu",Dd.Nushu],["Nyiakeng_Puachue_Hmong",Dd.Nyiakeng_Puachue_Hmong],["Ogham",Dd.Ogham],["Ol_Chiki",Dd.Ol_Chiki],["Old_Hungarian",Dd.Old_Hungarian],["Old_Italic",Dd.Old_Italic],["Old_North_Arabian",Dd.Old_North_Arabian],["Old_Permic",Dd.Old_Permic],["Old_Persian",Dd.Old_Persian],["Old_Sogdian",Dd.Old_Sogdian],["Old_South_Arabian",Dd.Old_South_Arabian],["Old_Turkic",Dd.Old_Turkic],["Old_Uyghur",Dd.Old_Uyghur],["Oriya",Dd.Oriya],["Osage",Dd.Osage],["Osmanya",Dd.Osmanya],["Pahawh_Hmong",Dd.Pahawh_Hmong],["Palmyrene",Dd.Palmyrene],["Pau_Cin_Hau",Dd.Pau_Cin_Hau],["Phags_Pa",Dd.Phags_Pa],["Phoenician",Dd.Phoenician],["Psalter_Pahlavi",Dd.Psalter_Pahlavi],["Rejang",Dd.Rejang],["Runic",Dd.Runic],["Samaritan",Dd.Samaritan],["Saurashtra",Dd.Saurashtra],["Sharada",Dd.Sharada],["Shavian",Dd.Shavian],["Siddham",Dd.Siddham],["SignWriting",Dd.SignWriting],["Sinhala",Dd.Sinhala],["Sogdian",Dd.Sogdian],["Sora_Sompeng",Dd.Sora_Sompeng],["Soyombo",Dd.Soyombo],["Sundanese",Dd.Sundanese],["Syloti_Nagri",Dd.Syloti_Nagri],["Syriac",Dd.Syriac],["Tagalog",Dd.Tagalog],["Tagbanwa",Dd.Tagbanwa],["Tai_Le",Dd.Tai_Le],["Tai_Tham",Dd.Tai_Tham],["Tai_Viet",Dd.Tai_Viet],["Takri",Dd.Takri],["Tamil",Dd.Tamil],["Tangsa",Dd.Tangsa],["Tangut",Dd.Tangut],["Telugu",Dd.Telugu],["Thaana",Dd.Thaana],["Thai",Dd.Thai],["Tibetan",Dd.Tibetan],["Tifinagh",Dd.Tifinagh],["Tirhuta",Dd.Tirhuta],["Toto",Dd.Toto],["Ugaritic",Dd.Ugaritic],["Vai",Dd.Vai],["Vithkuqi",Dd.Vithkuqi],["Wancho",Dd.Wancho],["Warang_Citi",Dd.Warang_Citi],["Yezidi",Dd.Yezidi],["Yi",Dd.Yi],["Zanabazar_Square",Dd.Zanabazar_Square]]);static FOLD_CATEGORIES=new Map([["L",Dd.foldL],["Ll",Dd.foldLl],["Lt",Dd.foldLt],["Lu",Dd.foldLu],["M",Dd.foldM],["Mn",Dd.foldMn]]);static FOLD_SCRIPT=new Map([["Common",Dd.foldCommon],["Greek",Dd.foldGreek],["Inherited",Dd.foldInherited]])}class Ad{static MAX_RUNE=1114111;static MAX_ASCII=127;static MAX_LATIN1=255;static MAX_BMP=65535;static MIN_FOLD=65;static MAX_FOLD=66639;static is32(e,t){let n=0,r=e.length;for(;n<r;){let i=n+Math.floor((r-n)/2),o=e[i];if(o[0]<=t&&t<=o[1])return(t-o[0])%o[2]==0;t<o[0]?r=i:n=i+1}return!1}static is(e,t){if(t<=this.MAX_LATIN1){for(let n of e)if(!(t>n[1]))return!(t<n[0])&&(t-n[0])%n[2]==0;return!1}return e.length>0&&t>=e[0][0]&&this.is32(e,t)}static isUpper(e){if(e<=this.MAX_LATIN1){const t=String.fromCodePoint(e);return t.toUpperCase()===t&&t.toLowerCase()!==t}return this.is(Dd.Upper,e)}static isPrint(e){return e<=this.MAX_LATIN1?e>=32&&e<127||e>=161&&173!==e:this.is(Dd.L,e)||this.is(Dd.M,e)||this.is(Dd.N,e)||this.is(Dd.P,e)||this.is(Dd.S,e)}static simpleFold(e){if(Dd.CASE_ORBIT.has(e))return Dd.CASE_ORBIT.get(e);const t=Td.toLowerCase(e);return t!==e?t:Td.toUpperCase(e)}static equalsIgnoreCase(e,t){if(e<0||t<0||e===t)return!0;if(e<=this.MAX_ASCII&&t<=this.MAX_ASCII)return Td.CODES.get("A")<=e&&e<=Td.CODES.get("Z")&&(e|=32),Td.CODES.get("A")<=t&&t<=Td.CODES.get("Z")&&(t|=32),e===t;for(let n=this.simpleFold(e);n!==e;n=this.simpleFold(n))if(n===t)return!0;return!1}}class Pd{static METACHARACTERS="\\.+*?()|[]{}^$";static EMPTY_BEGIN_LINE=1;static EMPTY_END_LINE=2;static EMPTY_BEGIN_TEXT=4;static EMPTY_END_TEXT=8;static EMPTY_WORD_BOUNDARY=16;static EMPTY_NO_WORD_BOUNDARY=32;static EMPTY_ALL=-1;static emptyInts(){return[]}static isalnum(e){return Td.CODES.get("0")<=e&&e<=Td.CODES.get("9")||Td.CODES.get("a")<=e&&e<=Td.CODES.get("z")||Td.CODES.get("A")<=e&&e<=Td.CODES.get("Z")}static unhex(e){return Td.CODES.get("0")<=e&&e<=Td.CODES.get("9")?e-Td.CODES.get("0"):Td.CODES.get("a")<=e&&e<=Td.CODES.get("f")?e-Td.CODES.get("a")+10:Td.CODES.get("A")<=e&&e<=Td.CODES.get("F")?e-Td.CODES.get("A")+10:-1}static escapeRune(e){let t="";if(Ad.isPrint(e))this.METACHARACTERS.indexOf(String.fromCodePoint(e))>=0&&(t+="\\"),t+=String.fromCodePoint(e);else switch(e){case Td.CODES.get('"'):t+='\\"';break;case Td.CODES.get("\\"):t+="\\\\";break;case Td.CODES.get("\t"):t+="\\t";break;case Td.CODES.get("\n"):t+="\\n";break;case Td.CODES.get("\r"):t+="\\r";break;case Td.CODES.get("\b"):t+="\\b";break;case Td.CODES.get("\f"):t+="\\f";break;default:{let n=e.toString(16);e<256?(t+="\\x",1===n.length&&(t+="0"),t+=n):t+=`\\x{${n}}`;break}}return t}static stringToRunes(e){return String(e).split("").map((e=>e.codePointAt(0)))}static runeToString(e){return String.fromCodePoint(e)}static isWordRune(e){return Td.CODES.get("a")<=e&&e<=Td.CODES.get("z")||Td.CODES.get("A")<=e&&e<=Td.CODES.get("Z")||Td.CODES.get("0")<=e&&e<=Td.CODES.get("9")||e===Td.CODES.get("_")}static emptyOpContext(e,t){let n=0;return e<0&&(n|=this.EMPTY_BEGIN_TEXT|this.EMPTY_BEGIN_LINE),e===Td.CODES.get("\n")&&(n|=this.EMPTY_BEGIN_LINE),t<0&&(n|=this.EMPTY_END_TEXT|this.EMPTY_END_LINE),t===Td.CODES.get("\n")&&(n|=this.EMPTY_END_LINE),this.isWordRune(e)!==this.isWordRune(t)?n|=this.EMPTY_WORD_BOUNDARY:n|=this.EMPTY_NO_WORD_BOUNDARY,n}static quoteMeta(e){return e.split("").map((e=>this.METACHARACTERS.indexOf(e)>=0?`\\${e}`:e)).join("")}static charCount(e){return e>Ad.MAX_BMP?2:1}static stringToUtf8ByteArray(e){if(globalThis.TextEncoder)return Array.from((new TextEncoder).encode(e));{let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}}static utf8ByteArrayToString(e){if(globalThis.TextDecoder)return new TextDecoder("utf-8").decode(new Uint8Array(e));{let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){let o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{let o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}}}const Id=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n={};for(let r=0;r<e.length;r++){const i=e[r],o=t+r;n[i]=o,n[o]=i}return Object.freeze(n)};class _d{static Encoding=Id(["UTF_16","UTF_8"]);getEncoding(){throw Error("not implemented")}isUTF8Encoding(){return this.getEncoding()===_d.Encoding.UTF_8}isUTF16Encoding(){return this.getEncoding()===_d.Encoding.UTF_16}}class Nd extends _d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.bytes=e}getEncoding(){return _d.Encoding.UTF_8}asCharSequence(){return Pd.utf8ByteArrayToString(this.bytes)}asBytes(){return this.bytes}length(){return this.bytes.length}}class Od extends _d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.charSequence=e}getEncoding(){return _d.Encoding.UTF_16}asCharSequence(){return this.charSequence}asBytes(){return this.charSequence.toString().split("").map((e=>e.codePointAt(0)))}length(){return this.charSequence.length}}class Md{static utf16(e){return new Od(e)}static utf8(e){return Array.isArray(e)?new Nd(e):new Nd(Pd.stringToUtf8ByteArray(e))}}class Bd extends Error{constructor(e){super(e),this.name="RE2JSException"}}class Fd extends Bd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=`error parsing regexp: ${e}`;t&&(n+=`: \`${t}\``),super(n),this.name="RE2JSSyntaxException",this.message=n,this.error=e,this.input=t}getDescription(){return this.error}getPattern(){return this.input}}class Ld extends Bd{constructor(e){super(e),this.name="RE2JSCompileException"}}class Hd extends Bd{constructor(e){super(e),this.name="RE2JSGroupException"}}class Ud extends Bd{constructor(e){super(e),this.name="RE2JSFlagsException"}}class Wd{static quoteReplacement(e){return e.indexOf("\\")<0&&e.indexOf("$")<0?e:e.split("").map((e=>{const t=e.codePointAt(0);return t===Td.CODES["\\"]||t===Td.CODES.$?`\\${e}`:e})).join("")}constructor(e,t){if(null===e)throw new Error("pattern is null");this.patternInput=e;const n=this.patternInput.re2();this.patternGroupCount=n.numberOfCapturingGroups(),this.groups=[],this.namedGroups=n.namedGroups,t instanceof _d?this.resetMatcherInput(t):Array.isArray(t)?this.resetMatcherInput(Md.utf8(t)):this.resetMatcherInput(Md.utf16(t))}pattern(){return this.patternInput}reset(){return this.matcherInputLength=this.matcherInput.length(),this.appendPos=0,this.hasMatch=!1,this.hasGroups=!1,this.anchorFlag=0,this}resetMatcherInput(e){if(null===e)throw new Error("input is null");return this.matcherInput=e,this.reset(),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("string"==typeof e){const t=this.namedGroups[e];if(!Number.isFinite(t))throw new Hd(`group '${e}' not found`);e=t}return this.loadGroup(e),this.groups[2*e]}end(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("string"==typeof e){const t=this.namedGroups[e];if(!Number.isFinite(t))throw new Hd(`group '${e}' not found`);e=t}return this.loadGroup(e),this.groups[2*e+1]}group(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("string"==typeof e){const t=this.namedGroups[e];if(!Number.isFinite(t))throw new Hd(`group '${e}' not found`);e=t}const t=this.start(e),n=this.end(e);return t<0&&n<0?null:this.substring(t,n)}groupCount(){return this.patternGroupCount}loadGroup(e){if(e<0||e>this.patternGroupCount)throw new Hd(`Group index out of bounds: ${e}`);if(!this.hasMatch)throw new Hd("perhaps no match attempted");if(0===e||this.hasGroups)return;let t=this.groups[1]+1;t>this.matcherInputLength&&(t=this.matcherInputLength);const n=this.patternInput.re2().matchMachineInput(this.matcherInput,this.groups[0],t,this.anchorFlag,1+this.patternGroupCount);if(!n[0])throw new Hd("inconsistency in matching group data");this.groups=n[1],this.hasGroups=!0}matches(){return this.genMatch(0,xd.ANCHOR_BOTH)}lookingAt(){return this.genMatch(0,xd.ANCHOR_START)}find(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==e){if(e<0||e>this.matcherInputLength)throw new Hd(`start index out of bounds: ${e}`);return this.reset(),this.genMatch(e,0)}return e=0,this.hasMatch&&(e=this.groups[1],this.groups[0]===this.groups[1]&&e++),this.genMatch(e,xd.UNANCHORED)}genMatch(e,t){const n=this.patternInput.re2().matchMachineInput(this.matcherInput,e,this.matcherInputLength,t,1);return!!n[0]&&(this.groups=n[1],this.hasMatch=!0,this.hasGroups=!1,this.anchorFlag=t,!0)}substring(e,t){return this.matcherInput.isUTF8Encoding()?Pd.utf8ByteArrayToString(this.matcherInput.asBytes().slice(e,t)):this.matcherInput.asCharSequence().substring(e,t).toString()}inputLength(){return this.matcherInputLength}appendReplacement(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";const r=this.start(),i=this.end();return this.appendPos<r&&(n+=this.substring(this.appendPos,r)),this.appendPos=i,n+=t?this.appendReplacementInternalPerl(e):this.appendReplacementInternal(e),n}appendReplacementInternal(e){let t="",n=0;const r=e.length;for(let i=0;i<r-1;i++)if(e.codePointAt(i)!==Td.CODES.get("\\")){if(e.codePointAt(i)===Td.CODES.get("$")){let o=e.codePointAt(i+1);if(Td.CODES.get("0")<=o&&o<=Td.CODES.get("9")){let s=o-Td.CODES.get("0");for(n<i&&(t+=e.substring(n,i)),i+=2;i<r&&(o=e.codePointAt(i),!(o<Td.CODES.get("0")||o>Td.CODES.get("9")||10*s+o-Td.CODES.get("0")>this.patternGroupCount));i++)s=10*s+o-Td.CODES.get("0");if(s>this.patternGroupCount)throw new Hd(`n > number of groups: ${s}`);const a=this.group(s);null!==a&&(t+=a),n=i,i--;continue}if(o===Td.CODES.get("{")){n<i&&(t+=e.substring(n,i)),i++;let r=i+1;for(;r<e.length&&e.codePointAt(r)!==Td.CODES.get("}")&&e.codePointAt(r)!==Td.CODES.get(" ");)r++;if(r===e.length||e.codePointAt(r)!==Td.CODES.get("}"))throw new Hd("named capture group is missing trailing '}'");const o=e.substring(i+1,r);t+=this.group(o),n=r+1}}}else n<i&&(t+=e.substring(n,i)),i++,n=i;return n<r&&(t+=e.substring(n,r)),t}appendReplacementInternalPerl(e){let t="",n=0;const r=e.length;for(let i=0;i<r-1;i++)if(e.codePointAt(i)===Td.CODES.get("$")){let o=e.codePointAt(i+1);if(Td.CODES.get("$")===o){n<i&&(t+=e.substring(n,i)),t+="$",i++,n=i+1;continue}if(Td.CODES.get("&")===o){n<i&&(t+=e.substring(n,i));const r=this.group(0);t+=null!==r?r:"$&",i++,n=i+1;continue}if(Td.CODES.get("1")<=o&&o<=Td.CODES.get("9")){let s=o-Td.CODES.get("0");for(n<i&&(t+=e.substring(n,i)),i+=2;i<r&&(o=e.codePointAt(i),!(o<Td.CODES.get("0")||o>Td.CODES.get("9")||10*s+o-Td.CODES.get("0")>this.patternGroupCount));i++)s=10*s+o-Td.CODES.get("0");if(s>this.patternGroupCount){t+=`$${s}`,n=i,i--;continue}const a=this.group(s);null!==a&&(t+=a),n=i,i--;continue}if(o===Td.CODES.get("<")){n<i&&(t+=e.substring(n,i)),i++;let r=i+1;for(;r<e.length&&e.codePointAt(r)!==Td.CODES.get(">")&&e.codePointAt(r)!==Td.CODES.get(" ");)r++;if(r===e.length||e.codePointAt(r)!==Td.CODES.get(">")){t+=e.substring(i-1,r+1),n=r+1;continue}const o=e.substring(i+1,r);Object.prototype.hasOwnProperty.call(this.namedGroups,o)?t+=this.group(o):t+=`$<${o}>`,n=r+1}}return n<r&&(t+=e.substring(n,r)),t}appendTail(){return this.substring(this.appendPos,this.matcherInputLength)}replaceAll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.replace(e,!0,t)}replaceFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.replace(e,!1,t)}replace(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="";for(this.reset();this.find()&&(r+=this.appendReplacement(e,n),t););return r+=this.appendTail(),r}}class $d{static EOF(){return-8}canCheckPrefix(){return!0}endPos(){return this.end}}class zd extends $d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;super(),this.bytes=e,this.start=t,this.end=n}step(e){if((e+=this.start)>=this.end)return $d.EOF();let t=255&this.bytes[e++];return 0==(128&t)?t<<3|1:192==(224&t)?(t&=31,e>=this.end?$d.EOF():(t=t<<6|63&this.bytes[e++],t<<3|2)):224==(240&t)?(t&=15,e+1>=this.end?$d.EOF():(t=t<<6|63&this.bytes[e++],t=t<<6|63&this.bytes[e++],t<<3|3)):(t&=7,e+2>=this.end?$d.EOF():(t=t<<6|63&this.bytes[e++],t=t<<6|63&this.bytes[e++],t=t<<6|63&this.bytes[e++],t<<3|4))}index(e,t){t+=this.start;const n=this.indexOf(this.bytes,e.prefixUTF8,t);return n<0?n:n-t}context(e){let t=-1;if((e+=this.start)>this.start&&e<=this.end){let n=e-1;if(t=this.bytes[n--],t>=128){let r=e-4;for(r<this.start&&(r=this.start);n>=r&&128==(192&this.bytes[n]);)n--;n<this.start&&(n=this.start),t=this.step(n)>>3}}const n=e<this.end?this.step(e)>>3:-1;return Pd.emptyOpContext(t,n)}indexOf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length;if(0===r)return-1;let i=e.length;for(let o=n;o<=i-r;o++)for(let n=0;n<r&&e[o+n]===t[n];n++)if(n===r-1)return o;return-1}}class qd extends $d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;super(),this.charSequence=e,this.start=t,this.end=n}step(e){if((e+=this.start)<this.end){const t=this.charSequence.codePointAt(e);return t<<3|Pd.charCount(t)}return $d.EOF()}index(e,t){t+=this.start;const n=this.charSequence.indexOf(e.prefix,t);return n<0?n:n-t}context(e){const t=(e+=this.start)>0&&e<=this.charSequence.length?this.charSequence.codePointAt(e-1):-1,n=e<this.charSequence.length?this.charSequence.codePointAt(e):-1;return Pd.emptyOpContext(t,n)}}class jd{static fromUTF8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return new zd(e,t,n)}static fromUTF16(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return new qd(e,t,n)}}class Gd{static Op=Id(["NO_MATCH","EMPTY_MATCH","LITERAL","CHAR_CLASS","ANY_CHAR_NOT_NL","ANY_CHAR","BEGIN_LINE","END_LINE","BEGIN_TEXT","END_TEXT","WORD_BOUNDARY","NO_WORD_BOUNDARY","CAPTURE","STAR","PLUS","QUEST","REPEAT","CONCAT","ALTERNATE","LEFT_PAREN","VERTICAL_BAR"]);static isPseudoOp(e){return e>=Gd.Op.LEFT_PAREN}static emptySubs(){return[]}static quoteIfHyphen(e){return e===Td.CODES.get("-")?"\\":""}static fromRegexp(e){const t=new Gd(e.op);return t.flags=e.flags,t.subs=e.subs,t.runes=e.runes,t.cap=e.cap,t.min=e.min,t.max=e.max,t.name=e.name,t.namedGroups=e.namedGroups,t}constructor(e){this.op=e,this.flags=0,this.subs=Gd.emptySubs(),this.runes=null,this.min=0,this.max=0,this.cap=0,this.name=null,this.namedGroups={}}reinit(){this.flags=0,this.subs=Gd.emptySubs(),this.runes=null,this.cap=0,this.min=0,this.max=0,this.name=null,this.namedGroups={}}toString(){return this.appendTo()}appendTo(){let e="";switch(this.op){case Gd.Op.NO_MATCH:e+="[^\\x00-\\x{10FFFF}]";break;case Gd.Op.EMPTY_MATCH:e+="(?:)";break;case Gd.Op.STAR:case Gd.Op.PLUS:case Gd.Op.QUEST:case Gd.Op.REPEAT:{const t=this.subs[0];switch(t.op>Gd.Op.CAPTURE||t.op===Gd.Op.LITERAL&&t.runes.length>1?e+=`(?:${t.appendTo()})`:e+=t.appendTo(),this.op){case Gd.Op.STAR:e+="*";break;case Gd.Op.PLUS:e+="+";break;case Gd.Op.QUEST:e+="?";break;case Gd.Op.REPEAT:e+=`{${this.min}`,this.min!==this.max&&(e+=",",this.max>=0&&(e+=this.max)),e+="}"}0!=(this.flags&xd.NON_GREEDY)&&(e+="?");break}case Gd.Op.CONCAT:for(let t of this.subs)t.op===Gd.Op.ALTERNATE?e+=`(?:${t.appendTo()})`:e+=t.appendTo();break;case Gd.Op.ALTERNATE:{let t="";for(let n of this.subs)e+=t,t="|",e+=n.appendTo();break}case Gd.Op.LITERAL:0!=(this.flags&xd.FOLD_CASE)&&(e+="(?i:");for(let t of this.runes)e+=Pd.escapeRune(t);0!=(this.flags&xd.FOLD_CASE)&&(e+=")");break;case Gd.Op.ANY_CHAR_NOT_NL:e+="(?-s:.)";break;case Gd.Op.ANY_CHAR:e+="(?s:.)";break;case Gd.Op.CAPTURE:null===this.name||0===this.name.length?e+="(":e+=`(?P<${this.name}>`,this.subs[0].op!==Gd.Op.EMPTY_MATCH&&(e+=this.subs[0].appendTo()),e+=")";break;case Gd.Op.BEGIN_TEXT:e+="\\A";break;case Gd.Op.END_TEXT:0!=(this.flags&xd.WAS_DOLLAR)?e+="(?-m:$)":e+="\\z";break;case Gd.Op.BEGIN_LINE:e+="^";break;case Gd.Op.END_LINE:e+="$";break;case Gd.Op.WORD_BOUNDARY:e+="\\b";break;case Gd.Op.NO_WORD_BOUNDARY:e+="\\B";break;case Gd.Op.CHAR_CLASS:if(this.runes.length%2!=0){e+="[invalid char class]";break}if(e+="[",0===this.runes.length)e+="^\\x00-\\x{10FFFF}";else if(0===this.runes[0]&&this.runes[this.runes.length-1]===Ad.MAX_RUNE){e+="^";for(let t=1;t<this.runes.length-1;t+=2){const n=this.runes[t]+1,r=this.runes[t+1]-1;e+=Gd.quoteIfHyphen(n),e+=Pd.escapeRune(n),n!==r&&(e+="-",e+=Gd.quoteIfHyphen(r),e+=Pd.escapeRune(r))}}else for(let t=0;t<this.runes.length;t+=2){const n=this.runes[t],r=this.runes[t+1];e+=Gd.quoteIfHyphen(n),e+=Pd.escapeRune(n),n!==r&&(e+="-",e+=Gd.quoteIfHyphen(r),e+=Pd.escapeRune(r))}e+="]";break;default:e+=this.op}return e}maxCap(){let e=0;if(this.op===Gd.Op.CAPTURE&&(e=this.cap),null!==this.subs)for(let t of this.subs){const n=t.maxCap();e<n&&(e=n)}return e}equals(e){if(!(null!==e&&e instanceof Gd))return!1;if(this.op!==e.op)return!1;switch(this.op){case Gd.Op.END_TEXT:if((this.flags&xd.WAS_DOLLAR)!=(e.flags&xd.WAS_DOLLAR))return!1;break;case Gd.Op.LITERAL:case Gd.Op.CHAR_CLASS:if(null===this.runes&&null===e.runes)break;if(null===this.runes||null===e.runes)return!1;if(this.runes.length!==e.runes.length)return!1;for(let t=0;t<this.runes.length;t++)if(this.runes[t]!==e.runes[t])return!1;break;case Gd.Op.ALTERNATE:case Gd.Op.CONCAT:if(this.subs.length!==e.subs.length)return!1;for(let t=0;t<this.subs.length;++t)if(!this.subs[t].equals(e.subs[t]))return!1;break;case Gd.Op.STAR:case Gd.Op.PLUS:case Gd.Op.QUEST:if((this.flags&xd.NON_GREEDY)!=(e.flags&xd.NON_GREEDY)||!this.subs[0].equals(e.subs[0]))return!1;break;case Gd.Op.REPEAT:if((this.flags&xd.NON_GREEDY)!=(e.flags&xd.NON_GREEDY)||this.min!==e.min||this.max!==e.max||!this.subs[0].equals(e.subs[0]))return!1;break;case Gd.Op.CAPTURE:if(this.cap!==e.cap||(null===this.name?null!==e.name:this.name!==e.name)||!this.subs[0].equals(e.subs[0]))return!1}return!0}}class Vd{static ALT=1;static ALT_MATCH=2;static CAPTURE=3;static EMPTY_WIDTH=4;static FAIL=5;static MATCH=6;static NOP=7;static RUNE=8;static RUNE1=9;static RUNE_ANY=10;static RUNE_ANY_NOT_NL=11;static isRuneOp(e){return Vd.RUNE<=e&&e<=Vd.RUNE_ANY_NOT_NL}static escapeRunes(e){let t='"';for(let n of e)t+=Pd.escapeRune(n);return t+='"',t}constructor(e){this.op=e,this.out=0,this.arg=0,this.runes=null}matchRune(e){if(1===this.runes.length){const t=this.runes[0];return 0!=(this.arg&xd.FOLD_CASE)?Ad.equalsIgnoreCase(t,e):e===t}for(let t=0;t<this.runes.length&&t<=8;t+=2){if(e<this.runes[t])return!1;if(e<=this.runes[t+1])return!0}let t=0,n=this.runes.length/2|0;for(;t<n;){const r=t+((n-t)/2|0);if(this.runes[2*r]<=e){if(e<=this.runes[2*r+1])return!0;t=r+1}else n=r}return!1}toString(){switch(this.op){case Vd.ALT:return`alt -> ${this.out}, ${this.arg}`;case Vd.ALT_MATCH:return`altmatch -> ${this.out}, ${this.arg}`;case Vd.CAPTURE:return`cap ${this.arg} -> ${this.out}`;case Vd.EMPTY_WIDTH:return`empty ${this.arg} -> ${this.out}`;case Vd.MATCH:return"match";case Vd.FAIL:return"fail";case Vd.NOP:return`nop -> ${this.out}`;case Vd.RUNE:return null===this.runes?"rune <null>":["rune ",Vd.escapeRunes(this.runes),0!=(this.arg&xd.FOLD_CASE)?"/i":""," -> ",this.out].join("");case Vd.RUNE1:return`rune1 ${Vd.escapeRunes(this.runes)} -> ${this.out}`;case Vd.RUNE_ANY:return`any -> ${this.out}`;case Vd.RUNE_ANY_NOT_NL:return`anynotnl -> ${this.out}`;default:throw new Error("unhandled case in Inst.toString")}}}class Kd{constructor(){this.inst=[],this.start=0,this.numCap=2}getInst(e){return this.inst[e]}numInst(){return this.inst.length}addInst(e){this.inst.push(new Vd(e))}skipNop(e){let t=this.inst[e];for(;t.op===Vd.NOP||t.op===Vd.CAPTURE;)t=this.inst[e],e=t.out;return t}prefix(){let e="",t=this.skipNop(this.start);if(!Vd.isRuneOp(t.op)||1!==t.runes.length)return[t.op===Vd.MATCH,e];for(;Vd.isRuneOp(t.op)&&1===t.runes.length&&0==(t.arg&xd.FOLD_CASE);)e+=String.fromCodePoint(t.runes[0]),t=this.skipNop(t.out);return[t.op===Vd.MATCH,e]}startCond(){let e=0,t=this.start;e:for(;;){const n=this.inst[t];switch(n.op){case Vd.EMPTY_WIDTH:e|=n.arg;break;case Vd.FAIL:return-1;case Vd.CAPTURE:case Vd.NOP:break;default:break e}t=n.out}return e}next(e){const t=this.inst[e>>1];return 0==(1&e)?t.out:t.arg}patch(e,t){for(;0!==e;){const n=this.inst[e>>1];0==(1&e)?(e=n.out,n.out=t):(e=n.arg,n.arg=t)}}append(e,t){if(0===e)return t;if(0===t)return e;let n=e;for(;;){const e=this.next(n);if(0===e)break;n=e}const r=this.inst[n>>1];return 0==(1&n)?r.out=t:r.arg=t,e}toString(){let e="";for(let t=0;t<this.inst.length;t++){const n=e.length;e+=t,t===this.start&&(e+="*"),e+="        ".substring(e.length-n),e+=this.inst[t],e+="\n"}return e}}class Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.i=e,this.out=t,this.nullable=n}}class Xd{static ANY_RUNE_NOT_NL(){return[0,Td.CODES.get("\n")-1,Td.CODES.get("\n")+1,Ad.MAX_RUNE]}static ANY_RUNE(){return[0,Ad.MAX_RUNE]}static compileRegexp(e){const t=new Xd,n=t.compile(e);return t.prog.patch(n.out,t.newInst(Vd.MATCH).i),t.prog.start=n.i,t.prog}constructor(){this.prog=new Kd,this.newInst(Vd.FAIL)}newInst(e){return this.prog.addInst(e),new Yd(this.prog.numInst()-1,0,!0)}nop(){const e=this.newInst(Vd.NOP);return e.out=e.i<<1,e}fail(){return new Yd}cap(e){const t=this.newInst(Vd.CAPTURE);return t.out=t.i<<1,this.prog.getInst(t.i).arg=e,this.prog.numCap<e+1&&(this.prog.numCap=e+1),t}cat(e,t){return 0===e.i||0===t.i?this.fail():(this.prog.patch(e.out,t.i),new Yd(e.i,t.out,e.nullable&&t.nullable))}alt(e,t){if(0===e.i)return t;if(0===t.i)return e;const n=this.newInst(Vd.ALT),r=this.prog.getInst(n.i);return r.out=e.i,r.arg=t.i,n.out=this.prog.append(e.out,t.out),n.nullable=e.nullable||t.nullable,n}loop(e,t){const n=this.newInst(Vd.ALT),r=this.prog.getInst(n.i);return t?(r.arg=e.i,n.out=n.i<<1):(r.out=e.i,n.out=n.i<<1|1),this.prog.patch(e.out,n.i),n}quest(e,t){const n=this.newInst(Vd.ALT),r=this.prog.getInst(n.i);return t?(r.arg=e.i,n.out=n.i<<1):(r.out=e.i,n.out=n.i<<1|1),n.out=this.prog.append(n.out,e.out),n}star(e,t){return e.nullable?this.quest(this.plus(e,t),t):this.loop(e,t)}plus(e,t){return new Yd(e.i,this.loop(e,t).out,e.nullable)}empty(e){const t=this.newInst(Vd.EMPTY_WIDTH);return this.prog.getInst(t.i).arg=e,t.out=t.i<<1,t}rune(e,t){const n=this.newInst(Vd.RUNE);n.nullable=!1;const r=this.prog.getInst(n.i);return r.runes=e,t&=xd.FOLD_CASE,1===e.length&&Ad.simpleFold(e[0])!==e[0]||(t&=~xd.FOLD_CASE),r.arg=t,n.out=n.i<<1,0==(t&xd.FOLD_CASE)&&1===e.length||2===e.length&&e[0]===e[1]?r.op=Vd.RUNE1:2===e.length&&0===e[0]&&e[1]===Ad.MAX_RUNE?r.op=Vd.RUNE_ANY:4===e.length&&0===e[0]&&e[1]===Td.CODES.get("\n")-1&&e[2]===Td.CODES.get("\n")+1&&e[3]===Ad.MAX_RUNE&&(r.op=Vd.RUNE_ANY_NOT_NL),n}compile(e){switch(e.op){case Gd.Op.NO_MATCH:return this.fail();case Gd.Op.EMPTY_MATCH:return this.nop();case Gd.Op.LITERAL:if(0===e.runes.length)return this.nop();{let t=null;for(let n of e.runes){const r=this.rune([n],e.flags);t=null===t?r:this.cat(t,r)}return t}case Gd.Op.CHAR_CLASS:return this.rune(e.runes,e.flags);case Gd.Op.ANY_CHAR_NOT_NL:return this.rune(Xd.ANY_RUNE_NOT_NL(),0);case Gd.Op.ANY_CHAR:return this.rune(Xd.ANY_RUNE(),0);case Gd.Op.BEGIN_LINE:return this.empty(Pd.EMPTY_BEGIN_LINE);case Gd.Op.END_LINE:return this.empty(Pd.EMPTY_END_LINE);case Gd.Op.BEGIN_TEXT:return this.empty(Pd.EMPTY_BEGIN_TEXT);case Gd.Op.END_TEXT:return this.empty(Pd.EMPTY_END_TEXT);case Gd.Op.WORD_BOUNDARY:return this.empty(Pd.EMPTY_WORD_BOUNDARY);case Gd.Op.NO_WORD_BOUNDARY:return this.empty(Pd.EMPTY_NO_WORD_BOUNDARY);case Gd.Op.CAPTURE:{const t=this.cap(e.cap<<1),n=this.compile(e.subs[0]),r=this.cap(e.cap<<1|1);return this.cat(this.cat(t,n),r)}case Gd.Op.STAR:return this.star(this.compile(e.subs[0]),0!=(e.flags&xd.NON_GREEDY));case Gd.Op.PLUS:return this.plus(this.compile(e.subs[0]),0!=(e.flags&xd.NON_GREEDY));case Gd.Op.QUEST:return this.quest(this.compile(e.subs[0]),0!=(e.flags&xd.NON_GREEDY));case Gd.Op.CONCAT:if(0===e.subs.length)return this.nop();{let t=null;for(let n of e.subs){const e=this.compile(n);t=null===t?e:this.cat(t,e)}return t}case Gd.Op.ALTERNATE:if(0===e.subs.length)return this.nop();{let t=null;for(let n of e.subs){const e=this.compile(n);t=null===t?e:this.alt(t,e)}return t}default:throw new Ld("regexp: unhandled case in compile")}}}class Qd{static simplify(e){if(null===e)return null;switch(e.op){case Gd.Op.CAPTURE:case Gd.Op.CONCAT:case Gd.Op.ALTERNATE:{let t=e;for(let n=0;n<e.subs.length;n++){const r=e.subs[n],i=Qd.simplify(r);t===e&&i!==r&&(t=Gd.fromRegexp(e),t.runes=null,t.subs=e.subs.slice(0,e.subs.length)),t!==e&&(t.subs[n]=i)}return t}case Gd.Op.STAR:case Gd.Op.PLUS:case Gd.Op.QUEST:{const t=Qd.simplify(e.subs[0]);return Qd.simplify1(e.op,e.flags,t,e)}case Gd.Op.REPEAT:{if(0===e.min&&0===e.max)return new Gd(Gd.Op.EMPTY_MATCH);const t=Qd.simplify(e.subs[0]);if(-1===e.max){if(0===e.min)return Qd.simplify1(Gd.Op.STAR,e.flags,t,null);if(1===e.min)return Qd.simplify1(Gd.Op.PLUS,e.flags,t,null);const n=new Gd(Gd.Op.CONCAT),r=[];for(let n=0;n<e.min-1;n++)r.push(t);return r.push(Qd.simplify1(Gd.Op.PLUS,e.flags,t,null)),n.subs=r.slice(0),n}if(1===e.min&&1===e.max)return t;let n=null;if(e.min>0){n=[];for(let r=0;r<e.min;r++)n.push(t)}if(e.max>e.min){let r=Qd.simplify1(Gd.Op.QUEST,e.flags,t,null);for(let n=e.min+1;n<e.max;n++){const n=new Gd(Gd.Op.CONCAT);n.subs=[t,r],r=Qd.simplify1(Gd.Op.QUEST,e.flags,n,null)}if(null===n)return r;n.push(r)}if(null!==n){const e=new Gd(Gd.Op.CONCAT);return e.subs=n.slice(0),e}return new Gd(Gd.Op.NO_MATCH)}}return e}static simplify1(e,t,n,r){return n.op===Gd.Op.EMPTY_MATCH||e===n.op&&(t&xd.NON_GREEDY)==(n.flags&xd.NON_GREEDY)?n:(null!==r&&r.op===e&&(r.flags&xd.NON_GREEDY)==(t&xd.NON_GREEDY)&&n===r.subs[0]||((r=new Gd(e)).flags=t,r.subs=[n]),r)}}class Zd{constructor(e,t){this.sign=e,this.cls=t}}const Jd=[48,57],em=[9,10,12,13,32,32],tm=[48,57,65,90,95,95,97,122],nm=new Map([["\\d",new Zd(1,Jd)],["\\D",new Zd(-1,Jd)],["\\s",new Zd(1,em)],["\\S",new Zd(-1,em)],["\\w",new Zd(1,tm)],["\\W",new Zd(-1,tm)]]),rm=[48,57,65,90,97,122],im=[65,90,97,122],om=[0,127],sm=[9,9,32,32],am=[0,31,127,127],lm=[48,57],cm=[33,126],um=[97,122],hm=[32,126],pm=[33,47,58,64,91,96,123,126],dm=[9,13,32,32],mm=[65,90],fm=[48,57,65,90,95,95,97,122],gm=[48,57,65,70,97,102],ym=new Map([["[:alnum:]",new Zd(1,rm)],["[:^alnum:]",new Zd(-1,rm)],["[:alpha:]",new Zd(1,im)],["[:^alpha:]",new Zd(-1,im)],["[:ascii:]",new Zd(1,om)],["[:^ascii:]",new Zd(-1,om)],["[:blank:]",new Zd(1,sm)],["[:^blank:]",new Zd(-1,sm)],["[:cntrl:]",new Zd(1,am)],["[:^cntrl:]",new Zd(-1,am)],["[:digit:]",new Zd(1,lm)],["[:^digit:]",new Zd(-1,lm)],["[:graph:]",new Zd(1,cm)],["[:^graph:]",new Zd(-1,cm)],["[:lower:]",new Zd(1,um)],["[:^lower:]",new Zd(-1,um)],["[:print:]",new Zd(1,hm)],["[:^print:]",new Zd(-1,hm)],["[:punct:]",new Zd(1,pm)],["[:^punct:]",new Zd(-1,pm)],["[:space:]",new Zd(1,dm)],["[:^space:]",new Zd(-1,dm)],["[:upper:]",new Zd(1,mm)],["[:^upper:]",new Zd(-1,mm)],["[:word:]",new Zd(1,fm)],["[:^word:]",new Zd(-1,fm)],["[:xdigit:]",new Zd(1,gm)],["[:^xdigit:]",new Zd(-1,gm)]]);class bm{static charClassToString(e,t){let n="[";for(let r=0;r<t;r+=2){r>0&&(n+=" ");const t=e[r],i=e[r+1];n+=t===i?`0x${t.toString(16)}`:`0x${t.toString(16)}-0x${i.toString(16)}`}return n+="]",n}static cmp(e,t,n,r){const i=e[t]-n;return 0!==i?i:r-e[t+1]}static qsortIntPair(e,t,n){const r=-2&((t+n)/2|0),i=e[r],o=e[r+1];let s=t,a=n;for(;s<=a;){for(;s<n&&bm.cmp(e,s,i,o)<0;)s+=2;for(;a>t&&bm.cmp(e,a,i,o)>0;)a-=2;if(s<=a){if(s!==a){let t=e[s];e[s]=e[a],e[a]=t,t=e[s+1],e[s+1]=e[a+1],e[a+1]=t}s+=2,a-=2}}t<a&&bm.qsortIntPair(e,t,a),s<n&&bm.qsortIntPair(e,s,n)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pd.emptyInts();this.r=e,this.len=e.length}toArray(){return this.len===this.r.length?this.r:this.r.slice(0,this.len)}cleanClass(){if(this.len<4)return this;bm.qsortIntPair(this.r,0,this.len-2);let e=2;for(let t=2;t<this.len;t+=2){const n=this.r[t],r=this.r[t+1];n<=this.r[e-1]+1?r>this.r[e-1]&&(this.r[e-1]=r):(this.r[e]=n,this.r[e+1]=r,e+=2)}return this.len=e,this}appendLiteral(e,t){return 0!=(t&xd.FOLD_CASE)?this.appendFoldedRange(e,e):this.appendRange(e,e)}appendRange(e,t){if(this.len>0)for(let n=2;n<=4;n+=2)if(this.len>=n){const r=this.r[this.len-n],i=this.r[this.len-n+1];if(e<=i+1&&r<=t+1)return e<r&&(this.r[this.len-n]=e),t>i&&(this.r[this.len-n+1]=t),this}return this.r[this.len++]=e,this.r[this.len++]=t,this}appendFoldedRange(e,t){if(e<=Ad.MIN_FOLD&&t>=Ad.MAX_FOLD)return this.appendRange(e,t);if(t<Ad.MIN_FOLD||e>Ad.MAX_FOLD)return this.appendRange(e,t);e<Ad.MIN_FOLD&&(this.appendRange(e,Ad.MIN_FOLD-1),e=Ad.MIN_FOLD),t>Ad.MAX_FOLD&&(this.appendRange(Ad.MAX_FOLD+1,t),t=Ad.MAX_FOLD);for(let n=e;n<=t;n++){this.appendRange(n,n);for(let e=Ad.simpleFold(n);e!==n;e=Ad.simpleFold(e))this.appendRange(e,e)}return this}appendClass(e){for(let t=0;t<e.length;t+=2)this.appendRange(e[t],e[t+1]);return this}appendFoldedClass(e){for(let t=0;t<e.length;t+=2)this.appendFoldedRange(e[t],e[t+1]);return this}appendNegatedClass(e){let t=0;for(let n=0;n<e.length;n+=2){const r=e[n],i=e[n+1];t<=r-1&&this.appendRange(t,r-1),t=i+1}return t<=Ad.MAX_RUNE&&this.appendRange(t,Ad.MAX_RUNE),this}appendTable(e){for(let t of e){const e=t[0],n=t[1],r=t[2];if(1!==r)for(let t=e;t<=n;t+=r)this.appendRange(t,t);else this.appendRange(e,n)}return this}appendNegatedTable(e){let t=0;for(let n of e){const e=n[0],r=n[1],i=n[2];if(1!==i)for(let n=e;n<=r;n+=i)t<=n-1&&this.appendRange(t,n-1),t=n+1;else t<=e-1&&this.appendRange(t,e-1),t=r+1}return t<=Ad.MAX_RUNE&&this.appendRange(t,Ad.MAX_RUNE),this}appendTableWithSign(e,t){return t<0?this.appendNegatedTable(e):this.appendTable(e)}negateClass(){let e=0,t=0;for(let n=0;n<this.len;n+=2){const r=this.r[n],i=this.r[n+1];e<=r-1&&(this.r[t]=e,this.r[t+1]=r-1,t+=2),e=i+1}return this.len=t,e<=Ad.MAX_RUNE&&(this.r[this.len++]=e,this.r[this.len++]=Ad.MAX_RUNE),this}appendClassWithSign(e,t){return t<0?this.appendNegatedClass(e):this.appendClass(e)}appendGroup(e,t){let n=e.cls;return t&&(n=(new bm).appendFoldedClass(n).cleanClass().toArray()),this.appendClassWithSign(n,e.sign)}toString(){return bm.charClassToString(this.r,this.len)}}class wm{static of(e,t){return new wm(e,t)}constructor(e,t){this.first=e,this.second=t}}class vm{constructor(e){this.str=e,this.position=0}pos(){return this.position}rewindTo(e){this.position=e}more(){return this.position<this.str.length}peek(){return this.str.codePointAt(this.position)}skip(e){this.position+=e}skipString(e){this.position+=e.length}pop(){const e=this.str.codePointAt(this.position);return this.position+=Pd.charCount(e),e}lookingAt(e){return this.rest().startsWith(e)}rest(){return this.str.substring(this.position)}from(e){return this.str.substring(e,this.position)}toString(){return this.rest()}}class Cm{static ERR_INTERNAL_ERROR="regexp/syntax: internal error";static ERR_INVALID_CHAR_RANGE="invalid character class range";static ERR_INVALID_ESCAPE="invalid escape sequence";static ERR_INVALID_NAMED_CAPTURE="invalid named capture";static ERR_INVALID_PERL_OP="invalid or unsupported Perl syntax";static ERR_INVALID_REPEAT_OP="invalid nested repetition operator";static ERR_INVALID_REPEAT_SIZE="invalid repeat count";static ERR_MISSING_BRACKET="missing closing ]";static ERR_MISSING_PAREN="missing closing )";static ERR_MISSING_REPEAT_ARGUMENT="missing argument to repetition operator";static ERR_TRAILING_BACKSLASH="trailing backslash at end of expression";static ERR_DUPLICATE_NAMED_CAPTURE="duplicate capture group name";static ANY_TABLE(){return[[0,Ad.MAX_RUNE,1]]}static unicodeTable(e){return"Any"===e?wm.of(Cm.ANY_TABLE(),Cm.ANY_TABLE()):Dd.CATEGORIES.has(e)?wm.of(Dd.CATEGORIES.get(e),Dd.FOLD_CATEGORIES.get(e)):Dd.SCRIPTS.has(e)?wm.of(Dd.SCRIPTS.get(e),Dd.FOLD_SCRIPT.get(e)):null}static minFoldRune(e){if(e<Ad.MIN_FOLD||e>Ad.MAX_FOLD)return e;let t=e;const n=e;for(e=Ad.simpleFold(e);e!==n;e=Ad.simpleFold(e))t>e&&(t=e);return t}static leadingRegexp(e){if(e.op===Gd.Op.EMPTY_MATCH)return null;if(e.op===Gd.Op.CONCAT&&e.subs.length>0){const t=e.subs[0];return t.op===Gd.Op.EMPTY_MATCH?null:t}return e}static literalRegexp(e,t){const n=new Gd(Gd.Op.LITERAL);return n.flags=t,n.runes=Pd.stringToRunes(e),n}static parse(e,t){return new Cm(e,t).parseInternal()}static parseRepeat(e){const t=e.pos();if(!e.more()||!e.lookingAt("{"))return-1;e.skip(1);const n=Cm.parseInt(e);if(-1===n)return-1;if(!e.more())return-1;let r;if(e.lookingAt(",")){if(e.skip(1),!e.more())return-1;if(e.lookingAt("}"))r=-1;else if(-1===(r=Cm.parseInt(e)))return-1}else r=n;if(!e.more()||!e.lookingAt("}"))return-1;if(e.skip(1),n<0||n>1e3||-2===r||r>1e3||r>=0&&n>r)throw new Fd(Cm.ERR_INVALID_REPEAT_SIZE,e.from(t));return n<<16|r&Ad.MAX_BMP}static isValidCaptureName(e){if(0===e.length)return!1;for(let t=0;t<e.length;t++){const n=e.codePointAt(t);if(n!==Td.CODES.get("_")&&!Pd.isalnum(n))return!1}return!0}static parseInt(e){const t=e.pos();for(;e.more()&&e.peek()>=Td.CODES.get("0")&&e.peek()<=Td.CODES.get("9");)e.skip(1);const n=e.from(t);return 0===n.length||n.length>1&&n.codePointAt(0)===Td.CODES.get("0")?-1:n.length>8?-2:parseFloat(n,10)}static isCharClass(e){return e.op===Gd.Op.LITERAL&&1===e.runes.length||e.op===Gd.Op.CHAR_CLASS||e.op===Gd.Op.ANY_CHAR_NOT_NL||e.op===Gd.Op.ANY_CHAR}static matchRune(e,t){switch(e.op){case Gd.Op.LITERAL:return 1===e.runes.length&&e.runes[0]===t;case Gd.Op.CHAR_CLASS:for(let n=0;n<e.runes.length;n+=2)if(e.runes[n]<=t&&t<=e.runes[n+1])return!0;return!1;case Gd.Op.ANY_CHAR_NOT_NL:return t!==Td.CODES.get("\n");case Gd.Op.ANY_CHAR:return!0}return!1}static mergeCharClass(e,t){switch(e.op){case Gd.Op.ANY_CHAR:break;case Gd.Op.ANY_CHAR_NOT_NL:Cm.matchRune(t,Td.CODES.get("\n"))&&(e.op=Gd.Op.ANY_CHAR);break;case Gd.Op.CHAR_CLASS:t.op===Gd.Op.LITERAL?e.runes=new bm(e.runes).appendLiteral(t.runes[0],t.flags).toArray():e.runes=new bm(e.runes).appendClass(t.runes).toArray();break;case Gd.Op.LITERAL:if(t.runes[0]===e.runes[0]&&t.flags===e.flags)break;e.op=Gd.Op.CHAR_CLASS,e.runes=(new bm).appendLiteral(e.runes[0],e.flags).appendLiteral(t.runes[0],t.flags).toArray()}}static parseEscape(e){const t=e.pos();if(e.skip(1),!e.more())throw new Fd(Cm.ERR_TRAILING_BACKSLASH);let n=e.pop();e:switch(n){case Td.CODES.get("1"):case Td.CODES.get("2"):case Td.CODES.get("3"):case Td.CODES.get("4"):case Td.CODES.get("5"):case Td.CODES.get("6"):case Td.CODES.get("7"):if(!e.more()||e.peek()<Td.CODES.get("0")||e.peek()>Td.CODES.get("7"))break;case Td.CODES.get("0"):{let t=n-Td.CODES.get("0");for(let n=1;n<3&&!(!e.more()||e.peek()<Td.CODES.get("0")||e.peek()>Td.CODES.get("7"));n++)t=8*t+e.peek()-Td.CODES.get("0"),e.skip(1);return t}case Td.CODES.get("x"):{if(!e.more())break;if(n=e.pop(),n===Td.CODES.get("{")){let t=0,r=0;for(;;){if(!e.more())break e;if(n=e.pop(),n===Td.CODES.get("}"))break;const i=Pd.unhex(n);if(i<0)break e;if(r=16*r+i,r>Ad.MAX_RUNE)break e;t++}if(0===t)break e;return r}const t=Pd.unhex(n);if(!e.more())break;n=e.pop();const r=Pd.unhex(n);if(t<0||r<0)break;return 16*t+r}case Td.CODES.get("a"):return Td.CODES.get("");case Td.CODES.get("f"):return Td.CODES.get("\f");case Td.CODES.get("n"):return Td.CODES.get("\n");case Td.CODES.get("r"):return Td.CODES.get("\r");case Td.CODES.get("t"):return Td.CODES.get("\t");case Td.CODES.get("v"):return Td.CODES.get("\v");default:if(!Pd.isalnum(n))return n}throw new Fd(Cm.ERR_INVALID_ESCAPE,e.from(t))}static parseClassChar(e,t){if(!e.more())throw new Fd(Cm.ERR_MISSING_BRACKET,e.from(t));return e.lookingAt("\\")?Cm.parseEscape(e):e.pop()}static concatRunes(e,t){return[...e,...t]}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.wholeRegexp=e,this.flags=t,this.numCap=0,this.namedGroups={},this.stack=[],this.free=null}newRegexp(e){let t=this.free;return null!==t&&null!==t.subs&&t.subs.length>0?(this.free=t.subs[0],t.reinit(),t.op=e):t=new Gd(e),t}reuse(e){null!==e.subs&&e.subs.length>0&&(e.subs[0]=this.free),this.free=e}pop(){return this.stack.pop()}popToPseudo(){const e=this.stack.length;let t=e;for(;t>0&&!Gd.isPseudoOp(this.stack[t-1].op);)t--;const n=this.stack.slice(t,e);return this.stack=this.stack.slice(0,t),n}push(e){if(e.op===Gd.Op.CHAR_CLASS&&2===e.runes.length&&e.runes[0]===e.runes[1]){if(this.maybeConcat(e.runes[0],this.flags&~xd.FOLD_CASE))return null;e.op=Gd.Op.LITERAL,e.runes=[e.runes[0]],e.flags=this.flags&~xd.FOLD_CASE}else if(e.op===Gd.Op.CHAR_CLASS&&4===e.runes.length&&e.runes[0]===e.runes[1]&&e.runes[2]===e.runes[3]&&Ad.simpleFold(e.runes[0])===e.runes[2]&&Ad.simpleFold(e.runes[2])===e.runes[0]||e.op===Gd.Op.CHAR_CLASS&&2===e.runes.length&&e.runes[0]+1===e.runes[1]&&Ad.simpleFold(e.runes[0])===e.runes[1]&&Ad.simpleFold(e.runes[1])===e.runes[0]){if(this.maybeConcat(e.runes[0],this.flags|xd.FOLD_CASE))return null;e.op=Gd.Op.LITERAL,e.runes=[e.runes[0]],e.flags=this.flags|xd.FOLD_CASE}else this.maybeConcat(-1,0);return this.stack.push(e),e}maybeConcat(e,t){const n=this.stack.length;if(n<2)return!1;const r=this.stack[n-1],i=this.stack[n-2];return r.op===Gd.Op.LITERAL&&i.op===Gd.Op.LITERAL&&(r.flags&xd.FOLD_CASE)==(i.flags&xd.FOLD_CASE)&&(i.runes=Cm.concatRunes(i.runes,r.runes),e>=0?(r.runes=[e],r.flags=t,!0):(this.pop(),this.reuse(r),!1))}newLiteral(e,t){const n=this.newRegexp(Gd.Op.LITERAL);return n.flags=t,0!=(t&xd.FOLD_CASE)&&(e=Cm.minFoldRune(e)),n.runes=[e],n}literal(e){this.push(this.newLiteral(e,this.flags))}op(e){const t=this.newRegexp(e);return t.flags=this.flags,this.push(t)}repeat(e,t,n,r,i,o){let s=this.flags;if(0!=(s&xd.PERL_X)&&(i.more()&&i.lookingAt("?")&&(i.skip(1),s^=xd.NON_GREEDY),-1!==o))throw new Fd(Cm.ERR_INVALID_REPEAT_OP,i.from(o));const a=this.stack.length;if(0===a)throw new Fd(Cm.ERR_MISSING_REPEAT_ARGUMENT,i.from(r));const l=this.stack[a-1];if(Gd.isPseudoOp(l.op))throw new Fd(Cm.ERR_MISSING_REPEAT_ARGUMENT,i.from(r));const c=this.newRegexp(e);c.min=t,c.max=n,c.flags=s,c.subs=[l],this.stack[a-1]=c}concat(){this.maybeConcat(-1,0);const e=this.popToPseudo();return 0===e.length?this.push(this.newRegexp(Gd.Op.EMPTY_MATCH)):this.push(this.collapse(e,Gd.Op.CONCAT))}alternate(){const e=this.popToPseudo();return e.length>0&&this.cleanAlt(e[e.length-1]),0===e.length?this.push(this.newRegexp(Gd.Op.NO_MATCH)):this.push(this.collapse(e,Gd.Op.ALTERNATE))}cleanAlt(e){e.op===Gd.Op.CHAR_CLASS&&(e.runes=new bm(e.runes).cleanClass().toArray(),2===e.runes.length&&0===e.runes[0]&&e.runes[1]===Ad.MAX_RUNE?(e.runes=null,e.op=Gd.Op.ANY_CHAR):4===e.runes.length&&0===e.runes[0]&&e.runes[1]===Td.CODES.get("\n")-1&&e.runes[2]===Td.CODES.get("\n")+1&&e.runes[3]===Ad.MAX_RUNE&&(e.runes=null,e.op=Gd.Op.ANY_CHAR_NOT_NL))}collapse(e,t){if(1===e.length)return e[0];let n=0;for(let r of e)n+=r.op===t?r.subs.length:1;let r=new Array(n).fill(null),i=0;for(let n of e)n.op===t?(r.splice(i,n.subs.length,...n.subs),i+=n.subs.length,this.reuse(n)):r[i++]=n;let o=this.newRegexp(t);if(o.subs=r,t===Gd.Op.ALTERNATE&&(o.subs=this.factor(o.subs),1===o.subs.length)){const e=o;o=o.subs[0],this.reuse(e)}return o}factor(e){if(e.length<2)return e;let t=0,n=e.length,r=0,i=null,o=0,s=0,a=0;for(let l=0;l<=n;l++){let c=null,u=0,h=0;if(l<n){let n=e[t+l];if(n.op===Gd.Op.CONCAT&&n.subs.length>0&&(n=n.subs[0]),n.op===Gd.Op.LITERAL&&(c=n.runes,u=n.runes.length,h=n.flags&xd.FOLD_CASE),h===s){let e=0;for(;e<o&&e<u&&i[e]===c[e];)e++;if(e>0){o=e;continue}}}if(l===a);else if(l===a+1)e[r++]=e[t+a];else{const n=this.newRegexp(Gd.Op.LITERAL);n.flags=s,n.runes=i.slice(0,o);for(let n=a;n<l;n++)e[t+n]=this.removeLeadingString(e[t+n],o);const c=this.collapse(e.slice(t+a,t+l),Gd.Op.ALTERNATE),u=this.newRegexp(Gd.Op.CONCAT);u.subs=[n,c],e[r++]=u}a=l,i=c,o=u,s=h}n=r,t=0,a=0,r=0;let l=null;for(let i=0;i<=n;i++){let o=null;if(!(i<n&&(o=Cm.leadingRegexp(e[t+i]),null!==l&&l.equals(o)&&(Cm.isCharClass(l)||l.op===Gd.Op.REPEAT&&l.min===l.max&&Cm.isCharClass(l.subs[0]))))){if(i===a);else if(i===a+1)e[r++]=e[t+a];else{const n=l;for(let n=a;n<i;n++){const r=n!==a;e[t+n]=this.removeLeadingRegexp(e[t+n],r)}const o=this.collapse(e.slice(t+a,t+i),Gd.Op.ALTERNATE),s=this.newRegexp(Gd.Op.CONCAT);s.subs=[n,o],e[r++]=s}a=i,l=o}}n=r,t=0,a=0,r=0;for(let i=0;i<=n;i++)if(!(i<n&&Cm.isCharClass(e[t+i]))){if(i===a);else if(i===a+1)e[r++]=e[t+a];else{let n=a;for(let r=a+1;r<i;r++){const i=e[t+n],o=e[t+r];(i.op<o.op||i.op===o.op&&(null!==i.runes?i.runes.length:0)<(null!==o.runes?o.runes.length:0))&&(n=r)}const o=e[t+a];e[t+a]=e[t+n],e[t+n]=o;for(let n=a+1;n<i;n++)Cm.mergeCharClass(e[t+a],e[t+n]),this.reuse(e[t+n]);this.cleanAlt(e[t+a]),e[r++]=e[t+a]}i<n&&(e[r++]=e[t+i]),a=i+1}n=r,t=0,a=0,r=0;for(let i=0;i<n;++i)i+1<n&&e[t+i].op===Gd.Op.EMPTY_MATCH&&e[t+i+1].op===Gd.Op.EMPTY_MATCH||(e[r++]=e[t+i]);return n=r,t=0,e.slice(t,n)}removeLeadingString(e,t){if(e.op===Gd.Op.CONCAT&&e.subs.length>0){const n=this.removeLeadingString(e.subs[0],t);if(e.subs[0]=n,n.op===Gd.Op.EMPTY_MATCH)switch(this.reuse(n),e.subs.length){case 0:case 1:e.op=Gd.Op.EMPTY_MATCH,e.subs=null;break;case 2:{const t=e;e=e.subs[1],this.reuse(t);break}default:e.subs=e.subs.slice(1,e.subs.length)}return e}return e.op===Gd.Op.LITERAL&&(e.runes=e.runes.slice(t,e.runes.length),0===e.runes.length&&(e.op=Gd.Op.EMPTY_MATCH)),e}removeLeadingRegexp(e,t){if(e.op===Gd.Op.CONCAT&&e.subs.length>0){switch(t&&this.reuse(e.subs[0]),e.subs=e.subs.slice(1,e.subs.length),e.subs.length){case 0:e.op=Gd.Op.EMPTY_MATCH,e.subs=Gd.emptySubs();break;case 1:{const t=e;e=e.subs[0],this.reuse(t);break}}return e}return t&&this.reuse(e),this.newRegexp(Gd.Op.EMPTY_MATCH)}parseInternal(){if(0!=(this.flags&xd.LITERAL))return Cm.literalRegexp(this.wholeRegexp,this.flags);let e=-1,t=-1,n=-1;const r=new vm(this.wholeRegexp);for(;r.more();){let i=-1;e:switch(r.peek()){case Td.CODES.get("("):if(0!=(this.flags&xd.PERL_X)&&r.lookingAt("(?")){this.parsePerlFlags(r);break}this.op(Gd.Op.LEFT_PAREN).cap=++this.numCap,r.skip(1);break;case Td.CODES.get("|"):this.parseVerticalBar(),r.skip(1);break;case Td.CODES.get(")"):this.parseRightParen(),r.skip(1);break;case Td.CODES.get("^"):0!=(this.flags&xd.ONE_LINE)?this.op(Gd.Op.BEGIN_TEXT):this.op(Gd.Op.BEGIN_LINE),r.skip(1);break;case Td.CODES.get("$"):0!=(this.flags&xd.ONE_LINE)?this.op(Gd.Op.END_TEXT).flags|=xd.WAS_DOLLAR:this.op(Gd.Op.END_LINE),r.skip(1);break;case Td.CODES.get("."):0!=(this.flags&xd.DOT_NL)?this.op(Gd.Op.ANY_CHAR):this.op(Gd.Op.ANY_CHAR_NOT_NL),r.skip(1);break;case Td.CODES.get("["):this.parseClass(r);break;case Td.CODES.get("*"):case Td.CODES.get("+"):case Td.CODES.get("?"):{i=r.pos();let o=null;switch(r.pop()){case Td.CODES.get("*"):o=Gd.Op.STAR;break;case Td.CODES.get("+"):o=Gd.Op.PLUS;break;case Td.CODES.get("?"):o=Gd.Op.QUEST}this.repeat(o,t,n,i,r,e);break}case Td.CODES.get("{"):{i=r.pos();const o=Cm.parseRepeat(r);if(o<0){r.rewindTo(i),this.literal(r.pop());break}t=o>>16,n=(o&Ad.MAX_BMP)<<16>>16,this.repeat(Gd.Op.REPEAT,t,n,i,r,e);break}case Td.CODES.get("\\"):{const e=r.pos();if(r.skip(1),0!=(this.flags&xd.PERL_X)&&r.more())switch(r.pop()){case Td.CODES.get("A"):this.op(Gd.Op.BEGIN_TEXT);break e;case Td.CODES.get("b"):this.op(Gd.Op.WORD_BOUNDARY);break e;case Td.CODES.get("B"):this.op(Gd.Op.NO_WORD_BOUNDARY);break e;case Td.CODES.get("C"):throw new Fd(Cm.ERR_INVALID_ESCAPE,"\\C");case Td.CODES.get("Q"):{let e=r.rest();const t=e.indexOf("\\E");t>=0&&(e=e.substring(0,t)),r.skipString(e),r.skipString("\\E");let n=0;for(;n<e.length;){const t=e.codePointAt(n);this.literal(t),n+=Pd.charCount(t)}break e}case Td.CODES.get("z"):this.op(Gd.Op.END_TEXT);break e;default:r.rewindTo(e)}const t=this.newRegexp(Gd.Op.CHAR_CLASS);if(t.flags=this.flags,r.lookingAt("\\p")||r.lookingAt("\\P")){const e=new bm;if(this.parseUnicodeClass(r,e)){t.runes=e.toArray(),this.push(t);break e}}const n=new bm;if(this.parsePerlClassEscape(r,n)){t.runes=n.toArray(),this.push(t);break e}r.rewindTo(e),this.reuse(t),this.literal(Cm.parseEscape(r));break}default:this.literal(r.pop())}e=i}if(this.concat(),this.swapVerticalBar()&&this.pop(),this.alternate(),1!==this.stack.length)throw new Fd(Cm.ERR_MISSING_PAREN,this.wholeRegexp);return this.stack[0].namedGroups=this.namedGroups,this.stack[0]}parsePerlFlags(e){const t=e.pos(),n=e.rest();if(n.startsWith("(?P<")){const t=n.indexOf(">");if(t<0)throw new Fd(Cm.ERR_INVALID_NAMED_CAPTURE,n);const r=n.substring(4,t);if(e.skipString(r),e.skip(5),!Cm.isValidCaptureName(r))throw new Fd(Cm.ERR_INVALID_NAMED_CAPTURE,n.substring(0,t));const i=this.op(Gd.Op.LEFT_PAREN);if(i.cap=++this.numCap,this.namedGroups[r])throw new Fd(Cm.ERR_DUPLICATE_NAMED_CAPTURE,r);return this.namedGroups[r]=this.numCap,void(i.name=r)}e.skip(2);let r=this.flags,i=1,o=!1;e:for(;e.more();){const t=e.pop();switch(t){case Td.CODES.get("i"):r|=xd.FOLD_CASE,o=!0;break;case Td.CODES.get("m"):r&=~xd.ONE_LINE,o=!0;break;case Td.CODES.get("s"):r|=xd.DOT_NL,o=!0;break;case Td.CODES.get("U"):r|=xd.NON_GREEDY,o=!0;break;case Td.CODES.get("-"):if(i<0)break e;i=-1,r=~r,o=!1;break;case Td.CODES.get(":"):case Td.CODES.get(")"):if(i<0){if(!o)break e;r=~r}return t===Td.CODES.get(":")&&this.op(Gd.Op.LEFT_PAREN),void(this.flags=r);default:break e}}throw new Fd(Cm.ERR_INVALID_PERL_OP,e.from(t))}parseVerticalBar(){this.concat(),this.swapVerticalBar()||this.op(Gd.Op.VERTICAL_BAR)}swapVerticalBar(){const e=this.stack.length;if(e>=3&&this.stack[e-2].op===Gd.Op.VERTICAL_BAR&&Cm.isCharClass(this.stack[e-1])&&Cm.isCharClass(this.stack[e-3])){let t=this.stack[e-1],n=this.stack[e-3];if(t.op>n.op){const r=n;n=t,t=r,this.stack[e-3]=n}return Cm.mergeCharClass(n,t),this.reuse(t),this.pop(),!0}if(e>=2){const t=this.stack[e-1],n=this.stack[e-2];if(n.op===Gd.Op.VERTICAL_BAR)return e>=3&&this.cleanAlt(this.stack[e-3]),this.stack[e-2]=t,this.stack[e-1]=n,!0}return!1}parseRightParen(){if(this.concat(),this.swapVerticalBar()&&this.pop(),this.alternate(),this.stack.length<2)throw new Fd(Cm.ERR_INTERNAL_ERROR,"stack underflow");const e=this.pop(),t=this.pop();if(t.op!==Gd.Op.LEFT_PAREN)throw new Fd(Cm.ERR_MISSING_PAREN,this.wholeRegexp);this.flags=t.flags,0===t.cap?this.push(e):(t.op=Gd.Op.CAPTURE,t.subs=[e],this.push(t))}parsePerlClassEscape(e,t){const n=e.pos();if(0==(this.flags&xd.PERL_X)||!e.more()||e.pop()!==Td.CODES.get("\\")||!e.more())return!1;e.pop();const r=e.from(n),i=nm.has(r)?nm.get(r):null;return null!==i&&(t.appendGroup(i,0!=(this.flags&xd.FOLD_CASE)),!0)}parseNamedClass(e,t){const n=e.rest(),r=n.indexOf(":]");if(r<0)return!1;const i=n.substring(0,r+2);e.skipString(i);const o=ym.has(i)?ym.get(i):null;if(null===o)throw new Fd(Cm.ERR_INVALID_CHAR_RANGE,i);return t.appendGroup(o,0!=(this.flags&xd.FOLD_CASE)),!0}parseUnicodeClass(e,t){const n=e.pos();if(0==(this.flags&xd.UNICODE_GROUPS)||!e.lookingAt("\\p")&&!e.lookingAt("\\P"))return!1;e.skip(1);let r,i=1,o=e.pop();if(o===Td.CODES.get("P")&&(i=-1),!e.more())throw e.rewindTo(n),new Fd(Cm.ERR_INVALID_CHAR_RANGE,e.rest());if(o=e.pop(),o!==Td.CODES.get("{"))r=Pd.runeToString(o);else{const t=e.rest(),i=t.indexOf("}");if(i<0)throw e.rewindTo(n),new Fd(Cm.ERR_INVALID_CHAR_RANGE,e.rest());r=t.substring(0,i),e.skipString(r),e.skip(1)}0!==r.length&&r.codePointAt(0)===Td.CODES.get("^")&&(i=0-i,r=r.substring(1));const s=Cm.unicodeTable(r);if(null===s)throw new Fd(Cm.ERR_INVALID_CHAR_RANGE,e.from(n));const a=s.first,l=s.second;if(0==(this.flags&xd.FOLD_CASE)||null===l)t.appendTableWithSign(a,i);else{const e=(new bm).appendTable(a).appendTable(l).cleanClass().toArray();t.appendClassWithSign(e,i)}return!0}parseClass(e){const t=e.pos();e.skip(1);const n=this.newRegexp(Gd.Op.CHAR_CLASS);n.flags=this.flags;const r=new bm;let i=1;e.more()&&e.lookingAt("^")&&(i=-1,e.skip(1),0==(this.flags&xd.CLASS_NL)&&r.appendRange(Td.CODES.get("\n"),Td.CODES.get("\n")));let o=!0;for(;!e.more()||e.peek()!==Td.CODES.get("]")||o;){if(e.more()&&e.lookingAt("-")&&0==(this.flags&xd.PERL_X)&&!o){const n=e.rest();if("-"===n||!n.startsWith("-]"))throw e.rewindTo(t),new Fd(Cm.ERR_INVALID_CHAR_RANGE,e.rest())}o=!1;const n=e.pos();if(e.lookingAt("[:")){if(this.parseNamedClass(e,r))continue;e.rewindTo(n)}if(this.parseUnicodeClass(e,r))continue;if(this.parsePerlClassEscape(e,r))continue;e.rewindTo(n);const i=Cm.parseClassChar(e,t);let s=i;if(e.more()&&e.lookingAt("-"))if(e.skip(1),e.more()&&e.lookingAt("]"))e.skip(-1);else if(s=Cm.parseClassChar(e,t),s<i)throw new Fd(Cm.ERR_INVALID_CHAR_RANGE,e.from(n));0==(this.flags&xd.FOLD_CASE)?r.appendRange(i,s):r.appendFoldedRange(i,s)}e.skip(1),r.cleanClass(),i<0&&r.negateClass(),n.runes=r.toArray(),this.push(n)}}class Sm{constructor(){this.inst=null,this.cap=[]}}class Em{constructor(){this.sparse=[],this.densePcs=[],this.denseThreads=[],this.size=0}contains(e){const t=this.sparse[e];return t<this.size&&this.densePcs[t]===e}isEmpty(){return 0===this.size}add(e){const t=this.size++;return this.sparse[e]=t,this.denseThreads[t]=null,this.densePcs[t]=e,t}clear(){this.sparse=[],this.densePcs=[],this.denseThreads=[],this.size=0}toString(){let e="{";for(let t=0;t<this.size;t++)0!==t&&(e+=", "),e+=this.densePcs[t];return e+="}",e}}class km{static fromRE2(e){const t=new km;return t.prog=e.prog,t.re2=e,t.q0=new Em(t.prog.numInst()),t.q1=new Em(t.prog.numInst()),t.pool=[],t.poolSize=0,t.matched=!1,t.matchcap=Array(t.prog.numCap<2?2:t.prog.numCap).fill(0),t.ncap=0,t}static fromMachine(e){const t=new km;return t.re2=e.re2,t.prog=e.prog,t.q0=e.q0,t.q1=e.q1,t.pool=e.pool,t.poolSize=e.poolSize,t.matched=e.matched,t.matchcap=e.matchcap,t.ncap=e.ncap,t}init(e){this.ncap=e,e>this.matchcap.length?this.initNewCap(e):this.resetCap(e)}resetCap(e){for(let t=0;t<this.poolSize;t++)this.pool[t].cap=Array(e).fill(0)}initNewCap(e){for(let t=0;t<this.poolSize;t++)this.pool[t].cap=Array(e).fill(0);this.matchcap=Array(e).fill(0)}submatches(){return 0===this.ncap?Pd.emptyInts():this.matchcap.slice(0,this.ncap)}alloc(e){let t;return this.poolSize>0?(this.poolSize--,t=this.pool[this.poolSize]):t=new Sm,t.inst=e,t}freeQueue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e.size-t,r=this.poolSize+n;this.pool.length<r&&(this.pool=this.pool.slice(0,Math.max(2*this.pool.length,r)));for(let n=t;n<e.size;n++){const t=e.denseThreads[n];null!==t&&(this.pool[this.poolSize]=t,this.poolSize++)}e.clear()}freeThread(e){this.pool.length<=this.poolSize&&(this.pool=this.pool.slice(0,2*this.pool.length)),this.pool[this.poolSize]=e,this.poolSize++}match(e,t,n){const r=this.re2.cond;if(r===Pd.EMPTY_ALL)return!1;if((n===xd.ANCHOR_START||n===xd.ANCHOR_BOTH)&&0!==t)return!1;this.matched=!1,this.matchcap=Array(this.prog.numCap).fill(-1);let i,o=this.q0,s=this.q1,a=e.step(t),l=a>>3,c=7&a,u=-1,h=0;for(a!==$d.EOF()&&(a=e.step(t+c),u=a>>3,h=7&a),i=0===t?Pd.emptyOpContext(-1,l):e.context(t);;){if(o.isEmpty()){if(0!=(r&Pd.EMPTY_BEGIN_TEXT)&&0!==t)break;if(this.matched)break;if(0!==this.re2.prefix.length&&u!==this.re2.prefixRune&&e.canCheckPrefix()){const n=e.index(this.re2,t);if(n<0)break;t+=n,a=e.step(t),l=a>>3,c=7&a,a=e.step(t+c),u=a>>3,h=7&a}}this.matched||0!==t&&n!==xd.UNANCHORED||(this.ncap>0&&(this.matchcap[0]=t),this.add(o,this.prog.start,t,this.matchcap,i,null));const p=t+c;if(i=e.context(p),this.step(o,s,t,p,l,i,n,t===e.endPos()),0===c)break;if(0===this.ncap&&this.matched)break;t+=c,l=u,c=h,-1!==l&&(a=e.step(t+c),u=a>>3,h=7&a);const d=o;o=s,s=d}return this.freeQueue(s),this.matched}step(e,t,n,r,i,o,s,a){const l=this.re2.longest;for(let c=0;c<e.size;c++){let u=e.denseThreads[c];if(null===u)continue;if(l&&this.matched&&this.ncap>0&&this.matchcap[0]<u.cap[0]){this.freeThread(u);continue}const h=u.inst;let p=!1;switch(h.op){case Vd.MATCH:if(s===xd.ANCHOR_BOTH&&!a)break;this.ncap>0&&(!l||!this.matched||this.matchcap[1]<n)&&(u.cap[1]=n,this.matchcap=u.cap.slice(0,this.ncap)),l||this.freeQueue(e,c+1),this.matched=!0;break;case Vd.RUNE:p=h.matchRune(i);break;case Vd.RUNE1:p=i===h.runes[0];break;case Vd.RUNE_ANY:p=!0;break;case Vd.RUNE_ANY_NOT_NL:p=i!==Td.CODES.get("\n");break;default:throw new Error("bad inst")}p&&(u=this.add(t,h.out,r,u.cap,o,u)),null!==u&&(this.freeThread(u),e.denseThreads[c]=null)}e.clear()}add(e,t,n,r,i,o){if(0===t)return o;if(e.contains(t))return o;const s=e.add(t),a=this.prog.inst[t];switch(a.op){case Vd.FAIL:break;case Vd.ALT:case Vd.ALT_MATCH:o=this.add(e,a.out,n,r,i,o),o=this.add(e,a.arg,n,r,i,o);break;case Vd.EMPTY_WIDTH:0==(a.arg&~i)&&(o=this.add(e,a.out,n,r,i,o));break;case Vd.NOP:o=this.add(e,a.out,n,r,i,o);break;case Vd.CAPTURE:if(a.arg<this.ncap){const t=r[a.arg];r[a.arg]=n,this.add(e,a.out,n,r,i,null),r[a.arg]=t}else o=this.add(e,a.out,n,r,i,o);break;case Vd.MATCH:case Vd.RUNE:case Vd.RUNE1:case Vd.RUNE_ANY:case Vd.RUNE_ANY_NOT_NL:null===o?o=this.alloc(a):o.inst=a,this.ncap>0&&o.cap!==r&&(o.cap=r.slice(0,this.ncap)),e.denseThreads[s]=o,o=null;break;default:throw new Error("unhandled")}return o}}class Rm{constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}compareAndSet(e,t){return this.value===e&&(this.value=t,!0)}}class xm{static initTest(e){const t=xm.compile(e),n=new xm(t.expr,t.prog,t.numSubexp,t.longest);return n.cond=t.cond,n.prefix=t.prefix,n.prefixUTF8=t.prefixUTF8,n.prefixComplete=t.prefixComplete,n.prefixRune=t.prefixRune,n}static compile(e){return xm.compileImpl(e,xd.PERL,!1)}static compilePOSIX(e){return xm.compileImpl(e,xd.POSIX,!0)}static compileImpl(e,t,n){let r=Cm.parse(e,t);const i=r.maxCap();r=Qd.simplify(r);const o=Xd.compileRegexp(r),s=new xm(e,o,i,n),[a,l]=o.prefix();return s.prefixComplete=a,s.prefix=l,s.prefixUTF8=Pd.stringToUtf8ByteArray(s.prefix),s.prefix.length>0&&(s.prefixRune=s.prefix.codePointAt(0)),s.namedGroups=r.namedGroups,s}static match(e,t){return xm.compile(e).match(t)}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.expr=e,this.prog=t,this.numSubexp=n,this.longest=r,this.cond=t.startCond(),this.prefix=null,this.prefixUTF8=null,this.prefixComplete=!1,this.prefixRune=0,this.pooled=new Rm}numberOfCapturingGroups(){return this.numSubexp}get(){let e;do{e=this.pooled.get()}while(e&&!this.pooled.compareAndSet(e,e.next));return e}reset(){this.pooled.set(null)}put(e,t){let n=this.pooled.get();do{n=this.pooled.get(),!t&&n&&(e=km.fromMachine(e),t=!0),e.next!==n&&(e.next=n)}while(!this.pooled.compareAndSet(n,e))}toString(){return this.expr}doExecute(e,t,n,r){let i=this.get(),o=!1;i?null!==i.next&&(i=km.fromMachine(i),o=!0):(i=km.fromRE2(this),o=!0),i.init(r);const s=i.match(e,t,n)?i.submatches():null;return this.put(i,o),s}match(e){return null!==this.doExecute(jd.fromUTF16(e),0,xd.UNANCHORED,0)}matchWithGroup(e,t,n,r,i){return e instanceof _d||(e=Md.utf16(e)),this.matchMachineInput(e,t,n,r,i)}matchMachineInput(e,t,n,r,i){if(t>n)return[!1,null];const o=e.isUTF16Encoding()?jd.fromUTF16(e.asCharSequence(),0,n):jd.fromUTF8(e.asBytes(),0,n),s=this.doExecute(o,t,r,2*i);return null===s?[!1,null]:[!0,s]}matchUTF8(e){return null!==this.doExecute(jd.fromUTF8(e),0,xd.UNANCHORED,0)}replaceAll(e,t){return this.replaceAllFunc(e,(()=>t),2*e.length+1)}replaceFirst(e,t){return this.replaceAllFunc(e,(()=>t),1)}replaceAllFunc(e,t,n){let r=0,i=0,o="";const s=jd.fromUTF16(e);let a=0;for(;i<=e.length;){const l=this.doExecute(s,i,xd.UNANCHORED,2);if(null===l||0===l.length)break;o+=e.substring(r,l[0]),(l[1]>r||0===l[0])&&(o+=t(e.substring(l[0],l[1])),a++),r=l[1];const c=7&s.step(i);if(i+c>l[1]?i+=c:i+1>l[1]?i++:i=l[1],a>=n)break}return o+=e.substring(r),o}pad(e){if(null===e)return null;let t=2*(1+this.numSubexp);if(e.length<t){let n=new Array(t).fill(-1);for(let t=0;t<e.length;t++)n[t]=e[t];e=n}return e}allMatches(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e,r=[];const i=e.endPos();t<0&&(t=i+1);let o=0,s=0,a=-1;for(;s<t&&o<=i;){const t=this.doExecute(e,o,xd.UNANCHORED,this.prog.numCap);if(null===t||0===t.length)break;let l=!0;if(t[1]===o){t[0]===a&&(l=!1);const n=e.step(o);n<0?o=i+1:o+=7&n}else o=t[1];a=t[1],l&&(r.push(n(this.pad(t))),s++)}return r}findUTF8(e){const t=this.doExecute(jd.fromUTF8(e),0,xd.UNANCHORED,2);return null===t?null:e.slice(t[0],t[1])}findUTF8Index(e){const t=this.doExecute(jd.fromUTF8(e),0,xd.UNANCHORED,2);return null===t?null:t.slice(0,2)}find(e){const t=this.doExecute(jd.fromUTF16(e),0,xd.UNANCHORED,2);return null===t?"":e.substring(t[0],t[1])}findIndex(e){return this.doExecute(jd.fromUTF16(e),0,xd.UNANCHORED,2)}findUTF8Submatch(e){const t=this.doExecute(jd.fromUTF8(e),0,xd.UNANCHORED,this.prog.numCap);if(null===t)return null;const n=new Array(1+this.numSubexp).fill(null);for(let r=0;r<n.length;r++)2*r<t.length&&t[2*r]>=0&&(n[r]=e.slice(t[2*r],t[2*r+1]));return n}findUTF8SubmatchIndex(e){return this.pad(this.doExecute(jd.fromUTF8(e),0,xd.UNANCHORED,this.prog.numCap))}findSubmatch(e){const t=this.doExecute(jd.fromUTF16(e),0,xd.UNANCHORED,this.prog.numCap);if(null===t)return null;const n=new Array(1+this.numSubexp).fill(null);for(let r=0;r<n.length;r++)2*r<t.length&&t[2*r]>=0&&(n[r]=e.substring(t[2*r],t[2*r+1]));return n}findSubmatchIndex(e){return this.pad(this.doExecute(jd.fromUTF16(e),0,xd.UNANCHORED,this.prog.numCap))}findAllUTF8(e,t){const n=this.allMatches(jd.fromUTF8(e),t,(t=>e.slice(t[0],t[1])));return 0===n.length?null:n}findAllUTF8Index(e,t){const n=this.allMatches(jd.fromUTF8(e),t,(e=>e.slice(0,2)));return 0===n.length?null:n}findAll(e,t){const n=this.allMatches(jd.fromUTF16(e),t,(t=>e.substring(t[0],t[1])));return 0===n.length?null:n}findAllIndex(e,t){const n=this.allMatches(jd.fromUTF16(e),t,(e=>e.slice(0,2)));return 0===n.length?null:n}findAllUTF8Submatch(e,t){const n=this.allMatches(jd.fromUTF8(e),t,(t=>{let n=new Array(t.length/2|0).fill(null);for(let r=0;r<n.length;r++)t[2*r]>=0&&(n[r]=e.slice(t[2*r],t[2*r+1]));return n}));return 0===n.length?null:n}findAllUTF8SubmatchIndex(e,t){const n=this.allMatches(jd.fromUTF8(e),t);return 0===n.length?null:n}findAllSubmatch(e,t){const n=this.allMatches(jd.fromUTF16(e),t,(t=>{let n=new Array(t.length/2|0).fill(null);for(let r=0;r<n.length;r++)t[2*r]>=0&&(n[r]=e.substring(t[2*r],t[2*r+1]));return n}));return 0===n.length?null:n}findAllSubmatchIndex(e,t){const n=this.allMatches(jd.fromUTF16(e),t);return 0===n.length?null:n}}class Tm{static CASE_INSENSITIVE=1;static DOTALL=2;static MULTILINE=4;static DISABLE_UNICODE_GROUPS=8;static LONGEST_MATCH=16;static quote(e){return Pd.quoteMeta(e)}static compile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;if(0!=(t&Tm.CASE_INSENSITIVE)&&(n=`(?i)${n}`),0!=(t&Tm.DOTALL)&&(n=`(?s)${n}`),0!=(t&Tm.MULTILINE)&&(n=`(?m)${n}`),0!=(t&~(Tm.MULTILINE|Tm.DOTALL|Tm.CASE_INSENSITIVE|Tm.DISABLE_UNICODE_GROUPS|Tm.LONGEST_MATCH)))throw new Ud("Flags should only be a combination of MULTILINE, DOTALL, CASE_INSENSITIVE, DISABLE_UNICODE_GROUPS, LONGEST_MATCH");let r=xd.PERL;0!=(t&Tm.DISABLE_UNICODE_GROUPS)&&(r&=~xd.UNICODE_GROUPS);const i=new Tm(e,t);return i.re2Input=xm.compileImpl(n,r,0!=(t&Tm.LONGEST_MATCH)),i}static matches(e,t){return Tm.compile(e).matcher(t).matches()}static initTest(e,t,n){if(null==e)throw new Error("pattern is null");if(null==n)throw new Error("re2 is null");const r=new Tm(e,t);return r.re2Input=n,r}constructor(e,t){this.patternInput=e,this.flagsInput=t}reset(){this.re2Input.reset()}flags(){return this.flagsInput}pattern(){return this.patternInput}re2(){return this.re2Input}matches(e){return this.matcher(e).matches()}matcher(e){return Array.isArray(e)&&(e=Md.utf8(e)),new Wd(this,e)}split(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.matcher(e),r=[];let i=0,o=0;for(;n.find();)if(0!==o||0!==n.end()){if(t>0&&r.length===t-1)break;if(o===n.start()){if(0===t){i+=1,o=n.end();continue}}else for(;i>0;)r.push(""),i-=1;r.push(n.substring(o,n.start())),o=n.end()}else o=n.end();if(0===t&&o!==n.inputLength()){for(;i>0;)r.push(""),i-=1;r.push(n.substring(o,n.inputLength()))}return 0===t&&0!==r.length||r.push(n.substring(o,n.inputLength())),r}toString(){return this.patternInput}groupCount(){return this.re2Input.numberOfCapturingGroups()}namedGroups(){return this.re2Input.namedGroups}equals(e){return this===e||null!==e&&this.constructor===e.constructor&&this.flagsInput===e.flagsInput&&this.patternInput===e.patternInput}}class Dm{failed=[];bypassed=[];get status(){return 0===this.failed.length?0===this.bypassed.length?"pass":"bypass":"fail"}}class Am{rules=[];push(e){void 0!==e&&this.rules.push(e)}get hasRules(){return this.rules.length>0}getFailedRules(e){const t=new Dm;for(const n of this.rules)n.matcher(e)||("bypass"===n.enforced?t.bypassed.push({description:n.humanDescription,rulesetId:n.rulesetId}):t.failed.push({description:n.humanDescription,rulesetId:n.rulesetId}));return t}}class Pm{basicCommitWarning=!1;creationRestricted=!1;signedCommitsRequired=!1;pullRequestRequired=!1;commitMessagePatterns=new Am;commitAuthorEmailPatterns=new Am;committerEmailPatterns=new Am;branchNamePatterns=new Am}function Im(e,t){if(!e||!t||!_r(t))return!1;const{endpoint:n,owner:r,isPrivate:i}=t.gitHubRepository;return!(!In(n)||!(e.login!==r.login||e.plan&&"free"!==e.plan)&&i)}async function _m(e,t,n){const r=new Pm;let i;for(const o of e){const e=t.get(o.ruleset_id);if(null==e)continue;const s="always"!==e.current_user_can_bypass||"bypass";switch(o.type){case Wn.Update:case Wn.RequiredDeployments:case Wn.RequiredStatusChecks:r.basicCommitWarning=!0===r.basicCommitWarning||s;break;case Wn.Creation:r.creationRestricted=!0===r.creationRestricted||s;break;case Wn.RequiredSignatures:i??=await sl(n,"commit.gpgsign")??!1,!0!==i&&(r.signedCommitsRequired=!0===r.signedCommitsRequired||s);break;case Wn.PullRequest:r.pullRequestRequired=!0===r.pullRequestRequired||s;break;case Wn.CommitMessagePattern:r.commitMessagePatterns.push(Nm(o,s));break;case Wn.CommitAuthorEmailPattern:r.commitAuthorEmailPatterns.push(Nm(o,s));break;case Wn.CommitterEmailPattern:r.committerEmailPatterns.push(Nm(o,s));break;case Wn.BranchNamePattern:r.branchNamePatterns.push(Nm(o,s))}}return r}function Nm(e,t){if(e?.parameters)return{enforced:t,matcher:Mm(e.parameters),humanDescription:Om(e.parameters),rulesetId:e.ruleset_id}}function Om(e){let t="must ";if(e.negate&&(t+="not "),e.operator===$n.RegexMatch)return t+`match the regular expression "${e.pattern}"`;switch(e.operator){case $n.StartsWith:t+="start with ";break;case $n.EndsWith:t+="end with ";break;case $n.Contains:t+="contain "}return t+`"${e.pattern}"`}function Mm(e){if(!e)return()=>!1;let t;switch(e.operator){case $n.StartsWith:t=Tm.compile(`^${Tm.quote(e.pattern)}`);break;case $n.EndsWith:t=Tm.compile(`${Tm.quote(e.pattern)}$`);break;case $n.Contains:t=Tm.compile(`.*${Tm.quote(e.pattern)}.*`);break;case $n.RegexMatch:t=Tm.compile(e.pattern)}return t?e.negate?e=>!t.matcher(e).find():e=>t.matcher(e).find():()=>!1}const Bm="last-selected-repository-id",Fm="recently-selected-repositories",Lm="sidebar-width",Hm="commit-summary-width",Um="stashed-files-width",Wm="pull-request-files-width",$m="askToMoveToApplicationsFolder",zm="confirmRepoRemoval",qm="showCommitLengthWarning",jm="confirmDiscardChanges",Gm="confirmDiscardStash",Vm="confirmCheckoutCommit",Km="confirmDiscardChangesPermanentlyKey",Ym="confirmForcePush",Xm="confirmUndoCommit",Qm="uncommittedChangesStrategyKind",Zm="externalEditor",Jm=Ao.TwoUp,ef="image-diff-type",tf="hide-whitespace-in-changes-diff",nf="hide-whitespace-in-diff",rf="hide-whitespace-in-pull-request-diff",of="commit-spellcheck-enabled",sf="shell",af="enable-repository-indicators",lf="pull-request-suggested-next-action-key";function cf(e){return e instanceof at?cf(e.underlyingError):e instanceof zw&&e.result.gitError===Ua.ko.LocalChangesOverwritten}function uf(e,t=-1/0,n=1/0){const r=n<t?t:n;return{value:"number"==typeof e?e:e.value,min:t,max:r}}const hf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,pf=Object.keys,df=Array.isArray;function mf(e,t){return"object"!=typeof t||pf(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||hf.Promise||(hf.Promise=Promise);const ff=Object.getPrototypeOf,gf={}.hasOwnProperty;function yf(e,t){return gf.call(e,t)}function bf(e,t){"function"==typeof t&&(t=t(ff(e))),("undefined"==typeof Reflect?pf:Reflect.ownKeys)(t).forEach((n=>{vf(e,n,t[n])}))}const wf=Object.defineProperty;function vf(e,t,n,r){wf(e,t,mf(n&&yf(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Cf(e){return{from:function(t){return e.prototype=Object.create(t.prototype),vf(e.prototype,"constructor",e),{extend:bf.bind(null,e.prototype)}}}}const Sf=Object.getOwnPropertyDescriptor;function Ef(e,t){let n;return Sf(e,t)||(n=ff(e))&&Ef(n,t)}const kf=[].slice;function Rf(e,t,n){return kf.call(e,t,n)}function xf(e,t){return t(e)}function Tf(e){if(!e)throw new Error("Assertion Failed")}function Df(e){hf.setImmediate?setImmediate(e):setTimeout(e,0)}function Af(e,t){return e.reduce(((e,n,r)=>{var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function Pf(e,t){if(yf(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=Pf(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var a=e[t.substr(0,s)];return void 0===a?void 0:Pf(a,t.substr(s+1))}}function If(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){Tf("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)If(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var s=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?df(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l&&yf(e,s)||(l=e[s]={}),If(l,a,n)}}else void 0===n?df(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function _f(e){var t={};for(var n in e)yf(e,n)&&(t[n]=e[n]);return t}const Nf=[].concat;function Of(e){return Nf.apply([],e)}const Mf="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Of([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>hf[e])),Bf=Mf.map((e=>hf[e]));Af(Mf,(e=>[e,!0]));let Ff=null;function Lf(e){Ff="undefined"!=typeof WeakMap&&new WeakMap;const t=Hf(e);return Ff=null,t}function Hf(e){if(!e||"object"!=typeof e)return e;let t=Ff&&Ff.get(e);if(t)return t;if(df(e)){t=[],Ff&&Ff.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Hf(e[n]))}else if(Bf.indexOf(e.constructor)>=0)t=e;else{const n=ff(e);for(var i in t=n===Object.prototype?{}:Object.create(n),Ff&&Ff.set(e,t),e)yf(e,i)&&(t[i]=Hf(e[i]))}return t}const{toString:Uf}={};function Wf(e){return Uf.call(e).slice(8,-1)}const $f="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",zf="symbol"==typeof $f?function(e){var t;return null!=e&&(t=e[$f])&&t.apply(e)}:function(){return null},qf={};function jf(e){var t,n,r,i;if(1===arguments.length){if(df(e))return e.slice();if(this===qf&&"string"==typeof e)return[e];if(i=zf(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Gf="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var Vf="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Kf(e,t){Vf=e,Yf=t}var Yf=()=>!0;const Xf=!new Error("").stack;function Qf(){if(Xf)try{throw Qf.arguments,new Error}catch(e){return e}return new Error}function Zf(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Yf).map((e=>"\n"+e)).join("")):""}var Jf=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],eg=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Jf),tg={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ng(e,t){this._e=Qf(),this.name=e,this.message=t}function rg(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function ig(e,t,n,r){this._e=Qf(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=rg(e,t)}function og(e,t){this._e=Qf(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=rg(e,t)}Cf(ng).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Zf(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Cf(ig).from(ng),Cf(og).from(ng);var sg=eg.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const ag=ng;var lg=eg.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=Qf(),this.name=n,e?"string"==typeof e?(this.message=`${e}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=tg[t]||n,this.inner=null)}return Cf(r).from(ag),e[t]=r,e}),{});lg.Syntax=SyntaxError,lg.Type=TypeError,lg.Range=RangeError;var cg=Jf.reduce(((e,t)=>(e[t+"Error"]=lg[t],e)),{}),ug=eg.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=lg[t]),e)),{});function hg(){}function pg(e){return e}function dg(e,t){return null==e||e===pg?t:function(n){return t(e(n))}}function mg(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function fg(e,t){return e===hg?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?mg(r,this.onsuccess):r),i&&(this.onerror=this.onerror?mg(i,this.onerror):i),void 0!==o?o:n}}function gg(e,t){return e===hg?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?mg(n,this.onsuccess):n),r&&(this.onerror=this.onerror?mg(r,this.onerror):r)}}function yg(e,t){return e===hg?t:function(n){var r=e.apply(this,arguments);mf(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?mg(i,this.onsuccess):i),o&&(this.onerror=this.onerror?mg(o,this.onerror):o),void 0===r?void 0===s?void 0:s:mf(r,s)}}function bg(e,t){return e===hg?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function wg(e,t){return e===hg?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}ug.ModifyError=ig,ug.DexieError=ng,ug.BulkError=og;var vg={};const[Cg,Sg,Eg]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,ff(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,ff(t),e]})(),kg=Sg&&Sg.then,Rg=Cg&&Cg.constructor,xg=!!Eg;var Tg=!1,Dg=Eg?()=>{Eg.then(Qg)}:hf.setImmediate?setImmediate.bind(null,Qg):hf.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{Qg(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Qg,0)},Ag=function(e,t){Lg.push([e,t]),Ig&&(Dg(),Ig=!1)},Pg=!0,Ig=!0,_g=[],Ng=[],Og=null,Mg=pg,Bg={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Cy,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{Cy(e[0],e[1])}catch(e){}}))}},Fg=Bg,Lg=[],Hg=0,Ug=[];function Wg(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=hg,this._lib=!1;var t=this._PSD=Fg;if(Vf&&(this._stackHolder=Qf(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==vg)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&jg(this,this._value))}this._state=null,this._value=null,++t.ref,qg(this,e)}const $g={get:function(){var e=Fg,t=ay;function n(n,r){var i=!e.global&&(e!==Fg||t!==ay);const o=i&&!hy();var s=new Wg(((t,s)=>{Vg(this,new zg(wy(n,e,i,o),wy(r,e,i,o),t,s,e))}));return Vf&&Xg(s,this),s}return n.prototype=vg,n},set:function(e){vf(this,"then",e&&e.prototype===vg?$g:{get:function(){return e},set:$g.set})}};function zg(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function qg(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Zg();t&&"function"==typeof t.then?qg(e,((e,n)=>{t instanceof Wg?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Gg(e)),n&&Jg()}}),jg.bind(null,e))}catch(t){jg(e,t)}}function jg(e,t){if(Ng.push(t),null===e._state){var n=e._lib&&Zg();t=Mg(t),e._state=!1,e._value=t,Vf&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=Ef(t,"stack");t._promise=e,vf(t,"stack",{get:()=>Tg?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){_g.some((t=>t._value===e._value))||_g.push(e)}(e),Gg(e),n&&Jg()}}function Gg(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Vg(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===Hg&&(++Hg,Ag((()=>{0==--Hg&&ey()}),[]))}function Vg(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Hg,Ag(Kg,[n,e,t])}else e._listeners.push(t)}function Kg(e,t,n){try{Og=t;var r,i=t._value;t._state?r=e(i):(Ng.length&&(Ng=[]),r=e(i),-1===Ng.indexOf(i)&&function(e){for(var t=_g.length;t;)if(_g[--t]._value===e._value)return void _g.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Og=null,0==--Hg&&ey(),--n.psd.ref||n.psd.finalize()}}function Yg(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,s=e._value;null!=s?(i=s.name||"Error",o=s.message||s,r=Zf(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return Vf&&((r=Zf(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Yg(e._prev,t,n)),t}function Xg(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Qg(){Zg()&&Jg()}function Zg(){var e=Pg;return Pg=!1,Ig=!1,e}function Jg(){var e,t,n;do{for(;Lg.length>0;)for(e=Lg,Lg=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Lg.length>0);Pg=!0,Ig=!0}function ey(){var e=_g;_g=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ug.slice(0),n=t.length;n;)t[--n]()}function ty(e){return new Wg(vg,!1,e)}function ny(e,t){var n=Fg;return function(){var r=Zg(),i=Fg;try{return fy(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{fy(i,!1),r&&Jg()}}}bf(Wg.prototype,{then:$g,_then:function(e,t){Vg(this,new zg(null,null,e,t,Fg))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):ty(e))):this.then(null,(e=>e&&e.name===t?n(e):ty(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),ty(t))))},stack:{get:function(){if(this._stack)return this._stack;try{Tg=!0;var e=Yg(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Tg=!1}}},timeout:function(e,t){return e<1/0?new Wg(((n,r)=>{var i=setTimeout((()=>r(new lg.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&vf(Wg.prototype,Symbol.toStringTag,"Dexie.Promise"),Bg.env=gy(),bf(Wg,{all:function(){var e=jf.apply(null,arguments).map(py);return new Wg((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((i,o)=>Wg.resolve(i).then((n=>{e[o]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Wg)return e;if(e&&"function"==typeof e.then)return new Wg(((t,n)=>{e.then(t,n)}));var t=new Wg(vg,!0,e);return Xg(t,Og),t},reject:ty,race:function(){var e=jf.apply(null,arguments).map(py);return new Wg(((t,n)=>{e.map((e=>Wg.resolve(e).then(t,n)))}))},PSD:{get:()=>Fg,set:e=>Fg=e},totalEchoes:{get:()=>ay},newPSD:cy,usePSD:yy,scheduler:{get:()=>Ag,set:e=>{Ag=e}},rejectionMapper:{get:()=>Mg,set:e=>{Mg=e}},follow:(e,t)=>new Wg(((n,r)=>cy(((t,n)=>{var r=Fg;r.unhandleds=[],r.onunhandled=n,r.finalize=mg((function(){!function(e){Ug.push((function t(){e(),Ug.splice(Ug.indexOf(t),1)})),++Hg,Ag((()=>{0==--Hg&&ey()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),Rg&&(Rg.allSettled&&vf(Wg,"allSettled",(function(){const e=jf.apply(null,arguments).map(py);return new Wg((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,i)=>Wg.resolve(e).then((e=>r[i]={status:"fulfilled",value:e}),(e=>r[i]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),Rg.any&&"undefined"!=typeof AggregateError&&vf(Wg,"any",(function(){const e=jf.apply(null,arguments).map(py);return new Wg(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach(((e,o)=>Wg.resolve(e).then((e=>t(e)),(e=>{i[o]=e,--r||n(new AggregateError(i))}))))}))})));const ry={awaits:0,echoes:0,id:0};var iy=0,oy=[],sy=0,ay=0,ly=0;function cy(e,t,n,r){var i=Fg,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++ly;var s=Bg.env;o.env=xg?{Promise:Wg,PromiseProp:{value:Wg,configurable:!0,writable:!0},all:Wg.all,race:Wg.race,allSettled:Wg.allSettled,any:Wg.any,resolve:Wg.resolve,reject:Wg.reject,nthen:vy(s.nthen,o),gthen:vy(s.gthen,o)}:{},t&&mf(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=yy(o,e,n,r);return 0===o.ref&&o.finalize(),a}function uy(){return ry.id||(ry.id=++iy),++ry.awaits,ry.echoes+=100,ry.id}function hy(){return!!ry.awaits&&(0==--ry.awaits&&(ry.id=0),ry.echoes=100*ry.awaits,!0)}function py(e){return ry.echoes&&e&&e.constructor===Rg?(uy(),e.then((e=>(hy(),e)),(e=>(hy(),Sy(e))))):e}function dy(e){++ay,ry.echoes&&0!=--ry.echoes||(ry.echoes=ry.id=0),oy.push(Fg),fy(e,!0)}function my(){var e=oy[oy.length-1];oy.pop(),fy(e,!1)}function fy(e,t){var n=Fg;if((t?!ry.echoes||sy++&&e===Fg:!sy||--sy&&e===Fg)||by(t?dy.bind(null,e):my),e!==Fg&&(Fg=e,n===Bg&&(Bg.env=gy()),xg)){var r=Bg.env.Promise,i=e.env;Sg.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(hf,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function gy(){var e=hf.Promise;return xg?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(hf,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Sg.then,gthen:e.prototype.then}:{}}function yy(e,t,n,r,i){var o=Fg;try{return fy(e,!0),t(n,r,i)}finally{fy(o,!1)}}function by(e){kg.call(Cg,e)}function wy(e,t,n,r){return"function"!=typeof e?e:function(){var i=Fg;n&&uy(),fy(t,!0);try{return e.apply(this,arguments)}finally{fy(i,!1),r&&by(hy)}}}function vy(e,t){return function(n,r){return e.call(this,wy(n,t),wy(r,t))}}function Cy(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,i={promise:t,reason:e};if(hf.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),mf(r,i)):hf.CustomEvent&&mf(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&hf.dispatchEvent&&(dispatchEvent(r),!hf.PromiseRejectionEvent&&hf.onunhandledrejection))try{hf.onunhandledrejection(r)}catch(e){}Vf&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}-1===(""+kg).indexOf("[native code]")&&(uy=hy=hg);var Sy=Wg.reject;function Ey(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Fg.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===sg.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Ey(e,t,n,r)))):Sy(i)}return i._promise(t,((e,t)=>cy((()=>(Fg.trans=i,r(e,t,i)))))).then((e=>i._completion.then((()=>e))))}if(e._state.openComplete)return Sy(new lg.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Sy(new lg.DatabaseClosed);e.open().catch(hg)}return e._state.dbReadyPromise.then((()=>Ey(e,t,n,r)))}const ky=String.fromCharCode(65535),Ry="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xy=[],Ty="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Dy=Ty,Ay=Ty,Py=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function Iy(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const _y={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ny(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=Lf(t))[e],t)}class Oy{_trans(e,t,n){const r=this._tx||Fg.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new lg.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}const s=Zg();try{return r&&r.db===this.db?r===Fg.trans?r._promise(e,o,n):cy((()=>r._promise(e,o,n)),{trans:r,transless:Fg.transless||Fg}):Ey(this.db,e,[this.name],o)}finally{s&&Jg()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(df(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=pf(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==ky)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&Vf&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}const[s,a]=t.reduce((([t,n],i)=>{const s=r[i],a=e[i];return[t||s,t||!s?Iy(n,s&&s.multi?e=>{const t=Pf(e,i);return df(t)&&t.some((e=>o(a,e)))}:e=>o(a,Pf(e,i))):n]}),[null,null]);return s?this.where(s.name).equals(e[s.keyPath]).filter(a):n?this.filter(a):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,df(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(yf(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){mf(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=Ny(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]}))).then((e=>e.numFailures?Wg.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{If(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||df(e))return this.where(":id").equals(e).modify(t);{const n=Pf(e,this.schema.primKey.keyPath);if(void 0===n)return Sy(new lg.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?pf(t).forEach((n=>{If(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=Ny(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Wg.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{If(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?Wg.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:_y}))).then((e=>e.numFailures?Wg.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new lg.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new lg.InvalidArgument("Arguments objects and keys must have the same length");const s=e.length;let a=o&&n?e.map(Ny(o)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:a,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new og(`${this.name}.bulkAdd(): ${e} of ${s} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:o}=this.schema.primKey;if(o&&r)throw new lg.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new lg.InvalidArgument("Arguments objects and keys must have the same length");const s=e.length;let a=o&&n?e.map(Ny(o)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:a,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new og(`${this.name}.bulkPut(): ${e} of ${s} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new og(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function My(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return s(e);r||(r=bg),i||(i=hg);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function s(e){pf(e).forEach((function(t){var n=e[t];if(df(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new lg.InvalidArgument("Invalid event config");var r=o(t,pg,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){Df((function(){e.apply(null,t)}))}))}))}}))}}function By(e,t){return Cf(t).from({prototype:e}),t}function Fy(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ly(e,t){e.filter=Iy(e.filter,t)}function Hy(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>Iy(r(),t()):t,e.justLimit=n&&!r}function Uy(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new lg.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Wy(e,t,n){const r=Uy(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function $y(e,t,n,r){const i=e.replayFilter?Iy(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},s=(e,n,r)=>{if(!i||i(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var s=n.primaryKey,a=""+s;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(s)),yf(o,a)||(o[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(s,n),zy(Wy(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return zy(Wy(e,r,n),Iy(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function zy(e,t,n,r){var i=ny(r?(e,t,i)=>n(r(e),t,i):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=hg}),(t=>{e.fail(t),n=hg}))||i(e.value,e,(e=>n=e)),n()}))}))}function qy(e,t){try{const n=jy(e),r=jy(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Gy(e),Gy(t));case"Array":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n){const r=qy(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function jy(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=Wf(e);return"ArrayBuffer"===n?"binary":n}function Gy(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Vy{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,Sy.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,Sy.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=Iy(t.algorithm,e)}_iterate(e,t){return $y(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&mf(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>$y(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Fy(t,!0))return n.count({trans:e,query:{index:Uy(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return $y(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-s:n>r?s:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Fy(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Uy(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return $y(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Fy(t)?Hy(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):Hy(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Hy(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Ly(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Ly(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Iy(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Fy(t,!0)&&t.limit>0)return this._read((e=>{var n=Uy(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ly(this._ctx,(function(e){var t=e.primaryKey.toString(),r=yf(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var i=pf(e),o=i.length;r=function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s];Pf(t,s)!==a&&(If(t,s,a),n=!0)}return n}}const s=t.table.core,{outbound:a,extractKey:l}=s.schema.primaryKey,c=this.db._options.modifyChunkSize||200,u=[];let h=0;const p=[],d=(e,t)=>{const{failures:n,numFailures:r}=t;h+=e-r;for(let e of pf(n))u.push(n[e])};return this.clone().primaryKeys().then((i=>{const o=u=>{const h=Math.min(c,i.length-u);return s.getMany({trans:n,keys:i.slice(u,u+h),cache:"immutable"}).then((p=>{const m=[],f=[],g=a?[]:null,y=[];for(let e=0;e<h;++e){const t=p[e],n={value:Lf(t),primKey:i[u+e]};!1!==r.call(n,n.value,n)&&(null==n.value?y.push(i[u+e]):a||0===qy(l(t),l(n.value))?(f.push(n.value),a&&g.push(i[u+e])):(y.push(i[u+e]),m.push(n.value)))}const b=Fy(t)&&t.limit===1/0&&("function"!=typeof e||e===Ky)&&{index:t.index,range:t.range};return Promise.resolve(m.length>0&&s.mutate({trans:n,type:"add",values:m}).then((e=>{for(let t in e.failures)y.splice(parseInt(t),1);d(m.length,e)}))).then((()=>(f.length>0||b&&"object"==typeof e)&&s.mutate({trans:n,type:"put",keys:g,values:f,criteria:b,changeSpec:"function"!=typeof e&&e}).then((e=>d(f.length,e))))).then((()=>(y.length>0||b&&e===Ky)&&s.mutate({trans:n,type:"delete",keys:y,criteria:b}).then((e=>d(y.length,e))))).then((()=>i.length>u+h&&o(u+c)))}))};return o(0).then((()=>{if(u.length>0)throw new ig("Error modifying one or more objects",u,h,p);return i.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Fy(e)&&(e.isPrimKey&&!Ay||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((({failures:e,lastResult:n,results:r,numFailures:i})=>{if(i)throw new ig("Could not delete some values",Object.keys(e).map((t=>e[t])),t-i);return t-i}))))})):this.modify(Ky)}}const Ky=(e,t)=>t.value=null;function Yy(e,t){return e<t?-1:e===t?0:1}function Xy(e,t){return e>t?-1:e===t?0:1}function Qy(e,t,n){var r=e instanceof rb?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Zy(e){return new e.Collection(e,(()=>nb(""))).limit(0)}function Jy(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),a=-1,l=0;l<s;++l){var c=t[l];if(c!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[l],c)<0&&(a=l)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function eb(e,t,n,r){var i,o,s,a,l,c,u,h=n.length;if(!n.every((e=>"string"==typeof e)))return Qy(e,"String expected.");function p(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),o=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),s="next"===e?Yy:Xy;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,u="next"===e?"":r}p("next");var d=new e.Collection(e,(()=>tb(a[0],l[h-1]+r)));d._ondirectionchange=function(e){p(e)};var m=0;return d._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var p=o(i);if(t(p,l,m))return!0;for(var d=null,f=m;f<h;++f){var g=Jy(i,p,a[f],l[f],s,c);null===g&&null===d?m=f+1:(null===d||s(d,g)>0)&&(d=g)}return n(null!==d?function(){e.continue(d+u)}:r),!1})),d}function tb(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function nb(e){return{type:1,lower:e,upper:e}}class rb{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Zy(this):new this.Collection(this,(()=>tb(e,t,!n,!r)))}catch(e){return Qy(this,Ry)}}equals(e){return null==e?Qy(this,Ry):new this.Collection(this,(()=>nb(e)))}above(e){return null==e?Qy(this,Ry):new this.Collection(this,(()=>tb(e,void 0,!0)))}aboveOrEqual(e){return null==e?Qy(this,Ry):new this.Collection(this,(()=>tb(e,void 0,!1)))}below(e){return null==e?Qy(this,Ry):new this.Collection(this,(()=>tb(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Qy(this,Ry):new this.Collection(this,(()=>tb(void 0,e)))}startsWith(e){return"string"!=typeof e?Qy(this,"String expected."):this.between(e,e+ky,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):eb(this,((e,t)=>0===e.indexOf(t[0])),[e],ky)}equalsIgnoreCase(e){return eb(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=jf.apply(qf,arguments);return 0===e.length?Zy(this):eb(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=jf.apply(qf,arguments);return 0===e.length?Zy(this):eb(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,ky)}anyOf(){const e=jf.apply(qf,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Qy(this,Ry)}if(0===e.length)return Zy(this);const n=new this.Collection(this,(()=>tb(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,i,o)=>{const s=n.key;for(;t(s,e[r])>0;)if(++r,r===e.length)return i(o),!1;return 0===t(s,e[r])||(i((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=jf.apply(qf,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Qy(this,Ry)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,i=this._descending,o=this._min,s=this._max;if(0===e.length)return Zy(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return Qy(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",lg.InvalidArgument);const a=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers;let c,u=r;function h(e,t){return u(e[0],t[0])}try{c=e.reduce((function(e,t){let r=0,i=e.length;for(;r<i;++r){const i=e[r];if(n(t[0],i[1])<0&&n(t[1],i[0])>0){i[0]=o(i[0],t[0]),i[1]=s(i[1],t[1]);break}}return r===i&&e.push(t),e}),[]),c.sort(h)}catch(e){return Qy(this,Ry)}let p=0;const d=l?e=>r(e,c[p][1])>0:e=>r(e,c[p][1])>=0,m=a?e=>i(e,c[p][0])>0:e=>i(e,c[p][0])>=0;let f=d;const g=new this.Collection(this,(()=>tb(c[0][0],c[c.length-1][1],!a,!l)));return g._ondirectionchange=e=>{"next"===e?(f=d,u=r):(f=m,u=i),c.sort(h)},g._addAlgorithm(((e,t,n)=>{for(var i=e.key;f(i);)if(++p,p===c.length)return t(n),!1;return!!function(e){return!d(e)&&!m(e)}(i)||(0===this._cmp(i,c[p][1])||0===this._cmp(i,c[p][0])||t((()=>{u===r?e.continue(c[p][0]):e.continue(c[p][1])})),!1)})),g}startsWithAnyOf(){const e=jf.apply(qf,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Zy(this):this.inAnyRange(e.map((e=>[e,e+ky]))):Qy(this,"startsWithAnyOf() only works with strings")}}function ib(e){return ny((function(t){return ob(t),e(t.target.error),!1}))}function ob(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const sb=My(null,"storagemutated");class ab{_lock(){return Tf(!Fg.global),++this._reculock,1!==this._reculock||Fg.global||(Fg.lockOwnerFor=this),this}_unlock(){if(Tf(!Fg.global),0==--this._reculock)for(Fg.global||(Fg.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{yy(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Fg.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(Tf(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new lg.DatabaseClosed(n);case"MissingAPIError":throw new lg.MissingAPI(n.message,n);default:throw new lg.OpenFailed(n)}if(!this.active)throw new lg.TransactionInactive;return Tf(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ny((t=>{ob(t),this._reject(e.error)})),e.onabort=ny((t=>{ob(t),this.active&&this._reject(new lg.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=ny((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&sb.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return Sy(new lg.ReadOnly("Transaction is readonly"));if(!this.active)return Sy(new lg.TransactionInactive);if(this._locked())return new Wg(((r,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,i)},Fg])}));if(n)return cy((()=>{var e=new Wg(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Wg(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Wg.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Wg(((e,r)=>{n.then((n=>t._waitingQueue.push(ny(e.bind(null,n)))),(e=>t._waitingQueue.push(ny(r.bind(null,e))))).finally((()=>{t._waitingFor===i&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new lg.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(yf(t,e))return t[e];const n=this.schema[e];if(!n)throw new lg.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function lb(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+cb(t)}}function cb(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function ub(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:Af(n,(e=>[e.name,e]))}}let hb=e=>{try{return e.only([[]]),hb=()=>[[]],[[]]}catch(e){return hb=()=>ky,ky}};function pb(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>Pf(t,e)}(e):t=>Pf(t,e)}function db(e){return[].slice.call(e)}let mb=0;function fb(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function gb(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:i,upperOpen:o}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!o):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!o)}const{schema:i,hasGetAll:o}=function(e,t){const n=db(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=df(t),i=null==t,o={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:pb(t)},indexes:db(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:i}=e,s={name:t,compound:df(i),keyPath:i,unique:n,multiEntry:r,extractKey:pb(i)};return o[fb(i)]=s,s})),getIndexByKeyPath:e=>o[fb(e)]};return o[":id"]=s.primaryKey,null!=t&&(o[fb(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:i,values:o,range:s}){return new Promise(((a,l)=>{a=ny(a);const c=e.objectStore(t),u=null==c.keyPath,h="put"===n||"add"===n;if(!h&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:p}=i||o||{length:1};if(i&&o&&i.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let d;const m=[],f=[];let g=0;const y=e=>{++g,ob(e)};if("deleteRange"===n){if(4===s.type)return a({numFailures:g,failures:f,results:[],lastResult:void 0});3===s.type?m.push(d=c.clear()):m.push(d=c.delete(r(s)))}else{const[e,t]=h?u?[o,i]:[o,null]:[i,null];if(h)for(let r=0;r<p;++r)m.push(d=t&&void 0!==t[r]?c[n](e[r],t[r]):c[n](e[r])),d.onerror=y;else for(let t=0;t<p;++t)m.push(d=c[n](e[t])),d.onerror=y}const b=e=>{const t=e.target.result;m.forEach(((e,t)=>null!=e.error&&(f[t]=e.error))),a({numFailures:g,failures:f,results:"delete"===n?i:m.map((e=>e.result)),lastResult:t})};d.onerror=e=>{y(e),b(e)},d.onsuccess=b}))},getMany:({trans:e,keys:n})=>new Promise(((r,i)=>{r=ny(r);const o=e.objectStore(t),s=n.length,a=new Array(s);let l,c=0,u=0;const h=e=>{const t=e.target;a[t._pos]=t.result,++u===c&&r(a)},p=ib(i);for(let e=0;e<s;++e)null!=n[e]&&(l=o.get(n[e]),l._pos=e,l.onsuccess=h,l.onerror=p,++c);0===c&&r(a)})),get:({trans:e,key:n})=>new Promise(((r,i)=>{r=ny(r);const o=e.objectStore(t).get(n);o.onsuccess=e=>r(e.target.result),o.onerror=ib(i)})),query:function(e){return n=>new Promise(((i,o)=>{i=ny(i);const{trans:s,values:a,limit:l,query:c}=n,u=l===1/0?void 0:l,{index:h,range:p}=c,d=s.objectStore(t),m=h.isPrimaryKey?d:d.index(h.name),f=r(p);if(0===l)return i({result:[]});if(e){const e=a?m.getAll(f,u):m.getAllKeys(f,u);e.onsuccess=e=>i({result:e.target.result}),e.onerror=ib(o)}else{let e=0;const t=a||!("openKeyCursor"in m)?m.openCursor(f):m.openKeyCursor(f),n=[];t.onsuccess=r=>{const o=t.result;return o?(n.push(a?o.value:o.primaryKey),++e===l?i({result:n}):void o.continue()):i({result:n})},t.onerror=ib(o)}}))}(o),openCursor:function({trans:e,values:n,query:i,reverse:o,unique:s}){return new Promise(((a,l)=>{a=ny(a);const{index:c,range:u}=i,h=e.objectStore(t),p=c.isPrimaryKey?h:h.index(c.name),d=o?s?"prevunique":"prev":s?"nextunique":"next",m=n||!("openKeyCursor"in p)?p.openCursor(r(u),d):p.openKeyCursor(r(u),d);m.onerror=ib(l),m.onsuccess=ny((t=>{const n=m.result;if(!n)return void a(null);n.___id=++mb,n.done=!1;const r=n.continue.bind(n);let i=n.continuePrimaryKey;i&&(i=i.bind(n));const o=n.advance.bind(n),s=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=ny(l),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=ny(e),m.onerror=ib(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=s,e(t)}})),a=()=>{if(m.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return m.onsuccess=ny((e=>{m.onsuccess=a,a()})),n.continue=r,n.continuePrimaryKey=i,n.advance=o,a(),t},a(n)}),l)}))},count({query:e,trans:n}){const{index:i,range:o}=e;return new Promise(((e,s)=>{const a=n.objectStore(t),l=i.isPrimaryKey?a:a.index(i.name),c=r(o),u=c?l.count(c):l.count();u.onsuccess=ny((t=>e(t.target.result))),u.onerror=ib(s)}))}}}(e))),a={};return s.forEach((e=>a[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!a[e])throw new Error(`Table '${e}' not found`);return a[e]},MIN_KEY:-1/0,MAX_KEY:hb(t),schema:i}}function yb({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},i){const o=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(gb(t,n,i),e.dbcore);return{dbcore:o}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function bb({_novip:e},t,n,r){n.forEach((n=>{const i=r[n];t.forEach((t=>{const r=Ef(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?vf(t,n,{get(){return this.table(n)},set(e){wf(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function wb({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function vb(e,t){return e._cfg.version-t._cfg.version}function Cb(e,t,n,r){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),a=Fg.transless||Fg;cy((()=>{Fg.trans=o,Fg.transless=a,0===t?(pf(i).forEach((e=>{Eb(n,e,i[e].primKey,i[e].indexes)})),yb(e,n),Wg.follow((()=>e.on.populate.fire(o))).catch(s)):function({_novip:e},t,n,r){const i=[],o=e._versions;let s=e._dbSchema=Rb(0,e.idbdb,r),a=!1;return o.filter((e=>e._cfg.version>=t)).forEach((o=>{i.push((()=>{const i=s,l=o._cfg.dbschema;xb(e,i,r),xb(e,l,r),s=e._dbSchema=l;const c=Sb(i,l);c.add.forEach((e=>{Eb(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new lg.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>kb(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),kb(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const u=o._cfg.contentUpgrade;if(u&&o._cfg.version>t){yb(e,r),n._memoizedTables={},a=!0;let t=_f(l);c.del.forEach((e=>{t[e]=i[e]})),wb(e,[e.Transaction.prototype]),bb(e,[e.Transaction.prototype],pf(t),t),n.schema=t;const o=Gf(u);let s;o&&uy();const h=Wg.follow((()=>{if(s=u(n),s&&o){var e=hy.bind(null,null);s.then(e,e)}}));return s&&"function"==typeof s.then?Wg.resolve(s):h.then((()=>s))}})),i.push((t=>{a&&Dy||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t),wb(e,[e.Transaction.prototype]),bb(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return i.length?Wg.resolve(i.shift()(n.idbtrans)).then(e):Wg.resolve()}().then((()=>{var e,t;t=r,pf(e=s).forEach((n=>{t.db.objectStoreNames.contains(n)||Eb(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(s)}))}function Sb(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const e={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Ty)e.recreate=!0,n.change.push(e);else{const t=i.idxByName,r=o.idxByName;let s;for(s in t)r[s]||e.del.push(s);for(s in r){const n=t[s],i=r[s];n?n.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,o])}return n}function Eb(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>kb(i,e))),i}function kb(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Rb(e,t,n){const r={};return Rf(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let i=t.keyPath;const o=lb(cb(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),s=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);i=n.keyPath;var a=lb(n.name,i,!!n.unique,!!n.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(a)}r[e]=ub(e,o,s)})),r}function xb({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(let e=0;e<s.indexNames.length;++e){const n=s.indexNames[e],r=s.index(n).keyPath,i="string"==typeof r?r:"["+Rf(r).join("+")+"]";if(t[o]){const e=t[o].idxByName[i];e&&(e.name=n,delete t[o].idxByName[i],t[o].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&hf.WorkerGlobalScope&&hf instanceof hf.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class Tb{_parseStoresSpec(e,t){pf(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return lb(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),df(r),0===t)})),i=r.shift();if(i.multi)throw new lg.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new lg.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new lg.Schema("Index must have a name and cannot be an empty string")})),t[n]=ub(n,i,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?mf(this._cfg.storesSource,e):e;const n=t._versions,r={};let i={};return n.forEach((e=>{mf(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,wb(t,[t._allTables,t,t.Transaction.prototype]),bb(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],pf(i),i),t._storeNames=pf(i),this}upgrade(e){return this._cfg.contentUpgrade=wg(this._cfg.contentUpgrade||hg,e),this}}function Db(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Yb("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Ab(e){return e&&"function"==typeof e.databases}function Pb(e){return cy((function(){return Fg.letThrough=!0,e()}))}function Ib(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function _b(e){var t=t=>e.next(t),n=i(t),r=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&"function"==typeof o.then?o.then(n,r):df(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function Nb(e,t,n){var r=arguments.length;if(r<2)throw new lg.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=Of(i);return[e,o,n]}function Ob(e,t,n,r,i){return Wg.resolve().then((()=>{const o=Fg.transless||Fg,s=e._createTransaction(t,n,e._dbSchema,r),a={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===sg.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Ob(e,t,n,null,i)))):Sy(r)}const l=Gf(i);let c;l&&uy();const u=Wg.follow((()=>{if(c=i.call(s,s),c)if(l){var e=hy.bind(null,null);c.then(e,e)}else"function"==typeof c.next&&"function"==typeof c.throw&&(c=_b(c))}),a);return(c&&"function"==typeof c.then?Wg.resolve(c).then((e=>s.active?e:Sy(new lg.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):u.then((()=>c))).then((e=>(r&&s._resolve(),s._completion.then((()=>e))))).catch((e=>(s._reject(e),Sy(e))))}))}function Mb(e,t,n){const r=df(e)?e.slice():[e];for(let e=0;e<n;++e)r.push(t);return r}const Bb={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function s(e,t,n){const r=fb(e),a=i[r]=i[r]||[],l=null==e?0:"string"==typeof e?1:e.length,c=t>0,u={...n,isVirtual:c,keyTail:t,keyLength:l,extractKey:pb(e),unique:!c&&n.unique};return a.push(u),u.isPrimaryKey||o.push(u),l>1&&s(2===l?e[0]:e.slice(0,l-1),t+1,n),a.sort(((e,t)=>e.keyTail-t.keyTail)),u}const a=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const e of r.indexes)s(e.keyPath,0,e);function l(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,i=n.keyTail,{type:1===r.type?2:r.type,lower:Mb(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Mb(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var r,i}const c={...n,schema:{...r,primaryKey:a,indexes:o,getIndexByKeyPath:function(e){const t=i[fb(e)];return t&&t[0]}},count:e=>n.count(l(e)),query:e=>n.query(l(e)),openCursor(t){const{keyTail:r,isVirtual:i,keyLength:o}=t.query.index;return i?n.openCursor(l(t)).then((n=>n&&function(n){const i=Object.create(n,{continue:{value:function(i){null!=i?n.continue(Mb(i,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,i){n.continuePrimaryKey(Mb(t,e.MAX_KEY,r),i)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:()=>n.value}});return i}(n))):n.openCursor(t)}};return c}}}};function Fb(e,t,n,r){return n=n||{},r=r||"",pf(e).forEach((i=>{if(yf(t,i)){var o=e[i],s=t[i];if("object"==typeof o&&"object"==typeof s&&o&&s){const e=Wf(o);e!==Wf(s)?n[r+i]=t[i]:"Object"===e?Fb(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0})),pf(t).forEach((i=>{yf(e,i)||(n[r+i]=t[i])})),n}const Lb={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,i={...n,mutate(e){const i=Fg.trans,{deleting:o,creating:s,updating:a}=i.table(t).hook;switch(e.type){case"add":if(s.fire===hg)break;return i._promise("readwrite",(()=>l(e)),!0);case"put":if(s.fire===hg&&a.fire===hg)break;return i._promise("readwrite",(()=>l(e)),!0);case"delete":if(o.fire===hg)break;return i._promise("readwrite",(()=>l(e)),!0);case"deleteRange":if(o.fire===hg)break;return i._promise("readwrite",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Fg.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((l=>{const c=i.map(((n,i)=>{const c=l[i],u={onerror:null,onsuccess:null};if("delete"===e.type)o.fire.call(u,n,c,t);else if("add"===e.type||void 0===c){const o=s.fire.call(u,n,e.values[i],t);null==n&&null!=o&&(n=o,e.keys[i]=n,r.outbound||If(e.values[i],r.keyPath,n))}else{const r=Fb(c,e.values[i]),o=a.fire.call(u,r,n,c,t);if(o){const t=e.values[i];Object.keys(o).forEach((e=>{yf(t,e)?t[e]=o[e]:If(t,e,o[e])}))}}return u}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:o})=>{for(let r=0;r<i.length;++r){const o=n?n[r]:i[r],s=c[r];null==o?s.onerror&&s.onerror(t[r]):s.onsuccess&&s.onsuccess("put"===e.type&&l[r]?e.values[r]:o)}return{failures:t,results:n,numFailures:r,lastResult:o}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((({result:n})=>l({type:"delete",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<i?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},i)))))}}};return i}})};function Hb(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)0===qy(t.keys[i],e[o])&&(r.push(n?Lf(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}const Ub={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Hb(e.keys,e.trans._cache,"clone"===e.cache);return t?Wg.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?Lf(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Wb(e){return!("from"in e)}const $b=function(e,t){if(!this){const t=new $b;return e&&"d"in e&&mf(t,e),t}mf(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function zb(e,t,n){const r=qy(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Wb(e))return mf(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(qy(n,e.from)<0)return i?zb(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Gb(e);if(qy(t,e.to)>0)return o?zb(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Gb(e);qy(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),qy(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;i&&!e.l&&qb(e,i),o&&s&&qb(e,o)}function qb(e,t){Wb(t)||function e(t,{from:n,to:r,l:i,r:o}){zb(t,n,r),i&&e(t,i),o&&e(t,o)}(e,t)}function jb(e){let t=Wb(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&qy(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||qy(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Gb(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const t="r"===i?"l":"r",n={...e},r=e[i];e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],e[t]=n,n.d=Vb(n)}e.d=Vb(e)}function Vb({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}bf($b.prototype,{add(e){return qb(this,e),this},addKey(e){return zb(this,e,e),this},addKeys(e){return e.forEach((e=>zb(this,e,e))),this},[$f](){return jb(this)}});const Kb={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new $b(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:a,outbound:l}=s,c={...i,mutate:e=>{const s=e.trans,a=s.mutatedParts||(s.mutatedParts={}),l=e=>{const n=`idb://${t}/${r}/${e}`;return a[n]||(a[n]=new $b)},c=l(""),u=l(":dels"),{type:h}=e;let[p,d]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const m=e.trans._cache;return i.mutate(e).then((e=>{if(df(p)){"delete"!==h&&(p=e.results),c.addKeys(p);const t=Hb(p,m);t||"add"===h||u.addKeys(p),(t||d)&&function(e,t,n,r){t.indexes.forEach((function(t){const i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}const s=e=>t.multiEntry&&df(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(n||r).forEach(((e,t)=>{const i=n&&o(n[t]),a=r&&o(r[t]);0!==qy(i,a)&&(null!=i&&s(i),null!=a&&s(a))}))}))}(l,o,t,d)}else if(p){const e={from:p.lower,to:p.upper};u.add(e),c.add(e)}else c.add(n),u.add(n),o.indexes.forEach((e=>l(e.name).add(n)));return e}))}},u=({query:{index:t,range:n}})=>{var r,i;return[t,new $b(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(i=n.upper)&&void 0!==i?i:e.MAX_KEY)]},h={get:e=>[s,new $b(e.key)],getMany:e=>[s,(new $b).addKeys(e.keys)],count:u,query:u,openCursor:u};return pf(h).forEach((e=>{c[e]=function(o){const{subscr:s}=Fg;if(s){const c=e=>{const n=`idb://${t}/${r}/${e}`;return s[n]||(s[n]=new $b)},u=c(""),p=c(":dels"),[d,m]=h[e](o);if(c(d.name||"").add(m),!d.isPrimaryKey){if("count"!==e){const t="query"===e&&l&&o.values&&i.query({...o,values:!1});return i[e].apply(this,arguments).then((n=>{if("query"===e){if(l&&o.values)return t.then((({result:e})=>(u.addKeys(e),n)));const e=o.values?n.result.map(a):n.result;o.values?u.addKeys(e):p.addKeys(e)}else if("openCursor"===e){const e=n,t=o.values;return e&&Object.create(e,{key:{get:()=>(p.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return p.addKey(t),t}},value:{get:()=>(t&&u.addKey(e.primaryKey),e.value)}})}return n}))}p.add(n)}}return i[e].apply(this,arguments)}})),c}}}};class Yb{constructor(e,t){this._middlewares={},this.verno=0;const n=Yb.dependencies;this._options=t={addons:Yb.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:hg,dbReadyPromise:null,cancelOpen:hg,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;i.dbReadyPromise=new Wg((e=>{i.dbReadyResolve=e})),i.openCanceller=new Wg(((e,t)=>{i.cancelOpen=t})),this._state=i,this.name=e,this.on=My(this,"populate","blocked","versionchange","close",{ready:[wg,hg]}),this.on.ready.subscribe=xf(this.on.ready.subscribe,(e=>(t,n)=>{Yb.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Wg.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(o=this,By(Vy.prototype,(function(e,t){this.db=o;let n=_y,r=null;if(t)try{n=t()}catch(e){r=e}const i=e._ctx,s=i.table,a=s.hook.reading.fire;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:a!==pg?a:null}}))),this.Table=function(e){return By(Oy.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:My(null,{creating:[fg,hg],reading:[dg,pg],updating:[yg,hg],deleting:[gg,hg]})}))}(this),this.Transaction=function(e){return By(ab.prototype,(function(t,n,r,i,o){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=My(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Wg(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),Sy(e)}))}))}(this),this.Version=function(e){return By(Tb.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return By(rb.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const i=e._deps.indexedDB;if(!i)throw new lg.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=hb(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),xy.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Bb),this.use(Lb),this.use(Kb),this.use(Ub),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new lg.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new lg.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(vb),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Fg.letThrough||this._vip)?e():new Wg(((e,t)=>{if(this._state.openComplete)return t(new lg.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new lg.DatabaseClosed);this.open().catch(hg)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:t,level:null==n?10:n,name:r}),i.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?Sy(t.dbOpenError):e));Vf&&(t.openCanceller._stackHolder=Qf()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new lg.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,a=!1;return Wg.race([r,("undefined"==typeof navigator?Wg.resolve():Ib()).then((()=>new Wg(((r,o)=>{if(i(),!n)throw new lg.MissingAPI;const l=e.name,c=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!c)throw new lg.MissingAPI;c.onerror=ib(o),c.onblocked=ny(e._fireOnBlocked),c.onupgradeneeded=ny((r=>{if(s=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=ob,s.abort(),c.result.close();const e=n.deleteDatabase(l);e.onsuccess=e.onerror=ny((()=>{o(new lg.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{s.onerror=ib(o);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;a=i<1,e._novip.idbdb=c.result,Cb(e,i/10,s,o)}}),o),c.onsuccess=ny((()=>{s=null;const n=e._novip.idbdb=c.result,i=Rf(n.objectStoreNames);if(i.length>0)try{const r=n.transaction(1===(o=i).length?o[0]:o,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const r=e._dbSchema=Rb(0,t,n);e._storeNames=Rf(t.objectStoreNames,0),bb(e,[e._allTables],pf(r),r)}(e,n,r):(xb(e,e._dbSchema,r),function(e,t){const n=Sb(Rb(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),yb(e,r)}catch(e){}var o;xy.push(e),n.onversionchange=ny((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=ny((t=>{e.on("close").fire(t)})),a&&function({indexedDB:e,IDBKeyRange:t},n){!Ab(e)&&"__dbnames"!==n&&Db(e,t).put({name:n}).catch(hg)}(e._deps,l),r()}),o)}))))]).then((()=>(i(),t.onReadyBeingFired=[],Wg.resolve(Pb((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(wg,hg);return t.onReadyBeingFired=[],Wg.resolve(Pb((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),Sy(n)})).finally((()=>{t.openComplete=!0,o()}))}(this)}_close(){const e=this._state,t=xy.indexOf(this);if(t>=0&&xy.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Wg((t=>{e.dbReadyResolve=t})),e.openCanceller=new Wg(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new lg.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Wg(((n,r)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=ny((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!Ab(e)&&"__dbnames"!==n&&Db(e,t).delete(n).catch(hg)}(this._deps,this.name),n()})),e.onerror=ib(r),e.onblocked=this._fireOnBlocked};if(e)throw new lg.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return pf(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Nb.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Fg.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const i=-1!==e.indexOf("?");let o,s;e=e.replace("!","").replace("?","");try{if(s=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)o="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new lg.InvalidArgument("Invalid transaction mode: "+e);o="readwrite"}if(r){if("readonly"===r.mode&&"readwrite"===o){if(!i)throw new lg.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&s.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new lg.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):Sy(e)}const a=Ob.bind(null,this,o,s,r,n);return r?r._promise(o,a,"lock"):Fg.trans?yy(Fg.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!yf(this._allTables,e))throw new lg.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Xb="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class Qb{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[Xb](){return this}}function Zb(e,t){return pf(t).forEach((n=>{qb(e[n]||(e[n]=new $b),t[n])})),e}let Jb;try{Jb={indexedDB:hf.indexedDB||hf.mozIndexedDB||hf.webkitIndexedDB||hf.msIndexedDB,IDBKeyRange:hf.IDBKeyRange||hf.webkitIDBKeyRange}}catch(hf){Jb={indexedDB:null,IDBKeyRange:null}}const ew=Yb;function tw(e){let t=nw;try{nw=!0,sb.storagemutated.fire(e)}finally{nw=t}}bf(ew,{...ug,delete:e=>new ew(e,{addons:[]}).delete(),exists:e=>new ew(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return Ab(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>"__dbnames"!==e)))):Db(e,t).toCollection().primaryKeys()}(ew.dependencies).then(e)}catch(e){return Sy(new lg.MissingAPI)}},defineClass:()=>function(e){mf(this,e)},ignoreTransaction:e=>Fg.trans?yy(Fg.transless,e):e(),vip:Pb,async:function(e){return function(){try{var t=_b(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Wg.resolve(t)}catch(e){return Sy(e)}}},spawn:function(e,t,n){try{var r=_b(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Wg.resolve(r)}catch(e){return Sy(e)}},currentTransaction:{get:()=>Fg.trans||null},waitFor:function(e,t){const n=Wg.resolve("function"==typeof e?ew.ignoreTransaction(e):e).timeout(t||6e4);return Fg.trans?Fg.trans.waitFor(n):n},Promise:Wg,debug:{get:()=>Vf,set:e=>{Kf(e,"dexie"===e?()=>!0:Py)}},derive:Cf,extend:mf,props:bf,override:xf,Events:My,on:sb,liveQuery:function(e){return new Qb((t=>{const n=Gf(e);let r=!1,i={},o={};const s={get closed(){return r},unsubscribe:()=>{r=!0,sb.storagemutated.unsubscribe(u)}};t.start&&t.start(s);let a=!1,l=!1;function c(){return pf(o).some((e=>i[e]&&function(e,t){const n=jb(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=jb(e);let s=o.next(i.from),a=s.value;for(;!r.done&&!s.done;){if(qy(a.from,i.to)<=0&&qy(a.to,i.from)>=0)return!0;qy(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(s=o.next(i.from)).value}return!1}(i[e],o[e])))}const u=e=>{Zb(i,e),c()&&h()},h=()=>{if(a||r)return;i={};const p={},d=function(t){n&&uy();const r=()=>cy(e,{subscr:t,trans:null}),i=Fg.trans?yy(Fg.transless,r):r();return n&&i.then(hy,hy),i}(p);l||(sb("storagemutated",u),l=!0),a=!0,Promise.resolve(d).then((e=>{a=!1,r||(c()?h():(i={},o=p,t.next&&t.next(e)))}),(e=>{a=!1,t.error&&t.error(e),s.unsubscribe()}))};return h(),s}))},extendObservabilitySet:Zb,getByKeyPath:Pf,setByKeyPath:If,delByKeyPath:function(e,t){"string"==typeof t?If(e,t,void 0):"length"in t&&[].map.call(t,(function(t){If(e,t,void 0)}))},shallowClone:_f,deepClone:Lf,getObjectDiff:Fb,cmp:qy,asap:Df,minKey:-1/0,addons:[],connections:xy,errnames:sg,dependencies:Jb,semVer:"3.2.2",version:"3.2.2".split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),ew.maxKey=hb(ew.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(sb("storagemutated",(e=>{if(!nw){let t;Ty?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),nw=!0,dispatchEvent(t),nw=!1}})),addEventListener("x-storagemutated-1",(({detail:e})=>{nw||tw(e)})));let nw=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel("x-storagemutated-1");sb("storagemutated",(t=>{nw||e.postMessage(t)})),e.onmessage=e=>{e.data&&tw(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){sb("storagemutated",(e=>{try{nw||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:"x-storagemutated-1",changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if("x-storagemutated-1"===e.key){const t=JSON.parse(e.newValue);t&&tw(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&"x-storagemutated-1"===e.type&&tw(e.changedParts)}))}Wg.rejectionMapper=function(e,t){if(!e||e instanceof ng||e instanceof TypeError||e instanceof SyntaxError||!e.name||!cg[e.name])return e;var n=new cg[e.name](t||e.message,e);return"stack"in e&&vf(n,"stack",{get:function(){return this.inner.stack}}),n},Kf(Vf,Py);class rw extends Yb{schemaVersion;constructor(e,t){super(e),this.schemaVersion=t}async conditionalVersion(e,t,n){if(null!=this.schemaVersion&&this.schemaVersion<e)return;const r=this.version(e).stores(t);null!=n&&await r.upgrade(n)}}function iw(e){const t=e.table("gitHubRepositories"),n=new Set;return t.toCollection().each((e=>{const r=`${e.ownerID}+${e.name}`;if(n.has(r)){const n=e.id;t.delete(n)}else n.add(r)}))}async function ow(e){return e.table("gitHubRepositories").toCollection().filter((e=>void 0===e.parentID)).modify({parentID:null}).then((e=>log.info(`ensureNoUndefinedParentID: ${e}`)))}async function sw(e){const t=e.table("owners"),n=e.table("gitHubRepositories"),r=await t.toArray(),i=new Map,o=new Array,s=new Array;for(const e of r){nt(e.id,"Missing owner id");const t=aw(e.endpoint,e.login),n=i.get(t);void 0!==n?(nt(n.id,"Missing existing owner id"),log.warn(`createOwnerKey: Conflicting owner data ${e.id} (${e.login}) and ${n.id} (${n.login})`),o.push({from:e.id,to:n.id}),s.push(e.id)):i.set(t,{...e,key:t})}log.info(`createOwnerKey: Updating ${i.size} owners with keys`),await t.bulkPut([...i.values()]);for(const e of o){const t=await n.where("[ownerID+name]").between([e.from],[e.from+1]).modify({ownerID:e.to});log.info(`createOwnerKey: ${t} repositories got new owner ids`)}await t.bulkDelete(s)}function aw(e,t){return`${e}/users/${t}`.toLowerCase()}class lw{login;endpoint;id;type;constructor(e,t,n,r){this.login=e,this.endpoint=t,this.id=n,this.type=r}}function cw(e,t){return`${uw(e)}${t}`}function uw(e){return`${e}-`}let hw=null;function pw(e){hw||Je("`askUserToOAuth` must be called before rejecting an auth request."),hw.reject(e),hw=null}const dw=new Set(["https:","http:"]),mw="invalid-url",fw="invalid-protocol";function gw(e){return`Unable to authenticate. The account ${e} is lacking a verified email address. Please sign in to GitHub.com, confirm your email address in the Emails section under Personal settings, and try again.`}const yw="The GitHub Enterprise version does not support GitHub Desktop. Talk to your server's administrator about upgrading to the latest version of GitHub Enterprise.";var bw,ww;function vw(e,t){return[e.dbID,t]}function Cw(e){const t=e.owner.login;return{name:e.name,owner:t}}!function(e){e.EndpointEntry="EndpointEntry",e.Authentication="Authentication",e.TwoFactorAuthentication="TwoFactorAuthentication",e.Success="Success"}(bw||(bw={})),function(e){e.Basic="basic",e.Web="web"}(ww||(ww={}));const Sw=12e4;class Ew{repository;account;coordinator;timeoutId=null;running=!1;constructor(e,t,n){this.repository=e,this.account=t,this.coordinator=n}start(){this.running||(this.running=!0,this.scheduleTick(Sw))}getTimeSinceLastRefresh(){const e=this.coordinator.getLastRefreshed(this.repository);return void 0===e?1/0:Date.now()-e}scheduleTick(e=18e5){if(this.running){const t=Math.max(e-this.getTimeSinceLastRefresh(),0);this.timeoutId=window.setTimeout((()=>this.tick()),t)}}tick(){this.running&&(this.timeoutId=null,this.getTimeSinceLastRefresh()<Sw&&this.scheduleTick(),this.coordinator.refreshPullRequests(this.repository,this.account).catch((()=>{})).then((()=>this.scheduleTick())))}stop(){this.running&&(null!==this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=null),this.running=!1)}}function kw(e,t){const{dbID:n}=e;return t.filter((e=>Br(e).dbID===n))}function Rw(e){return`GitHub Desktop - ${e}`}const xw=new Map;async function Tw(e,t,n,r){xw.set(e,{store:t,key:n,secret:r})}function Dw(e){xw.delete(e)}const Aw=Rw("SSH key passphrases");async function Pw(e){return((e,n)=>new Promise(((n,r)=>{const i=(0,cn.createHash)("sha256");i.on("finish",(()=>n(i.digest("hex")))),i.on("error",r),(0,t.createReadStream)(e).on("error",r).pipe(i)})))(e)}const Iw=new class{dispatcher;setDispatcher(e){this.dispatcher=e}promptAddingSSHHost(e,t,n,r){return new Promise((i=>{this.dispatcher.showPopup({type:nl.AddSSHHost,host:e,ip:t,keyType:n,fingerprint:r,onSubmit:e=>i(e)})}))}promptSSHKeyPassphrase(e){return new Promise((t=>{this.dispatcher.showPopup({type:nl.SSHKeyPassphrase,keyPath:e,onSubmit:(e,n)=>t({secret:e,storeSecret:n})})}))}promptSSHUserPassword(e){return new Promise((t=>{this.dispatcher.showPopup({type:nl.SSHUserPassword,username:e,onSubmit:(e,n)=>t({secret:e,storeSecret:n})})}))}},_w=Rw("SSH user password");const Nw=async e=>{if(1!==e.parameters.length)return;const t=e.parameters[0];if(t.startsWith("The authenticity of host "))return async function(e){const t=function(e){const t=/^The authenticity of host '([^ ]+) \(([^\)]+)\)' can't be established[^.]*\.\n([^ ]+) key fingerprint is ([^.]+)\./.exec(e);return null===t||t.length<5?null:{host:t[1],ip:t[2],keyType:t[3],fingerprint:t[4]}}(e);if(null!==t)return"github.com"===t.host&&"RSA"===t.keyType&&"SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8"===t.fingerprint||await Iw.promptAddingSSHHost(t.host,t.ip,t.keyType,t.fingerprint)?"yes":"no"}(t);if(t.startsWith("Enter passphrase for key "))return async function(e,t){const n=/^Enter passphrase for key '(.+)': $/.exec(t);if(null===n||n.length<2)return;let r=n[1];const i=await async function(e){try{const t=await Pw(e);return $l.getItem(Aw,t)}catch(e){return log.error("Could not retrieve passphrase for SSH key:",e),null}}(r);if(null!==i)return i;const{secret:o,storeSecret:s}=await Iw.promptSSHKeyPassphrase(r);return void 0!==o&&s?async function(e,t,n){try{const r=await Pw(t);Tw(e,Aw,r,n)}catch(e){log.error("Could not store passphrase for SSH key:",e)}}(e,r,o):Dw(e),o??""}(e.trampolineToken,t);if(t.endsWith("'s password: "))return async function(e,t){const n=/^(.+@.+)'s password: $/.exec(t);if(null===n||n.length<2)return;const r=n[1],i=await async function(e){try{return $l.getItem(_w,e)}catch(e){return log.error("Could not retrieve passphrase for SSH key:",e),null}}(r);if(null!==i)return i;const{secret:o,storeSecret:s}=await Iw.promptSSHUserPassword(r);return void 0!==o&&s?async function(e,t,n){Tw(e,_w,t,n)}(e,r,o):Dw(e),o??""}(e.trampolineToken,t);const n=e.environmentVariables.get("DESKTOP_USERNAME");if(void 0!==n&&0!==n.length){if(t.startsWith("Username"))return n;if(t.startsWith("Password")){const t=e.environmentVariables.get("DESKTOP_ENDPOINT");if(void 0===t||0===t.length)return;const r=Ka(t);return await $l.getItem(r,n)??void 0}}};var Ow,Mw;!function(e){e.AskPass="ASKPASS"}(Ow||(Ow={})),function(e){e[e.ParameterCount=0]="ParameterCount",e[e.Parameters=1]="Parameters",e[e.EnvironmentVariablesCount=2]="EnvironmentVariablesCount",e[e.EnvironmentVariables=3]="EnvironmentVariables",e[e.Finished=4]="Finished"}(Mw||(Mw={}));class Bw{parameterCount=0;parameters=[];environmentVariablesCount=0;environmentVariables=new Map;state=Mw.ParameterCount;hasFinished(){return this.state===Mw.Finished}processValue(e){switch(this.state){case Mw.ParameterCount:this.parameterCount=parseInt(e),this.parameterCount>0?this.state=Mw.Parameters:this.state=Mw.EnvironmentVariablesCount;break;case Mw.Parameters:this.parameters.push(e),this.parameters.length===this.parameterCount&&(this.state=Mw.EnvironmentVariablesCount);break;case Mw.EnvironmentVariablesCount:this.environmentVariablesCount=parseInt(e),this.environmentVariablesCount>0?this.state=Mw.EnvironmentVariables:this.state=Mw.Finished;break;case Mw.EnvironmentVariables:const t=/([^=]+)=(.*)/.exec(e);if(null===t||3!==t.length)throw new Error(`Unexpected environment variable format: ${e}`);const n=t[1],r=t[2];this.environmentVariables.set(n,r),this.environmentVariables.size===this.environmentVariablesCount&&(this.state=Mw.Finished);break;default:throw new Error(`Received value during invalid state: ${this.state}`)}}toCommand(){if(!1===this.hasFinished()){const e=new Error("The command cannot be generated if parsing is not finished");return this.logCommandCreationError(e),null}const e=this.environmentVariables.get("DESKTOP_TRAMPOLINE_IDENTIFIER");if(void 0===e){const e=new Error(`The command identifier is missing. Env variables received: ${Array.from(this.environmentVariables.keys())}`);return this.logCommandCreationError(e),null}const t=Dt(Ow,e);if(void 0===t){const t=new Error(`The command identifier ${e} is not supported`);return this.logCommandCreationError(t),null}const n=this.environmentVariables.get("DESKTOP_TRAMPOLINE_TOKEN");if(void 0===n){const e=new Error("The trampoline token is missing");return this.logCommandCreationError(e),null}return{identifier:t,trampolineToken:n,parameters:this.parameters,environmentVariables:this.environmentVariables}}logCommandCreationError(e){log.error("Error creating trampoline command:",e),iC("trampolineCommandParser",e)}}const Fw=new Set;const Lw=new class{server;listeningPromise=null;commandHandlers=new Map;constructor(){this.server=(0,Ga.createServer)((e=>this.onNewConnection(e))),this.server.unref(),this.registerCommandHandler(Ow.AskPass,Nw)}async listen(){return this.listeningPromise=new Promise(((e,t)=>{this.server.on("error",(e=>{t(e),this.close()})),this.server.listen(0,"127.0.0.1",(async()=>{this.server.removeAllListeners("error"),this.server.on("error",this.onServerError),e()}))})),this.listeningPromise}async close(){null!==this.listeningPromise&&await this.listeningPromise,this.server.close(),this.server.removeAllListeners("error"),this.listeningPromise=null}async getPort(){return null!==this.port||(null!==this.listeningPromise?await this.listeningPromise:await this.listen()),this.port}get port(){const e=this.server.address();return e&&e.port?e.port:null}onNewConnection(e){const t=new Bw;e.pipe(qa()(/\0/)).on("data",(n=>{this.onDataReceived(e,t,n)})),e.on("error",this.onClientError)}onDataReceived(e,t,n){const r=n.toString("utf8");try{t.processValue(r)}catch(t){return log.error("Error processing trampoline data",t),void e.end()}if(!t.hasFinished())return;const i=t.toCommand();null!==i?this.processCommand(e,i):e.end()}registerCommandHandler(e,t){this.commandHandlers.set(e,t)}async processCommand(e,t){if(n=t.trampolineToken,!Fw.has(n))throw new Error("Tried to use invalid trampoline token");var n;const r=this.commandHandlers.get(t.identifier);if(void 0===r)return void e.end();const i=await r(t);void 0!==i?e.end(i):e.end()}onServerError=e=>{iC("trampolineServer",e),this.close()};onClientError=e=>{log.error("Trampoline client error",e)}};var Hw=n(2750);const Uw=mr((()=>Ua.nY.exec(["--version"],process.cwd()).then((e=>/git version (.*)/.exec(e.stdout)?.at(1))).catch((e=>(log.warn("Could not get git version information",e),"unknown"))).then((e=>{const{platform:t,arch:n}=process;return`git/${e} (GitHub Desktop/3.3.5; ${t} ${n})`}))));async function Ww(e){const t=await async function(){const e={SSH_ASKPASS:$w(),DISPLAY:"."};return await gd()&&function(){try{return At(fd,!1)}catch(e){return!1}}()?{...e,GIT_SSH_COMMAND:"C:/Windows/System32/OpenSSH/ssh.exe"}:e}();return async function(e){const t=function(){const e=dn();return Fw.add(e),e}();let n;try{n=await e(t)}finally{!function(e){Fw.delete(e)}(t)}return n}((async n=>{try{const r=await e({DESKTOP_PORT:await Lw.getPort(),DESKTOP_TRAMPOLINE_TOKEN:n,GIT_ASKPASS:$w(),DESKTOP_TRAMPOLINE_IDENTIFIER:Ow.AskPass,...Ut()?{GIT_USER_AGENT:await Uw()}:{},...t});return await async function(e){const t=xw.get(e);void 0!==t&&await $l.setItem(t.store,t.key,t.secret)}(n),r}finally{Dw(n)}}))}function $w(){return e.resolve(__dirname,"desktop-trampoline",(0,Hw.getDesktopTrampolineFilename)())}class zw extends Error{result;args;isRawMessage;constructor(e,t){let n,r=!0;e.gitErrorDescription?(n=e.gitErrorDescription,r=!1):e.combinedOutput.length>0?n=e.combinedOutput:e.stderr.length?n=e.stderr:e.stdout.length?n=e.stdout:(n="Unknown error",r=!1),super(n),this.name="GitError",this.result=e,this.args=t,this.isRawMessage=r}}async function qw(e,t,n,r){const i={successExitCodes:new Set([0]),expectedErrors:new Set};let o="";const s={...i,...r};return s.processCallback=e=>{r?.processCallback?.(e);const t=e=>{e&&e.pipe(qa()()).on("data",(e=>{o+=e+"\n"}))};t(e.stderr),t(e.stdout)},Ww((async r=>{const i=sa(s.env,r);s.env={TERM:"dumb",...i};const a=`${n}: git ${e.join(" ")}`,l=await Wa.measure(a,(()=>Ua.nY.exec(e,t,s))).catch((e=>{if($a(e))throw new Error(`Failed to execute ${n}: ${e.code}`);throw e})),c=l.exitCode;let u=null;const h=!!s.successExitCodes&&s.successExitCodes.has(c);h||(u=Ua.nY.parseError(l.stderr),u||(u=Ua.nY.parseError(l.stdout)));const p=u?function(e){if(jw(e))return"Authentication failed. Some common reasons include:\n\n- You are not logged in to your account: see GitHub Desktop > Settings.\n- You may need to log out and log back in to refresh your token.\n- You do not have permission to access this repository.\n- The repository is archived on GitHub. Check the repository settings to confirm you are still permitted to push commits.\n- If you use SSH authentication, check that your key is added to the ssh-agent and associated with your account.\n- If you use SSH authentication, ensure the host key verification passes for your repository hosting service.\n- If you used username / password authentication, you might need to use a Personal Access Token instead of your account password. Check the documentation of your repository hosting service.";switch(e){case Ua.ko.SSHKeyAuditUnverified:return"SSH密钥未验证.";case Ua.ko.RemoteDisconnection:return"远程已断开连接。请检查您的Internet连接，然后重试.";case Ua.ko.HostDown:return"主机已关闭。请检查您的Internet连接，然后重试.";case Ua.ko.RebaseConflicts:return"我们在尝试重新变基时发现了一些冲突。请在继续之前解决冲突.";case Ua.ko.MergeConflicts:return"尝试合并时发现一些冲突。请解决冲突并提交更改.";case Ua.ko.HTTPSRepositoryNotFound:case Ua.ko.SSHRepositoryNotFound:return"存储库似乎不再存在。您可能没有访问权限，或者它可能已被删除或重命名.";case Ua.ko.PushNotFastForward:return"自上次提取后，存储库已更新。在推送之前试着拉取.";case Ua.ko.BranchDeletionFailed:return"无法删除分支。它可能已被删除.";case Ua.ko.DefaultBranchDeletionFailed:return"该分支是仓库的默认分支，无法删除.";case Ua.ko.RevertConflicts:return"要完成还原，请合并并提交更改.";case Ua.ko.EmptyRebasePatch:return"没有要应用的任何更改.";case Ua.ko.NoMatchingRemoteBranch:return"没有任何与当前分支匹配的远程分支.";case Ua.ko.NothingToCommit:return"没有要提交的更改.";case Ua.ko.NoSubmoduleMapping:return"已从中删除子模块。gitmodules，但该文件夹仍存在于仓库中。删除文件夹，提交更改，然后重试.";case Ua.ko.SubmoduleRepositoryDoesNotExist:return"子模块指向不存在的位置.";case Ua.ko.InvalidSubmoduleSHA:return"子模块指向不存在的提交.";case Ua.ko.LocalPermissionDenied:return"权限被拒绝。";case Ua.ko.InvalidMerge:return"这不是我们可以合并的东西.";case Ua.ko.InvalidRebase:return"这不是我们可以调整的变基.";case Ua.ko.NonFastForwardMergeIntoEmptyHead:return"您尝试的合并不是快进，因此无法在空分支上执行.";case Ua.ko.PatchDoesNotApply:return"请求的更改与仓库中的一个或多个文件冲突.";case Ua.ko.BranchAlreadyExists:return"具有该名称的分支已存在.";case Ua.ko.BadRevision:return"错误的修订.";case Ua.ko.NotAGitRepository:return"这不是git仓库.";case Ua.ko.ProtectedBranchForcePush:return"此分支受到强制推送操作的保护.";case Ua.ko.ProtectedBranchRequiresReview:return"此分支受到保护，任何更改都需要经过批准的审查。打开一个pull请求，更改的目标改为此分支.";case Ua.ko.PushWithFileSizeExceedingLimit:return"推送操作包括一个超过GitHub的100MB文件大小限制的文件。请从历史记录中删除该文件，然后重试.";case Ua.ko.HexBranchNameRejected:return"分支名称不能是由十六进制字符组成的40个字符的字符串，因为这是Git用于表示对象的格式.";case Ua.ko.ForcePushRejected:return"当前分支的强制推送已被拒绝.";case Ua.ko.InvalidRefLength:return"引用长度不能超过255个字符.";case Ua.ko.CannotMergeUnrelatedHistories:return"无法在此仓库中合并不相关的历史记录.";case Ua.ko.PushWithPrivateEmail:return'无法推送这些提交，因为它们包含GitHub上标记为专用的电子邮件地址。要继续推送，请访问https://github.com/settings/emails，取消选中“保持我的电子邮件地址私有”，然后切换回GitHub桌面以推动提交。然后可以再次启用该设置.';case Ua.ko.LFSAttributeDoesNotMatch:return"在全局Git配置中找到的Git LFS属性与预期值不匹配.";case Ua.ko.ProtectedBranchDeleteRejected:return"无法从远程仓库中删除此分支，因为它被标记为受保护.";case Ua.ko.ProtectedBranchRequiredStatus:return"推送被远程服务器拒绝，因为未满足所需的状态检查.";case Ua.ko.BranchRenameFailed:return"无法重命名分支.";case Ua.ko.PathDoesNotExist:return"磁盘上不存在路径.";case Ua.ko.InvalidObjectName:return"在Git仓库中找不到该对象.";case Ua.ko.OutsideRepository:return"此路径不是仓库中的有效路径.";case Ua.ko.LockFileAlreadyExists:return"仓库中已存在锁定文件，这将阻止此操作完成.";case Ua.ko.NoMergeToAbort:return"没有正在进行的合并，因此没有要中止的内容.";case Ua.ko.NoExistingRemoteBranch:return"远程分支不存在.";case Ua.ko.LocalChangesOverwritten:return"无法切换分支，因为存在将被覆盖的工作目录更改。请提交或隐藏您的更改.";case Ua.ko.UnresolvedConflicts:return"工作目录中存在未解决的冲突.";case Ua.ko.ConfigLockFileAlreadyExists:case Ua.ko.RemoteAlreadyExists:return null;case Ua.ko.TagAlreadyExists:return"具有该名称的标记已存在";case Ua.ko.MergeWithLocalChanges:case Ua.ko.RebaseWithLocalChanges:case Ua.ko.GPGFailedToSignData:case Ua.ko.ConflictModifyDeletedInBranch:case Ua.ko.MergeCommitNoMainlineOption:case Ua.ko.UnsafeDirectory:case Ua.ko.PathExistsButNotInRef:return null;default:return et(0,`Unknown error: ${e}`)}}(u):null,d={...l,gitError:u,gitErrorDescription:p,combinedOutput:o,path:t};let m=!0;if(u&&s.expectedErrors&&(m=s.expectedErrors.has(u)),u&&m||h)return d;const f=new Array;if(f.push(`\`git ${e.join(" ")}\` exited with an unexpected code: ${c}.`),l.stdout&&(f.push("stdout:"),f.push(l.stdout)),l.stderr&&(f.push("stderr:"),f.push(l.stderr)),u&&f.push(`(The error was parsed as ${u}: ${p})`),log.error(f.join("\n")),u===Ua.ko.PushWithFileSizeExceedingLimit){const e=function(e){const t=Array.from(e.matchAll(/(^remote:\serror:\sFile\s)/gm)),n=Array.from(e.matchAll(/(;\sthis\sexceeds\sGitHub's\sfile\ssize\slimit\sof\s100.00\sMB)/gm));if(t.length!==n.length)return[];const r=[];for(let i=0;i<t.length;i++){const o=t[i],s=n[i];if(void 0===o.index||void 0===s.index)continue;const a=o.index+o[0].length,l=s.index;let c=e.slice(a,l);c=c.replace("is ","("),c+=")",r.push(c)}return r}(f.join()),t=e.join("\n");""!==t&&(d.gitErrorDescription+="\n\nFile causing error:\n\n"+t)}throw new zw(d,e)}))}function jw(e){switch(e){case Ua.ko.SSHAuthenticationFailed:case Ua.ko.SSHPermissionDenied:case Ua.ko.HTTPSAuthenticationFailed:return!0}return!1}function Gw(e){return e instanceof zw&&e.result.gitError===Ua.ko.ConfigLockFileAlreadyExists}const Vw=/^error: could not lock config file (.+?): File exists$/m;function Kw(t){const n=Vw.exec(t.stderr);if(null===n)return null;const r=n[1];return e.resolve(t.path,`${r}.lock`)}const Yw=()=>["-c","credential.helper="];function Xw(e){return e.stdout.split("]")[0].split(" ")[1]}function Qw(e,t){return`--- ${e?`a/${e}`:"/dev/null"}\n+++ ${t?`b/${t}`:"/dev/null"}\n`}function Zw(e,t,n,r,i){return`@@ -${1===t?`${e}`:`${e},${t}`} +${1===r?`${n}`:`${n},${r}`} @@${i=i?` ${i}`:""}\n`}async function Jw(e,t){if(t.status.kind===Io.Renamed){await qw(["add","--u","--",t.status.oldPath],e.path,"applyPatchToIndex");const n=await qw(["ls-tree","HEAD","--",t.status.oldPath],e.path,"applyPatchToIndex"),[r]=n.stdout.split("\t",1),[i,,o]=r.split(" ",3);await qw(["update-index","--add","--cacheinfo",i,o,t.path],e.path,"applyPatchToIndex")}const n=await Pp(e,t);if(n.kind!==Ro.Text&&n.kind!==Ro.LargeText){const{kind:e}=n;switch(n.kind){case Ro.Binary:case Ro.Submodule:case Ro.Image:throw new Error(`Can't create partial commit in binary file: ${t.path}`);case Ro.Unrenderable:throw new Error(`File diff is too large to generate a partial commit: ${t.path}`);default:et(0,`Unknown diff kind: ${e}`)}}const r=await function(e,t){let n="";if(t.hunks.forEach(((t,r)=>{let i="",o=0,s=0,a=!1;t.lines.forEach(((n,r)=>{const l=t.unifiedDiffStart+r;if(n.type!==xo.Hunk){if(n.type===xo.Context)i+=`${n.text}\n`,o++,s++;else if(e.selection.isSelected(l))i+=`${n.text}\n`,n.type===xo.Add&&s++,n.type===xo.Delete&&o++,a=!0;else{if(e.status.kind===Io.New||e.status.kind===Io.Untracked)return;if(n.type===xo.Add)return;n.type===xo.Delete?(i+=` ${n.text.substring(1)}\n`,o++,s++):et(n.type,`Unsupported line type ${n.type}`)}n.noTrailingNewLine&&(i+="\\ No newline at end of file\n")}})),a&&(n+=Zw(t.header.oldStartLine,o,t.header.newStartLine,s),n+=i)})),!n.length)throw log.debug(`formatPatch: empty path for ${e.path}`),new Error("Could not generate a patch, no changes");return n=function(e){switch(e.status.kind){case Io.New:case Io.Untracked:return Qw(null,e.path);case Io.Renamed:case Io.Deleted:case Io.Modified:case Io.Copied:case Io.Conflicted:return Qw(e.path,e.path);default:return et(e.status,`Unknown file status ${e.status}`)}}(e)+n,n}(t,n);return await qw(["apply","--cached","--unidiff-zero","--whitespace=nowarn","-"],e.path,"applyPatchToIndex",{stdin:r}),Promise.resolve()}function ev(e){return e.startsWith("heads/")?`refs/${e}`:e.startsWith("refs/heads/")?e:`refs/heads/${e}`}async function tv(e,t){const n=await qw(["symbolic-ref","-q",t],e.path,"getSymbolicRef",{successExitCodes:new Set([0,1,128])});return 1===n.exitCode||128===n.exitCode?null:n.stdout.trim()}async function nv(e,t,n){const r=["update-ref","-d",t];void 0!==n&&r.push("-m",n),await qw(r,e.path,"deleteRef")}async function rv(e){const t=await qw(["remote","-v"],e.path,"getRemotes",{expectedErrors:new Set([Ua.ko.NotAGitRepository])});if(t.gitError===Ua.ko.NotAGitRepository)return[];const n=t.stdout.split("\n").filter((e=>/\(fetch\)( \[.+\])?$/.test(e))).map((e=>e.split(/\s+/))).map((e=>({name:e[0],url:e[1]})));return n}async function iv(e,t,n){return await qw(["remote","add",t,n],e.path,"addRemote"),{url:n,name:t}}async function ov(e,t){const n={successExitCodes:new Set([0,2,128])};await qw(["remote","remove",t],e.path,"removeRemote",n)}async function sv(e,t,n){return await qw(["remote","set-url",t,n],e.path,"setRemoteURL"),!0}async function av(e,t,n){const r={successExitCodes:new Set([0,1,128]),env:await uh(t,n.url)};await qw([...Yw(),"remote","set-head","-a",n.name],e.path,"updateRemoteHEAD",r)}async function lv(e,t){const n=`refs/remotes/${t}/`,r=await tv(e,`${n}HEAD`);return null!=r&&r.length>n.length&&r.startsWith(n)?r.substring(n.length):null}async function cv(e,t){return await qw(["branch","-D",t],e.path,"deleteLocalBranch"),!0}async function uv(e,t,n,r){const i=await async function(e,t){const n=await qw(["remote","get-url",t],e.path,"getRemoteURL",{successExitCodes:new Set([0,2,128])});return 0!==n.exitCode?null:n.stdout}(e,n).catch((e=>(log.error(`Could not resolve remote url for remote ${n}`,e),null)))||ch(t,e),o=[...Yw(),"push",n,`:${r}`];if((await qw(o,e.path,"deleteRemoteBranch",{env:await uh(t,i),expectedErrors:new Set([Ua.ko.BranchDeletionFailed])})).gitError===Ua.ko.BranchDeletionFailed){const t=`refs/remotes/${n}/${r}`;await nv(e,t)}return!0}function hv(e,t){switch(e){case 0:return["reset","--hard",t];case 2:return["reset",t];case 1:return["reset","--soft",t];default:return et(0,`Unknown reset mode: ${e}`)}}async function pv(e,t,n){const r=hv(t,n);return await qw(r,e.path,"reset"),!0}async function dv(e,t,n,r=!1){await async function(e){return await qw(["reset","--","."],e.path,"unstageAll"),!0}(e),await Yc(e,n);const i=["-F","-"];return r&&i.push("--amend"),Xw(await qw(["commit",...i],e.path,"createCommit",{stdin:t}))}const mv=".git/description";async function fv(e,t,n,r){await qw([...Yw(),"fetch",n.name,r],e.path,"fetchRefspec",{successExitCodes:new Set([0,128]),env:await uh(t,n.url)})}async function gv(e,...t){const{formatArgs:n,parse:r}=Uc({fullName:"%(refname)",shortName:"%(refname:short)",upstreamShortName:"%(upstream:short)",sha:"%(objectname)",author:"%(author)",symRef:"%(symref)"});t&&t.length||(t=["refs/heads","refs/remotes"]);const i=await qw(["for-each-ref",...n,...t],e.path,"getBranches",{expectedErrors:new Set([Ua.ko.NotAGitRepository])});if(i.gitError===Ua.ko.NotAGitRepository)return[];const o=[];for(const e of r(i.stdout)){if(e.symRef.length>0)continue;const t=Lc.parseIdentity(e.author),n={sha:e.sha,author:t},r=e.fullName.startsWith("refs/heads")?Ja.Local:Ja.Remote,i=e.upstreamShortName.length>0?e.upstreamShortName:null;o.push(new rl(e.shortName,i,n,r,e.fullName))}return o}const yv=new RegExp("fatal: your current branch '.*' does not have any commits yet"),bv=async e=>{try{return(await(0,y.stat)(e)).isDirectory()}catch(e){return!1}};async function wv(t){if(!await bv(t))return{kind:"missing"};try{const n=await qw(["rev-parse","--is-bare-repository","--show-cdup"],t,"getRepositoryType",{successExitCodes:new Set([0,128])});if(0===n.exitCode){const[r,i]=n.stdout.split("\n",2);return"true"===r?{kind:"bare"}:{kind:"regular",topLevelWorkingDirectory:(0,e.resolve)(t,i)}}const r=/fatal: detected dubious ownership in repository at '(.+)'/.exec(n.stderr);return r?{kind:"unsafe",path:r[1]}:{kind:"missing"}}catch(e){if("ENOENT"===e.code)return{kind:"missing"};throw e}}async function vv(e){const t=await qw(["var","GIT_AUTHOR_IDENT"],e.path,"getAuthorIdentity",{successExitCodes:new Set([0,128])});if(128===t.exitCode)return null;try{return Lc.parseIdentity(t.stdout)}catch(e){return null}}const Cv=[{title:"",weight:0}];class Sv extends Ou{constructor(){super(Cv)}}class Ev{sha;path;describe;constructor(e,t,n){this.sha=e,this.path=t,this.describe=n}}async function kv(n){const r=e.join(n.path,".gitignore");return new Promise(((e,n)=>{t.readFile(r,"utf8",((t,r)=>{t?"ENOENT"===t.code?e(null):n(t):e(r)}))}))}async function Rv(n,r){const i=e.join(n.path,".gitignore");if(""===r)return new Promise(((e,n)=>{t.unlink(i,(t=>{t?n(t):e()}))}));const o=await Dv(r,n);await(0,y.writeFile)(i,o)}async function xv(e,t){const n=await kv(e)||"",r=await Dv(n,e),i=t instanceof Array?t.join("\n"):t,o=await Dv(`${r}${i}`,e);await Rv(e,o)}function Tv(e){return e.replaceAll(/[\[\]!\*\#\?]/g,(e=>"\\"+e))}async function Dv(e,t){const n=await il(t,"core.autocrlf"),r=await il(t,"core.safecrlf");return new Promise(((t,i)=>{"true"!==n||"true"!==r?e.endsWith("\n")?t(e):t(null==n||"true"===n?`${e}\n`:`${e}\r\n`):t(e.replace(/\r\n|\n\r|\n|\r/g,"\r\n"))}))}var Av=n(9379);const Pv=new(yt())({maxSize:200});async function Iv(e){if(!(0,Av.VB)())return void(new Notification(e.title,{body:e.body}).onclick=()=>{P(),e.onClick()});const t=await pe(e.title,e.body,e.userInfo);null!==t&&Pv.set(t,e.onClick)}function _v(e,t){if(e.length<=t)return e;const n=[...e];if(n.length<=t)return e;const r=n.reduce(((e,t)=>(t>="︀"&&t<="️"?e.length&&e.push(`${e.pop()}${t}`):e.push(t),e)),[]);return r.length<=t?e:`${r.slice(0,t).join("")}…`}function Nv(e){switch(e.state){case"APPROVED":return"approved";case"CHANGES_REQUESTED":return"requested changes on";case"COMMENTED":return"reviewed"}}function Ov(e){switch(e){case"APPROVED":return{symbol:pi,className:"pr-review-approved"};case"CHANGES_REQUESTED":return{symbol:Pi,className:"pr-review-changes-requested"};case"COMMENTED":return{symbol:xi,className:"pr-review-commented"}}}function Mv(e){return"APPROVED"===e.state||"CHANGES_REQUESTED"===e.state||"COMMENTED"===e.state}const Bv="high-signal-notifications-enabled";function Fv(){return At(Bv,!0)}const Lv="https://desktop.github.com/usage-data/",Hv="last-daily-stats-report",Uv="stats-opt-out",Wv="has-sent-stats-opt-in-ping",$v="welcome-wizard-initiated-at",zv="welcome-wizard-terminated-at",qv="first-repository-added-at",jv="first-repository-cloned-at",Gv="first-repository-created-at",Vv="first-commit-created-at",Kv="first-push-to-github-at",Yv="first-non-default-branch-checkout-at",Xv="welcome-wizard-sign-in-method",Qv="repositories-committed-in-without-write-access",Zv={commits:0,partialCommits:0,openShellCount:0,coAuthoredCommits:0,commitsUndoneWithChanges:0,commitsUndoneWithoutChanges:0,branchComparisons:0,defaultBranchComparisons:0,mergesInitiatedFromComparison:0,updateFromDefaultBranchMenuCount:0,mergeIntoCurrentBranchMenuCount:0,prBranchCheckouts:0,repoWithIndicatorClicked:0,repoWithoutIndicatorClicked:0,dotcomPushCount:0,dotcomForcePushCount:0,enterprisePushCount:0,enterpriseForcePushCount:0,externalPushCount:0,externalForcePushCount:0,active:!1,mergeConflictFromPullCount:0,mergeConflictFromExplicitMergeCount:0,mergedWithLoadingHintCount:0,mergedWithCleanMergeHintCount:0,mergedWithConflictWarningHintCount:0,mergeSuccessAfterConflictsCount:0,mergeAbortedAfterConflictsCount:0,unattributedCommits:0,enterpriseCommits:0,dotcomCommits:0,mergeConflictsDialogDismissalCount:0,anyConflictsLeftOnMergeConflictsDialogDismissalCount:0,mergeConflictsDialogReopenedCount:0,guidedConflictedMergeCompletionCount:0,unguidedConflictedMergeCompletionCount:0,createPullRequestCount:0,createPullRequestFromPreviewCount:0,rebaseConflictsDialogDismissalCount:0,rebaseConflictsDialogReopenedCount:0,rebaseAbortedAfterConflictsCount:0,rebaseSuccessAfterConflictsCount:0,rebaseSuccessWithoutConflictsCount:0,rebaseWithBranchAlreadyUpToDateCount:0,pullWithRebaseCount:0,pullWithDefaultSettingCount:0,stashEntriesCreatedOutsideDesktop:0,errorWhenSwitchingBranchesWithUncommmittedChanges:0,rebaseCurrentBranchMenuCount:0,stashViewedAfterCheckoutCount:0,stashCreatedOnCurrentBranchCount:0,stashNotViewedAfterCheckoutCount:0,changesTakenToNewBranchCount:0,stashRestoreCount:0,stashDiscardCount:0,stashViewCount:0,noActionTakenOnStashCount:0,suggestedStepOpenInExternalEditor:0,suggestedStepOpenWorkingDirectory:0,suggestedStepViewOnGitHub:0,suggestedStepPublishRepository:0,suggestedStepPublishBranch:0,suggestedStepCreatePullRequest:0,suggestedStepViewStash:0,commitsToProtectedBranch:0,commitsToRepositoryWithBranchProtections:0,tutorialStarted:!1,tutorialRepoCreated:!1,tutorialEditorInstalled:!1,tutorialBranchCreated:!1,tutorialFileEdited:!1,tutorialCommitCreated:!1,tutorialBranchPushed:!1,tutorialPrCreated:!1,tutorialCompleted:!1,highestTutorialStepCompleted:-1,commitsToRepositoryWithoutWriteAccess:0,forksCreated:0,issueCreationWebpageOpenedCount:0,tagsCreatedInDesktop:0,tagsCreated:0,tagsDeleted:0,diffModeChangeCount:0,diffOptionsViewedCount:0,repositoryViewChangeCount:0,unhandledRejectionCount:0,cherryPickSuccessfulCount:0,cherryPickViaDragAndDropCount:0,cherryPickViaContextMenuCount:0,dragStartedAndCanceledCount:0,cherryPickConflictsEncounteredCount:0,cherryPickSuccessfulWithConflictsCount:0,cherryPickMultipleCommitsCount:0,cherryPickUndoneCount:0,cherryPickBranchCreatedCount:0,amendCommitStartedCount:0,amendCommitSuccessfulWithFileChangesCount:0,amendCommitSuccessfulWithoutFileChangesCount:0,reorderSuccessfulCount:0,reorderStartedCount:0,reorderConflictsEncounteredCount:0,reorderSuccessfulWithConflictsCount:0,reorderMultipleCommitsCount:0,reorderUndoneCount:0,squashConflictsEncounteredCount:0,squashMultipleCommitsInvokedCount:0,squashSuccessfulCount:0,squashSuccessfulWithConflictsCount:0,squashViaContextMenuInvokedCount:0,squashViaDragAndDropInvokedCount:0,squashUndoneCount:0,squashMergeIntoCurrentBranchMenuCount:0,squashMergeSuccessfulWithConflictsCount:0,squashMergeSuccessfulCount:0,squashMergeInvokedCount:0,resetToCommitCount:0,opensCheckRunsPopover:0,viewsCheckOnline:0,viewsCheckJobStepOnline:0,rerunsChecks:0,checksFailedNotificationCount:0,checksFailedNotificationFromRecentRepoCount:0,checksFailedNotificationFromNonRecentRepoCount:0,checksFailedNotificationClicked:0,checksFailedDialogOpenCount:0,checksFailedDialogSwitchToPullRequestCount:0,checksFailedDialogRerunChecksCount:0,pullRequestReviewNotificationFromRecentRepoCount:0,pullRequestReviewNotificationFromNonRecentRepoCount:0,pullRequestReviewApprovedNotificationCount:0,pullRequestReviewApprovedNotificationClicked:0,pullRequestReviewApprovedDialogSwitchToPullRequestCount:0,pullRequestReviewCommentedNotificationCount:0,pullRequestReviewCommentedNotificationClicked:0,pullRequestReviewCommentedDialogSwitchToPullRequestCount:0,pullRequestReviewChangesRequestedNotificationCount:0,pullRequestReviewChangesRequestedNotificationClicked:0,pullRequestReviewChangesRequestedDialogSwitchToPullRequestCount:0,pullRequestCommentNotificationCount:0,pullRequestCommentNotificationClicked:0,pullRequestCommentNotificationFromRecentRepoCount:0,pullRequestCommentNotificationFromNonRecentRepoCount:0,pullRequestCommentDialogSwitchToPullRequestCount:0,multiCommitDiffWithUnreachableCommitWarningCount:0,multiCommitDiffFromHistoryCount:0,multiCommitDiffFromCompareCount:0,multiCommitDiffUnreachableCommitsDialogOpenedCount:0,submoduleDiffViewedFromChangesListCount:0,submoduleDiffViewedFromHistoryCount:0,openSubmoduleFromDiffCount:0,previewedPullRequestCount:0};function Jv(e){null===localStorage.getItem(e)&&_t(e,Date.now())}function eC(e){return It(e)??null}function tC(e){const t=eC($v);if(null===t)return;const n=eC(e);return null===n||n<=t?-1:Math.round((n-t)/1e3)}function nC(){return At(Uv)}let rC;function iC(e,t){if(nC())return;const n=Date.now();void 0!==rC&&n-rC<6e4||(rC=n,process.emit("send-non-fatal-exception",t,{kind:e}))}function oC(e,t){return Qs(e,t>e?t+1:t-1)}class sC extends be.Component{fakeScroll=null;focusRow=-1;rowRefs=new Map;gridStyle={overflowX:"hidden"};lastScroll=null;list=null;grid=null;resizeObserver=null;updateSizeTimeoutId=null;getContainerProps=mr((e=>({onKeyDown:this.onKeyDown,"aria-activedescendant":e,"aria-multiselectable":"multi"===this.props.selectionMode||"range"===this.props.selectionMode?"true":void 0})));constructor(e){super(e),this.state={};const t=window.ResizeObserver;ResizeObserver&&(this.resizeObserver=new t((e=>{for(const{target:t,contentRect:n}of e)t===this.list&&null!==this.list&&(null!==this.updateSizeTimeoutId&&clearImmediate(this.updateSizeTimeoutId),this.updateSizeTimeoutId=setImmediate(this.onResized,this.list,n))})))}getRowId(e){return this.props.rowId?this.props.rowId(e):void 0===this.state.rowIdPrefix?void 0:`${this.state.rowIdPrefix}-${e}`}onResized=(e,t)=>{this.updateSizeTimeoutId=null;const[n,r]=[e.offsetWidth,e.offsetHeight];this.state.width===n&&this.state.height===r||this.setState({width:n,height:r})};onSelectAll=e=>{const t=this.props.selectionMode;if("range"!==t&&"multi"!==t)return;if(e.preventDefault(),this.props.rowCount<=0)return;const n={kind:"select-all"},r=this.props.rowCount-1;if(this.props.onSelectionChanged){const e=oC(0,r);this.props.onSelectionChanged(e,n)}"range"===t&&this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(0,r,n)};onRef=e=>{null===e&&null!==this.list&&this.list.removeEventListener("select-all",this.onSelectAll),this.list=e,null!==e&&e.addEventListener("select-all",this.onSelectAll),this.resizeObserver&&(this.resizeObserver.disconnect(),null!==e?this.resizeObserver.observe(e):this.setState({width:void 0,height:void 0}))};onKeyDown=e=>{if(this.props.onRowKeyDown)for(const t of this.props.selectedRows)this.props.onRowKeyDown(t,e);if(e.defaultPrevented)return;const t={kind:"keyboard",event:e},n=e.metaKey&&"ArrowUp"===e.key,r=e.metaKey&&"ArrowDown"===e.key,i=e.shiftKey&&void 0!==this.props.selectionMode&&"single"!==this.props.selectionMode;if(n||r){const r=n?"up":"down";i?this.addSelectionToLastSelectableRow(r,t):this.moveSelectionToLastSelectableRow(r,t),e.preventDefault()}else if("ArrowUp"===e.key||"ArrowDown"===e.key){const n="ArrowUp"===e.key?"up":"down";i?this.addSelection(n,t):this.moveSelection(n,t),e.preventDefault()}else if("PageUp"===e.key||"PageDown"===e.key){const n="PageUp"===e.key?"up":"down";i?this.addSelectionByPage(n,t):this.moveSelectionByPage(n,t),e.preventDefault()}};moveSelectionByPage(e,t){const n=this.getNextPageRowIndex(e);this.moveSelectionTo(n,t)}addSelectionByPage(e,t){const{selectedRows:n}=this.props,r=this.getNextPageRowIndex(e),i=oC(n[0]??0,r);this.props.onSelectionChanged&&this.props.onSelectionChanged(i,t),this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(i[0],i[i.length-1],t),this.scrollRowToVisible(r)}getNextPageRowIndex(e){const{selectedRows:t}=this.props,n=t.at(-1)??0;return this.findNextPageSelectableRow(n,e)}getRowHeight(e){const{rowHeight:t}=this.props;return"number"==typeof t?t:t({index:e})}findNextPageSelectableRow(e,t){const{height:n}=this.state,{rowCount:r}=this.props;if(void 0===n)return e;let i=0,o=e;const s="up"===t?-1:1;for(let t=e;t<r&&t>=0;t+=s){const e=this.getRowHeight(t);if(i+e>n)break;i+=e,this.canSelectRow(t)&&(o=t)}return o}onRowKeyDown=(e,t)=>{this.props.onRowKeyDown&&this.props.onRowKeyDown(e.row,t);const n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;t.defaultPrevented||n||"Enter"!==t.key&&" "!==t.key||(this.toggleSelection(t),t.preventDefault())};onFocusContainerKeyDown=e=>{const t=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;e.defaultPrevented||t||"Enter"!==e.key&&" "!==e.key||(this.toggleSelection(e),e.preventDefault())};onFocusWithinChanged=e=>{if(e){if(0===this.props.selectedRows.length){const e=this.getFirstSelectableRowIndexPath();null!==e&&this.moveSelectionTo(e,{kind:"focus"})}}else this.focusRow=-1};toggleSelection=e=>{this.props.selectedRows.forEach((t=>{if(!this.props.onRowClick)return;const{rowCount:n}=this.props;t<0||t>=n?log.debug(`[List.toggleSelection] unable to onRowClick for row ${t} as it is outside the bounds of the array [0, ${n}]`):this.props.onRowClick(t,{kind:"keyboard",event:e})}))};onRowFocus=(e,t)=>{this.focusRow=e.row,this.props.onRowFocus?.(e.row,t)};onRowKeyboardFocus=(e,t)=>{this.focusRow=e.row,this.props.onRowKeyboardFocus?.(e.row,t)};onRowBlur=(e,t)=>{this.focusRow===e.row&&(this.focusRow=-1),this.props.onRowBlur?.(e.row,t)};onRowContextMenu=(e,t)=>{this.props.onRowContextMenu?.(e.row,t)};canSelectRow=e=>!this.props.canSelectRow||this.props.canSelectRow(e);getFirstSelectableRowIndexPath(){for(let e=0;e<this.props.rowCount;e++)if(this.canSelectRow(e))return e;return null}addSelection(e,t){if(0===this.props.selectedRows.length)return this.moveSelection(e,t);const n=this.props.selectedRows[this.props.selectedRows.length-1],r=this.props.selectedRows[0],i=Ys(this.props.rowCount,{direction:e,row:n,wrap:!1},this.canSelectRow);if(null!=i){if(this.props.onSelectionChanged){const e=oC(r,i);this.props.onSelectionChanged(e,t)}"range"===this.props.selectionMode&&this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(r,i,t),this.scrollRowToVisible(i)}}moveSelection(e,t){const n=this.props.selectedRows.length>0?this.props.selectedRows[this.props.selectedRows.length-1]:-1,r=Ys(this.props.rowCount,{direction:e,row:n},this.canSelectRow);null!=r&&this.moveSelectionTo(r,t)}moveSelectionToLastSelectableRow(e,t){const{canSelectRow:n,props:r}=this,{rowCount:i}=r,o=Xs(e,i,n);null!==o&&this.moveSelectionTo(o,t)}addSelectionToLastSelectableRow(e,t){const{canSelectRow:n,props:r}=this,{rowCount:i,selectedRows:o}=r,s=Xs(e,i,n);if(null===s)return;const a=oC(o[0]??0,s);this.props.onSelectionChanged?.(a,t);const l=a.at(0)??0,c=a.at(-1)??0;this.props.onSelectedRangeChanged?.(l,c,t),this.scrollRowToVisible(s)}moveSelectionTo(e,t){if(this.props.onSelectionChanged&&this.props.onSelectionChanged([e],t),this.props.onSelectedRowChanged){const n=this.props.rowCount;if(e<0||e>=n)return void log.debug(`[List.moveSelection] unable to onSelectedRowChanged for row '${e}' as it is outside the bounds of the array [0, ${n}]`);this.props.onSelectedRowChanged(e,t)}this.scrollRowToVisible(e)}scrollRowToVisible(e,t=!0){null!==this.grid&&(this.grid.scrollToCell({rowIndex:e,columnIndex:0}),t&&(this.focusRow=e,this.rowRefs.get(e)?.focus({preventScroll:!0})))}componentDidMount(){const{props:e,grid:t}=this,{selectedRows:n,scrollToRow:r,setScrollTop:i}=e;null!==t&&void 0===i&&(void 0!==r?t.scrollToCell({rowIndex:r,columnIndex:0}):n.length>0&&t.scrollToCell({rowIndex:n[0],columnIndex:0}))}componentDidUpdate(e,t){const{scrollToRow:n,setScrollTop:r}=this.props;if(void 0!==n&&e.scrollToRow!==n&&void 0===r&&this.scrollRowToVisible(n,!1),this.grid&&this.props.rowCount===e.rowCount&&this.state.width===t.width&&this.state.height===t.height){const t=!js(e.selectedRows,this.props.selectedRows),n=!qs(e.invalidationProps,this.props.invalidationProps);(t||n)&&this.grid.forceUpdate()}}componentWillMount(){this.setState({rowIdPrefix:Yr("ListRow")})}componentWillUnmount(){null!==this.updateSizeTimeoutId&&(clearImmediate(this.updateSizeTimeoutId),this.updateSizeTimeoutId=null),this.resizeObserver&&this.resizeObserver.disconnect(),this.state.rowIdPrefix&&Xr(this.state.rowIdPrefix)}onRowRef=(e,t)=>{if(null===t?this.rowRefs.delete(e.row):this.rowRefs.set(e.row,t),e.row===this.focusRow)if(null===t){const e=ve.findDOMNode(this.grid);e instanceof HTMLElement&&e.focus({preventScroll:!0})}else t.focus({preventScroll:!0})};getCustomRowClassNames=e=>{const{rowCustomClassNameMap:t}=this.props;if(void 0===t)return;const n=new Array;return t.forEach(((t,r)=>{t.includes(e)&&n.push(r)})),0===n.length?void 0:n.join(" ")};getRowRenderer=e=>t=>{const{selectedRows:n}=this.props,r=t.rowIndex,i=this.canSelectRow(r),o=-1!==n.indexOf(r),s=this.getCustomRowClassNames(r);let a;i&&(a=o&&n[0]===r||0===n.length&&e===r?0:-1);const l=this.props.rowRenderer(r),c=void 0!==this.props.insertionDragType?be.createElement(ra,{onDropDataInsertion:this.onDropDataInsertion,itemIndex:{section:0,row:r},dragType:this.props.insertionDragType},l):l,u=this.getRowId(r),h=void 0!==this.props.getRowAriaLabel?this.props.getRowAriaLabel(r):void 0;return be.createElement(Ks,{key:t.key,id:u,onRowRef:this.onRowRef,rowCount:this.props.rowCount,rowIndex:{section:0,row:r},sectionHasHeader:!1,selected:o,ariaLabel:h,onRowClick:this.onRowClick,onRowDoubleClick:this.onRowDoubleClick,onRowKeyDown:this.onRowKeyDown,onRowMouseDown:this.onRowMouseDown,onRowMouseUp:this.onRowMouseUp,onRowFocus:this.onRowFocus,onRowKeyboardFocus:this.onRowKeyboardFocus,onRowBlur:this.onRowBlur,onContextMenu:this.onRowContextMenu,style:t.style,tabIndex:a,children:c,selectable:i,className:s})};render(){let e;return e=this.resizeObserver?this.renderContents(this.state.width??0,this.state.height??0):be.createElement(ms,{disableWidth:!0,disableHeight:!0},(({width:e,height:t})=>this.renderContents(e,t))),be.createElement("div",{ref:this.onRef,id:this.props.id,className:"list","aria-labelledby":this.props.ariaLabelledBy,"aria-label":this.props.ariaLabel},e)}renderContents(e,t){return this.renderGrid(e,t)}onGridRef=e=>{this.grid=e};onFakeScrollRef=e=>{this.fakeScroll=e};renderGrid(e,t){this.props.selectedRows[0]<0&&iC("The selected rows of the List.tsx contained a negative number.",new Error("Invalid selected rows that contained a negative number passed to List component. This will cause keyboard navigation and focus problems."));const n=this.props.selectedRows.length<1?0:-1,r=this.props.selectedRows.length&&this.state.rowIdPrefix?this.getRowId(this.props.selectedRows[this.props.selectedRows.length-1]):void 0,i=this.getContainerProps(r);return be.createElement(Vs,{className:"list-focus-container",onKeyDown:this.onFocusContainerKeyDown,onFocusWithinChanged:this.onFocusWithinChanged},be.createElement(Us,{id:this.props.accessibleListId,role:"listbox",ref:this.onGridRef,autoContainerWidth:!0,containerRole:"presentation",containerProps:i,width:e,height:t,columnWidth:e,columnCount:1,"aria-multiselectable":"single"!==this.props.selectionMode||void 0,rowCount:this.props.rowCount,rowHeight:this.props.rowHeight,cellRenderer:this.getRowRenderer(this.getFirstSelectableRowIndexPath()),onScroll:this.onScroll,scrollTop:this.props.setScrollTop,overscanRowCount:4,style:this.gridStyle,tabIndex:n}))}renderFakeScroll(e){let t=0;if("number"==typeof this.props.rowHeight)t=this.props.rowHeight*this.props.rowCount;else for(let e=0;e<this.props.rowCount;e++)t+=this.props.rowHeight({index:e});return be.createElement("div",{className:"fake-scroll",ref:this.onFakeScrollRef,style:{height:e},onScroll:this.onFakeScroll},be.createElement("div",{style:{height:t,pointerEvents:"none"}}))}onFakeScroll=e=>{if("grid"!==this.lastScroll){if(this.lastScroll="fake",this.grid){const t=ve.findDOMNode(this.grid);t instanceof Element&&(t.scrollTop=e.currentTarget.scrollTop)}}else this.lastScroll=null};onRowMouseDown=(e,t)=>{const{row:n}=e;if(this.canSelectRow(n)){if(this.props.onRowMouseDown&&this.props.onRowMouseDown(n,t),(2===t.button||0===t.button&&t.ctrlKey)&&this.props.selectedRows.includes(n))return;const e=t.metaKey;if(t.shiftKey&&this.props.selectedRows.length&&this.props.selectionMode&&"single"!==this.props.selectionMode){const e=this.props.selectedRows[0];if(this.props.onSelectionChanged){const r=oC(e,n);this.props.onSelectionChanged(r,{kind:"mouseclick",event:t})}"range"===this.props.selectionMode&&this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(e,n,{kind:"mouseclick",event:t})}else if(e&&"multi"===this.props.selectionMode){if(this.props.onSelectionChanged){let e;if(this.props.selectedRows.includes(n)){if(1===this.props.selectedRows.length)return;e=this.props.selectedRows.filter((e=>e!==n))}else e=[...this.props.selectedRows,n];this.props.onSelectionChanged(e,{kind:"mouseclick",event:t})}}else("range"===this.props.selectionMode||"multi"===this.props.selectionMode)&&this.props.selectedRows.length>1&&this.props.selectedRows.includes(n)||(1!==this.props.selectedRows.length||1===this.props.selectedRows.length&&n!==this.props.selectedRows[0])&&this.selectSingleRowAfterMouseEvent(n,t)}};onRowMouseUp=(e,t)=>{const{row:n}=e;if(!this.canSelectRow(n))return;if((2===t.button||0===t.button&&t.ctrlKey)&&this.props.selectedRows.includes(n))return;const r=t.metaKey;!t.shiftKey&&!r&&this.props.selectedRows.length>1&&this.props.selectedRows.includes(n)&&("range"===this.props.selectionMode||"multi"===this.props.selectionMode)&&this.selectSingleRowAfterMouseEvent(n,t)};selectSingleRowAfterMouseEvent(e,t){if(this.props.onSelectionChanged&&this.props.onSelectionChanged([e],{kind:"mouseclick",event:t}),this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(e,e,{kind:"mouseclick",event:t}),this.props.onSelectedRowChanged){const{rowCount:n}=this.props;if(e<0||e>=n)return void log.debug(`[List.selectSingleRowAfterMouseEvent] unable to onSelectedRowChanged for row '${e}' as it is outside the bounds of the array [0, ${n}]`);this.props.onSelectedRowChanged(e,{kind:"mouseclick",event:t})}}onDropDataInsertion=(e,t)=>{this.props.onDropDataInsertion?.(e.row,t)};onRowClick=(e,t)=>{if(this.canSelectRow(e.row)&&this.props.onRowClick){const n=this.props.rowCount;if(e.row<0||e.row>=n)return void log.debug(`[List.onRowClick] unable to onRowClick for row ${e.row} as it is outside the bounds of the array [0, ${n}]`);this.props.onRowClick(e.row,{kind:"mouseclick",event:t})}};onRowDoubleClick=(e,t)=>{this.props.onRowDoubleClick&&this.props.onRowDoubleClick(e.row,{kind:"mouseclick",event:t})};onScroll=({scrollTop:e,clientHeight:t})=>{this.props.onScroll&&this.props.onScroll(e,t)};focus(){const{selectedRows:e,rowCount:t}=this.props,n=e.at(-1);if(void 0!==n&&n<t)this.scrollRowToVisible(n);else if(this.grid){const e=ve.findDOMNode(this.grid);e&&e.focus()}}}function aC(e){switch(e.toLowerCase()){case"cmdorctrl":case"commandorcontrol":case"cmd":case"command":return"⌘";case"ctrl":case"control":return"⌃";case"shift":return"⇧";case"alt":case"option":return"⌥";case" ":return"Space"}return e}async function lC(e,t=!1){const n=await ee(cC(e),t);if(null!==n){const t=function(e,t){let n={submenu:e};for(const e of t){if(void 0===n||void 0===n.submenu)return;n=n.submenu[e]}return n}(e,n);void 0!==t&&void 0!==t.action&&t.action()}}function cC(e){return e.map((e=>({...e,action:void 0,submenu:e.submenu?cC(e.submenu):void 0})))}var uC=n(4397),hC=n.n(uC);class pC extends be.Component{suffix="";onTrackedInputChanged=hC()((()=>{this.setState({message:this.buildMessage()})}),1e3);constructor(e){super(e),this.state={message:null!==this.props.message?this.buildMessage():null}}componentDidUpdate(e){e.trackedUserInput!==this.props.trackedUserInput&&this.onTrackedInputChanged()}componentWillUnmount(){this.onTrackedInputChanged.cancel()}buildMessage(){return this.suffix="  "===this.suffix?" ":"  ",we().createElement(we().Fragment,null,this.props.message,this.suffix)}renderMessage(){return void 0===this.props.trackedUserInput?this.props.message:null!==this.props.message?this.state.message:""}render(){return we().createElement("div",{id:this.props.id,className:"sr-only","aria-live":"polite","aria-atomic":"true"},this.renderMessage())}}class dC extends be.Component{inputElement=null;componentWillMount(){const e=Yr(`TextBox_${this.props.label||this.props.placeholder}`);this.setState({inputId:e,value:this.props.value,valueCleared:!1})}componentWillUnmount(){this.state.inputId&&Xr(this.state.inputId)}componentWillReceiveProps(e){this.state.value!==e.value&&this.setState({value:e.value})}selectAll(){null!==this.inputElement&&this.inputElement.select()}get isFocused(){return null!==this.inputElement&&null!==document.activeElement&&this.inputElement===document.activeElement}focus(){null!==this.inputElement&&this.inputElement.focus()}blur(){null!==this.inputElement&&this.inputElement.blur()}onChange=e=>{const t=e.currentTarget.value;this.setState({value:t,valueCleared:!1},(()=>{this.props.onValueChanged&&this.props.onValueChanged(t)}))};onSearchTextCleared=()=>{this.setState({valueCleared:!0}),this.props.onSearchCleared?.()};clearSearchText=()=>{null!==this.inputElement&&(this.inputElement.value="",this.setState({value:"",valueCleared:!0},(()=>{this.props.onValueChanged&&this.props.onValueChanged(""),this.props.onSearchCleared?.(),this.focus()})))};onInputRef=e=>{null!=this.inputElement&&"search"===this.props.type&&this.inputElement.removeEventListener("search",this.onSearchTextCleared),this.inputElement=e,null!=this.inputElement&&"search"===this.props.type&&this.inputElement.addEventListener("search",this.onSearchTextCleared)};onContextMenu=e=>{e.preventDefault(),lC([{role:"editMenu"}])};onKeyDown=e=>{const t=this.state.value;if(""!==t&&"search"===this.props.type&&"Escape"===e.key){const t="";e.preventDefault(),this.setState({value:t}),this.props.onValueChanged&&this.props.onValueChanged(t)}else"search"===this.props.type&&"Escape"===e.key&&""===t?this.props.onBlur&&(this.props.onBlur(t),null!==this.inputElement&&this.inputElement.blur()):"search"===this.props.type&&"Enter"===e.key&&void 0!==t&&""!==t&&void 0!==this.props.onEnterPressed&&this.props.onEnterPressed(t);void 0!==this.props.onKeyDown&&this.props.onKeyDown(e)};render(){const{label:e,className:t}=this.props,n=e?this.state.inputId:void 0;return be.createElement("div",{className:Vr()("text-box-component",t,{"no-invalid-state":!1===this.props.displayInvalidState,"display-clear-button":!0===this.props.displayClearButton})},e&&be.createElement("label",{htmlFor:n},e),be.createElement("input",{id:n,ref:this.onInputRef,onFocus:this.onFocus,onBlur:this.onBlur,autoFocus:this.props.autoFocus,disabled:this.props.disabled,readOnly:this.props.readOnly,type:this.props.type??"text",placeholder:this.props.placeholder,value:this.state.value,onChange:this.onChange,onKeyDown:this.onKeyDown,tabIndex:this.props.tabIndex,onContextMenu:this.onContextMenu,spellCheck:!0===this.props.spellcheck,"aria-label":this.props.ariaLabel,"aria-controls":this.props.ariaControls,"aria-describedby":this.props.ariaDescribedBy,required:this.props.required}),this.props.displayClearButton&&void 0!==this.state.value&&""!==this.state.value&&be.createElement("button",{className:"clear-button","aria-label":"Clear",onClick:this.clearSearchText},be.createElement(si,{symbol:go})),this.state.valueCleared&&be.createElement(pC,{message:"Input cleared"}))}onFocus=e=>{this.props.autoFocus||void 0===this.props.onFocus||this.props.onFocus()};onBlur=e=>{void 0!==this.props.onBlur&&this.props.onBlur(e.target.value)}}class mC extends be.Component{render(){const e=Vr()("row-component",this.props.className);return be.createElement("div",{id:this.props.id,className:e},this.props.children)}}var fC=n(5170);function gC(e,t,n){return fC.score(e,t)/n}function yC(e,t,n){const r=gC(e,e,1);return t.map((t=>{const i=[],o=n(t);return o.forEach((t=>{i.push(fC.match(t,e))})),{score:gC(o.join(""),e,r),item:t,matches:{title:i[0],subtitle:i.length>1?i[1]:[]}}})).filter((({matches:e})=>e.title.length>0||e.subtitle.length>0)).sort((({score:e},{score:t})=>ir(e,t)))}class bC extends be.Component{list=null;filterTextBox=null;constructor(e){super(e),void 0!==e.filterTextBox&&(this.filterTextBox=e.filterTextBox),this.state=vC(e,null)}componentWillReceiveProps(e){this.setState(vC(e,this.state))}componentDidUpdate(e,t){if(this.props.onSelectionChanged){const e=SC(t.rows,t.selectedRow),n=SC(this.state.rows,this.state.selectedRow);if(e!==n&&(this.props.selectedItem?this.props.selectedItem.id:null)!==n){const e=CC(this.state.rows,this.state.selectedRow);this.props.onSelectionChanged(e,{kind:"filter",filterText:this.props.filterText||""})}}if(void 0!==this.props.onFilterListResultsChanged){const e=this.state.rows.filter((e=>"item"===e.kind)).length;this.props.onFilterListResultsChanged(e)}}componentDidMount(){null!==this.filterTextBox&&this.filterTextBox.selectAll()}renderTextBox(){return be.createElement(dC,{ref:this.onTextBoxRef,displayClearButton:!0,autoFocus:!0,placeholder:this.props.placeholderText||"请输入筛选条件",className:"filter-list-filter-field",onValueChanged:this.onFilterValueChanged,onEnterPressed:this.onEnterPressed,onKeyDown:this.onKeyDown,value:this.props.filterText,disabled:this.props.disabled})}renderLiveContainer(){if(!this.state.filterValueChanged)return null;const e=this.state.rows.filter((e=>"item"===e.kind)),t=1===e.length?"result":"results",n=`${e.length} ${t}`;return be.createElement(pC,{message:n,trackedUserInput:this.state.filterValue})}renderFilterRow(){return!0===this.props.hideFilterRow?null:be.createElement(mC,{className:"filter-field-row"},void 0===this.props.filterTextBox?this.renderTextBox():null,this.props.renderPostFilter?this.props.renderPostFilter():null)}render(){return be.createElement("div",{className:Vr()("filter-list",this.props.className)},this.renderLiveContainer(),this.props.renderPreList?this.props.renderPreList():null,this.renderFilterRow(),be.createElement("div",{className:"filter-list-container"},this.renderContent()))}selectNextItem(e=!1,t="down"){if(null===this.list)return;let n=null;n=-1===this.state.selectedRow||this.state.selectedRow===this.state.rows.length?Ys(this.state.rows.length,{direction:t,row:-1},this.canSelectRow):Ys(this.state.rows.length,{direction:t,row:this.state.selectedRow},this.canSelectRow),null!==n&&this.setState({selectedRow:n},(()=>{e&&null!==this.list&&this.list.focus()}))}renderContent(){return 0===this.state.rows.length&&this.props.renderNoItems?this.props.renderNoItems():be.createElement(sC,{ref:this.onListRef,rowCount:this.state.rows.length,rowRenderer:this.renderRow,rowHeight:this.props.rowHeight,selectedRows:-1===this.state.selectedRow?[]:[this.state.selectedRow],onSelectedRowChanged:this.onSelectedRowChanged,onRowClick:this.onRowClick,onRowKeyDown:this.onRowKeyDown,onRowContextMenu:this.onRowContextMenu,canSelectRow:this.canSelectRow,invalidationProps:{...this.props,...this.props.invalidationProps}})}renderRow=e=>{const t=this.state.rows[e];return"item"===t.kind?this.props.renderItem(t.item,t.matches):this.props.renderGroupHeader?this.props.renderGroupHeader(t.identifier):null};onTextBoxRef=e=>{this.filterTextBox=e};onListRef=e=>{this.list=e};onFilterValueChanged=e=>{this.props.onFilterTextChanged&&this.props.onFilterTextChanged(e)};onEnterPressed=e=>{0===this.state.rows.length&&e.trim().length>0&&void 0!==this.props.onEnterPressedWithoutFilteredItems&&this.props.onEnterPressedWithoutFilteredItems(e)};onSelectedRowChanged=(e,t)=>{if(this.setState({selectedRow:e}),this.props.onSelectionChanged){const n=this.state.rows[e];"item"===n.kind&&this.props.onSelectionChanged(n.item,t)}};canSelectRow=e=>!this.props.disabled&&"item"===this.state.rows[e].kind;onRowClick=(e,t)=>{if(this.props.onItemClick){const n=this.state.rows[e];"item"===n.kind&&this.props.onItemClick(n.item,t)}};onRowContextMenu=(e,t)=>{if(!this.props.onItemContextMenu)return;const n=this.state.rows[e];"item"===n.kind&&this.props.onItemContextMenu(n.item,t)};onRowKeyDown=(e,t)=>{if(!this.list)return;const n=this.state.rows.length,r=Ys(n,{direction:"down",row:-1},this.canSelectRow),i=Ys(n,{direction:"up",row:0},this.canSelectRow);let o=!1;if(("ArrowUp"===t.key&&e===r||"ArrowDown"===t.key&&e===i)&&(o=!0),o){const e=this.filterTextBox;e&&(t.preventDefault(),e.focus())}};onKeyDown=e=>{const t=this.list,n=e.key;if(!t)return;if(this.props.onFilterKeyDown&&this.props.onFilterKeyDown(e),e.defaultPrevented)return;const r=this.state.rows.length;if("ArrowDown"===n){if(r>0){const e=Ys(r,{direction:"down",row:-1},this.canSelectRow);null!=e&&this.setState({selectedRow:e},(()=>{t.focus()}))}e.preventDefault()}else if("ArrowUp"===n){if(r>0){const e=Ys(r,{direction:"up",row:0},this.canSelectRow);null!=e&&this.setState({selectedRow:e},(()=>{t.focus()}))}e.preventDefault()}else if("Enter"===n){if(0===r)return e.preventDefault();const t=this.props.filterText;if(void 0!==t&&!/\S/.test(t))return e.preventDefault();const n=Ys(r,{direction:"down",row:-1},this.canSelectRow);null!=n&&this.onRowClick(n,{kind:"keyboard",event:e})}}}function wC(e){return e.text}function vC(e,t){const n=new Array,r=(e.filterText||"").toLowerCase();for(const t of e.groups){const i=r?yC(r,t.items,wC):t.items.map((e=>({score:1,matches:{title:[],subtitle:[]},item:e})));if(i.length){e.renderGroupHeader&&n.push({kind:"group",identifier:t.identifier});for(const{item:e,matches:t}of i)n.push({kind:"item",item:e,matches:t})}}let i=-1;const o=e.selectedItem;return o&&(i=n.findIndex((e=>"item"===e.kind&&e.item.id===o.id))),i<0&&r.length&&(i=n.findIndex((e=>"item"===e.kind))),{rows:n,selectedRow:i,filterValue:r,filterValueChanged:!!t?.filterValueChanged||r.length>0}}function CC(e,t){if(t>=0&&t<e.length){const n=e[t];if("item"===n.kind)return n.item}return null}function SC(e,t){const n=CC(e,t);return n?n.id:null}const EC=e=>{const{repository:t}=e,n=t instanceof Ir&&t.missing,r=t instanceof Ir&&null!=t.gitHubRepository,i=e.externalEditorLabel?`打开于 ${e.externalEditorLabel}`:kh;return[...kC(e),{label:"复制仓库名称",action:()=>m.clipboard.writeText(t.name)},{label:"复制仓库路径",action:()=>m.clipboard.writeText(t.path)},{type:"separator"},{label:"在GitHub上查看",action:()=>e.onViewOnGitHub(t),enabled:r},{label:`打开于 ${e.shellLabel}`,action:()=>e.onOpenInShell(t),enabled:!n},{label:Rh,action:()=>e.onShowRepository(t),enabled:!n},{label:i,action:()=>e.onOpenInExternalEditor(t),enabled:!n},{type:"separator"},{label:e.askForConfirmationOnRemoveRepository?"移除...":"移除",action:()=>e.onRemoveRepository(t)}]},kC=e=>{const{repository:t}=e;if(!(t instanceof Ir))return[];const n=[{label:(null==t.alias?"创建":"变更")+" 别名",action:()=>e.onChangeRepositoryAlias(t)}];return null!==t.alias&&n.push({label:"移除别名",action:()=>e.onRemoveRepositoryAlias(t)}),n},RC={section:-1,row:-1};function xC(e,t){return e.section===t.section&&e.row===t.row}function TC(e){return e.reduce(((e,t)=>e+t),0)}function DC(e,t){if(!PC(e,t))return null;let n=0;for(let r=0;r<e.section;r++)n+=t[r];return n+=e.row,n}function AC(e,t){if(e<0||e>=TC(t))return null;let n=0,r=e;for(;r>=t[n];)r-=t[n],n++;return{section:n,row:r}}function PC(e,t){return e.section>=0&&e.section<t.length&&e.row>=0&&e.row<t[e.section]}function IC(e,t,n=(e=>!0)){const r=TC(e);if(0===r)return null;const{direction:i,row:o}=t,s=void 0===t.wrap||t.wrap,a=xC(RC,o)?-1:DC(o,e);if(null===a)return null;let l=PC(o,e)?a:"up"===i?r-1:0;"down"===i&&xC(o,RC)&&(l=-1);const c="up"===i?-1:1;for(let t=0;t<r;t++){if(l+=c,l>=r){if(!s)break;l=0}else if(l<0){if(!s)break;l=r-1}const t=AC(l,e);if(null!==t&&!xC(o,t)&&n(t))return t}return null}function _C(e,t,n){const r=TC(t);let i="up"===e?0:r-1;const o="up"===e?1:-1;for(;i>=0&&i<r;i+=o){const e=AC(i,t);if(null!==e&&n(e))return e}return null}function NC(e,t,n){const r=DC(e,n),i=DC(t,n);if(null===r||null===i)return[];const o=Qs(r,i>r?i+1:i-1),s=new Array(o.length);for(let e=0;e<o.length;e++){const t=AC(o[e],n);null!==t&&(s[e]=t)}return s}class OC{map=new Map;getIndexPathKey(e){return`${e.section}-${e.row}`}get(e){return this.map.get(this.getIndexPathKey(e))}set(e,t){this.map.set(this.getIndexPathKey(e),t)}delete(e){this.map.delete(this.getIndexPathKey(e))}}class MC extends be.Component{fakeScroll=null;focusRow=RC;rowRefs=new OC;gridStyle={overflowX:"hidden"};lastScroll=null;list=null;rootGrid=null;grids=new Map;resizeObserver=null;updateSizeTimeoutId=null;getContainerProps=mr((e=>({onKeyDown:this.onKeyDown,"aria-activedescendant":e,"aria-multiselectable":"multi"===this.props.selectionMode||"range"===this.props.selectionMode?"true":void 0})));constructor(e){super(e),this.state={scrollTop:0};const t=window.ResizeObserver;ResizeObserver&&(this.resizeObserver=new t((e=>{for(const{target:t,contentRect:n}of e)t===this.list&&null!==this.list&&(null!==this.updateSizeTimeoutId&&clearImmediate(this.updateSizeTimeoutId),this.updateSizeTimeoutId=setImmediate(this.onResized,this.list,n))})))}get totalRowCount(){return TC(this.props.rowCount)}getRowId(e){return this.props.rowId?this.props.rowId(e):void 0===this.state.rowIdPrefix?void 0:`${this.state.rowIdPrefix}-${e.section}-${e.row}`}onResized=(e,t)=>{this.updateSizeTimeoutId=null;const[n,r]=[e.offsetWidth,e.offsetHeight];this.state.width===n&&this.state.height===r||this.setState({width:n,height:r})};onSelectAll=e=>{const t=this.props.selectionMode;if("range"!==t&&"multi"!==t)return;if(e.preventDefault(),this.totalRowCount<=0)return;const n={kind:"select-all"},r={section:0,row:0},i={section:this.props.rowCount.length-1,row:this.props.rowCount[this.props.rowCount.length-1]-1};if(this.props.onSelectionChanged){const e=NC(r,i,this.props.rowCount);this.props.onSelectionChanged(e,n)}"range"===t&&this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(r,i,n)};onRef=e=>{null===e&&null!==this.list&&this.list.removeEventListener("select-all",this.onSelectAll),this.list=e,null!==e&&e.addEventListener("select-all",this.onSelectAll),this.resizeObserver&&(this.resizeObserver.disconnect(),null!==e?this.resizeObserver.observe(e):this.setState({width:void 0,height:void 0}))};onKeyDown=e=>{if(this.props.onRowKeyDown)for(const t of this.props.selectedRows)this.props.onRowKeyDown(t,e);if(e.defaultPrevented)return;const t={kind:"keyboard",event:e},n=e.metaKey&&"ArrowUp"===e.key,r=e.metaKey&&"ArrowDown"===e.key,i=e.shiftKey&&void 0!==this.props.selectionMode&&"single"!==this.props.selectionMode;if(n||r){const r=n?"up":"down";i?this.addSelectionToLastSelectableRow(r,t):this.moveSelectionToLastSelectableRow(r,t),e.preventDefault()}else if("ArrowUp"===e.key||"ArrowDown"===e.key){const n="ArrowUp"===e.key?"up":"down";i?this.addSelection(n,t):this.moveSelection(n,t),e.preventDefault()}else if("PageUp"===e.key||"PageDown"===e.key){const n="PageUp"===e.key?"up":"down";i?this.addSelectionByPage(n,t):this.moveSelectionByPage(n,t),e.preventDefault()}};moveSelectionByPage(e,t){const n=this.getNextPageRowIndexPath(e);this.moveSelectionTo(n,t)}addSelectionByPage(e,t){const{selectedRows:n}=this.props,r=this.getNextPageRowIndexPath(e),i=NC(n[0]??0,r,this.props.rowCount);this.props.onSelectionChanged&&this.props.onSelectionChanged(i,t),this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(i[0],i[i.length-1],t),this.scrollRowToVisible(r)}getNextPageRowIndexPath(e){const{selectedRows:t}=this.props,n=t.at(-1)??{row:0,section:0};return this.findNextPageSelectableRow(n,e)}getHeightForRowAtIndexPath(e){const{rowHeight:t}=this.props;return"number"==typeof t?t:t({index:e})}findNextPageSelectableRow(e,t){const{height:n}=this.state,{rowCount:r}=this.props;if(void 0===n)return e;let i=0,o=e;const s="up"===t?-1:1;for(let t=e.section;t<r.length&&t>=0;t+=s)for(let a=t===e.section?e.row:0;a<r[t]&&a>=0;a+=s){const e={section:t,row:a},r=this.getHeightForRowAtIndexPath(e);if(i+r>n)break;i+=r,this.canSelectRow(e)&&(o=e)}return o}onRowKeyDown=(e,t)=>{this.props.onRowKeyDown&&this.props.onRowKeyDown(e,t);const n=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;t.defaultPrevented||n||"Enter"!==t.key&&" "!==t.key||(this.toggleSelection(t),t.preventDefault())};onFocusContainerKeyDown=e=>{const t=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;e.defaultPrevented||t||"Enter"!==e.key&&" "!==e.key||(this.toggleSelection(e),e.preventDefault())};onFocusWithinChanged=e=>{if(e){if(0===this.props.selectedRows.length){const e=this.getFirstSelectableRowIndexPath();null!==e&&this.moveSelectionTo(e,{kind:"focus"})}}else this.focusRow=RC};toggleSelection=e=>{this.props.selectedRows.forEach((t=>{this.props.onRowClick&&(PC(t,this.props.rowCount)?this.props.onRowClick(t,{kind:"keyboard",event:e}):log.debug(`[List.toggleSelection] unable to onRowClick for row ${t} as it is outside the bounds`))}))};onRowFocus=(e,t)=>{this.focusRow=e,this.props.onRowFocus?.(e,t)};onRowKeyboardFocus=(e,t)=>{this.props.onRowKeyboardFocus?.(e,t)};onRowBlur=(e,t)=>{xC(this.focusRow,e)&&(this.focusRow=RC),this.props.onRowBlur?.(e,t)};onRowContextMenu=(e,t)=>{this.props.onRowContextMenu?.(e,t)};get firstRowIndexPath(){for(let e=0;e<this.props.rowCount.length;e++)if(this.props.rowCount[e]>0)return{section:e,row:0};return RC}canSelectRow=e=>!this.props.canSelectRow||this.props.canSelectRow(e);getFirstSelectableRowIndexPath(){const{rowCount:e}=this.props;for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n;e++){const n={section:t,row:e};if(this.canSelectRow(n))return n}}return null}addSelection(e,t){if(0===this.props.selectedRows.length)return this.moveSelection(e,t);const n=this.props.selectedRows[this.props.selectedRows.length-1],r=this.props.selectedRows[0],i=IC(this.props.rowCount,{direction:e,row:n,wrap:!1},this.canSelectRow);if(null!=i){if(this.props.onSelectionChanged){const e=NC(r,i,this.props.rowCount);this.props.onSelectionChanged(e,t)}"range"===this.props.selectionMode&&this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(r,i,t),this.scrollRowToVisible(i)}}moveSelection(e,t){const n=this.props.selectedRows.length>0?this.props.selectedRows[this.props.selectedRows.length-1]:RC,r=IC(this.props.rowCount,{direction:e,row:n},this.canSelectRow);null!=r&&this.moveSelectionTo(r,t)}moveSelectionToLastSelectableRow(e,t){const{canSelectRow:n,props:r}=this,{rowCount:i}=r,o=_C(e,i,n);null!==o&&this.moveSelectionTo(o,t)}addSelectionToLastSelectableRow(e,t){const{canSelectRow:n,props:r}=this,{rowCount:i,selectedRows:o}=r,s=_C(e,i,n);if(null===s)return;const a=this.firstRowIndexPath,l=NC(o[0]??a,s,i);this.props.onSelectionChanged?.(l,t);const c=l.at(0)??a,u=l.at(-1)??a;this.props.onSelectedRangeChanged?.(c,u,t),this.scrollRowToVisible(s)}moveSelectionTo(e,t){if(this.props.onSelectionChanged&&this.props.onSelectionChanged([e],t),this.props.onSelectedRowChanged){if(!PC(e,this.props.rowCount))return void log.debug(`[List.moveSelection] unable to onSelectedRowChanged for row '${e}' as it is outside the bounds`);this.props.onSelectedRowChanged(e,t)}this.scrollRowToVisible(e)}scrollRowToVisible(e,t=!0){if(null===this.rootGrid)return;const{scrollTop:n}=this.state,r=this.getHeightForRowAtIndexPath(e),i=this.getSectionScrollOffset(e.section),o=this.getRowOffsetInSection(e),s=ve.findDOMNode(this.rootGrid);if(!(s instanceof HTMLElement))return;const a=i+o+r-s.getBoundingClientRect().height,l=i+o,c=Math.max(a,Math.min(l,n));this.rootGrid?.scrollToPosition({scrollLeft:0,scrollTop:c}),t&&(this.focusRow=e,this.rowRefs.get(e)?.focus({preventScroll:!0}))}componentDidMount(){const{props:e}=this,{selectedRows:t,scrollToRow:n,setScrollTop:r}=e,i=n??t.at(0);if(void 0===i)return;const o=this.grids.get(i.section);void 0!==o&&void 0===r&&o.scrollToCell({rowIndex:i.row,columnIndex:0})}componentDidUpdate(e,t){const{scrollToRow:n,setScrollTop:r}=this.props;if(void 0===n||void 0!==e.scrollToRow&&xC(e.scrollToRow,n)||void 0===r&&this.scrollRowToVisible(n,!1),this.grids.size>0){const n=zs(this.props.rowCount,e.rowCount),r=!n||this.state.width!==t.width||this.state.height!==t.height;if(n||this.rootGrid?.recomputeGridSize(),!r){const t=!zs(e.selectedRows,this.props.selectedRows),n=!qs(e.invalidationProps,this.props.invalidationProps);if(t||n)for(const e of this.grids.values())e.forceUpdate()}}}componentWillMount(){this.setState({rowIdPrefix:Yr("ListRow")})}componentWillUnmount(){null!==this.updateSizeTimeoutId&&(clearImmediate(this.updateSizeTimeoutId),this.updateSizeTimeoutId=null),this.resizeObserver&&this.resizeObserver.disconnect(),this.state.rowIdPrefix&&Xr(this.state.rowIdPrefix)}onRowRef=(e,t)=>{if(null===t?this.rowRefs.delete(e):this.rowRefs.set(e,t),xC(e,this.focusRow))if(null===t){const t=this.grids.get(e.section);if(void 0===t){const e=ve.findDOMNode(t);e instanceof HTMLElement&&e.focus({preventScroll:!0})}}else t.focus({preventScroll:!0})};getCustomRowClassNames=e=>{const{rowCustomClassNameMap:t}=this.props;if(void 0===t)return;const n=new Array;return t.forEach(((t,r)=>{t.includes(e)&&n.push(r)})),0===n.length?void 0:n.join(" ")};getRowRenderer=(e,t)=>n=>{const{selectedRows:r}=this.props,i={section:e,row:n.rowIndex},o=this.canSelectRow(i),s=-1!==r.findIndex((e=>xC(e,i))),a=this.getCustomRowClassNames(i);let l;o&&(l=s&&xC(r[0],i)||0===r.length&&null!==t&&xC(t,i)?0:-1);const c=this.props.rowRenderer(i),u=this.props.sectionHasHeader?.(i.section)??!1,h=void 0!==this.props.insertionDragType?be.createElement(ra,{onDropDataInsertion:this.props.onDropDataInsertion,itemIndex:i,dragType:this.props.insertionDragType},c):c,p=this.getRowId(i),d=void 0!==this.props.getRowAriaLabel?this.props.getRowAriaLabel(i):void 0;return be.createElement(Ks,{key:n.key,id:p,ariaLabel:d,sectionHasHeader:u,onRowRef:this.onRowRef,rowCount:this.props.rowCount[i.section],rowIndex:i,selected:s,onRowClick:this.onRowClick,onRowDoubleClick:this.onRowDoubleClick,onRowKeyDown:this.onRowKeyDown,onRowMouseDown:this.onRowMouseDown,onRowMouseUp:this.onRowMouseUp,onRowFocus:this.onRowFocus,onRowKeyboardFocus:this.onRowKeyboardFocus,onRowBlur:this.onRowBlur,onContextMenu:this.onRowContextMenu,style:n.style,tabIndex:l,children:h,selectable:o,className:a})};render(){let e;return e=this.resizeObserver?this.renderContents(this.state.width??0,this.state.height??0):be.createElement(ms,{disableWidth:!0,disableHeight:!0},(({width:e,height:t})=>this.renderContents(e,t))),be.createElement("div",{ref:this.onRef,id:this.props.id,className:"list","aria-labelledby":this.props.ariaLabelledBy,"aria-label":this.props.ariaLabel},e)}renderContents(e,t){return this.renderGrid(e,t)}getRowHeight=e=>{const t=this.props.rowHeight;return"number"==typeof t?t:n=>{const r={section:e,row:n.index};return t({index:r})}};onRootGridRef=e=>{this.rootGrid=e};getOnGridRef=e=>t=>{null===t?this.grids.delete(e):this.grids.set(e,t)};onFakeScrollRef=e=>{this.fakeScroll=e};getSectionScrollOffset=e=>this.props.rowCount.slice(0,e).reduce(((e,t,n)=>e+this.getSectionHeight(n)),0);getSectionGridRenderer=(e,t)=>e=>{const n=e.rowIndex,r=this.getSectionHeight(n),i=this.getSectionScrollOffset(n),o=Math.max(0,Math.min(r,this.state.scrollTop-i));return be.createElement(Us,{key:n,id:this.props.accessibleListId,role:"listbox",ref:this.getOnGridRef(n),autoContainerWidth:!0,containerRole:"presentation","aria-multiselectable":"single"!==this.props.selectionMode||void 0,columnWidth:1e4,width:1e4,height:Math.min(r,t),columnCount:1,rowCount:this.props.rowCount[n],rowHeight:this.getRowHeight(n),cellRenderer:this.getRowRenderer(n,this.getFirstSelectableRowIndexPath()),scrollTop:o,overscanRowCount:4,style:{...e.style,width:"100%"},tabIndex:-1})};getRowOffsetInSection(e){if("number"==typeof this.props.rowHeight)return e.row*this.props.rowHeight;let t=0;for(let n=0;n<e.row;n++)t+=this.props.rowHeight({index:e});return t}getSectionHeight(e){if("number"==typeof this.props.rowHeight)return this.props.rowCount[e]*this.props.rowHeight;let t=0;for(let n=0;n<this.props.rowCount[e];n++)t+=this.props.rowHeight({index:{section:e,row:n}});return t}get totalHeight(){return this.props.rowCount.reduce(((e,t,n)=>e+this.getSectionHeight(n)))}sectionHeight=({index:e})=>this.getSectionHeight(e);renderGrid(e,t){const n=this.props.selectedRows.at(0);n&&xC(n,RC)&&iC("The selected rows of the section-list.tsx contained a negative number.",new Error("Invalid selected rows that contained a negative number passed to SectionList component. This will cause keyboard navigation and focus problems."));const{selectedRows:r}=this.props,i=r.length&&this.state.rowIdPrefix?this.getRowId(r[r.length-1]):void 0,o=this.getContainerProps(i),s=r.length>0?-1:0;return be.createElement(Vs,{className:"list-focus-container",onKeyDown:this.onFocusContainerKeyDown,onFocusWithinChanged:this.onFocusWithinChanged},be.createElement(Us,{id:this.props.accessibleListId,role:"presentation",ref:this.onRootGridRef,autoContainerWidth:!0,containerRole:"presentation",containerProps:o,width:e,height:t,columnWidth:e,columnCount:1,rowCount:this.props.rowCount.length,rowHeight:this.sectionHeight,cellRenderer:this.getSectionGridRenderer(e,t),onScroll:this.onScroll,scrollTop:this.props.setScrollTop,overscanRowCount:4,style:this.gridStyle,tabIndex:s}))}renderFakeScroll(e){return be.createElement("div",{className:"fake-scroll",ref:this.onFakeScrollRef,style:{height:e},onScroll:this.onFakeScroll},be.createElement("div",{style:{height:this.totalHeight,pointerEvents:"none"}}))}onFakeScroll=e=>{if("grid"!==this.lastScroll){if(this.lastScroll="fake",this.rootGrid){const t=ve.findDOMNode(this.rootGrid);t instanceof Element&&(t.scrollTop=e.currentTarget.scrollTop)}}else this.lastScroll=null};onRowMouseDown=(e,t)=>{if(this.canSelectRow(e)){if(this.props.onRowMouseDown&&this.props.onRowMouseDown(e,t),(2===t.button||0===t.button&&t.ctrlKey)&&this.props.selectedRows.includes(e))return;const n=t.metaKey;if(t.shiftKey&&this.props.selectedRows.length&&this.props.selectionMode&&"single"!==this.props.selectionMode){const n=this.props.selectedRows[0];if(this.props.onSelectionChanged){const r=NC(n,e,this.props.rowCount);this.props.onSelectionChanged(r,{kind:"mouseclick",event:t})}"range"===this.props.selectionMode&&this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(n,e,{kind:"mouseclick",event:t})}else if(n&&"multi"===this.props.selectionMode){if(this.props.onSelectionChanged){let n;if(this.props.selectedRows.includes(e)){if(1===this.props.selectedRows.length)return;n=this.props.selectedRows.filter((t=>!xC(t,e)))}else n=[...this.props.selectedRows,e];this.props.onSelectionChanged(n,{kind:"mouseclick",event:t})}}else("range"===this.props.selectionMode||"multi"===this.props.selectionMode)&&this.props.selectedRows.length>1&&this.props.selectedRows.includes(e)||(1!==this.props.selectedRows.length||1===this.props.selectedRows.length&&!xC(e,this.props.selectedRows[0]))&&this.selectSingleRowAfterMouseEvent(e,t)}};onRowMouseUp=(e,t)=>{if(!this.canSelectRow(e))return;if((2===t.button||0===t.button&&t.ctrlKey)&&this.props.selectedRows.includes(e))return;const n=t.metaKey;!t.shiftKey&&!n&&this.props.selectedRows.length>1&&this.props.selectedRows.includes(e)&&("range"===this.props.selectionMode||"multi"===this.props.selectionMode)&&this.selectSingleRowAfterMouseEvent(e,t)};selectSingleRowAfterMouseEvent(e,t){if(this.props.onSelectionChanged&&this.props.onSelectionChanged([e],{kind:"mouseclick",event:t}),this.props.onSelectedRangeChanged&&this.props.onSelectedRangeChanged(e,e,{kind:"mouseclick",event:t}),this.props.onSelectedRowChanged){if(!PC(e,this.props.rowCount))return void log.debug(`[List.selectSingleRowAfterMouseEvent] unable to onSelectedRowChanged for row '${e}' as it is outside the bounds`);this.props.onSelectedRowChanged(e,{kind:"mouseclick",event:t})}}onRowClick=(e,t)=>{if(this.canSelectRow(e)&&this.props.onRowClick){if(!PC(e,this.props.rowCount))return void log.debug(`[List.onRowClick] unable to onRowClick for row ${e} as it is outside the bounds`);this.props.onRowClick(e,{kind:"mouseclick",event:t})}};onRowDoubleClick=(e,t)=>{this.props.onRowDoubleClick&&this.props.onRowDoubleClick(e,{kind:"mouseclick",event:t})};onScroll=({scrollTop:e,clientHeight:t})=>{this.props.onScroll&&this.props.onScroll(e,t),this.setState({scrollTop:e}),this.rootGrid?.recomputeGridSize()};focus(){const{selectedRows:e,rowCount:t}=this.props,n=e.at(-1);void 0!==n&&PC(n,t)&&this.scrollRowToVisible(n)}}class BC extends be.Component{list=null;filterTextBox=null;constructor(e){super(e),void 0!==e.filterTextBox&&(this.filterTextBox=e.filterTextBox),this.state=LC(e,null)}componentWillReceiveProps(e){this.setState(LC(e,this.state))}componentDidUpdate(e,t){if(this.props.onSelectionChanged){const e=UC(t.rows,t.selectedRow),n=UC(this.state.rows,this.state.selectedRow);if(e!==n&&(this.props.selectedItem?this.props.selectedItem.id:null)!==n){const e=HC(this.state.rows,this.state.selectedRow);this.props.onSelectionChanged(e,{kind:"filter",filterText:this.props.filterText||""})}}if(void 0!==this.props.onFilterListResultsChanged){const e=this.state.rows.flat().filter((e=>"item"===e.kind)).length;this.props.onFilterListResultsChanged(e)}}componentDidMount(){null!==this.filterTextBox&&this.filterTextBox.selectAll()}renderTextBox(){return be.createElement(dC,{ref:this.onTextBoxRef,displayClearButton:!0,autoFocus:!0,placeholder:this.props.placeholderText||"请输入筛选条件",className:"filter-list-filter-field",onValueChanged:this.onFilterValueChanged,onEnterPressed:this.onEnterPressed,onKeyDown:this.onKeyDown,value:this.props.filterText,disabled:this.props.disabled})}renderLiveContainer(){if(!this.state.filterValueChanged)return null;const e=this.state.rows.flat().filter((e=>"item"===e.kind)),t=1===e.length?"result":"results",n=`${e.length} ${t}`;return be.createElement(pC,{trackedUserInput:this.state.filterValue,message:n})}renderFilterRow(){return!0===this.props.hideFilterRow?null:be.createElement(mC,{className:"filter-field-row"},void 0===this.props.filterTextBox?this.renderTextBox():null,this.props.renderPostFilter?this.props.renderPostFilter():null)}render(){return be.createElement("div",{className:Vr()("filter-list",this.props.className)},this.renderLiveContainer(),this.props.renderPreList?this.props.renderPreList():null,this.renderFilterRow(),be.createElement("div",{className:"filter-list-container"},this.renderContent()))}selectNextItem(e=!1,t="down"){if(null===this.list)return;let n=null;const r=this.state.rows.map((e=>e.length));n=-1===this.state.selectedRow.row||this.state.selectedRow.row===this.state.rows.length?IC(r,{direction:t,row:RC},this.canSelectRow):IC(r,{direction:t,row:this.state.selectedRow},this.canSelectRow),null!==n&&this.setState({selectedRow:n},(()=>{e&&null!==this.list&&this.list.focus()}))}renderContent(){return 0===this.state.rows.length&&this.props.renderNoItems?this.props.renderNoItems():be.createElement(MC,{ref:this.onListRef,rowCount:this.state.rows.map((e=>e.length)),rowRenderer:this.renderRow,sectionHasHeader:this.sectionHasHeader,getRowAriaLabel:this.getRowAriaLabel,rowHeight:this.props.rowHeight,selectedRows:xC(this.state.selectedRow,RC)?[]:[this.state.selectedRow],onSelectedRowChanged:this.onSelectedRowChanged,onRowClick:this.onRowClick,onRowKeyDown:this.onRowKeyDown,onRowContextMenu:this.onRowContextMenu,canSelectRow:this.canSelectRow,invalidationProps:{...this.props,...this.props.invalidationProps}})}sectionHasHeader=e=>{const t=this.state.rows[e];return t.length>0&&"group"===t[0].kind};getRowAriaLabel=e=>{const t=this.state.rows[e.section][e.row];if("item"!==t.kind)return;const n=this.props.getItemAriaLabel?.(t.item);if(void 0===n)return;const r=this.props.getGroupAriaLabel?.(this.state.groups[e.section]);return void 0!==r?`${n}, ${r}`:n};renderRow=e=>{const t=this.state.rows[e.section][e.row];return"item"===t.kind?this.props.renderItem(t.item,t.matches):this.props.renderGroupHeader?this.props.renderGroupHeader(t.identifier):null};onTextBoxRef=e=>{this.filterTextBox=e};onListRef=e=>{this.list=e};onFilterValueChanged=e=>{this.props.onFilterTextChanged&&this.props.onFilterTextChanged(e)};onEnterPressed=e=>{0===this.state.rows.length&&e.trim().length>0&&void 0!==this.props.onEnterPressedWithoutFilteredItems&&this.props.onEnterPressedWithoutFilteredItems(e)};onSelectedRowChanged=(e,t)=>{if(this.setState({selectedRow:e}),this.props.onSelectionChanged){const n=this.state.rows[e.section][e.row];"item"===n.kind&&this.props.onSelectionChanged(n.item,t)}};canSelectRow=e=>!this.props.disabled&&"item"===this.state.rows[e.section][e.row].kind;onRowClick=(e,t)=>{if(this.props.onItemClick){const n=this.state.rows[e.section][e.row];"item"===n.kind&&this.props.onItemClick(n.item,t)}};onRowContextMenu=(e,t)=>{if(!this.props.onItemContextMenu)return;const n=this.state.rows[e.section][e.row];"item"===n.kind&&this.props.onItemContextMenu(n.item,t)};onRowKeyDown=(e,t)=>{if(!this.list)return;const n=this.state.rows.map((e=>e.length)),r=IC(n,{direction:"down",row:RC},this.canSelectRow),i=IC(n,{direction:"up",row:{section:0,row:0}},this.canSelectRow);let o=!1;if(("ArrowUp"===t.key&&r&&xC(e,r)||"ArrowDown"===t.key&&i&&xC(e,i))&&(o=!0),o){const e=this.filterTextBox;e&&(t.preventDefault(),e.focus())}};onKeyDown=e=>{const t=this.list,n=e.key;if(!t)return;if(this.props.onFilterKeyDown&&this.props.onFilterKeyDown(e),e.defaultPrevented)return;const r=this.state.rows.map((e=>e.length));if("ArrowDown"===n){if(r.length>0){const e=IC(r,{direction:"down",row:RC},this.canSelectRow);null!=e&&this.setState({selectedRow:e},(()=>{t.focus()}))}e.preventDefault()}else if("ArrowUp"===n){if(r.length>0){const e=IC(r,{direction:"up",row:{section:0,row:0}},this.canSelectRow);null!=e&&this.setState({selectedRow:e},(()=>{t.focus()}))}e.preventDefault()}else if("Enter"===n){if(0===r.length)return e.preventDefault();const t=this.props.filterText;if(void 0!==t&&!/\S/.test(t))return e.preventDefault();const n=IC(r,{direction:"down",row:RC},this.canSelectRow);null!=n&&this.onRowClick(n,{kind:"keyboard",event:e})}}}function FC(e){return e.text}function LC(e,t){const n=new Array,r=(e.filterText||"").toLowerCase();let i=RC,o=0;const s=e.selectedItem,a=[];for(const[t,l]of e.groups.entries()){const c=new Array,u=r?yC(r,l.items,FC):l.items.map((e=>({score:1,matches:{title:[],subtitle:[]},item:e})));if(u.length){a.push(t),e.renderGroupHeader&&c.push({kind:"group",identifier:l.identifier});for(const{item:e,matches:t}of u)s&&e.id===s.id&&(i={section:o,row:c.length}),c.push({kind:"item",item:e,matches:t});n.push(c),o++}}return i.row<0&&r.length&&(i=function(e){for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.length;e++)if("item"===n[e].kind)return{section:t,row:e}}return RC}(n)),{rows:n,selectedRow:i,filterValue:r,filterValueChanged:!!t?.filterValueChanged||r.length>0,groups:a}}function HC(e,t){if(t.section<0||t.section>=e.length)return null;const n=e[t.section];if(t.row<0||t.row>=n.length)return null;const r=n[t.row];return"item"===r.kind?r.item:null}function UC(e,t){const n=HC(e,t);return n?n.id:null}const WC=St(__dirname,"static/empty-no-repo.svg");function $C(e,t){if(null!==t)for(const n of e)for(const e of n.items)if(e.repository.id===t.id)return e;return null}class zC extends be.Component{getRepositoryGroups=mr(((e,t)=>null===e?[]:function(e,t){const n=new Map,r=new Set;for(const t of e){const e=t instanceof Ir?t.gitHubRepository:null;let i=ns.NonGitHub;e?e.endpoint===Qn()?(i=e.owner.login,r.add(i)):i=ns.Enterprise:i=ns.NonGitHub;let o=n.get(i);o||(o=new Array,n.set(i,o)),o.push(t)}const i=new Array,o=e=>{const r=n.get(e);if(!r||0===r.length)return;const o=new Map;for(const e of r){const t=o.get(e.name)||0;o.set(e.name,t+1)}r.sort(((e,t)=>sr(os(e),os(t))));const s=r.map((n=>{const r=o.get(n.name)||0,{aheadBehind:i,changedFilesCount:s}=t.get(n.id)||rs;return{text:n instanceof Ir?[n.alias??n.name,Or(n)]:[n.name],id:n.id.toString(),repository:n,needsDisambiguation:r>1&&e===ns.Enterprise,aheadBehind:i,changedFilesCount:s}}));i.push({identifier:e,items:s})},s=[...r.values()];return s.sort(sr),s.forEach(o),o(ns.Enterprise),o(ns.NonGitHub),i}(e,t)));getSelectedListItem=mr($C);constructor(e){super(e),this.state={newRepositoryMenuExpanded:!1}}renderItem=(e,t)=>{const n=e.repository;return be.createElement(Qo,{key:n.id,repository:n,needsDisambiguation:e.needsDisambiguation,matches:t,aheadBehind:e.aheadBehind,changedFilesCount:e.changedFilesCount})};getGroupLabel(e){return e===ns.Enterprise?"Enterprise":e===ns.NonGitHub?"Other":e}renderGroupHeader=e=>{const t=e,n=this.getGroupLabel(t);return be.createElement(Xo,{key:t,className:"filter-list-group-header",tooltip:n,onlyWhenOverflowed:!0,tagName:"div"},n)};onItemClick=e=>{const t=e.changedFilesCount>0||null!==e.aheadBehind&&(e.aheadBehind.ahead>0||e.aheadBehind.behind>0);this.props.dispatcher.recordRepoClicked(t),this.props.onSelectionChanged(e.repository)};onItemContextMenu=(e,t)=>{t.preventDefault(),lC(EC({onRemoveRepository:this.props.onRemoveRepository,onShowRepository:this.props.onShowRepository,onOpenInShell:this.props.onOpenInShell,onOpenInExternalEditor:this.props.onOpenInExternalEditor,askForConfirmationOnRemoveRepository:this.props.askForConfirmationOnRemoveRepository,externalEditorLabel:this.props.externalEditorLabel,onChangeRepositoryAlias:this.onChangeRepositoryAlias,onRemoveRepositoryAlias:this.onRemoveRepositoryAlias,onViewOnGitHub:this.props.onViewOnGitHub,repository:e.repository,shellLabel:this.props.shellLabel}))};render(){const e=this.getRepositoryGroups(this.props.repositories,this.props.localRepositoryStateLookup),t=this.getSelectedListItem(e,this.props.selectedRepository),n=this.props.repositories.length>7?[is(this.props.recentRepositories,this.props.repositories,this.props.localRepositoryStateLookup),...e]:e,r=Wt()?BC:bC,i={rowHeight:29,selectedItem:t,filterText:this.props.filterText,onFilterTextChanged:this.props.onFilterTextChanged,renderItem:this.renderItem,renderGroupHeader:this.renderGroupHeader,onItemClick:this.onItemClick,renderPostFilter:this.renderPostFilter,renderNoItems:this.renderNoItems,groups:n,invalidationProps:{repositories:this.props.repositories,filterText:this.props.filterText},onItemContextMenu:this.onItemContextMenu,getGroupAriaLabel:e=>n[e].identifier,getItemAriaLabel:e=>e.repository.name};return be.createElement("div",{className:"repository-list"},be.createElement(r,{...i}))}renderPostFilter=()=>be.createElement(ii,{className:"new-repository-button",onClick:this.onNewRepositoryButtonClick,ariaExpanded:this.state.newRepositoryMenuExpanded},"添加",be.createElement(si,{symbol:uo}));renderNoItems=()=>be.createElement("div",{className:"no-items no-results-found"},be.createElement("img",{src:WC,className:"blankslate-image",alt:""}),be.createElement("div",{className:"title"},"抱歉，未找到存储库"),be.createElement("div",{className:"protip"},"ProTip! Press"," ",be.createElement("div",{className:"kbd-shortcut"},be.createElement(Co,{darwinKeys:["⌘","O"],keys:["Ctrl","O"]}))," ","可快速添加本地存储库，"," ",be.createElement("div",{className:"kbd-shortcut"},be.createElement(Co,{darwinKeys:["⇧","⌘","O"],keys:["Ctrl","Shift","O"]}))," ","to clone from anywhere within the app"));onNewRepositoryButtonClick=()=>{const e=[{label:"克隆存储库",action:this.onCloneRepository},{label:"创建存储库",action:this.onCreateNewRepository},{label:"添加存储库",action:this.onAddExistingRepository}];this.setState({newRepositoryMenuExpanded:!0}),lC(e).then((()=>{this.setState({newRepositoryMenuExpanded:!1})}))};onCloneRepository=()=>{this.props.dispatcher.showPopup({type:nl.CloneRepository,initialURL:null})};onAddExistingRepository=()=>{this.props.dispatcher.showPopup({type:nl.AddRepository})};onCreateNewRepository=()=>{this.props.dispatcher.showPopup({type:nl.CreateRepository})};onChangeRepositoryAlias=e=>{this.props.dispatcher.showPopup({type:nl.ChangeRepositoryAlias,repository:e})};onRemoveRepositoryAlias=e=>{this.props.dispatcher.changeRepositoryAlias(e,null)}}class qC extends be.Component{render(){const e=Vr()(this.props.className,"ui-view"),t={...this.props,className:e};return be.createElement("div",{...t},this.props.children)}}var jC;!function(e){e[e.On=0]="On",e[e.Off=1]="Off",e[e.Mixed=2]="Mixed"}(jC||(jC={}));class GC extends be.Component{input=null;onChange=e=>{this.props.onChange&&this.props.onChange(e)};componentDidUpdate(){this.updateInputState()}componentWillMount(){const e=Yr(`Checkbox_${this.props.label||"unknown"}`);this.setState({inputId:e})}componentWillUnmount(){this.state.inputId&&Xr(this.state.inputId)}focus(){this.input?.focus()}updateInputState(){const e=this.input;if(e){const t=this.props.value;e.indeterminate=t===jC.Mixed,e.checked=t!==jC.Off}}onInputRef=e=>{this.input=e,this.updateInputState()};onDoubleClick=e=>{e.preventDefault(),e.stopPropagation()};renderLabel(){const e=this.props.label,t=this.state.inputId;return e?be.createElement("label",{htmlFor:t},e):null}render(){return be.createElement("div",{className:"checkbox-component"},be.createElement("input",{id:this.state.inputId,tabIndex:this.props.tabIndex,type:"checkbox",onChange:this.onChange,onDoubleClick:this.onDoubleClick,ref:this.onInputRef,disabled:this.props.disabled,"aria-describedby":this.props.ariaDescribedBy}),this.renderLabel())}}var VC=n(4878),KC=n.n(VC),YC=n(3318),XC=n.n(YC);function QC(e){return e.split("-")[1]}function ZC(e){return"y"===e?"height":"width"}function JC(e){return e.split("-")[0]}function eS(e){return["top","bottom"].includes(JC(e))?"x":"y"}function tS(e,t,n){let{reference:r,floating:i}=e;const o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,a=eS(t),l=ZC(a),c=r[l]/2-i[l]/2,u="x"===a;let h;switch(JC(t)){case"top":h={x:o,y:r.y-i.height};break;case"bottom":h={x:o,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:s};break;case"left":h={x:r.x-i.width,y:s};break;default:h={x:r.x,y:r.y}}switch(QC(t)){case"start":h[a]-=c*(n&&u?-1:1);break;case"end":h[a]+=c*(n&&u?-1:1)}return h}function nS(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function rS(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function iS(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:d=0}=t,m=nS(d),f=a[p?"floating"===h?"reference":"floating":h],g=rS(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(f)))||n?f:f.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===h?{...s.floating,x:r,y:i}:s.reference,b=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),w=await(null==o.isElement?void 0:o.isElement(b))&&await(null==o.getScale?void 0:o.getScale(b))||{x:1,y:1},v=rS(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:b,strategy:l}):y);return{top:(g.top-v.top+m.top)/w.y,bottom:(v.bottom-g.bottom+m.bottom)/w.y,left:(g.left-v.left+m.left)/w.x,right:(v.right-g.right+m.right)/w.x}}const oS=Math.min,sS=Math.max;function aS(e,t,n){return sS(e,oS(t,n))}const lS=(["top","right","bottom","left"].reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function cS(e){return e.replace(/left|right|bottom|top/g,(e=>lS[e]))}const uS={start:"end",end:"start"};function hS(e){return e.replace(/start|end/g,(e=>uS[e]))}const pS=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:a,elements:l}=t,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:m=!0,...f}=e,g=JC(r),y=JC(s)===s,b=await(null==a.isRTL?void 0:a.isRTL(l.floating)),w=h||(y||!m?[cS(s)]:function(e){const t=cS(e);return[hS(e),t,hS(t)]}(s));h||"none"===d||w.push(...function(e,t,n,r){const i=QC(e);let o=function(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}(JC(e),"start"===n,r);return i&&(o=o.map((e=>e+"-"+i)),t&&(o=o.concat(o.map(hS)))),o}(s,m,d,b));const v=[s,...w],C=await iS(t,f),S=[];let E=(null==(n=i.flip)?void 0:n.overflows)||[];if(c&&S.push(C[g]),u){const{main:e,cross:t}=function(e,t,n){void 0===n&&(n=!1);const r=QC(e),i=eS(e),o=ZC(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=cS(s)),{main:s,cross:cS(s)}}(r,o,b);S.push(C[e],C[t])}if(E=[...E,{placement:r,overflows:S}],!S.every((e=>e<=0))){var k,R;const e=((null==(k=i.flip)?void 0:k.index)||0)+1,t=v[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let n=null==(R=E.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:R.placement;if(!n)switch(p){case"bestFit":{var x;const e=null==(x=E.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:x[0];e&&(n=e);break}case"initialPlacement":n=s}if(r!==n)return{reset:{placement:n}}}return{}}}},dS=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=JC(n),a=QC(n),l="x"===eS(n),c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,h="function"==typeof t?t(e):t;let{mainAxis:p,crossAxis:d,alignmentAxis:m}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&"number"==typeof m&&(d="end"===a?-1*m:m),l?{x:d*u,y:p*c}:{x:p*c,y:d*u}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};const mS=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=e,c={x:n,y:r},u=await iS(t,l),h=eS(JC(i)),p=function(e){return"x"===e?"y":"x"}(h);let d=c[h],m=c[p];if(o){const e="y"===h?"bottom":"right";d=aS(d+u["y"===h?"top":"left"],d,d-u[e])}if(s){const e="y"===p?"bottom":"right";m=aS(m+u["y"===p?"top":"left"],m,m-u[e])}const f=a.fn({...t,[h]:d,[p]:m});return{...f,data:{x:f.x-n,y:f.y-r}}}}},fS=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:s=(()=>{}),...a}=e,l=await iS(t,a),c=JC(n),u=QC(n),h="x"===eS(n),{width:p,height:d}=r.floating;let m,f;"top"===c||"bottom"===c?(m=c,f=u===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(f=c,m="end"===u?"top":"bottom");const g=d-l[m],y=p-l[f],b=!t.middlewareData.shift;let w=g,v=y;if(h){const e=p-l.left-l.right;v=u||b?oS(y,e):e}else{const e=d-l.top-l.bottom;w=u||b?oS(g,e):e}if(b&&!u){const e=sS(l.left,0),t=sS(l.right,0),n=sS(l.top,0),r=sS(l.bottom,0);h?v=p-2*(0!==e||0!==t?e+t:sS(l.left,l.right)):w=d-2*(0!==n||0!==r?n+r:sS(l.top,l.bottom))}await s({...t,availableWidth:v,availableHeight:w});const C=await i.getDimensions(o.floating);return p!==C.width||d!==C.height?{reset:{rects:!0}}:{}}}};function gS(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function yS(e){return gS(e).getComputedStyle(e)}function bS(e){return e instanceof gS(e).Node}function wS(e){return bS(e)?(e.nodeName||"").toLowerCase():""}let vS;function CS(){if(vS)return vS;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(vS=e.brands.map((e=>e.brand+"/"+e.version)).join(" "),vS):navigator.userAgent}function SS(e){return e instanceof gS(e).HTMLElement}function ES(e){return e instanceof gS(e).Element}function kS(e){return"undefined"!=typeof ShadowRoot&&(e instanceof gS(e).ShadowRoot||e instanceof ShadowRoot)}function RS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=yS(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function xS(e){return["table","td","th"].includes(wS(e))}function TS(e){const t=/firefox/i.test(CS()),n=yS(e),r=n.backdropFilter||n.WebkitBackdropFilter;return"none"!==n.transform||"none"!==n.perspective||!!r&&"none"!==r||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some((e=>n.willChange.includes(e)))||["paint","layout","strict","content"].some((e=>{const t=n.contain;return null!=t&&t.includes(e)}))}function DS(){return/^((?!chrome|android).)*safari/i.test(CS())}function AS(e){return["html","body","#document"].includes(wS(e))}const PS=Math.min,IS=Math.max,_S=Math.round;function NS(e){const t=yS(e);let n=parseFloat(t.width),r=parseFloat(t.height);const i=SS(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=_S(n)!==o||_S(r)!==s;return a&&(n=o,r=s),{width:n,height:r,fallback:a}}function OS(e){return ES(e)?e:e.contextElement}const MS={x:1,y:1};function BS(e){const t=OS(e);if(!SS(t))return MS;const n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=NS(t);let s=(o?_S(n.width):n.width)/r,a=(o?_S(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}function FS(e,t,n,r){var i,o;void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),a=OS(e);let l=MS;t&&(r?ES(r)&&(l=BS(r)):l=BS(e));const c=a?gS(a):window,u=DS()&&n;let h=(s.left+(u&&(null==(i=c.visualViewport)?void 0:i.offsetLeft)||0))/l.x,p=(s.top+(u&&(null==(o=c.visualViewport)?void 0:o.offsetTop)||0))/l.y,d=s.width/l.x,m=s.height/l.y;if(a){const e=gS(a),t=r&&ES(r)?gS(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=BS(n),t=n.getBoundingClientRect(),r=getComputedStyle(n);t.x+=(n.clientLeft+parseFloat(r.paddingLeft))*e.x,t.y+=(n.clientTop+parseFloat(r.paddingTop))*e.y,h*=e.x,p*=e.y,d*=e.x,m*=e.y,h+=t.x,p+=t.y,n=gS(n).frameElement}}return rS({width:d,height:m,x:h,y:p})}function LS(e){return((bS(e)?e.ownerDocument:e.document)||window.document).documentElement}function HS(e){return ES(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function US(e){return FS(LS(e)).left+HS(e).scrollLeft}function WS(e){if("html"===wS(e))return e;const t=e.assignedSlot||e.parentNode||kS(e)&&e.host||LS(e);return kS(t)?t.host:t}function $S(e){const t=WS(e);return AS(t)?t.ownerDocument.body:SS(t)&&RS(t)?t:$S(t)}function zS(e,t){var n;void 0===t&&(t=[]);const r=$S(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=gS(r);return i?t.concat(o,o.visualViewport||[],RS(r)?r:[]):t.concat(r,zS(r))}function qS(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=gS(e),r=LS(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=DS();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=LS(e),n=HS(e),r=e.ownerDocument.body,i=IS(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=IS(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+US(e);const a=-n.scrollTop;return"rtl"===yS(r).direction&&(s+=IS(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(LS(e));else if(ES(t))r=function(e,t){const n=FS(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=SS(e)?BS(e):{x:1,y:1};return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n={...t};if(DS()){var i,o;const t=gS(e);n.x-=(null==(i=t.visualViewport)?void 0:i.offsetLeft)||0,n.y-=(null==(o=t.visualViewport)?void 0:o.offsetTop)||0}r=n}return rS(r)}function jS(e,t){const n=WS(e);return!(n===t||!ES(n)||AS(n))&&("fixed"===yS(n).position||jS(n,t))}function GS(e,t){return SS(e)&&"fixed"!==yS(e).position?t?t(e):e.offsetParent:null}function VS(e,t){const n=gS(e);if(!SS(e))return n;let r=GS(e,t);for(;r&&xS(r)&&"static"===yS(r).position;)r=GS(r,t);return r&&("html"===wS(r)||"body"===wS(r)&&"static"===yS(r).position&&!TS(r))?n:r||function(e){let t=WS(e);for(;SS(t)&&!AS(t);){if(TS(t))return t;t=WS(t)}return null}(e)||n}function KS(e,t,n){const r=SS(t),i=LS(t),o=FS(e,!0,"fixed"===n,t);let s={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&"fixed"!==n)if(("body"!==wS(t)||RS(i))&&(s=HS(t)),SS(t)){const e=FS(t,!0);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else i&&(a.x=US(i));return{x:o.left+s.scrollLeft-a.x,y:o.top+s.scrollTop-a.y,width:o.width,height:o.height}}const YS={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o="clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=zS(e).filter((e=>ES(e)&&"body"!==wS(e))),i=null;const o="fixed"===yS(e).position;let s=o?WS(e):e;for(;ES(s)&&!AS(s);){const t=yS(s),n=TS(s);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||RS(s)&&!n&&jS(e,s))?r=r.filter((e=>e!==s)):i=t,s=WS(s)}return t.set(e,r),r}(t,this._c):[].concat(n),s=[...o,r],a=s[0],l=s.reduce(((e,n)=>{const r=qS(t,n,i);return e.top=IS(r.top,e.top),e.right=PS(r.right,e.right),e.bottom=PS(r.bottom,e.bottom),e.left=IS(r.left,e.left),e}),qS(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=SS(n),o=LS(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==wS(n)||RS(o))&&(s=HS(n)),SS(n))){const e=FS(n);a=BS(n),l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-s.scrollLeft*a.x+l.x,y:t.y*a.y-s.scrollTop*a.y+l.y}},isElement:ES,getDimensions:function(e){return NS(e)},getOffsetParent:VS,getDocumentElement:LS,getScale:BS,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||VS,o=this.getDimensions;return{reference:KS(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===yS(e).direction};var XS,QS,ZS,JS;!function(e){e.Top="top",e.TopRight="top-right",e.TopLeft="top-left",e.Left="left",e.LeftTop="left-top",e.LeftBottom="left-bottom",e.Bottom="bottom",e.BottomLeft="bottom-left",e.BottomRight="bottom-right",e.Right="right",e.RightTop="right-top",e.RightBottom="right-bottom"}(XS||(XS={})),function(e){e.Shake="shake"}(QS||(QS={})),function(e){e.None="none",e.Balloon="balloon"}(ZS||(ZS={}));class eE extends be.Component{focusTrapOptions;containerDivRef=be.createRef();contentDivRef=be.createRef();tipDivRef=be.createRef();floatingCleanUp=null;constructor(e){super(e),this.focusTrapOptions={allowOutsideClick:!0,escapeDeactivates:!0,onDeactivate:this.props.onClickOutside},this.state={position:null}}async setupPosition(){this.floatingCleanUp?.(),this.floatingCleanUp=null;const{anchor:e}=this.props;null!=e&&null!==this.containerDivRef.current&&(this.floatingCleanUp=function(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:a=!1}=r,l=i||o?[...ES(e)?zS(e):e.contextElement?zS(e.contextElement):[],...zS(t)]:[];l.forEach((e=>{const t=!ES(e)&&e.toString().includes("V");!i||a&&!t||e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));let c,u=null;s&&(u=new ResizeObserver((()=>{n()})),ES(e)&&!a&&u.observe(e),ES(e)||!e.contextElement||a||u.observe(e.contextElement),u.observe(t));let h=a?FS(e):null;return a&&function t(){const r=FS(e);!h||r.x===h.x&&r.y===h.y&&r.width===h.width&&r.height===h.height||n(),h=r,c=requestAnimationFrame(t)}(),n(),()=>{var e;l.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==(e=u)||e.disconnect(),u=null,a&&cancelAnimationFrame(c)}}(e,this.containerDivRef.current,this.updatePosition))}updatePosition=async()=>{const{anchor:e,decoration:t,maxHeight:n}=this.props,r=this.containerDivRef.current,i=this.contentDivRef.current;if(null==e||null===r||null===i)return;const o=this.tipDivRef.current,s=[dS(t===ZS.Balloon?8:0),mS({padding:10}),pS({padding:10}),fS({apply({availableHeight:e,availableWidth:t}){Object.assign(i.style,{maxHeight:void 0===n?`${e}px`:`${Math.min(e,n)}px`,maxWidth:`${t}px`})},padding:10})];t===ZS.Balloon&&o&&s.push((e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e||{},{x:i,y:o,placement:s,rects:a,platform:l,elements:c}=t;if(null==n)return{};const u=nS(r),h={x:i,y:o},p=eS(s),d=ZC(p),m=await l.getDimensions(n),f="y"===p,g=f?"top":"left",y=f?"bottom":"right",b=f?"clientHeight":"clientWidth",w=a.reference[d]+a.reference[p]-h[p]-a.floating[d],v=h[p]-a.reference[p],C=await(null==l.getOffsetParent?void 0:l.getOffsetParent(n));let S=C?C[b]:0;S&&await(null==l.isElement?void 0:l.isElement(C))||(S=c.floating[b]||a.floating[d]);const E=w/2-v/2,k=u[g],R=S-m[d]-u[y],x=S/2-m[d]/2+E,T=aS(k,x,R),D=null!=QC(s)&&x!=T&&a.reference[d]/2-(x<k?u[g]:u[y])-m[d]/2<0;return{[p]:h[p]-(D?x<k?k-x:R-x:0),data:{[p]:T,centerOffset:x-T}}}}))({element:o,padding:8}));const a=await((e,t,n)=>{const r=new Map,i={platform:YS,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=tS(c,r,l),p=r,d={},m=0;for(let n=0;n<a.length;n++){const{name:o,fn:f}=a[n],{x:g,y,data:b,reset:w}=await f({x:u,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:d,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=g?g:u,h=null!=y?y:h,d={...d,[o]:{...d[o],...b}},w&&m<=50&&(m++,"object"==typeof w&&(w.placement&&(p=w.placement),w.rects&&(c=!0===w.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):w.rects),({x:u,y:h}=tS(c,p,l))),n=-1)}return{x:u,y:h,placement:p,strategy:i,middlewareData:d}})(e,t,{...i,platform:o})})(e,r,{strategy:"fixed",placement:this.getFloatingPlacementForAnchorPosition(),middleware:s});this.setState({position:a})};componentDidMount(){document.addEventListener("click",this.onDocumentClick),document.addEventListener("mousedown",this.onDocumentMouseDown),this.setupPosition()}componentDidUpdate(e){e.anchor!==this.props.anchor&&this.setupPosition()}componentWillUnmount(){document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("mousedown",this.onDocumentMouseDown)}onDocumentClick=e=>{const t=this.containerDivRef.current,{target:n}=e;null!==t&&null!==t.parentElement&&n instanceof Node&&!t.parentElement.contains(n)&&void 0!==this.props.onClickOutside&&this.props.onClickOutside(e)};onDocumentMouseDown=e=>{const t=this.containerDivRef.current,{target:n}=e;null!==t&&null!==t.parentElement&&n instanceof Node&&!t.parentElement.contains(n)&&void 0!==this.props.onMousedownOutside&&this.props.onMousedownOutside(e)};getAriaAttributes(){return wr()?{"aria-describedby":this.props.ariaLabelledby}:{"aria-labelledby":this.props.ariaLabelledby}}render(){const{trapFocus:e,className:t,appearEffect:n,children:r,decoration:i,maxHeight:o,minHeight:s}=this.props,a=Vr()(i===ZS.Balloon&&"popover-component",t,n&&`appear-${n}`),{position:l}=this.state,c={position:"fixed",zIndex:17,height:"auto"},u={overflow:"hidden",width:"100%"};let h={};if(l){c.top=void 0===l.y?void 0:`${l.y}px`,c.left=void 0===l.x?void 0:`${l.x}px`,u.minHeight=void 0===s?void 0:`${s}px`,u.height=void 0===o?void 0:`${o}px`;const e=l.middlewareData.arrow;if(e){const t=l.placement.split("-")[0],n={top:"bottom",right:"left",bottom:"top",left:"right"}[t],r={top:"270deg",right:"0deg",bottom:"90deg",left:"180deg"}[t];h={top:e.y,left:e.x,transform:`rotate(${r})`,[n]:this.tipDivRef.current?-this.tipDivRef.current.offsetWidth+"px":void 0}}}const p=be.createElement("div",{className:a,style:c,ref:this.containerDivRef,...this.getAriaAttributes(),role:"dialog"},be.createElement("div",{className:"popover-content",style:u,ref:this.contentDivRef},r),i===ZS.Balloon&&be.createElement("div",{className:"popover-tip",style:{position:"absolute",width:16,height:16,...h},ref:this.tipDivRef},be.createElement("div",{className:"popover-tip-border",style:{position:"absolute",right:1,width:0,height:0,borderWidth:"8px",borderRightWidth:"7px"}}),be.createElement("div",{className:"popover-tip-background",style:{position:"absolute",right:0,width:0,height:0,borderWidth:"8px",borderRightWidth:"7px"}})));return!1!==e?be.createElement(XC(),{focusTrapOptions:this.focusTrapOptions},p):p}getFloatingPlacementForAnchorPosition(){const{anchorPosition:e}=this.props;switch(e){case XS.Top:return"top";case XS.TopLeft:return"top-start";case XS.TopRight:return"top-end";case XS.Left:return"left";case XS.LeftTop:return"left-start";case XS.LeftBottom:return"left-end";case XS.Right:return"right";case XS.RightTop:return"right-start";case XS.RightBottom:return"right-end";case XS.Bottom:return"bottom";case XS.BottomLeft:return"bottom-start";case XS.BottomRight:return"bottom-end";default:et(0,"Unknown anchor position")}}}class tE extends be.Component{element=null;invisibleCaretRef=be.createRef();autocompletionRequestID=0;constructor(e){super(e),this.state={autocompletionState:null,caretCoordinates:null}}componentWillMount(){const e=Yr("autocompleting-text-input"),t=Yr("autocomplete-container");this.setState({uniqueInternalElementId:e,autocompleteContainerId:t})}componentWillUnmount(){this.state.uniqueInternalElementId&&Xr(this.state.uniqueInternalElementId),this.state.autocompleteContainerId&&Xr(this.state.autocompleteContainerId)}componentDidUpdate(e){this.props.autocompleteItemFilter!==e.autocompleteItemFilter&&null!==this.state.autocompletionState&&this.open(this.element?.value??"")}get elementId(){return this.props.elementId??this.state.uniqueInternalElementId}renderItem=e=>{const t=this.state.autocompletionState;if(!t)return null;const n=t.items[e],r=n===t.selectedItem?"selected":"";return be.createElement("div",{className:`autocompletion-item ${r}`},t.provider.renderItem(n))};renderAutocompletions(){const e=this.state.autocompletionState;if(!e)return null;const t=e.items;if(!t.length)return null;const n=e.selectedItem?t.indexOf(e.selectedItem):-1,r=29*t.length,i=29*Math.min(t.length,3),o=e.rangeText,s=Vr()("autocompletion-popup",e.provider.kind);return be.createElement(eE,{anchor:this.invisibleCaretRef.current,anchorPosition:XS.BottomLeft,decoration:ZS.None,maxHeight:Math.min(100,r),minHeight:i,trapFocus:!1,className:s},be.createElement(sC,{accessibleListId:this.state.autocompleteContainerId,ref:this.onAutocompletionListRef,rowCount:t.length,rowHeight:29,rowId:this.getRowId,selectedRows:[n],rowRenderer:this.renderItem,scrollToRow:n,onRowMouseDown:this.onRowMouseDown,onRowClick:this.insertCompletionOnClick,onSelectedRowChanged:this.onSelectedRowChanged,invalidationProps:o}))}getRowId=e=>{const t=this.state.autocompletionState;return t?`autocomplete-item-row-${t.itemListRowIdPrefix}-${e}`:""};onAutocompletionListRef=e=>{const{autocompletionState:t}=this.state;if(e&&t&&t.selectedItem){const{items:e,selectedItem:n}=t;this.setState({autocompletionState:{...t,selectedRowId:this.getRowId(e.indexOf(n))}})}};onRowMouseDown=(e,t)=>{const n=this.state.autocompletionState;if(!n)return;const r=n.items[e];r&&this.insertCompletion(r,"mouseclick")};onSelectedRowChanged=(e,t)=>{const n=this.state.autocompletionState;if(!n)return;const r=n.items[e],i={...n,selectedItem:r,selectedRowId:null===r?void 0:this.getRowId(e)};this.setState({autocompletionState:i})};insertCompletionOnClick=e=>{const t=this.state.autocompletionState;if(!t)return;const n=t.items;if(!n.length)return;const r=n[e];this.insertCompletion(r,"mouseclick")};onContextMenu=e=>{this.props.onContextMenu?this.props.onContextMenu(e):(e.preventDefault(),lC([{role:"editMenu"}]))};getActiveAutocompleteItemId(){const{autocompletionState:e}=this.state;if(null===e)return;if(e.selectedRowId)return e.selectedRowId;if(null===e.selectedItem)return;const t=e.items.indexOf(e.selectedItem);return this.getRowId(t)}renderTextInput(){const{autocompletionState:e}=this.state,t=null!==e&&e.items.length>0,n={type:"text",id:this.elementId,role:"combobox",placeholder:this.props.placeholder,value:this.props.value,ref:this.onRef,onChange:this.onChange,onScroll:this.onScroll,onKeyDown:this.onKeyDown,onFocus:this.onFocus,onBlur:this.onBlur,onContextMenu:this.onContextMenu,readOnly:this.props.readOnly,required:!!this.props.required,spellCheck:this.props.spellcheck,autoComplete:"off","aria-expanded":t,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":this.state.autocompleteContainerId,"aria-owns":this.state.autocompleteContainerId,"aria-activedescendant":this.getActiveAutocompleteItemId()};return be.createElement(this.getElementTagName(),n)}updateCaretCoordinates=()=>{const e=this.element;if(!e)return void this.setState({caretCoordinates:null});const t=e.selectionEnd;if(null===t)return void this.setState({caretCoordinates:null});const n=KC()(e,t);this.setState({caretCoordinates:{top:n.top-e.scrollTop,left:n.left-e.scrollLeft,height:n.height}})};renderInvisibleCaret=()=>{const{caretCoordinates:e}=this.state;return e?be.createElement("div",{style:{backgroundColor:"transparent",width:2,height:20,position:"absolute",left:e.left,top:e.top},ref:this.invisibleCaretRef}," "):null};onBlur=e=>{this.close()};onFocus=e=>{this.props.alwaysAutocomplete&&null!==this.element&&(this.open(this.element.value),this.props.onFocus?.(e))};onRef=e=>{this.element=e,this.updateCaretCoordinates(),this.props.onElementRef&&this.props.onElementRef(e)};focus(){this.element&&this.element.focus()}render(){const e=this.getElementTagName(),t=Vr()("autocompletion-container","no-invalid-state",this.props.className,{"text-box-component":"input"===e,"text-area-component":"textarea"===e}),n=this.state.autocompletionState?.items??[],r=1===n.length?"1 suggestion":`${n.length} suggestions`;return be.createElement("div",{className:t},this.renderAutocompletions(),this.props.screenReaderLabel&&be.createElement("label",{className:"sr-only",htmlFor:this.elementId},this.props.screenReaderLabel),this.renderTextInput(),this.renderInvisibleCaret(),be.createElement(pC,{message:n.length>0?r:null,trackedUserInput:this.state.autocompletionState?.rangeText}))}setCursorPosition(e){null!=this.element?(this.element.selectionStart=e,this.element.selectionEnd=e):log.warn("Unable to set cursor position when element is null")}insertCompletion(e,t){const n=this.element,r=this.state.autocompletionState,i=n.value,o=r.range,s=r.provider.getCompletionText(e),a=i.substr(0,o.start-1)+s+" ",l=a+i.substring(o.start+o.length);n.value=l,this.props.onValueChanged&&this.props.onValueChanged(l);const c=a.length;"mouseclick"===t?window.setTimeout((()=>{n.focus(),this.setCursorPosition(c)}),0):this.setCursorPosition(c),this.props.onAutocompleteItemSelected?.(e),this.close(),this.props.alwaysAutocomplete&&this.open("")}getMovementDirection(e){switch(e.key){case"ArrowUp":return"up";case"ArrowDown":return"down"}return null}onKeyDown=e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),e.defaultPrevented)return;const t=this.state.autocompletionState;if(!t||!t.items.length)return;const n=t.selectedItem?t.items.indexOf(t.selectedItem):-1,r=this.getMovementDirection(e);if(r){e.preventDefault();const i=Ys(t.items.length,{direction:r,row:n});if(null!==i){const e=t.items[i],n={...t,selectedItem:e,selectedRowId:null===e?void 0:this.getRowId(i)};this.setState({autocompletionState:n})}}else if("Enter"===e.key||"Tab"===e.key&&!e.shiftKey){const n=t.selectedItem;n&&(e.preventDefault(),this.insertCompletion(n,"keyboard"))}else"Escape"===e.key&&this.close()};close(){this.setState({autocompletionState:null})}async attemptAutocompletion(e,t){const n=e.toLowerCase();for(const e of this.props.autocompletionProviders){const r=new RegExp(e.getRegExp());r.global||Je(`The regex (${r}) returned from ${e} isn't global, but it should be!`);let i=null;for(;i=r.exec(n);){const n=r.lastIndex,o=i[1]||"";if(n===t||this.props.alwaysAutocomplete){const t={start:n-o.length,length:o.length};let r=await e.getAutocompletionItems(o);return this.props.autocompleteItemFilter&&(r=r.filter(this.props.autocompleteItemFilter)),{provider:e,items:r,range:t,selectedItem:null,selectedRowId:void 0,rangeText:o,itemListRowIdPrefix:this.buildAutocompleteListRowIdPrefix()}}}}return null}buildAutocompleteListRowIdPrefix(){return(new Date).getTime().toString()}onScroll=()=>{this.updateCaretCoordinates()};onChange=async e=>{const t=e.currentTarget.value;return this.props.onValueChanged&&this.props.onValueChanged(t),this.updateCaretCoordinates(),this.open(t)};async open(e){const t=this.element;if(null===t)return;const n=t.selectionStart;if(null===n)return;const r=++this.autocompletionRequestID,i=await this.attemptAutocompletion(e,n);r===this.autocompletionRequestID&&this.setState({autocompletionState:i})}}class nE extends tE{getElementTagName(){return"textarea"}}class rE extends tE{getElementTagName(){return"input"}}class iE{kind="emoji";emoji;constructor(e){this.emoji=e}getRegExp(){return/(?:^|\n| )(?::)([a-z\d\\+-][a-z\d_]*)?/g}async getAutocompletionItems(e,t=25){if(0===e.length)return[...this.emoji.keys()].map((e=>({emoji:e,matchStart:0,matchLength:0}))).slice(0,t);const n=new Array,r=e.toLowerCase();for(const e of this.emoji.keys()){const t=e.indexOf(r);-1!==t&&n.push({emoji:e,matchStart:t,matchLength:r.length})}return n.sort(((e,t)=>rr(e.matchStart,t.matchStart)||rr(e.emoji.length,t.emoji.length)||rr(e.emoji,t.emoji))).slice(0,t)}renderItem(e){const t=e.emoji;return be.createElement("div",{className:"emoji",key:t},be.createElement("img",{className:"icon",src:this.emoji.get(t),alt:t}),this.renderHighlightedTitle(e))}renderHighlightedTitle(e){const t=e.emoji.replaceAll(":","");if(!e.matchLength)return be.createElement("div",{className:"title"},t);const n=e.matchStart-1;return be.createElement("div",{className:"title"},t.substring(0,n),be.createElement("mark",null,t.substring(n,n+e.matchLength)),t.substring(n+e.matchLength))}getCompletionText(e){return e.emoji}}class oE{delay;timeoutId=null;constructor(e){this.delay=e}queue(e){this.clear(),this.timeoutId=window.setTimeout(e,this.delay)}clear(){null!=this.timeoutId&&window.clearTimeout(this.timeoutId)}}class sE{kind="issue";issuesStore;repository;dispatcher;updateIssuesScheduler=new oE(6e4);constructor(e,t,n){this.issuesStore=e,this.repository=t,this.dispatcher=n}getRegExp(){return/(?:^|\n| )(?:#)([a-z\d\\+-][a-z\d_]*)?/g}getAutocompletionItems(e){return this.updateIssuesScheduler.queue((()=>{this.dispatcher.refreshIssues(this.repository)})),this.issuesStore.getIssuesMatching(this.repository,e)}renderItem(e){return be.createElement("div",{className:"issue",key:e.number},be.createElement("span",{className:"number"},"#",e.number)," ",be.createElement("span",{className:"title"},e.title))}getCompletionText(e){return`#${e.number}`}}function aE(e,t){return{kind:"known-user",username:t.login,name:t.name,email:t.email,endpoint:e.endpoint}}class lE{kind="user";gitHubUserStore;repository;account;constructor(e,t,n){this.gitHubUserStore=e,this.repository=t,this.account=n||null}getRegExp(){return/(?:^|\n| )(?:@)([a-z\d\\+-][a-z\d_-]*)?/g}async getUserAutocompletionItems(e,t){const n=await this.gitHubUserStore.getMentionableUsersMatching(this.repository,e),r=this.account,i=r?n.filter((e=>e.login!==r.login)):n,o=i.map((e=>aE(this.repository,e)));return t&&e.length>0&&(o.some((t=>t.username.toLowerCase()===e.toLowerCase()))||o.push({kind:"unknown-user",username:e})),o}async getAutocompletionItems(e){return this.getUserAutocompletionItems(e,!1)}renderItem(e){return"known-user"===e.kind?be.createElement("div",{className:"user",key:e.username},be.createElement("span",{className:"username"},e.username),be.createElement("span",{className:"name"},e.name)):be.createElement("div",{className:"user unknown",key:e.username},be.createElement("span",{className:"username"},e.username),be.createElement("span",{className:"description"},"Search for user"))}getCompletionText(e){return`@${e.username}`}async exactMatch(e){if(null===this.account)return null;const t=await this.gitHubUserStore.getByLogin(this.account,e);return t?aE(this.repository,t):null}}class cE extends lE{getRegExp(){return/(?:^|\n| )(?:@)?([a-z\d\\+-][a-z\d_-]*)?/g}async getAutocompletionItems(e){return super.getUserAutocompletionItems(e,!0)}}function uE(e,t,n,r,i,o){const s=[new iE(n)],a=_r(e)?Br(e):null;if(null!==a){s.push(new sE(r,a,t));const e=o.find((e=>e.endpoint===a.endpoint));s.push(new lE(i,a,e),new cE(i,a,e))}return s}class hE extends be.Component{render(){return be.createElement(si,{className:"spin",symbol:Ko})}}function pE(e){return Bc(e)?null===e.username?e.name:`@${e.username} (${e.name})`:`@${e.username}`}class dE extends we().Component{getAriaLabel(){const{author:e}=this.props;if(Bc(e))return`${pE(e)} press backspace or delete to remove`;const t="error"===e.state?"user not found":"searching";return`${e.username}, ${t}, press backspace or delete to remove`}getClassName(){const{author:e,isFocused:t}=this.props,n=["handle",{focused:t}];if(!Bc(e)){const t="error"===e.state;n.push({progress:!t,error:t})}return Vr()(n)}getTitle(){const{author:e}=this.props;if(!Bc(e))return"error"===e.state?`Could not find user with username ${e.username}`:`Searching for @${e.username}`}getTabIndex(){const{isFocusWithinContainer:e,isFocused:t,isLastAuthor:n,isFirstAuthor:r,isInputFocused:i}=this.props;return e?t||n&&i?0:-1:r?0:-1}render(){const{author:e,isFocused:t}=this.props;return we().createElement("div",{className:this.getClassName(),title:this.getTitle(),role:"option","aria-label":this.getAriaLabel(),"aria-selected":t,onKeyDown:this.onKeyDown,onClick:this.onHandleClick,tabIndex:this.getTabIndex(),onFocus:this.onFocus},we().createElement("span",{"aria-hidden":"true"},function(e){return Bc(e)&&null===e.username?e.name:`@${e.username}`}(e)),!Bc(e)&&we().createElement(si,{className:Vr()("icon",{spin:"error"!==e.state}),symbol:"error"===e.state?ao:Ko}),we().createElement("button",{onClick:this.onRemoveClick,tabIndex:-1},we().createElement(si,{className:"delete",symbol:go})))}onKeyDown=e=>{this.props.onKeyDown(this.props.index,e)};onRemoveClick=e=>{e.preventDefault(),this.props.onRemoveClick(this.props.index,e)};onHandleClick=e=>{e.isDefaultPrevented()||this.props.onHandleClick(this.props.index,e)};onFocus=e=>{this.props.onFocus(this.props.index,e)}}function mE(e){return e.email&&e.email.length>0?e.email:wh(e.username,e.endpoint)}function fE(e){return{kind:"known",name:e.name||e.username,email:mE(e),username:e.username}}class gE extends be.Component{autocompletingInputRef=be.createRef();shadowInputRef=be.createRef();inputRef=null;authorContainerRef=be.createRef();getAutocompleteItemFilter=mr((e=>t=>{if("known-user"!==t.kind)return!0;const n=e.map((e=>e.username));return!n.some((e=>e===t.username))}));constructor(e){super(e),this.state={isFocusedWithin:!1,focusedAuthorIndex:null,lastActionDescription:null}}componentDidUpdate(e,t){!this.state.isFocusedWithin||e.authors.length===this.props.authors.length&&t.focusedAuthorIndex===this.state.focusedAuthorIndex||this.focusAuthorHandle(this.state.focusedAuthorIndex)}focus(){this.autocompletingInputRef.current?.focus()}focusAuthorHandle(e){if(null===e)return void this.inputRef?.focus();const t=this.authorContainerRef.current?.getElementsByClassName("handle")[e];t?.focus()}render(){const e=Vr()("author-input-component",this.props.className,{disabled:this.props.readOnly});return be.createElement(Vs,{className:e,onFocusWithinChanged:this.onFocusWithinChanged},be.createElement("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true"},this.state.lastActionDescription),be.createElement("div",{className:"shadow-input",ref:this.shadowInputRef}),be.createElement("label",{id:"author-input-label",className:"label",htmlFor:"author-input"},"Co-Authors "),this.renderAuthors(),be.createElement(rE,{elementId:"author-input",placeholder:"@username",alwaysAutocomplete:!0,autocompletionProviders:[this.props.autoCompleteProvider],autocompleteItemFilter:this.getAutocompleteItemFilter(this.props.authors),ref:this.autocompletingInputRef,onElementRef:this.onInputRef,onAutocompleteItemSelected:this.onAutocompleteItemSelected,onValueChanged:this.onCoAuthorsValueChanged,onKeyDown:this.onInputKeyDown,onFocus:this.onInputFocus,readOnly:this.props.readOnly}))}renderAuthors(){return be.createElement("div",{className:"added-author-container",ref:this.authorContainerRef,"aria-labelledby":"author-input-label",role:"listbox"},this.props.authors.map(((e,t)=>this.renderAuthor(e,t))))}renderAuthor(e,t){const{focusedAuthorIndex:n,isFocusedWithin:r}=this.state;return be.createElement(dE,{key:Bc(e)?pE(e):e.username,index:t,author:e,isFocusWithinContainer:r,isFocused:n===t,isLastAuthor:t===this.props.authors.length-1,isFirstAuthor:0===t,isInputFocused:null===n,onKeyDown:this.onAuthorKeyDown,onHandleClick:this.onAuthorClick,onRemoveClick:this.onRemoveAuthorClick,onFocus:this.onAuthorFocus})}onFocusWithinChanged=e=>{const t=e?this.state.focusedAuthorIndex:null;this.setState({focusedAuthorIndex:t,isFocusedWithin:e})};onAuthorKeyDown=(e,t)=>{"ArrowLeft"===t.key?this.focusPreviousAuthor():"ArrowRight"===t.key?this.focusNextAuthor():null===this.state.focusedAuthorIndex||"Backspace"!==t.key&&"Delete"!==t.key||this.removeAuthor(this.state.focusedAuthorIndex,"Backspace"===t.key?"back":"forward")};removeAuthor(e,t){const{authors:n}=this.props;if(e>=n.length)return;const r=n[e],i=n.slice(0,e).concat(n.slice(e+1));let o=null;i.length>0&&(o="back"===t?Math.max(0,e-1):e===n.length-1?null:Math.min(i.length-1,e));let s=`Removed ${r.username}`;Bc(r)&&(s+=` (${r.name})`),this.setState({focusedAuthorIndex:o,lastActionDescription:s}),this.emitAuthorsUpdated(i)}emitAuthorsUpdated(e){this.props.onAuthorsUpdated(e)}focusPreviousAuthor(){const{focusedAuthorIndex:e}=this.state,{authors:t}=this.props;null===e?this.setState({focusedAuthorIndex:t.length-1}):e>0&&this.setState({focusedAuthorIndex:e-1})}focusNextAuthor(){const{focusedAuthorIndex:e}=this.state,{authors:t}=this.props;null!==e&&e<t.length-1?this.setState({focusedAuthorIndex:e+1}):this.setState({focusedAuthorIndex:null})}onInputFocus=()=>{this.setState({focusedAuthorIndex:null})};onCoAuthorsValueChanged=e=>{if(null===this.shadowInputRef.current||null===this.inputRef||null===this.inputRef.parentElement||null===this.inputRef.parentElement.parentElement)return;this.shadowInputRef.current.textContent=e;const t=this.shadowInputRef.current.clientWidth;this.shadowInputRef.current.textContent=this.inputRef.placeholder;const n=this.shadowInputRef.current.clientWidth,r=this.inputRef.parentElement,i=this.inputRef.parentElement.parentElement;r.style.minWidth=`${Math.min(i.getBoundingClientRect().width-10,Math.max(t,n))}px`};onInputRef=e=>{null!==e&&(this.inputRef=e)};onAutocompleteItemSelected=e=>{const t="known-user"===e.kind?fE(e):{kind:"unknown",username:e.username,state:"searching"},n=[...this.props.authors,t];this.emitAuthorsUpdated(n);let r=`Added ${t.username}`;Bc(t)?r+=` (${t.name})`:this.attemptUnknownAuthorSearch(t),this.setState({lastActionDescription:r}),null!==this.inputRef&&(this.inputRef.value="",this.onCoAuthorsValueChanged(""))};async attemptUnknownAuthorSearch(e){const t=this.props.authors.filter(Bc).find((t=>t.username?.toLowerCase()===e.username.toLowerCase()));if(void 0!==t)return void this.updateUnknownAuthor(t);const n=await this.props.autoCompleteProvider.exactMatch(e.username);if(null===n||"known-user"!==n.kind){const t={...e,state:"error"};return this.updateUnknownAuthor(t),void this.setState({lastActionDescription:`Error: user ${e.username} not found`})}const r=fE(n);this.updateUnknownAuthor(r)}updateUnknownAuthor(e){const t=this.props.authors.map((t=>t.username?.toLowerCase()!==e.username?.toLowerCase()||Bc(t)?t:e));this.emitAuthorsUpdated(t)}onInputKeyDown=e=>{if(null!==this.inputRef&&("ArrowLeft"!==e.key&&"Backspace"!==e.key||0!==this.inputRef.selectionStart||this.focusPreviousAuthor()," "===e.key&&this.inputRef.selectionStart===this.inputRef.value.length)){e.preventDefault();const t=this.inputRef.value.trim();0!==t.length&&this.onAutocompleteItemSelected({kind:"unknown-user",username:t})}};onAuthorClick=e=>{this.setState({focusedAuthorIndex:e})};onRemoveAuthorClick=e=>{this.removeAuthor(e,"forward")};onAuthorFocus=e=>{this.setState({focusedAuthorIndex:e})}}function yE(e,t){return()=>{const n=((performance.now()-e)/1e3).toFixed(3),r=`[Timing] ${t} took ${n}s`;log.info(r)}}function bE(e,t){const n=performance&&performance.now?performance.now():null;return null===n?(log.warn("[Timing] invoked but performance.now not found - are you using this outside the renderer?"),{done:()=>{}}):{done:yE(n,`Action '${e}' for '${Or(t)}'`)}}!function(e){e[e.Warning=0]="Warning",e[e.Information=1]="Information",e[e.Error=2]="Error"}(JS||(JS={}));const wE=e=>be.createElement("div",{className:"commit-warning-component",onContextMenu:vE},be.createElement("div",{className:"warning-icon-container"},(e=>{let t="",n=ai;switch(e){case JS.Warning:t="warning-icon",n=ai;break;case JS.Information:t="information-icon",n=$i;break;case JS.Error:t="error-icon",n=ao;break;default:et(0,`Unexpected icon value ${e}`)}return be.createElement(si,{className:t,symbol:n})})(e.icon)),be.createElement("div",{className:"warning-message"},e.children)),vE=e=>{e.preventDefault()};class CE extends be.Component{anchorRef=ri();render(){const e=this.props.uri||"",t=Vr()("link-button-component",this.props.className),{title:n}=this.props;return be.createElement("a",{ref:this.anchorRef,className:t,href:e,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onClick:this.onClick,tabIndex:this.props.tabIndex,"aria-label":this.props.ariaLabel},n&&be.createElement(Jr,{target:this.anchorRef},n),this.props.children)}onClick=e=>{if(e.preventDefault(),this.props.disabled)return;const t=this.props.uri;t&&rt.openExternal(t);const n=this.props.onClick;n&&n()}}function SE(e,t){if(!t)return!1;const n=t.owner.endpoint,{name:r,email:i}=e.committer;return n===Qn()&&"GitHub"===r&&"noreply@github.com"===i||n!==Qn()&&"GitHub Enterprise"===r}function EE(e,t){return{email:e.email,name:e.name,endpoint:null===t?null:t.endpoint,avatarURL:void 0}}function kE(e,t){const n=[];n.push(EE(t.author,e)),n.push(...t.coAuthors.map((t=>EE(t,e))));const r=t.coAuthors.some((e=>e.name===t.committer.name&&e.email===t.committer.email)),i=null!==e&&SE(t,e);return t.authoredByCommitter||i||r||n.push(EE(t.committer,e)),n}class RE extends be.Component{componentWillMount(){const e=Yr(`Select_${this.props.label||"unknown"}`);this.setState({inputId:e})}componentWillUnmount(){this.state.inputId&&Xr(this.state.inputId)}renderLabel(){const e=this.props.label,t=this.state.inputId;return e?be.createElement("label",{htmlFor:t},e):null}render(){return be.createElement("div",{className:"select-component"},this.renderLabel(),be.createElement("select",{id:this.state.inputId,onChange:this.props.onChange,value:this.props.value,defaultValue:this.props.defaultValue,disabled:this.props.disabled},this.props.children))}}const xE=new Map,TE=3e5,DE={w:16,h:16,d:"M13 13.145a.844.844 0 0 1-.832.855H3.834A.846.846 0 0 1 3 13.142v-.856c0-2.257 3.333-3.429 3.333-3.429s.191-.35 0-.857c-.7-.531-.786-1.363-.833-3.429C5.644 2.503 7.056 2 8 2s2.356.502 2.5 2.571C10.453 6.637 10.367 7.47 9.667 8c-.191.506 0 .857 0 .857S13 10.03 13 12.286v.859z"},AE=/^(?:(\d+)\+)?(.+?)@users\.noreply\.(.*)$/i;function PE(e,t=64){const n=new Array;if(void 0===e)return n;const{email:r,endpoint:i,avatarURL:o}=e,s=i===Qn();if(s&&void 0!==o)try{const e=new URL(o);e.searchParams.set("s",`${t}`),n.push(e.toString())}catch(e){n.push(o)}else if(null!==i&&!s&&!xn(i))return n.push(function(e,t=60){const n=e.trim().toLowerCase();return`https://www.gravatar.com/avatar/${cn.createHash("md5").update(n).digest("hex")}?s=${t}`}(r,t)),n;const a=AE.exec(r),l=null===i||s?"https://avatars.githubusercontent.com":`${i}/enterprise/avatars`;if(a){const[,e,r,o]=a;if("github.com"===o||null!==i&&o===new URL(i).hostname)if(void 0!==e){const r=encodeURIComponent(e);n.push(`${l}/u/${r}?s=${t}`)}else{const e=encodeURIComponent(r);n.push(`${l}/${e}?s=${t}`)}}const c=encodeURIComponent(r);return n.push(`${l}/u/e?email=${c}&s=${t}`),n}class IE extends be.Component{static getDerivedStateFromProps(e,t){const{user:n,size:r}=e;return qs(n,t.user)?null:{user:n,candidates:PE(n,r),imageLoaded:!1}}constructor(e){super(e);const{user:t,size:n}=e;this.state={user:t,candidates:PE(t,n),imageLoaded:!1}}getTitle(){if(null===this.props.title)return;if(void 0!==this.props.title)return this.props.title;const e=this.props.user;return e?e.name?be.createElement(be.Fragment,null,be.createElement(IE,{title:null,user:e}),be.createElement("div",null,be.createElement("div",null,be.createElement("strong",null,e.name)),be.createElement("div",null,e.email))):e.email:"Unknown user"}onImageError=e=>{const{candidates:t}=this.state;t.length>0&&this.setState({candidates:t.filter((t=>t!==e.currentTarget.src)),imageLoaded:!1})};onImageLoad=e=>{this.setState({imageLoaded:!0})};render(){const e=this.getTitle(),{user:t}=this.props,{imageLoaded:n}=this.state,r=t?`Avatar for ${t.name||t.email}`:"Avatar for unknown user",i=Date.now(),o=this.state.candidates.find((e=>{const t=xE.get(e);return void 0===t||i-t>TE}));return be.createElement(Xo,{className:"avatar-container",tooltipClassName:this.props.title?void 0:"user-info",tooltip:e,direction:Zr.NORTH,tagName:"div"},!n&&be.createElement(si,{symbol:DE,className:"avatar"}),o&&be.createElement("img",{className:"avatar",key:o,ref:this.onImageRef,src:o,alt:r,onLoad:this.onImageLoad,onError:this.onImageError,style:{display:n?void 0:"none"}}))}onImageRef=e=>{e?.addEventListener("error",(()=>{xE.delete(e.src),xE.set(e.src,Date.now())}))};componentDidMount(){window.addEventListener("online",this.onInternetConnected),function(){const e=new Array;for(const[t,n]of xE.entries()){if(!(Date.now()-n>TE))break;e.push(t)}e.forEach((e=>xE.delete(e)))}()}componentWillUnmount(){window.removeEventListener("online",this.onInternetConnected)}onInternetConnected=()=>{if(xE.clear(),0===this.state.candidates.length){const{user:e,size:t}=this.props,n=PE(e,t);n.length>0&&this.setState({candidates:n})}}}class _E extends be.Component{render(){const e=Vr()("dialog-content",this.props.className);return be.createElement("div",{className:e,ref:this.props.onRef},this.props.children)}}class NE extends be.Component{onCloseButtonClick=e=>{e.preventDefault(),this.props.onDismissed&&this.props.onDismissed()};renderCloseButton(){return this.props.dismissable?be.createElement("button",{className:"close",onClick:this.onCloseButtonClick,"aria-label":"Close"},be.createElement(si,{symbol:go})):null}render(){const e=this.props.loading?be.createElement(si,{className:"icon spin",symbol:Ko}):null;return be.createElement("div",{className:"dialog-header"},be.createElement("h2",{id:this.props.titleId},this.props.title),e,this.renderCloseButton(),this.props.children)}}function OE(e,t){return mr((n=>{n?e():t()}))}const ME=be.createContext({isTopMost:!1}),BE=bo();class FE extends be.Component{static contextType=ME;checkIsTopMostDialog=OE((()=>{this.onDialogIsTopMost()}),(()=>{this.onDialogIsNotTopMost()}));dialogElement=null;dismissGraceTimeoutId;disableClickDismissalTimeoutId=null;disableClickDismissal=!1;resizeObserver;resizeDebounceId=null;constructor(e){super(e),this.state={isAppearing:!0},this.resizeObserver=new ResizeObserver(this.scheduleResizeEvent)}scheduleResizeEvent=()=>{null!==this.resizeDebounceId&&(cancelAnimationFrame(this.resizeDebounceId),this.resizeDebounceId=null),this.resizeDebounceId=requestAnimationFrame(this.onResized)};onResized=()=>{if(!this.dialogElement)return;const{offsetTop:e,offsetHeight:t}=this.dialogElement;if(t>window.innerHeight-BE)return;const n=e+t+10-window.innerHeight;if(n>0){const t=Math.max(BE,e-n);this.dialogElement.style.top=`${t}px`}};clearDismissGraceTimeout(){void 0!==this.dismissGraceTimeoutId&&(window.clearTimeout(this.dismissGraceTimeoutId),this.dismissGraceTimeoutId=void 0)}scheduleDismissGraceTimeout(){this.clearDismissGraceTimeout(),this.dismissGraceTimeoutId=window.setTimeout(this.onDismissGraceTimer,250)}onDismissGraceTimer=()=>{this.setState({isAppearing:!1}),this.dialogElement?.dispatchEvent(new CustomEvent("dialog-appeared",{bubbles:!0,cancelable:!1}))};isDismissable(){return void 0===this.props.dismissable||this.props.dismissable}updateTitleId(){if(this.state.titleId&&(Xr(this.state.titleId),this.setState({titleId:void 0})),this.props.title){const e="string"==typeof this.props.title?this.props.title:"???";this.setState({titleId:Yr(`Dialog_${this.props.id}_${e}`)})}}componentWillMount(){this.updateTitleId()}componentDidMount(){this.checkIsTopMostDialog(this.context.isTopMost)}onDialogIsTopMost(){null!=this.dialogElement&&(this.dialogElement.open||this.dialogElement.showModal(),this.dialogElement.dispatchEvent(new CustomEvent("dialog-show",{bubbles:!0,cancelable:!1})),this.setState({isAppearing:!0}),this.scheduleDismissGraceTimeout(),this.focusFirstSuitableChild(),window.addEventListener("focus",this.onWindowFocus),this.resizeObserver.observe(this.dialogElement),window.addEventListener("resize",this.scheduleResizeEvent))}onDialogIsNotTopMost(){null!==this.dialogElement&&this.dialogElement.open&&this.dialogElement?.close(),this.clearDismissGraceTimeout(),window.removeEventListener("focus",this.onWindowFocus),document.removeEventListener("mouseup",this.onDocumentMouseUp),this.resizeObserver.disconnect(),window.removeEventListener("resize",this.scheduleResizeEvent)}focusFirstSuitableChild(){const e=this.dialogElement;if(null===e)return;const t=['input:not([type=hidden]):not(:disabled):not([tabindex="-1"])','textarea:not(:disabled):not([tabindex="-1"])','button:not(:disabled):not([tabindex="-1"])','[tabindex]:not(:disabled):not([tabindex="-1"])'].join(", ");let n=[1/0,null],r=null,i=null,o=null;const s=e.querySelector(":scope > div.dialog-header button.close");if(s instanceof HTMLElement&&this.props.focusCloseButtonOnOpen)return void s.focus();const a=`input${[":not([type=button])",":not([type=submit])",":not([type=reset])",":not([type=hidden])",":not([type=radio])"].join("")}, textarea`;for(const l of e.querySelectorAll(t)){if(!(l instanceof HTMLElement))continue;const e=parseInt(l.getAttribute("tabindex")||"",10);e>0&&e<n[0]?n=[e,l]:null!==o||0!==e&&!l.matches(a)?null===r&&l.matches("input[type=submit], button[type=submit]")?r=l:null===i&&l.matches("input[type=button], input[type=submit] input[type=reset], button")&&l!==s&&(i=l):o=l}const l=[n[1],o,r,i,s];for(const e of l)if(e instanceof HTMLElement){e.focus();break}}onWindowFocus=()=>{this.clearClickDismissalTimer(),this.disableClickDismissal=!0,this.disableClickDismissalTimeoutId=window.setTimeout((()=>{this.disableClickDismissal=!1,this.disableClickDismissalTimeoutId=null}),500)};clearClickDismissalTimer(){this.disableClickDismissalTimeoutId&&(window.clearTimeout(this.disableClickDismissalTimeoutId),this.disableClickDismissalTimeoutId=null)}componentWillUnmount(){this.state.titleId&&Xr(this.state.titleId),this.checkIsTopMostDialog(!1)}componentDidUpdate(e){!this.props.title&&this.state.titleId&&this.updateTitleId(),this.checkIsTopMostDialog(this.context.isTopMost)}onDialogCancel=e=>{e.preventDefault(),this.onDismiss()};onDialogMouseDown=e=>{if(!e.defaultPrevented&&!1!==this.isDismissable()&&e.target===this.dialogElement)return this.disableClickDismissal?(this.disableClickDismissal=!1,void this.clearClickDismissalTimer()):void(this.mouseEventIsInsideDialog(e)||document.addEventListener("mouseup",this.onDocumentMouseUp,{once:!0}))};mouseEventIsInsideDialog(e){if(null===this.dialogElement)return!1;if(e.clientY<=BE)return!1;const t=this.dialogElement.getBoundingClientRect();return t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width}onDocumentMouseUp=e=>{e.defaultPrevented||this.mouseEventIsInsideDialog(e)||(e.preventDefault(),this.onDismiss())};onDialogRef=e=>{e?e.addEventListener("cancel",this.onDialogCancel):this.dialogElement&&this.dialogElement.removeEventListener("cancel",this.onDialogCancel),this.dialogElement=e,this.props.onDialogRef?.(e)};onKeyDown=e=>{e.defaultPrevented||(e.metaKey&&"w"===e.key||"Escape"===e.key)&&this.onDialogCancel(e)};onDismiss=()=>{this.isDismissable()&&!this.state.isAppearing&&this.props.onDismissed&&this.props.onDismissed()};onSubmit=e=>{e.preventDefault(),this.props.onSubmit?this.props.onSubmit():this.onDismiss()};renderHeader(){return this.props.title?be.createElement(NE,{title:this.props.title,titleId:this.state.titleId,dismissable:this.isDismissable(),onDismissed:this.onDismiss,loading:this.props.loading}):null}getAriaAttributes(){return wr()?"alertdialog"===this.props.role?{"aria-labelledby":`${this.state.titleId} ${this.props.ariaDescribedBy}`}:{"aria-describedby":`${this.state.titleId} ${this.props.ariaDescribedBy??""}`}:{"aria-labelledby":this.state.titleId,"aria-describedby":this.props.ariaDescribedBy}}render(){const e=Vr()({error:"error"===this.props.type,warning:"warning"===this.props.type},this.props.className,"tooltip-host");return be.createElement("dialog",{ref:this.onDialogRef,id:this.props.id,role:this.props.role,onMouseDown:this.onDialogMouseDown,onKeyDown:this.onKeyDown,className:e,...this.getAriaAttributes(),tabIndex:-1},this.renderHeader(),be.createElement("form",{onSubmit:this.onSubmit,onReset:this.onDismiss},be.createElement("fieldset",{disabled:this.props.disabled},this.props.children)))}}class LE extends be.Component{render(){return be.createElement("div",{className:"dialog-error",role:"alert"},be.createElement(si,{symbol:ao}),be.createElement("div",null,this.props.children))}}class HE extends be.Component{render(){return be.createElement("div",{className:"dialog-footer"},this.props.children)}}class UE extends be.Component{onOkButtonClick=e=>{void 0!==this.props.onOkButtonClick&&this.props.onOkButtonClick(e),e.defaultPrevented||!0===this.props.destructive&&(e.preventDefault(),e.currentTarget.form&&e.currentTarget.form.dispatchEvent(new Event("submit")))};onCancelButtonClick=e=>{void 0!==this.props.onCancelButtonClick&&this.props.onCancelButtonClick(e),e.defaultPrevented||!0===this.props.destructive&&(e.preventDefault(),e.currentTarget.form&&e.currentTarget.form.dispatchEvent(new Event("reset")))};renderOkButton(){return be.createElement(ii,{onClick:this.onOkButtonClick,disabled:this.props.okButtonDisabled,tooltip:this.props.okButtonTitle,type:!0===this.props.destructive?"button":"submit",ariaDescribedBy:this.props.okButtonAriaDescribedBy},this.props.okButtonText||"Ok")}renderCancelButton(){return!1===this.props.cancelButtonVisible?null:be.createElement(ii,{onClick:this.onCancelButtonClick,disabled:this.props.cancelButtonDisabled,tooltip:this.props.cancelButtonTitle,type:!0===this.props.destructive?"submit":"reset"},this.props.cancelButtonText||"取消")}renderButtons(){return be.createElement(be.Fragment,null,this.renderCancelButton(),this.renderOkButton())}render(){const e=Vr()("button-group",this.props.className,{destructive:!0===this.props.destructive});return be.createElement("div",{className:e},this.renderButtons(),this.props.children)}}class WE extends be.Component{render(){return be.createElement(HE,null,be.createElement(UE,{okButtonText:this.props.buttonText||"关闭",okButtonTitle:this.props.buttonTitle,onOkButtonClick:this.props.onButtonClick,okButtonDisabled:this.props.disabled,cancelButtonVisible:!1}))}}class $E extends be.Component{render(){const{repository:e,branch:t,children:n}=this.props;if(!e||!t)return n;const r=`${e.htmlURL}/rules/?ref=${encodeURIComponent("refs/heads/"+t)}`;return be.createElement(CE,{uri:r,className:"repo-rulesets-for-branch-link"},n)}}class zE extends be.Component{render(){const{repository:e,rulesetId:t,children:n}=this.props,r=`${e.htmlURL}/rules/${t}`;return be.createElement(CE,{uri:r,className:"repo-ruleset-link"},n)}}class qE extends be.Component{render(){const{repository:e,branch:t,failures:n,leadingText:r}=this.props,i=n.failed.length+n.bypassed.length;let o;o="bypass"===n.status?`, but you can bypass ${1===i?"it":"them"}. Proceed with caution!`:".";const s="Rules";return be.createElement("div",{className:"repo-rules-failure-list-component"},be.createElement("p",null,r," fails ",i," rule",i>1?"s":"",o," ",be.createElement($E,{repository:e,branch:t},"View all rulesets for this branch.")),n.failed.length>0&&be.createElement("div",{className:"repo-rule-list"},be.createElement("strong",null,"Failed ",s,":"),this.renderRuleFailureList(n.failed)),n.bypassed.length>0&&be.createElement("div",{className:"repo-rule-list"},be.createElement("strong",null,"Bypassed ",s,":"),this.renderRuleFailureList(n.bypassed)))}renderRuleFailureList(e){return be.createElement("ul",null,e.map((e=>be.createElement("li",{key:`${e.description}-${e.rulesetId}`},be.createElement(zE,{repository:this.props.repository,rulesetId:e.rulesetId},e.description)))))}}class jE extends we().Component{avatarButtonRef=null;warningBadgeRef=we().createRef();constructor(e){super(e),this.state={isPopoverOpen:!1,accountEmail:this.props.preferredAccountEmail,isGitConfigLocal:!1},this.determineGitConfigLocation()}componentDidUpdate(e){this.props.user?.name===e.user?.name&&this.props.user?.email===e.user?.email||this.determineGitConfigLocation()}async determineGitConfigLocation(){const e=await this.isGitConfigLocal();this.setState({isGitConfigLocal:e})}isGitConfigLocal=async()=>{const{repository:e}=this.props,t=await il(e,"user.name",!0),n=await il(e,"user.email",!0);return null!==t||null!==n};onButtonRef=e=>{this.avatarButtonRef=e};render(){const{warningType:e,user:t}=this.props;let n="";switch(e){case"none":n="View commit author information";break;case"misattribution":n="Commit may be misattributed. View warning.";break;case"disallowedEmail":n="Email address is disallowed. View warning."}const r=Vr()("commit-message-avatar-component",{misattributed:"none"!==e});return we().createElement("div",{className:r},we().createElement(ii,{className:"avatar-button",ariaLabel:n,onButtonRef:this.onButtonRef,onClick:this.onAvatarClick},"none"!==e&&this.renderWarningBadge(),we().createElement(IE,{user:t,title:null})),this.state.isPopoverOpen&&this.renderPopover())}renderWarningBadge(){const{warningType:e,emailRuleFailures:t}=this.props,n="disallowedEmail"===e&&"fail"===t?.status,r=Vr()("warning-badge",{error:n,warning:!n}),i=n?ao:ai;return we().createElement("div",{className:r,ref:this.warningBadgeRef},we().createElement(si,{symbol:i}))}openPopover=()=>{this.setState((e=>!1===e.isPopoverOpen?{isPopoverOpen:!0}:null))};closePopover=()=>{this.setState((e=>e.isPopoverOpen?{isPopoverOpen:!1}:null))};onAvatarClick=e=>{e.preventDefault(),this.state.isPopoverOpen?this.closePopover():this.openPopover()};renderGitConfigPopover(){const{user:e}=this.props,{isGitConfigLocal:t}=this.state,n=t?"local":"global",r=t?"for your repository":"",i=t?"存储库设置":"git settings";return we().createElement(we().Fragment,null,we().createElement("p",null,e&&e.name&&`Email: ${e.email}`),we().createElement("p",null,"You can update your ",n," git configuration ",r," in your ",i,"."),!t&&we().createElement("p",{className:"secondary-text"},"You can also set an email local to this repository from the"," ",we().createElement(CE,{onClick:this.onRepositorySettingsClick},"存储库设置"),"."),we().createElement(mC,{className:"button-row"},we().createElement(UE,{okButtonText:"Open Git Settings",onOkButtonClick:this.onOpenGitSettings,onCancelButtonClick:this.onIgnoreClick})))}renderWarningPopover(){const{warningType:e,emailRuleFailures:t}=this.props,n=we().createElement(we().Fragment,null,"Git 全局配置文件中的邮箱 (",we().createElement("span",{className:"git-email"},this.props.email),")"),r=we().createElement(we().Fragment,null,we().createElement(mC,null,we().createElement(RE,{label:"Your Account Emails",value:this.state.accountEmail,onChange:this.onSelectedGitHubEmailChange},this.props.accountEmails.map((e=>we().createElement("option",{key:e,value:e},e))))),we().createElement(mC,null,we().createElement("div",{className:"secondary-text"},"你也可以从该代码库中选择一个与之关联的邮箱"," ",we().createElement(CE,{onClick:this.onRepositorySettingsClick},"存储库设置"),".")),we().createElement(mC,{className:"button-row"},we().createElement(ii,{onClick:this.onIgnoreClick,type:"button"},"忽略"),we().createElement(ii,{onClick:this.onUpdateEmailClick,type:"submit"},"Update Email")));if("misattribution"===e){const e=this.props.isEnterpriseAccount?" Enterprise":"",t=this.props.user&&this.props.user.name?` for ${this.props.user.name}`:"";return we().createElement(we().Fragment,null,we().createElement(mC,null,we().createElement("div",null,n," 与你的 GitHub 邮箱地址不匹配",e," ","account",t,"."," ",we().createElement(CE,{ariaLabel:"Learn more about commit attribution",uri:"https://docs.github.com/en/github/committing-changes-to-your-project/why-are-my-commits-linked-to-the-wrong-user"},"了解更多"))),r)}if("disallowedEmail"===e&&t&&this.props.branch&&this.props.repository.gitHubRepository)return we().createElement(we().Fragment,null,we().createElement(qE,{repository:this.props.repository.gitHubRepository,branch:this.props.branch,failures:t,leadingText:n}),r)}getCommittingAsTitle(){const{user:e}=this.props;if(void 0===e)return"Unknown user";const{name:t,email:n}=e;return t?we().createElement(we().Fragment,null,"提交者为 ",we().createElement("strong",null,t)):we().createElement(we().Fragment,null,"Committing with ",n)}renderPopover(){const{warningType:e}=this.props;let t="";switch(this.props.warningType){case"misattribution":t="此次提交有误";break;case"disallowedEmail":t="This email address is disallowed";break;default:t=this.getCommittingAsTitle()}return we().createElement(eE,{anchor:"none"!==e?this.warningBadgeRef.current:this.avatarButtonRef,anchorPosition:XS.RightBottom,decoration:ZS.Balloon,onClickOutside:this.closePopover,ariaLabelledby:"commit-avatar-popover-header"},we().createElement("h3",{id:"commit-avatar-popover-header"},t),"none"!==e?this.renderWarningPopover():this.renderGitConfigPopover())}onRepositorySettingsClick=()=>{this.closePopover(),this.props.onOpenRepositorySettings()};onOpenGitSettings=()=>{this.closePopover(),this.state.isGitConfigLocal?this.props.onOpenRepositorySettings():this.props.onOpenGitSettings()};onIgnoreClick=e=>{e.preventDefault(),this.closePopover()};onUpdateEmailClick=async e=>{e.preventDefault(),this.closePopover(),this.props.email!==this.state.accountEmail&&this.props.onUpdateEmail(this.state.accountEmail)};onSelectedGitHubEmailChange=e=>{const t=e.currentTarget.value;t&&this.setState({accountEmail:t})}}var GE;!function(e){e[e.Tabs=0]="Tabs",e[e.Switch=1]="Switch",e[e.Vertical=2]="Vertical"}(GE||(GE={}));class VE extends be.Component{onClick=e=>{this.props.onClick(this.props.index)};onKeyDown=e=>{const{type:t,index:n}=this.props,r=t===GE.Vertical?"ArrowUp":"ArrowLeft",i=t===GE.Vertical?"ArrowDown":"ArrowRight";e.key===r?(this.props.onSelectAdjacent("previous",n),e.preventDefault()):e.key===i&&(this.props.onSelectAdjacent("next",n),e.preventDefault())};onButtonRef=e=>{this.props.onButtonRef(this.props.index,e)};onMouseEnter=()=>{this.props.onMouseEnter(this.props.index)};render(){const e=this.props.selected,t=Vr()("tab-bar-item",{selected:e});return be.createElement("button",{ref:this.onButtonRef,className:t,onClick:this.onClick,role:"tab","aria-selected":e,tabIndex:e?void 0:-1,onKeyDown:this.onKeyDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.props.onMouseLeave,type:"button"},this.props.children)}}class KE extends be.Component{tabRefsByIndex=new Map;mouseOverTimeoutId=null;render(){const{type:e}=this.props;return be.createElement("div",{className:"tab-bar "+(e===GE.Switch?"switch":e===GE.Vertical?"vertical":"tabs"),role:"tablist"},this.renderItems())}onSelectAdjacentTab=(e,t)=>{const n=be.Children.toArray(this.props.children);if(0===n.length)return;const r=(t+("next"===e?1:-1)+n.length)%n.length,i=this.tabRefsByIndex.get(r);i&&i.focus(),this.props.onTabClicked(r)};onTabClicked=e=>{this.props.onTabClicked(e)};onTabRef=(e,t)=>{t?this.tabRefsByIndex.set(e,t):this.tabRefsByIndex.delete(e)};onMouseEnter=e=>{e!==this.props.selectedIndex&&Zs.isDragInProgress&&void 0!==this.props.allowDragOverSwitching&&this.props.allowDragOverSwitching&&(this.mouseOverTimeoutId=window.setTimeout((()=>{this.onTabClicked(e)}),500))};onMouseLeave=()=>{null!==this.mouseOverTimeoutId&&window.clearTimeout(this.mouseOverTimeoutId)};renderItems(){return be.Children.toArray(this.props.children).map(((e,t)=>{const n=t===this.props.selectedIndex;return be.createElement(VE,{key:t,selected:n,index:t,onClick:this.onTabClicked,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onSelectAdjacent:this.onSelectAdjacentTab,onButtonRef:this.onTabRef,type:this.props.type},e)}))}}class YE extends be.Component{render(){const e=this.props.remote;return be.createElement(_E,null,be.createElement("p",null,"远程存储库 (",e.name,")"),be.createElement(dC,{placeholder:"远程 URL",value:e.url,onValueChanged:this.props.onRemoteUrlChanged}))}}class XE extends be.Component{onChange=e=>{this.props.onChange&&this.props.onChange(e),this.props.onValueChanged&&!e.defaultPrevented&&this.props.onValueChanged(e.currentTarget.value)};onContextMenu=e=>{e.preventDefault(),lC([{role:"editMenu"}])};render(){const e=Vr()("text-area-component",this.props.labelClassName);return be.createElement("label",{className:e},this.props.label,be.createElement("textarea",{autoFocus:this.props.autoFocus,className:this.props.textareaClassName,disabled:this.props.disabled,rows:this.props.rows||3,placeholder:this.props.placeholder,value:this.props.value,onChange:this.onChange,onKeyDown:this.props.onKeyDown,ref:this.props.onTextAreaRef,onContextMenu:this.onContextMenu}))}}class QE extends be.Component{render(){return be.createElement("em",{className:"ref-component"},this.props.children)}}class ZE extends be.Component{render(){return be.createElement(_E,null,be.createElement("p",null,"编辑 ",be.createElement(QE,null,".gitignore"),". 文件，该文件指定Git应该忽略的故意未跟踪的文件，Git已经跟踪的文件不受影响."," ",be.createElement(CE,{onClick:this.props.onShowExamples},"Learn more about gitignore files")),be.createElement(XE,{placeholder:"忽略的文件",value:this.props.text||"",onValueChanged:this.props.onIgnoreTextChanged,textareaClassName:"gitignore"}))}}class JE extends be.Component{render(){return be.createElement(mC,{className:"call-to-action"},this.props.children,be.createElement(ii,{className:"action-button button-component-primary",onClick:this.onClick},this.props.actionTitle))}onClick=e=>{e.preventDefault(),this.props.onAction()}}class ek extends be.Component{render(){return be.createElement(_E,null,be.createElement(JE,{actionTitle:"发布",onAction:this.props.onPublish},be.createElement("div",{className:"no-remote-publish-message"},"将存储库发布到Github。需要帮助？"," ",be.createElement(CE,{uri:"https://help.github.com/articles/about-remote-repositories/"},"Learn more 关于远程存储库。"))))}}function tk(e){const t=e.forkContributionTarget===Tr.Self?e.repository.gitHubRepository:e.repository.gitHubRepository.parent;return be.createElement("ul",{className:"fork-settings-description"},be.createElement("li",null,"针对的拉取请求目标 ",be.createElement("strong",null,t.fullName)," ","将显示在拉取请求列表中."),be.createElement("li",null,"Issues will be created in ",be.createElement("strong",null,t.fullName),"."),be.createElement("li",null,'"View on Github" will open ',be.createElement("strong",null,t.fullName)," ","in the browser."),be.createElement("li",null,"New branches will be based on"," ",be.createElement("strong",null,t.fullName),"'s default branch."),be.createElement("li",null,"Autocompletion of user and issues will be based on"," ",be.createElement("strong",null,t.fullName),"."))}class nk extends be.Component{constructor(e){super(e),this.state={inputId:Yr(`RadioButton_${this.props.value}`)}}componentWillUnmount(){Xr(this.state.inputId)}render(){return be.createElement("div",{className:"radio-button-component"},be.createElement("input",{type:"radio",id:this.state.inputId,value:this.props.value,checked:this.props.checked,onChange:this.onSelected,tabIndex:this.props.tabIndex,autoFocus:this.props.autoFocus}),be.createElement("label",{htmlFor:this.state.inputId},this.props.label??this.props.children))}onSelected=e=>{this.props.onSelected(this.props.value,e)}}class rk extends be.Component{render(){return be.createElement(_E,null,be.createElement("h2",null,"使用这个 fork…"),be.createElement(nk,{value:Tr.Parent,checked:this.props.forkContributionTarget===Tr.Parent,label:"贡献给父代码仓库",onSelected:this.onForkContributionTargetChanged}),be.createElement(nk,{value:Tr.Self,checked:this.props.forkContributionTarget===Tr.Self,label:"为个人目的",onSelected:this.onForkContributionTargetChanged}),be.createElement(tk,{repository:this.props.repository,forkContributionTarget:this.props.forkContributionTarget}))}onForkContributionTargetChanged=e=>{this.props.onForkContributionTargetChanged(e)}}class ik extends be.Component{buildMessage(e){const t=e?be.createElement("span",{className:"green-circle"},be.createElement(si,{className:"check-icon",symbol:pi})):be.createElement("span",{className:"warning-icon"},"⚠️"),n=e?null:be.createElement(CE,{ariaLabel:"Learn more about commit attribution",uri:"https://docs.github.com/en/github/committing-changes-to-your-project/why-are-my-commits-linked-to-the-wrong-user"},"学习更多");return be.createElement(be.Fragment,null,t,this.buildScreenReaderMessage(e),n)}buildScreenReaderMessage(e){const t=e?"":"Your commits will be wrongly attributed. ";return`This email address ${e?"matches":"does not match"} ${this.getAccountTypeDescription()}. ${t}`}render(){const{accounts:e,email:t}=this.props;if(0===e.length||0===t.trim().length)return null;const n=e.some((e=>Ch(e,t)));return be.createElement(be.Fragment,null,be.createElement("div",{className:"git-email-not-found-warning"},this.buildMessage(n)),be.createElement(pC,{id:"git-email-not-found-warning-for-screen-readers",trackedUserInput:this.props.email,message:this.buildScreenReaderMessage(n)}))}getAccountTypeDescription(){return 1===this.props.accounts.length?`your ${this.props.accounts[0].endpoint===Qn()?"GitHub":"GitHub Enterprise"} account`:"either of your GitHub.com nor GitHub Enterprise accounts"}}const ok="Other";class sk extends be.Component{emailInputRef=be.createRef();constructor(e){super(e),this.state={emailIsOther:this.accountEmails.length>0&&!this.accountEmails.includes(this.props.email)&&!this.props.isLoadingGitConfig}}componentDidUpdate(e,t){const n=null!==this.emailInputRef.current&&this.emailInputRef.current.isFocused;if(e.email===this.props.email||n||this.setState({emailIsOther:this.accountEmails.length>0&&!this.accountEmails.includes(this.props.email)&&!this.props.isLoadingGitConfig}),this.state.emailIsOther!==t.emailIsOther&&!0===this.state.emailIsOther&&null!==this.emailInputRef.current){const e=this.emailInputRef.current;e.focus(),e.selectAll()}}render(){return be.createElement("div",null,be.createElement(mC,null,be.createElement(dC,{label: "名称",value:this.props.name,disabled:this.props.disabled,onValueChanged:this.props.onNameChanged})),this.renderEmailDropdown(),this.renderEmailTextBox(),this.state.emailIsOther?be.createElement(ik,{accounts:this.accounts,email:this.props.email}):null)}renderEmailDropdown(){if(0===this.accountEmails.length)return null;const e=this.props.dotComAccount?.emails.map((e=>e.email))??[],t=this.props.enterpriseAccount?.emails.map((e=>e.email))??[],n=null!==this.props.dotComAccount&&null!==this.props.enterpriseAccount,r=n?"(GitHub.com)":"",i=n?"(GitHub Enterprise)":"";return be.createElement(mC,null,be.createElement(RE,{label:"邮箱",value:this.state.emailIsOther?ok:this.props.email,disabled:this.props.disabled,onChange:this.onEmailSelectChange},e.map((e=>be.createElement("option",{key:e,value:e},e," ",r))),t.map((e=>be.createElement("option",{key:e,value:e},e," ",i))),be.createElement("option",{key:ok,value:ok},ok)))}renderEmailTextBox(){if(!1===this.state.emailIsOther&&this.accountEmails.length>0)return null;const e=this.state.emailIsOther?void 0:"Email",t=e?void 0:"Email";return be.createElement(mC,null,be.createElement(dC,{ref:this.emailInputRef,label:e,type:"email",value:this.props.email,disabled:this.props.disabled,onValueChanged:this.props.onEmailChanged,ariaLabel:t,ariaControls:"git-email-not-found-warning-for-screen-readers"}))}get accounts(){const e=[];return this.props.dotComAccount&&e.push(this.props.dotComAccount),this.props.enterpriseAccount&&e.push(this.props.enterpriseAccount),e}get accountEmails(){return this.accounts.reduce(((e,t)=>e.concat(t.emails.map((e=>e.email)))),[])}onEmailSelectChange=e=>{const t=e.currentTarget.value;this.setState({emailIsOther:t===ok}),t!==ok&&this.props.onEmailChanged?.(t)}}var ak;!function(e){e.Global="Global",e.Local="Local"}(ak||(ak={}));class lk extends be.Component{onGitConfigLocationChanged=e=>{this.props.onGitConfigLocationChanged(e)};render(){const e=null!==this.props.account&&this.props.account.endpoint===Qn(),t=e?null:this.props.account,n=e?this.props.account:null;return be.createElement(_E,null,be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"对于此仓库，我想"),be.createElement(mC,null,be.createElement("div",null,be.createElement(nk,{label:"使用全局Git配置",checked:this.props.gitConfigLocation===ak.Global,value:ak.Global,onSelected:this.onGitConfigLocationChanged}),be.createElement(nk,{label:"使用本地Git配置",checked:this.props.gitConfigLocation===ak.Local,value:ak.Local,onSelected:this.onGitConfigLocationChanged}))),be.createElement(sk,{email:this.props.gitConfigLocation===ak.Global?this.props.globalEmail:this.props.email,name:this.props.gitConfigLocation===ak.Global?this.props.globalName:this.props.name,enterpriseAccount:t,dotComAccount:n,disabled:this.props.gitConfigLocation===ak.Global,onEmailChanged:this.props.onEmailChanged,onNameChanged:this.props.onNameChanged,isLoadingGitConfig:this.props.isLoadingGitConfig})))}}const ck=/^[\x00-\x20.,:;<>"\\']+$/;function uk(e){return!ck.test(e)}const hk="Name is invalid, it consists only of disallowed characters.";var pk,dk;!function(e){e[e.Remote=0]="Remote",e[e.IgnoredFiles=1]="IgnoredFiles",e[e.GitConfig=2]="GitConfig",e[e.ForkSettings=3]="ForkSettings"}(pk||(pk={}));class mk extends be.Component{constructor(e){super(e),this.state={selectedTab:this.props.initialSelectedTab||pk.Remote,remote:e.remote,ignoreText:null,ignoreTextHasChanged:!1,disabled:!1,forkContributionTarget:Fr(e.repository),saveDisabled:!1,gitConfigLocation:ak.Global,committerName:"",committerEmail:"",globalCommitterName:"",globalCommitterEmail:"",initialGitConfigLocation:ak.Global,initialCommitterName:null,initialCommitterEmail:null,isLoadingGitConfig:!0}}async componentWillMount(){try{const e=await kv(this.props.repository);this.setState({ignoreText:e})}catch(e){log.error(`RepositorySettings: unable to read root .gitignore file for ${this.props.repository.path}`,e),this.setState({errors:[`Could not read root .gitignore: ${e}`]})}const e=await il(this.props.repository,"user.name",!0),t=await il(this.props.repository,"user.email",!0),n=await ol("user.name")||"",r=await ol("user.email")||"",i=null===e&&null===t?ak.Global:ak.Local;let o=n,s=r;i===ak.Local&&(o=e??"",s=t??""),this.setState({gitConfigLocation:i,committerName:o,committerEmail:s,globalCommitterName:n,globalCommitterEmail:r,initialGitConfigLocation:i,initialCommitterName:e,initialCommitterEmail:t,isLoadingGitConfig:!1})}renderErrors(){const e=this.state.errors;return e&&e.length?e.map(((e,t)=>{const n=`err-${t}`;return be.createElement(LE,{key:n},e)})):null}render(){const e=Nr(this.props.repository);return be.createElement(FE,{id:"repository-settings",title:"存储库设置",onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,disabled:this.state.disabled},this.renderErrors(),be.createElement("div",{className:"tab-container"},be.createElement(KE,{onTabClicked:this.onTabClicked,selectedIndex:this.state.selectedTab,type:GE.Vertical},be.createElement("span",null,be.createElement(si,{className:"icon",symbol:ro}),"远程"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:Di}),"忽略文件"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:Fi}),"Git Config"),e&&be.createElement("span",null,be.createElement(si,{className:"icon",symbol:no}),"Fork Behavior")),be.createElement("div",{className:"active-tab"},this.renderActiveTab())),be.createElement(HE,null,be.createElement(UE,{okButtonText:"保存",okButtonDisabled:this.state.saveDisabled})))}renderActiveTab(){const e=this.state.selectedTab;switch(e){case pk.Remote:{const e=this.state.remote;return e?be.createElement(YE,{remote:e,onRemoteUrlChanged:this.onRemoteUrlChanged}):be.createElement(ek,{onPublish:this.onPublish})}case pk.IgnoredFiles:return be.createElement(ZE,{text:this.state.ignoreText,onIgnoreTextChanged:this.onIgnoreTextChanged,onShowExamples:this.onShowGitIgnoreExamples});case pk.ForkSettings:return Nr(this.props.repository)?be.createElement(rk,{forkContributionTarget:this.state.forkContributionTarget,repository:this.props.repository,onForkContributionTargetChanged:this.onForkContributionTargetChanged}):null;case pk.GitConfig:return be.createElement(lk,{account:this.props.repositoryAccount,gitConfigLocation:this.state.gitConfigLocation,onGitConfigLocationChanged:this.onGitConfigLocationChanged,name:this.state.committerName,email:this.state.committerEmail,globalName:this.state.globalCommitterName,globalEmail:this.state.globalCommitterEmail,onNameChanged:this.onCommitterNameChanged,onEmailChanged:this.onCommitterEmailChanged,isLoadingGitConfig:this.state.isLoadingGitConfig});default:return et(0,`Unknown tab type: ${e}`)}}onPublish=()=>{this.props.dispatcher.showPopup({type:nl.PublishRepository,repository:this.props.repository})};onShowGitIgnoreExamples=()=>{this.props.dispatcher.openInBrowser("https://git-scm.com/docs/gitignore")};onSubmit=async()=>{this.setState({disabled:!0,errors:void 0});const e=new Array;if(this.state.remote&&this.props.remote){const t=this.state.remote.url.trim();if(t!==this.props.remote.url)try{await this.props.dispatcher.setRemoteURL(this.props.repository,this.props.remote.name,t)}catch(t){log.error(`RepositorySettings: unable to set remote URL at ${this.props.repository.path}`,t),e.push(`Failed setting the remote URL: ${t}`)}}if(this.state.ignoreTextHasChanged&&null!==this.state.ignoreText)try{await this.props.dispatcher.saveGitIgnore(this.props.repository,this.state.ignoreText)}catch(t){log.error(`RepositorySettings: unable to save gitignore at ${this.props.repository.path}`,t),e.push(`Failed saving the .gitignore file: ${t}`)}this.state.forkContributionTarget!==this.props.repository.workflowPreferences.forkContributionTarget&&await this.props.dispatcher.updateRepositoryWorkflowPreferences(this.props.repository,{...this.props.repository.workflowPreferences,forkContributionTarget:this.state.forkContributionTarget});let t=!1;this.state.gitConfigLocation!==this.state.initialGitConfigLocation&&this.state.gitConfigLocation===ak.Global?(await pl(this.props.repository,"user.name"),await pl(this.props.repository,"user.email"),t=!0):this.state.gitConfigLocation===ak.Local&&(this.state.committerName!==this.state.initialCommitterName&&(await ll(this.props.repository,"user.name",this.state.committerName),t=!0),this.state.committerEmail!==this.state.initialCommitterEmail&&(await ll(this.props.repository,"user.email",this.state.committerEmail),t=!0)),t&&this.props.dispatcher.refreshAuthor(this.props.repository),e.length?this.setState({disabled:!1,errors:e}):this.props.onDismissed()};onRemoteUrlChanged=e=>{const t=this.props.remote;if(!t)return;const n={...t,url:e};this.setState({remote:n})};onIgnoreTextChanged=e=>{this.setState({ignoreText:e,ignoreTextHasChanged:!0})};onTabClicked=e=>{this.setState({selectedTab:e})};onForkContributionTargetChanged=e=>{this.setState({forkContributionTarget:e})};onGitConfigLocationChanged=e=>{this.setState({gitConfigLocation:e})};onCommitterNameChanged=e=>{const t=new Array;uk(e)?this.setState({saveDisabled:!1}):(this.setState({saveDisabled:!0}),t.push(hk)),this.setState({committerName:e,errors:t})};onCommitterEmailChanged=e=>{this.setState({committerEmail:e})}}!function(e){e[e.Text=0]="Text",e[e.Emoji=1]="Emoji",e[e.Link=2]="Link"}(dk||(dk={}));class fk{emoji;repository=null;_results=new Array;_currentString="";constructor(e,t){this.emoji=e,t&&_r(t)&&(this.repository=Br(t))}reset(){this._results=new Array,this._currentString=""}append(e){this._currentString+=e}flush(){this._currentString.length&&(this._results.push({kind:dk.Text,text:this._currentString}),this._currentString="")}getLastProcessedChar=()=>this._currentString?.at(-1);scanForEndOfWord(e,t){const n=e.indexOf("\n",t+1),r=e.indexOf(" ",t+1);return n>-1&&r>-1?Math.min(n,r):n>-1?n:r>-1?r:e.length}scanForEmoji(e,t){const n=this.scanForEndOfWord(e,t),r=e.slice(t,n);if(!/^:.*?:$/.test(r))return null;const i=this.emoji.get(r);return i?(this.flush(),this._results.push({kind:dk.Emoji,text:r,path:i}),{nextIndex:n}):null}scanForIssue(e,t,n){let r=this.scanForEndOfWord(e,t),i=e.slice(t,r);if(i.endsWith(")")&&(r-=1,i=e.slice(t,r)),i.endsWith(".")&&(r-=1,i=e.slice(t,r)),i.endsWith(",")&&(r-=1,i=e.slice(t,r)),!/^#\d+$/.test(i))return null;this.flush();const o=parseInt(i.substring(1),10);if(isNaN(o))return null;const s=`${n.htmlURL}/issues/${o}`;return this._results.push({kind:dk.Link,text:i,url:s}),{nextIndex:r}}scanForMention(e,t,n){const r=this.getLastProcessedChar();if(r&&!/\s/.test(r))return null;let i=this.scanForEndOfWord(e,t),o=e.slice(t,i);if((o.endsWith("!")||o.endsWith(","))&&(i-=1,o=e.slice(t,i)),!/^@[a-zA-Z0-9\-]+$/.test(o))return null;this.flush();const s=o.substring(1),a=`${Xn(n.endpoint)}/${s}`;return this._results.push({kind:dk.Link,text:o,url:a}),{nextIndex:i}}scanForHyperlink(e,t,n){const r=this.getLastProcessedChar();if(r&&!/\s/.test(r))return null;const i=this.scanForEndOfWord(e,t),o=e.slice(t,i);if(!/^https?:\/\/.+/.test(o))return null;if(this.flush(),n&&n.htmlURL){const e=n.htmlURL.toLowerCase();if(o.toLowerCase().startsWith(`${e}/issues/`)){const e=/\/issues\/(\d+)/.exec(o);if(e){const t=e[1];return this._results.push({kind:dk.Link,url:o,text:`#${t}`}),{nextIndex:i}}}}return this._results.push({kind:dk.Link,url:o,text:o}),{nextIndex:i}}inspectAndMove(e,t,n){const r=n();return r?r.nextIndex:(this.append(e),t+1)}tokenizeNonGitHubRepository(e){let t=0;for(;t<e.length;){const n=e[t];switch(n){case":":t=this.inspectAndMove(n,t,(()=>this.scanForEmoji(e,t)));break;case"h":t=this.inspectAndMove(n,t,(()=>this.scanForHyperlink(e,t)));break;default:this.append(n),t++}}return this.flush(),this._results}tokenizeGitHubRepository(e,t){let n=0;for(;n<e.length;){const r=e[n];switch(r){case":":n=this.inspectAndMove(r,n,(()=>this.scanForEmoji(e,n)));break;case"#":n=this.inspectAndMove(r,n,(()=>this.scanForIssue(e,n,t)));break;case"@":n=this.inspectAndMove(r,n,(()=>this.scanForMention(e,n,t)));break;case"h":n=this.inspectAndMove(r,n,(()=>this.scanForHyperlink(e,n,t)));break;default:this.append(r),n++}}return this.flush(),this._results}tokenize(e){return this.reset(),this.repository?this.tokenizeGitHubRepository(e,this.repository):this.tokenizeNonGitHubRepository(e)}}function gk(e,t,n,r=72){const i=n.tokenize(e.trimRight()),o=new Array,s=new Array;let a=r;for(const e of i){const t=e.kind===dk.Emoji?2:e.text.length;if(a<=0)s.push(e);else if(a>=t)o.push(e),a-=t;else{if(e.kind===dk.Text)o.push(bk(e.text.substring(0,a))),s.push(bk(e.text.substring(a)));else if(e.kind===dk.Emoji)s.push(e);else{if(e.kind!==dk.Link)return et(0,"Unknown token type");!e.text.startsWith("#")&&a>5?(o.push(wk(e.text.substring(0,a),e.text)),s.push(wk(e.text.substring(a),e.text))):s.push(e)}a=0}}let l=n.tokenize(t.trimRight());return s.length>0&&(o.push(yk()),l=l.length>0?[yk(),...s,bk("\n\n"),...l]:[yk(),...s]),{summary:o,body:l}}function yk(){return bk("…")}function bk(e){return{kind:dk.Text,text:e}}function wk(e,t){return{kind:dk.Link,text:e,url:t}}const vk=e=>0===e.length||!/\S/.test(e);function Ck(e,...t){return Object.fromEntries(t.filter((t=>t in e)).map((t=>[t,e[t]])))}class Sk extends be.Component{buttonRef=null;buttonRefObservable=ri();shouldForceAriaLiveMessage=!1;constructor(e){super(e),this.state={tooltipVisible:!1},this.buttonRefObservable.subscribe(this.onButtonRef)}onToggle=()=>{this.shouldForceAriaLiveMessage=!this.shouldForceAriaLiveMessage};onTooltipVisible=()=>{this.setState({tooltipVisible:!0})};onTooltipHidden=()=>{this.setState({tooltipVisible:!1})};onButtonRef=e=>{if(null===e){const e=this.buttonRef;e?.removeEventListener("tooltip-shown",this.onTooltipVisible),e?.removeEventListener("tooltip-hidden",this.onTooltipHidden)}else e.addEventListener("tooltip-shown",this.onTooltipVisible),e.addEventListener("tooltip-hidden",this.onTooltipHidden);this.buttonRef=e};render(){const{tooltip:e,children:t,className:n,tooltipClassName:r,ariaLabel:i,ariaLiveMessage:o,...s}=this.props,a=Vr()("toggletip",n);return be.createElement("button",{ref:this.buttonRefObservable,className:a,"aria-label":i,"aria-haspopup":"dialog",onClick:this.onToggle},be.createElement(be.Fragment,null,void 0!==e&&be.createElement(Jr,{target:this.buttonRefObservable,className:r,isToggleTip:!0,...s},e),t,this.state.tooltipVisible&&be.createElement(pC,{message:o,trackedUserInput:this.shouldForceAriaLiveMessage})))}}const Ek={w:18,h:13,d:"M14 6V4.25a.75.75 0 0 1 1.5 0V6h1.75a.75.75 0 1 1 0 1.5H15.5v1.75a.75.75 0 0 1-1.5 0V7.5h-1.75a.75.75 0 1 1 0-1.5H14zM8.5 4a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0zm.063 3.064a3.995 3.995 0 0 0 1.2-4.429A3.996 3.996 0 0 0 8.298.725a4.01 4.01 0 0 0-6.064 1.91 3.987 3.987 0 0 0 1.2 4.43A5.988 5.988 0 0 0 0 12.2a.748.748 0 0 0 .716.766.751.751 0 0 0 .784-.697 4.49 4.49 0 0 1 1.39-3.04 4.51 4.51 0 0 1 6.218 0 4.49 4.49 0 0 1 1.39 3.04.748.748 0 0 0 .786.73.75.75 0 0 0 .714-.8 5.989 5.989 0 0 0-3.435-5.136z"};function kk(e){return e.filter((e=>!(e instanceof cE)))}function Rk(e){for(const t of e)if(t instanceof cE)return t;return null}class xk extends be.Component{descriptionComponent=null;summaryTextInput=null;descriptionTextArea=null;descriptionTextAreaScrollDebounceId=null;coAuthorInputRef=be.createRef();COMMIT_MSG_ERROR_BTN_ID="commit-message-failure-hint";constructor(e){super(e);const{commitMessage:t}=this.props;this.state={summary:t?t.summary:"",description:t?t.description:null,commitMessageAutocompletionProviders:kk(e.autocompletionProviders),coAuthorAutocompletionProvider:Rk(e.autocompletionProviders),descriptionObscured:!1,isCommittingStatusMessage:"",repoRulesEnabled:!1,isRuleFailurePopoverOpen:!1,repoRuleCommitMessageFailures:new Dm,repoRuleCommitAuthorFailures:new Dm,repoRuleBranchNameFailures:new Dm}}componentWillUnmount(){const{props:e,state:t}=this;e.onPersistCommitMessage?.(Ck(t,"summary","description")),window.removeEventListener("keydown",this.onKeyDown)}async componentDidMount(){window.addEventListener("keydown",this.onKeyDown),await this.updateRepoRuleFailures(void 0,void 0,!0)}componentWillReceiveProps(e){const{commitMessage:t}=e;null===this.props.commitToAmend&&null!==e.commitToAmend?this.fillWithCommitMessage({summary:e.commitToAmend.summary,description:e.commitToAmend.body}):null!==this.props.commitToAmend&&null===e.commitToAmend&&null!==t&&this.fillWithCommitMessage(t),t&&t!==this.props.commitMessage&&(""!==this.state.summary||this.state.description||this.fillWithCommitMessage(t))}fillWithCommitMessage(e){this.setState({summary:e.summary,description:e.description})}async componentDidUpdate(e,t){this.props.autocompletionProviders!==e.autocompletionProviders&&this.setState({commitMessageAutocompletionProviders:kk(this.props.autocompletionProviders),coAuthorAutocompletionProvider:Rk(this.props.autocompletionProviders)}),this.props.focusCommitMessage&&this.props.focusCommitMessage!==e.focusCommitMessage?this.focusSummary():!1===e.showCoAuthoredBy&&this.isCoAuthorInputVisible&&e.repository.id===this.props.repository.id&&this.coAuthorInputRef.current?.focus(),e.isCommitting!==this.props.isCommitting&&this.props.isCommitting&&""===this.state.isCommittingStatusMessage&&this.setState({isCommittingStatusMessage:this.getButtonTitle()}),e.mostRecentLocalCommit?.sha!==this.props.mostRecentLocalCommit?.sha&&null!==this.props.mostRecentLocalCommit&&this.setState({isCommittingStatusMessage:`Committed Just now - ${this.props.mostRecentLocalCommit.summary} (Sha: ${this.props.mostRecentLocalCommit.shortSha})`}),await this.updateRepoRuleFailures(e,t)}async updateRepoRuleFailures(e,t,n=!1){let r=this.state.repoRulesEnabled;(n||e?.repository!==this.props.repository||e?.repositoryAccount!==this.props.repositoryAccount)&&(r=Im(this.props.repositoryAccount,this.props.repository),this.setState({repoRulesEnabled:r})),r&&(await this.updateRepoRulesCommitMessageFailures(e,t,n),this.updateRepoRulesCommitAuthorFailures(e,n),this.updateRepoRulesBranchNameFailures(e,n))}async updateRepoRulesCommitMessageFailures(e,t,n){if(n||t?.summary!==this.state.summary||t?.description!==this.state.description||e?.coAuthors!==this.props.coAuthors||e?.commitToAmend!==this.props.commitToAmend||e?.repository!==this.props.repository||e?.repoRulesInfo.commitMessagePatterns!==this.props.repoRulesInfo.commitMessagePatterns){let e=this.state.summary;e||this.state.description||(e=this.summaryOrPlaceholder);const t={summary:e,description:this.state.description,trailers:this.getCoAuthorTrailers(),amend:null!==this.props.commitToAmend},n=await Ul(this.props.repository,t),r=this.props.repoRulesInfo.commitMessagePatterns.getFailedRules(n);this.setState({repoRuleCommitMessageFailures:r})}}updateRepoRulesCommitAuthorFailures(e,t){if(t||e?.commitAuthor?.email!==this.props.commitAuthor?.email||e?.repoRulesInfo.commitAuthorEmailPatterns!==this.props.repoRulesInfo.commitAuthorEmailPatterns){const e=this.props.commitAuthor?.email;let t;t=e?this.props.repoRulesInfo.commitAuthorEmailPatterns.getFailedRules(e):new Dm,this.setState({repoRuleCommitAuthorFailures:t})}}updateRepoRulesBranchNameFailures(e,t){if(t||e?.branch!==this.props.branch||e?.repoRulesInfo.branchNamePatterns!==this.props.repoRulesInfo.branchNamePatterns){const e=this.props.branch;let t;t=e?this.props.repoRulesInfo.branchNamePatterns.getFailedRules(e):new Dm,this.setState({repoRuleBranchNameFailures:t})}}clearCommitMessage(){this.setState({summary:"",description:null})}focusSummary(){null!==this.summaryTextInput&&(this.summaryTextInput.focus(),this.props.onCommitMessageFocusSet())}onSummaryChanged=e=>{this.setState({summary:e})};onDescriptionChanged=e=>{this.setState({description:e})};onSubmit=()=>{this.shouldWarnForRepoRuleBypass()&&this.props.repository.gitHubRepository&&this.props.branch?this.props.dispatcher.showRepoRulesCommitBypassWarning(this.props.repository.gitHubRepository,this.props.branch,(()=>this.createCommit())):this.createCommit()};getCoAuthorTrailers(){const{coAuthors:e}=this.props;return this.isCoAuthorInputEnabled?e.filter(Bc).map((e=>({token:"Co-Authored-By",value:`${e.name} <${e.email}>`}))):[]}get summaryOrPlaceholder(){return this.props.prepopulateCommitSummary&&!this.state.summary?this.props.placeholder:this.state.summary}forceCreateCommit=async()=>this.createCommit(!1);async createCommit(e=!0){const{description:t}=this.state;if(!this.canCommit()&&!this.canAmend())return;if(e){const e=this.props.coAuthors.filter((e=>!Bc(e)));if(e.length>0)return void this.props.onConfirmCommitWithUnknownCoAuthors(e,this.forceCreateCommit)}const n=this.getCoAuthorTrailers(),r={summary:this.summaryOrPlaceholder,description:t,trailers:n,amend:null!==this.props.commitToAmend},i=bE("create commit",this.props.repository),o=await this.props.onCreateCommit(r);i.done(),o&&this.clearCommitMessage()}canCommit(){return(!0===this.props.anyFilesSelected&&this.state.summary.length>0||this.props.prepopulateCommitSummary)&&!this.hasRepoRuleFailure()}canAmend(){return null!==this.props.commitToAmend&&(this.state.summary.length>0||this.props.prepopulateCommitSummary)&&!this.hasRepoRuleFailure()}hasRepoRuleFailure(){const{aheadBehind:e,repoRulesInfo:t}=this.props;return!!this.state.repoRulesEnabled&&(!0===t.basicCommitWarning||!0===t.signedCommitsRequired||!0===t.pullRequestRequired||"fail"===this.state.repoRuleCommitMessageFailures.status||"fail"===this.state.repoRuleCommitAuthorFailures.status||null===e&&(!0===t.creationRestricted||"fail"===this.state.repoRuleBranchNameFailures.status))}shouldWarnForRepoRuleBypass(){const{aheadBehind:e,branch:t,repoRulesInfo:n}=this.props;return!!this.state.repoRulesEnabled&&("bypass"===n.basicCommitWarning||"bypass"===n.signedCommitsRequired||"bypass"===n.pullRequestRequired||"bypass"===this.state.repoRuleCommitMessageFailures.status||"bypass"===this.state.repoRuleCommitAuthorFailures.status||null===e&&null!==t&&("bypass"===n.creationRestricted||"bypass"===this.state.repoRuleBranchNameFailures.status))}canExcecuteCommitShortcut(){return!this.props.isShowingFoldout&&!this.props.isShowingModal}onKeyDown=e=>{e.defaultPrevented||e.metaKey&&"Enter"===e.key&&(this.canCommit()||this.canAmend())&&this.canExcecuteCommitShortcut()&&(this.createCommit(),e.preventDefault())};renderAvatar(){const{commitAuthor:e,repository:t}=this.props,{gitHubRepository:n}=t,r=null!==e?EE(e,n):void 0,i=this.props.repositoryAccount,o=i?.emails.map((e=>e.email))??[],s=e?.email;let a="none";return void 0!==s&&(this.state.repoRulesEnabled&&"pass"!==this.state.repoRuleCommitAuthorFailures.status?a="disallowedEmail":null!=i&&!1===Ch(i,s)&&(a="misattribution")),be.createElement(jE,{user:r,email:e?.email,isEnterpriseAccount:i?.endpoint!==Qn(),warningType:a,emailRuleFailures:this.state.repoRuleCommitAuthorFailures,branch:this.props.branch,accountEmails:o,preferredAccountEmail:null!=i?yh(i):"",onUpdateEmail:this.onUpdateUserEmail,onOpenRepositorySettings:this.onOpenRepositorySettings,onOpenGitSettings:this.onOpenGitSettings,repository:t})}onUpdateUserEmail=async e=>{await cl("user.email",e),this.props.onRefreshAuthor()};onOpenRepositorySettings=()=>{this.props.onShowPopup({type:nl.RepositorySettings,repository:this.props.repository,initialSelectedTab:pk.GitConfig})};onOpenGitSettings=()=>{this.props.onShowPopup({type:nl.Preferences,initialSelectedTab:Dr.Git})};get isCoAuthorInputEnabled(){return null!==this.props.repository.gitHubRepository}get isCoAuthorInputVisible(){return this.props.showCoAuthoredBy&&this.isCoAuthorInputEnabled}onCoAuthorsUpdated=e=>this.props.onCoAuthorsUpdated(e);renderCoAuthorInput(){if(!this.isCoAuthorInputVisible)return null;const e=this.state.coAuthorAutocompletionProvider;return e?be.createElement(gE,{ref:this.coAuthorInputRef,onAuthorsUpdated:this.onCoAuthorsUpdated,authors:this.props.coAuthors,autoCompleteProvider:e,readOnly:!0===this.props.isCommitting}):null}onToggleCoAuthors=()=>{this.props.onShowCoAuthoredByChanged(!this.props.showCoAuthoredBy)};get toggleCoAuthorsText(){return this.props.showCoAuthoredBy?"Remove Co-Authors":"Add Co-Authors"}getAddRemoveCoAuthorsMenuItem(){return{label:this.toggleCoAuthorsText,action:this.onToggleCoAuthors,enabled:null!==this.props.repository.gitHubRepository&&!0!==this.props.isCommitting}}onContextMenu=e=>{e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement||lC([this.getAddRemoveCoAuthorsMenuItem()])};onAutocompletingInputContextMenu=()=>{const e=[this.getAddRemoveCoAuthorsMenuItem(),{type:"separator"},{role:"editMenu"},{type:"separator"}];e.push(this.getCommitSpellcheckEnabilityMenuItem(this.props.commitSpellcheckEnabled)),lC(e,!0)};getCommitSpellcheckEnabilityMenuItem(e){return{label:e?"Disable Commit Spellcheck":"Enable Commit Spellcheck",action:()=>this.props.onCommitSpellcheckEnabledChanged(!e)}}onCoAuthorToggleButtonClick=e=>{e.preventDefault(),this.onToggleCoAuthors()};renderCoAuthorToggleButton(){return null===this.props.repository.gitHubRepository?null:be.createElement("button",{className:"co-authors-toggle",onClick:this.onCoAuthorToggleButtonClick,"aria-label":this.toggleCoAuthorsText,disabled:!0===this.props.isCommitting},be.createElement(si,{symbol:Ek}))}onDescriptionFieldRef=e=>{this.descriptionComponent=e};onDescriptionTextAreaScroll=()=>{this.descriptionTextAreaScrollDebounceId=null;const e=this.descriptionTextArea,t=null!==e&&e.scrollTop+e.offsetHeight<e.scrollHeight;this.state.descriptionObscured!==t&&this.setState({descriptionObscured:t})};onDescriptionTextAreaRef=e=>{if(e){const t=()=>{null!==this.descriptionTextAreaScrollDebounceId&&(cancelAnimationFrame(this.descriptionTextAreaScrollDebounceId),this.descriptionTextAreaScrollDebounceId=null),this.descriptionTextAreaScrollDebounceId=requestAnimationFrame(this.onDescriptionTextAreaScroll)};e.addEventListener("input",t),e.addEventListener("scroll",t)}this.descriptionTextArea=e};onSummaryInputRef=e=>{this.summaryTextInput=e};onFocusContainerClick=e=>{this.descriptionComponent&&this.descriptionComponent.focus()};get isActionBarEnabled(){return this.isCoAuthorInputEnabled}renderActionBar(){if(!this.isCoAuthorInputEnabled)return null;const e=Vr()("action-bar",{disabled:!0===this.props.isCommitting});return be.createElement("div",{className:e},this.renderCoAuthorToggleButton())}renderAmendCommitNotice(){const{commitToAmend:e}=this.props;return null!==e?be.createElement(wE,{icon:JS.Information},"您的更改将修改 ",be.createElement("strong",null,"最近提交"),"."," ",be.createElement(CE,{onClick:this.props.onStopAmending},"停止修改")," ","将这些更改作为新提交。"):null}renderBranchProtectionsRepoRulesCommitWarning(){const{showNoWriteAccess:e,showBranchProtected:t,repoRulesInfo:n,aheadBehind:r,repository:i,branch:o}=this.props,{repoRuleBranchNameFailures:s,repoRulesEnabled:a}=this.state,l=new Map;let c=null;if(a){null===r&&null!==o&&(!0===n.creationRestricted||"fail"===s.status?l.set("publish",!0):"bypass"===n.creationRestricted||"bypass"===s.status?l.set("publish","bypass"):l.set("publish",!1)),l.set("commitSigning",n.signedCommitsRequired),l.set("basic",n.basicCommitWarning);for(const e of l)if(!0===e[1]){c=e[0];break}if(null===c)for(const e of l)if("bypass"===e[1]){c=e[0];break}}if(e)return be.createElement(wE,{icon:JS.Warning},"您没有写入权限 ",be.createElement("strong",null,i.name),". 想要"," ",be.createElement(CE,{onClick:this.props.onShowCreateForkDialog},"创建分支"),"?");if(t)return null===o?null:be.createElement(wE,{icon:JS.Warning},be.createElement("strong",null,o)," 是受保护的分支。想要"," ",be.createElement(CE,{onClick:this.onSwitchBranch},"交换分支"),"?");if("publish"===c){const e="bypass"===l.get("publish");return be.createElement(wE,{icon:e?JS.Warning:JS.Error},"The branch name ",be.createElement("strong",null,o)," fails"," ",be.createElement($E,{repository:i.gitHubRepository,branch:o},"one or more rules")," ","that ",e?"would":"will"," prevent it from being published",e&&", but you can bypass them. Proceed with caution!",!e&&be.createElement(be.Fragment,null,". 想要"," ",be.createElement(CE,{onClick:this.onSwitchBranch},"交换分支"),"?"))}if("commitSigning"===c){const e="bypass"===n.signedCommitsRequired;return be.createElement(wE,{icon:e?JS.Warning:JS.Error},be.createElement($E,{repository:i.gitHubRepository,branch:o},"One or more rules")," ","apply to the branch ",be.createElement("strong",null,o)," that require signed commits",e&&", but you can bypass them. Proceed with caution!",!e&&"."," ",be.createElement(CE,{uri:"https://docs.github.com/authentication/managing-commit-signature-verification/signing-commits"},"Learn more about commit signing."))}if("basic"===c){const e="bypass"===n.basicCommitWarning;return be.createElement(wE,{icon:e?JS.Warning:JS.Error},be.createElement($E,{repository:i.gitHubRepository,branch:o},"One or more rules")," ","apply to the branch ",be.createElement("strong",null,o)," 那"," ",e?"would":"will"," prevent pushing",e&&", but you can bypass them. Proceed with caution!",!e&&be.createElement(be.Fragment,null,". 想要"," ",be.createElement(CE,{onClick:this.onSwitchBranch},"交换分支"),"?"))}return null}renderRuleFailurePopover(){const{branch:e,repository:t}=this.props;if(e&&t.gitHubRepository&&this.state.repoRulesEnabled&&"pass"!==this.state.repoRuleCommitMessageFailures.status)return be.createElement(eE,{anchor:this.summaryTextInput,anchorPosition:XS.Right,decoration:ZS.Balloon,minHeight:200,trapFocus:!1,ariaLabelledby:"commit-message-rule-failure-popover-header",onClickOutside:this.closeRuleFailurePopover},be.createElement("h3",{id:"commit-message-rule-failure-popover-header"},"Commit Message Rule Failures"),be.createElement(qE,{repository:t.gitHubRepository,branch:e,failures:this.state.repoRuleCommitMessageFailures,leadingText:"This commit message"}))}toggleRuleFailurePopover=()=>{this.setState({isRuleFailurePopoverOpen:!this.state.isRuleFailurePopoverOpen})};closeRuleFailurePopover=()=>{this.setState({isRuleFailurePopoverOpen:!1})};onSwitchBranch=()=>{this.props.onShowFoldout({type:je.Branch})};getButtonVerb(){const{isCommitting:e,commitToAmend:t}=this.props;return null!==t?e?"修改中":"修改":e?"提交中":"Commit"}getCommittingButtonText(){const{branch:e}=this.props,t=this.getButtonVerb();return null===e?t:be.createElement(be.Fragment,null,t," 到 ",be.createElement("strong",null,e))}getCommittingButtonTitle(){const{branch:e}=this.props,t=this.getButtonVerb();return null===e?t:`${t} to ${e}`}getButtonText(){const{commitToAmend:e,commitButtonText:t}=this.props;return t||(null!==e?this.getButtonTitle():this.getCommittingButtonText())}getButtonTitle(){const{commitToAmend:e,commitButtonText:t}=this.props;return t||(null!==e?`${this.getButtonVerb()} 上次提交`:this.getCommittingButtonTitle())}getButtonTooltip(e){return e?this.getButtonTitle():vk(this.summaryOrPlaceholder)?"提交时需要提交摘要":!this.props.anyFilesSelected&&this.props.anyFilesAvailable?"请选择一个或多个要提交的文件":this.props.isCommitting?"正在提交更改…":void 0}renderSubmitButton(){const{isCommitting:e}=this.props,t=vk(this.summaryOrPlaceholder),n=(this.canCommit()||this.canAmend())&&!e&&!t,r=e?be.createElement(hE,null):void 0,i=this.getButtonTooltip(n),o=this.getButtonText();return be.createElement(ii,{type:"submit",className:"commit-button",onClick:this.onSubmit,disabled:!n,tooltip:i,onlyShowTooltipWhenOverflowed:n},be.createElement(be.Fragment,null,r,o))}renderSummaryLengthHint(){return be.createElement(Sk,{delay:0,tooltip:be.createElement(be.Fragment,null,be.createElement("div",{className:"title"},"优秀的提交摘要要精简"),be.createElement("div",{className:"description"},"在描述字段中放置额外信息。")),ariaLiveMessage:"优秀的提交摘要要精简. 在描述字段中放置额外信息。",direction:Zr.NORTH,className:"length-hint",tooltipClassName:"length-hint-tooltip",ariaLabel:"Open Summary Length Info"},be.createElement(si,{symbol:qi}))}renderRepoRuleCommitMessageFailureHint(){if("pass"===this.state.repoRuleCommitMessageFailures.status)return null;const e="bypass"===this.state.repoRuleCommitMessageFailures.status;let t,n="";return e?(t="Warning",n=", but you can bypass them"):t="Error",be.createElement("button",{id:"commit-message-failure-hint",className:"commit-message-failure-hint button-component","aria-label":`${t}: Commit message fails repository rules${n}. View details.`,"aria-haspopup":"dialog","aria-expanded":this.state.isRuleFailurePopoverOpen,onClick:this.toggleRuleFailurePopover},be.createElement(si,{symbol:e?ai:ao,className:e?"warning-icon":"error-icon"}))}render(){const e=Vr()("commit-message-component",{"with-action-bar":this.isActionBarEnabled,"with-co-authors":this.isCoAuthorInputVisible}),t=Vr()("description-field",{"with-overflow":this.state.descriptionObscured}),n=this.state.repoRulesEnabled&&"pass"!==this.state.repoRuleCommitMessageFailures.status,r=this.props.showCommitLengthWarning&&!n&&this.state.summary.length>50,i=Vr()("summary",{"with-trailing-icon":n||r}),o=Vr()("summary-field","nudge-arrow",{"nudge-arrow-left":!0===this.props.shouldNudge}),s=n?this.COMMIT_MSG_ERROR_BTN_ID:void 0,{placeholder:a,isCommitting:l,commitSpellcheckEnabled:c}=this.props;return be.createElement("div",{role:"group","aria-label":"Create commit",className:e,onContextMenu:this.onContextMenu,onKeyDown:this.onKeyDown},be.createElement("div",{className:i},this.renderAvatar(),be.createElement(rE,{required:!0,screenReaderLabel:"Commit summary",className:o,placeholder:a,value:this.state.summary,onValueChanged:this.onSummaryChanged,onElementRef:this.onSummaryInputRef,autocompletionProviders:this.state.commitMessageAutocompletionProviders,"aria-describedby":s,onContextMenu:this.onAutocompletingInputContextMenu,readOnly:!0===l,spellcheck:c}),n&&this.renderRepoRuleCommitMessageFailureHint(),r&&this.renderSummaryLengthHint()),this.state.isRuleFailurePopoverOpen&&this.renderRuleFailurePopover(),be.createElement(Vs,{className:"description-focus-container",onClick:this.onFocusContainerClick},be.createElement(nE,{className:t,screenReaderLabel:"Commit description",placeholder:"描述",value:this.state.description||"",onValueChanged:this.onDescriptionChanged,autocompletionProviders:this.state.commitMessageAutocompletionProviders,"aria-describedby":s,ref:this.onDescriptionFieldRef,onElementRef:this.onDescriptionTextAreaRef,onContextMenu:this.onAutocompletingInputContextMenu,readOnly:!0===l,spellcheck:c}),this.renderActionBar()),this.renderCoAuthorInput(),this.renderAmendCommitNotice(),this.renderBranchProtectionsRepoRulesCommitWarning(),this.renderSubmitButton(),be.createElement("span",{className:"sr-only","aria-live":"polite","aria-atomic":"true"},this.state.isCommittingStatusMessage))}}function Tk(e,t){if(e.length<=t)return e;if(t<=0)return"";if(1===t)return"…";const n=(t-1)/2;return`${e.substring(0,Math.floor(n))}…${e.substring(e.length-Math.ceil(n))}`}function Dk(t,n){if((n=void 0===n?t.length:n)<=0)return{normalizedPath:t,directoryText:"",fileText:"",length:n};const{normalizedFileName:r,normalizedDirectory:i}=function(t){t=t.endsWith(e.sep)?t.substring(0,t.length-1):t;const n=e.basename(t);return{normalizedFileName:n,normalizedDirectory:t.substring(0,t.length-n.length)}}(t);if(n>=t.length)return{normalizedPath:t,directoryText:i,fileText:r,length:n};const o=function(t,n){if(t.length<=n)return t;if(n<=0)return"";if(1===n)return"…";const r=t.lastIndexOf(e.sep);if(-1===r)return Tk(t,n);const i=t.length-r-1;return i+2>n?Tk(t,n):`${t.substring(0,n-i-2)}…${t.substring(r)}`}(t,n);let s=0;for(let t=0;t<o.length&&t<i.length;t++){const n=i[t],r=o[t];if(n!==r){if("…"===r){s++;const n=t+1;o.length>n&&o[n]===e.sep&&s++}break}s++}const a=o.substring(s);return{normalizedPath:t,directoryText:o.substring(0,s),fileText:a,length:n}}function Ak(t,n){return{longestFit:0,shortestNonFit:void 0,availableWidth:void 0,fullTextWidth:void 0,...Dk(e.normalize(t),n)}}class Pk extends be.PureComponent{pathElementRef=ri();pathInnerElement=null;constructor(e){super(e),this.state=Ak(e.path)}componentWillReceiveProps(e){e.path!==this.props.path&&this.setState(Ak(e.path))}componentDidMount(){this.resizeIfNecessary(),document.addEventListener("dialog-show",this.onDialogShow)}componentWillUnmount(){document.removeEventListener("dialog-show",this.onDialogShow)}componentDidUpdate(){this.resizeIfNecessary()}onDialogShow=e=>{const t=e.target;t instanceof Element&&t.contains(this.pathElementRef.current)&&this.resizeIfNecessary()};onPathInnerElementRef=e=>{this.pathInnerElement=e};render(){const e=this.state.directoryText&&this.state.directoryText.length?be.createElement("span",{className:"dirname"},this.state.directoryText):null,t=this.state.length<this.state.normalizedPath.length;return be.createElement("div",{className:"path-text-component",ref:this.pathElementRef},be.createElement("span",{ref:this.onPathInnerElementRef},e,be.createElement("span",{className:"filename"},this.state.fileText)),t&&be.createElement(Jr,{target:this.pathElementRef,interactive:!0,className:"selectable"},this.state.normalizedPath))}resizeIfNecessary(){if(!this.pathElementRef.current||!this.pathInnerElement)return;const e=void 0!==this.props.availableWidth?this.props.availableWidth:this.pathElementRef.current.getBoundingClientRect().width,t=Math.max(e,0);if(void 0!==this.state.fullTextWidth&&this.state.fullTextWidth<=t)return this.state.length===this.state.normalizedPath.length?void(t!==this.state.availableWidth&&this.setState({...this.state,availableWidth:t})):void this.setState({...this.state,...Dk(this.state.normalizedPath),availableWidth:t});if(void 0!==this.state.availableWidth&&this.state.availableWidth!==t){const e=Ak(this.props.path,this.state.length);return void(t<this.state.availableWidth?this.setState({...e,fullTextWidth:this.state.fullTextWidth,shortestNonFit:this.state.shortestNonFit,availableWidth:t}):t>this.state.availableWidth&&this.setState({...e,fullTextWidth:this.state.fullTextWidth,longestFit:this.state.longestFit,availableWidth:t}))}if(0===t)return void(0!==this.state.length&&this.setState({...this.state,...Dk(this.state.normalizedPath,0),availableWidth:t,longestFit:0,shortestNonFit:1}));const n=this.pathInnerElement.getBoundingClientRect().width,r=this.state.length===this.state.normalizedPath.length?n:this.state.fullTextWidth,i=0===n?.5:t/n;if(n<=t){if(this.state.length===this.state.normalizedPath.length)return void this.setState({...this.state,availableWidth:t,fullTextWidth:r});{const e=this.state.length,o=void 0!==this.state.shortestNonFit?this.state.shortestNonFit-1:this.state.normalizedPath.length,s=e+1;if(s>=o)return void this.setState({...this.state,longestFit:e,availableWidth:t,fullTextWidth:r});if(t-n<3)return void this.setState({...this.state,longestFit:e,availableWidth:t,fullTextWidth:r});const a=lc(Math.floor(this.state.length*i),s,o);this.setState({...this.state,...Dk(this.state.normalizedPath,a),longestFit:e,availableWidth:t,fullTextWidth:r})}}else{const e=this.state.length,n=e-1,o=this.state.longestFit||0,s=lc(Math.floor(this.state.length*i),o,n);this.setState({...this.state,...Dk(this.state.normalizedPath,s),shortestNonFit:e,availableWidth:t,fullTextWidth:r})}}}class Ik extends be.Component{render(){const e={className:"path-label-component"},{status:t}=this.props,n=this.props.availableWidth;if(t.kind===Io.Renamed||t.kind===Io.Copied){const r=n?n/2-10:void 0;return be.createElement("span",{...e,"aria-hidden":this.props.ariaHidden},be.createElement(Pk,{path:t.oldPath,availableWidth:r}),be.createElement(si,{className:"rename-arrow",symbol:ci}),be.createElement(Pk,{path:this.props.path,availableWidth:r}))}return be.createElement("span",{...e,"aria-hidden":this.props.ariaHidden},be.createElement(Pk,{path:this.props.path,availableWidth:n}))}}class _k extends be.Component{handleCheckboxChange=e=>{const t=e.currentTarget.checked;this.props.onIncludeChanged(this.props.file.path,t)};get checkboxValue(){return!0===this.props.include?jC.On:!1===this.props.include?jC.Off:jC.Mixed}render(){const{file:e,availableWidth:t,disableSelection:n,checkboxTooltip:r,focused:i}=this.props,{status:o,path:s}=e,a=Yl(o),l=t-20-20-5-16,c=!0===this.props.include?"included":void 0===this.props.include?"partially included":"not included",u=`${s} ${Yl(o)} ${c}`;return be.createElement("div",{className:"file"},be.createElement(Xo,{tooltip:r,direction:Zr.EAST,tagName:"div"},be.createElement(GC,{tabIndex:-1,value:this.checkboxValue,onChange:this.handleCheckboxChange,disabled:n})),be.createElement(Ik,{path:s,status:o,availableWidth:l,ariaHidden:!0}),be.createElement(pC,{message:u}),be.createElement(Xo,{ancestorFocused:i,openOnFocus:!0,tooltip:a,direction:Zr.EAST},be.createElement(si,{symbol:Vo(o),className:"status status-"+a.toLowerCase()})))}}class Nk extends be.Component{onSubmit=async()=>{const{rebaseConflictState:e}=this.props;await this.props.dispatcher.continueRebase("Rebase",this.props.repository,this.props.workingDirectory,e)};render(){const{manualResolutions:e}=this.props.rebaseConflictState;let t=!0,n="Continue rebase";nc(this.props.workingDirectory,e).length>0&&(n="Resolve all conflicts before continuing",t=!1);const r=t&&!this.props.isCommitting,i=this.props.isCommitting?be.createElement(hE,null):void 0,o=this.props.hasUntrackedChanges?be.createElement("div",{className:"warning-untracked-files"},"Untracked files will be excluded"):void 0;return be.createElement("div",{id:"continue-rebase"},be.createElement(ii,{type:"submit",className:"commit-button",onClick:this.onSubmit,disabled:!r,tooltip:n},i,be.createElement("span",null,void 0!==i?"Rebasing":"Continue rebase")),o)}}const Ok={w:16,h:16,d:"M10.5 1.286h-9a.214.214 0 0 0-.214.214v9a.214.214 0 0 0 .214.214h9a.214.214 0 0 0 .214-.214v-9a.214.214 0 0 0-.214-.214zM1.5 0h9A1.5 1.5 0 0 1 12 1.5v9a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 0 10.5v-9A1.5 1.5 0 0 1 1.5 0zm5.712 7.212a1.714 1.714 0 1 1-2.424-2.424 1.714 1.714 0 0 1 2.424 2.424zM2.015 12.71c.102.729.728 1.29 1.485 1.29h9a1.5 1.5 0 0 0 1.5-1.5v-9a1.5 1.5 0 0 0-1.29-1.485v1.442a.216.216 0 0 1 .004.043v9a.214.214 0 0 1-.214.214h-9a.216.216 0 0 1-.043-.004H2.015zm2 2c.102.729.728 1.29 1.485 1.29h9a1.5 1.5 0 0 0 1.5-1.5v-9a1.5 1.5 0 0 0-1.29-1.485v1.442a.216.216 0 0 1 .004.043v9a.214.214 0 0 1-.214.214h-9a.216.216 0 0 1-.043-.004H4.015z",fr:"evenodd"},Mk=".gitignore";function Bk(e,t){if(null!==t){if(0===e.files.length)return jC.Off;const t=e.files.every((e=>e.status.kind===Io.Untracked));if(t)return jC.Off;const n=e.files.every((e=>e.status.kind!==Io.Untracked));return n?jC.On:jC.Mixed}const{includeAll:n}=e;return!0===n?jC.On:!1===n?jC.Off:jC.Mixed}function Fk(e){const t=e.selectedFileIDs,n=[];for(const r of t){const t=e.workingDirectory.findFileIndexByID(r);-1!==t&&n.push(t)}return n}class Lk extends be.Component{headerRef=ri();includeAllCheckBoxRef=be.createRef();constructor(e){super(e),this.state={selectedRows:Fk(e),focusedRow:null}}componentWillReceiveProps(e){js(e.selectedFileIDs,this.props.selectedFileIDs)&&js(e.workingDirectory.files,this.props.workingDirectory.files)||this.setState({selectedRows:Fk(e)})}onIncludeAllChanged=e=>{const t=e.currentTarget.checked;this.props.onSelectAll(t)};renderRow=e=>{const{workingDirectory:t,rebaseConflictState:n,isCommitting:r,onIncludeChanged:i,availableWidth:o}=this.props,s=t.files[e],a=s.selection.getSelectionType(),{submoduleStatus:l}=s.status,c=void 0!==l&&s.status.kind===Io.Modified&&!l.commitChanged,u=void 0!==l&&(l.commitChanged||s.status.kind===Io.New)&&(l.modifiedChanges||l.untrackedChanges),h=a===To.All||a!==To.None&&null,p=!c&&(null!==n?s.status.kind!==Io.Untracked:h),d=r||null!==n||c,m=c?"This submodule change cannot be added to a commit in this repository because it contains changes that have not been committed.":u?"Only changes that have been committed within the submodule will be added to this repository. You need to commit any other modified or untracked changes in the submodule before including them in this repository.":void 0;return be.createElement(_k,{file:s,include:u&&p?null:p,key:s.id,onIncludeChanged:i,availableWidth:o,disableSelection:d,checkboxTooltip:m,focused:this.state.focusedRow===e})};onDiscardAllChanges=()=>{this.props.onDiscardChangesFromFiles(this.props.workingDirectory.files,!0)};onStashChanges=()=>{this.props.dispatcher.createStashForCurrentBranch(this.props.repository)};onDiscardChanges=e=>{const t=this.props.workingDirectory;if(1===e.length){const n=t.files.find((t=>t.path===e[0]));null!=n&&this.props.onDiscardChanges(n)}else{const n=new Array;if(e.forEach((e=>{const r=t.files.find((t=>t.path===e));null!=r&&n.push(r)})),n.length>0){const e=n.length===t.files.length;this.props.onDiscardChangesFromFiles(n,e)}}};getDiscardChangesMenuItemLabel=e=>{const t=1===e.length?"Discard Changes":`Discard ${e.length} Selected Changes`;return this.props.askForConfirmationOnDiscardChanges?`${t}…`:t};onContextMenu=e=>{if(e.preventDefault(),null!==this.props.rebaseConflictState||this.props.isCommitting)return;const t=this.props.workingDirectory.files.length>0,n=null!==this.props.stashEntry,r=null!==this.props.conflictState||Ql(this.props.workingDirectory);lC([{label:"放弃所有更改…",action:this.onDiscardAllChanges,enabled:t},{label:n?"Stash All Changes…":"Stash All Changes",action:this.onStashChanges,enabled:t&&null!==this.props.branch&&!r}])};getDiscardChangesMenuItem=e=>({label:this.getDiscardChangesMenuItemLabel(e),action:()=>this.onDiscardChanges(e)});getCopyPathMenuItem=t=>({label:Sh,action:()=>{const n=e.join(this.props.repository.path,t.path);m.clipboard.writeText(n)}});getCopyRelativePathMenuItem=t=>({label:Eh,action:()=>m.clipboard.writeText(e.normalize(t.path))});getCopySelectedPathsMenuItem=t=>({label:"复制路径",action:()=>{const n=t.map((t=>e.join(this.props.repository.path,t.path)));m.clipboard.writeText(n.join(Jt.EOL))}});getCopySelectedRelativePathsMenuItem=t=>({label:"复制相对路径",action:()=>{const n=t.map((t=>e.normalize(t.path)));m.clipboard.writeText(n.join(Jt.EOL))}});getRevealInFileManagerMenuItem=e=>({label:Rh,action:()=>it(this.props.repository,e.path),enabled:e.status.kind!==Io.Deleted});getOpenInExternalEditorMenuItem=(e,t)=>{const{externalEditorLabel:n}=this.props;return{label:n?`打开于 ${n}`:kh,action:()=>{this.props.onOpenItemInExternalEditor(e.path)},enabled:t}};getDefaultContextMenu(t){const{id:n,path:r,status:i}=t,{workingDirectory:o,selectedFileIDs:s}=(e.extname(r),this.props),a=new Array,l=new Array,c=new Set,u=t=>{const n=o.findFileWithID(t);if(n){a.push(n),l.push(n.path);const t=e.extname(n.path);t.length&&c.add(t)}};s.includes(n)?s.forEach(u):u(n);const h=[this.getDiscardChangesMenuItem(l),{type:"separator"}];1===l.length?h.push({label:"Ignore file (添加到 .gitignore)",action:()=>this.props.onIgnoreFile(r),enabled:e.basename(r)!==Mk}):l.length>1&&h.push({label:`Ignore ${l.length} Selected Files (Add to .gitignore)`,action:()=>{this.props.onIgnoreFile(l.filter((t=>e.basename(t)!==Mk)))},enabled:l.some((t=>e.basename(t)!==Mk))}),Array.from(c).slice(0,5).forEach((e=>{h.push({label:`Ignore All ${e} Files (Add to .gitignore)`,action:()=>this.props.onIgnorePattern(`*${e}`)})})),l.length>1?h.push({type:"separator"},{label:"包含所选文件",action:()=>{a.map((e=>this.props.onIncludeChanged(e.path,!0)))}},{label:"排除所选文件",action:()=>{a.map((e=>this.props.onIncludeChanged(e.path,!1)))}},{type:"separator"},this.getCopySelectedPathsMenuItem(a),this.getCopySelectedRelativePathsMenuItem(a)):h.push({type:"separator"},this.getCopyPathMenuItem(t),this.getCopyRelativePathMenuItem(t));const p=i.kind!==Io.Deleted;return h.push({type:"separator"},this.getRevealInFileManagerMenuItem(t),this.getOpenInExternalEditorMenuItem(t,p),{label:Th,action:()=>this.props.onOpenItem(r),enabled:p&&!0}),h}getRebaseContextMenu(t){const{path:n,status:r}=t,i=(e.extname(n),new Array);t.status.kind===Io.Untracked&&i.push(this.getDiscardChangesMenuItem([t.path]),{type:"separator"});const o=r.kind!==Io.Deleted;return i.push(this.getCopyPathMenuItem(t),this.getCopyRelativePathMenuItem(t),{type:"separator"},this.getRevealInFileManagerMenuItem(t),this.getOpenInExternalEditorMenuItem(t,o),{label:Th,action:()=>this.props.onOpenItem(n),enabled:o&&!0}),i}onItemContextMenu=(e,t)=>{const{workingDirectory:n}=this.props,r=n.files[e];this.props.isCommitting||(t.preventDefault(),lC(null===this.props.rebaseConflictState?this.getDefaultContextMenu(r):this.getRebaseContextMenu(r)))};getPlaceholderMessage(t,n){if(!n)return"摘要(必填)";const r=t[0],i=(0,e.basename)(r.path);switch(r.status.kind){case Io.New:case Io.Untracked:return`创建 ${i}`;case Io.Deleted:return`删除 ${i}`;default:return`更新 ${i}`}}onScroll=(e,t)=>{this.props.onChangesListScrolled(e)};renderCommitMessageForm=()=>{const{rebaseConflictState:e,workingDirectory:t,repository:n,repositoryAccount:r,dispatcher:i,isCommitting:o,commitToAmend:s,currentBranchProtected:a,currentRepoRulesInfo:l}=this.props;if(null!==e){const r=t.files.some((e=>e.status.kind===Io.Untracked));return be.createElement(Nk,{dispatcher:i,repository:n,rebaseConflictState:e,workingDirectory:t,isCommitting:o,hasUntrackedChanges:r})}const c=t.files.length,u=Bk(t,e),h=c>0&&u!==jC.Off,p=t.files.filter((e=>e.selection.getSelectionType()!==To.None)),d=1===p.length&&!n.isTutorialRepository,m=null===this.props.repository.gitHubRepository||xr(this.props.repository.gitHubRepository);return be.createElement(xk,{onCreateCommit:this.props.onCreateCommit,branch:this.props.branch,mostRecentLocalCommit:this.props.mostRecentLocalCommit,commitAuthor:this.props.commitAuthor,dispatcher:this.props.dispatcher,isShowingModal:this.props.isShowingModal,isShowingFoldout:this.props.isShowingFoldout,anyFilesSelected:h,anyFilesAvailable:c>0,repository:n,repositoryAccount:r,commitMessage:this.props.commitMessage,focusCommitMessage:this.props.focusCommitMessage,autocompletionProviders:this.props.autocompletionProviders,isCommitting:o,commitToAmend:s,showCoAuthoredBy:this.props.showCoAuthoredBy,coAuthors:this.props.coAuthors,placeholder:this.getPlaceholderMessage(p,d),prepopulateCommitSummary:d,key:n.id,showBranchProtected:c>0&&a,repoRulesInfo:l,aheadBehind:this.props.aheadBehind,showNoWriteAccess:c>0&&!m,shouldNudge:this.props.shouldNudgeToCommit,commitSpellcheckEnabled:this.props.commitSpellcheckEnabled,showCommitLengthWarning:this.props.showCommitLengthWarning,onCoAuthorsUpdated:this.onCoAuthorsUpdated,onShowCoAuthoredByChanged:this.onShowCoAuthoredByChanged,onConfirmCommitWithUnknownCoAuthors:this.onConfirmCommitWithUnknownCoAuthors,onPersistCommitMessage:this.onPersistCommitMessage,onCommitMessageFocusSet:this.onCommitMessageFocusSet,onRefreshAuthor:this.onRefreshAuthor,onShowPopup:this.onShowPopup,onShowFoldout:this.onShowFoldout,onCommitSpellcheckEnabledChanged:this.onCommitSpellcheckEnabledChanged,onStopAmending:this.onStopAmending,onShowCreateForkDialog:this.onShowCreateForkDialog})};onCoAuthorsUpdated=e=>this.props.dispatcher.setCoAuthors(this.props.repository,e);onShowCoAuthoredByChanged=e=>{const{dispatcher:t,repository:n}=this.props;t.setShowCoAuthoredBy(n,e)};onConfirmCommitWithUnknownCoAuthors=(e,t)=>{const{dispatcher:n}=this.props;n.showUnknownAuthorsCommitWarning(e,t)};onRefreshAuthor=()=>this.props.dispatcher.refreshAuthor(this.props.repository);onCommitMessageFocusSet=()=>this.props.dispatcher.setCommitMessageFocus(!1);onPersistCommitMessage=e=>this.props.dispatcher.setCommitMessage(this.props.repository,e);onShowPopup=e=>this.props.dispatcher.showPopup(e);onShowFoldout=e=>this.props.dispatcher.showFoldout(e);onCommitSpellcheckEnabledChanged=e=>this.props.dispatcher.setCommitSpellcheckEnabled(e);onStopAmending=()=>this.props.dispatcher.stopAmendingRepository(this.props.repository);onShowCreateForkDialog=()=>{_r(this.props.repository)&&this.props.dispatcher.showCreateForkDialog(this.props.repository)};onStashEntryClicked=()=>{const{isShowingStashEntry:e,dispatcher:t,repository:n}=this.props;e?(t.selectWorkingDirectoryFiles(n),t.incrementMetric("noActionTakenOnStashCount")):(t.selectStashedFile(n),t.incrementMetric("stashViewCount"))};renderStashedChanges(){if(null===this.props.stashEntry)return null;const e=Vr()("stashed-changes-button",this.props.isShowingStashEntry?"selected":null);return be.createElement("button",{className:e,onClick:this.onStashEntryClicked,tabIndex:0},be.createElement(si,{className:"stack-icon",symbol:Ok}),be.createElement("div",{className:"text"},"暂存的更改"),be.createElement(si,{symbol:fi}))}onRowDoubleClick=e=>{const t=this.props.workingDirectory.files[e];this.props.onOpenItemInExternalEditor(t.path)};onRowKeyDown=(e,t)=>{!this.props.isCommitting||"Enter"!==t.key&&" "!==t.key||t.preventDefault()};focus(){this.includeAllCheckBoxRef.current?.focus()}render(){const{workingDirectory:e,rebaseConflictState:t,isCommitting:n}=this.props,{files:r}=e,i=1===r.length?"文件":"文件",o=`${r.length} 项变更${i}`,s=r.filter((e=>e.selection.getSelectionType()!==To.None)).length,a=1===r.length?"文件":"文件",l=`${s}/${r.length} 项变更${a} included`,c=Bk(e,t),u=0===r.length||n||null!==t;return be.createElement(be.Fragment,null,be.createElement("div",{className:"changes-list-container file-list"},be.createElement("div",{className:"header",onContextMenu:this.onContextMenu,ref:this.headerRef},be.createElement(Xo,{tooltip:l,direction:Zr.NORTH,openOnFocus:!0},be.createElement(GC,{ref:this.includeAllCheckBoxRef,label:o,value:c,onChange:this.onIncludeAllChanged,disabled:u,ariaDescribedBy:"changesDescription"})),be.createElement("div",{className:"sr-only",id:"changesDescription"},l)),be.createElement(sC,{id:"changes-list",rowCount:r.length,rowHeight:29,rowRenderer:this.renderRow,selectedRows:this.state.selectedRows,selectionMode:"multi",onSelectionChanged:this.props.onFileSelectionChanged,invalidationProps:{workingDirectory:e,isCommitting:n,focusedRow:this.state.focusedRow},onRowClick:this.props.onRowClick,onRowDoubleClick:this.onRowDoubleClick,onRowKeyboardFocus:this.onRowFocus,onRowBlur:this.onRowBlur,onScroll:this.onScroll,setScrollTop:this.props.changesListScrollTop,onRowKeyDown:this.onRowKeyDown,onRowContextMenu:this.onItemContextMenu,ariaLabel:o})),this.renderStashedChanges(),this.renderCommitMessageForm())}onRowFocus=e=>{this.setState({focusedRow:e})};onRowBlur=e=>{this.state.focusedRow===e&&this.setState({focusedRow:null})}}function Hk(e,t,n,r){const i=new fk(e,t);return("string"==typeof r?i.tokenize(r):r).map(((e,t)=>{switch(e.kind){case dk.Emoji:return be.createElement("img",{key:t,alt:e.text,className:"emoji",src:e.path});case dk.Link:if(!1!==n){const n=e.text!==e.url?e.url:void 0;return be.createElement(CE,{key:t,uri:e.url,title:n},e.text)}return be.createElement("span",{key:t},e.text);case dk.Text:return be.createElement("span",{key:t},e.text);default:return et(0,`Unknown token type: ${e}`)}}))}class Uk extends be.Component{getElements=mr(Hk);getTitle=mr((e=>"string"==typeof e?e:e.map((e=>e.text)).join("")));containerRef=ri();resizeObserver;resizeDebounceId=null;lastKnownWidth=null;constructor(e){super(e),this.state={overflowed:!1},this.containerRef.subscribe(this.onContainerRef),this.resizeObserver=new ResizeObserver((e=>{const t=e[0].contentRect.width;this.lastKnownWidth!==t&&(this.lastKnownWidth=t,null!==this.resizeDebounceId&&(cancelAnimationFrame(this.resizeDebounceId),this.resizeDebounceId=null),this.resizeDebounceId=requestAnimationFrame((e=>this.onResized())))}))}onContainerRef=e=>{null!==e?(this.resizeObserver.observe(e),this.onResized(e)):this.resizeObserver.disconnect()};onResized=e=>{(e=e??this.containerRef.current??void 0)&&e.scrollWidth>e.clientWidth?this.setState({overflowed:!0}):this.setState({overflowed:!1})};render(){const{emoji:e,repository:t,renderUrlsAsLinks:n,text:r}=this.props;return 0===r.length?null:be.createElement("div",{ref:this.containerRef,className:this.props.className},this.state.overflowed&&be.createElement(Jr,{target:this.containerRef},this.getTitle(r)),this.getElements(e,t,n,r))}}const Wk=6e4,$k=36e5,zk=24*$k;function qk(e,t=!0){const n=e.getTime()-Date.now(),r=Math.abs(n),i=wt(e,{dateStyle:"full",timeStyle:"short"}),o=gu(n);return n>0&&r>Wk?{absoluteText:i,relativeText:wt(e,{dateStyle:"medium",timeStyle:"short"}),duration:r}:r<Wk?{absoluteText:i,relativeText:"此刻",duration:Wk-r}:r<$k?{absoluteText:i,relativeText:o,duration:Wk}:r<zk?{absoluteText:i,relativeText:o,duration:$k}:r<7*zk||t?{absoluteText:i,relativeText:o,duration:6*$k}:{absoluteText:i,relativeText:wt(e,{dateStyle:"medium"})}}class jk extends be.Component{timer=null;constructor(e){super(e),this.state={absoluteText:"",relativeText:""}}clearTimer(){this.timer&&(window.clearTimeout(this.timer),this.timer=null)}updateAndSchedule(e,t,n){this.clearTimer(),this.timer=window.setTimeout(this.updateFromScheduler,Math.min(n,2147483647)),this.setState({absoluteText:e,relativeText:t})}updateWithDate(e){const{onlyRelative:t}=this.props,{absoluteText:n,relativeText:r,duration:i}=qk(e,t);void 0!==i?this.updateAndSchedule(n,r,i):this.setState({absoluteText:n,relativeText:r})}updateFromScheduler=()=>{this.updateWithDate(this.props.date)};componentWillReceiveProps(e){this.props.date!==e.date&&this.updateWithDate(e.date)}componentWillMount(){this.updateWithDate(this.props.date)}componentWillUnmount(){this.clearTimer()}shouldComponentUpdate(e,t){return e.date!==this.props.date||t.absoluteText!==this.state.absoluteText||t.relativeText!==this.state.relativeText}render(){return be.createElement(Xo,{className:this.props.className,tooltip:this.state.absoluteText},this.state.relativeText)}}class Gk extends be.Component{render(){const e=this.props.isPushPullFetchInProgress||this.props.isCommitting,t=e?"更新仓库时禁用撤消":void 0,n=this.props.commit.author.date;return be.createElement("div",{id:"undo-commit",role:"group","aria-label":"撤消提交"},be.createElement("div",{className:"commit-info"},be.createElement("div",{className:"ago"},"提交于",be.createElement(jk,{date:n})),be.createElement(Uk,{emoji:this.props.emoji,className:"summary",text:this.props.commit.summary,renderUrlsAsLinks:!1})),be.createElement("div",{className:"actions"},be.createElement(ii,{size:"small",disabled:e,onClick:this.props.onUndo,tooltip:t},"撤销")))}}async function Vk(e,t){if(!await rt.openExternal(`file://${e}`)){const n={name:"no-external-program",message:`Unable to open file ${e} in an external program. Please check you have a program associated with this file extension`};await t.postError(n)}}class Kk extends be.Component{autocompletionProviders=null;changesListRef=be.createRef();constructor(e){super(e),this.receiveProps(e)}componentWillReceiveProps(e){this.receiveProps(e)}receiveProps(e){null!==this.autocompletionProviders&&0!==this.props.emoji.size&&e.repository.hash===this.props.repository.hash&&e.accounts===this.props.accounts||(this.autocompletionProviders=uE(e.repository,e.dispatcher,e.emoji,e.issuesStore,e.gitHubUserStore,e.accounts))}onCreateCommit=async t=>{const{workingDirectory:n}=this.props.changes,r=await async function(t,n){const r=new Array,i=n.files.filter((e=>e.selection.getSelectionType()!==To.None));for(const n of i){const i=(0,e.join)(t.path,n.path);try{(await(0,y.stat)(i)).size>104857600&&r.push(n.path)}catch(e){log.debug(`Unable to get the file size for ${i}`,e)}}return r}(this.props.repository,n),i=await async function(e,t){const n=new Array;for(const r of t)await Kl(e,r)||n.push(r);return n}(this.props.repository,r);if(0!==i.length)return this.props.dispatcher.showPopup({type:nl.OversizedFiles,oversizedFiles:i,context:t,repository:this.props.repository}),!1;const o=n.files.filter((e=>Xl(e.status)&&e.selection.getSelectionType()===To.None));0===o.length&&(this.props.dispatcher.clearBanner(),this.props.dispatcher.incrementMetric("unguidedConflictedMergeCompletionCount"));const s=n.files.filter((e=>Xl(e.status)&&Zl(e.status)&&e.selection.getSelectionType()!==To.None));return s.length>0?(this.props.dispatcher.showPopup({type:nl.CommitConflictsWarning,files:s,repository:this.props.repository,context:t}),!1):this.props.dispatcher.commitIncludedChanges(this.props.repository,t)};onFileSelectionChanged=e=>{const t=e.map((e=>this.props.changes.workingDirectory.files[e]));this.props.dispatcher.selectWorkingDirectoryFiles(this.props.repository,t)};onIncludeChanged=(e,t)=>{const n=this.props.changes.workingDirectory.files.find((t=>t.path===e));n?this.props.dispatcher.changeFileIncluded(this.props.repository,n,t):console.error("unable to find working directory file to apply included change: "+e)};onSelectAll=e=>{this.props.dispatcher.changeIncludeAllFiles(this.props.repository,e)};onDiscardChanges=e=>{this.props.askForConfirmationOnDiscardChanges?this.props.dispatcher.showPopup({type:nl.ConfirmDiscardChanges,repository:this.props.repository,files:[e]}):this.props.dispatcher.discardChanges(this.props.repository,[e])};onDiscardChangesFromFiles=(e,t)=>{this.props.dispatcher.showPopup({type:nl.ConfirmDiscardChanges,repository:this.props.repository,showDiscardChangesSetting:!1,discardingAllChanges:t,files:e})};onIgnoreFile=e=>{this.props.dispatcher.appendIgnoreFile(this.props.repository,e)};onIgnorePattern=e=>{this.props.dispatcher.appendIgnoreRule(this.props.repository,e)};onOpenItem=t=>{Vk(e.join(this.props.repository.path,t),this.props.dispatcher)};onOpenItemInExternalEditor=e=>{this.props.onOpenInExternalEditor(e)};onToggleInclude(e){const t=this.props.changes.workingDirectory.files[e];if(!t)return void console.error("keyboard selection toggle despite no file - what?");const n=t.selection.getSelectionType();this.props.dispatcher.changeFileIncluded(this.props.repository,t,n===To.None)}onChangedItemClick=(e,t)=>{"keyboard"===t.kind&&(e instanceof Array?e.forEach((e=>this.onToggleInclude(e))):this.onToggleInclude(e))};onUndo=()=>{const e=this.props.mostRecentLocalCommit;e&&0===e.tags.length&&this.props.dispatcher.undoCommit(this.props.repository,e)};renderMostRecentLocalCommit(){const e=this.props.mostRecentLocalCommit;let t=null;return e&&0===e.tags.length&&null===this.props.commitToAmend&&(t=be.createElement(ze,{classNames:"undo",appear:!0,timeout:500},be.createElement(Gk,{isPushPullFetchInProgress:this.props.isPushPullFetchInProgress,commit:e,onUndo:this.onUndo,emoji:this.props.emoji,isCommitting:this.props.isCommitting}))),be.createElement(Ie,null,t)}renderUndoCommit=e=>null!==e?null:this.renderMostRecentLocalCommit();focus(){this.changesListRef.current?.focus()}render(){const{workingDirectory:e,commitMessage:t,showCoAuthoredBy:n,coAuthors:r,conflictState:i,selection:o,currentBranchProtected:s,currentRepoRulesInfo:a}=this.props.changes;let l=null;null!==i&&(l=Qe(i)?i:null);const c=o.kind===Ve.WorkingDirectory?o.selectedFileIDs:[],u=o.kind===Ve.Stash,h=Gl(this.props.accounts,this.props.repository);return be.createElement("div",{className:"panel",role:"tabpanel","aria-labelledby":"changes-tab"},be.createElement(Lk,{ref:this.changesListRef,dispatcher:this.props.dispatcher,repository:this.props.repository,repositoryAccount:h,workingDirectory:e,conflictState:i,mostRecentLocalCommit:this.props.mostRecentLocalCommit,rebaseConflictState:l,selectedFileIDs:c,onFileSelectionChanged:this.onFileSelectionChanged,onCreateCommit:this.onCreateCommit,onIncludeChanged:this.onIncludeChanged,onSelectAll:this.onSelectAll,onDiscardChanges:this.onDiscardChanges,askForConfirmationOnDiscardChanges:this.props.askForConfirmationOnDiscardChanges,onDiscardChangesFromFiles:this.onDiscardChangesFromFiles,onOpenItem:this.onOpenItem,onRowClick:this.onChangedItemClick,commitAuthor:this.props.commitAuthor,branch:this.props.branch,commitMessage:t,focusCommitMessage:this.props.focusCommitMessage,isShowingModal:this.props.isShowingModal,isShowingFoldout:this.props.isShowingFoldout,autocompletionProviders:this.autocompletionProviders,availableWidth:this.props.availableWidth,onIgnoreFile:this.onIgnoreFile,onIgnorePattern:this.onIgnorePattern,isCommitting:this.props.isCommitting,commitToAmend:this.props.commitToAmend,showCoAuthoredBy:n,coAuthors:r,externalEditorLabel:this.props.externalEditorLabel,onOpenItemInExternalEditor:this.onOpenItemInExternalEditor,onChangesListScrolled:this.props.onChangesListScrolled,changesListScrollTop:this.props.changesListScrollTop,stashEntry:this.props.changes.stashEntry,isShowingStashEntry:u,currentBranchProtected:s,shouldNudgeToCommit:this.props.shouldNudgeToCommit,commitSpellcheckEnabled:this.props.commitSpellcheckEnabled,showCommitLengthWarning:this.props.showCommitLengthWarning,currentRepoRulesInfo:a,aheadBehind:this.props.aheadBehind}),this.renderUndoCommit(l))}}class Yk extends be.Component{innerButtonRef=ri();diffOptionsRef=be.createRef();gearIconRef=be.createRef();constructor(e){super(e),this.state={isPopoverOpen:!1}}onButtonClick=e=>{e.preventDefault(),this.state.isPopoverOpen?this.closePopover():this.openPopover()};openPopover=()=>{this.setState((e=>e.isPopoverOpen?null:(this.props.onDiffOptionsOpened(),{isPopoverOpen:!0})))};closePopover=()=>{this.setState((e=>e.isPopoverOpen?{isPopoverOpen:!1}:null))};onHideWhitespaceChangesChanged=e=>this.props.onHideWhitespaceChangesChanged(e.currentTarget.checked);render(){const e="Diff Settings";return be.createElement("div",{className:"diff-options-component",ref:this.diffOptionsRef},be.createElement("button",{"aria-label":e,onClick:this.onButtonClick,"aria-expanded":this.state.isPopoverOpen,ref:this.innerButtonRef},be.createElement(Jr,{target:this.innerButtonRef,direction:Zr.NORTH},e),be.createElement("span",{ref:this.gearIconRef},be.createElement(si,{symbol:Mi})),be.createElement(si,{symbol:uo})),this.state.isPopoverOpen&&this.renderPopover())}renderPopover(){return be.createElement(eE,{ariaLabelledby:"diff-options-popover-header",anchor:this.gearIconRef.current,anchorPosition:XS.BottomRight,decoration:ZS.Balloon,onClickOutside:this.closePopover},be.createElement("h3",{id:"diff-options-popover-header"},"Diff ","Settings"),this.renderHideWhitespaceChanges(),this.renderShowSideBySide())}onUnifiedSelected=()=>{this.props.onShowSideBySideDiffChanged(!1)};onSideBySideSelected=()=>{this.props.onShowSideBySideDiffChanged(!0)};renderShowSideBySide(){return be.createElement("fieldset",{role:"radiogroup"},be.createElement("legend",null,"差异显示"),be.createElement(nk,{value:"Unified",checked:!this.props.showSideBySideDiff,label:"标准",onSelected:this.onUnifiedSelected}),be.createElement(nk,{value:"Split",checked:this.props.showSideBySideDiff,label:be.createElement(be.Fragment,null,be.createElement("div",null,"分割")),onSelected:this.onSideBySideSelected}))}renderHideWhitespaceChanges(){return be.createElement("fieldset",null,be.createElement("legend",null,"空格"),be.createElement(GC,{value:this.props.hideWhitespaceChanges?jC.On:jC.Off,onChange:this.onHideWhitespaceChangesChanged,label:"隐藏空格更改"}),this.props.isInteractiveDiff&&be.createElement("p",{className:"secondary-text"},"隐藏空格时将禁用与单行或块的交互。"))}}class Xk extends be.Component{render(){const e=this.props.status,t=Yl(e);return be.createElement("div",{className:"header"},be.createElement(Ik,{path:this.props.path,status:this.props.status}),this.renderDecorator(),this.renderDiffOptions(),be.createElement(si,{symbol:Vo(e),className:"status status-"+t.toLowerCase(),title:t}))}renderDiffOptions(){return this.props.diff?.kind===Ro.Submodule?null:be.createElement(Yk,{isInteractiveDiff:!0,onHideWhitespaceChangesChanged:this.props.onHideWhitespaceInDiffChanged,hideWhitespaceChanges:this.props.hideWhitespaceInDiff,onShowSideBySideDiffChanged:this.props.onShowSideBySideDiffChanged,showSideBySideDiff:this.props.showSideBySideDiff,onDiffOptionsOpened:this.props.onDiffOptionsOpened})}renderDecorator(){const e=this.props.diff;if(null===e)return null;if(e.kind===Ro.Text&&e.lineEndingsChange){const t=`Warning: line endings will be changed from '${e.lineEndingsChange.from}' to '${e.lineEndingsChange.to}'.`;return be.createElement(si,{symbol:ai,className:"line-endings",title:t})}return null}}class Qk extends be.Component{render(){const e=this.props.image,t=`data:${e.mediaType};base64,${e.contents}`;return be.createElement("div",{className:"image-wrapper"},be.createElement("img",{src:t,style:this.props.style,onLoad:this.onLoad,alt:""}))}onLoad=e=>{this.props.onElementLoad&&this.props.onElementLoad(e.currentTarget)}}class Zk extends be.Component{render(){const e={width:0,height:0},t=this.props.previousImageSize||e,n=this.props.currentImageSize||e,{current:r,previous:i}=this.props,o=function(e,t){return`${Math.abs(Math.round(t/e*100))}%`}(i.bytes,r.bytes),s=r.bytes-i.bytes,a=s>=0?"+":"",l={maxWidth:this.props.maxSize.width};return be.createElement("div",{className:"image-diff-container",ref:this.props.onContainerRef},be.createElement("div",{className:"image-diff-two-up"},be.createElement("div",{className:"image-diff-previous",style:l},be.createElement("div",{className:"image-diff-header"},"Deleted"),be.createElement(Qk,{image:i,onElementLoad:this.props.onPreviousImageLoad}),be.createElement("div",{className:"image-diff-footer"},be.createElement("span",{className:"strong"},"W:")," ",t.width,"px | ",be.createElement("span",{className:"strong"},"H:")," ",t.height,"px | ",be.createElement("span",{className:"strong"},"Size:")," ",Ju(i.bytes,2,!1))),be.createElement("div",{className:"image-diff-current",style:l},be.createElement("div",{className:"image-diff-header"},"Added"),be.createElement(Qk,{image:r,onElementLoad:this.props.onCurrentImageLoad}),be.createElement("div",{className:"image-diff-footer"},be.createElement("span",{className:"strong"},"W:")," ",n.width,"px | ",be.createElement("span",{className:"strong"},"H:")," ",n.height,"px | ",be.createElement("span",{className:"strong"},"Size:")," ",Ju(r.bytes,2,!1)))),be.createElement("div",{className:"image-diff-summary"},"Diff:"," ",be.createElement("span",{className:Vr()({added:s>0,removed:s<0})},0!==s?`${a}${Ju(s,2,!1)} (${o})`:"No size difference")))}}class Jk extends be.Component{render(){const e={height:this.props.maxSize.height,width:this.props.maxSize.width},t={maxHeight:this.props.maxSize.height,maxWidth:this.props.maxSize.width};return be.createElement("div",{className:"image-diff-difference",ref:this.props.onContainerRef},be.createElement("div",{className:"sizing-container"},be.createElement("div",{className:"image-container",style:e},be.createElement("div",{className:"image-diff-previous"},be.createElement(Qk,{image:this.props.previous,onElementLoad:this.props.onPreviousImageLoad,style:t})),be.createElement("div",{className:"image-diff-current"},be.createElement(Qk,{image:this.props.current,onElementLoad:this.props.onCurrentImageLoad,style:{...t,mixBlendMode:"difference"}})))))}}class eR extends be.Component{constructor(e){super(e),this.state={crossfade:1}}render(){const e={height:this.props.maxSize.height,width:this.props.maxSize.width},t={maxHeight:this.props.maxSize.height,maxWidth:this.props.maxSize.width};return be.createElement("div",{className:"image-diff-onion-skin"},be.createElement("div",{className:"sizing-container",ref:this.props.onContainerRef},be.createElement("div",{className:"image-container",style:e},be.createElement("div",{className:"image-diff-previous",style:e},be.createElement(Qk,{image:this.props.previous,onElementLoad:this.props.onPreviousImageLoad,style:t})),be.createElement("div",{className:"image-diff-current",style:{...e,opacity:this.state.crossfade}},be.createElement(Qk,{image:this.props.current,onElementLoad:this.props.onCurrentImageLoad,style:t})))),be.createElement("input",{style:{width:this.props.maxSize.width/2},className:"slider",type:"range",max:1,min:0,value:this.state.crossfade,step:.001,onChange:this.onValueChange}))}onValueChange=e=>{this.setState({crossfade:e.currentTarget.valueAsNumber})}}class tR extends be.Component{constructor(e){super(e),this.state={percentage:0}}render(){const e={height:this.props.maxSize.height,width:this.props.maxSize.width},t=this.props.maxSize.width*(1-this.state.percentage),n={height:this.props.maxSize.height,width:this.props.maxSize.width,left:-(this.props.maxSize.width-t)},r={maxHeight:this.props.maxSize.height,maxWidth:this.props.maxSize.width};return be.createElement("div",{className:"image-diff-swipe"},be.createElement("div",{className:"sizing-container",ref:this.props.onContainerRef},be.createElement("div",{className:"image-container",style:e},be.createElement("div",{className:"image-diff-previous",style:e},be.createElement(Qk,{image:this.props.previous,onElementLoad:this.props.onPreviousImageLoad,style:r})),be.createElement("div",{className:"swiper",style:{width:t,height:this.props.maxSize.height}},be.createElement("div",{className:"image-diff-current",style:n},be.createElement(Qk,{image:this.props.current,onElementLoad:this.props.onCurrentImageLoad,style:r}))))),be.createElement("input",{style:{width:this.props.maxSize.width+14},className:"slider",type:"range",max:1,min:0,value:this.state.percentage,step:.001,onChange:this.onValueChange}))}onValueChange=e=>{const t=e.currentTarget.valueAsNumber;this.setState({percentage:t})}}function nR(e,t){const n=t.height<e.height?e.height/t.height:1,r=t.width<e.width?e.width/t.width:1;let i=Math.max(1,r);return r<n&&(i=Math.max(1,n)),{width:e.width/i,height:e.height/i}}class rR extends be.Component{container=null;resizeObserver;resizedTimeoutID=null;constructor(e){super(e),this.resizeObserver=new ResizeObserver((e=>{for(const{target:t,contentRect:n}of e)t===this.container&&t instanceof HTMLElement&&(null!==this.resizedTimeoutID&&clearImmediate(this.resizedTimeoutID),this.resizedTimeoutID=setImmediate(this.onResized,t,n))})),this.state={previousImageSize:null,currentImageSize:null,containerSize:null}}onPreviousImageLoad=e=>{const t={width:e.naturalWidth,height:e.naturalHeight};this.setState({previousImageSize:t})};onCurrentImageLoad=e=>{const t={width:e.naturalWidth,height:e.naturalHeight};this.setState({currentImageSize:t})};onResized=(e,t)=>{this.resizedTimeoutID=null;const n={width:e.offsetWidth,height:e.offsetHeight};this.setState({containerSize:n})};getMaxSize(){const e={width:0,height:0,containerWidth:0},t=this.state.containerSize;if(!t)return e;const{previousImageSize:n,currentImageSize:r}=this.state;if(!n||!r)return e;const i=function(e,t,n){const r=nR(e,n),i=nR(t,n);return{width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)}}(n,r,t);return i}onContainerRef=e=>{this.container=e,this.resizeObserver.disconnect(),e&&this.resizeObserver.observe(e)};render(){return be.createElement("div",{className:"panel image",id:"diff"},this.renderCurrentDiffType(),be.createElement(KE,{selectedIndex:this.props.diffType,onTabClicked:this.props.onChangeDiffType,type:GE.Switch},be.createElement("span",null,"2-up"),be.createElement("span",null,"Swipe"),be.createElement("span",null,"Onion Skin"),be.createElement("span",null,"Difference")))}renderCurrentDiffType(){const e=this.getMaxSize(),t=this.props.diffType;switch(t){case Ao.TwoUp:return be.createElement(Zk,{...this.getCommonProps(e),previousImageSize:this.state.previousImageSize,currentImageSize:this.state.currentImageSize});case Ao.Swipe:return be.createElement(tR,{...this.getCommonProps(e)});case Ao.OnionSkin:return be.createElement(eR,{...this.getCommonProps(e)});case Ao.Difference:return be.createElement(Jk,{...this.getCommonProps(e)});default:return et(0,`Unknown diff type: ${t}`)}}getCommonProps(e){return{maxSize:e,previous:this.props.previous,current:this.props.current,onPreviousImageLoad:this.onPreviousImageLoad,onCurrentImageLoad:this.onCurrentImageLoad,onContainerRef:this.onContainerRef}}}class iR extends be.Component{render(){return be.createElement("div",{className:"panel image",id:"diff"},be.createElement("div",{className:"image-diff-current"},be.createElement("div",{className:"image-diff-header"},"Added"),be.createElement(Qk,{image:this.props.current})))}}class oR extends be.Component{render(){return be.createElement("div",{className:"panel image",id:"diff"},be.createElement("div",{className:"image-diff-previous"},be.createElement("div",{className:"image-diff-header"},"Deleted"),be.createElement(Qk,{image:this.props.previous})))}}class sR extends be.Component{open=()=>{const t=e.join(this.props.repository.path,this.props.path);this.props.onOpenBinaryFile(t)};render(){return be.createElement("div",{className:"panel binary",id:"diff"},be.createElement("div",{className:"image-header"},"此二进制文件已更改"),be.createElement("div",{className:"image-header"},be.createElement(CE,{onClick:this.open},"使用外部程序打开文件")))}}n(8505),n(9659),n(8272),n(9356),be.Component;const aR=new Array,lR=St(__dirname,"highlighter.js");function cR(e,t,n,r,i){if(!e.length||!i.length)return Promise.resolve({});const o=aR.shift()||new Worker(lR);return new Promise(((s,a)=>{let l=null;const c=()=>{l&&(window.clearTimeout(l),l=null)};o.onerror=e=>{c(),o.terminate(),a(e.error||new Error(e.message))},o.onmessage=e=>{c(),aR.length<2?aR.push(o):o.terminate(),s(e.data)};const u={contentLines:e,basename:t,extension:n,tabSize:r,lines:i,addModeClass:!0};o.postMessage(u),l=window.setTimeout((()=>{o.terminate(),a(new Error("timed out"))}),5e3)}))}const uR=262144;async function hR(e,t){if(t.status.kind===Io.New||t.status.kind===Io.Untracked)return null;let n;if(t instanceof qo)n="HEAD";else{if(!(t instanceof jo))return et(0,"Unknown file change type");n=t.parentCommitish}return qh(e,n,Sp(t),uR)}async function pR(n,r){return r.status.kind===Io.Deleted?null:r instanceof qo?async function(e,n,r){return await new Promise(((n,r)=>{const i=new Array;let o=0;(0,t.createReadStream)(e,{start:0,end:262143}).on("data",(e=>{i.push(e),o+=e.length})).on("error",r).on("end",(()=>n(Buffer.concat(i,o))))}))}(e.join(n.path,r.path)):r instanceof jo?qh(n,r.commitish,r.path,uR):et(0,"Unknown file change type")}class dR extends be.Component{render(){return be.createElement(eE,{anchor:this.props.anchor,anchorPosition:this.props.anchorPosition,decoration:ZS.Balloon,onMousedownOutside:this.onDismissed,className:"whitespace-hint",appearEffect:QS.Shake,ariaLabelledby:"whitespace-hint-header"},be.createElement("h3",{id:"whitespace-hint-header"},"Show whitespace changes?"),be.createElement("p",{className:"byline"},"Selecting lines is disabled when hiding whitespace changes."),be.createElement("footer",null,be.createElement(UE,{okButtonText:"Yes",cancelButtonText: "取消",onCancelButtonClick:this.onDismissed,onOkButtonClick:this.onShowWhitespaceChanges})))}onShowWhitespaceChanges=e=>{e.preventDefault(),this.props.onHideWhitespaceInDiffChanged(!1),this.props.onDismissed()};onDismissed=e=>{e?.preventDefault(),this.props.onDismissed()}}class mR extends we().Component{render(){return we().createElement("div",{className:"hidden-bidi-chars-warning"},we().createElement(si,{symbol:ai}),"This diff contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters."," ",we().createElement(CE,{uri:"https://github.co/hiddenchars"},"Learn more about bidirectional Unicode characters"))}}const fR={w:16,h:8,d:"m 16,1 0,3 c 0,0.55 -0.45,1 -1,1 l -3,0 0,2 -3,-3 3,-3 0,2 2,0 0,-2 2,0 z M 8,4 C 8,6.2 6.2,8 4,8 1.8,8 0,6.2 0,4 0,1.8 1.8,0 4,0 6.2,0 8,1.8 8,4 Z M 1.5,5.66 5.66,1.5 C 5.18,1.19 4.61,1 4,1 2.34,1 1,2.34 1,4 1,4.61 1.19,5.17 1.5,5.66 Z M 7,4 C 7,3.39 6.81,2.83 6.5,2.34 L 2.34,6.5 C 2.82,6.81 3.39,7 4,7 5.66,7 7,5.66 7,4 Z"};function gR(e,t){return n=>{const r=Math.round(n.defaultTextHeight()+4),i=n.getScrollInfo();if("line"===t)n.scrollTo(void 0,i.top+e*r);else{const t=i.clientHeight-r;n.scrollTo(void 0,i.top+e*t)}}}gR(1,"line"),gR(-1,"line"),gR(1,"page"),gR(-1,"page"),be.Component;var yR=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,cs.Z)(this,e),this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._columnCount=0,this._rowCount=0,this.columnWidth=function(e){var n=e.index,r=t._keyMapper(0,n);return t._columnWidthCache.hasOwnProperty(r)?t._columnWidthCache[r]:t._defaultWidth},this.rowHeight=function(e){var n=e.index,r=t._keyMapper(n,0);return t._rowHeightCache.hasOwnProperty(r)?t._rowHeightCache[r]:t._defaultHeight};var r=n.defaultHeight,i=n.defaultWidth,o=n.fixedHeight,s=n.fixedWidth,a=n.keyMapper,l=n.minHeight,c=n.minWidth;this._hasFixedHeight=!0===o,this._hasFixedWidth=!0===s,this._minHeight=l||0,this._minWidth=c||0,this._keyMapper=a||wR,this._defaultHeight=Math.max(this._minHeight,"number"==typeof r?r:30),this._defaultWidth=Math.max(this._minWidth,"number"==typeof i?i:100)}return(0,us.Z)(e,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._keyMapper(e,t);delete this._cellHeightCache[n],delete this._cellWidthCache[n],this._updateCachedColumnAndRowSizes(e,t)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;var n=this._keyMapper(e,t);return this._cellHeightCache.hasOwnProperty(n)?Math.max(this._minHeight,this._cellHeightCache[n]):this._defaultHeight}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;var n=this._keyMapper(e,t);return this._cellWidthCache.hasOwnProperty(n)?Math.max(this._minWidth,this._cellWidthCache[n]):this._defaultWidth}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._keyMapper(e,t);return this._cellHeightCache.hasOwnProperty(n)}},{key:"set",value:function(e,t,n,r){var i=this._keyMapper(e,t);t>=this._columnCount&&(this._columnCount=t+1),e>=this._rowCount&&(this._rowCount=e+1),this._cellHeightCache[i]=r,this._cellWidthCache[i]=n,this._updateCachedColumnAndRowSizes(e,t)}},{key:"_updateCachedColumnAndRowSizes",value:function(e,t){if(!this._hasFixedWidth){for(var n=0,r=0;r<this._rowCount;r++)n=Math.max(n,this.getWidth(r,t));var i=this._keyMapper(0,t);this._columnWidthCache[i]=n}if(!this._hasFixedHeight){for(var o=0,s=0;s<this._columnCount;s++)o=Math.max(o,this.getHeight(e,s));var a=this._keyMapper(e,0);this._rowHeightCache[a]=o}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),e}();const bR=yR;function wR(e,t){return e+"-"+t}var vR=n(9042),CR=n.n(vR),SR=function(e){function t(){var e,n,r,i;(0,cs.Z)(this,t);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return n=r=(0,hs.Z)(this,(e=t.__proto__||ls()(t)).call.apply(e,[this].concat(s))),r._cellRenderer=function(e){var t=e.parent,n=e.rowIndex,i=e.style,o=e.isScrolling,s=e.isVisible,a=e.key,l=r.props.rowRenderer;return CR()(i,"width").writable&&(i.width="100%"),l({index:n,style:i,isScrolling:o,isVisible:s,key:a,parent:t})},r._setRef=function(e){r.Grid=e},r._onScroll=function(e){var t=e.clientHeight,n=e.scrollHeight,i=e.scrollTop;(0,r.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:i})},r._onSectionRendered=function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,i=e.rowStartIndex,o=e.rowStopIndex;(0,r.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:i,stopIndex:o})},i=n,(0,hs.Z)(r,i)}return(0,ps.Z)(t,e),(0,us.Z)(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:n,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,i=void 0===r?0:r;this.Grid&&this.Grid.recomputeGridSize({rowIndex:i,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,r=e.scrollToIndex,i=e.width,o=Vr()("ReactVirtualized__List",t);return be.createElement(Us,(0,ss.Z)({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:o,columnWidth:i,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:r}))}}]),t}(be.PureComponent);SR.defaultProps={autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:function(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,i=e.startIndex,o=e.stopIndex;return n=Math.max(1,n),1===r?{overscanStartIndex:Math.max(0,i-1),overscanStopIndex:Math.min(t-1,o+n)}:{overscanStartIndex:Math.max(0,i-n),overscanStopIndex:Math.min(t-1,o+1)}},overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}},SR.propTypes=null;const ER=SR;var kR=function(e){function t(){var e,n,r,i;(0,cs.Z)(this,t);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return n=r=(0,hs.Z)(this,(e=t.__proto__||ls()(t)).call.apply(e,[this].concat(s))),r._measure=function(){var e=r.props,t=e.cache,n=e.columnIndex,i=void 0===n?0:n,o=e.parent,s=e.rowIndex,a=void 0===s?r.props.index||0:s,l=r._getCellMeasurements(),c=l.height,u=l.width;c===t.getHeight(a,i)&&u===t.getWidth(a,i)||(t.set(a,i,u,c),o&&"function"==typeof o.recomputeGridSize&&o.recomputeGridSize({columnIndex:i,rowIndex:a}))},i=n,(0,hs.Z)(r,i)}return(0,ps.Z)(t,e),(0,us.Z)(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=(0,ve.findDOMNode)(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var n=t.style.width,r=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var i=Math.ceil(t.offsetHeight),o=Math.ceil(t.offsetWidth);return n&&(t.style.width=n),r&&(t.style.height=r),{height:i,width:o}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,n=e.columnIndex,r=void 0===n?0:n,i=e.parent,o=e.rowIndex,s=void 0===o?this.props.index||0:o;if(!t.has(s,r)){var a=this._getCellMeasurements(),l=a.height,c=a.width;t.set(s,r,c,l),i&&"function"==typeof i.invalidateCellSizeAfterRender&&i.invalidateCellSizeAfterRender({columnIndex:r,rowIndex:s})}}}]),t}(be.PureComponent);kR.__internalCellMeasurerFlag=!1,kR.propTypes=null;const RR=kR;var xR;!function(e){e.Added="+",e.Deleted="-",e.Nothing=" "}(xR||(xR={}));class TR extends be.Component{constructor(e){super(e),this.state={showWhitespaceHint:void 0}}render(){const{row:e,showSideBySideDiff:t,beforeClassNames:n,afterClassNames:r}=this.props,i=Vr()("before",...n),o=Vr()("after",...r);switch(e.type){case sp.Hunk:{const t=["row","hunk-info"];return e.expansionType===Do.Both&&t.push("expandable-both"),be.createElement("div",{className:Vr()(t)},this.renderHunkHeaderGutter(e.hunkIndex,e.expansionType),this.renderContentFromString(e.content))}case sp.Context:const{beforeLineNumber:n,afterLineNumber:r}=e;return t?be.createElement("div",{className:"row context"},be.createElement("div",{className:"before"},this.renderLineNumber(n,ap.Before),this.renderContentFromString(e.content,e.beforeTokens)),be.createElement("div",{className:"after"},this.renderLineNumber(r,ap.After),this.renderContentFromString(e.content,e.afterTokens))):be.createElement("div",{className:"row context"},be.createElement("div",{className:"before"},this.renderLineNumbers([n,r],void 0),this.renderContentFromString(e.content,e.beforeTokens)));case sp.Added:{const{lineNumber:n,isSelected:r}=e.data;return t?be.createElement("div",{className:"row added",onMouseEnter:this.onMouseEnterLineNumber},be.createElement("div",{className:i},this.renderLineNumber(void 0,ap.Before),this.renderContentFromString(""),this.renderWhitespaceHintPopover(ap.Before)),be.createElement("div",{className:o},this.renderLineNumber(n,ap.After,r),this.renderContent(e.data,xR.Added),this.renderWhitespaceHintPopover(ap.After)),this.renderHunkHandle()):be.createElement("div",{className:"row added",onMouseEnter:this.onMouseEnterLineNumber},be.createElement("div",{className:o},this.renderLineNumbers([void 0,n],ap.After,r),this.renderHunkHandle(),this.renderContent(e.data,xR.Added),this.renderWhitespaceHintPopover(ap.After)))}case sp.Deleted:{const{lineNumber:n,isSelected:r}=e.data;return t?be.createElement("div",{className:"row deleted",onMouseEnter:this.onMouseEnterLineNumber},be.createElement("div",{className:i},this.renderLineNumber(n,ap.Before,r),this.renderContent(e.data,xR.Deleted),this.renderWhitespaceHintPopover(ap.Before)),be.createElement("div",{className:o},this.renderLineNumber(void 0,ap.After),this.renderContentFromString("",[]),this.renderWhitespaceHintPopover(ap.After)),this.renderHunkHandle()):be.createElement("div",{className:"row deleted",onMouseEnter:this.onMouseEnterLineNumber},be.createElement("div",{className:i},this.renderLineNumbers([n,void 0],ap.Before,r),this.renderHunkHandle(),this.renderContent(e.data,xR.Deleted),this.renderWhitespaceHintPopover(ap.Before)))}case sp.Modified:{const{beforeData:t,afterData:n}=e;return be.createElement("div",{className:"row modified"},be.createElement("div",{className:i,onMouseEnter:this.onMouseEnterLineNumber},this.renderLineNumber(t.lineNumber,ap.Before,t.isSelected),this.renderContent(t,xR.Deleted),this.renderWhitespaceHintPopover(ap.Before)),be.createElement("div",{className:o,onMouseEnter:this.onMouseEnterLineNumber},this.renderLineNumber(n.lineNumber,ap.After,n.isSelected),this.renderContent(n,xR.Added),this.renderWhitespaceHintPopover(ap.After)),this.renderHunkHandle())}}}shouldComponentUpdate(e,t){if(!qs(this.state,t))return!0;const{row:n,...r}=this.props,{row:i,...o}=e;return!zs(n,i)||!qs(r,o)}renderContentFromString(e,t=[],n=xR.Nothing){return this.renderContent({content:e,tokens:t,noNewLineIndicator:!1})}renderContent(e,t=xR.Nothing){return be.createElement("div",{className:"content",onContextMenu:this.props.onContextMenuText},be.createElement("div",{className:"prefix"},"  ",t,"  "),be.createElement("div",{className:"content-wrapper"},function(e,t){const n=[];let r={content:"",tokens:new Map};for(let i=0;i<e.length;i++){const o=e[i],s=new Map;for(const[e,t]of r.tokens)t>i&&s.set(e,t);for(const e of t)if(void 0!==e[i]&&e[i].length>0){const t=e[i].token.split(" "),n=i+e[i].length;for(const e of t){const t=s.get(e);(void 0===t||n>t)&&s.set(e,n)}}Gs(r.tokens,s)?(r.content+=o,r.tokens=s):(n.push({tokens:r.tokens,content:r.content}),r={content:o,tokens:s})}return n.push({tokens:r.tokens,content:r.content}),be.createElement(be.Fragment,null,n.map(((e,t)=>0===e.tokens.size?e.content:be.createElement("span",{key:t,className:Vr()([...e.tokens.keys()].map((e=>`cm-${e}`)))},e.content))))}(e.content,e.tokens),e.noNewLineIndicator&&be.createElement(si,{symbol:fR,title:"文件末尾没有换行符"})))}getHunkExpansionElementInfo(e,t){switch(t){case Do.Up:return{icon:Oi,title:"展开上方",handler:this.onExpandHunk(e,t)};case Do.Down:return{icon:Ni,title:"展开下方",handler:this.onExpandHunk(e-1,t)};case Do.Short:return{icon:_i,title:"全部展开",handler:this.onExpandHunk(e,t)}}throw new Error(`Unexpected expansion type ${t}`)}get lineGutterWidth(){const{showSideBySideDiff:e,lineNumberWidth:t}=this.props;return e?t:2*t}renderHunkExpansionHandle(e,t){if(t===Do.None)return be.createElement("div",{className:"hunk-expansion-handle",style:{width:this.lineGutterWidth}},be.createElement("button",{onContextMenu:this.props.onContextMenuExpandHunk},be.createElement("span",null)));const n=this.getHunkExpansionElementInfo(e,t),{lastExpandedHunk:r}=this.props,i=null!==r&&t===r.expansionType&&(e===r.index||e===r.index+1);return be.createElement("div",{className:"hunk-expansion-handle selectable hoverable",style:{width:this.lineGutterWidth}},be.createElement(ii,{onClick:n.handler,onContextMenu:this.props.onContextMenuExpandHunk,tooltip:n.title,toolTipDirection:Zr.SOUTH,autoFocus:i,ariaLabel:n.title},be.createElement(si,{symbol:n.icon})))}renderHunkHeaderGutter(e,t){return t===Do.Both?be.createElement("div",null,this.renderHunkExpansionHandle(e,Do.Down),this.renderHunkExpansionHandle(e,Do.Up)):this.renderHunkExpansionHandle(e,t)}renderHunkHandle(){if(!this.props.isDiffSelectable)return null;const e=this.props.showSideBySideDiff?{}:{left:this.lineGutterWidth};return be.createElement("div",{className:"hunk-handle hoverable",onMouseEnter:this.onMouseEnterHunk,onMouseLeave:this.onMouseLeaveHunk,onClick:this.onClickHunk,onContextMenu:this.onContextMenuHunk,style:e})}getLineNumbersContainerID(e){return`line-numbers-${this.props.numRow}-${e}`}renderLineNumbers(e,t,n){const r=void 0===t?void 0:this.getLineNumbersContainerID(t);return this.props.isDiffSelectable&&void 0!==n?be.createElement("div",{id:r,className:Vr()("line-number","selectable","hoverable",{"line-selected":n,hover:this.props.isHunkHovered}),style:{width:this.lineGutterWidth},onMouseDown:this.onMouseDownLineNumber,onContextMenu:this.onContextMenuLineNumber},e.map(((e,t)=>be.createElement("span",{key:t},e)))):be.createElement("div",{id:r,className:"line-number",style:{width:this.lineGutterWidth}},e.map(((e,t)=>be.createElement("span",{key:t},e))))}renderWhitespaceHintPopover(e){if(this.state.showWhitespaceHint!==e)return;const t=`line-numbers-${this.props.numRow}-${e}`,n=document.getElementById(t);if(null===n)return;const r=e===ap.Before?XS.LeftTop:XS.RightTop;return be.createElement(dR,{anchor:n,anchorPosition:r,onHideWhitespaceInDiffChanged:this.props.onHideWhitespaceInDiffChanged,onDismissed:this.onWhitespaceHintClose})}onWhitespaceHintClose=()=>{this.setState({showWhitespaceHint:void 0})};renderLineNumber(e,t,n){return this.renderLineNumbers([e],t,n)}getDiffColumn(e){const{row:t}=this.props;switch(t.type){case sp.Added:return ap.After;case sp.Deleted:return ap.Before;case sp.Modified:return e?.closest(".after")?ap.After:ap.Before}return null}getDiffData(e){const{row:t}=this.props;switch(t.type){case sp.Added:case sp.Deleted:return t.data;case sp.Modified:return e?.closest(".after")?t.afterData:t.beforeData}return null}onMouseDownLineNumber=e=>{if(2===e.buttons)return;const t=this.getDiffColumn(e.currentTarget),n=this.getDiffData(e.currentTarget);if(null!==n&&null!==t){if(this.props.hideWhitespaceInDiff)return void this.setState({showWhitespaceHint:t});this.props.onStartSelection(this.props.numRow,t,!n.isSelected)}};onMouseEnterLineNumber=e=>{if(this.props.hideWhitespaceInDiff)return;const t=this.getDiffData(e.currentTarget),n=this.getDiffColumn(e.currentTarget);null!==t&&null!==n&&this.props.onUpdateSelection(this.props.numRow,n)};onMouseEnterHunk=()=>{"hunkStartLine"in this.props.row&&this.props.onMouseEnterHunk(this.props.row.hunkStartLine)};onMouseLeaveHunk=()=>{"hunkStartLine"in this.props.row&&this.props.onMouseLeaveHunk(this.props.row.hunkStartLine)};onExpandHunk=(e,t)=>()=>{this.props.onExpandHunk(e,t)};onClickHunk=()=>{if(this.props.hideWhitespaceInDiff){const{row:e}=this.props,t=e.type===sp.Added?ap.After:ap.Before;return void this.setState({showWhitespaceHint:t})}const e=this.getDiffData();null!==e&&"hunkStartLine"in this.props.row&&this.props.onClickHunk(this.props.row.hunkStartLine,!e.isSelected)};onContextMenuLineNumber=e=>{if(this.props.hideWhitespaceInDiff)return;const t=this.getDiffData(e.currentTarget);null!==t&&null!==t.diffLineNumber&&this.props.onContextMenuLine(t.diffLineNumber)};onContextMenuHunk=()=>{this.props.hideWhitespaceInDiff||"hunkStartLine"in this.props.row&&this.props.onContextMenuHunk(this.props.row.hunkStartLine)}}class DR extends be.Component{constructor(e){super(e),this.state={value:""}}render(){return be.createElement("div",{className:"diff-search"},be.createElement(dC,{placeholder:"Search…",displayClearButton:!0,autoFocus:!0,onValueChanged:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,value:this.state.value}))}onChange=e=>{this.setState({value:e})};onBlur=()=>{this.props.onClose()};onKeyDown=e=>{"Escape"!==e.key||e.defaultPrevented?"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),this.props.onSearch(this.state.value,e.shiftKey?"previous":"next")):(e.preventDefault(),this.props.onClose())}}var AR=n(2229),PR=n.n(AR);const IR=(e,t)=>{const n=(e=>(e=>e.nodeType===Node.ELEMENT_NODE)(e)?e:e.parentElement)(e)?.closest("div[role=row]");if(n&&t.contains(n)){const e=null!==n.ariaRowIndex?parseInt(n.ariaRowIndex,10):NaN;return isNaN(e)?void 0:e}},_R=new bR({defaultHeight:20,fixedWidth:!0});class NR extends be.Component{virtualListRef=be.createRef();diffContainer=null;diffToRestore=null;textSelectionStartRow=void 0;textSelectionEndRow=void 0;constructor(e){super(e),this.state={diff:e.diff,isSearching:!1,selectedSearchResult:void 0,selectingTextInRow:"before",lastExpandedHunk:null}}componentDidMount(){this.initDiffSyntaxMode(),window.addEventListener("keydown",this.onWindowKeyDown),document.addEventListener("find-text",this.showSearch),document.addEventListener("cut",this.onCutOrCopy),document.addEventListener("copy",this.onCutOrCopy),document.addEventListener("selectionchange",this.onDocumentSelectionChange)}onCutOrCopy=e=>{if(e.defaultPrevented||!this.isEntireDiffSelected())return;const t=this.props.showSideBySideDiff?"before"===this.state.selectingTextInRow?[xo.Delete,xo.Context]:[xo.Add,xo.Context]:[xo.Add,xo.Delete,xo.Context],n=this.state.diff.hunks.flatMap((e=>e.lines.filter((e=>t.includes(e.type))).map((e=>e.content)))).join("\n");e.preventDefault(),e.clipboardData?.setData("text/plain",n)};onDocumentSelectionChange=e=>{if(!this.diffContainer)return;const t=document.getSelection();if(this.textSelectionStartRow=void 0,this.textSelectionEndRow=void 0,!t||t.isCollapsed)return;if(!t.containsNode(this.diffContainer,!0))return;if(this.isEntireDiffSelected(t))return;const n=t.getRangeAt(0),{startContainer:r,endContainer:i}=n;let o=IR(r,this.diffContainer);if(void 0===o){const e=this.diffContainer.querySelector("div[role=row]:first-child");e&&n.intersectsNode(e)&&(o=IR(e,this.diffContainer))}if(void 0===o)return;let s=IR(i,this.diffContainer);if(void 0===s){const e=this.diffContainer.querySelector("div[role=row]:last-child");e&&n.intersectsNode(e)&&(s=IR(e,this.diffContainer))}this.textSelectionStartRow=o,this.textSelectionEndRow=s};isEntireDiffSelected(e=document.getSelection()){const{diffContainer:t}=this;if(0===e?.rangeCount)return!1;const n=e?.getRangeAt(0).commonAncestorContainer;return n===t}componentWillUnmount(){window.removeEventListener("keydown",this.onWindowKeyDown),document.removeEventListener("mouseup",this.onEndSelection),document.removeEventListener("find-text",this.showSearch),document.removeEventListener("selectionchange",this.onDocumentSelectionChange)}componentDidUpdate(e,t){if(OR(this.props,e,this.state,t)||(this.initDiffSyntaxMode(),this.clearListRowsHeightCache()),pp(this.props.diff,e.diff)||(this.diffToRestore=null,this.setState({diff:this.props.diff,lastExpandedHunk:null})),null!==this.virtualListRef.current&&this.props.file.id!==e.file.id&&(this.virtualListRef.current.scrollToPosition(0),this.textSelectionStartRow=void 0,this.textSelectionEndRow=void 0,this.diffContainer)){const e=document.getSelection();e?.containsNode(this.diffContainer,!0)&&e.empty()}}canExpandDiff(){const e=this.props.fileContents;return null!==e&&e.canBeExpanded&&e.newContents.length>0}onDiffContainerRef=e=>{null===e?this.diffContainer?.removeEventListener("select-all",this.onSelectAll):e.addEventListener("select-all",this.onSelectAll),this.diffContainer=e};render(){const{diff:e}=this.state,t=MR(e,this.props.showSideBySideDiff,this.canExpandDiff()),n=Vr()("side-by-side-diff-container",{"unified-diff":!this.props.showSideBySideDiff,[`selecting-${this.state.selectingTextInRow}`]:this.props.showSideBySideDiff&&void 0!==this.state.selectingTextInRow,editable:cp(this.props.file)});return be.createElement("div",{className:n,onMouseDown:this.onMouseDown,onKeyDown:this.onKeyDown},e.hasHiddenBidiChars&&be.createElement(mR,null),this.state.isSearching&&be.createElement(DR,{onSearch:this.onSearch,onClose:this.onSearchCancel}),be.createElement("div",{className:"side-by-side-diff cm-s-default",ref:this.onDiffContainerRef},be.createElement(ms,{onResize:this.clearListRowsHeightCache},(({height:e,width:n})=>be.createElement(ER,{deferredMeasurementCache:_R,width:n,height:e,rowCount:t.length,rowHeight:this.getRowHeight,rowRenderer:this.renderRow,ref:this.virtualListRef,overscanIndicesGetter:this.overscanIndicesGetter,isSearching:this.state.isSearching,selectedSearchResult:this.state.selectedSearchResult,searchQuery:this.state.searchQuery,showSideBySideDiff:this.props.showSideBySideDiff,beforeTokens:this.state.beforeTokens,afterTokens:this.state.afterTokens,temporarySelection:this.state.temporarySelection,hoveredHunk:this.state.hoveredHunk,isSelectable:cp(this.props.file),fileSelection:this.getSelection(),rows:t})))))}overscanIndicesGetter=e=>{const[t,n]=[this.textSelectionStartRow,this.textSelectionEndRow];if(void 0===t||void 0===n)return Rs(e);const r=Math.min(t,e.startIndex),i=Math.max(e.stopIndex,Math.min(e.cellCount-1,n));return Rs({...e,startIndex:r,stopIndex:i})};renderRow=({index:e,parent:t,style:n,key:r})=>{const{diff:i}=this.state,o=MR(i,this.props.showSideBySideDiff,this.canExpandDiff()),s=o[e];if(void 0===s)return null;const a=o[e-1],l=o[e+1],c=hp(s,a,l,sp.Deleted),u=hp(s,a,l,sp.Added),h=(f=i.maxLineNumber,m=Math.log(f)*Math.LOG10E+1|0,10*Math.max(m,3)+5),p=this.createFullRow(s,e),d="hunkStartLine"in s&&this.state.hoveredHunk===s.hunkStartLine;var m,f;return be.createElement(RR,{cache:_R,columnIndex:0,key:r,parent:t,rowIndex:e},be.createElement("div",{key:r,style:n,role:"row","aria-rowindex":e},be.createElement(TR,{row:p,lineNumberWidth:h,numRow:e,isDiffSelectable:cp(this.props.file),isHunkHovered:d,showSideBySideDiff:this.props.showSideBySideDiff,hideWhitespaceInDiff:this.props.hideWhitespaceInDiff,onStartSelection:this.onStartSelection,onUpdateSelection:this.onUpdateSelection,onMouseEnterHunk:this.onMouseEnterHunk,onMouseLeaveHunk:this.onMouseLeaveHunk,onExpandHunk:this.onExpandHunk,onClickHunk:this.onClickHunk,onContextMenuLine:this.onContextMenuLine,onContextMenuHunk:this.onContextMenuHunk,onContextMenuExpandHunk:this.onContextMenuExpandHunk,onContextMenuText:this.onContextMenuText,onHideWhitespaceInDiffChanged:this.props.onHideWhitespaceInDiffChanged,beforeClassNames:c,afterClassNames:u,lastExpandedHunk:this.state.lastExpandedHunk})))};getRowHeight=e=>_R.rowHeight(e)??20;clearListRowsHeightCache=()=>{_R.clearAll()};async initDiffSyntaxMode(){const t=this.props.fileContents;if(null===t)return;const{diff:n}=this.state,r=this.props,i=this.state,o=function(e){const t=new Array,n=new Array,r=new Array;let i=!1,o=!1;for(const t of e)for(const e of t.lines)i=i||e.type===xo.Add,o=o||e.type===xo.Delete,r.push(e);for(const e of r)null!==e.oldLineNumber&&null!==e.newLineNumber?i&&!o?n.push(e.newLineNumber-1):t.push(e.oldLineNumber-1):null!==e.oldLineNumber?t.push(e.oldLineNumber-1):null!==e.newLineNumber&&n.push(e.newLineNumber-1);return{oldLineFilter:t,newLineFilter:n}}(n.hunks),s=await async function(t,n,r){const{file:i,oldContents:o,newContents:s}=t,a=Sp(i),[l,c]=await Promise.all([null===o?{}:cR(o,e.basename(a),e.extname(a),n,r.oldLineFilter).catch((e=>(log.error("Highlighter worked failed for old contents",e),{}))),null===s?{}:cR(s,e.basename(i.path),e.extname(i.path),n,r.newLineFilter).catch((e=>(log.error("Highlighter worked failed for new contents",e),{})))]);return{oldTokens:l,newTokens:c}}(t,4,o);OR(this.props,r,this.state,i)&&this.setState({beforeTokens:s.oldTokens,afterTokens:s.newTokens})}getSelection(){return cp(this.props.file)?this.props.file.selection:void 0}createFullRow(e,t){if(e.type===sp.Added)return{...e,data:this.getRowDataPopulated(e.data,t,this.props.showSideBySideDiff?ap.After:ap.Before,this.state.afterTokens)};if(e.type===sp.Deleted)return{...e,data:this.getRowDataPopulated(e.data,t,ap.Before,this.state.beforeTokens)};if(e.type===sp.Modified)return{...e,beforeData:this.getRowDataPopulated(e.beforeData,t,ap.Before,this.state.beforeTokens),afterData:this.getRowDataPopulated(e.afterData,t,ap.After,this.state.afterTokens)};if(e.type===sp.Context){const n=ip(e.beforeLineNumber,this.state.beforeTokens)??ip(e.afterLineNumber,this.state.afterTokens),r=[...e.beforeTokens],i=[...e.afterTokens];null!==n&&(r.push(n),i.push(n));const o=this.getSearchTokens(t,ap.Before);void 0!==o&&o.forEach((e=>r.push(e)));const s=this.getSearchTokens(t,ap.After);return void 0!==s&&s.forEach((e=>i.push(e))),{...e,beforeTokens:r,afterTokens:i}}return e}getRowDataPopulated(e,t,n,r){const i=this.getSearchTokens(t,n),o=ip(e.lineNumber,r),s=[...e.tokens];return void 0!==i&&i.forEach((e=>s.push(e))),null!==o&&s.push(o),{...e,tokens:s,isSelected:null!==e.diffLineNumber&&UR(e.diffLineNumber,t,n,this.getSelection(),this.state.temporarySelection)}}getSearchTokens(e,t){const{searchResults:n,selectedSearchResult:r}=this.state;if(void 0===n)return;const i=n.getLineTokens(e,t);if(void 0!==i){if(void 0!==i&&void 0!==r){const o=n.get(r);if(e===o?.row&&t===o.column&&void 0!==i[o.offset])return[i,{[o.offset]:{length:o.length,token:"selected"}}]}return[i]}}getDiffLineNumber(e,t){const{diff:n}=this.state,r=MR(n,this.props.showSideBySideDiff,this.canExpandDiff())[e];return void 0===r?null:r.type===sp.Added||r.type===sp.Deleted?r.data.diffLineNumber:r.type===sp.Modified?t===ap.After?r.afterData.diffLineNumber:r.beforeData.diffLineNumber:null}onMouseDown=e=>{if(!this.props.showSideBySideDiff)return;if(!(e.target instanceof HTMLElement))return;const t=e.target.closest(".before"),n=e.target.closest(".after");null!==t?this.setState({selectingTextInRow:"before"}):null!==n&&this.setState({selectingTextInRow:"after"})};onKeyDown=e=>{e.altKey||e.metaKey||e.shiftKey};onSelectAll=e=>{this.diffContainer&&(e?.preventDefault(),document.getSelection()?.selectAllChildren(this.diffContainer))};onStartSelection=(e,t,n)=>{const r={row:e,column:t},i={from:r,to:r,isSelected:n};this.setState({temporarySelection:i}),document.addEventListener("mouseup",this.onEndSelection,{once:!0})};onUpdateSelection=(e,t)=>{const{temporarySelection:n}=this.state;if(void 0===n)return;const r={row:e,column:t};this.setState({temporarySelection:{...n,to:r}})};onEndSelection=()=>{let e=this.getSelection();const{temporarySelection:t}=this.state;if(void 0===e||void 0===t)return;const{from:n,to:r,isSelected:i}=t,o=Math.min(n.row,r.row),s=Math.max(n.row,r.row);for(let t=o;t<=s;t++){const o=this.getDiffLineNumber(t,n.column),s=this.getDiffLineNumber(t,r.column);null!==o&&(e=e.withLineSelection(o,i)),null!==s&&(e=e.withLineSelection(s,i))}this.props.onIncludeChanged?.(e),this.setState({temporarySelection:void 0})};onMouseEnterHunk=e=>{void 0===this.state.temporarySelection&&this.setState({hoveredHunk:e})};onMouseLeaveHunk=()=>{this.setState({hoveredHunk:void 0})};onExpandHunk=(e,t)=>{const{diff:n}=this.state;if(-1===e||e>=n.hunks.length)return;this.setState({lastExpandedHunk:{index:e,expansionType:t}});const r=t===Do.Down?"down":"up";this.expandHunk(n.hunks[e],r)};onClickHunk=(e,t)=>{if(void 0===this.props.onIncludeChanged)return;const{diff:n}=this.state,r=this.getSelection();if(void 0!==r){const i=Zh(n.hunks,e);if(null!==i){const{from:e,to:n}=i,o=r.withRangeSelection(e,n-e+1,t);this.props.onIncludeChanged(o)}}};onContextMenuText=()=>{const e=window.getSelection()?.toString().length??0,t=[{label:"复制",role:e>0?"copy":void 0,enabled:e>0},{label:"全选",action:()=>this.onSelectAll()}],n=this.buildExpandMenuItem();null!==n&&t.push({type:"separator"},n),lC(t)};onContextMenuLine=e=>{const{file:t,hideWhitespaceInDiff:n}=this.props,{diff:r}=this.state;if(!cp(t))return;if(n)return;if(void 0===this.props.onDiscardChanges)return;const i=Zh(r.hunks,e);null!==i&&null!==i.type&&lC([{label:this.getDiscardLabel(i.type,1),action:()=>this.onDiscardChanges(e)}])};buildExpandMenuItem(){const{diff:e}=this.state;return this.canExpandDiff()?null===this.diffToRestore?{label:"展开整个文件",action:this.onExpandWholeFile,enabled:1!==e.hunks.length||e.hunks[0].expansionType!==Do.None}:{label:"折叠扩展的行",action:this.onCollapseExpandedLines}:null}onExpandWholeFile=()=>{const e=this.props.fileContents,{diff:t}=this.state;if(null===e||!this.canExpandDiff())return;const n=function(e,t){let n=e;for(;n.hunks.length>1||1===n.hunks.length&&n.hunks[0].expansionType===Do.Up;){const e=n.hunks[0],r=yp(n,e,e.expansionType===Do.Up?"up":"down",t,t.length);if(void 0===r)return;n=r}return n}(t,e.newContents);void 0!==n&&(this.diffToRestore=t,this.setState({diff:n}))};onCollapseExpandedLines=()=>{null!==this.diffToRestore&&(this.setState({diff:this.diffToRestore}),this.diffToRestore=null)};onContextMenuHunk=e=>{if(!cp(this.props.file))return;if(void 0===this.props.onDiscardChanges)return;const t=Zh(this.state.diff.hunks,e);null!==t&&null!==t.type&&lC([{label:this.getDiscardLabel(t.type,t.to-t.from+1),action:()=>this.onDiscardChanges(t.from,t.to)}])};onContextMenuExpandHunk=()=>{const e=this.buildExpandMenuItem();null!==e&&lC([e])};getDiscardLabel(e,t){const n=this.props.askForConfirmationOnDiscardChanges?"…":"";let r="";return e===Vh.Additions?r="Added":e===Vh.Deletions?r="Removed":e===Vh.Mixed?r="Modified":et(0,`Invalid range type: ${e}`),`Discard ${r} Line${t>1?"s":""}${n}`}onDiscardChanges(e,t=e){const n=this.getSelection();if(void 0===n)return;if(void 0===this.props.onDiscardChanges)return;const r=n.withSelectNone().withRangeSelection(e,t-e+1,!0);this.props.onDiscardChanges(this.props.diff,r)}onWindowKeyDown=e=>{e.defaultPrevented||!e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||"f"!==e.key||(e.preventDefault(),this.showSearch())};showSearch=()=>{this.state.isSearching||this.resetSearch(!0)};onSearch=(e,t)=>{let{selectedSearchResult:n,searchResults:r}=this.state;const{showSideBySideDiff:i}=this.props,{diff:o}=this.state;if(e===this.state.searchQuery&&void 0!==r)n=void 0===n?0:(n+("next"===t?1:-1)+r.length)%r.length;else if(r=function(e,t,n,r){if(0===n.length)return;const i=new LR,o=new RegExp(PR()(n),"gi"),s=MR(e,t,r);for(const[e,n]of s.entries())if(n.type!==sp.Hunk)for(const r of HR(n,t))for(const t of r.content.matchAll(o))void 0!==t.index&&i.add(e,r.type,t.index,t[0].length);return i}(o,i,e,this.canExpandDiff()),n=0,void 0===r||0===r.length)return void this.resetSearch(!0);const s=r.get(n)?.row;void 0!==s&&this.virtualListRef.current?.scrollToRow(s),this.setState({searchQuery:e,searchResults:r,selectedSearchResult:n})};onSearchCancel=()=>{this.resetSearch(!1)};resetSearch(e){this.setState({selectedSearchResult:void 0,searchQuery:void 0,searchResults:void 0,isSearching:e})}expandHunk(e,t){const n=this.props.fileContents,{diff:r}=this.state;if(null===n||!this.canExpandDiff())return;const i=yp(r,e,t,n.newContents);void 0!==i&&this.setState({diff:i})}}function OR(e,t,n,r){return(e===t||e.file.id===t.file.id&&e.showSideBySideDiff===t.showSideBySideDiff)&&n.diff.text===r.diff.text&&t.fileContents?.file.id===e.fileContents?.file.id}const MR=mr((function(e,t,n){const r=new Array;return e.hunks.forEach(((e,i)=>{for(const o of function(e,t,n,r){const i=new Array;let o=new Array;for(const[s,a]of t.lines.entries()){const l=t.unifiedDiffStart+s;if(a.type!==xo.Delete&&a.type!==xo.Add){if(o.length>0){for(const e of BR(o,n))i.push(e);o=[]}a.type!==xo.Hunk?a.type!==xo.Context?et(a.type,`Invalid line type: ${a.type}`):(nt(a.oldLineNumber,`No oldLineNumber for ${l}`),nt(a.newLineNumber,`No newLineNumber for ${l}`),i.push({type:sp.Context,content:a.content,beforeLineNumber:a.oldLineNumber,afterLineNumber:a.newLineNumber,beforeTokens:[],afterTokens:[]})):i.push({type:sp.Hunk,content:a.text,expansionType:r?t.expansionType:Do.None,hunkIndex:e})}else o.push({line:a,diffLineNumber:l})}if(o.length>0)for(const e of BR(o,n))i.push(e);return i}(i,e,t,n))r.push(o)})),r}));function BR(e,t){if(0===e.length)return[];const n=e[0].diffLineNumber,r=new Array,i=new Array;for(const t of e)t.line.type===xo.Add?r.push(t):t.line.type===xo.Delete&&i.push(t);const o=new Array,s=new Array,a=new Array;if(r.length===i.length)for(let e=0;e<i.length;e++){const t=r[e],n=i[e];if(t.line.content.length<1024&&n.line.content.length<1024){const{before:r,after:i}=lp(n.line.content,t.line.content);s[e]=r,a[e]=i}}let l=0;for(;t&&l<r.length&&l<i.length;){const e=tt("Unexpected null line",r[l]),t=tt("Unexpected null line",i[l]);o.push({type:sp.Modified,beforeData:FR(t,"oldLineNumber",s.shift()),afterData:FR(e,"newLineNumber",a.shift()),hunkStartLine:n}),l++}for(let e=l;e<i.length;e++){const t=tt("Unexpected null line",i[e]);o.push({type:sp.Deleted,data:FR(t,"oldLineNumber",s.shift()),hunkStartLine:n})}for(let e=l;e<r.length;e++){const t=tt("Unexpected null line",r[e]);o.push({type:sp.Added,data:FR(t,"newLineNumber",a.shift()),hunkStartLine:n})}return o}function FR({line:e,diffLineNumber:t},n,r){const i=tt(`Expecting ${n} value for ${e}`,e[n]),o=new Array;return void 0!==r&&o.push(r),{content:e.content,lineNumber:i,diffLineNumber:e.originalLineNumber,noNewLineIndicator:e.noTrailingNewLine,tokens:o}}class LR{lookup=new Map;hits=new Array;getKey(e,t){return`${e}.${t}`}add(e,t,n,r){const i=this.getKey(e,t),o=this.lookup.get(i),s={length:r,token:"search-result"};void 0!==o?o[n]=s:this.lookup.set(i,{[n]:s}),this.hits.push([e,t,n,r])}get length(){return this.hits.length}get(e){const t=this.hits[e];return void 0===t?void 0:{row:t[0],column:t[1],offset:t[2],length:t[3]}}getLineTokens(e,t){return this.lookup.get(this.getKey(e,t))}}function*HR(e,t){if(e.type===sp.Hunk)yield{type:ap.Before,content:e.content};else if(e.type===sp.Added){const n=t?ap.After:ap.Before;yield{type:n,content:e.data.content}}else e.type===sp.Deleted?yield{type:ap.Before,content:e.data.content}:e.type===sp.Context?(yield{type:ap.Before,content:e.content},t&&(yield{type:ap.After,content:e.content})):e.type===sp.Modified?(yield{type:ap.Before,content:e.beforeData.content},yield{type:ap.After,content:e.afterData.content}):et(0,`Unknown row type ${e}`)}function UR(e,t,n,r,i){const o=r?.isSelected(e)??!1;if(void 0===i)return o;const s=function(e,t,n){return void 0!==n&&(e>=Math.min(n.from.row,n.to.row)&&e<=Math.max(n.to.row,n.from.row)&&(t===n.from.column||t===n.to.column))}(t,n,i);return i.isSelected?o||s:o&&!s}class WR extends we().Component{get shortSHA(){const{commit:e}=this.props;return"string"==typeof e?wl(e):e.shortSha}get longSHA(){const{commit:e}=this.props;return"string"==typeof e?e:e.sha}render(){const{className:e}=this.props;return we().createElement(Xo,{className:e,tooltip:this.renderSHATooltip(),tooltipClassName:"sha-hint",interactive:!0,direction:Zr.SOUTH},this.renderShortSHA())}renderShortSHA(){return!0===this.props.asRef?we().createElement(QE,null,this.shortSHA):this.shortSHA}renderSHATooltip(){return we().createElement(we().Fragment,null,we().createElement("code",null,this.longSHA),we().createElement("button",{onClick:this.onCopySHAButtonClick},"Copy"))}onCopySHAButtonClick=e=>{e.preventDefault(),m.clipboard.writeText(this.longSHA)}}class $R extends be.Component{render(){const e="primary"===this.props.type,t=Vr()("suggested-action",{primary:e}),n=void 0===this.props.description?void 0:be.createElement("p",{className:"description"},this.props.description);return be.createElement("div",{className:t},this.props.image&&be.createElement("div",{className:"image-wrapper"},this.props.image),be.createElement("div",{className:"text-wrapper"},be.createElement("h2",null,this.props.title),n,this.props.discoverabilityContent&&be.createElement("p",{className:"discoverability"},this.props.discoverabilityContent)),be.createElement(ii,{type:e?"submit":void 0,onClick:this.props.onClick,disabled:this.props.disabled},this.props.buttonText))}}class zR extends be.Component{render(){return be.createElement($R,{title:this.props.title,description:this.props.description,discoverabilityContent:this.props.discoverabilityContent,buttonText:this.props.buttonText,onClick:this.onClick,type:this.props.type,disabled:this.props.disabled})}onClick=e=>{void 0!==this.props.onClick&&this.props.onClick(e),e.defaultPrevented||D(this.props.menuItemId)}}var qR=n(1782),jR=n.n(qR);const GR=e=>{const t="suggested-action-group "+(e.type?e.type:"normal");if("replace"===e.transitions){const n=void 0===e.enableTransitions||e.enableTransitions;return be.createElement(jR(),{transitionAppear:!1,overflowHidden:!1,transitionEnter:n,transitionLeave:n,transitionName:e.transitions,component:"div",className:t,transitionEnterTimeout:750,transitionLeaveTimeout:500},e.children)}return be.createElement("div",{className:t},e.children)};class VR extends we().Component{constructor(e){super(e)}render(){return we().createElement("div",{className:"changes-interstitial submodule-diff"},we().createElement("div",{className:"content"},we().createElement("div",{className:"interstitial-header"},we().createElement("div",{className:"text"},we().createElement("h1",null,"子模块变更"))),this.renderSubmoduleInfo(),this.renderCommitChangeInfo(),this.renderSubmodulesChangesInfo(),this.renderOpenSubmoduleAction()))}renderSubmoduleInfo(){if(null===this.props.diff.url)return null;const e=nr(this.props.diff.url);if(null===e)return null;const t="github.com"===e.hostname?"":` (${e.hostname})`;return this.renderSubmoduleDiffItem({octicon:$i,className:"info-icon"},we().createElement(we().Fragment,null,"这是一个基于代码库的子模块。"," ",we().createElement(CE,{uri:`https://${e.hostname}/${e.owner}/${e.name}`},e.owner,"/",e.name,t),"."))}renderCommitChangeInfo(){const{diff:e,readOnly:t}=this.props,{oldSHA:n,newSHA:r}=e,i=t?"was":"has been",o=t?"":" This change can be committed to the parent repository.";return null!==n&&null!==r?this.renderSubmoduleDiffItem({octicon:Si,className:"modified-icon"},we().createElement(we().Fragment,null,"This submodule changed its commit from"," ",this.renderTooltippedCommitSHA(n)," to"," ",this.renderTooltippedCommitSHA(r),".",o)):null===n&&null!==r?this.renderSubmoduleDiffItem({octicon:Ci,className:"added-icon"},we().createElement(we().Fragment,null,"This submodule ",i," added pointing at commit"," ",this.renderTooltippedCommitSHA(r),".",o)):null!==n&&null===r?this.renderSubmoduleDiffItem({octicon:Ei,className:"removed-icon"},we().createElement(we().Fragment,null,"This submodule ",i," removed while it was pointing at commit"," ",this.renderTooltippedCommitSHA(n),".",o)):null}renderTooltippedCommitSHA(e){return we().createElement(WR,{commit:e,asRef:!0})}renderSubmodulesChangesInfo(){const{diff:e}=this.props;if(!e.status.untrackedChanges&&!e.status.modifiedChanges)return null;const t=e.status.untrackedChanges&&e.status.modifiedChanges?"修改过的和未跟踪的":e.status.untrackedChanges?"未跟踪的":"修改过的";return this.renderSubmoduleDiffItem({octicon:Pi,className:"untracked-icon"},we().createElement(we().Fragment,null,"这个子模块有 ",t," 更改。这些更改必须在子模块内提交后才能成为父仓库的一部分。"))}renderSubmoduleDiffItem(e,t){return we().createElement("div",{className:"item"},we().createElement(si,{symbol:e.octicon,className:e.className}),we().createElement("div",{className:"content"},t))}renderOpenSubmoduleAction(){return null===this.props.diff.url?null:we().createElement("span",null,we().createElement($R,{title:"在 GitHub 桌面版中打开此子模块",description:"你可以将这个子模块在 GitHub Desktop 中作为普通代码库打开，以便管理并提交其中的任何更改。",buttonText:"Open Repository",type:"primary",onClick:this.onOpenSubmoduleClick}))}onOpenSubmoduleClick=()=>{this.props.onOpenSubmodule?.(this.props.diff.fullPath)}}const KR=St(__dirname,"static/ufo-alert.svg");class YR extends be.Component{constructor(e){super(e),this.state={forceShowLargeDiff:!1}}render(){const e=this.props.diff;switch(e.kind){case Ro.Text:return this.renderText(e);case Ro.Binary:return this.renderBinaryFile();case Ro.Submodule:return this.renderSubmoduleDiff(e);case Ro.Image:return this.renderImage(e);case Ro.LargeText:return this.state.forceShowLargeDiff?this.renderLargeText(e):this.renderLargeTextDiff();case Ro.Unrenderable:return this.renderUnrenderableDiff();default:return et(0,`Unsupported diff type: ${e}`)}}renderImage(e){return e.current&&e.previous?be.createElement(rR,{onChangeDiffType:this.props.onChangeImageDiffType,diffType:this.props.imageDiffType,current:e.current,previous:e.previous}):!e.current||this.props.file.status.kind!==Io.New&&this.props.file.status.kind!==Io.Untracked?e.previous&&this.props.file.status.kind===Io.Deleted?be.createElement(oR,{previous:e.previous}):null:be.createElement(iR,{current:e.current})}renderLargeTextDiff(){return be.createElement("div",{className:"panel empty large-diff"},be.createElement("img",{src:KR,className:"blankslate-image",alt:""}),be.createElement("p",null,"差异太大，无法默认显示。",be.createElement("br",null),"你可以尝试强制显示，但可能会影响性能。"),be.createElement(ii,{onClick:this.showLargeDiff},"Show Diff"))}renderUnrenderableDiff(){return be.createElement("div",{className:"panel empty large-diff"},be.createElement("img",{src:KR,alt:""}),be.createElement("p",null,"差异太大，无法显示。"))}renderLargeText(e){const t={text:e.text,hunks:e.hunks,kind:Ro.Text,lineEndingsChange:e.lineEndingsChange,maxLineNumber:e.maxLineNumber,hasHiddenBidiChars:e.hasHiddenBidiChars};return this.renderTextDiff(t)}renderText(e){return 0===e.hunks.length?this.props.file.status.kind===Io.New||this.props.file.status.kind===Io.Untracked?be.createElement("div",{className:"panel empty"},"空文件"):this.props.file.status.kind===Io.Renamed?be.createElement("div",{className:"panel renamed"},"文件已重命名，但未进行更改"):Uo(this.props.file.status)&&$o(this.props.file.status)?be.createElement("div",{className:"panel empty"},"文件冲突，必须通过命令行解决"):this.props.hideWhitespaceInDiff?be.createElement("div",{className:"panel empty"},"仅找到空白更改"):be.createElement("div",{className:"panel empty"},"未找到更改内容"):this.renderTextDiff(e)}renderSubmoduleDiff(e){return be.createElement(VR,{onOpenSubmodule:this.props.onOpenSubmodule,diff:e,readOnly:this.props.readOnly})}renderBinaryFile(){return be.createElement(sR,{path:this.props.file.path,repository:this.props.repository,onOpenBinaryFile:this.props.onOpenBinaryFile})}renderTextDiff(e){return be.createElement(NR,{repository:this.props.repository,file:this.props.file,diff:e,fileContents:this.props.fileContents,hideWhitespaceInDiff:this.props.hideWhitespaceInDiff,showSideBySideDiff:this.props.showSideBySideDiff,onIncludeChanged:this.props.onIncludeChanged,onDiscardChanges:this.props.onDiscardChanges,askForConfirmationOnDiscardChanges:this.props.askForConfirmationOnDiscardChanges,onHideWhitespaceInDiffChanged:this.props.onHideWhitespaceInDiffChanged})}showLargeDiff=()=>{this.setState({forceShowLargeDiff:!0})}}var XR=n(5478),QR=n.n(XR);function ZR(e,t){return e===t||e.id===t.id}function JR(e,t){return e===t||ex(e)&&ex(t)&&pp(e,t)}function ex(e){return e.kind===Ro.Text||e.kind===Ro.LargeText}class tx extends be.Component{static getDerivedStateFromProps(e,t){const n=null!==t.fileContents&&ZR(t.fileContents.file,e.file)?t.fileContents:null,r=null===e.diff||ex(e.diff)&&null===n;return{isLoadingDiff:r,...r?void 0:{propSnapshot:e},...r!==t.isLoadingDiff?{isLoadingSlow:!1}:void 0,diff:null===e.diff||ex(e.diff)?t.diff:e.diff,fileContents:n}}slowLoadingTimeoutId=null;loadingState=null;constructor(e){super(e);const t=null===e.diff||ex(e.diff);this.state={isLoadingDiff:t,isLoadingSlow:!1,propSnapshot:e,diff:e.diff,fileContents:null}}componentDidMount(){this.state.isLoadingDiff&&this.scheduleSlowLoadingTimeout(),this.loadFileContentsIfNeeded(null)}componentWillUnmount(){this.clearSlowLoadingTimeout()}componentDidUpdate(e,t){this.state.isLoadingDiff!==t.isLoadingDiff&&(this.state.isLoadingDiff?this.scheduleSlowLoadingTimeout():this.clearSlowLoadingTimeout()),this.loadFileContentsIfNeeded(e.diff)}async loadFileContentsIfNeeded(e){const{diff:t,file:n}=this.props;if(null===t||!ex(t))return;const r=this.state.fileContents;if(null!==r&&ZR(r.file,n)&&null!==e&&JR(e,t))return;if(null!==this.loadingState&&ZR(this.loadingState.file,n)&&JR(this.loadingState.diff,t))return;this.loadingState={file:n,diff:t};const i=await async function(e,t){const[n,r]=await Promise.all([hR(e,t).catch((e=>(log.error("Could not load old contents for syntax highlighting",e),null))),pR(e,t).catch((e=>(log.error("Could not load new contents for syntax highlighting",e),null)))]);return{file:t,oldContents:n?.toString("utf8").split(/\r?\n/)??[],newContents:r?.toString("utf8").split(/\r?\n/)??[],canBeExpanded:null!==r&&r.length<=262143}}(this.props.repository,n);if(this.loadingState=null,!ZR(n,this.props.file))return;const o=i.canBeExpanded&&t.kind===Ro.Text?function(e,t,n,r){const i=t.at(-1);if(void 0===i)return null;if(i.header.newStartLine+i.header.newLineCount>=r)return null;const o=i.header.oldStartLine+i.header.oldLineCount,s=i.header.newStartLine+i.header.newLineCount,a=new Ho(o,n-o+1,s,r-s+1),l=new Oo("",xo.Hunk,null,null,null,!1),c=new Lo(a,[l],i.unifiedDiffEnd+1,i.unifiedDiffEnd+1,Do.Down),u=[...t,c];return{...e,text:mp(u),hunks:u}}(t,t.hunks,i.oldContents.length,i.newContents.length):null;this.setState({diff:o??t,fileContents:i})}onSlowLoadingTimeout=()=>{this.setState({isLoadingSlow:!0})};scheduleSlowLoadingTimeout(){this.clearSlowLoadingTimeout(),this.slowLoadingTimeoutId=window.setTimeout(this.onSlowLoadingTimeout,150)}clearSlowLoadingTimeout(){null!==this.slowLoadingTimeoutId&&(window.clearTimeout(this.slowLoadingTimeoutId),this.slowLoadingTimeoutId=null)}render(){const{isLoadingDiff:e,isLoadingSlow:t,fileContents:n,diff:r}=this.state,{repository:i,imageDiffType:o,readOnly:s,hideWhitespaceInDiff:a,showSideBySideDiff:l,onIncludeChanged:c,onDiscardChanges:u,file:h,onOpenBinaryFile:p,onOpenSubmodule:d,onChangeImageDiffType:m,onHideWhitespaceInDiffChanged:f}=this.state.propSnapshot,g=Vr()("seamless-diff-switcher",{loading:e,slow:e&&t,"has-diff":null!==r}),y=e?be.createElement("div",{className:"loading-indicator"},be.createElement(hE,null)):null;return be.createElement("div",{className:g},null!==r?be.createElement(YR,{repository:i,imageDiffType:o,file:h,diff:r,fileContents:n,readOnly:s,hideWhitespaceInDiff:a,showSideBySideDiff:l,askForConfirmationOnDiscardChanges:this.props.askForConfirmationOnDiscardChanges,onIncludeChanged:e?QR():c,onDiscardChanges:e?QR():u,onOpenBinaryFile:e?QR():p,onOpenSubmodule:e?QR():d,onChangeImageDiffType:e?QR():m,onHideWhitespaceInDiffChanged:e?QR():f}):null,y)}}class nx extends be.Component{get lineSelectionDisabled(){return this.props.isCommitting||this.props.hideWhitespaceInDiff}onDiffLineIncludeChanged=e=>{if(!this.lineSelectionDisabled){const{repository:t,file:n}=this.props;this.props.dispatcher.changeFileLineSelection(t,n,e)}};onDiscardChanges=(e,t)=>{this.lineSelectionDisabled||(this.props.askForConfirmationOnDiscardChanges?this.props.dispatcher.showPopup({type:nl.ConfirmDiscardSelection,repository:this.props.repository,file:this.props.file,diff:e,selection:t}):this.props.dispatcher.discardChangesFromSelection(this.props.repository,this.props.file.path,e,t))};render(){return be.createElement("div",{className:"diff-container"},be.createElement(Xk,{path:this.props.file.path,status:this.props.file.status,diff:this.props.diff,showSideBySideDiff:this.props.showSideBySideDiff,onShowSideBySideDiffChanged:this.onShowSideBySideDiffChanged,hideWhitespaceInDiff:this.props.hideWhitespaceInDiff,onHideWhitespaceInDiffChanged:this.onHideWhitespaceInDiffChanged,onDiffOptionsOpened:this.props.onDiffOptionsOpened}),be.createElement(tx,{repository:this.props.repository,imageDiffType:this.props.imageDiffType,file:this.props.file,readOnly:!1,onIncludeChanged:this.onDiffLineIncludeChanged,onDiscardChanges:this.onDiscardChanges,diff:this.props.diff,hideWhitespaceInDiff:this.props.hideWhitespaceInDiff,showSideBySideDiff:this.props.showSideBySideDiff,askForConfirmationOnDiscardChanges:this.props.askForConfirmationOnDiscardChanges,onOpenBinaryFile:this.props.onOpenBinaryFile,onOpenSubmodule:this.props.onOpenSubmodule,onChangeImageDiffType:this.props.onChangeImageDiffType,onHideWhitespaceInDiffChanged:this.onHideWhitespaceInDiffChanged}))}onShowSideBySideDiffChanged=e=>{this.props.dispatcher.onShowSideBySideDiffChanged(e)};onHideWhitespaceInDiffChanged=e=>this.props.dispatcher.onHideWhitespaceInChangesDiffChanged(e,this.props.repository)}function rx(e){return e.replace("&&","&")}class ix extends be.Component{shouldComponentUpdate(e){return this.props.text!==e.text||this.props.highlight!==e.highlight}render(){const e=this.props.text.match(/^(.*?)?(?:&([^&]))(.*)?$/);if(!e)return be.createElement("span",null,this.props.text);const t=new Array;e[1]&&t.push(be.createElement("span",{key:1,"aria-hidden":!0},rx(e[1])));const n=Vr()("access-key",{highlight:this.props.highlight});t.push(be.createElement("span",{"aria-hidden":!0,key:2,className:n},e[2])),e[3]&&t.push(be.createElement("span",{key:3,"aria-hidden":!0},rx(e[3])));const r=`${e[1]?rx(e[1]):""}${e[2]}${e[3]?rx(e[3]):""}`;return be.createElement("span",{"aria-label":r},t)}}class ox extends be.Component{wrapperRef=be.createRef();getIcon(e){return"checkbox"===e.type&&e.checked?be.createElement(si,{className:"icon",symbol:pi}):"radio"===e.type&&e.checked?be.createElement(si,{className:"icon",symbol:Ri}):null}onMouseEnter=e=>{this.props.onMouseEnter?.(this.props.item,e)};onMouseLeave=e=>{this.props.onMouseLeave?.(this.props.item,e)};onClick=e=>{this.props.onClick?.(this.props.item,e)};componentDidMount(){this.props.selected&&this.props.focusOnSelection&&this.wrapperRef.current?.focus()}componentDidUpdate(e){const{focusOnSelection:t,selected:n}=this.props;t&&n&&!e.selected&&this.wrapperRef.current?.focus()}renderLabel(){const{item:e,renderLabel:t}=this.props;return void 0!==t?t(e):"separator"!==e.type?be.createElement(ix,{text:e.label,highlight:this.props.highlightAccessKey}):void 0}render(){const e=this.props.item;if("separator"===e.type)return be.createElement("hr",null);const t="submenuItem"===e.type&&!1!==this.props.renderSubMenuArrow?be.createElement(si,{className:"submenu-arrow",symbol:ho}):null,n="submenuItem"!==e.type&&e.accelerator&&!1!==this.props.renderAcceleratorText?be.createElement("div",{className:"accelerator"},function(e){return e.split("+").map(aC).join("")}(e.accelerator)):null,{type:r}=e,i=Vr()("menu-item",{disabled:!e.enabled,checkbox:"checkbox"===r,radio:"radio"===r,checked:("checkbox"===r||"radio"===r)&&e.checked,selected:this.props.selected}),o=this.props.hasNoRole?void 0:"checkbox"===r?"menuitemradio":"menuitem",s="checkbox"===r?e.checked:void 0;return be.createElement("div",{id:this.props.menuItemId,className:i,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick,ref:this.wrapperRef,role:o,tabIndex:-1,"aria-checked":s},this.getIcon(e),be.createElement("div",{className:"label"},this.renderLabel()),n,t)}}class sx extends be.Component{onRowClick=(e,t)=>{if("separator"!==e.type&&e.enabled){const n={kind:"mouseclick",event:t};this.props.onItemClicked(this.props.depth,e,n)}};tryMoveSelection(e,t){const{items:n,selectedItem:r}=this.props,i=r?n.indexOf(r):-1,o=n.length,s=e=>n[e]&&Wr(n[e]);let a=null;return"up"===e||"down"===e?a=Ys(o,{direction:e,row:i},s):"first"!==e&&"last"!==e||(a=Xs("first"===e?"up":"down",o,s)),null!==a&&void 0!==n[a]&&(this.props.onSelectionChanged(this.props.depth,n[a],t),!0)}tryMoveSelectionByFirstCharacter(e,t){if(e.length>1||!cx(e)||!this.props.allowFirstCharacterNavigation)return;const{items:n,selectedItem:r}=this.props,i=e.toLowerCase(),o=r?n.indexOf(r)+1:0,s=o+1>n.length?0:o+1,a=n.map((e=>"separator"===e.type?"":e.label.trim()[0].toLowerCase()));let l=a.indexOf(i,s);return-1===l&&(l=a.indexOf(i,0)),l>=0&&void 0!==n[l]&&(this.props.onSelectionChanged(this.props.depth,n[l],t),!0)}onKeyDown=e=>{if(e.defaultPrevented)return;if(e.altKey||e.ctrlKey||e.metaKey)return;const t={kind:"keyboard",event:e},{selectedItem:n}=this.props,{key:r}=e;if(lx(r))if(e.preventDefault(),"ArrowUp"===r||"ArrowDown"===r)this.tryMoveSelection("ArrowUp"===r?"up":"down",t);else if("Home"===r||"End"===r){const e="Home"===r?"first":"last";this.tryMoveSelection(e,t)}else"Enter"===r||" "===r?void 0!==n&&this.props.onItemClicked(this.props.depth,n,t):et(0,"Unsupported key");if(this.tryMoveSelectionByFirstCharacter(r,t),this.props.enableAccessKeyNavigation){const t=$r(e.key,this.props.items);t&&Wr(t)&&(e.preventDefault(),this.props.onSelectionChanged(this.props.depth,t,{kind:"keyboard",event:e}),this.props.onItemClicked(this.props.depth,t,{kind:"keyboard",event:e}))}this.props.onKeyDown?.(this.props.depth,e)};onMouseEnter=e=>{this.props.onMouseEnter?.(this.props.depth)};onRowMouseEnter=(e,t)=>{if(Wr(e)){const n={kind:"hover",event:t};this.props.onSelectionChanged(this.props.depth,e,n)}};onRowMouseLeave=(e,t)=>{this.props.selectedItem===e&&this.props.onClearSelection(this.props.depth)};render(){const e=Vr()("menu-pane",this.props.className);return be.createElement("div",{className:e,onMouseEnter:this.onMouseEnter,onKeyDown:this.onKeyDown,tabIndex:-1,role:"menu","aria-labelledby":this.props.ariaLabelledby},this.props.items.filter((e=>e.visible)).map(((e,t)=>be.createElement(ox,{key:t+e.id,item:e,highlightAccessKey:!0===this.props.enableAccessKeyNavigation,selected:e.id===this.props.selectedItem?.id,onMouseEnter:this.onRowMouseEnter,onMouseLeave:this.onRowMouseLeave,onClick:this.onRowClick,renderLabel:this.props.renderLabel,focusOnSelection:!0}))))}}const ax=["ArrowUp","ArrowDown","Home","End","Enter"," "],lx=e=>ax.includes(e),cx=e=>1===e.length&&e.match(/\S/);be.Component;class ux extends be.Component{render(){return be.createElement("div",{id:this.props.id,className:"toolbar"},this.props.children)}}var hx,px;!function(e){e[e.Standard=0]="Standard",e[e.Subtitle=1]="Subtitle"}(hx||(hx={}));class dx extends be.Component{wrapperRef=ri();innerButton=null;onClick=e=>{this.props.onClick&&this.props.onClick(e)};onButtonRef=e=>{this.innerButton=e};focusButton=()=>{this.innerButton&&this.innerButton.focus()};getButtonBoundingClientRect=()=>this.innerButton?this.innerButton.getBoundingClientRect():void 0;render(){const{tooltip:e}=this.props,t=this.props.icon?be.createElement(si,{symbol:this.props.icon,className:Vr()("icon",this.props.iconClassName)}):null,n=Vr()("toolbar-button",{"has-progress":void 0!==this.props.progressValue},this.props.className),r=void 0!==this.props.progressValue?Math.round(100*lc(this.props.progressValue,0,1))/100:void 0,i=void 0!==r?be.createElement("div",{className:"progress",style:{transform:`scaleX(${r})`}}):void 0;return be.createElement("div",{className:n,onKeyDown:this.props.onKeyDown,ref:this.wrapperRef},e&&be.createElement(Jr,{target:this.wrapperRef,direction:Zr.SOUTH,onlyWhenOverflowed:this.props.onlyShowTooltipWhenOverflowed,isTargetOverflowed:this.props.isOverflowed},e),be.createElement(ii,{onClick:this.onClick,onContextMenu:this.props.onContextMenu,ref:this.onButtonRef,disabled:this.props.disabled,onMouseEnter:this.props.onMouseEnter,tabIndex:this.props.tabIndex,role:this.props.role,ariaExpanded:this.props.ariaExpanded,ariaHaspopup:this.props.ariaHaspopup,ariaLabel:this.props.ariaLabel},i,t,this.renderText(),this.props.children))}renderText(){if(void 0===this.props.title&&void 0===this.props.description)return null;const e=void 0!==this.props.title?be.createElement("div",{className:"title"},this.props.title):null,t=void 0!==this.props.description?be.createElement("div",{className:"description"},this.props.description):null,n=this.props.style||hx.Standard;switch(n){case hx.Standard:return be.createElement("div",{className:"text"},t,e);case hx.Subtitle:return be.createElement("div",{className:"text"},be.createElement("div",{className:"title"},this.props.title),t);default:return et(0,`Unknown button style: ${n}`)}}}!function(e){e[e.Foldout=0]="Foldout",e[e.MultiOption=1]="MultiOption"}(px||(px={}));class mx extends be.Component{innerButton=be.createRef();rootDiv=be.createRef();focusTrapOptions;constructor(e){super(e),this.state={clientRect:null},this.focusTrapOptions={allowOutsideClick:!0,clickOutsideDeactivates:!1,escapeDeactivates:!1,returnFocusOnDeactivate:this.props.returnFocusOnDeactivate,onDeactivate:this.props.onDropdownFocusTrapDeactivate}}get isOpen(){return"open"===this.props.dropdownState}dropdownIcon(e){return"open"===e?po:"closed"===e?uo:et(0,`Unknown dropdown state ${e}`)}renderDropdownArrow(){if(!1===this.props.showDisclosureArrow)return null;const e=this.props.dropdownState,t=be.createElement(si,{symbol:this.dropdownIcon(e),className:"dropdownArrow"});return this.props.dropdownStyle===px.MultiOption?be.createElement(dx,{className:"toolbar-dropdown-arrow-button",onClick:this.onToggleDropdownClick,ariaExpanded:this.isOpen,ariaHaspopup:!0,ariaLabel:this.props.ariaLabel},t):t}onToggleDropdownClick=e=>{const t="open"===this.props.dropdownState?"closed":"open",n=e.clientX||e.clientY?"pointer":"keyboard";this.props.onDropdownStateChanged(t,n)};onMainButtonClick=e=>{this.props.dropdownStyle!==px.MultiOption?this.onToggleDropdownClick(e):this.props.onClick?.(e)};onContextMenu=e=>{this.props.onContextMenu?.(e)};updateClientRectIfNecessary(){if("open"===this.props.dropdownState&&this.rootDiv.current){const e=this.rootDiv.current.getBoundingClientRect();if(e){const t=this.state.clientRect;t&&Qr(t,e)||this.setState({clientRect:e})}}}componentDidMount(){this.updateClientRectIfNecessary()}componentDidUpdate(){this.updateClientRectIfNecessary()}handleOverlayClick=()=>{this.props.onDropdownStateChanged("closed","pointer")};getFoldoutContainerStyle(){const e=this.state.clientRect;if(e)return{position:"absolute",top:e.bottom,left:0,width:"100%",height:`calc(100% - ${e.bottom}px)`}}getFoldoutStyle(){if(this.props.foldoutStyle)return this.props.foldoutStyle;const e=this.state.clientRect;if(!e)return;const t=this.props.dropdownStyle===px.MultiOption?{maxHeight:"100%",width:e.width}:{height:"100%",minWidth:e.width};return{position:"absolute",marginLeft:e.left,top:0,...t}}onFoldoutKeyDown=e=>{!e.defaultPrevented&&this.isOpen&&"Escape"===e.key&&(e.preventDefault(),this.props.onDropdownStateChanged("closed","keyboard"))};renderDropdownContents=()=>"open"!==this.props.dropdownState?null:be.createElement(XC(),{active:this.props.enableFocusTrap??!0,focusTrapOptions:this.focusTrapOptions},be.createElement("div",{id:"foldout-container",style:this.getFoldoutContainerStyle()},be.createElement("div",{className:"overlay",tabIndex:-1,onClick:this.handleOverlayClick}),be.createElement("div",{className:"foldout",style:this.getFoldoutStyle(),tabIndex:-1,onKeyDown:this.onFoldoutKeyDown},this.props.dropdownContentRenderer())));focusButton=()=>{this.innerButton.current&&this.innerButton.current.focusButton()};render(){const e=Vr()("toolbar-dropdown",this.props.dropdownStyle===px.MultiOption?"multi-option-style":"foldout-style",this.props.dropdownState,this.props.className);return be.createElement("div",{className:e,onKeyDown:this.props.onKeyDown,role:this.props.role,onDragOver:this.props.onDragOver,ref:this.rootDiv},this.renderDropdownContents(),be.createElement(dx,{className:this.props.buttonClassName,ref:this.innerButton,icon:this.props.icon,title:this.props.title,description:this.props.description,tooltip:this.props.tooltip,onClick:this.onMainButtonClick,onContextMenu:this.onContextMenu,onMouseEnter:this.props.onMouseEnter,style:this.props.style,iconClassName:this.props.iconClassName,disabled:this.props.disabled,tabIndex:this.props.tabIndex,progressValue:this.props.progressValue,role:this.props.buttonRole,onlyShowTooltipWhenOverflowed:this.props.onlyShowTooltipWhenOverflowed,isOverflowed:this.props.isOverflowed,ariaExpanded:this.props.dropdownStyle===px.MultiOption?void 0:this.isOpen,ariaHaspopup:this.props.buttonAriaHaspopup},this.props.children,this.props.dropdownStyle!==px.MultiOption&&this.renderDropdownArrow()),this.props.dropdownStyle===px.MultiOption&&this.renderDropdownArrow())}}class fx extends we().Component{buttonsContainerRef=null;componentDidMount(){window.addEventListener("keydown",this.onDropdownKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.onDropdownKeyDown)}onButtonsContainerRef=e=>{this.buttonsContainerRef=e};onDropdownKeyDown=e=>{if("ArrowDown"!==e.key&&"ArrowUp"!==e.key)return;e.preventDefault();const t=this.buttonsContainerRef?.querySelectorAll(`.${gx}`);if(void 0===t)return;const n=this.buttonsContainerRef?.querySelector(":focus");if(!n)return;const r=Array.from(t).indexOf(n);t[(("ArrowDown"===e.key?r+1:r-1)+t.length)%t.length]?.focus()};getDropdownItemWithType(e){const{remoteName:t}=this.props;switch(e){case yx.Fetch:return{title:`Fetch ${t}`,description:`Fetch the latest changes from ${t}`,action:this.props.fetch,icon:Ko};case yx.ForcePush:{const e=this.props.askForConfirmationOnForcePush?null:we().createElement(we().Fragment,null,we().createElement("br",null),we().createElement("br",null),we().createElement("div",{className:"warning"},we().createElement("span",{className:"warning-title"},"Warning:")," A force push will rewrite history on the remote. Any collaborators working on this branch will need to reset their own local branch to match the history of the remote."));return{title:`Force push ${t}`,description:we().createElement(we().Fragment,null,"Overwrite any changes on ",t," with your local changes",e),action:this.props.forcePushWithLease,icon:vx}}}}renderDropdownItem=e=>{const t=this.getDropdownItemWithType(e);return we().createElement(ii,{className:gx,key:e,onClick:t.action},we().createElement(si,{symbol:t.icon}),we().createElement("div",{className:"text-container"},we().createElement("div",{className:"title"},t.title),we().createElement("div",{className:"detail"},t.description)))};render(){const{itemTypes:e}=this.props;return we().createElement("div",{className:"push-pull-dropdown",ref:this.onButtonsContainerRef},e.map(this.renderDropdownItem))}}const gx="push-pull-dropdown-item";var yx;function bx(e,t){const{ahead:n,behind:r}=e;if(0===n&&0===r&&0===t)return null;const i=new Array;return(n>0||t>0)&&i.push(be.createElement("span",{key:"ahead"},n+t,be.createElement(si,{symbol:ui}))),r>0&&i.push(be.createElement("span",{key:"behind"},r,be.createElement(si,{symbol:li}))),be.createElement("div",{className:"ahead-behind"},i)}function wx(e){return e?be.createElement("span",null,"最后一次同步在 ",be.createElement(jk,{date:e})):"从未获取"}!function(e){e.Fetch="fetch",e.ForcePush="force-push"}(yx||(yx={}));const vx={w:10,h:16,d:"M0 6a.75.75 0 0 0 .974.714L4.469 3.22a.75.75 0 0 1 1.06 0l3.478 3.478a.75.75 0 0 0 .772-1.228L5.53 1.22a.75.75 0 0 0-1.06 0L.22 5.47A.75.75 0 0 0 0 6zm0 3a.75.75 0 0 0 1.28.53l2.97-2.97V14a.75.75 0 1 0 1.5 0V6.56l2.97 2.97a.75.75 0 0 0 1.06-1.06L5.53 4.22a.75.75 0 0 0-1.06 0L.22 8.47A.75.75 0 0 0 0 9z",fr:"evenodd"};class Cx extends be.Component{constructor(e){super(e),this.state={screenReaderStateMessage:null,actionInProgress:null}}componentDidUpdate(e){const t=null!==this.props.progress&&null==e.progress||this.props.progress?.title!==e.progress?.title,n=null===this.props.progress&&null!==e.progress;t&&this.setScreenReaderLoadingStateMessage(),n&&this.setState({screenReaderStateMessage:`${this.state.actionInProgress??"Pull, push, or fetch"} complete`,actionInProgress:null})}isPullPushFetchProgress(e){return"push"===e||"pull"===e||"fetch"===e}setScreenReaderLoadingStateMessage(){const{progress:e}=this.props;if(null===e)return;const{description:t,title:n,kind:r}=e,i=`${n} ${t??"请稍后..."}`,o=null===this.state.actionInProgress&&this.isPullPushFetchProgress(r)?r:this.state.actionInProgress;this.setState({screenReaderStateMessage:i,actionInProgress:o})}defaultButtonProps(){return{className:"push-pull-button",style:hx.Subtitle}}defaultDropdownProps(){return{buttonClassName:"push-pull-button",style:hx.Subtitle,dropdownStyle:px.MultiOption,ariaLabel:"Push, pull, fetch options",dropdownState:this.props.isDropdownOpen?"open":"closed",enableFocusTrap:this.props.enableFocusTrap,onDropdownStateChanged:this.props.onDropdownStateChanged}}closeDropdown(){this.props.dispatcher.closeFoldout(je.PushPull)}push=()=>{this.closeDropdown(),this.props.dispatcher.push(this.props.repository)};returnFocusOnDeactivate=()=>!(this.props.forcePushBranchState!==cc.NotAvailable&&this.props.askForConfirmationOnForcePush);onDropdownFocusTrapDeactivate=()=>{this.returnFocusOnDeactivate()||this.setScreenReaderStateMessageFocus()};setScreenReaderStateMessageFocus(){const e=document.getElementById("push-pull-button-state");e&&(e.tabIndex=-1,e.focus())}forcePushWithLease=()=>{this.closeDropdown(),this.setScreenReaderStateMessageFocus(),this.props.dispatcher.confirmOrForcePush(this.props.repository),this.setState({actionInProgress:"force push"})};pull=()=>{this.closeDropdown(),this.props.dispatcher.pull(this.props.repository)};fetch=()=>{this.closeDropdown(),this.props.dispatcher.fetch(this.props.repository,Xt.UserInitiatedTask)};getDropdownContentRenderer(e){return()=>be.createElement(fx,{itemTypes:e,remoteName:this.props.remoteName,fetch:this.fetch,forcePushWithLease:this.forcePushWithLease,askForConfirmationOnForcePush:this.props.askForConfirmationOnForcePush})}render(){return be.createElement(be.Fragment,null,this.renderButton(),be.createElement("span",{id:"push-pull-button-state"},be.createElement(pC,{message:this.state.screenReaderStateMessage})))}renderButton(){const{progress:e,networkActionInProgress:t,aheadBehind:n,numTagsToPush:r,remoteName:i,repository:o,tipState:s,rebaseInProgress:a,lastFetched:l,pullWithRebase:c,forcePushBranchState:u}=this.props;if(null!==e)return this.progressButton(e,t);if(null===i)return this.publishRepositoryButton(this.push);if(s===Ar.Unborn)return this.unbornRepositoryButton();if(s===Ar.Detached)return this.detachedHeadButton(a);if(null===n){const e=null!==o.gitHubRepository;return this.publishBranchButton(e,this.push,this.props.shouldNudge)}const{ahead:h,behind:p}=n;return 0===h&&0===p&&0===r?this.fetchButton(i,l,this.fetch):u===cc.Recommended?this.forcePushButton(i,n,r,l,this.forcePushWithLease):p>0?this.pullButton(i,n,r,l,c||!1,u,this.pull):this.pushButton(i,n,r,l,this.push)}progressButton(e,t){return be.createElement(dx,{...this.defaultButtonProps(),title:e.title,description:e.description||"请稍后...",progressValue:e.value,icon:Ko,iconClassName:t?"spin":"",tooltip:e.description,disabled:!0})}publishRepositoryButton(e){return be.createElement(dx,{...this.defaultButtonProps(),title:"发布存储库",description:"将此仓库发布到GitHub",className:"push-pull-button",icon:fo,style:hx.Subtitle,onClick:e})}unbornRepositoryButton(){return be.createElement(dx,{...this.defaultButtonProps(),title:"发布分支",description:"无法发布未出现的 HEAD",icon:fo,disabled:!0})}detachedHeadButton(e){const t=e?"正在重设变基":"Cannot publish detached HEAD";return be.createElement(dx,{...this.defaultButtonProps(),title:"发布分支",description:t,icon:fo,disabled:!0})}publishBranchButton(e,t,n){const r=e?"将此分支发布到GitHub":"将此分支发布到远程",i=Vr()(this.defaultDropdownProps().className,"nudge-arrow",{"nudge-arrow-up":n});return be.createElement(mx,{...this.defaultDropdownProps(),title:"发布分支",description:r,icon:fo,onClick:t,className:i,dropdownContentRenderer:this.getDropdownContentRenderer([yx.Fetch])})}fetchButton(e,t,n){const r=`同步(拉取然后推送) ${e}`;return be.createElement(dx,{...this.defaultButtonProps(),title:r,description:wx(t),icon:Ko,onClick:n})}pullButton(e,t,n,r,i,o,s){const a=i?`拉取 ${e} 至变基`:`拉取 ${e}`,l=[yx.Fetch];return o!==cc.NotAvailable&&l.push(yx.ForcePush),be.createElement(mx,{...this.defaultDropdownProps(),title:a,description:wx(r),icon:li,onClick:s,dropdownContentRenderer:this.getDropdownContentRenderer(l),returnFocusOnDeactivate:this.returnFocusOnDeactivate(),onDropdownFocusTrapDeactivate:this.onDropdownFocusTrapDeactivate},bx(t,n))}pushButton(e,t,n,r,i){return be.createElement(mx,{...this.defaultDropdownProps(),title:`推送 ${e}`,description:wx(r),icon:ui,onClick:i,dropdownContentRenderer:this.getDropdownContentRenderer([yx.Fetch])},bx(t,n))}forcePushButton(e,t,n,r,i){return be.createElement(mx,{...this.defaultDropdownProps(),title:`强制推送 ${e}`,description:wx(r),icon:vx,onClick:i,dropdownContentRenderer:this.getDropdownContentRenderer([yx.Fetch])},bx(t,n))}}function Sx(e){return void 0===e}class Ex extends be.Component{constructor(e){super(e),this.state={isPushingOrPublishing:!1}}render(){return be.createElement(FE,{id:"push-branch-commits",key:"push-branch-commits",title:this.renderDialogTitle(),onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,loading:this.state.isPushingOrPublishing,disabled:this.state.isPushingOrPublishing},this.renderDialogContent(),be.createElement(HE,null,this.renderButtonGroup()))}renderDialogContent(){if(Sx(this.props.unPushedCommits))return be.createElement(_E,null,be.createElement("p",null,"您的分支必须在打开拉取请求之前发布。"),be.createElement("p",null,"发布 ",be.createElement(QE,null,this.props.branch.name)," 并且拉取？"));const e=(n="local commit",1===(t=this.props.unPushedCommits)?`${t} ${n}`:`${t} ${n}s`);var t,n;return be.createElement(_E,null,be.createElement("p",null,"你有 ",e," 尚未推送到远程的提交。"),be.createElement("p",null,"推送更改到"," ",be.createElement(QE,null,this.props.branch.name)," 在创建拉取请求之前？"))}renderDialogTitle(){return Sx(this.props.unPushedCommits)?"发布分支?":"Push Local Changes?"}renderButtonGroup(){return Sx(this.props.unPushedCommits)?be.createElement(UE,{okButtonText:"发布分支"}):be.createElement(UE,{okButtonText:"推送提交",cancelButtonText:"Create Without Pushing",onCancelButtonClick:this.onCreateWithoutPushButtonClick})}onCreateWithoutPushButtonClick=e=>{e.preventDefault(),this.props.onConfirm(this.props.repository,this.props.branch),this.props.onDismissed()};onSubmit=async()=>{const{repository:e,branch:t}=this.props;this.setState({isPushingOrPublishing:!0});try{await this.props.dispatcher.push(e)}finally{this.setState({isPushingOrPublishing:!1})}this.props.onConfirm(e,t),this.props.onDismissed()}}const kx=St(__dirname,"static/empty-no-branches.svg");class Rx extends be.Component{render(){return this.props.canCreateNewBranch?be.createElement("div",{className:"no-branches"},be.createElement("img",{src:kx,className:"blankslate-image",alt:""}),be.createElement("div",{className:"title"},"抱歉，未找到分支"),be.createElement("div",{className:"subtitle"},"是否创建新分支？"),be.createElement(ii,{className:"create-branch-button",onClick:this.props.onCreateNewBranch,type:"submit"},"Create New Branch"),be.createElement("div",{className:"protip"},"ProTip! Press"," ",be.createElement(Co,{darwinKeys:["⌘","⇧","N"],keys:["Ctrl","Shift","N"]})," ","可快速创建分支")):be.createElement("div",{className:"no-branches"},this.props.noBranchesMessage??"抱歉，未找到分支")}}function xx(e){const{name:t,isLocal:n,onRenameBranch:r,onDeleteBranch:i}=e,o=new Array;return void 0!==r&&o.push({label:"重命名",action:()=>r(t),enabled:n}),o.push({label:"复制分支名",action:()=>m.clipboard.writeText(t)}),o.push({type:"separator"}),void 0!==i&&o.push({label:"删除",action:()=>i(t)}),o}function Tx(e){const t=function(e,t,n,r){const i=new Array;e&&i.push({identifier:"default",items:[{text:[e.name],id:e.name,branch:e}]});const o=new Set,s=e?e.name:null,a=r.filter((e=>e.name!==s));if(a.length>0){const e=new Array;for(const t of a)e.push({text:[t.name],id:t.name,branch:t}),o.add(t.name);i.push({identifier:"recent",items:e})}const l=n.filter((e=>e.name!==s&&!o.has(e.name)&&!e.isDesktopForkRemoteBranch)),c=l.map((e=>({text:[e.name],id:e.name,branch:e})));return i.push({identifier:"other",items:c}),i}(e.defaultBranch,e.currentBranch,e.allBranches,e.recentBranches);let n=null;const r=e.selectedBranch;if(r)for(const e of t)if(n=e.items.find((e=>e.branch.name===r.name))||null,n)break;return{groups:t,selectedItem:n}}class Dx extends be.Component{branchFilterList=null;constructor(e){super(e),this.state=Tx(e)}componentWillReceiveProps(e){this.setState(Tx(e))}selectNextItem(e=!1,t){null!==this.branchFilterList&&this.branchFilterList.selectNextItem(e,t)}render(){return Wt()?be.createElement(BC,{ref:this.onBranchesFilterListRef,className:"branches-list",rowHeight:30,filterText:this.props.filterText,onFilterTextChanged:this.props.onFilterTextChanged,onFilterKeyDown:this.props.onFilterKeyDown,selectedItem:this.state.selectedItem,renderItem:this.renderItem,renderGroupHeader:this.renderGroupHeader,onItemClick:this.onItemClick,onSelectionChanged:this.onSelectionChanged,onEnterPressedWithoutFilteredItems:this.onCreateNewBranch,groups:this.state.groups,invalidationProps:this.props.allBranches,renderPostFilter:this.onRenderNewButton,renderNoItems:this.onRenderNoItems,filterTextBox:this.props.textbox,hideFilterRow:this.props.hideFilterRow,onFilterListResultsChanged:this.props.onFilterListResultsChanged,renderPreList:this.props.renderPreList,onItemContextMenu:this.onBranchContextMenu,getItemAriaLabel:this.getItemAriaLabel,getGroupAriaLabel:this.getGroupAriaLabel}):be.createElement(bC,{ref:this.onBranchesFilterListRef,className:"branches-list",rowHeight:30,filterText:this.props.filterText,onFilterTextChanged:this.props.onFilterTextChanged,onFilterKeyDown:this.props.onFilterKeyDown,selectedItem:this.state.selectedItem,renderItem:this.renderItem,renderGroupHeader:this.renderGroupHeader,onItemClick:this.onItemClick,onSelectionChanged:this.onSelectionChanged,onEnterPressedWithoutFilteredItems:this.onCreateNewBranch,groups:this.state.groups,invalidationProps:this.props.allBranches,renderPostFilter:this.onRenderNewButton,renderNoItems:this.onRenderNoItems,filterTextBox:this.props.textbox,hideFilterRow:this.props.hideFilterRow,onFilterListResultsChanged:this.props.onFilterListResultsChanged,renderPreList:this.props.renderPreList,onItemContextMenu:this.onBranchContextMenu})}onBranchContextMenu=(e,t)=>{t.preventDefault();const{onRenameBranch:n,onDeleteBranch:r}=this.props;if(void 0===n&&void 0===r)return;const{type:i,name:o}=e.branch;lC(xx({name:o,isLocal:i===Ja.Local,onRenameBranch:n,onDeleteBranch:r}))};onBranchesFilterListRef=e=>{this.branchFilterList=e};renderItem=(e,t)=>this.props.renderBranch(e,t);parseHeader(e){switch(e){case"default":case"recent":case"other":return e;default:return null}}getItemAriaLabel=e=>this.props.getBranchAriaLabel?.(e);getGroupAriaLabel=e=>{const t=this.state.groups[e].identifier;return this.getGroupLabel(t)};renderGroupHeader=e=>{const t=this.parseHeader(e);return null!==t?be.createElement("div",{className:"branches-list-content filter-list-group-header"},this.getGroupLabel(t)):null};getGroupLabel(e){return"default"===e?"默认分支":"recent"===e?"最近分支":"other"===e?"Other Branches":et(0,`未知标识符: ${e}`)}onRenderNoItems=()=>be.createElement(Rx,{onCreateNewBranch:this.onCreateNewBranch,canCreateNewBranch:this.props.canCreateNewBranch,noBranchesMessage:this.props.noBranchesMessage});onRenderNewButton=()=>this.props.canCreateNewBranch?be.createElement(ii,{className:"new-branch-button",onClick:this.onCreateNewBranch},"新建分支"):null;onItemClick=(e,t)=>{this.props.onItemClick&&this.props.onItemClick(e.branch,t)};onSelectionChanged=(e,t)=>{this.props.onSelectionChanged&&this.props.onSelectionChanged(e?e.branch:null,t)};onCreateNewBranch=()=>{this.props.onCreateNewBranch&&this.props.onCreateNewBranch(this.props.filterText)}}class Ax extends be.PureComponent{statusSubscription=null;constructor(e){super(e);const t=e.dispatcher.tryGetCommitStatus(this.props.repository,this.props.commitRef);this.state={check:t},this.props.onCheckChange?.(t)}subscribe(){this.unsubscribe(),this.statusSubscription=this.props.dispatcher.subscribeToCommitStatus(this.props.repository,this.props.commitRef,this.onStatus)}unsubscribe(){this.statusSubscription&&(this.statusSubscription.dispose(),this.statusSubscription=null)}componentDidUpdate(e){this.props.repository===e.repository&&this.props.commitRef===e.commitRef||(this.setState({check:this.props.dispatcher.tryGetCommitStatus(this.props.repository,this.props.commitRef)}),this.subscribe())}componentDidMount(){this.subscribe()}componentWillUnmount(){this.unsubscribe()}onStatus=e=>{void 0!==this.props.onCheckChange&&this.props.onCheckChange(e),this.setState({check:e})};render(){const{check:e}=this.state;return null===e||0===e.checks.length?null:be.createElement(si,{className:Vr()("ci-status",`ci-status-${Ix(e)}`,this.props.className),symbol:Px(e),title:Nx(e)})}}function Px(e){switch(e.conclusion){case"timed_out":case"failure":return go;case"neutral":return so;case"success":return pi;case"cancelled":return ao;case"action_required":return ai;case"skipped":return oo;case"stale":return zi}return Ri}function Ix(e){switch(e.conclusion){case"timed_out":return"timed-out";case"action_required":return"action-required";case"failure":case"neutral":case"success":case"cancelled":case"skipped":case"stale":return e.conclusion}return"pending"}function _x(e){switch(e.conclusion){case"success":return di;case"failure":return yo}return Px(e)}function Nx(e){if(1===e.checks.length){const{name:t,description:n}=e.checks[0];return`${t}: ${n}`}return`${e.checks.reduce(((e,t)=>e+(_a(t)?1:0)),0)}/${e.checks.length} checks OK`}class Ox extends be.Component{constructor(e){super(e),this.state={isDragInProgress:!1}}getSubtitle(){if(!0===this.props.loading)return;const e=gu(this.props.created.getTime()-Date.now()),t=`#${this.props.number} opened ${e} by ${this.props.author}`;return this.props.draft?`${t} • Draft`:t}onMouseEnter=e=>{Zs.isDragInProgress&&(this.setState({isDragInProgress:!0}),Zs.emitEnterDropTarget({type:ea.Branch,branchName:this.props.title}));const{top:t}=e.currentTarget.getBoundingClientRect();this.props.onMouseEnter(this.props.number,t)};onMouseLeave=e=>{Zs.isDragInProgress&&(this.setState({isDragInProgress:!1}),Zs.emitLeaveDropTarget()),this.props.onMouseLeave(e)};onMouseUp=()=>{Zs.isDragInProgress&&(this.setState({isDragInProgress:!1}),this.props.onDropOntoPullRequest(this.props.number))};render(){const e=!0===this.props.loading?void 0:this.props.title,t=this.getSubtitle(),n=this.props.matches,r=Vr()("pull-request-item",{loading:!0===this.props.loading,open:!this.props.draft,draft:this.props.draft,"drop-target":this.state.isDragInProgress});return be.createElement("div",{className:r,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseUp:this.onMouseUp},be.createElement("div",null,be.createElement(si,{className:"icon",symbol:this.props.draft?Ui:Hi})),be.createElement("div",{className:"info"},be.createElement(Xo,{tagName:"div",className:"title",tooltip:e,onlyWhenOverflowed:!0},be.createElement(Yo,{text:e||"",highlight:n.title})),be.createElement(Xo,{tagName:"div",className:"subtitle",tooltip:t,onlyWhenOverflowed:!0},be.createElement(Yo,{text:t||"",highlight:n.subtitle}))),this.renderPullRequestStatus())}renderPullRequestStatus(){const e=ya(this.props.number);return be.createElement("div",{className:"ci-status-container"},be.createElement(Ax,{dispatcher:this.props.dispatcher,repository:this.props.repository,commitRef:e}))}}const Mx=St(__dirname,"static/empty-no-pull-requests.svg");class Bx extends be.Component{render(){return be.createElement("div",{className:"no-pull-requests"},be.createElement("img",{src:Mx,className:"blankslate-image",alt:""}),this.renderTitle(),this.renderCallToAction())}renderTitle(){return this.props.isSearch?be.createElement("div",{className:"title"},"Sorry, I can't find that pull request!"):this.props.isLoadingPullRequests?be.createElement("div",{className:"title"},"Hang tight"):be.createElement("div",null,be.createElement("div",{className:"title"},"You're all set!"),be.createElement("div",{className:"no-prs"},"No open pull requests in ",be.createElement(QE,null,this.props.repositoryName)))}renderCallToAction(){return this.props.isLoadingPullRequests?be.createElement("div",{className:"call-to-action"},"Loading pull requests as fast as I can!"):this.props.isOnDefaultBranch?be.createElement("div",{className:"call-to-action"},"Would you like to"," ",be.createElement(CE,{onClick:this.props.onCreateBranch},"create a new branch")," ","and get going on your next project?"):be.createElement("div",{className:"call-to-action"},"Would you like to"," ",be.createElement(CE,{onClick:this.props.onCreatePullRequest},"create a pull request")," ","from the current branch?")}}function Fx(e,t,n){let r=null;return null!=t.selectedPullRequest&&(r=Wx(e,t.selectedPullRequest)),null==r&&null!=n&&(r=Wx(e,n.pullRequest)),r}class Lx extends be.Component{constructor(e){super(e);const t=Ux(e.pullRequests),n=Fx(t,e,null);this.state={filterText:"",groupedItems:[t],selectedItem:n,screenReaderStateMessage:null}}componentWillReceiveProps(e){const t=Ux(e.pullRequests),n=Fx(t,e,this.state.selectedItem),r=!this.props.isLoadingPullRequests&&e.isLoadingPullRequests,i=this.props.isLoadingPullRequests&&!e.isLoadingPullRequests,o=this.props.pullRequests.length,s=r?"Hang Tight. Loading pull requests as fast as I can!":i?`${o} pull request${1===o?"":"s"} found`:null;this.setState({groupedItems:[t],selectedItem:n,screenReaderStateMessage:s})}render(){return be.createElement(be.Fragment,null,be.createElement(bC,{className:"pull-request-list",rowHeight:47,groups:this.state.groupedItems,selectedItem:this.state.selectedItem,renderItem:this.renderPullRequest,filterText:this.state.filterText,onFilterTextChanged:this.onFilterTextChanged,invalidationProps:this.props.pullRequests,onItemClick:this.onItemClick,onSelectionChanged:this.onSelectionChanged,onFilterKeyDown:this.props.onFilterKeyDown,renderGroupHeader:this.renderListHeader,renderNoItems:this.renderNoItems,renderPostFilter:this.renderPostFilter}),be.createElement(pC,{message:this.state.screenReaderStateMessage}))}renderNoItems=()=>be.createElement(Bx,{isSearch:this.state.filterText.length>0,isLoadingPullRequests:this.props.isLoadingPullRequests,repositoryName:this.getRepositoryName(),isOnDefaultBranch:this.props.isOnDefaultBranch,onCreateBranch:this.props.onCreateBranch,onCreatePullRequest:this.onCreatePullRequest});renderPullRequest=(e,t)=>{const n=e.pullRequest;return be.createElement(Ox,{title:n.title,number:n.pullRequestNumber,created:n.created,author:n.author,draft:n.draft,matches:t,dispatcher:this.props.dispatcher,repository:n.base.gitHubRepository,onDropOntoPullRequest:this.onDropOntoPullRequest,onMouseEnter:this.onMouseEnterPullRequest,onMouseLeave:this.onMouseLeavePullRequest})};onMouseEnterPullRequest=(e,t)=>{const{pullRequests:n}=this.props,r=n.find((t=>t.pullRequestNumber===e));void 0!==r?this.props.onMouseEnterPullRequest(r,t):log.error("[onMouseEnterPullReqest] - Could not find pull request.")};onMouseLeavePullRequest=e=>{this.props.onMouseLeavePullRequest(e)};onDropOntoPullRequest=e=>{const{repository:t,selectedPullRequest:n,dispatcher:r,pullRequests:i}=this.props;if(!Zs.isDragOfTypeInProgress(Js.Commit))return;if(null!==n&&e===n.pullRequestNumber)return r.endMultiCommitOperation(t),void r.incrementMetric("dragStartedAndCanceledCount");const o=i.find((t=>t.pullRequestNumber===e));if(void 0===o)return log.error("[onDropOntoPullRequest] - Could not find pull request."),void r.endMultiCommitOperation(t);r.startCherryPickWithPullRequest(t,o)};onItemClick=(e,t)=>{const n=e.pullRequest;this.props.dispatcher.closeFoldout(je.Branch);const r=bE("checkout pull request from list",this.props.repository);this.props.dispatcher.checkoutPullRequest(this.props.repository,n).then((()=>r.done())),this.props.onSelectionChanged(n,t)};onSelectionChanged=(e,t)=>{this.props.onSelectionChanged(null!=e?e.pullRequest:null,t)};getRepositoryName(){return Br(this.props.repository).fullName}renderListHeader=()=>be.createElement("div",{className:"filter-list-group-header"},"Pull requests in ",this.getRepositoryName());onRefreshPullRequests=()=>{this.props.dispatcher.refreshPullRequests(this.props.repository)};renderPostFilter=()=>{const e="Refresh the list of pull requests";return be.createElement(ii,{disabled:this.props.isLoadingPullRequests,onClick:this.onRefreshPullRequests,ariaLabel:e,tooltip:e},be.createElement(si,{symbol:Ko,className:this.props.isLoadingPullRequests?"spin":void 0}))};onFilterTextChanged=e=>{this.setState({filterText:e})};onCreatePullRequest=()=>{this.props.dispatcher.closeFoldout(je.Branch),this.props.dispatcher.createPullRequest(this.props.repository)}}function Hx(e){const t=gu(e.created.getTime()-Date.now());return`#${e.pullRequestNumber} opened ${t} by ${e.author}`}function Ux(e){return{identifier:"pull-requests",items:e.map((e=>({text:[e.title,Hx(e)],id:e.pullRequestNumber.toString(),pullRequest:e})))}}function Wx(e,t){return e.items.find((e=>e.pullRequest.pullRequestNumber===t.pullRequestNumber))||null}class $x extends be.Component{constructor(e){super(e),this.state={isDragInProgress:!1}}onMouseEnter=()=>{Zs.isDragInProgress&&this.setState({isDragInProgress:!0}),Zs.isDragOfTypeInProgress(Js.Commit)&&Zs.emitEnterDropTarget({type:ea.Branch,branchName:this.props.name})};onMouseLeave=()=>{this.setState({isDragInProgress:!1}),Zs.isDragOfTypeInProgress(Js.Commit)&&Zs.emitLeaveDropTarget()};onMouseUp=()=>{const{onDropOntoBranch:e,onDropOntoCurrentBranch:t,name:n,isCurrentBranch:r}=this.props;this.setState({isDragInProgress:!1}),Zs.isDragOfTypeInProgress(Js.Commit)&&(void 0===e||r||e(n),void 0!==t&&r&&t())};render(){const{lastCommitDate:e,isCurrentBranch:t,name:n}=this.props,r=t?pi:Bi,i=Vr()("branches-list-item",{"drop-target":this.state.isDragInProgress});return be.createElement("div",{className:i,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseUp:this.onMouseUp},be.createElement(si,{className:"icon",symbol:r}),be.createElement(Xo,{className:"name",tooltip:n,onlyWhenOverflowed:!0,tagName:"div"},be.createElement(Yo,{text:n,highlight:this.props.matches.title})),e&&be.createElement(jk,{className:"description",date:e,onlyRelative:!0}))}}function zx(e,t,n,r,i){const o=e.branch,s=o.tip,a=n?n.name:null;return be.createElement($x,{name:o.name,isCurrentBranch:o.name===a,lastCommitDate:s?s.author.date:null,matches:t,onDropOntoBranch:r,onDropOntoCurrentBranch:i})}function qx(e){const t=e.branch,n=t.tip,r=n?n.author.date:null;if(!r)return t.name;const{relativeText:i}=qk(r,!0);return`${e.branch.name} ${i}`}const jx=new WeakMap;function Gx(e){let t=jx.get(e);return void 0===t&&(t=(0,cn.randomBytes)(8).toString("base64url"),jx.set(e,t)),t}var Vx=n(746),Kx=n.n(Vx);let Yx={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const Xx=/[&<>"']/,Qx=/[&<>"']/g,Zx=/[<>"']|&(?!#?\w+;)/,Jx=/[<>"']|&(?!#?\w+;)/g,eT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tT=e=>eT[e];function nT(e,t){if(t){if(Xx.test(e))return e.replace(Qx,tT)}else if(Zx.test(e))return e.replace(Jx,tT);return e}const rT=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function iT(e){return e.replace(rT,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const oT=/(^|[^\[])\^/g;function sT(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(oT,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}const aT=/[^\w:]/g,lT=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cT(e,t,n){if(e){let e;try{e=decodeURIComponent(iT(n)).replace(aT,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!lT.test(n)&&(n=function(e,t){uT[" "+e]||(hT.test(e)?uT[" "+e]=e+"/":uT[" "+e]=yT(e,"/",!0));const n=-1===(e=uT[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(pT,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(dT,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}const uT={},hT=/^[^:]+:\/*[^/]*$/,pT=/^([^:]+:)[\s\S]*$/,dT=/^([^:]+:\/*[^/]*)[\s\S]*$/,mT={exec:function(){}};function fT(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function gT(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n[n.length-1].trim()||n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function yT(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.substr(0,r-i)}function bT(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function wT(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function vT(e,t,n,r){const i=t.href,o=t.title?nT(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:o,text:s,tokens:r.inlineTokens(s,[])};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:nT(s)}}class CT{constructor(e){this.options=e||Yx}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:yT(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=yT(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const n={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,i,o,s,a,l,c,u,h,p,d,m=t[1].trim();const f=m.length>1,g={type:"list",raw:"",ordered:f,start:f?+m.slice(0,-1):"",loose:!1,items:[]};m=f?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`,this.options.pedantic&&(m=f?m:"[*+-]");const y=new RegExp(`^( {0,3}${m})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(d=!1,t=y.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),c=t[2].split("\n",1)[0],u=e.split("\n",1)[0],this.options.pedantic?(o=2,p=c.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,p=c.slice(o),o+=t[1].length),a=!1,!c&&/^ *$/.test(u)&&(n+=u+"\n",e=e.substring(u.length+1),d=!0),!d){const t=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(h=e.split("\n",1)[0],c=h,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!t.test(c));){if(c.search(/[^ ]/)>=o||!c.trim())p+="\n"+c.slice(o);else{if(a)break;p+="\n"+c}a||c.trim()||(a=!0),n+=h+"\n",e=e.substring(h.length+1)}}g.loose||(l?g.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(p),r&&(i="[ ] "!==r[0],p=p.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:p}),g.raw+=n}g.items[g.items.length-1].raw=n.trimRight(),g.items[g.items.length-1].text=p.trimRight(),g.raw=g.raw.trimRight();const b=g.items.length;for(s=0;s<b;s++){this.lexer.state.top=!1,g.items[s].tokens=this.lexer.blockTokens(g.items[s].text,[]);const e=g.items[s].tokens.filter((e=>"space"===e.type)),t=e.every((e=>{const t=e.raw.split("");let n=0;for(const e of t)if("\n"===e&&(n+=1),n>1)return!0;return!1}));!g.loose&&e.length&&t&&(g.loose=!0,g.items[s].loose=!0)}return g}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):nT(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:gT(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r,i,o,s=e.align.length;for(n=0;n<s;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(s=e.rows.length,n=0;n<s;n++)e.rows[n]=gT(e.rows[n],e.header.length).map((e=>({text:e})));for(s=e.header.length,r=0;r<s;r++)e.header[r].tokens=[],this.lexer.inlineTokens(e.header[r].text,e.header[r].tokens);for(s=e.rows.length,r=0;r<s;r++)for(o=e.rows[r],i=0;i<o.length;i++)o[i].tokens=[],this.lexer.inlineTokens(o[i].text,o[i].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:nT(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):nT(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=yT(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),vT(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return vT(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let i,o,s=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=i.length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;if(o=Math.min(o,o+s+a),Math.min(n,o)%2){const t=e.slice(1,n+r.index+o);return{type:"em",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,n+r.index+o-1);return{type:"strong",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=nT(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=nT(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=nT(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=nT(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=nT(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):nT(n[0]):n[0]:nT(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}}const ST={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:mT,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ST.def=sT(ST.def).replace("label",ST._label).replace("title",ST._title).getRegex(),ST.bullet=/(?:[*+-]|\d{1,9}[.)])/,ST.listItemStart=sT(/^( *)(bull) */).replace("bull",ST.bullet).getRegex(),ST.list=sT(ST.list).replace(/bull/g,ST.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ST.def.source+")").getRegex(),ST._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ST._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ST.html=sT(ST.html,"i").replace("comment",ST._comment).replace("tag",ST._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ST.paragraph=sT(ST._paragraph).replace("hr",ST.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ST._tag).getRegex(),ST.blockquote=sT(ST.blockquote).replace("paragraph",ST.paragraph).getRegex(),ST.normal=fT({},ST),ST.gfm=fT({},ST.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ST.gfm.table=sT(ST.gfm.table).replace("hr",ST.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ST._tag).getRegex(),ST.gfm.paragraph=sT(ST._paragraph).replace("hr",ST.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ST.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ST._tag).getRegex(),ST.pedantic=fT({},ST.normal,{html:sT("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",ST._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:mT,paragraph:sT(ST.normal._paragraph).replace("hr",ST.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ST.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const ET={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:mT,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:mT,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function kT(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function RT(e){let t,n,r="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}ET._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",ET.punctuation=sT(ET.punctuation).replace(/punctuation/g,ET._punctuation).getRegex(),ET.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ET.escapedEmSt=/\\\*|\\_/g,ET._comment=sT(ST._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),ET.emStrong.lDelim=sT(ET.emStrong.lDelim).replace(/punct/g,ET._punctuation).getRegex(),ET.emStrong.rDelimAst=sT(ET.emStrong.rDelimAst,"g").replace(/punct/g,ET._punctuation).getRegex(),ET.emStrong.rDelimUnd=sT(ET.emStrong.rDelimUnd,"g").replace(/punct/g,ET._punctuation).getRegex(),ET._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ET._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ET._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ET.autolink=sT(ET.autolink).replace("scheme",ET._scheme).replace("email",ET._email).getRegex(),ET._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ET.tag=sT(ET.tag).replace("comment",ET._comment).replace("attribute",ET._attribute).getRegex(),ET._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ET._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ET._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ET.link=sT(ET.link).replace("label",ET._label).replace("href",ET._href).replace("title",ET._title).getRegex(),ET.reflink=sT(ET.reflink).replace("label",ET._label).replace("ref",ST._label).getRegex(),ET.nolink=sT(ET.nolink).replace("ref",ST._label).getRegex(),ET.reflinkSearch=sT(ET.reflinkSearch,"g").replace("reflink",ET.reflink).replace("nolink",ET.nolink).getRegex(),ET.normal=fT({},ET),ET.pedantic=fT({},ET.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:sT(/^!?\[(label)\]\((.*?)\)/).replace("label",ET._label).getRegex(),reflink:sT(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ET._label).getRegex()}),ET.gfm=fT({},ET.normal,{escape:sT(ET.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ET.gfm.url=sT(ET.gfm.url,"i").replace("email",ET.gfm._extended_email).getRegex(),ET.breaks=fT({},ET.gfm,{br:sT(ET.br).replace("{2,}","*").getRegex(),text:sT(ET.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class xT{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Yx,this.options.tokenizer=this.options.tokenizer||new CT,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:ST.normal,inline:ET.normal};this.options.pedantic?(t.block=ST.pedantic,t.inline=ET.pedantic):this.options.gfm&&(t.block=ST.gfm,this.options.breaks?t.inline=ET.breaks:t.inline=ET.gfm),this.tokenizer.rules=t}static get rules(){return{block:ST,inline:ET}}static lex(e,t){return new xT(t).lex(e)}static lexInline(e,t){return new xT(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,i,o;for(this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,i,o,s,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+wT("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+wT("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,RT))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,RT))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,kT))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),s=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class TT{constructor(e){this.options=e||Yx}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+nT(r,!0)+'">'+(n?e:nT(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:nT(e,!0))+"</code></pre>\n"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=cT(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+nT(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=cT(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class DT{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class AT{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class PT{constructor(e){this.options=e||Yx,this.options.renderer=this.options.renderer||new TT,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new DT,this.slugger=new AT}static parse(e,t){return new PT(t).parse(e)}static parseInline(e,t){return new PT(t).parseInline(e)}parse(e,t=!0){let n,r,i,o,s,a,l,c,u,h,p,d,m,f,g,y,b,w,v,C="";const S=e.length;for(n=0;n<S;n++)if(h=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(v=this.options.extensions.renderers[h.type].call({parser:this},h),!1!==v||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)))C+=v||"";else switch(h.type){case"space":continue;case"hr":C+=this.renderer.hr();continue;case"heading":C+=this.renderer.heading(this.parseInline(h.tokens),h.depth,iT(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":C+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(c="",l="",o=h.header.length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(h.header[r].tokens),{header:!0,align:h.align[r]});for(c+=this.renderer.tablerow(l),u="",o=h.rows.length,r=0;r<o;r++){for(a=h.rows[r],l="",s=a.length,i=0;i<s;i++)l+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:h.align[i]});u+=this.renderer.tablerow(l)}C+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(h.tokens),C+=this.renderer.blockquote(u);continue;case"list":for(p=h.ordered,d=h.start,m=h.loose,o=h.items.length,u="",r=0;r<o;r++)g=h.items[r],y=g.checked,b=g.task,f="",g.task&&(w=this.renderer.checkbox(y),m?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=w+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=w+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:w}):f+=w),f+=this.parse(g.tokens,m),u+=this.renderer.listitem(f,b,y);C+=this.renderer.list(u,p,d);continue;case"html":C+=this.renderer.html(h.text);continue;case"paragraph":C+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(u=h.tokens?this.parseInline(h.tokens):h.text;n+1<S&&"text"===e[n+1].type;)h=e[++n],u+="\n"+(h.tokens?this.parseInline(h.tokens):h.text);C+=t?this.renderer.paragraph(u):u;continue;default:{const e='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return C}parseInline(e,t){t=t||this.renderer;let n,r,i,o="";const s=e.length;for(n=0;n<s;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))o+=i||"";else switch(r.type){case"escape":case"text":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}}function IT(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),bT(t=fT({},IT.defaults,t||{})),n){const r=t.highlight;let i;try{i=xT.lex(e,t)}catch(e){return n(e)}const o=function(e){let o;if(!e)try{t.walkTokens&&IT.walkTokens(i,t.walkTokens),o=PT.parse(i,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return o();if(delete t.highlight,!i.length)return o();let s=0;return IT.walkTokens(i,(function(e){"code"===e.type&&(s++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),s--,0===s&&o()}))}),0))})),void(0===s&&o())}try{const n=xT.lex(e,t);return t.walkTokens&&IT.walkTokens(n,t.walkTokens),PT.parse(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+nT(e.message+"",!0)+"</pre>";throw e}}IT.options=IT.setOptions=function(e){var t;return fT(IT.defaults,e),t=IT.defaults,Yx=t,IT},IT.getDefaults=function(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},IT.defaults=Yx,IT.use=function(...e){const t=fT({},...e),n=IT.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions&&(r=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;n.renderers[e.name]=t?function(...n){let r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}))),e.renderer){const n=IT.defaults.renderer||new TT;for(const t in e.renderer){const r=n[t];n[t]=(...i)=>{let o=e.renderer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.renderer=n}if(e.tokenizer){const n=IT.defaults.tokenizer||new CT;for(const t in e.tokenizer){const r=n[t];n[t]=(...i)=>{let o=e.tokenizer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.tokenizer=n}if(e.walkTokens){const n=IT.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t),n&&n.call(this,t)}}r&&(t.extensions=n),IT.setOptions(t)}))},IT.walkTokens=function(e,t){for(const n of e)switch(t.call(IT,n),n.type){case"table":for(const e of n.header)IT.walkTokens(e.tokens,t);for(const e of n.rows)for(const n of e)IT.walkTokens(n.tokens,t);break;case"list":IT.walkTokens(n.items,t);break;default:IT.defaults.extensions&&IT.defaults.extensions.childTokens&&IT.defaults.extensions.childTokens[n.type]?IT.defaults.extensions.childTokens[n.type].forEach((function(e){IT.walkTokens(n[e],t)})):n.tokens&&IT.walkTokens(n.tokens,t)}},IT.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");bT(t=fT({},IT.defaults,t||{}));try{const n=xT.lexInline(e,t);return t.walkTokens&&IT.walkTokens(n,t.walkTokens),PT.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+nT(e.message+"",!0)+"</pre>";throw e}},IT.Parser=PT,IT.parser=PT.parse,IT.Renderer=TT,IT.TextRenderer=DT,IT.Lexer=xT,IT.lexer=xT.lex,IT.Tokenizer=CT,IT.Slugger=AT,IT.parse=IT,IT.options,IT.setOptions,IT.use,IT.walkTokens,IT.parseInline,PT.parse,xT.lex;class _T{emojiRegex;emojiFilePath;emojiBase64URICache=new Map;constructor(e){this.emojiFilePath=e,this.emojiRegex=this.buildEmojiRegExp(e)}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return null!==e.parentNode&&["CODE","PRE"].includes(e.parentNode.nodeName)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}})}async filter(e){let t=e.textContent;if(e.nodeType!==e.TEXT_NODE||null===t||!t.includes(":"))return null;const n=t.match(this.emojiRegex);if(null===n)return null;const r=new Array;for(let e=0;e<n.length;e++){const i=n[e],o=this.emojiFilePath.get(i);if(void 0===o)continue;const s=await this.createEmojiNode(o);if(null===s)continue;const a=t.indexOf(i),l=t.slice(0,a),c=document.createTextNode(l);r.push(c),r.push(s),t=t.slice(a+i.length)}if(""!==t){const e=document.createTextNode(t);r.push(e)}return r}async createEmojiNode(e){try{const t=await this.getBase64FromImageUrl(e),n=new Image;return n.classList.add("emoji"),n.src=t,n}catch(e){}return null}async getBase64FromImageUrl(e){const t=this.emojiBase64URICache.get(e);if(void 0!==t)return t;const n=`data:image/png;base64,${(await(0,y.readFile)((0,o.fileURLToPath)(e))).toString("base64")}`;return this.emojiBase64URICache.set(e,n),n}buildEmojiRegExp(e){const t=[...e.keys()].map((e=>PR()(e))).join("|");return new RegExp("("+t+")","g")}}function NT(e){const t=Xn(e.endpoint);return new RegExp(PR()(t)+"/"+/(?<nameWithOwner>\w+(?:-\w+)*\/[.\w-]+)/.source+"/"+/(?:issues|pull|discussions)/.source+"/"+/(?<refNumber>\d+)(?<anchor>#[\w-]+)?\b/.source)}class OT{repository;constructor(e){this.repository=e}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>(null===e.parentNode||!["CODE","PRE","A"].includes(e.parentNode.nodeName))&&e instanceof HTMLAnchorElement&&e.href===e.innerText&&this.isGitHubIssuePullDiscussionLink(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP})}isGitHubIssuePullDiscussionLink(e){return!!/(issue|pull|discussion)/.test(e.href)&&(!/\d+\/(files|commits|conflicts|checks)/.test(e.href)&&(!/\.[a-z]+\z/.test(e.href)&&NT(this.repository).test(e.href)))}async filter(e){const{textContent:t}=e;if(!(e instanceof HTMLAnchorElement)||null===t)return null;const n=t.match(NT(this.repository));if(null===n||void 0===n.groups)return null;const{refNumber:r,anchor:i}=n.groups,o=e.cloneNode(!0);return o.textContent=this.getConsistentIssueReferenceText(r,i),[o]}getConsistentIssueReferenceText(e,t){return`#${e} ${this.getAnchorDescription(t)}`}getAnchorDescription(e){if(void 0===e)return"";switch(!0){case/discussion-diff-/.test(e):return"(diff)";case/commits-pushed-/.test(e):return"(commits)";case/ref-/.test(e):return"(reference)";case/pullrequestreview/.test(e):return"(review)"}return"(comment)"}}function MT(e,t){if(void 0===e)return[];const n=e.split("/");return n.length>3||1===n.length&&n[0]!==t.owner.login?null:2!==n.length||n[0]===t.owner.login&&n[1]===t.name?[]:n}const BT=/(?<marker>#|gh-|\/(?:issues|pull|discussions)\/)(?=\d)/i,FT=/(?<=^|\W)/,LT=new RegExp(/(?<ownerOrOwnerRepo>\w+(?:-\w+)*(?:\/[.\w-]+)?)/.source+"?"+BT.source+/(?<refNumber>\d+)\b/.source,"i");class HT{issueReferenceWithLeader=new RegExp(FT.source+LT.source,"ig");repository;constructor(e){this.repository=e}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return null!==e.parentNode&&["CODE","PRE","A"].includes(e.parentNode.nodeName)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}})}async filter(e){const{textContent:t}=e;if(e.nodeType!==e.TEXT_NODE||null===t||!BT.test(t))return null;let n=0;const r=[],i=t.matchAll(this.issueReferenceWithLeader);for(const e of i){if(void 0===e.groups||void 0===e.index)continue;const{marker:i,refNumber:o,ownerOrOwnerRepo:s}=e.groups;if(void 0===i||void 0===o)continue;const a=this.createLinkElement(i,o,s);if(null===a)continue;const l=t.slice(n,e.index),c=document.createTextNode(l);r.push(c),r.push(a),n=e.index+(s?.length??0)+i.length+o.length}const o=t.slice(n);return""!==o&&r.push(document.createTextNode(o)),r}createLinkElement(e,t,n){let r=`${e}${t}`;const i=MT(n,this.repository);if(null===i)return null;let[o,s]=i;void 0!==o&&void 0!==s?r=`${n}${r}`:(o=this.repository.owner.login,s=this.repository.name);const a=`${Xn(this.repository.endpoint)}/${o}/${s}/issues/${t}`,l=document.createElement("a");return l.textContent=r,l.href=a,l}}class UT{repository;beginStringNonWord=/(^|[^a-zA-Z0-9_`])/;userNameRef=/(?<userNameRef>@[a-z0-9][a-z0-9-]*_[a-zA-Z0-9]+|@[a-z0-9][a-z0-9-]*)/;withoutTrailingSlash=/(?!\/)/;dotsFollowedBySpace=/\.+[\t\W]/;dotsAtEndOfLine=/\.+$/;nonWordExceptDotOrBackTickOrHyphen=/[^0-9a-zA-Z_.`-]/;mentionRegex=new RegExp(this.beginStringNonWord.source+this.userNameRef.source+this.withoutTrailingSlash.source+"(?="+this.dotsFollowedBySpace.source+"|"+this.dotsAtEndOfLine.source+"|"+this.nonWordExceptDotOrBackTickOrHyphen.source+"|$)","ig");constructor(e){this.repository=e}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return null!==e.parentNode&&["CODE","PRE","A"].includes(e.parentNode.nodeName)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}})}async filter(e){const{textContent:t}=e;if(e.nodeType!==e.TEXT_NODE||null===t||!t.includes("@"))return null;let n=0;const r=[],i=t.matchAll(this.mentionRegex);for(const e of i){if(void 0===e.groups||void 0===e.index)continue;const{userNameRef:i}=e.groups;if(void 0===i)continue;const o=this.createLinkElement(i),s=0===e.index?0:e.index+1,a=t.slice(n,s),l=document.createTextNode(a);r.push(l),r.push(o),n=s+(i.length??0)}const o=t.slice(n);return""!==o&&r.push(document.createTextNode(o)),r}createLinkElement(e){const t=`${Xn(this.repository.endpoint)}/${e.slice(1)}`,n=document.createElement("a");return n.textContent=e,n.href=t,n}}const WT=new RegExp("^"+PR()("https://user-images.githubusercontent.com")+".+"+/(mp4|webm|ogg|mov|qt|avi|wmv|3gp|mpg|mpeg|)$/.source,"i");class $T{createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>null===this.getGithubVideoLink(e)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT})}async filter(e){const t=this.getGithubVideoLink(e);if(null===t)return null;const n=document.createElement("video");return n.src=t,[n]}getGithubVideoLink(e){return e instanceof HTMLParagraphElement&&1===e.childElementCount&&e.firstChild instanceof HTMLAnchorElement&&WT.test(e.firstChild.href)?e.firstChild.href:null}}class zT{createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return e instanceof HTMLVideoElement&&!WT.test(e.src)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}})}async filter(e){return e instanceof HTMLVideoElement&&!WT.test(e.src)?[]:null}}class qT{repository;beginStringNonWordRegix=/(^|\W)/;orgRegix=/(?<org>@[a-z0-9][a-z0-9-]*)/;teamRegix=/(?<team>\/[a-z0-9][a-z0-9\-_]*)/;teamMentionRegex=new RegExp(this.beginStringNonWordRegix.source+this.orgRegix.source+this.teamRegix.source+/\b/.source,"ig");constructor(e){this.repository=e}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>null!==e.parentNode&&["CODE","PRE","A"].includes(e.parentNode.nodeName)||null===e.textContent||!e.textContent.includes("@")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT})}async filter(e){const{textContent:t}=e;if(e.nodeType!==e.TEXT_NODE||null===t||"Organization"!==this.repository.owner.type)return null;let n=0;const r=[],i=t.matchAll(this.teamMentionRegex);for(const e of i){if(void 0===e.groups||void 0===e.index)continue;const{org:i,team:o}=e.groups;if(void 0===i||void 0===o||or(i.slice(1),this.repository.owner.login))continue;const s=this.createLinkElement(i.slice(1),o.slice(1)),a=0===e.index?0:e.index+1,l=t.slice(n,a),c=document.createTextNode(l);r.push(c),r.push(s),n=a+i.length+o.length}const o=t.slice(n);return""!==o&&r.push(document.createTextNode(o)),r}createLinkElement(e,t){const n=`${Xn(this.repository.endpoint)}/orgs/${e}/teams/${t}`,r=document.createElement("a");return r.textContent=`@${e}/${t}`,r.href=n,r}}class jT{repository;sharedLeader=/^|[\s({\[]/;sharedLeaderWithAt=new RegExp(this.sharedLeader.source+"|@");sharedLeaderWithAtAndDots=new RegExp(this.sharedLeaderWithAt.source+"|"+/\.\.|\.\.\./.source);sha=/[0-9a-f]{7,40}/;endBoundedSha=new RegExp(this.sha.source+/\b/.source);shaRange=new RegExp("(?<shaRange>(?<="+this.sharedLeaderWithAt.source+")(?<firstSha>"+this.sha.source+")"+/\.\.\./.source+"(?<lastSha>"+this.sha.source+"))"+/\b/.source);boundedSha=new RegExp("(?<boundedSha>(?<="+this.sharedLeaderWithAtAndDots.source+")(?<rawBoundedSha>"+this.sha.source+"))"+/\b/.source);ownerOrOwnerRepo=/(?<ownerOrOwnerRepo>[\w-]+\/?[\w.-]*)/;ownerSpecifiedSha=new RegExp("(?<ownerSpecifiedSha>(?<="+this.sharedLeader.source+")"+this.ownerOrOwnerRepo.source+"@(?<ownerSha>"+this.sha.source+")"+/\b/.source+")");commitShaRegexUnion=new RegExp(this.shaRange.source+"|"+this.ownerSpecifiedSha.source+"|"+this.boundedSha.source,"g");constructor(e){this.repository=e}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>null!==e.parentNode&&["CODE","PRE","A"].includes(e.parentNode.nodeName)||null===e.textContent||!this.endBoundedSha.test(e.textContent)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT})}async filter(e){const{textContent:t}=e;if(e.nodeType!==e.TEXT_NODE||null===t)return null;const n=[...t.matchAll(this.commitShaRegexUnion)];if(0===n.length)return null;let r=0;const i=[];for(const e of n){if(void 0===e.groups||void 0===e.index)continue;const n=this.createLink(e.groups);if(void 0===n)continue;const o=t.slice(r,e.index);i.push(document.createTextNode(o)),i.push(n);const{shaRange:s,ownerSpecifiedSha:a,boundedSha:l}=e.groups;r=e.index+(s??a??l??"").length}const o=t.slice(r);return""!==o&&i.push(document.createTextNode(o)),i}createLink(e){const{shaRange:t,firstSha:n,lastSha:r,ownerSpecifiedSha:i,ownerOrOwnerRepo:o,ownerSha:s,boundedSha:a,rawBoundedSha:l}=e;return void 0!==t?this.createCommitShaRangeLinkElement(n,r):void 0!==i?this.createOwnerSpecifiedCommitLinkElement(o,s):void 0!==a?this.createCommitMentionLinkElement(this.trimCommitSha(l),"commit"):void 0}createCommitShaRangeLinkElement(e,t){return this.createCommitMentionLinkElement(`${this.trimCommitSha(e)}...${this.trimCommitSha(t)}`,"compare")}createOwnerSpecifiedCommitLinkElement(e,t){const n=MT(e,this.repository);if(null===n)return;const r=this.trimCommitSha(t);if(n.length<2)return this.createCommitMentionLinkElement(r);const[i,o]=n;return this.createCommitMentionLinkElement(r,"commit",i,o,`${i}/${o}@`)}createCommitMentionLinkElement(e,t="commit",n=this.repository.owner.login,r=this.repository.name,i){const o=`${Xn(this.repository.endpoint)}/${n}/${r}/${t}/${e}`,s=document.createElement("a");return s.innerHTML=`${i??""}<tt>${e}</tt>`,s.href=o,s}trimCommitSha(e){return e.length>=30?e.slice(0,7):e}}const GT=["Commit","PullRequest"];class VT{markdownContext;repository;closesWithTextReference=new RegExp(this.closeText("closeTextWIssue").source+"(?<issueReference>"+LT.source+")");closesAtEndOfText=new RegExp(this.closeText("closeTextAtEnd").source+/$/.source);closesKeywordUnion=new RegExp("("+this.closesWithTextReference.source+")|("+this.closesAtEndOfText.source+")","ig");constructor(e,t){this.markdownContext=e,this.repository=t}closeText(e){return new RegExp(/\b/.source+`(?<${e}>`+/close[sd]?|fix(e[sd])?|resolve[sd]?/.source+")"+/(\s*:?\s+)/.source)}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>null!==e.parentNode&&["CODE","PRE","A"].includes(e.parentNode.nodeName)||null===e.textContent?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT})}async filter(e){const t=e.textContent;if(e.nodeType!==e.TEXT_NODE||null===t)return null;const n=[...t.matchAll(this.closesKeywordUnion)];if(0===n.length)return null;let r=0;const i=[];for(const o of n){if(void 0===o.groups||void 0===o.index)continue;const{closeTextWIssue:n,closeTextAtEnd:s,issueReference:a}=o.groups,l=n??s,c=a??this.getIssueReferenceFromSibling(e.nextSibling);if(void 0===c||void 0===l)return null;const u=this.createTooltipContent(l,c),h=t.slice(r,o.index);i.push(document.createTextNode(h)),i.push(u),r=o.index+l.length}const o=t.slice(r);return""!==o&&i.push(document.createTextNode(o)),i}getIssueReferenceFromSibling(e){if(null===e||!(e instanceof HTMLAnchorElement)||e.href!==e.innerText)return;const t=e.href.match(NT(this.repository));return null!==t&&void 0!==t.groups&&void 0!==t.groups.refNumber?`#${t.groups.refNumber}`:void 0}createTooltipContent(e,t){const n=document.createElement("span");return n.textContent=e,n.classList.add("issue-keyword"),n.ariaLabel=`This ${"Commit"===this.markdownContext?"commit":"pull request"} closes ${t}.`,n}}class KT{nameWithOwner=/(?<owner>-?[a-z0-9][a-z0-9\-\_]*)\/(?<name>(?:\w|\.|\-)+)/;commitPath=/^commit\/(?<pathFragment>.+)$/;comparePath=/^compare\/(?<range>.+)$/;pullCommitPath=/^pull\/(\d+)\/commits\/(?<sha>[0-9a-f]{7,40})$/;get commitMentionUrl(){const e=Xn(this.repository.endpoint);return new RegExp(PR()(e)+"/"+this.nameWithOwner.source+"/"+/(commit|pull|compare)/.source+"/"+/(\d+\/commits\/)?/.source+/([0-9a-f]{7,40})/.source+/\b/.source)}repository;constructor(e){this.repository=e}createFilterTreeWalker(e){return e.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>(null===e.parentNode||!["CODE","PRE","A"].includes(e.parentNode.nodeName))&&e instanceof HTMLAnchorElement&&e.href===e.innerText&&this.commitMentionUrl.test(e.href)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP})}async filter(e){const t=e.cloneNode(!0),{textContent:n}=t;if(!(t instanceof HTMLAnchorElement)||null===n)return null;const r=new URL(n),[,i,o]=r.pathname.split("/",3);if(void 0===i||void 0===o)return null;const s=r.pathname.substring(i.length+o.length+3);let a,l;const c=this.getRefFromCommitPath(s)??this.getRefFromComparePath(s);return null!==c?(({ref:a,filepathToAppend:l}=c),l=void 0!==l?l+r.search:r.search):a=this.getRefFromPullPath(s),null==a?null:(t.innerHTML=this.getCommitMentionRef(i,o,a,l),[t])}getRefFromCommitPath(e){const t=e.match(this.commitPath);if(null===t||void 0===t.groups)return null;const{pathFragment:n}=t.groups,r=n.indexOf("/"),i=r>=0?n.slice(0,r):n,o=r>=0?n.slice(r):void 0;if(void 0===i)return null;const[s,a]=i.split(".");return void 0===s||this.isReservedCommitActionPath(o)||void 0!==a?null:{ref:this.trimCommitSha(s),filepathToAppend:o}}getRefFromComparePath(e){const t=e.match(this.comparePath);if(null===t||void 0===t.groups)return null;const{range:n}=t.groups;if(/\.(diff|path)$/.test(n))return null;const r=n.split("...");if(r.length>2)return null;const i=r[1].indexOf("/"),o=i>=0?r[1].slice(0,i):r[1];return{ref:`${this.trimCommitSha(r[0])}...${this.trimCommitSha(o)}`,filepathToAppend:i>=0?r[1].slice(i):void 0}}getRefFromPullPath(e){const t=e.match(this.pullCommitPath);return null===t||void 0===t.groups?null:this.trimCommitSha(t.groups.sha)}isReservedCommitActionPath(e){return void 0!==e&&(["checks_state_summary","hovercard","rollup","show_partial"].includes(e)||["_render_node","checks"].includes(e.split("/")[0]))}getCommitMentionRef(e,t,n,r){return`${e!==this.repository.owner.login||t!==this.repository.name?`${e}/${t}@`:""}<tt>${this.trimCommitSha(n)}</tt>${r??""}`}trimCommitSha(e){return e.length>=30?e.slice(0,7):e}}const YT=mr((e=>{const{emoji:t,repository:n,markdownContext:r}=e,i=[];return void 0!==n&&(void 0!==r&&function(e){return GT.includes(e)}(r)&&i.push(new VT(r,n)),i.push(new HT(n),new OT(n))),i.push(new _T(t)),void 0!==n&&i.push(new qT(n),new UT(n),new jT(n),new KT(n)),i.push(new zT,new $T),i}));async function XT(e,t){const n=e.createFilterTreeWalker(t);let r=n.nextNode();for(;null!==r;){const t=await e.filter(r),i=r;if(r=n.nextNode(),null!==t){for(const e of t)i.parentNode?.insertBefore(e,i);i.parentNode?.removeChild(i)}}}class QT extends st.Emitter{markdown;constructor(e=null){super(),this.markdown=e}onMarkdownUpdated(e){return null!==this.markdown&&e(this.markdown),super.on("markdown",e)}emit(e){this.markdown=e,super.emit("markdown",e)}get latestMarkdown(){return this.markdown}}class ZT extends be.PureComponent{frameRef=null;frameContainingDivRef=null;contentDivRef=null;markdownEmitter;resizeObserver;resizeDebounceId=null;onDocumentScroll=hC()((()=>{this.setState({tooltipOffset:this.frameRef?.getBoundingClientRect()??new DOMRect})}),100);onMarkdownUpdated=hC()((e=>this.mountIframeContents(e)),10,{leading:!0});constructor(e){super(e),this.resizeObserver=new ResizeObserver(this.scheduleResizeEvent),this.state={tooltipElements:[]}}scheduleResizeEvent=()=>{null!==this.resizeDebounceId&&(cancelAnimationFrame(this.resizeDebounceId),this.resizeDebounceId=null),this.resizeDebounceId=requestAnimationFrame(this.onContentResized)};onContentResized=()=>{null!==this.frameRef&&this.setFrameContainerHeight(this.frameRef)};onFrameRef=e=>{this.frameRef=e};onFrameContainingDivRef=e=>{this.frameContainingDivRef=e};initializeMarkdownEmitter=()=>{void 0!==this.markdownEmitter&&this.markdownEmitter.dispose();const{emoji:e,repository:t,markdownContext:n}=this.props;this.markdownEmitter="string"!=typeof this.props.markdown?this.props.markdown:function(e,t){const n=IT(e,{gfm:!0,breaks:!0}),r=Kx().sanitize(n),i=new QT(r);return void 0!==t&&function(e,t){!async function(e,t){if(null===t.latestMarkdown||t.disposed)return;const n=(new DOMParser).parseFromString(t.latestMarkdown,"text/html");for(const r of e){if(await XT(r,n),t.disposed)break;t.emit(n.documentElement.innerHTML)}}(YT(t),e)}(i,t),i}(this.props.markdown,{emoji:e,repository:t,markdownContext:n}),this.markdownEmitter.onMarkdownUpdated((e=>{this.onMarkdownUpdated(e)}))};async componentDidMount(){this.initializeMarkdownEmitter(),null!==this.frameRef&&this.setupFrameLoadListeners(this.frameRef),document.addEventListener("scroll",this.onDocumentScroll,{capture:!0})}async componentDidUpdate(e){e.markdown!==this.props.markdown&&this.initializeMarkdownEmitter()}componentWillUnmount(){this.markdownEmitter?.dispose(),this.resizeObserver.disconnect(),document.removeEventListener("scroll",this.onDocumentScroll)}async getInlineStyleSheet(){const t=await(0,y.readFile)(e.join(__dirname,"static","markdown.css"),"utf8"),n=getComputedStyle(document.body);function r(e){return`${e}: ${n.getPropertyValue(e)};`}return`<style>\n      :root {\n        ${r("--md-border-default-color")}\n        ${r("--md-border-muted-color")}\n        ${r("--md-canvas-default-color")}\n        ${r("--md-canvas-subtle-color")}\n        ${r("--md-fg-default-color")}\n        ${r("--md-fg-muted-color")}\n        ${r("--md-danger-fg-color")}\n        ${r("--md-neutral-muted-color")}\n        ${r("--md-accent-emphasis-color")}\n        ${r("--md-accent-fg-color")}\n\n        ${r("--font-size")}\n        ${r("--font-size-sm")}\n        ${r("--text-color")}\n        ${r("--background-color")}\n      }\n      ${t}\n    </style>`}setupFrameLoadListeners(e){e.addEventListener("load",(()=>{this.setupContentDivRef(e),this.setupLinkInterceptor(e),this.setupTooltips(e),this.setFrameContainerHeight(e)}))}setupTooltips(e){if(null===e.contentDocument)return;const t=new Array;for(const n of e.contentDocument.querySelectorAll("[aria-label]"))e.contentWindow?.HTMLElement&&n instanceof e.contentWindow.HTMLElement&&t.push(n);this.setState({tooltipElements:t,tooltipOffset:e.getBoundingClientRect()})}setupContentDivRef(e){null!==e.contentDocument&&(this.contentDivRef=e.contentDocument.documentElement.querySelector("#content"),null!==this.contentDivRef&&(this.resizeObserver.disconnect(),this.resizeObserver.observe(this.contentDivRef)))}setFrameContainerHeight(e){if(null===e.contentDocument||null===this.frameContainingDivRef||null===this.contentDivRef)return;const t=this.contentDivRef.clientHeight;this.frameContainingDivRef.style.height=`${t}px`,this.props.onMarkdownParsed?.()}setupLinkInterceptor(e){e.contentDocument?.addEventListener("click",(t=>{const{contentWindow:n}=e;if(n&&t.target instanceof n.Element){const e=t.target.closest("a");null!==e&&(t.preventDefault(),/^https?:/.test(e.protocol)&&this.props.onMarkdownLinkClicked?.(e.href))}}))}getBaseTag(e){if(void 0===e)return"";const t=document.createElement("base");return t.href=e,t.outerHTML}async mountIframeContents(e){if(null===this.frameRef)return;const t=await this.getInlineStyleSheet(),n=`\n      <html>\n        <head>\n          ${this.getBaseTag(this.props.baseHref)}\n          ${t}\n        </head>\n        <body class="markdown-body">\n          <div id="content">\n          ${e}\n          </div>\n        </body>\n      </html>\n    `,r=Buffer.from(n,"utf8").toString("base64");null!==this.frameRef&&(this.frameRef.src=`data:text/html;charset=utf-8;base64,${r}`)}render(){const{tooltipElements:e,tooltipOffset:t}=this.state;return be.createElement("div",{className:"sandboxed-markdown-iframe-container",ref:this.onFrameContainingDivRef},be.createElement("iframe",{title:"沙盒 Markdown 组件",className:"sandboxed-markdown-component",sandbox:"",ref:this.onFrameRef}),e.map((e=>be.createElement(Jr,{target:ri(e),key:Gx(e),tooltipOffset:t},e.ariaLabel))))}}class JT extends be.Component{quickViewRef=be.createRef();get quickViewHeight(){return this.quickViewRef.current?.clientHeight??556}constructor(e){super(e),this.state={top:this.calculatePosition(e.pullRequestItemTop,this.quickViewHeight)}}componentDidUpdate=e=>{e.pullRequest.pullRequestNumber!==this.props.pullRequest.pullRequestNumber&&this.updateQuickViewPosition()};updateQuickViewPosition=()=>{this.setState({top:this.calculatePosition(this.props.pullRequestItemTop,this.quickViewHeight)})};onMarkdownParsed=()=>{this.updateQuickViewPosition()};onViewOnGitHub=()=>{this.props.dispatcher.showPullRequestByPR(this.props.pullRequest)};onMouseLeave=()=>{this.props.onMouseLeave()};getTopPRList(){return document.getElementById("foldout-container")?.getBoundingClientRect().top??50}calculatePosition(e,t){const n=this.getTopPRList(),r=window.innerHeight-n-t;return window.innerHeight-e>t?lc(e-n,0,r):lc(e-t>0?e-n-t+47:e+23.5-t/2,0,r)}getPointerPosition(e){return{top:this.props.pullRequestItemTop-this.getTopPRList()-e+23.5}}onMarkdownLinkClicked=e=>{this.props.dispatcher.openInBrowser(e)};renderHeader=()=>be.createElement("header",{className:"header"},be.createElement(si,{symbol:Gi}),be.createElement("div",{className:"action-needed"},"Review requested"),be.createElement(ii,{className:"button-with-icon",onClick:this.onViewOnGitHub},"在GitHub上查看",be.createElement(si,{symbol:ji})));renderPRStatus(e){return be.createElement("div",{className:Vr()("status",{draft:e})},be.createElement(si,{className:"icon",symbol:e?Ui:Hi}),be.createElement("span",{className:"state"},e?"Draft":"Open"))}renderPR=()=>{const{title:e,pullRequestNumber:t,base:n,body:r,draft:i}=this.props.pullRequest,o=null!=r&&""!==r.trim()?r:"_No description provided._";return be.createElement("div",{className:"pull-request"},this.renderPRStatus(i),be.createElement("div",{className:"title"},be.createElement("h2",null,e),be.createElement(tD,{number:t,dispatcher:this.props.dispatcher,repository:n.gitHubRepository})),be.createElement(ZT,{markdown:o,emoji:this.props.emoji,baseHref:n.gitHubRepository.htmlURL??void 0,repository:n.gitHubRepository,markdownContext:"PullRequest",onMarkdownLinkClicked:this.onMarkdownLinkClicked,onMarkdownParsed:this.onMarkdownParsed}))};render(){const{top:e}=this.state;return be.createElement("div",{className:"pull-request-quick-view",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.onMouseLeave,style:{top:e},ref:this.quickViewRef},be.createElement("div",{className:"pull-request-quick-view-contents"},this.renderHeader(),this.renderPR()),be.createElement("div",{className:"pull-request-pointer",style:this.getPointerPosition(e)}))}}class eD extends be.Component{static getDerivedStateFromProps(e,t){return t.currentPullRequest!==e.currentPullRequest?{currentPullRequest:e.currentPullRequest,selectedPullRequest:e.currentPullRequest}:null}pullRequestQuickViewTimerId=null;constructor(e){super(e),this.state={selectedBranch:e.currentBranch,selectedPullRequest:e.currentPullRequest,currentPullRequest:e.currentPullRequest,branchFilterText:"",pullRequestBeingViewed:null}}componentWillUnmount=()=>{this.clearPullRequestQuickViewTimer()};render(){return be.createElement("div",{className:"branches-container"},this.renderTabBar(),this.renderSelectedTab(),this.renderMergeButtonRow(),this.renderPullRequestQuickView())}renderPullRequestQuickView=()=>{if(!Ft()||null===this.state.pullRequestBeingViewed)return null;const{pr:e,prListItemTop:t}=this.state.pullRequestBeingViewed;return be.createElement(JT,{dispatcher:this.props.dispatcher,emoji:this.props.emoji,pullRequest:e,pullRequestItemTop:t,onMouseEnter:this.onMouseEnterPullRequestQuickView,onMouseLeave:this.onMouseLeavePullRequestQuickView})};onMouseEnterPullRequestQuickView=()=>{this.clearPullRequestQuickViewTimer()};onMouseLeavePullRequestQuickView=()=>{this.setState({pullRequestBeingViewed:null}),this.clearPullRequestQuickViewTimer()};renderMergeButtonRow(){const{currentBranch:e}=this.props;return null===e?null:be.createElement(mC,{className:"merge-button-row"},be.createElement(ii,{className:"merge-button",onClick:this.onMergeClick,tooltip:`选择一个分支合并到 ${e.name}`},be.createElement(si,{className:"icon",symbol:Li}),"选择一个分支合并到 ",be.createElement("strong",null,e.name)))}renderOpenPullRequestsBubble(){const e=this.props.pullRequests;return e.length>0?be.createElement("span",{className:"count"},e.length):null}renderTabBar(){return this.props.repository.gitHubRepository?be.createElement(KE,{onTabClicked:this.onTabClicked,selectedIndex:this.props.selectedTab,allowDragOverSwitching:!0},be.createElement("span",{id:"branches-tab"},"Branches"),be.createElement("span",{id:"pull-requests-tab",className:"pull-request-tab"},"Pull Requests",this.renderOpenPullRequestsBubble())):null}renderBranch=(e,t)=>zx(e,t,this.props.currentBranch,this.onDropOntoBranch,this.onDropOntoCurrentBranch);getBranchAriaLabel=e=>qx(e);renderSelectedTab(){const{selectedTab:e,repository:t}=this.props,n=e!==tl.Branches&&t.gitHubRepository?"pull-requests-tab":"branches-tab";return be.createElement("div",{role:"tabpanel","aria-labelledby":n,className:"branches-container-panel"},this.renderSelectedTabContent())}renderSelectedTabContent(){let e=this.props.selectedTab;switch(this.props.repository.gitHubRepository||(e=tl.Branches),e){case tl.Branches:return be.createElement(Dx,{defaultBranch:this.props.defaultBranch,currentBranch:this.props.currentBranch,allBranches:this.props.allBranches,recentBranches:this.props.recentBranches,onItemClick:this.onBranchItemClick,filterText:this.state.branchFilterText,onFilterTextChanged:this.onBranchFilterTextChanged,selectedBranch:this.state.selectedBranch,onSelectionChanged:this.onBranchSelectionChanged,canCreateNewBranch:!0,onCreateNewBranch:this.onCreateBranchWithName,renderBranch:this.renderBranch,getBranchAriaLabel:this.getBranchAriaLabel,hideFilterRow:Zs.isDragOfTypeInProgress(Js.Commit),renderPreList:this.renderPreList,onRenameBranch:this.props.onRenameBranch,onDeleteBranch:this.props.onDeleteBranch});case tl.PullRequests:return this.renderPullRequests();default:return et(0,`Unknown Branches tab: ${e}`)}}renderPreList=()=>Zs.isDragOfTypeInProgress(Js.Commit)?be.createElement("div",{className:"branches-list-item new-branch-drop",onMouseEnter:this.onMouseEnterNewBranchDrop,onMouseLeave:this.onMouseLeaveNewBranchDrop,onMouseUp:this.onMouseUpNewBranchDrop},be.createElement(si,{className:"icon",symbol:Zi}),be.createElement("div",{className:"name"},"新建分支")):null;onMouseUpNewBranchDrop=async()=>{const{dragData:e}=Zs;if(null===e||e.type!==Js.Commit)return;const{dispatcher:t,repository:n,currentBranch:r}=this.props;await t.setCherryPickCreateBranchFlowStep(n,"",e.commits,r),this.props.dispatcher.showPopup({type:nl.MultiCommitOperation,repository:n})};onMouseEnterNewBranchDrop=()=>{Zs.emitEnterDropTarget({type:ea.Branch,branchName:"a new branch"})};onMouseLeaveNewBranchDrop=()=>{Zs.emitLeaveDropTarget()};renderPullRequests(){const e=this.props.repository;if(!_r(e))return null;const t=this.props.defaultBranch&&this.props.currentBranch&&this.props.defaultBranch.name===this.props.currentBranch.name;return be.createElement(Lx,{key:"pr-list",pullRequests:this.props.pullRequests,selectedPullRequest:this.state.selectedPullRequest,isOnDefaultBranch:!!t,onSelectionChanged:this.onPullRequestSelectionChanged,onCreateBranch:this.onCreateBranch,onDismiss:this.onDismiss,dispatcher:this.props.dispatcher,repository:e,isLoadingPullRequests:this.props.isLoadingPullRequests,onMouseEnterPullRequest:this.onMouseEnterPullRequestListItem,onMouseLeavePullRequest:this.onMouseLeavePullRequestListItem})}onMouseEnterPullRequestListItem=(e,t)=>{this.clearPullRequestQuickViewTimer(),this.setState({pullRequestBeingViewed:null}),this.pullRequestQuickViewTimerId=window.setTimeout((()=>this.setState({pullRequestBeingViewed:{pr:e,prListItemTop:t}})),250)};onMouseLeavePullRequestListItem=async()=>{this.clearPullRequestQuickViewTimer(),this.pullRequestQuickViewTimerId=window.setTimeout((()=>this.setState({pullRequestBeingViewed:null})),500)};onTabClicked=e=>{this.props.dispatcher.changeBranchesTab(e)};onDismiss=()=>{this.props.dispatcher.closeFoldout(je.Branch)};onMergeClick=()=>{this.props.dispatcher.closeFoldout(je.Branch),this.props.dispatcher.startMergeBranchOperation(this.props.repository)};onBranchItemClick=e=>{const{repository:t,dispatcher:n}=this.props;n.closeFoldout(je.Branch);const r=bE("checkout branch from list",t);n.checkoutBranch(t,e).then((()=>r.done()))};onBranchSelectionChanged=e=>{this.setState({selectedBranch:e})};onBranchFilterTextChanged=e=>{this.setState({branchFilterText:e})};onCreateBranchWithName=e=>{const{repository:t,dispatcher:n}=this.props;n.closeFoldout(je.Branch),n.showPopup({type:nl.CreateBranch,repository:t,initialName:e})};onCreateBranch=()=>{this.onCreateBranchWithName("")};onPullRequestSelectionChanged=e=>{this.setState({selectedPullRequest:e})};onDropOntoBranch=e=>{const t=this.props.allBranches.find((t=>t.name===e));void 0!==t?Zs.isDragOfType(Js.Commit)&&this.props.dispatcher.startCherryPickWithBranch(this.props.repository,t):log.warn("[branches-container] - Branch name of branch dropped on does not exist.")};onDropOntoCurrentBranch=()=>{Zs.isDragOfType(Js.Commit)&&this.props.dispatcher.incrementMetric("dragStartedAndCanceledCount")};clearPullRequestQuickViewTimer=()=>{null!==this.pullRequestQuickViewTimerId&&(window.clearTimeout(this.pullRequestQuickViewTimerId),this.pullRequestQuickViewTimerId=null)}}class tD extends be.Component{badgeRef=null;badgeBoundingBottom=0;constructor(e){super(e),this.state={isStatusShowing:!1}}componentDidUpdate(){null!==this.badgeRef&&this.badgeRef.getBoundingClientRect().bottom!==this.badgeBoundingBottom&&(this.badgeBoundingBottom=this.badgeRef.getBoundingClientRect().bottom,this.props.onBadgeBottomPositionUpdate?.(this.badgeBoundingBottom))}onRef=e=>{this.badgeRef=e,this.props.onBadgeRef?.(e)};onBadgeClick=e=>{this.state.isStatusShowing&&(e.stopPropagation(),this.props.onBadgeClick?.())};onCheckChange=e=>{this.setState({isStatusShowing:null!==e})};render(){const e=ya(this.props.number);return be.createElement("div",{className:"pr-badge",onClick:this.onBadgeClick,ref:this.onRef},be.createElement("span",{className:"number"},"#",this.props.number),be.createElement(Ax,{commitRef:e,dispatcher:this.props.dispatcher,repository:this.props.repository,onCheckChange:this.onCheckChange}))}}class nD extends be.PureComponent{onViewJobStepExternally=()=>{this.props.onViewJobStepExternally(this.props.step)};onStepHeaderRef=e=>t=>{void 0!==this.props.firstFailedStep&&e.number===this.props.firstFailedStep.number&&null!==t&&t.scrollIntoView({behavior:"smooth",block:"start"})};render(){const{step:e}=this.props;return be.createElement("div",{className:"ci-check-run-job-step list-item",ref:this.onStepHeaderRef(e)},be.createElement("div",{className:"job-step-status-symbol"},be.createElement(si,{className:Vr()("ci-status",`ci-status-${Ix(e)}`),symbol:_x(e)})),be.createElement(Xo,{className:"job-step-name",tooltip:e.name,onlyWhenOverflowed:!0,tagName:"div",direction:Zr.NORTH},be.createElement("span",{onClick:this.onViewJobStepExternally},e.name)),be.createElement("div",{className:"job-step-duration"},function(e){const t=Ta(e);return isNaN(t)?"":Ea(t)}(e)))}}class rD extends be.PureComponent{constructor(e){super(e),this.state={firstFailedStep:this.props.steps.find(Ia)}}componentDidUpdate(){this.setState({firstFailedStep:this.props.steps.find(Ia)})}render(){const{steps:e}=this.props,t=e.map(((e,t)=>be.createElement(nD,{key:t,step:e,firstFailedStep:this.state.firstFailedStep,onViewJobStepExternally:this.props.onViewJobStep})));return be.createElement("div",{className:"ci-check-run-job-steps-list"},t)}}class iD extends be.PureComponent{constructor(e){super(e),this.state={isMouseOver:!1}}toggleCheckRunExpansion=()=>{this.props.onCheckRunExpansionToggleClick(this.props.checkRun)};onViewCheckExternally=()=>{this.props.onViewCheckExternally?.(this.props.checkRun)};onViewJobStep=e=>{this.props.onViewJobStep?.(this.props.checkRun,e)};rerunJob=e=>{e.stopPropagation(),void 0!==this.props.checkRun.actionJobSteps&&this.props.onRerunJob?.(this.props.checkRun)};onMouseEnter=()=>{this.state.isMouseOver||this.setState({isMouseOver:!0})};onMouseLeave=e=>{this.setState({isMouseOver:!1})};renderCheckStatusSymbol=()=>{const{checkRun:e}=this.props;return be.createElement("div",{className:"ci-check-status-symbol"},be.createElement(si,{className:Vr()("ci-status",`ci-status-${Ix(e)}`),symbol:Px(e)}))};renderCheckJobStepToggle=()=>{const{checkRun:e,isCheckRunExpanded:t,selectable:n,notExpandable:r}=this.props;return void 0===e.actionJobSteps||n||!0===r?null:be.createElement("div",{className:"job-step-toggled-indicator"},be.createElement(si,{symbol:t?gi:mi}))};renderCheckRunName=()=>{const{checkRun:e,isCondensedView:t,onViewCheckExternally:n}=this.props,{name:r,description:i}=e;return be.createElement("div",{className:"ci-check-list-item-detail"},be.createElement(Xo,{className:"ci-check-name",tooltip:r,onlyWhenOverflowed:!0,tagName:"div",direction:Zr.NORTH},be.createElement("span",{className:Vr()({isLink:void 0!==n}),onClick:this.onViewCheckExternally},r)),t?null:be.createElement("div",{className:"ci-check-description"},i))};renderJobRerun=()=>{const{checkRun:e,onRerunJob:t}=this.props,{isMouseOver:n}=this.state;if(!n||void 0===t)return null;const r=Vr()("job-rerun",{"not-action-job":void 0===e.actionJobSteps}),i=void 0!==e.actionJobSteps?"Re-run this check":"This check cannot be re-run individually.";return be.createElement("div",{className:r,onClick:this.rerunJob},be.createElement(Xo,{tooltip:i},be.createElement(si,{symbol:lo})))};render(){const{checkRun:e,isCheckRunExpanded:t,selected:n,isCondensedView:r}=this.props,i=Vr()("ci-check-list-item","list-item",{sticky:t,selected:n,condensed:r});return be.createElement("div",{className:"ci-check-list-item-group",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},be.createElement("div",{className:i,onClick:this.toggleCheckRunExpansion,tabIndex:0},this.renderCheckStatusSymbol(),this.renderCheckRunName(),this.renderJobRerun(),this.renderCheckJobStepToggle()),t&&void 0!==e.actionJobSteps?be.createElement(rD,{steps:e.actionJobSteps,onViewJobStep:this.onViewJobStep}):null)}}class oD extends be.PureComponent{constructor(e){super(e),this.state=this.setupStateAfterCheckRunPropChange(this.props,null)}componentDidUpdate(e){const{checkRunExpanded:t,hasUserToggledCheckRun:n}=this.setupStateAfterCheckRunPropChange(this.props,this.state);let r=!1;for(const t of e.checkRuns)if(void 0!==this.props.checkRuns.find((e=>e.id===t.id&&e.status!==t.status))){r=!0;break}r?this.setState({checkRunExpanded:t,hasUserToggledCheckRun:n,checkRunGroups:Fa(this.props.checkRuns)}):this.setState({checkRunExpanded:t,hasUserToggledCheckRun:n})}setupStateAfterCheckRunPropChange(e,t){if(!0===t?.hasUserToggledCheckRun)return t;const n=Fa(e.checkRuns);let r=null;if(!0!==this.props.notExpandable)for(const e of n.values()){const t=e.find((e=>Ia(e)&&void 0!==e.actionJobSteps));if(void 0!==t){r=t.id.toString();break}}return{checkRunGroups:n,checkRunExpanded:r,hasUserToggledCheckRun:t?.hasUserToggledCheckRun||!1}}onCheckRunClick=e=>{if(!0===this.props.notExpandable)return;const t=this.state.checkRunExpanded!==e.id.toString()||this.props.selectable?e.id.toString():null;this.setState({checkRunExpanded:t,hasUserToggledCheckRun:!0}),this.props.onCheckRunClick?.(e)};renderListItems=e=>{if(void 0===e)return null;const t=e.map(((e,t)=>{const n=this.state.checkRunExpanded===e.id.toString(),r=!0===this.props.selectable;return be.createElement(iD,{checkRun:e,key:t,loadingActionLogs:this.props.loadingActionLogs,loadingActionWorkflows:this.props.loadingActionWorkflows,selectable:r,selected:r&&n,isCheckRunExpanded:!r&&n,notExpandable:this.props.notExpandable,onCheckRunExpansionToggleClick:this.onCheckRunClick,onViewCheckExternally:this.props.onViewCheckDetails,onViewJobStep:this.props.onViewJobStep,onRerunJob:this.props.onRerunJob,isCondensedView:this.props.isCondensedView})}));return be.createElement(Vs,{className:"list-focus-container"},t)};renderList=()=>{const{checkRunGroups:e}=this.state,t=La(e);if(1===t.length&&("Other"===t[0]||this.props.isCondensedView))return this.renderListItems(this.props.checkRuns);const n=Vr()("ci-check-run-list-group-header",{condensed:this.props.isCondensedView}),r=t.map(((t,r)=>be.createElement("div",{className:"ci-check-run-list-group",key:r},be.createElement("div",{className:n},t),this.renderListItems(e.get(t)))));return be.createElement(be.Fragment,null,r)};render(){return be.createElement("div",{className:"ci-check-run-list"},this.renderList())}}class sD extends be.Component{render(){const{valueMap:e}=this.props,{paths:t,height:n,width:r}=function(e,t=15,n=9){const r=2*t,i=[...e.values()].reduce(((e,t)=>e+t)),o=r/2,s=o,a=[];let l=0;for(const[r,c]of[...e.entries()]){if(0===c)continue;const e=c/i;if(1===e){const e=o-.01,i=s-t,l=s-n,c=["M",o,i];c.push("A",t,t,0,1,1,e,i),c.push("L",e,l),c.push("A",n,n,0,1,0,o,l),a.push({name:r,path:c.join(" ")});continue}const u=l+c,h=["M",...aD(l,t,o,i)];h.push("A",t,t,0),h.push(e>.5?1:0),h.push(1),h.push(...aD(u,t,o,i)),h.push("L"),h.push(...aD(u,n,o,i)),h.push("A",n,n,0),h.push(e>.5?1:0),h.push(0),h.push(...aD(l,n,o,i)),l+=c,a.push({name:r,path:h.join(" ")})}return{paths:a,height:r,width:r}}(e),i=`0 0 ${r} ${n}`,o=t.map(((e,t)=>be.createElement("path",{key:t,className:e.name,d:e.path})));return be.createElement("svg",{"aria-label":this.props.ariaLabel,className:"donut",version:"1.1",viewBox:i,tabIndex:-1},o)}}function aD(e,t,n,r){const i=e/r*Math.PI*2-Math.PI/2;return[t*Math.cos(i)+n,t*Math.sin(i)+n]}class lD extends be.PureComponent{get failedChecksExist(){return this.props.checkRuns.some((e=>e.conclusion===Un.Failure))}onRerunChecks=()=>{this.props.canReRunFailed&&this.failedChecksExist?lC([{label:"重新运行失败的检查",action:()=>this.props.onRerunChecks(!0)},{label:"重新运行所有检查",action:()=>this.props.onRerunChecks(!1)}]):this.props.onRerunChecks(!1)};render(){const e=this.props.canReRunFailed&&this.failedChecksExist?be.createElement(be.Fragment,null,"Re-run ",be.createElement(si,{symbol:uo})):"Re-run Checks";return be.createElement(ii,{onClick:this.onRerunChecks,disabled:this.props.disabled},be.createElement(si,{symbol:Ko})," ",e)}}const cD=St(__dirname,"static/empty-no-pull-requests.svg");class uD extends be.PureComponent{statusSubscription=null;constructor(e){super(e);const t=this.props.dispatcher.tryGetCommitStatus(this.props.repository,ya(this.props.prNumber));this.state={checkRuns:t?.checks??[],checkRunSummary:this.getCombinedCheckSummary(t),loadingActionLogs:!0,loadingActionWorkflows:!0}}componentDidMount(){const e=this.props.dispatcher.tryGetCommitStatus(this.props.repository,ya(this.props.prNumber),this.props.branchName);this.onStatus(e),this.subscribe()}componentWillUnmount(){this.unsubscribe()}subscribe(){this.unsubscribe(),this.statusSubscription=this.props.dispatcher.subscribeToCommitStatus(this.props.repository,ya(this.props.prNumber),this.onStatus,this.props.branchName)}unsubscribe(){this.statusSubscription&&(this.statusSubscription.dispose(),this.statusSubscription=null)}onStatus=async e=>{null!==e&&this.setState({checkRuns:[...e.checks],checkRunSummary:this.getCombinedCheckSummary(e),loadingActionWorkflows:!1,loadingActionLogs:!1})};onViewCheckDetails=e=>{if(null===e.htmlUrl&&null===this.props.repository.htmlURL)return;const t=e.htmlUrl??`${this.props.repository.htmlURL}/pull/${this.props.prNumber}`;this.props.dispatcher.openInBrowser(t),this.props.dispatcher.incrementMetric("viewsCheckOnline")};onViewJobStep=(e,t)=>{const{repository:n,prNumber:r,dispatcher:i}=this.props,o=Ba(e,t,n,r);null!==o&&(i.openInBrowser(o),this.props.dispatcher.incrementMetric("viewsCheckJobStepOnline"))};getCombinedCheckSummary(e){if(null===e||0===e.checks.length)return"";const{checks:t}=e,n=new Map;for(const e of t){const t=Ra(e.conclusion).toLocaleLowerCase();n.set(t,(n.get(t)??0)+1)}const r=[];for(const[e,t]of n.entries())r.push({count:t,conclusion:e});if(r.length>1){const e=r.map((({count:e,conclusion:t})=>`${e} ${t}`));return`${e.slice(0,-1).join(", ")}, and ${e.slice(-1)} checks`}const i=r[0].count>1?"checks":"check";return`${r[0].count} ${r[0].conclusion} ${i}`}rerunChecks=(e,t)=>{this.props.dispatcher.showPopup({type:nl.CICheckRunRerun,checkRuns:t??this.state.checkRuns,repository:this.props.repository,prRef:ya(this.props.prNumber),failedOnly:e})};renderRerunButton=()=>{const{checkRuns:e}=this.state;return Tn(this.props.repository.endpoint)?be.createElement(lD,{disabled:0===e.length||this.state.loadingActionWorkflows,checkRuns:e,canReRunFailed:Dn(this.props.repository.endpoint),onRerunChecks:this.rerunChecks}):null};renderCheckRunLoadings(){return be.createElement("div",{className:"loading-check-runs"},be.createElement("img",{src:cD,className:"blankslate-image",alt:""}),be.createElement("div",{className:"title"},"Stand By"),be.createElement("div",{className:"call-to-action"},"Check runs incoming!"))}renderCompletenessIndicator(e,t,n,r){if(n)return be.createElement(si,{symbol:Ko,className:"spin"});switch(!0){case e:return be.createElement(si,{className:"completeness-indicator-success",symbol:di});case t:return be.createElement(si,{className:"completeness-indicator-error",symbol:yo})}const i=function(e){const t=new Map;return e.forEach((e=>{const n=e.conclusion??e.status,r=t.get(n)??0;t.set(n,r+1)})),t}(r),o=`Completeness indicator. ${i.get(Hn.Completed)??0} completed, ${i.get(Hn.InProgress)??0} in progress, ${i.get(Hn.Queued)??0} queued.`;return be.createElement(sD,{ariaLabel:o,valueMap:i})}getTitle(e,t,n,r){switch(!0){case r:return be.createElement(be.Fragment,null,"Checks Summary");case n:return be.createElement("span",{className:"pending"},"Some checks haven't completed yet");case t:return be.createElement("span",{className:"failure"},"All checks have failed");case e:return be.createElement(be.Fragment,null,"All checks have passed")}return be.createElement("span",{className:"failure"},"Some checks were not successful")}renderHeader=()=>{const{loadingActionWorkflows:e,checkRuns:t,checkRunSummary:n}=this.state,r=e&&0===t.length,i=!r&&t.some((e=>null===e.conclusion))&&!t.some((e=>null!==e.conclusion&&Ha.includes(e.conclusion))),o=[Un.Success,Un.Neutral,Un.Skipped],s=!r&&!i&&!t.some((e=>null!==e.conclusion&&!o.includes(e.conclusion))),a=!r&&!i&&!t.some((e=>null===e.conclusion||!Ha.includes(e.conclusion)));return be.createElement("div",{className:"ci-check-run-list-header",tabIndex:0},be.createElement("div",{className:"completeness-indicator"},this.renderCompletenessIndicator(s,a,r,t)),be.createElement("div",{id:"ci-check-run-header",className:"ci-check-run-list-title-container"},be.createElement("div",{className:"title"},this.getTitle(s,a,i,r)),be.createElement("div",{className:"check-run-list-summary"},n)),this.renderRerunButton())};onRerunJob=e=>{this.rerunChecks(!1,[e])};renderList=()=>{const{checkRuns:e,loadingActionLogs:t,loadingActionWorkflows:n}=this.state;return n?this.renderCheckRunLoadings():be.createElement("div",{className:"ci-check-run-list-container"},be.createElement(oD,{checkRuns:e,loadingActionLogs:t,loadingActionWorkflows:n,onViewCheckDetails:this.onViewCheckDetails,onViewJobStep:this.onViewJobStep,onRerunJob:Dn(this.props.repository.endpoint)?this.onRerunJob:void 0}))};render(){return be.createElement("div",{className:"ci-check-list-popover"},be.createElement(eE,{anchor:this.props.anchor,anchorPosition:XS.Bottom,decoration:ZS.Balloon,ariaLabelledby:"ci-check-run-header",onClickOutside:this.props.closePopover},be.createElement("div",{className:"ci-check-run-list-wrapper"},this.renderHeader(),this.renderList())))}}class hD extends be.Component{badgeRef=null;renderBranchFoldout=()=>{const e=this.props.repositoryState,t=e.branchesState,n=e.branchesState.tip,r=n.kind===Ar.Valid?n.branch:null;return be.createElement(eD,{allBranches:t.allBranches,recentBranches:t.recentBranches,currentBranch:r,defaultBranch:t.defaultBranch,dispatcher:this.props.dispatcher,repository:this.props.repository,selectedTab:this.props.selectedTab,pullRequests:this.props.pullRequests,currentPullRequest:this.props.currentPullRequest,isLoadingPullRequests:this.props.isLoadingPullRequests,emoji:this.props.emoji,onDeleteBranch:this.onDeleteBranch,onRenameBranch:this.onRenameBranch})};onDropDownStateChanged=e=>{"open"===e&&this.props.repositoryState.checkoutProgress||this.props.onDropDownStateChanged(e)};render(){const{repositoryState:e,enableFocusTrap:t}=this.props,{branchesState:n,checkoutProgress:r,changesState:i}=e,{tip:o}=n,{conflictState:s}=i,a=o.kind;let l,c,u,h,p=Bi,d="当前分支",m=!0,f=!1;if(this.props.currentPullRequest&&(p=Hi),o.kind===Ar.Unknown)return null;if(o.kind===Ar.Unborn)c=o.ref,u=`当前分支是 ${o.ref}`,m=n.allBranches.some((e=>!e.isDesktopForkRemoteBranch));else if(o.kind===Ar.Detached)c=`On ${o.currentSha.substring(0,7)}`,u="Currently on a detached HEAD",p=Fi,d="Detached HEAD";else{if(o.kind!==Ar.Valid)return et(0,`Unknown tip state: ${a}`);c=u=o.branch.name}r?(c=r.target,d=r.description,r.value>0&&(d=`${d} (${Math.round(100*r.value)}%)`),u=`Checking out ${r.target}`,h=r.value,p=Ko,l="spin",m=!1):null!==s&&Qe(s)&&(c=s.targetBranch,d="变基分支",p=Bi,m=!1,f=!0,u=`变基中 ${s.targetBranch}`);const g=this.props.isOpen,y=g&&m?"open":"closed",b=Vr()("branch-toolbar-button","nudge-arrow",{"nudge-arrow-up":this.props.shouldNudge});return be.createElement(be.Fragment,null,be.createElement(mx,{className:"branch-button",icon:p,iconClassName:l,title:c,description:d,onContextMenu:this.onBranchToolbarButtonContextMenu,tooltip:g?void 0:u,onDropdownStateChanged:this.onDropDownStateChanged,dropdownContentRenderer:this.renderBranchFoldout,dropdownState:y,disabled:f,showDisclosureArrow:m,progressValue:h,buttonClassName:b,onMouseEnter:this.onMouseEnter,onlyShowTooltipWhenOverflowed:!0,isOverflowed:pD,enableFocusTrap:t},this.renderPullRequestInfo()),this.props.showCIStatusPopover&&this.renderPopover())}onMouseEnter=()=>{Zs.isDragOfTypeInProgress(Js.Commit)&&(Zs.emitEnterDragZone("branch-button"),this.props.dispatcher.showFoldout({type:je.Branch}))};onBranchToolbarButtonContextMenu=e=>{e.preventDefault();const{tip:t}=this.props.repositoryState.branchesState;t.kind===Ar.Valid&&lC(xx({name:t.branch.name,isLocal:t.branch.type===Ja.Local,onRenameBranch:this.onRenameBranch,onDeleteBranch:this.onDeleteBranch}))};getBranchWithName(e){return this.props.repositoryState.branchesState.allBranches.find((t=>t.name===e))}onRenameBranch=e=>{const t=this.getBranchWithName(e);void 0!==t&&this.props.dispatcher.showPopup({type:nl.RenameBranch,repository:this.props.repository,branch:t})};onDeleteBranch=async e=>{const t=this.getBranchWithName(e),{dispatcher:n,repository:r}=this.props;if(void 0===t)return;if(t.type===Ja.Remote)return void n.showPopup({type:nl.DeleteRemoteBranch,repository:r,branch:t});const i=await n.getBranchAheadBehind(r,t);n.showPopup({type:nl.DeleteBranch,repository:r,branch:t,existsOnRemote:null!==i})};onBadgeClick=()=>{this.props.dispatcher.closeFoldout(je.Branch),this.openPopover()};openPopover=()=>{this.props.dispatcher.setShowCIStatusPopover(!0)};closePopover=e=>{if(void 0===e)return void this.props.dispatcher.setShowCIStatusPopover(!1);const{target:t}=e,n=document.getElementById("pr-badge"),r=document.getElementById("rerun-check-runs");null!==t&&t instanceof Node&&(null!==n&&n.contains(t)||null!==r&&r.contains(t))||this.props.dispatcher.setShowCIStatusPopover(!1)};renderPopover(){const e=this.props.currentPullRequest,{tip:t}=this.props.repositoryState.branchesState,n=t.kind===Ar.Valid?t.branch.upstreamWithoutRemote??t.branch.name:"";return null===e?null:be.createElement(uD,{prNumber:e.pullRequestNumber,dispatcher:this.props.dispatcher,repository:e.base.gitHubRepository,branchName:n,anchor:this.badgeRef,closePopover:this.closePopover})}onBadgeRef=e=>{this.badgeRef=e};renderPullRequestInfo(){const e=this.props.currentPullRequest;return null===e?null:be.createElement(tD,{number:e.pullRequestNumber,dispatcher:this.props.dispatcher,repository:e.base.gitHubRepository,onBadgeRef:this.onBadgeRef,onBadgeClick:this.onBadgeClick})}}const pD=e=>{const t=e.querySelector(".title")??e;return t.scrollWidth>t.clientWidth};class dD extends be.Component{render(){const e=this.props.progress,t=e.title||"请稍后...";return be.createElement(dx,{title:"恢复...",description:t,progressValue:e.value,className:"revert-progress",icon:Ko,iconClassName:"spin",style:hx.Subtitle,disabled:!0})}}be.Component,be.Component;class mD extends we().Component{invokeButtonRef=null;dropdownButtonRef=null;optionsContainerRef=null;dropdownSelectContainerRef=we().createRef();constructor(e){super(e),this.state={showButtonOptions:!1,checkedOption:this.getCheckedOption(e.checkedOption),selectedOption:this.getCheckedOption(e.checkedOption)}}componentDidMount(){this.dropdownSelectContainerRef.current&&this.dropdownSelectContainerRef.current.addEventListener("focusout",this.onFocusOut)}componentWillUnmount(){this.dropdownSelectContainerRef.current&&this.dropdownSelectContainerRef.current.removeEventListener("focusout",this.onFocusOut)}onFocusOut=e=>{this.state.showButtonOptions&&e.relatedTarget&&!this.dropdownSelectContainerRef.current?.contains(e.relatedTarget)&&this.setState({showButtonOptions:!1})};componentDidUpdate(){if(null===this.invokeButtonRef||null===this.optionsContainerRef)return;const e=window.innerHeight,t=this.invokeButtonRef.getBoundingClientRect().bottom,n=this.invokeButtonRef.getBoundingClientRect().height,r=e-t-15<this.optionsContainerRef.clientHeight?`${n}px`:void 0;r!==this.state.optionsPositionBottom&&this.setState({optionsPositionBottom:r})}getCheckedOption(e){const{options:t}=this.props;if(0===t.length)return null;const n=t.find((t=>t.id===e));return n??t[0]}onItemClick=(e,t,n)=>{const r=this.props.options.find((e=>e.id===t.id));r&&(this.setState({checkedOption:r,showButtonOptions:!1}),this.dropdownButtonRef?.focus(),this.props.onCheckedOptionChange?.(r))};onClearSelection=()=>{this.setState({selectedOption:null})};onPaneKeyDown=(e,t)=>{"Escape"!==t.key&&"Esc"!==t.key||(t.preventDefault(),t.stopPropagation(),this.dropdownButtonRef?.focus(),this.setState({showButtonOptions:!1}))};onSelectionChanged=(e,t,n)=>{const r=this.props.options.find((e=>e.id===t.id));r&&this.setState({selectedOption:r})};openSplitButtonDropdown=()=>{this.setState({showButtonOptions:!this.state.showButtonOptions})};onDropdownButtonKeyDown=e=>{const{key:t}=e;let n=!1;switch(t){case" ":case"Enter":case"ArrowDown":case"Down":this.setState({selectedOption:this.props.options.at(0)??null,showButtonOptions:!0}),n=!0;break;case"Esc":case"Escape":this.dropdownButtonRef?.focus(),this.setState({showButtonOptions:!1}),n=!0;break;case"Up":case"ArrowUp":this.setState({selectedOption:this.props.options.at(-1)??null,showButtonOptions:!0}),n=!0}n&&(e.stopPropagation(),e.preventDefault())};onInvokeButtonRef=e=>{this.invokeButtonRef=e};onDropdownButtonRef=e=>{this.dropdownButtonRef=e};onOptionsContainerRef=e=>{this.optionsContainerRef=e};renderOption=e=>{const t=this.props.options.find((t=>t.id===e.id));if(t)return we().createElement(we().Fragment,null,we().createElement("div",{className:"option-title"},t.label),we().createElement("div",{className:"option-description"},t.description))};getMenuItems(e,t){const n={type:"checkbox",id:"",label:"",checked:!1,enabled:!0,visible:!0,accelerator:null,accessKey:null};return e.map((({id:e,label:r})=>({...n,id:e,label:r,checked:t===e})))}renderSplitButtonOptions(){const{showButtonOptions:e,checkedOption:t,selectedOption:n,optionsPositionBottom:r}=this.state;if(!e)return;const{options:i}=this.props,o=this.getMenuItems(i,t?.id),s=o.find((e=>e.id===n?.id)),a=void 0!==r?"open-top":"open-bottom",l=Vr()("dropdown-select-button-options",a);return we().createElement("div",{className:l,style:{bottom:r},ref:this.onOptionsContainerRef},we().createElement(sx,{depth:0,items:o,selectedItem:s,onItemClicked:this.onItemClick,onKeyDown:this.onPaneKeyDown,onSelectionChanged:this.onSelectionChanged,onClearSelection:this.onClearSelection,allowFirstCharacterNavigation:!0,renderLabel:this.renderOption}))}onSubmit=e=>{void 0!==this.props.onSubmit&&null!==this.state.checkedOption&&this.props.onSubmit(e,this.state.checkedOption)};render(){const{options:e,disabled:t,dropdownAriaLabel:n}=this.props,{checkedOption:r,optionsPositionBottom:i,showButtonOptions:o}=this.state;if(0===e.length||null===r)return;const s=void 0!==i?"open-top":"open-bottom",a=Vr()("dropdown-select-button",o?s:null),l=Vr()("dropdown-button",{disabled:t});return we().createElement("div",{className:a,ref:this.dropdownSelectContainerRef},we().createElement("div",{className:"dropdown-button-wrappers"},we().createElement(ii,{className:"invoke-button",disabled:t,type:"submit",ariaDescribedBy:this.props.ariaDescribedBy,tooltip:this.props.tooltip,onButtonRef:this.onInvokeButtonRef,onClick:this.onSubmit},r.label),we().createElement(ii,{className:l,onClick:this.openSplitButtonDropdown,onKeyDown:this.onDropdownButtonKeyDown,onButtonRef:this.onDropdownButtonRef,type:"button",ariaExpanded:o,ariaHaspopup:!0,ariaLabel:n},we().createElement(si,{symbol:uo}))),this.renderSplitButtonOptions())}}class fD extends be.Component{get selectedAction(){const e=this.props.suggestedActions.find((e=>e.id===this.state.selectedActionValue));return void 0===e&&iC("NoSuggestedActionsProvided",new Error("The DropdownSuggestedActions component was provided an empty array. It requires an array of at least one item.")),e}constructor(e){super(e);const{selectedActionValue:t,suggestedActions:n}=e,r=n[0].id;this.state={selectedActionValue:t??r}}onActionSelectionChange=e=>{this.setState({selectedActionValue:e.id}),this.props.onSuggestedActionChanged(e.id)};onActionSubmitted=e=>{if(void 0===this.selectedAction)return;const{onClick:t,menuItemId:n}=this.selectedAction;t?.(e),e.defaultPrevented||void 0===n||D(n)};render(){if(void 0===this.selectedAction)return;const{description:e,image:t,discoverabilityContent:n,disabled:r,id:i,title:o}=this.selectedAction,s=Vr()("suggested-action","primary",this.props.className);return be.createElement("div",{className:s},t&&be.createElement("div",{className:"image-wrapper"},t),be.createElement("div",{className:"text-wrapper"},be.createElement("h2",null,o),e&&be.createElement("p",{className:"description"},e),n&&be.createElement("p",{className:"discoverability"},n)),be.createElement(mD,{checkedOption:i,options:this.props.suggestedActions.map((({label:e,id:t})=>({label:e,id:t}))),disabled:r,dropdownAriaLabel:"Suggested actions for this branch",onCheckedOptionChange:this.onActionSelectionChange,onSubmit:this.onActionSubmitted}))}}const gD=St(__dirname,"static/paper-stack.svg");function yD(e){return"separator"===e.type||"submenuItem"===e.type||null===e.accelerator?[]:e.accelerator.split("+").map(aC)}function bD(e,t=new Map,n){for(const r of e.items){if("separator"===r.type)continue;const e={label:r.label,acceleratorKeys:yD(r),parentMenuLabels:void 0===n?[]:[n.label,...n.parentMenuLabels],enabled:r.enabled};t.set(r.id,e),"submenuItem"===r.type&&bD(r.menu,t,e)}return t}class wD extends be.Component{getMenuInfoMap=mr((e=>void 0===e?new Map:bD(e)));transitionTimer=null;constructor(e){super(e),this.state={enableTransitions:!1}}getMenuItemInfo(e){return this.getMenuInfoMap(this.props.appMenu).get(e)}getPlatformFileManagerName(){return"Finder"}renderDiscoverabilityElements(e){const t=function(e){return e.parentMenuLabels.join(" -> ")}(e);return be.createElement(be.Fragment,null,t,"菜单 或 快捷键:"," ",this.renderDiscoverabilityKeyboardShortcut(e))}renderDiscoverabilityKeyboardShortcut(e){return be.createElement(Co,{darwinKeys:e.acceleratorKeys,keys:e.acceleratorKeys})}renderMenuBackedAction(e,t,n,r){const i=this.getMenuItemInfo(e);return void 0===i?(log.error(`找不到的匹配菜单项 ${e}`),null):be.createElement(zR,{title:t,description:n,discoverabilityContent:this.renderDiscoverabilityElements(i),menuItemId:e,buttonText:i.label,disabled:!i.enabled,onClick:r})}renderShowInFileManager(){const e=this.getPlatformFileManagerName();return this.renderMenuBackedAction("open-working-directory",`在资源管理器中查看存储库`,void 0,this.onShowInFileManagerClicked)}onShowInFileManagerClicked=()=>this.props.dispatcher.incrementMetric("suggestedStepOpenWorkingDirectory");renderViewOnGitHub(){return null!==this.props.repository.gitHubRepository?this.renderMenuBackedAction("view-repository-on-github","在浏览器中查看存储库",void 0,this.onViewOnGitHubClicked):null}onViewOnGitHubClicked=()=>this.props.dispatcher.incrementMetric("suggestedStepViewOnGitHub");openIntegrationPreferences=()=>{this.props.dispatcher.showPopup({type:nl.Preferences,initialSelectedTab:Dr.Integrations})};renderOpenInExternalEditor(){if(!this.props.isExternalEditorAvailable)return null;const e="open-external-editor";if(void 0===this.getMenuItemInfo(e))return log.error(`找不到的匹配菜单项 ${e}`),null;if(void 0===this.getMenuItemInfo("preferences"))return log.error(`找不到的匹配菜单项 ${e}`),null;const t=be.createElement(be.Fragment,null,"选择编辑器："," ",be.createElement(CE,{onClick:this.openIntegrationPreferences},"Preferences"));return this.renderMenuBackedAction(e,"在文件管理器中查看存储库",t,this.onOpenInExternalEditorClicked)}onOpenInExternalEditorClicked=()=>this.props.dispatcher.incrementMetric("suggestedStepOpenInExternalEditor");renderRemoteAction(){const{remote:e,aheadBehind:t,branchesState:n,tagsToPush:r}=this.props.repositoryState,{tip:i,defaultBranch:o,currentPullRequest:s}=n;if(i.kind!==Ar.Valid)return null;if(null===e)return this.renderPublishRepositoryAction();if(null===t)return this.renderPublishBranchAction(i);if(pc(n,t)===cc.Recommended)return null;if(t.behind>0)return this.renderPullBranchAction(i,e,t);if(t.ahead>0||null!==r&&r.length>0)return this.renderPushBranchAction(i,e,t,r);const a=null!==this.props.repository.gitHubRepository,l=null!==s,c=null!==o&&i.branch.name===o.name;return!a||l||c?null:this.renderCreatePullRequestAction(i)}renderViewStashAction(){const{changesState:e,branchesState:t}=this.props.repositoryState,{tip:n}=t;if(n.kind!==Ar.Valid)return null;const{stashEntry:r}=e;if(null===r)return null;if(r.files.kind!==Fc.Loaded)return null;const i=r.files.files.length,o=be.createElement(be.Fragment,null,"你有 ",i," ",1===i?"项更改":"项更改","在你的程序中，您尚未提交。"),s=be.createElement(be.Fragment,null,"当暂存更改存在时，可以在左侧的“更改”选项卡的底部查看这些暂存的更改。"),a="toggle-stashed-changes",l=this.getMenuItemInfo(a);return void 0===l?(log.error(`Could not find matching menu item for ${a}`),null):be.createElement(zR,{key:"view-stash-action",title:"查看暂存更改",menuItemId:a,description:o,discoverabilityContent:s,buttonText:"查看暂存",type:"primary",disabled:null!==l&&!l.enabled,onClick:this.onViewStashClicked})}onViewStashClicked=()=>this.props.dispatcher.incrementMetric("suggestedStepViewStash");renderPublishRepositoryAction(){const e="push",t=this.getMenuItemInfo(e);if(void 0===t)return log.error("找不到匹配的推送菜单项"),null;const n=be.createElement(be.Fragment,null,"使用快捷键"," ",this.renderDiscoverabilityKeyboardShortcut(t));return be.createElement(zR,{key:"publish-repository-action",title:"将仓库发布到GitHub",description:"此仓库当前仅在本地计算机上可用。通过在GitHub上发布，您可以共享它，并与其他人协作。",discoverabilityContent:n,buttonText:"发布存储库",menuItemId:e,type:"primary",disabled:!t.enabled,onClick:this.onPublishRepositoryClicked})}onPublishRepositoryClicked=()=>this.props.dispatcher.incrementMetric("suggestedStepPublishRepository");renderPublishBranchAction(e){const t="push",n=this.getMenuItemInfo(t);if(void 0===n)return log.error("找不到匹配的推送菜单项"),null;const r=null!==this.props.repository.gitHubRepository,i=be.createElement(be.Fragment,null,"当前分支(",be.createElement(QE,null,e.branch.name),")尚未发布到远程。通过发布它 ",r?"到 GitHub":""," 你可以分享, ",r?"打开拉取请求 ":"","并与他人合作。"),o=be.createElement(be.Fragment,null,"Always available in the toolbar or"," ",this.renderDiscoverabilityKeyboardShortcut(n));return be.createElement(zR,{key:"publish-branch-action",title:"发布分支",menuItemId:t,description:i,discoverabilityContent:o,buttonText:"发布分支",type:"primary",disabled:!n.enabled,onClick:this.onPublishBranchClicked})}onPublishBranchClicked=()=>this.props.dispatcher.incrementMetric("suggestedStepPublishBranch");renderPullBranchAction(e,t,n){const r="pull",i=this.getMenuItemInfo(r);if(void 0===i)return log.error("Could not find matching menu item for pull"),null;const o=null!==this.props.repository.gitHubRepository,s=be.createElement(be.Fragment,null,"当前分支(",be.createElement(QE,null,e.branch.name),")有"," ",1===n.behind?"1项提交":"多项提交"," 在"," ",o?"GitHub":"远程"," 那"," ",1===n.behind?"不是":"不要"," 存在于您的计算机上。"),a=be.createElement(be.Fragment,null,"存储库菜单 或 快捷键"," ",this.renderDiscoverabilityKeyboardShortcut(i)),l=`从 ${t.name} 远程拉取 ${n.behind} ${1===n.behind?"提交":"提交"}`,c=`拉取 ${t.name}`;return be.createElement(zR,{key:"pull-branch-action",title:l,menuItemId:r,description:s,discoverabilityContent:a,buttonText:c,type:"primary",disabled:!i.enabled})}renderPushBranchAction(e,t,n,r){const i="push",o=this.getMenuItemInfo(i);if(void 0===o)return log.error("找不到匹配的推送菜单项"),null;const s=null!==this.props.repository.gitHubRepository,a=[],l=[];n.ahead>0&&(a.push("提交"),l.push(1===n.ahead?"1 个本地提交":`${n.ahead} 个本地提交`)),null!==r&&r.length>0&&(a.push("tags"),l.push(1===r.length?"1 tag":`${r.length} tags`));const c=`你有 ${l.join(" and ")} 等待被推送到 ${s?"GitHub":"远程"}.`,u=be.createElement(be.Fragment,null,"存储库菜单 或 快捷键:",this.renderDiscoverabilityKeyboardShortcut(o)),h=`推送 ${a.join(" and ")} 到远程 ${t.name}`,p=`推送 ${t.name}`;return be.createElement(zR,{key:"push-branch-action",title:h,menuItemId:i,description:c,discoverabilityContent:u,buttonText:p,type:"primary",disabled:!o.enabled})}onPullRequestSuggestedActionChanged=e=>{var t;((t=e)===va.PreviewPullRequest||t===va.CreatePullRequest)&&this.props.dispatcher.setPullRequestSuggestedNextAction(e)};renderCreatePullRequestAction(e){const t=this.getMenuItemInfo("create-pull-request");if(void 0===t)return log.error("Could not find matching menu item for 'create-pull-request'"),null;const n=be.createElement(be.Fragment,null,"当前分支(",be.createElement(QE,null,e.branch.name),") is already published to GitHub. Create a pull request to propose and collaborate on your changes."),r=this.getMenuItemInfo("preview-pull-request");if(void 0===r)return log.error("Could not find matching menu item for 'preview-pull-request'"),null;const i={title:"从当前分支创建拉取请求",label:"创建拉取请求",description:n,id:va.CreatePullRequest,menuItemId:"create-pull-request",discoverabilityContent:this.renderDiscoverabilityElements(t),disabled:!t.enabled,onClick:this.onCreatePullRequestClicked},o={title:"从当前分支预览拉取请求",label:"预览拉取请求",description:be.createElement(be.Fragment,null,"当前分支(",be.createElement(QE,null,e.branch.name),") is already published to GitHub. Preview the changes this pull request will have before proposing your changes."),id:va.PreviewPullRequest,menuItemId:"preview-pull-request",discoverabilityContent:this.renderDiscoverabilityElements(r),disabled:!r.enabled};return be.createElement(fD,{key:"pull-request-action",className:"pull-request-action",suggestedActions:[o,i],selectedActionValue:this.props.pullRequestSuggestedNextAction,onSuggestedActionChanged:this.onPullRequestSuggestedActionChanged})}onCreatePullRequestClicked=()=>this.props.dispatcher.incrementMetric("suggestedStepCreatePullRequest");renderActions(){return be.createElement(be.Fragment,null,be.createElement(GR,{type:"primary",transitions:"replace",enableTransitions:this.state.enableTransitions},this.renderViewStashAction()||this.renderRemoteAction()),be.createElement(GR,null,this.renderOpenInExternalEditor(),this.renderShowInFileManager(),this.renderViewOnGitHub()))}componentDidMount(){this.transitionTimer=window.setTimeout((()=>{this.setState({enableTransitions:!0}),this.transitionTimer=null}),500)}componentWillUnmount(){null!==this.transitionTimer&&clearTimeout(this.transitionTimer)}render(){return be.createElement("div",{className:"changes-interstitial"},be.createElement("div",{className:"content"},be.createElement("div",{className:"interstitial-header"},be.createElement("div",{className:"text"},be.createElement("h1",null,"本地无更改"),be.createElement("p",null,"此存储库中没有未提交的更改")),be.createElement("img",{src:gD,className:"blankslate-image",alt:""})),this.renderActions()))}}const vD=St(__dirname,"static/multiple-files-selected.svg");class CD extends be.Component{render(){return be.createElement("div",{className:"panel blankslate",id:"no-changes"},be.createElement("img",{src:vD,className:"blankslate-image",alt:""}),be.createElement("div",null,this.props.count," files selected"))}}class SD extends be.Component{render(){const e=this.props.filesChangedCount,t=e>300?"300+":e;return be.createElement("span",{className:"counter"},t)}}class ED extends be.Component{render(){const e=[],t=this.props.users;for(let n=0;n<this.props.users.length;n++)t.length>4&&2===n&&e.push(be.createElement("div",{key:"more",className:"avatar-more avatar"})),e.push(be.createElement(IE,{key:`${n}`,user:t[n]}));const n=Vr()("AvatarStack",{"AvatarStack--small":!0,"AvatarStack--two":2===t.length,"AvatarStack--three":3===t.length,"AvatarStack--plus":t.length>3});return be.createElement("div",{className:n},be.createElement("div",{className:"AvatarStack-body"},e))}}class kD extends be.Component{renderAuthorInline(e){return be.createElement("span",{className:"author"},e.name)}renderAuthors(e){return 1===e.length?be.createElement("span",{className:"authors"},this.renderAuthorInline(e[0])):2===e.length?be.createElement("span",{className:"authors"},this.renderAuthorInline(e[0]),", ",this.renderAuthorInline(e[1])):be.createElement("span",{className:"authors"},e.length," people")}render(){const{commits:e}=this.props,t=new Map;for(const n of e){const{author:e,committer:r,coAuthors:i}=n,o=n.authoredByCommitter||null!==this.props.gitHubRepository&&SE(n,this.props.gitHubRepository)?[e,...i]:[e,r,...i];for(const e of o)t.has(e.toString())||t.set(e.toString(),e)}return be.createElement("span",{className:"commit-attribution-component"},this.renderAuthors(Array.from(t.values())))}}var RD=n(8033),xD=n.n(RD);const TD=new class{scrollTimer;defaultScrollEdge=30;scrollSpeed=5;setupMouseScroll(e,t){const n=this.getClosestScrollElement(e);null!==n?this.updateMouseScroll(n,t):this.clearScrollTimer()}updateMouseScroll(e,t){window.clearTimeout(this.scrollTimer),this.scrollVerticallyOnMouseNearEdge(e,t)&&(this.scrollTimer=window.setTimeout((()=>{this.updateMouseScroll(e,t)}),30))}clearScrollTimer(){window.clearTimeout(this.scrollTimer)}scrollVerticallyOnMouseNearEdge(e,t){const{top:n,bottom:r}=e.getBoundingClientRect(),i=r-t,o=t-n;if(i>0&&i<this.defaultScrollEdge){const t=this.getScrollDistance(i);return this.scrollDown(e,t)}if(o>0&&o<this.defaultScrollEdge){const t=this.getScrollDistance(o);return this.scrollUp(e,t)}return!1}getScrollDistance(e){const t=this.defaultScrollEdge/e;return this.scrollSpeed*t}scrollUp(e,t){if(e.scrollTop<=0)return!1;const n=e.scrollTop>t?e.scrollTop-t:0;return e.scrollTo({top:n}),!0}scrollDown(e,t){const n=e.scrollHeight-e.clientHeight;if(e.scrollTop>=n)return!1;const r=e.scrollTop+t<n?e.scrollTop+t:n;return e.scrollTo({top:r}),!0}getClosestScrollElement(e){const{position:t}=getComputedStyle(e);if("fixed"===t)return null;if(this.isScrollable(e))return e;let n;for(n=e;n=n.parentElement;){const{position:e}=getComputedStyle(n);if(("absolute"!==t||"static"!==e)&&this.isScrollable(n)&&this.hasScrollableContent(n))return n}return null}isScrollable(e){const t=getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)}hasScrollableContent(e){return e.clientHeight<e.scrollHeight}};class DD extends be.Component{hasDragStarted=!1;hasDragEnded=!1;dragElement=null;elemBelow=null;verticalOffset=32;componentDidMount(){this.dragElement=document.getElementById("dragElement")}canDragCommit(e){return!(0!==e.button||0===e.button&&e.ctrlKey||e.shiftKey)&&this.props.isEnabled}initializeDrag(){this.hasDragStarted=!1,this.elemBelow=null}onMouseDown=async e=>{this.canDragCommit(e)&&(this.hasDragEnded=!1,document.onmouseup=this.handleDragEndEvent,await kc(100),this.hasDragEnded||(this.initializeDrag(),document.addEventListener("mousemove",this.onMouseMove)))};onMouseMove=e=>{this.hasDragEnded?this.onDragEnd():(this.hasDragStarted||(this.props.onRenderDragElement(),this.props.onDragStart(),Zs.dragStarted(),this.hasDragStarted=!0,window.addEventListener("keyup",this.onKeyUp)),null!==this.dragElement&&(this.dragElement.style.left=e.pageX+0+"px",this.dragElement.style.top=e.pageY+this.verticalOffset+"px"),this.elemBelow=document.elementFromPoint(e.clientX,e.clientY),null!==this.elemBelow?TD.setupMouseScroll(this.elemBelow,e.clientY):TD.clearScrollTimer())};handleDragEndEvent=()=>{this.hasDragEnded=!0,this.hasDragStarted&&this.onDragEnd(),document.onmouseup=null,window.removeEventListener("keyup",this.onKeyUp)};onKeyUp=e=>{"Escape"===e.key&&this.handleDragEndEvent()};onDragEnd(){document.removeEventListener("mousemove",this.onMouseMove),TD.clearScrollTimer(),this.props.onRemoveDragElement(),void 0!==this.props.onDragEnd&&this.props.onDragEnd(this.getLastElemBelowDropTarget()),Zs.dragEnded(this.getLastElemBelowDropTarget())}getLastElemBelowDropTarget=()=>{if(null!==this.elemBelow)return this.props.dropTargetSelectors.find((e=>null!==this.elemBelow&&null!==this.elemBelow.closest(e)))};render(){return be.createElement("div",{className:"draggable",onMouseDown:this.onMouseDown},this.props.children)}}class AD extends be.PureComponent{constructor(e){super(e),this.state={avatarUsers:kE(e.gitHubRepository,e.commit)}}componentWillReceiveProps(e){e.commit!==this.props.commit&&this.setState({avatarUsers:kE(e.gitHubRepository,e.commit)})}onMouseUp=()=>{const{onSquash:e,selectedCommits:t,commit:n,disableSquashing:r}=this.props;!0!==r&&Zs.isDragOfTypeInProgress(Js.Commit)&&void 0!==e&&t.filter((e=>e.sha!==n.sha)).length>0&&e(t,n,!1)};onMouseEnter=()=>{const{selectedCommits:e,commit:t,disableSquashing:n}=this.props,r=void 0!==e.find((e=>e.sha===t.sha));!0!==n&&Zs.isDragOfTypeInProgress(Js.Commit)&&!r&&Zs.emitEnterDropTarget({type:ea.Commit})};onMouseLeave=()=>{Zs.isDragOfTypeInProgress(Js.Commit)&&Zs.emitLeaveDropTarget()};render(){const{commit:e}=this.props,{author:{date:t}}=e,n=this.props.isDraggable||!1,r=0===e.summary.length,i=r?"Empty commit message":e.summary,o=Vr()("summary",{"empty-summary":r});return be.createElement(DD,{isEnabled:n,onDragStart:this.onDragStart,onRenderDragElement:this.onRenderCommitDragElement,onRemoveDragElement:this.onRemoveDragElement,dropTargetSelectors:[ta.Branch,ta.PullRequest,ta.Commit,ta.ListInsertionPoint]},be.createElement("div",{className:"commit",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseUp:this.onMouseUp},be.createElement("div",{className:"info"},be.createElement(Uk,{className:o,emoji:this.props.emoji,text:i,renderUrlsAsLinks:!1}),be.createElement("div",{className:"description"},be.createElement(ED,{users:this.state.avatarUsers}),be.createElement("div",{className:"byline"},be.createElement(kD,{gitHubRepository:this.props.gitHubRepository,commits:[e]}),function(e){return be.createElement(be.Fragment,null," • ",be.createElement(jk,{date:e,abbreviate:!0}))}(t)))),this.renderCommitIndicators()))}renderCommitIndicators(){const e=function(e){if(0===e.length)return null;const[t]=e;return be.createElement("span",{className:"tag-indicator"},be.createElement("span",{className:"tag-name",key:t},t),e.length>1&&be.createElement("span",{key:e.length,className:"tag-indicator-more"}))}(this.props.commit.tags),t=this.renderUnpushedIndicator();return e||t?be.createElement("div",{className:"commit-indicators"},e,t):null}renderUnpushedIndicator(){return this.props.showUnpushedIndicator?be.createElement(Xo,{tagName:"div",className:"unpushed-indicator",tooltip:this.props.unpushedIndicatorTitle},be.createElement(si,{symbol:ui})):null}onDragStart=()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur(),Zs.setDragData({type:Js.Commit,commits:this.props.selectedCommits})};onRenderCommitDragElement=()=>{void 0!==this.props.onRenderCommitDragElement&&this.props.onRenderCommitDragElement(this.props.commit)};onRemoveDragElement=()=>{void 0!==this.props.onRemoveDragElement&&this.props.onRemoveDragElement()}}class PD extends be.Component{commitsHash=mr(_D,js);commitIndexBySha=mr((e=>new Map(e.map(((e,t)=>[e,t])))));listRef=be.createRef();getVisibleCommits(){const e=new Array;for(const t of this.props.commitSHAs){const n=this.props.commitLookup.get(t);void 0!==n&&e.push(n)}return e}isLocalCommit=e=>this.props.localCommitSHAs.includes(e);renderCommit=e=>{const t=this.props.commitSHAs[e],n=this.props.commitLookup.get(t);if(null==n)return null;const r=this.isLocalCommit(n.sha),i=this.getUnpushedTags(n),o=(r||i.length>0)&&!1===this.props.isLocalRepository;return be.createElement(AD,{key:n.sha,gitHubRepository:this.props.gitHubRepository,showUnpushedIndicator:o,unpushedIndicatorTitle:this.getUnpushedIndicatorTitle(r,i.length),commit:n,emoji:this.props.emoji,isDraggable:!1===this.props.isMultiCommitOperationInProgress,onSquash:this.onSquash,selectedCommits:this.selectedCommits,onRenderCommitDragElement:this.onRenderCommitDragElement,onRemoveDragElement:this.props.onRemoveCommitDragElement,disableSquashing:this.props.disableSquashing,isMultiCommitOperationInProgress:this.props.isMultiCommitOperationInProgress})};getLastRetainedCommitRef(e){const t=Math.max(...e);return t!==this.props.commitSHAs.length-1?`${this.props.commitSHAs[t]}^`:null}onSquash=(e,t,n)=>{const r=[...e,t].map((e=>this.props.commitSHAs.findIndex((t=>t===e.sha))));this.props.onSquash?.(e,t,this.getLastRetainedCommitRef(r),n)};onRenderCommitDragElement=e=>{this.props.onRenderCommitDragElement?.(e,this.selectedCommits)};getUnpushedIndicatorTitle(e,t){return e?"This commit has not been pushed to the remote repository":t>0?`This commit has ${t} tag${t>1?"s":""} to push`:void 0}get selectedCommits(){return this.lookupCommits(this.props.selectedSHAs)}getUnpushedTags(e){const t=new Set(this.props.tagsToPush??[]);return e.tags.filter((e=>t.has(e)))}onSelectionChanged=e=>{const t=e.map((e=>this.props.commitSHAs[e])),n=this.lookupCommits(t);this.props.onCommitsSelected?.(n,this.isContiguous(e))};isContiguous(e){if(e.length<=1)return!0;const t=[...e].sort(((e,t)=>t-e));for(let e=0;e<t.length;e++){const n=t[e];if(e+1!==t.length&&n-1!==t[e+1])return!1}return!0}onSelectedRowChanged=e=>{const t=this.props.commitSHAs[e],n=this.props.commitLookup.get(t);n&&this.props.onCommitsSelected?.([n],!0)};lookupCommits(e){const t=[];return e.forEach((e=>{const n=this.props.commitLookup.get(e);void 0!==n?t.push(n):log.warn("[Commit List] - Unable to lookup commit from sha - This should not happen.")})),t}onScroll=(e,t)=>{const n=Math.ceil(t/50),r=Math.floor(e/50),i=r+n;this.props.onScroll?.(r,i),this.props.onCompareListScrolled?.(e)};rowForSHA(e){return this.commitIndexBySha(this.props.commitSHAs).get(e)??-1}getRowCustomClassMap=()=>{const{commitSHAs:e,shasToHighlight:t}=this.props;if(void 0===t||0===t.length)return;const n=e.filter((e=>t.includes(e))).map((e=>this.rowForSHA(e)));if(0===n.length)return;const r=new Map;return r.set("highlighted",n),r};focus(){this.listRef.current?.focus()}render(){const{commitSHAs:e,selectedSHAs:t,shasToHighlight:n,emptyListMessage:r,reorderingEnabled:i,isMultiCommitOperationInProgress:o}=this.props;if(0===e.length)return be.createElement("div",{className:"panel blankslate"},r??"No commits to list");const s=Vr()({"has-highlighted-commits":void 0!==n&&n.length>0}),a=t.map((e=>this.rowForSHA(e))).filter((e=>-1!==e));return be.createElement("div",{id:"commit-list",className:s},be.createElement(sC,{ref:this.listRef,rowCount:e.length,rowHeight:50,selectedRows:a,rowRenderer:this.renderCommit,onDropDataInsertion:this.onDropDataInsertion,onSelectionChanged:this.onSelectionChanged,onSelectedRowChanged:this.onSelectedRowChanged,onRowContextMenu:this.onRowContextMenu,selectionMode:"multi",onScroll:this.onScroll,insertionDragType:!0===i&&!1===o?Js.Commit:void 0,invalidationProps:{commits:this.props.commitSHAs,localCommitSHAs:this.props.localCommitSHAs,commitLookupHash:this.commitsHash(this.getVisibleCommits()),tagsToPush:this.props.tagsToPush,shasToHighlight:this.props.shasToHighlight},setScrollTop:this.props.compareListScrollTop,rowCustomClassNameMap:this.getRowCustomClassMap()}))}onRowContextMenu=(e,t)=>{t.preventDefault();const n=this.props.commitSHAs[e],r=this.props.commitLookup.get(n);if(void 0===r)return;let i=[];i=this.props.selectedSHAs.length>1?this.getContextMenuMultipleCommits(r):this.getContextMenuForSingleCommit(e,r),lC(i)};getContextMenuForSingleCommit(e,t){const n=this.isLocalCommit(t.sha),r=!0===this.props.canUndoCommits&&n&&0===e,i=!0===this.props.canAmendCommits&&0===e,o=e>0&&e<=this.props.localCommitSHAs.length,s=!0===this.props.canResetToCommits&&o,a=e>0;let l="在Github上查看";const c=this.props.gitHubRepository;c&&c.endpoint!==Qn()&&(l="在Github上查看 Enterprise");const u=[];i&&u.push({label:"修改提交",action:()=>this.props.onAmendCommit?.(t,n)}),r&&u.push({label:"撤销提交",action:()=>{this.props.onUndoCommit&&this.props.onUndoCommit(t)},enabled:void 0!==this.props.onUndoCommit}),Ft()&&u.push({label:"重置到提交…",action:()=>{this.props.onResetToCommit&&this.props.onResetToCommit(t)},enabled:s&&void 0!==this.props.onResetToCommit}),u.push({label:"Checkout Commit",action:()=>{this.props.onCheckoutCommit?.(t)},enabled:a&&void 0!==this.props.onCheckoutCommit}),u.push({label:"在提交中还原更改",action:()=>{this.props.onRevertCommit&&this.props.onRevertCommit(t)},enabled:void 0!==this.props.onRevertCommit},{type:"separator"},{label:"根据提交创建分支",action:()=>{this.props.onCreateBranch&&this.props.onCreateBranch(t)}},{label:"创建标签",action:()=>this.props.onCreateTag?.(t.sha),enabled:void 0!==this.props.onCreateTag});const h=this.getDeleteTagsMenuItem(t);null!==h&&u.push({type:"separator"},h);const p=t.tags.length>1?"复制 Tag":"复制 Tag";return t.tags.length,u.push({label:"筛选提交",action:()=>this.props.onCherryPick?.(this.selectedCommits),enabled:this.canCherryPick()},{type:"separator"},{label:"复制SHA",action:()=>m.clipboard.writeText(t.sha)},{label:p,action:()=>m.clipboard.writeText(t.tags.join(" ")),enabled:t.tags.length>0},{label:l,action:()=>this.props.onViewCommitOnGitHub?.(t.sha),enabled:!n&&!!c}),u}canCherryPick(){const{onCherryPick:e,isMultiCommitOperationInProgress:t}=this.props;return void 0!==e&&!1===t}canSquash(){const{onSquash:e,disableSquashing:t,isMultiCommitOperationInProgress:n}=this.props;return void 0!==e&&!1===t&&!1===n}getDeleteTagsMenuItem(e){const{onDeleteTag:t}=this.props,n=this.getUnpushedTags(e);if(void 0===t||void 0===n||0===e.tags.length)return null;if(1===e.tags.length){const r=e.tags[0];return{label:`Delete tag ${r}`,action:()=>t(r),enabled:n.includes(r)}}const r=new Set(n);return{label:"删除标签…",submenu:e.tags.map((e=>({label:e,action:()=>t(e),enabled:r.has(e)})))}}getContextMenuMultipleCommits(e){const t=this.props.selectedSHAs.length;return[{label:`Cherry-pick ${t} Commits…`,action:()=>this.props.onCherryPick?.(this.selectedCommits),enabled:this.canCherryPick()},{label:`Squash ${t} Commits…`,action:()=>this.onSquash(this.selectedCommits,e,!0),enabled:this.canSquash()}]}onDropDataInsertion=(e,t)=>{if(void 0===this.props.onDropCommitInsertion||t.type!==Js.Commit)return;const n=0===e?null:e-1;if(0===this.props.commitSHAs.length||null!==n&&n>this.props.commitSHAs.length)return;const r=null===n?null:this.props.commitSHAs[n],i=null!==r?this.props.commitLookup.get(r):null,o=t.commits.filter((e=>null!=e)).map((e=>this.props.commitSHAs.findIndex((t=>t===e.sha)))).sort(),s=o.every(((e,t,n)=>t===n.length-1||e===n[t+1]-1));if(s){const e=o[0],t=null===n&&0===e||n===e-1,r=null!==n&&-1!==o.indexOf(n);if(t||r)return}const a=o.concat(null!==n?[n]:[]);this.props.onDropCommitInsertion(i??null,t.commits,this.getLastRetainedCommitRef(a))}}function ID(e){return`${e.sha} ${e.tags}`}function _D(e){return e.map(ID).join(" ")}var ND;!function(e){e[e.Unreachable=0]="Unreachable",e[e.Reachable=1]="Reachable"}(ND||(ND={}));class OD extends be.Component{constructor(e){super(e),this.state={selectedTab:e.selectedTab,selectedSHAs:[]}}componentWillUpdate(e){const t=this.props.selectedTab,n=e.selectedTab;t!==n&&this.setState({selectedTab:n})}onTabClicked=e=>{this.setState({selectedTab:e})};getShasToDisplay=()=>{const{selectedTab:e}=this.state,{shasInDiff:t,selectedShas:n}=this.props;return e===ND.Reachable?t:n.filter((e=>!t.includes(e)))};onCommitsSelected=(e,t)=>{this.setState({selectedSHAs:e.map((e=>e.sha))})};renderTabs(){return be.createElement(KE,{onTabClicked:this.onTabClicked,selectedIndex:this.state.selectedTab},be.createElement("span",null,"Unreachable"),be.createElement("span",null,"Reachable"))}renderActiveTab(){const{commitLookup:e,emoji:t}=this.props;return be.createElement(be.Fragment,null,this.renderUnreachableCommitsMessage(),be.createElement("div",{className:"unreachable-commit-list"},be.createElement(PD,{gitHubRepository:null,isLocalRepository:!0,commitLookup:e,commitSHAs:this.getShasToDisplay(),selectedSHAs:this.state.selectedSHAs,localCommitSHAs:[],emoji:t,onCommitsSelected:this.onCommitsSelected})))}renderFooter(){return be.createElement(HE,null,be.createElement(UE,{cancelButtonVisible:!1}))}renderUnreachableCommitsMessage=()=>{const e=this.getShasToDisplay().length,t=e>1?"commits":"commit",n=e>1?"they're":"it's";return be.createElement("div",{className:"message"},"You will"," ",this.state.selectedTab===ND.Unreachable?"not":""," ","see changes from the following ",t," because"," ",n," ",this.state.selectedTab===ND.Unreachable?"not":""," ","in the ancestry path of the 最近提交 in your selection."," ",be.createElement(CE,{uri:"https://github.com/desktop/desktop/blob/development/docs/learn-more/unreachable-commits.md"},"Learn more about unreachable commits."))};render(){return be.createElement(FE,{className:"unreachable-commits",title:"提交可达性",onSubmit:this.props.onDismissed,onDismissed:this.props.onDismissed},this.renderTabs(),this.renderActiveTab(),this.renderFooter())}}function MD(e,t){const{emoji:n,repository:r,selectedCommits:i}=t,o=new fk(n,r),{summary:s,body:a}=gk(function(e){return 0===e[0].summary.length?"Empty commit message":e[0].summary}(i),i[0].body,o),l=1===i.length&&0===i[0].summary.length,c=i.flatMap((e=>kE(r.gitHubRepository,e))),u=xD()(c,((e,t)=>e.email===t.email&&e.name===t.name));return{isOverflowed:e,summary:s,body:a,avatarUsers:u,hasEmptySummary:l}}class BD extends be.Component{descriptionScrollViewRef=null;resizeObserver=null;updateOverflowTimeoutId=null;descriptionRef=null;getCountCommitsNotInDiff=mr(((e,t)=>{if(1===e.length)return 0;{const n=new Set(t);return e.reduce(((e,t)=>e+(n.has(t.sha)?0:1)),0)}}));constructor(e){super(e),this.state=MD(!1,e);const t=window.ResizeObserver;t&&(this.resizeObserver=new t((e=>{for(const t of e)t.target===this.descriptionScrollViewRef&&(null!==this.updateOverflowTimeoutId&&clearImmediate(this.updateOverflowTimeoutId),this.updateOverflowTimeoutId=setImmediate(this.onResized))})))}onResized=()=>{if(this.descriptionRef){const e=this.descriptionRef.getBoundingClientRect().bottom;this.props.onDescriptionBottomChanged(e)}this.props.isExpanded||this.updateOverflow()};onDescriptionScrollViewRef=e=>{this.descriptionScrollViewRef=e,this.resizeObserver&&(this.resizeObserver.disconnect(),e?this.resizeObserver.observe(e):this.setState({isOverflowed:!1}))};onDescriptionRef=e=>{this.descriptionRef=e};renderExpander(){if(!this.state.body.length||!this.props.isExpanded&&!this.state.isOverflowed)return null;const e=this.props.isExpanded,t=e?this.onCollapse:this.onExpand,n=e?_i:mo;return be.createElement("button",{onClick:t,className:"expander"},be.createElement(si,{symbol:n}),e?"Collapse":"Expand")}onExpand=()=>{this.props.onExpandChanged(!0)};onCollapse=()=>{this.descriptionScrollViewRef&&(this.descriptionScrollViewRef.scrollTop=0),this.props.onExpandChanged(!1)};updateOverflow(){const e=this.descriptionScrollViewRef;e?this.setState({isOverflowed:e.scrollHeight>e.offsetHeight}):this.state.isOverflowed&&this.setState({isOverflowed:!1})}componentDidMount(){this.props.isExpanded||this.updateOverflow()}componentWillUpdate(e){e.selectedCommits.length===this.props.selectedCommits.length&&e.selectedCommits.every(((e,t)=>function(e,t){return e.summary===t.summary&&e.body===t.body}(e,this.props.selectedCommits[t])))||this.setState(MD(!1,e))}componentDidUpdate(e,t){this.props.isExpanded?this.state.isOverflowed&&this.setState({isOverflowed:!1}):(t.body!==this.state.body||e.isExpanded)&&this.updateOverflow()}renderDescription(){return 0===this.state.body.length?null:be.createElement("div",{className:"commit-summary-description-container",ref:this.onDescriptionRef},be.createElement("div",{className:"commit-summary-description-scroll-view",ref:this.onDescriptionScrollViewRef},be.createElement(Uk,{className:"commit-summary-description",emoji:this.props.emoji,repository:this.props.repository,text:this.state.body})),this.renderExpander())}onHighlightShasInDiff=()=>{this.props.onHighlightShas(this.props.shasInDiff)};onHighlightShasNotInDiff=()=>{const{onHighlightShas:e,selectedCommits:t,shasInDiff:n}=this.props;e(t.filter((e=>!n.includes(e.sha))).map((e=>e.sha)))};onRemoveHighlightOfShas=()=>{this.props.onHighlightShas([])};showUnreachableCommits=()=>{this.props.showUnreachableCommits(ND.Unreachable)};showReachableCommits=()=>{this.props.showUnreachableCommits(ND.Reachable)};renderCommitsNotReachable=()=>{const{selectedCommits:e,shasInDiff:t}=this.props;if(1===e.length)return;const n=this.getCountCommitsNotInDiff(e,t);if(0===n)return;const r=n>1?"commits":"commit";return be.createElement("div",{className:"commit-unreachable-info",onMouseOver:this.onHighlightShasNotInDiff,onMouseOut:this.onRemoveHighlightOfShas},be.createElement(si,{symbol:$i}),be.createElement(CE,{onClick:this.showUnreachableCommits},n," unreachable ",r)," ","not included.")};renderAuthors=()=>{const{selectedCommits:e,repository:t}=this.props,{avatarUsers:n}=this.state;if(!(e.length>1))return be.createElement("li",{className:"commit-summary-meta-item without-truncation"},be.createElement(ED,{users:n}),be.createElement(kD,{gitHubRepository:t.gitHubRepository,commits:e}))};renderCommitRef=()=>{const{selectedCommits:e}=this.props;if(!(e.length>1))return be.createElement("li",{className:"commit-summary-meta-item without-truncation","aria-label":"SHA"},be.createElement(si,{symbol:Fi}),be.createElement(WR,{className:"selectable",commit:e[0]}))};renderSummary=()=>{const{selectedCommits:e,shasInDiff:t}=this.props,{summary:n,hasEmptySummary:r}=this.state,i=Vr()("commit-summary-title",{"empty-summary":r});if(1===e.length)return be.createElement(Uk,{className:i,emoji:this.props.emoji,repository:this.props.repository,text:n});const o=this.getCountCommitsNotInDiff(e,t),s=e.length-o,a=s>1?"commits":"commit";return be.createElement("div",{className:i},"Showing changes from"," ",o>0?be.createElement(CE,{onMouseOver:this.onHighlightShasInDiff,onMouseOut:this.onRemoveHighlightOfShas,onClick:this.showReachableCommits},s," ",a):be.createElement(be.Fragment,null," ",s," ",a))};render(){const e=Vr()({expanded:this.props.isExpanded,collapsed:!this.props.isExpanded,"has-expander":this.props.isExpanded||this.state.isOverflowed,"hide-description-border":this.props.hideDescriptionBorder});return be.createElement("div",{id:"commit-summary",className:e},be.createElement("div",{className:"commit-summary-header"},this.renderSummary(),be.createElement("ul",{className:"commit-summary-meta"},this.renderAuthors(),this.renderCommitRef(),this.renderChangedFilesDescription(),this.renderLinesChanged(),this.renderTags(),be.createElement("li",{className:"commit-summary-meta-item without-truncation"},be.createElement(Yk,{isInteractiveDiff:!1,hideWhitespaceChanges:this.props.hideWhitespaceInDiff,onHideWhitespaceChangesChanged:this.props.onHideWhitespaceInDiffChanged,showSideBySideDiff:this.props.showSideBySideDiff,onShowSideBySideDiffChanged:this.props.onShowSideBySideDiffChanged,onDiffOptionsOpened:this.props.onDiffOptionsOpened})))),this.renderDescription(),this.renderCommitsNotReachable())}renderChangedFilesDescription=()=>{const e=this.props.changesetData.files.length,t=`${e} 更改 ${1 === e ? "文件" : "文件"}`;let n=0,r=0,i=0,o=0;for(const e of this.props.changesetData.files)switch(e.status.kind){case Io.New:n+=1;break;case Io.Modified:r+=1;break;case Io.Deleted:i+=1;break;case Io.Renamed:o+=1}const s=n+r+i+o>0,a=be.createElement(be.Fragment,null,n>0?be.createElement("span",null,be.createElement(si,{className:"files-added-icon",symbol:Ci}),n," added"):null,r>0?be.createElement("span",null,be.createElement(si,{className:"files-modified-icon",symbol:Si}),r," modified"):null,i>0?be.createElement("span",null,be.createElement(si,{className:"files-deleted-icon",symbol:Ei}),i," deleted"):null,o>0?be.createElement("span",null,be.createElement(si,{className:"files-renamed-icon",symbol:ki}),o," renamed"):null);return be.createElement(Xo,{className:"commit-summary-meta-item without-truncation",tooltipClassName:"changed-files-description-tooltip",tooltip:e>0&&s?a:void 0},be.createElement(si,{symbol:vi}),t)};renderLinesChanged(){const e=this.props.changesetData.linesAdded,t=this.props.changesetData.linesDeleted;if(e+t===0)return null;const n=`${e} ${1===e?"line":"lines"} added`,r=`${t} ${1===t?"line":"lines"} deleted`;return be.createElement(be.Fragment,null,be.createElement(Xo,{tagName:"li",className:"commit-summary-meta-item without-truncation lines-added",tooltip:n},"+",e),be.createElement(Xo,{tagName:"li",className:"commit-summary-meta-item without-truncation lines-deleted",tooltip:r},"-",t))}renderTags(){const{selectedCommits:e}=this.props;if(e.length>1)return;const t=e[0].tags;return 0!==t.length?be.createElement("li",{className:"commit-summary-meta-item",title:t.join("\n")},be.createElement("span",null,be.createElement(si,{symbol:co})),be.createElement("span",{className:"tags selectable"},t.join(", "))):void 0}}class FD extends be.Component{render(){const{file:e,focused:t}=this.props,{status:n}=e,r=Yl(n),i=this.props.availableWidth-20-5-16;return be.createElement("div",{className:"file"},be.createElement(Ik,{path:e.path,status:e.status,availableWidth:i,ariaHidden:!0}),be.createElement(Xo,{ancestorFocused:t,openOnFocus:!0,tooltip:r,direction:Zr.NORTH},be.createElement(si,{symbol:Vo(n),className:"status status-"+r.toLowerCase()})))}}class LD extends be.Component{constructor(e){super(e),this.state={focusedRow:null}}onSelectedRowChanged=e=>{const t=this.props.files[e];this.props.onSelectedFileChanged(t)};renderFile=e=>be.createElement(FD,{file:this.props.files[e],availableWidth:this.props.availableWidth,focused:this.state.focusedRow===e});rowForFile(e){return e?this.props.files.findIndex((t=>t.path===e.path)):-1}onRowContextMenu=(e,t)=>{this.props.onContextMenu?.(this.props.files[e],t)};getFileAriaLabel=e=>{const t=this.props.files[e],{path:n,status:r}=t;return`${n} ${Yl(r)}`};render(){return be.createElement("div",{className:"file-list"},be.createElement(sC,{rowRenderer:this.renderFile,rowCount:this.props.files.length,rowHeight:29,selectedRows:[this.rowForFile(this.props.selectedFile)],onSelectedRowChanged:this.onSelectedRowChanged,onRowDoubleClick:this.props.onRowDoubleClick,onRowContextMenu:this.onRowContextMenu,onRowKeyboardFocus:this.onRowFocus,onRowBlur:this.onRowBlur,getRowAriaLabel:this.getFileAriaLabel,invalidationProps:{focusedRow:this.state.focusedRow}}))}onRowFocus=e=>{this.setState({focusedRow:e})};onRowBlur=e=>{this.state.focusedRow===e&&this.setState({focusedRow:null})}}class HD extends we().Component{constructor(e){super(e),this.state={showCopied:!1}}onCopy=async e=>{e.preventDefault(),m.clipboard.writeText(this.props.copyContent),this.setState({showCopied:!0}),await kc(2e3),this.setState({showCopied:!1})};renderSymbol(){const{showCopied:e}=this.state,t=e?pi:yi;return we().createElement(si,{symbol:t})}render(){const{ariaLabel:e}=this.props,{showCopied:t}=this.state,n="Copied!",r=t?n:"";return we().createElement(ii,{className:"copy-button",tooltip:t?n:e,ariaLabel:e,onClick:this.onCopy,openTooltipOnClick:!0},this.renderSymbol(),we().createElement(pC,{message:n,trackedUserInput:r}))}}function UD(e,t){const{emoji:n,repository:r,selectedCommits:i}=t,o=new fk(n,r),{summary:s,body:a}=gk(function(e){return 0===e[0].summary.length?"Empty commit message":e[0].summary}(i),i[0].body,o),l=1===i.length&&0===i[0].summary.length,c=i.flatMap((e=>kE(r.gitHubRepository,e))),u=xD()(c,((e,t)=>e.email===t.email&&e.name===t.name));return{isOverflowed:e,summary:s,body:a,avatarUsers:u,hasEmptySummary:l}}class WD extends be.Component{descriptionScrollViewRef=null;resizeObserver=null;updateOverflowTimeoutId=null;descriptionRef=null;getCountCommitsNotInDiff=mr(((e,t)=>{if(1===e.length)return 0;{const n=new Set(t);return e.reduce(((e,t)=>e+(n.has(t.sha)?0:1)),0)}}));constructor(e){super(e),this.state=UD(!1,e);const t=window.ResizeObserver;t&&(this.resizeObserver=new t((e=>{for(const t of e)t.target===this.descriptionScrollViewRef&&(null!==this.updateOverflowTimeoutId&&clearImmediate(this.updateOverflowTimeoutId),this.updateOverflowTimeoutId=setImmediate(this.onResized))})))}onResized=()=>{if(this.descriptionRef){const e=this.descriptionRef.getBoundingClientRect().bottom;this.props.onDescriptionBottomChanged(e)}this.props.isExpanded||this.updateOverflow()};onDescriptionScrollViewRef=e=>{this.descriptionScrollViewRef=e,this.resizeObserver&&(this.resizeObserver.disconnect(),e?this.resizeObserver.observe(e):this.setState({isOverflowed:!1}))};onDescriptionRef=e=>{this.descriptionRef=e};renderExpander(){const{selectedCommits:e,isExpanded:t}=this.props;return e.length>1?null:be.createElement(ii,{onClick:t?this.onCollapse:this.onExpand,className:"expander",tooltip:t?"Collapse":"Expand",ariaExpanded:t,ariaLabel:t?"Collapse commit details":"Expand commit details",ariaControls:"expandable-commit-summary"},be.createElement(si,{symbol:t?_i:mo}))}onExpand=()=>{this.props.onExpandChanged(!0)};onCollapse=()=>{this.descriptionScrollViewRef&&(this.descriptionScrollViewRef.scrollTop=0),this.props.onExpandChanged(!1)};updateOverflow(){const e=this.descriptionScrollViewRef;e?this.setState({isOverflowed:e.scrollHeight>e.offsetHeight}):this.state.isOverflowed&&this.setState({isOverflowed:!1})}componentDidMount(){this.props.isExpanded||this.updateOverflow()}componentWillUpdate(e){e.selectedCommits.length===this.props.selectedCommits.length&&e.selectedCommits.every(((e,t)=>function(e,t){return e.summary===t.summary&&e.body===t.body}(e,this.props.selectedCommits[t])))||this.setState(UD(!1,e))}componentDidUpdate(e,t){this.props.isExpanded?this.state.isOverflowed&&this.setState({isOverflowed:!1}):(t.body!==this.state.body||e.isExpanded)&&this.updateOverflow()}renderDescription(){if(0===this.state.body.length||this.props.selectedCommits.length>1)return null;const e=Vr()("ecs-description",{overflowed:this.state.isOverflowed});return be.createElement("div",{className:e,ref:this.onDescriptionRef},be.createElement("div",{className:"ecs-description-scroll-view",ref:this.onDescriptionScrollViewRef},be.createElement(Uk,{className:"ecs-description-text selectable",emoji:this.props.emoji,repository:this.props.repository,text:this.state.body})))}onHighlightShasInDiff=()=>{this.props.onHighlightShas(this.props.shasInDiff)};onHighlightShasNotInDiff=()=>{const{onHighlightShas:e,selectedCommits:t,shasInDiff:n}=this.props;e(t.filter((e=>!n.includes(e.sha))).map((e=>e.sha)))};onRemoveHighlightOfShas=()=>{this.props.onHighlightShas([])};showUnreachableCommits=()=>{this.props.showUnreachableCommits(ND.Unreachable)};showReachableCommits=()=>{this.props.showUnreachableCommits(ND.Reachable)};renderCommitsNotReachable=()=>{const{selectedCommits:e,shasInDiff:t}=this.props;if(1===e.length)return;const n=this.getCountCommitsNotInDiff(e,t);if(0===n)return;const r=n>1?"commits":"commit";return be.createElement("div",{className:"commit-unreachable-info",onMouseOver:this.onHighlightShasNotInDiff,onMouseOut:this.onRemoveHighlightOfShas},be.createElement(si,{symbol:$i}),be.createElement(CE,{onClick:this.showUnreachableCommits},n," unreachable ",r)," ","not included.")};renderExpandedAuthor(e){return e?e.name?be.createElement(be.Fragment,null,e.name," <",e.email,">"):e.email:"Unknown user"}renderAuthorList=()=>this.state.avatarUsers.map(((e,t)=>be.createElement("div",{className:"author selectable",key:t},be.createElement(IE,{user:e,title:null}),be.createElement("div",null,this.renderExpandedAuthor(e)))));renderAuthorStack=()=>{const{selectedCommits:e,repository:t}=this.props,{avatarUsers:n}=this.state;return be.createElement(be.Fragment,null,be.createElement(ED,{users:n}),be.createElement(kD,{gitHubRepository:t.gitHubRepository,commits:e}))};renderAuthors=()=>{const{selectedCommits:e,isExpanded:t}=this.props;if(!(e.length>1))return be.createElement("div",{className:"ecs-meta-item authors"},t?this.renderAuthorList():this.renderAuthorStack())};renderCommitRef=()=>{const{selectedCommits:e,isExpanded:t}=this.props;if(e.length>1)return;const{shortSha:n,sha:r}=e[0];return be.createElement("div",{className:"ecs-meta-item commit-ref"},be.createElement(si,{symbol:Fi}),be.createElement("div",{className:"ref selectable"},t?r:n),be.createElement(HD,{ariaLabel:"Copy the full SHA",copyContent:r}))};renderSummaryText=()=>{const{selectedCommits:e,shasInDiff:t}=this.props,{summary:n}=this.state;if(1===e.length)return be.createElement(Uk,{emoji:this.props.emoji,repository:this.props.repository,text:n});const r=this.getCountCommitsNotInDiff(e,t),i=e.length-r,o=i>1?"commits":"commit";return be.createElement(be.Fragment,null,"Showing changes from"," ",r>0?be.createElement(CE,{className:"commits-in-diff",onMouseOver:this.onHighlightShasInDiff,onMouseOut:this.onRemoveHighlightOfShas,onClick:this.showReachableCommits},i," ",o):be.createElement(be.Fragment,null," ",i," ",o))};renderSummary=()=>{const{hasEmptySummary:e}=this.state,t=Vr()("ecs-title","selectable",{"empty-summary":e});return be.createElement("div",{className:t},this.renderSummaryText(),this.renderExpander())};renderMetaItems=()=>this.props.selectedCommits.length>1?null:be.createElement("div",{className:"ecs-meta"},this.renderAuthors(),this.renderCommitRef(),this.renderLinesChanged(),this.renderTags());render(){const e=Vr()({expanded:this.props.isExpanded});return be.createElement("div",{id:"expandable-commit-summary",className:e},this.renderSummary(),this.renderDescription(),this.renderMetaItems(),this.renderCommitsNotReachable())}renderLinesChanged(){const{changesetData:e,selectedCommits:t,isExpanded:n}=this.props,{linesAdded:r,linesDeleted:i}=e;return 0===r&&0===i||t.length>1?null:be.createElement("div",{className:"ecs-meta-item lines-added-deleted"},n?be.createElement(si,{symbol:vi}):null,be.createElement("div",{className:"lines-added"},n?be.createElement(be.Fragment,null,r," added lines"):be.createElement(be.Fragment,null,"+",r)),be.createElement("div",{className:"lines-deleted"},n?be.createElement(be.Fragment,null,i," removed lines"):be.createElement(be.Fragment,null,"-",i)))}renderTags(){const{selectedCommits:e}=this.props;if(e.length>1)return;const t=e[0].tags;return 0!==t.length?be.createElement("div",{className:"ecs-meta-item tags selectable"},be.createElement(si,{symbol:co}),be.createElement("span",null,t.join(", "))):void 0}}class $D extends be.Component{loadChangedFilesScheduler=new oE(200);historyRef=null;constructor(e){super(e),this.state={isExpanded:!1,hideDescriptionBorder:!1}}onFileSelected=e=>{this.props.dispatcher.changeFileSelection(this.props.repository,e)};onRowDoubleClick=e=>{const t=this.props.changesetData.files[e];this.props.onOpenInExternalEditor(t.path)};onHistoryRef=e=>{this.historyRef=e};componentWillUpdate(e){const t=this.props.selectedCommits.map((e=>e.sha)).join(""),n=e.selectedCommits.map((e=>e.sha)).join("");t!==n&&this.state.isExpanded&&this.setState({isExpanded:!1})}componentWillUnmount(){this.loadChangedFilesScheduler.clear()}renderDiff(){const e=this.props.selectedFile,t=this.props.currentDiff;if(null==e){const e=0===this.props.changesetData.files.length?"":"No file selected";return be.createElement("div",{className:"panel blankslate",id:"diff"},e)}return be.createElement("div",{className:"diff-container"},this.renderDiffHeader(),be.createElement(tx,{repository:this.props.repository,imageDiffType:this.props.selectedDiffType,file:e,diff:t,readOnly:!0,hideWhitespaceInDiff:this.props.hideWhitespaceInDiff,showSideBySideDiff:this.props.showSideBySideDiff,onOpenBinaryFile:this.props.onOpenBinaryFile,onChangeImageDiffType:this.props.onChangeImageDiffType,onHideWhitespaceInDiffChanged:this.onHideWhitespaceInDiffChanged,onOpenSubmodule:this.props.onOpenSubmodule}))}renderDiffHeader(){const{selectedFile:e}=this.props;if(null===e||!$t())return null;const{path:t,status:n}=e;return be.createElement(Xk,{diff:this.props.currentDiff,path:t,status:n,showSideBySideDiff:this.props.showSideBySideDiff,onShowSideBySideDiffChanged:this.onShowSideBySideDiffChanged,hideWhitespaceInDiff:this.props.hideWhitespaceInDiff,onHideWhitespaceInDiffChanged:this.onHideWhitespaceInDiffChanged,onDiffOptionsOpened:this.props.onDiffOptionsOpened})}renderCommitSummary(e){return $t()?be.createElement(WD,{selectedCommits:e,shasInDiff:this.props.shasInDiff,changesetData:this.props.changesetData,emoji:this.props.emoji,repository:this.props.repository,onExpandChanged:this.onExpandChanged,isExpanded:this.state.isExpanded,onDescriptionBottomChanged:this.onDescriptionBottomChanged,onHighlightShas:this.onHighlightShas,showUnreachableCommits:this.showUnreachableCommits}):be.createElement(BD,{selectedCommits:e,shasInDiff:this.props.shasInDiff,changesetData:this.props.changesetData,emoji:this.props.emoji,repository:this.props.repository,onExpandChanged:this.onExpandChanged,isExpanded:this.state.isExpanded,onDescriptionBottomChanged:this.onDescriptionBottomChanged,hideDescriptionBorder:this.state.hideDescriptionBorder,hideWhitespaceInDiff:this.props.hideWhitespaceInDiff,showSideBySideDiff:this.props.showSideBySideDiff,onHideWhitespaceInDiffChanged:this.onHideWhitespaceInDiffChanged,onShowSideBySideDiffChanged:this.onShowSideBySideDiffChanged,onDiffOptionsOpened:this.props.onDiffOptionsOpened,onHighlightShas:this.onHighlightShas,showUnreachableCommits:this.showUnreachableCommits})}showUnreachableCommits=e=>{this.props.dispatcher.showUnreachableCommits(e)};onHighlightShas=e=>{this.props.dispatcher.updateShasToHighlight(this.props.repository,e)};onExpandChanged=e=>{this.setState({isExpanded:e})};onDescriptionBottomChanged=e=>{if(this.historyRef){const t=this.historyRef.getBoundingClientRect().bottom;this.setState({hideDescriptionBorder:e>=t})}};onHideWhitespaceInDiffChanged=e=>this.props.dispatcher.onHideWhitespaceInHistoryDiffChanged(e,this.props.repository,this.props.selectedFile);onShowSideBySideDiffChanged=e=>{this.props.dispatcher.onShowSideBySideDiffChanged(e)};onCommitSummaryReset=()=>{this.props.dispatcher.resetCommitSummaryWidth()};onCommitSummaryResize=e=>{this.props.dispatcher.setCommitSummaryWidth(e)};renderFileList(){const e=this.props.changesetData.files;if(0===e.length)return be.createElement("div",{className:"fill-window"},"No files in commit");const t=lc(this.props.commitSummaryWidth)-1;return be.createElement(be.Fragment,null,this.renderFileHeader(),be.createElement(LD,{files:e,onSelectedFileChanged:this.onFileSelected,selectedFile:this.props.selectedFile,availableWidth:t,onContextMenu:this.onContextMenu,onRowDoubleClick:this.onRowDoubleClick}))}renderFileHeader(){if(!$t())return null;const e=this.props.changesetData.files.length,t=1===e?"文件":"文件";return be.createElement("div",{className:"file-list-header"},e," changed ",t)}onOpenItem=t=>{Vk(e.join(this.props.repository.path,t),this.props.dispatcher)};render(){const{selectedCommits:e,isContiguous:t}=this.props;if(e.length>1&&!t)return this.renderMultipleCommitsBlankSlate();if(0===e.length)return be.createElement(zD,null);const n=this.state.isExpanded?"expanded":"collapsed",{commitSummaryWidth:r}=this.props;return be.createElement("div",{id:"history",ref:this.onHistoryRef,className:n},this.renderCommitSummary(e),be.createElement("div",{className:"commit-details"},be.createElement(Rd,{width:r.value,minimumWidth:r.min,maximumWidth:r.max,onResize:this.onCommitSummaryResize,onReset:this.onCommitSummaryReset},this.renderFileList()),this.renderDiff()),this.renderDragOverlay())}renderDragOverlay(){return this.props.showDragOverlay?be.createElement("div",{id:"drag-overlay-background"}):null}renderMultipleCommitsBlankSlate(){const e=St(__dirname,"static/empty-no-commit.svg");return be.createElement("div",{id:"multiple-commits-selected",className:"blankslate"},be.createElement("div",{className:"panel blankslate"},be.createElement("img",{src:e,className:"blankslate-image",alt:""}),be.createElement("div",null,be.createElement("p",null,"无法显示差异，当选择多个 非连续性的 selected."),be.createElement("div",null,"你可以："),be.createElement("ul",null,be.createElement("li",null,"选择单个提交 或连续的提交范围。 以查看差异。"),be.createElement("li",null,"将提交拖动到分支菜单中以挑选它们。"),be.createElement("li",null,"将提交拖动到一起以压缩它们或重新排序。"),be.createElement("li",null,"右键单击多个提交以查看选项。")))),this.renderDragOverlay())}onContextMenu=async(t,n)=>{n.preventDefault();const{selectedCommits:r,localCommitSHAs:i,repository:o,externalEditorLabel:s}=this.props,a=e.join(o.path,t.path),l=await S(a);if(!l)return void lC([{label:"File Does Not Exist on Disk",enabled:!1}]);e.extname(t.path);const c=[{label:Rh,action:()=>it(o,t.path),enabled:l},{label:s?`打开于 ${s}`:kh,action:()=>this.props.onOpenInExternalEditor(t.path),enabled:l},{label:Th,action:()=>this.onOpenItem(t.path),enabled:l},{type:"separator"},{label:Sh,action:()=>m.clipboard.writeText(a)},{label:Eh,action:()=>m.clipboard.writeText(e.normalize(t.path))},{type:"separator"}];let u="在Github上查看";const h=o.gitHubRepository;h&&h.endpoint!==Qn()&&(u="在Github上查看 Enterprise"),c.push({label:u,action:()=>this.onViewOnGitHub(r[0].sha,t),enabled:1===r.length&&!i.includes(r[0].sha)&&!!h&&this.props.selectedCommits.length>0}),lC(c)};onViewOnGitHub=(e,t)=>{this.props.onViewCommitOnGitHub(e,t.path)}}function zD(){const e=St(__dirname,"static/empty-no-commit.svg");return be.createElement("div",{className:"panel blankslate"},be.createElement("img",{src:e,className:"blankslate-image",alt:""}),"未选择提交")}var qD=n(3518);const jD="/usr/local/bin/github",GD=e.resolve(__dirname,"static","github.sh");async function VD(t){await function(e){return e?new Promise(((e,t)=>{qD.unlink(jD,(n=>{null===n?e():t(new Error(`Failed to remove file at ${jD}. Authorization of GitHub Desktop Helper is required.`))}))})):(0,y.unlink)(jD)}(t),await function(t){const n=e.dirname(jD);return t?new Promise(((e,t)=>{qD.makeTree(n,(n=>{null===n?e():t(new Error(`Failed to create intermediate directories to ${jD}`))}))})):(0,y.mkdir)(n,{recursive:!0})}(t),await function(e){return e?new Promise(((e,t)=>{qD.symlink(GD,jD,(n=>{null===n?e():t(new Error(`Failed to symlink ${GD} to ${jD}`))}))})):(0,y.symlink)(GD,jD)}(t)}function KD(e){return e instanceof at?e:null}function YD(e){return e instanceof zw?e:null}async function XD(e,t){const n=KD(e)||e;return await t.presentError(n),null}const QD=/^ ! \[remote rejected\] .*? -> .*? \(refusing to allow an OAuth App to create or update workflow `(.*?)` without `workflow` scope\)/m,ZD=/`([^']+)' organization has enabled or enforced SAML SSO.*?you must re-authorize/s;class JD extends be.Component{static getDerivedStateFromProps(e,t){const{repository:n,aheadBehindStore:r}=e,i=e.currentBranch?.tip.sha,o=e.branch.tip.sha;return i===t.comparisonFrom&&o===t.comparisonTo?null:void 0===i||void 0===o?{aheadBehind:void 0,comparisonFrom:i,comparisonTo:o}:{aheadBehind:r.tryGetAheadBehind(n,i,o),comparisonFrom:i,comparisonTo:o}}aheadBehindSubscription=null;constructor(e){super(e),this.state={}}componentDidMount(){void 0===this.state.aheadBehind&&this.subscribeToAheadBehindStore()}componentDidUpdate(e,t){const{comparisonFrom:n,comparisonTo:r}=this.state;t.comparisonFrom===n&&t.comparisonTo===r||this.subscribeToAheadBehindStore()}componentWillUnmount(){this.unsubscribeFromAheadBehindStore()}subscribeToAheadBehindStore(){const{aheadBehindStore:e,repository:t}=this.props,{comparisonFrom:n,comparisonTo:r,aheadBehind:i}=this.state;this.unsubscribeFromAheadBehindStore(),void 0!==n&&void 0!==r&&void 0===i&&(this.aheadBehindSubscription=e.getAheadBehind(t,n,r,(e=>this.setState({aheadBehind:e}))))}unsubscribeFromAheadBehindStore(){null!==this.aheadBehindSubscription&&this.aheadBehindSubscription.dispose()}render(){const{currentBranch:e,branch:t}=this.props,{aheadBehind:n}=this.state,r=t.name===e?.name?pi:Bi,i=n?be.createElement("div",{className:"branch-commit-counter"},be.createElement("span",{className:"branch-commit-counter-item"},n.behind,be.createElement(si,{className:"icon",symbol:li})),be.createElement("span",{className:"branch-commit-counter-item"},n.ahead,be.createElement(si,{className:"icon",symbol:ui}))):null;return be.createElement("div",{className:"branches-list-item"},be.createElement(si,{className:"icon",symbol:r}),be.createElement(Xo,{className:"name",tooltip:t.name,onlyWhenOverflowed:!0,tagName:"div"},be.createElement(Yo,{text:t.name,highlight:this.props.matches.title})),i)}}class eA extends be.Component{constructor(e){super(e),this.state={isFocused:!1}}render(){const e=Vr()("fancy-text-box-component",this.props.className,{disabled:this.props.disabled},{focused:this.state.isFocused}),t=Vr()("fancy-octicon");return be.createElement("div",{className:e},be.createElement(si,{className:t,symbol:this.props.symbol}),be.createElement(dC,{ariaLabel:this.props.ariaLabel,value:this.props.value,onFocus:this.onFocus,onBlur:this.onBlur,autoFocus:this.props.autoFocus,disabled:this.props.disabled,type:this.props.type,placeholder:this.props.placeholder,displayClearButton:this.props.displayClearButton,onKeyDown:this.props.onKeyDown,onValueChanged:this.props.onValueChanged,onSearchCleared:this.props.onSearchCleared,tabIndex:this.props.tabIndex,ref:this.props.onRef}))}onFocus=()=>{void 0!==this.props.onFocus&&this.props.onFocus(),this.setState({isFocused:!0})};onBlur=e=>{void 0!==this.props.onBlur&&this.props.onBlur(e),this.setState({isFocused:!1})}}class tA extends be.Component{render(){const{status:e,classNamePrefix:t}=this.props;if(null===e)return null;const{kind:n}=e,r=`${t}-icon-container`;return be.createElement("div",{className:r},be.createElement(si,{className:Vr()(t,`${t}-${n}`,this.props.className),symbol:nA(n)}))}}function nA(e){switch(e){case Cu.Loading:return Ri;case Cu.Conflicts:return ai;case Cu.Invalid:return go;case Cu.Clean:return pi;default:return et(0,`Unknown state: ${JSON.stringify(e)}`)}}async function rA(e,t,n,r){const i=e.name;r({kind:Cu.Loading});const o=await Ec((()=>Vp(n,e.tip.sha,t.tip.sha)),500);i===e.name?r(null!==o?{kind:Cu.Clean,commits:o}:{kind:Cu.Invalid}):r(null)}class iA extends be.Component{get computedAction(){return"Rebase"===this.state.selectedOperation?null!==this.state.rebasePreview?this.state.rebasePreview.kind:null:null!==this.props.mergeStatus?this.props.mergeStatus.kind:null}get commitCount(){const{selectedOperation:e,rebasePreview:t}=this.state;return"Rebase"===e?null!==t&&t.kind===Cu.Clean?t.commits.length:0:this.props.commitsBehind}constructor(e){super(e),this.state={selectedOperation:"Merge",rebasePreview:null}}isUpdateBranchDisabled(){if(this.commitCount<=0)return!0;const{selectedOperation:e,rebasePreview:t}=this.state;return"Rebase"===e?null===t||t.kind!==Cu.Clean:null!=this.props.mergeStatus&&this.props.mergeStatus.kind===Cu.Invalid}updateRebasePreview=async e=>{const{currentBranch:t,repository:n}=this.props;rA(e,t,n,(e=>{this.setState({rebasePreview:e})}))};onOperationChange=e=>{yd(e.id)&&(this.setState({selectedOperation:e.id}),"Rebase"===e.id&&this.updateRebasePreview(this.props.comparisonBranch))};onOperationInvoked=async(e,t)=>{if(!yd(t.id))return;e.preventDefault();const{dispatcher:n,repository:r}=this.props;await this.dispatchOperation(t.id),n.executeCompare(r,{kind:Ke.History}),n.updateCompareForm(r,{showBranchList:!1,filterText:""})};async dispatchOperation(e){const{dispatcher:t,currentBranch:n,comparisonBranch:r,repository:i,mergeStatus:o}=this.props;if("Rebase"===e){const e=null!==this.state.rebasePreview&&this.state.rebasePreview.kind===Cu.Clean?this.state.rebasePreview.commits:[];return t.startRebase(i,r,n,e)}const s="Squash"===e;return t.initializeMultiCommitOperation(i,{kind:"Merge",isSquash:s,sourceBranch:r},n,[],n.tip.sha),t.incrementMetric("mergesInitiatedFromComparison"),t.mergeBranch(i,r,o,s)}render(){const e=this.isUpdateBranchDisabled(),t=this.commitCount>0?this.renderMergeStatus():null;return be.createElement("div",{className:"merge-cta"},t,be.createElement(mD,{checkedOption:this.state.selectedOperation,options:[{label:"创建合并提交",description:"来自所选分支的提交将通过合并提交添加到当前分支.",id:"Merge"},{label:"压缩合并",description:"选定分支中的提交将合并为当前分支中的一个提交.",id:"Squash"},{label:"变基",description:"来自所选分支的提交将重新设置基础并添加到当前分支.",id:"Rebase"}],dropdownAriaLabel:"Merge options",disabled:e,onCheckedOptionChange:this.onOperationChange,onSubmit:this.onOperationInvoked}))}renderMergeStatus(){return null===this.computedAction?null:be.createElement("div",{className:"merge-status-component"},be.createElement(tA,{status:{kind:this.computedAction},classNamePrefix:"merge-status"}),this.renderStatusDetails())}renderStatusDetails(){const{currentBranch:e,comparisonBranch:t,mergeStatus:n}=this.props,{selectedOperation:r}=this.state;if(null===this.computedAction)return null;switch(this.computedAction){case Cu.Loading:return this.renderLoadingMessage();case Cu.Clean:return this.renderCleanMessage(e,t);case Cu.Invalid:return this.renderInvalidMessage()}return"Rebase"!==r&&null!==n&&n.kind===Cu.Conflicts?this.renderConflictedMergeMessage(e,t,n.conflictedFiles):null}renderLoadingMessage(){return be.createElement("div",{className:"merge-message merge-message-loading"},"Checking for ability to ",this.state.selectedOperation.toLowerCase()," ","automatically…")}renderCleanMessage(e,t){if(this.commitCount<=0)return null;const n=1===this.commitCount?"commit":"commits";return"Rebase"===this.state.selectedOperation?be.createElement("div",{className:"merge-message"},"This will update ",be.createElement("strong",null,e.name)," by applying its ",be.createElement("strong",null,`${this.commitCount} ${n}`)," on top of ",be.createElement("strong",null,t.name)):be.createElement("div",{className:"merge-message"},"这将合并",be.createElement("strong",null,` ${this.commitCount} ${n}`)," 自 ",be.createElement("strong",null,t.name)," 到 ",be.createElement("strong",null,e.name))}renderInvalidMessage(){return"Rebase"===this.state.selectedOperation?be.createElement("div",{className:"merge-message"},"Unable to start rebase. Check you have chosen a valid branch."):be.createElement("div",{className:"merge-message"},"无法在此仓库中合并不相关的历史记录")}renderConflictedMergeMessage(e,t,n){const r=1===n?"文件":"文件";return be.createElement("div",{className:"merge-message"},"这将会",be.createElement("strong",null,` ${n} 与 ${r} 冲突`)," 当合并时 ",be.createElement("strong",null,t.name)," 到 ",be.createElement("strong",null,e.name))}}class oA extends be.Component{textbox=null;loadChangedFilesScheduler=new oE(200);branchList=null;commitListRef=be.createRef();loadingMoreCommitsPromise=null;resultCount=0;constructor(e){super(e),this.state={focusedBranch:null}}componentWillReceiveProps(e){const t=e.compareState.formState,n=this.props.compareState.formState;if(t.kind===n.kind||t.kind!==Ke.History){if(t.kind!==Ke.History&&n.kind!==Ke.History){const e=n.comparisonBranch,r=t.comparisonBranch;e.name!==r.name&&this.setState({focusedBranch:r})}}else this.setState({focusedBranch:null})}componentDidUpdate(e){const{showBranchList:t}=this.props.compareState;t!==e.compareState.showBranchList&&null!==this.textbox&&(t?this.textbox.focus():t||this.textbox.blur())}focusHistory(){this.commitListRef.current?.focus()}componentWillMount(){this.props.dispatcher.initializeCompare(this.props.repository)}componentWillUnmount(){this.textbox=null,this.props.dispatcher.updateCompareForm(this.props.repository,{showBranchList:!1})}render(){const{branches:e,filterText:t,showBranchList:n}=this.props.compareState,r=function(e){const{branches:t,formState:n}=e;return t.some((e=>!e.isDesktopForkRemoteBranch))?n.kind===Ke.History?"Select Branch to Compare…":void 0:"No Branches to Compare"}(this.props.compareState);return be.createElement("div",{id:"compare-view",role:"tabpanel","aria-labelledby":"history-tab"},be.createElement("div",{className:"compare-form"},be.createElement(eA,{ariaLabel:"Branch filter",symbol:Bi,displayClearButton:!0,placeholder:r,onFocus:this.onTextBoxFocused,value:t,disabled:!e.some((e=>!e.isDesktopForkRemoteBranch)),onRef:this.onTextBoxRef,onValueChanged:this.onBranchFilterTextChanged,onKeyDown:this.onBranchFilterKeyDown,onSearchCleared:this.handleEscape})),n?this.renderFilterList():this.renderCommits())}onBranchesListRef=e=>{this.branchList=e};renderCommits(){const e=this.props.compareState.formState;return be.createElement("div",{className:"compare-commit-list"},e.kind===Ke.History?this.renderCommitList():this.renderTabBar(e))}filterListResultsChanged=e=>{this.resultCount=e};viewHistoryForBranch=()=>{this.props.dispatcher.executeCompare(this.props.repository,{kind:Ke.History}),this.props.dispatcher.updateCompareForm(this.props.repository,{showBranchList:!1})};renderCommitList(){const{formState:e,commitSHAs:t}=this.props.compareState;let n;if(e.kind===Ke.History)n="无记录";else{const t=e.comparisonBranch.name;n=e.comparisonMode===Ye.Ahead?be.createElement("p",null,"比较的分支 (",be.createElement(QE,null,t),") 是您分支的最新信息"):be.createElement("p",null,"您的分支与比较的分支是最新的 (",be.createElement(QE,null,t),")")}return be.createElement(PD,{ref:this.commitListRef,gitHubRepository:this.props.repository.gitHubRepository,isLocalRepository:this.props.isLocalRepository,commitLookup:this.props.commitLookup,commitSHAs:t,selectedSHAs:this.props.selectedCommitShas,shasToHighlight:this.props.shasToHighlight,localCommitSHAs:this.props.localCommitSHAs,canResetToCommits:e.kind===Ke.History,canUndoCommits:e.kind===Ke.History,canAmendCommits:e.kind===Ke.History,emoji:this.props.emoji,reorderingEnabled:e.kind===Ke.History,onViewCommitOnGitHub:this.props.onViewCommitOnGitHub,onUndoCommit:this.onUndoCommit,onResetToCommit:this.onResetToCommit,onRevertCommit:sA(this.props.compareState.formState)?this.props.onRevertCommit:void 0,onAmendCommit:this.props.onAmendCommit,onCommitsSelected:this.onCommitsSelected,onScroll:this.onScroll,onCreateBranch:this.onCreateBranch,onCheckoutCommit:this.onCheckoutCommit,onCreateTag:this.onCreateTag,onDeleteTag:this.onDeleteTag,onCherryPick:this.onCherryPick,onDropCommitInsertion:this.onDropCommitInsertion,onSquash:this.onSquash,emptyListMessage:n,onCompareListScrolled:this.props.onCompareListScrolled,compareListScrollTop:this.props.compareListScrollTop,tagsToPush:this.props.tagsToPush??[],onRenderCommitDragElement:this.onRenderCommitDragElement,onRemoveCommitDragElement:this.onRemoveCommitDragElement,disableSquashing:e.kind===Ke.Compare,isMultiCommitOperationInProgress:this.props.isMultiCommitOperationInProgress})}onDropCommitInsertion=async(e,t,n)=>{if(!await Vc(this.props.repository,n))return this.props.dispatcher.reorderCommits(this.props.repository,t,e,n);XD(new Error("Unable to reorder. Reordering replays all commits up to the last one required for the reorder. A merge commit cannot exist among those commits."),this.props.dispatcher)};onRenderCommitDragElement=(e,t)=>{this.props.dispatcher.setDragElement({type:Js.Commit,commit:e,selectedCommits:t,gitHubRepository:this.props.repository.gitHubRepository})};onRemoveCommitDragElement=()=>{this.props.dispatcher.clearDragElement()};renderActiveTab(e){return be.createElement("div",{className:"compare-commit-list"},this.renderCommitList(),e.comparisonMode===Ye.Behind?this.renderMergeCallToAction(e):null)}renderFilterList(){const{defaultBranch:e,branches:t,recentBranches:n,filterText:r}=this.props.compareState;return be.createElement(Dx,{ref:this.onBranchesListRef,defaultBranch:e,currentBranch:this.props.currentBranch,allBranches:t,recentBranches:n,filterText:r,textbox:this.textbox,selectedBranch:this.state.focusedBranch,canCreateNewBranch:!1,onSelectionChanged:this.onSelectionChanged,onItemClick:this.onBranchItemClicked,onFilterTextChanged:this.onBranchFilterTextChanged,renderBranch:this.renderCompareBranchListItem,getBranchAriaLabel:this.getBranchAriaLabel,onFilterListResultsChanged:this.filterListResultsChanged})}renderMergeCallToAction(e){return null==this.props.currentBranch?null:be.createElement(iA,{repository:this.props.repository,dispatcher:this.props.dispatcher,mergeStatus:this.props.compareState.mergeStatus,currentBranch:this.props.currentBranch,comparisonBranch:e.comparisonBranch,commitsBehind:e.aheadBehind.behind})}onTabClicked=e=>{const t=this.props.compareState.formState;if(t.kind===Ke.History)return;const n=0===e?Ye.Behind:Ye.Ahead,r=t.comparisonBranch;this.props.dispatcher.executeCompare(this.props.repository,{kind:Ke.Compare,branch:r,comparisonMode:n})};renderTabBar(e){const t=e.comparisonMode===Ye.Behind?0:1;return be.createElement("div",{className:"compare-content"},be.createElement(KE,{selectedIndex:t,onTabClicked:this.onTabClicked},be.createElement("span",null,`Behind (${e.aheadBehind.behind})`),be.createElement("span",null,`Ahead (${e.aheadBehind.ahead})`)),this.renderActiveTab(e))}renderCompareBranchListItem=(e,t)=>be.createElement(JD,{branch:e.branch,currentBranch:this.props.currentBranch,matches:t,repository:this.props.repository,aheadBehindStore:this.props.aheadBehindStore});getBranchAriaLabel=e=>e.branch.name;onBranchFilterKeyDown=e=>{const t=e.key;if("Enter"===t){if(0===this.resultCount)return void e.preventDefault();const t=this.state.focusedBranch;null===t?this.viewHistoryForBranch():(this.props.dispatcher.executeCompare(this.props.repository,{kind:Ke.Compare,comparisonMode:Ye.Behind,branch:t}),this.props.dispatcher.updateCompareForm(this.props.repository,{filterText:t.name})),this.textbox&&this.textbox.blur()}else"Escape"===t?this.handleEscape():"ArrowDown"===t?null!==this.branchList&&this.branchList.selectNextItem(!0,"down"):"ArrowUp"===t&&null!==this.branchList&&this.branchList.selectNextItem(!0,"up")};handleEscape=()=>{this.clearFilterState(),this.textbox&&this.textbox.blur()};onCommitsSelected=(e,t)=>{this.props.dispatcher.changeCommitSelection(this.props.repository,e.map((e=>e.sha)),t),this.loadChangedFilesScheduler.queue((()=>{this.props.dispatcher.loadChangedFilesForCurrentSelection(this.props.repository)}))};onScroll=(e,t)=>{const n=this.props.compareState;if(n.formState.kind!==Ke.Compare&&n.commitSHAs.length-t<=10){if(null!=this.loadingMoreCommitsPromise)return;this.loadingMoreCommitsPromise=this.props.dispatcher.loadNextCommitBatch(this.props.repository).then((()=>{window.setTimeout((()=>{this.loadingMoreCommitsPromise=null}),500)}))}};onBranchFilterTextChanged=e=>{0===e.length&&this.setState({focusedBranch:null}),this.props.dispatcher.updateCompareForm(this.props.repository,{filterText:e})};clearFilterState=()=>{this.setState({focusedBranch:null}),this.props.dispatcher.updateCompareForm(this.props.repository,{filterText:""}),this.viewHistoryForBranch()};onBranchItemClicked=e=>{this.props.dispatcher.executeCompare(this.props.repository,{kind:Ke.Compare,comparisonMode:Ye.Behind,branch:e}),this.setState({focusedBranch:null}),this.props.dispatcher.updateCompareForm(this.props.repository,{filterText:e.name,showBranchList:!1})};onSelectionChanged=(e,t)=>{this.setState({focusedBranch:e})};onTextBoxFocused=()=>{this.props.dispatcher.updateCompareForm(this.props.repository,{showBranchList:!0})};onTextBoxRef=e=>{this.textbox=e};onCreateTag=e=>{this.props.dispatcher.showCreateTagDialog(this.props.repository,e,this.props.localTags)};onUndoCommit=e=>{this.props.dispatcher.undoCommit(this.props.repository,e)};onResetToCommit=e=>{this.props.dispatcher.resetToCommit(this.props.repository,e)};onCreateBranch=e=>{const{repository:t,dispatcher:n}=this.props;n.showPopup({type:nl.CreateBranch,repository:t,targetCommit:e})};onCheckoutCommit=e=>{const{repository:t,dispatcher:n,askForConfirmationOnCheckoutCommit:r}=this.props;r?n.showPopup({type:nl.ConfirmCheckoutCommit,commit:e,repository:t}):n.checkoutCommit(t,e)};onDeleteTag=e=>{this.props.dispatcher.showDeleteTagDialog(this.props.repository,e)};onCherryPick=e=>{this.props.onCherryPick(this.props.repository,e)};onSquash=async(e,t,n,r)=>{const i=e.filter((e=>e.sha!==t.sha)),o=[...i,t],s=function(e){const t=e.flatMap((e=>e.coAuthors)),n=xD()(t,((e,t)=>e.email===t.email&&e.name===t.name));return n.map((e=>({kind:"known",name:e.name,email:e.email,username:null})))}(o),a=function(e,t){const n=e.map((e=>`${e.summary.trim()}\n\n${e.bodyNoCoAuthors.trim()}`)),r=[t.bodyNoCoAuthors.trim(),...n].filter((e=>""!==e.trim()));return r.join("\n\n")}(i,t);await Vc(this.props.repository,n)?XD(new Error("Unable to squash. Squashing replays all commits up to the last one required for the squash. A merge commit cannot exist among those commits."),this.props.dispatcher):(this.props.dispatcher.recordSquashInvoked(r),this.props.dispatcher.showPopup({type:nl.CommitMessage,repository:this.props.repository,coAuthors:s,showCoAuthoredBy:s.length>0,commitMessage:{summary:t.summary,description:a},dialogTitle:`Squash ${o.length} Commits`,dialogButtonText:`Squash ${o.length} Commits`,prepopulateCommitSummary:!0,onSubmitCommitMessage:async e=>(this.props.dispatcher.squash(this.props.repository,i,t,n,e),!0)}))}}function sA(e){return e.kind===Ke.History||e.comparisonMode===Ye.Ahead}class aA extends be.Component{constructor(e){super(e),this.state={isRestoring:!1,isDiscarding:!1}}render(){const{isRestoring:e,isDiscarding:t}=this.state;return be.createElement("div",{className:"header"},be.createElement("h3",null,"暂存的更改"),be.createElement("div",{className:"row"},be.createElement(UE,{okButtonText:"恢复",okButtonDisabled:e||t,onOkButtonClick:this.onRestoreClick,cancelButtonText:"放弃",cancelButtonDisabled:e||t,onCancelButtonClick:this.onDiscardClick,okButtonAriaDescribedBy:"restore-description"}),be.createElement("div",{className:"explanatory-text",id:"restore-description"},be.createElement("span",{className:"text"},be.createElement("strong",null,"Restore")," will move your stashed files to the Changes list."))))}onDiscardClick=async()=>{const{dispatcher:e,repository:t,stashEntry:n,askForConfirmationOnDiscardStash:r}=this.props;if(r)e.showPopup({type:nl.ConfirmDiscardStash,stash:n,repository:t});else{this.setState({isDiscarding:!0});try{await e.dropStash(t,n)}finally{this.setState({isDiscarding:!1})}}};onRestoreClick=async()=>{const{dispatcher:e,repository:t,stashEntry:n}=this.props;try{this.setState({isRestoring:!0}),await e.popStash(t,n)}catch(n){const r=new at(n,{repository:t});e.postError(r)}finally{this.setState({isRestoring:!1})}}}class lA extends be.PureComponent{onSelectedFileChanged=e=>this.props.dispatcher.selectStashedFile(this.props.repository,e);onRowDoubleClick=e=>{const t=this.getFiles()[e];this.props.onOpenInExternalEditor(t.path)};onResize=e=>this.props.dispatcher.setStashedFilesWidth(e);onReset=()=>this.props.dispatcher.resetStashedFilesWidth();getFiles=()=>this.props.stashEntry.files.kind===Fc.Loaded?this.props.stashEntry.files.files:new Array;render(){const{stashEntry:e,selectedStashedFile:t,stashedFileDiff:n,repository:r,dispatcher:i,imageDiffType:o,fileListWidth:s,onOpenBinaryFile:a,onChangeImageDiffType:l,onOpenSubmodule:c}=this.props,u=this.getFiles(),h=null!==t?be.createElement(tx,{repository:r,readOnly:!0,file:t,diff:n,imageDiffType:o,hideWhitespaceInDiff:!1,showSideBySideDiff:this.props.showSideBySideDiff,onOpenBinaryFile:a,onChangeImageDiffType:l,onHideWhitespaceInDiffChanged:this.props.onHideWhitespaceInDiffChanged,onOpenSubmodule:c}):null,p=lc(s);return be.createElement("section",{id:"stash-diff-viewer"},be.createElement(aA,{stashEntry:e,repository:r,dispatcher:i,askForConfirmationOnDiscardStash:this.props.askForConfirmationOnDiscardStash}),be.createElement("div",{className:"commit-details"},be.createElement(Rd,{width:s.value,minimumWidth:s.min,maximumWidth:s.max,onResize:this.onResize,onReset:this.onReset},be.createElement(LD,{files:u,onSelectedFileChanged:this.onSelectedFileChanged,selectedFile:t,availableWidth:p,onRowDoubleClick:this.onRowDoubleClick})),h))}}class cA extends be.Component{render(){return be.createElement("li",{key:this.props.sectionId,onClick:this.onSummaryClick},be.createElement("details",{open:this.props.sectionId===this.props.currentlyOpenSectionId,onClick:this.onSummaryClick},this.renderSummary(),be.createElement("div",{className:"contents"},this.props.children)))}renderSummary=()=>{const e=void 0!==this.props.skipLinkButton&&this.props.currentlyOpenSectionId===this.props.sectionId&&this.props.isNextStepTodo(this.props.sectionId);return be.createElement("summary",null,this.renderTutorialStepIcon(),be.createElement("span",{className:"summary-text"},this.props.summaryText),be.createElement("span",{className:"hang-right"},e?this.props.skipLinkButton:be.createElement(si,{symbol:mi})))};renderTutorialStepIcon(){if(this.props.isComplete(this.props.sectionId))return be.createElement("div",{className:"green-circle"},be.createElement(si,{symbol:pi}));const e=Tu.indexOf(this.props.sectionId)+1;return this.props.isNextStepTodo(this.props.sectionId)?be.createElement("div",{className:"blue-circle"},e):be.createElement("div",{className:"empty-circle"},e)}onSummaryClick=e=>{e.preventDefault(),this.props.onSummaryClick(this.props.sectionId)}}const uA=St(__dirname,"static/required-status-check.svg");class hA extends be.Component{constructor(e){super(e),this.state={currentlyOpenSectionId:this.props.currentTutorialStep}}openTutorialFileInEditor=()=>{this.props.dispatcher.openInExternalEditor((0,e.join)(this.props.repository.path,"README.md"))};openPullRequest=()=>{this.props.dispatcher.createPullRequest(this.props.repository)};skipEditorInstall=()=>{this.props.dispatcher.skipPickEditorTutorialStep(this.props.repository)};skipCreatePR=()=>{this.props.dispatcher.markPullRequestTutorialStepAsComplete(this.props.repository)};isStepComplete=e=>Tu.indexOf(e)<Tu.indexOf(this.props.currentTutorialStep);isStepNextTodo=e=>e===this.props.currentTutorialStep;componentWillReceiveProps(e){this.props.currentTutorialStep!==e.currentTutorialStep&&this.setState({currentlyOpenSectionId:e.currentTutorialStep})}render(){return be.createElement("div",{className:"tutorial-panel-component panel"},be.createElement("div",{className:"titleArea"},be.createElement("h3",null,"Get started"),be.createElement("img",{src:uA,alt:"Partially checked check list"})),be.createElement("ol",null,be.createElement(cA,{summaryText:"Install a text editor",isComplete:this.isStepComplete,isNextStepTodo:this.isStepNextTodo,sectionId:Ru.PickEditor,currentlyOpenSectionId:this.state.currentlyOpenSectionId,skipLinkButton:be.createElement(pA,{onClick:this.skipEditorInstall}),onSummaryClick:this.onStepSummaryClick},this.isStepComplete(Ru.PickEditor)?be.createElement("p",{className:"description"},"Your default editor is"," ",be.createElement("strong",null,this.props.resolvedExternalEditor),". You can change your preferred editor in"," ",be.createElement(CE,{onClick:this.onPreferencesClick},"Settings")):be.createElement(be.Fragment,null,be.createElement("p",{className:"description"},"It doesn’t look like you have a text editor installed. We can recommend"," ",be.createElement(CE,{uri:kl,title:"打开 Visual Studio Code 网站"},El)," or ",be.createElement(CE,{uri:"https://atom.io",title:"打开 Atom 网站"},"Atom"),", but feel free to use any."),be.createElement("div",{className:"action"},be.createElement(CE,{onClick:this.skipEditorInstall},"I have an editor")))),be.createElement(cA,{summaryText:"Create a branch",isComplete:this.isStepComplete,isNextStepTodo:this.isStepNextTodo,sectionId:Ru.CreateBranch,currentlyOpenSectionId:this.state.currentlyOpenSectionId,onSummaryClick:this.onStepSummaryClick},be.createElement("p",{className:"description"},'A branch allows you to work on different versions of a repository at one time. Create a\n                branch by going into the branch menu in the top bar and\n              clicking "New Branch".'),be.createElement("div",{className:"action"},be.createElement(Co,{darwinKeys:["⌘","⇧","N"],keys:["Ctrl","Shift","N"]}))),be.createElement(cA,{summaryText:"Edit a file",isComplete:this.isStepComplete,isNextStepTodo:this.isStepNextTodo,sectionId:Ru.EditFile,currentlyOpenSectionId:this.state.currentlyOpenSectionId,onSummaryClick:this.onStepSummaryClick},be.createElement("p",{className:"description"},"Open this repository in your preferred text editor. Edit the"," ",be.createElement(QE,null,"README.md")," ","file, save it, and come back."),this.props.resolvedExternalEditor&&be.createElement("div",{className:"action"},be.createElement(ii,{onClick:this.openTutorialFileInEditor},"Open Editor"),be.createElement(Co,{darwinKeys:["⌘","⇧","A"],keys:["Ctrl","Shift","A"]}))),be.createElement(cA,{summaryText:"Make a commit",isComplete:this.isStepComplete,isNextStepTodo:this.isStepNextTodo,sectionId:Ru.MakeCommit,currentlyOpenSectionId:this.state.currentlyOpenSectionId,onSummaryClick:this.onStepSummaryClick},be.createElement("p",{className:"description"},"A commit allows you to save sets of changes. In the “summary“ field in the bottom left, write a short message that describes the changes you made. When you’re done, click the blue Commit button to finish.")),be.createElement(cA,{summaryText:"Publish to GitHub",isComplete:this.isStepComplete,isNextStepTodo:this.isStepNextTodo,sectionId:Ru.PushBranch,currentlyOpenSectionId:this.state.currentlyOpenSectionId,onSummaryClick:this.onStepSummaryClick},be.createElement("p",{className:"description"},"Publishing will “push”, or upload, your commits to this branch of your repository on GitHub. Publish using the third button in the top bar."),be.createElement("div",{className:"action"},be.createElement(Co,{darwinKeys:["⌘","P"],keys:["Ctrl","P"]}))),be.createElement(cA,{summaryText:"Open a pull request",isComplete:this.isStepComplete,isNextStepTodo:this.isStepNextTodo,sectionId:Ru.OpenPullRequest,currentlyOpenSectionId:this.state.currentlyOpenSectionId,skipLinkButton:be.createElement(pA,{onClick:this.skipCreatePR}),onSummaryClick:this.onStepSummaryClick},be.createElement("p",{className:"description"},"A pull request allows you to propose changes to the code. By opening one, you’re requesting that someone review and merge them. Since this is a demo repository, this pull request will be private."),be.createElement("div",{className:"action"},be.createElement(ii,{onClick:this.openPullRequest},"Open Pull Request",be.createElement(si,{symbol:ji})),be.createElement(Co,{darwinKeys:["⌘","R"],keys:["Ctrl","R"]})))),be.createElement("div",{className:"footer"},be.createElement(ii,{onClick:this.props.onExitTutorial},"Exit Tutorial")))}onStepSummaryClick=e=>{this.setState({currentlyOpenSectionId:e})};onPreferencesClick=()=>{this.props.dispatcher.showPopup({type:nl.Preferences,initialSelectedTab:Dr.Integrations})}}const pA=e=>be.createElement(CE,{onClick:e.onClick},"Skip"),dA=St(__dirname,"static/code.svg"),mA=St(__dirname,"static/github-for-teams.svg"),fA=St(__dirname,"static/github-for-business.svg");class gA extends be.Component{render(){return be.createElement("div",{id:"tutorial-welcome"},be.createElement("div",{className:"header"},be.createElement("h1",null,"Welcome to GitHub Desktop"),be.createElement("p",null,"Use this tutorial to get comfortable with Git, GitHub, and GitHub Desktop.")),be.createElement("ul",{className:"definitions"},be.createElement("li",null,be.createElement("img",{src:dA,alt:"Html syntax icon"}),be.createElement("p",null,be.createElement("strong",null,"Git")," is the version control system.")),be.createElement("li",null,be.createElement("img",{src:mA,alt:"People with discussion bubbles overhead"}),be.createElement("p",null,be.createElement("strong",null,"GitHub")," is where you store your code and collaborate with others.")),be.createElement("li",null,be.createElement("img",{src:fA,alt:"Server stack with cloud"}),be.createElement("p",null,be.createElement("strong",null,"GitHub Desktop")," helps you work with GitHub locally."))))}}const yA=St(__dirname,"static/admin-mentoring.svg"),bA=be.createElement(si,{symbol:{w:16,h:16,d:"M14.184 1.143a1.75 1.75 0 00-2.502-.57L.912 7.916a1.75 1.75 0 00-.53 2.32l.447.775a1.75 1.75 0 002.275.702l11.745-5.656a1.75 1.75 0 00.757-2.451l-1.422-2.464zm-1.657.669a.25.25 0 01.358.081l1.422 2.464a.25.25 0 01-.108.35l-2.016.97-1.505-2.605 1.85-1.26zM9.436 3.92l1.391 2.41-5.42 2.61-.942-1.63 4.97-3.39zM3.222 8.157l-1.466 1a.25.25 0 00-.075.33l.447.775a.25.25 0 00.325.1l1.598-.769-.83-1.436zm6.253 2.306a.75.75 0 00-.944-.252l-1.809.87a.75.75 0 00-.293.253L4.38 14.326a.75.75 0 101.238.848l1.881-2.75v2.826a.75.75 0 001.5 0v-2.826l1.881 2.75a.75.75 0 001.238-.848l-2.644-3.863z",fr:"evenodd"}}),wA=be.createElement(si,{symbol:Zi}),vA=be.createElement(si,{symbol:Ii});class CA extends be.Component{render(){return be.createElement("div",{id:"tutorial-done"},be.createElement("div",{className:"content"},be.createElement("div",{className:"header"},be.createElement("div",{className:"text"},be.createElement("h1",null,"You're done!"),be.createElement("p",null,"You’ve learned the basics on how to use GitHub Desktop. Here are some suggestions for what to do next.")),be.createElement("img",{src:yA,className:"image",alt:"Hands clapping"})),be.createElement(GR,null,be.createElement($R,{title:"在 GitHub 上浏览项目",description:"为你感兴趣的项目做出贡献",buttonText:"打开于 Browser",onClick:this.openDotcomExplore,type:"normal",image:bA}),be.createElement($R,{title:"创建一个新的存储库",description:"开始一个全新的项目",buttonText:"Create Repository",onClick:this.onCreateNewRepository,type:"normal",image:wA}),be.createElement($R,{title:"添加本地存储库",description:"在 GitHub Desktop 的一个项目上工作",buttonText:"添加存储库",onClick:this.onAddExistingRepository,type:"normal",image:vA}))))}openDotcomExplore=()=>{this.props.dispatcher.showGitHubExplore(this.props.repository)};onCreateNewRepository=()=>{this.props.dispatcher.showPopup({type:nl.CreateRepository})};onAddExistingRepository=()=>{this.props.dispatcher.showPopup({type:nl.AddRepository})}}class SA extends be.Component{render(){return be.createElement(FE,{title:"退出教程",onDismissed:this.props.onDismissed,onSubmit:this.onContinue,type:"normal"},be.createElement(_E,null,be.createElement("p",null,"Are you sure you want to leave the tutorial? This will bring you back to the home screen.")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Exit Tutorial"})))}onContinue=()=>{this.props.onContinue()&&this.props.onDismissed()}}class EA extends be.Component{previousSection=this.props.state.selectedSection;forceCompareListScrollTop=!1;changesSidebarRef=be.createRef();compareSidebarRef=be.createRef();focusHistoryNeeded=!1;focusChangesNeeded=!1;constructor(e){super(e),this.state={changesListScrollTop:0,compareListScrollTop:0}}setFocusHistoryNeeded(){this.focusHistoryNeeded=!0}setFocusChangesNeeded(){this.focusChangesNeeded=!0}scrollCompareListToTop(){this.forceCompareListScrollTop=!0,this.setState({compareListScrollTop:0})}onChangesListScrolled=e=>{this.setState({changesListScrollTop:e})};onCompareListScrolled=e=>{this.setState({compareListScrollTop:e})};renderChangesBadge(){const e=this.props.state.changesState.workingDirectory.files.length;return e<=0?null:be.createElement(SD,{filesChangedCount:e})}renderTabs(){const e=this.props.state.selectedSection===Ge.Changes?0:1;return be.createElement(KE,{selectedIndex:e,onTabClicked:this.onTabClicked},be.createElement("span",{className:"with-indicator",id:"changes-tab"},be.createElement("span",null,"更改"),this.renderChangesBadge()),be.createElement("div",{className:"with-indicator",id:"history-tab"},be.createElement("span",null,"历史")))}renderChangesSidebar(){const e=this.props.state.branchesState.tip;let t=null;e.kind===Ar.Valid?t=e.branch.name:e.kind===Ar.Unborn&&(t=e.ref);const n=this.props.state.localCommitSHAs,r=n.length>0?n[0]:null,i=(r?this.props.state.commitLookup.get(r):null)||null,o=lc(this.props.sidebarWidth)-1,s=this.previousSection===Ge.History?this.state.changesListScrollTop:void 0;return this.previousSection=Ge.Changes,be.createElement(Kk,{ref:this.changesSidebarRef,repository:this.props.repository,dispatcher:this.props.dispatcher,changes:this.props.state.changesState,aheadBehind:this.props.state.aheadBehind,branch:t,commitAuthor:this.props.state.commitAuthor,emoji:this.props.emoji,mostRecentLocalCommit:i,issuesStore:this.props.issuesStore,availableWidth:o,gitHubUserStore:this.props.gitHubUserStore,isCommitting:this.props.state.isCommitting,commitToAmend:this.props.state.commitToAmend,isPushPullFetchInProgress:this.props.state.isPushPullFetchInProgress,focusCommitMessage:this.props.focusCommitMessage,askForConfirmationOnDiscardChanges:this.props.askForConfirmationOnDiscardChanges,accounts:this.props.accounts,isShowingModal:this.props.isShowingModal,isShowingFoldout:this.props.isShowingFoldout,externalEditorLabel:this.props.externalEditorLabel,onOpenInExternalEditor:this.props.onOpenInExternalEditor,onChangesListScrolled:this.onChangesListScrolled,changesListScrollTop:s,shouldNudgeToCommit:this.props.currentTutorialStep===Ru.MakeCommit,commitSpellcheckEnabled:this.props.commitSpellcheckEnabled,showCommitLengthWarning:this.props.showCommitLengthWarning})}renderCompareSidebar(){const{repository:e,dispatcher:t,state:n,aheadBehindStore:r,emoji:i}=this.props,{remote:o,compareState:s,branchesState:a,commitSelection:{shas:l},commitLookup:c,localCommitSHAs:u,localTags:h,tagsToPush:p,multiCommitOperationState:d}=n,{tip:m}=a,f=m.kind===Ar.Valid?m.branch:null,g=this.forceCompareListScrollTop||this.previousSection===Ge.Changes?this.state.compareListScrollTop:void 0;return this.previousSection=Ge.History,this.forceCompareListScrollTop=!1,be.createElement(oA,{ref:this.compareSidebarRef,repository:e,isLocalRepository:null===o,compareState:s,selectedCommitShas:l,shasToHighlight:s.shasToHighlight,currentBranch:f,emoji:i,commitLookup:c,localCommitSHAs:u,localTags:h,dispatcher:t,onRevertCommit:this.onRevertCommit,onAmendCommit:this.onAmendCommit,onViewCommitOnGitHub:this.props.onViewCommitOnGitHub,onCompareListScrolled:this.onCompareListScrolled,onCherryPick:this.props.onCherryPick,compareListScrollTop:g,tagsToPush:p,aheadBehindStore:r,isMultiCommitOperationInProgress:null!==d,askForConfirmationOnCheckoutCommit:this.props.askForConfirmationOnCheckoutCommit})}renderSidebarContents(){const e=this.props.state.selectedSection;return e===Ge.Changes?this.renderChangesSidebar():e===Ge.History?this.renderCompareSidebar():et(0,"Unknown repository section")}handleSidebarWidthReset=()=>{this.props.dispatcher.resetSidebarWidth()};handleSidebarResize=e=>{this.props.dispatcher.setSidebarWidth(e)};renderSidebar(){return be.createElement(Vs,{onFocusWithinChanged:this.onSidebarFocusWithinChanged},be.createElement(Rd,{id:"repository-sidebar",width:this.props.sidebarWidth.value,maximumWidth:this.props.sidebarWidth.max,minimumWidth:this.props.sidebarWidth.min,onReset:this.handleSidebarWidthReset,onResize:this.handleSidebarResize},this.renderTabs(),this.renderSidebarContents()))}onSidebarFocusWithinChanged=e=>{!1===e&&this.props.state.selectedSection===Ge.History&&this.props.dispatcher.updateCompareForm(this.props.repository,{showBranchList:!1})};renderStashedChangesContent(){const{changesState:e}=this.props.state,{selection:t,stashEntry:n}=e;return t.kind!==Ve.Stash||null===n?null:n.files.kind===Fc.Loaded?be.createElement(lA,{stashEntry:n,selectedStashedFile:t.selectedStashedFile,stashedFileDiff:t.selectedStashedFileDiff,imageDiffType:this.props.imageDiffType,fileListWidth:this.props.stashedFilesWidth,repository:this.props.repository,dispatcher:this.props.dispatcher,askForConfirmationOnDiscardStash:this.props.askForConfirmationOnDiscardStash,showSideBySideDiff:this.props.showSideBySideDiff,onOpenBinaryFile:this.onOpenBinaryFile,onOpenSubmodule:this.onOpenSubmodule,onChangeImageDiffType:this.onChangeImageDiffType,onHideWhitespaceInDiffChanged:this.onHideWhitespaceInDiffChanged,onOpenInExternalEditor:this.props.onOpenInExternalEditor}):null}onHideWhitespaceInDiffChanged=e=>this.props.dispatcher.onHideWhitespaceInChangesDiffChanged(e,this.props.repository);renderContentForHistory(){const{commitSelection:e,commitLookup:t,localCommitSHAs:n}=this.props.state,{changesetData:r,file:i,diff:o,shas:s,shasInDiff:a,isContiguous:l}=e,c=[];for(const e of s){const n=t.get(e);void 0!==n&&c.push(n)}const u=Zs.isDragOfTypeInProgress(Js.Commit);return be.createElement($D,{repository:this.props.repository,isLocalRepository:null===this.props.state.remote,dispatcher:this.props.dispatcher,selectedCommits:c,shasInDiff:a,isContiguous:l,localCommitSHAs:n,changesetData:r,selectedFile:i,currentDiff:o,emoji:this.props.emoji,commitSummaryWidth:this.props.commitSummaryWidth,selectedDiffType:this.props.imageDiffType,externalEditorLabel:this.props.externalEditorLabel,onOpenInExternalEditor:this.props.onOpenInExternalEditor,onViewCommitOnGitHub:this.props.onViewCommitOnGitHub,hideWhitespaceInDiff:this.props.hideWhitespaceInHistoryDiff,showSideBySideDiff:this.props.showSideBySideDiff,onOpenBinaryFile:this.onOpenBinaryFile,onOpenSubmodule:this.onOpenSubmodule,onChangeImageDiffType:this.onChangeImageDiffType,onDiffOptionsOpened:this.onDiffOptionsOpened,showDragOverlay:u})}onDiffOptionsOpened=()=>{this.props.dispatcher.incrementMetric("diffOptionsViewedCount")};renderTutorialPane(){return this.props.currentTutorialStep===Ru.AllDone?be.createElement(CA,{dispatcher:this.props.dispatcher,repository:this.props.repository}):be.createElement(gA,null)}renderContentForChanges(){const{changesState:e}=this.props.state,{workingDirectory:t,selection:n}=e;if(n.kind===Ve.Stash)return this.renderStashedChangesContent();const{selectedFileIDs:r,diff:i}=n;if(r.length>1)return be.createElement(CD,{count:r.length});if(0===t.files.length)return this.props.currentTutorialStep!==Ru.NotApplicable?this.renderTutorialPane():be.createElement(wD,{key:this.props.repository.id,appMenu:this.props.appMenu,repository:this.props.repository,repositoryState:this.props.state,isExternalEditorAvailable:void 0!==this.props.externalEditorLabel,dispatcher:this.props.dispatcher,pullRequestSuggestedNextAction:this.props.pullRequestSuggestedNextAction});{if(0===r.length)return null;const e=t.findFileWithID(r[0]);return null===e?null:be.createElement(nx,{repository:this.props.repository,dispatcher:this.props.dispatcher,file:e,diff:i,isCommitting:this.props.state.isCommitting,imageDiffType:this.props.imageDiffType,hideWhitespaceInDiff:this.props.hideWhitespaceInChangesDiff,showSideBySideDiff:this.props.showSideBySideDiff,onOpenBinaryFile:this.onOpenBinaryFile,onOpenSubmodule:this.onOpenSubmodule,onChangeImageDiffType:this.onChangeImageDiffType,askForConfirmationOnDiscardChanges:this.props.askForConfirmationOnDiscardChanges,onDiffOptionsOpened:this.onDiffOptionsOpened,onOpenInExternalEditor:this.props.onOpenInExternalEditor})}}onOpenBinaryFile=e=>{Vk(e,this.props.dispatcher)};onOpenSubmodule=e=>{this.props.dispatcher.incrementMetric("openSubmoduleFromDiffCount"),this.props.dispatcher.openOrAddRepository(e)};onChangeImageDiffType=e=>{this.props.dispatcher.changeImageDiffType(e)};renderContent(){const e=this.props.state.selectedSection;return e===Ge.Changes?this.renderContentForChanges():e===Ge.History?this.renderContentForHistory():et(0,"Unknown repository section")}render(){return be.createElement(qC,{id:"repository"},this.renderSidebar(),this.renderContent(),this.maybeRenderTutorialPanel())}onRevertCommit=e=>{this.props.dispatcher.revertCommit(this.props.repository,e)};onAmendCommit=(e,t)=>{this.props.dispatcher.startAmendingRepository(this.props.repository,e,t)};componentDidMount(){window.addEventListener("keydown",this.onGlobalKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.onGlobalKeyDown)}componentDidUpdate(){this.focusChangesNeeded&&(this.focusChangesNeeded=!1,this.changesSidebarRef.current?.focus()),this.focusHistoryNeeded&&(this.focusHistoryNeeded=!1,this.compareSidebarRef.current?.focusHistory())}onGlobalKeyDown=e=>{e.defaultPrevented||this.props.isShowingModal||this.props.isShowingFoldout||e.ctrlKey&&"Tab"===e.key&&(this.changeTab(),e.preventDefault())};changeTab(){const e=this.props.state.selectedSection===Ge.History?Ge.Changes:Ge.History;this.props.dispatcher.changeRepositorySection(this.props.repository,e)}onTabClicked=e=>{const t=1===e?Ge.History:Ge.Changes;this.props.dispatcher.changeRepositorySection(this.props.repository,t),t&&this.props.dispatcher.updateCompareForm(this.props.repository,{showBranchList:!1})};maybeRenderTutorialPanel(){return xu(this.props.currentTutorialStep)?be.createElement(hA,{dispatcher:this.props.dispatcher,repository:this.props.repository,resolvedExternalEditor:this.props.resolvedExternalEditor,currentTutorialStep:this.props.currentTutorialStep,onExitTutorial:this.props.onExitTutorial}):null}}const kA=/[\x00-\x20\x7F~^:?*\[\\|""<>]+|@{|\.\.+|^\.|\.$|\.lock$|\/$/g;function RA(e){return e.replace(kA,"-").replace(/^[-\+]*/g,"")}class xA extends be.Component{textBoxRef=be.createRef();constructor(e){super(e);const t=e.initialValue||"";this.state={proposedValue:t,sanitizedValue:RA(t)}}componentDidMount(){this.state.sanitizedValue!==this.props.initialValue&&void 0!==this.props.onValueChange&&this.props.onValueChange(this.state.sanitizedValue)}render(){return be.createElement("div",{className:"ref-name-text-box"},be.createElement(dC,{label:this.props.label,value:this.state.proposedValue,ref:this.textBoxRef,ariaDescribedBy:this.props.ariaDescribedBy,onValueChanged:this.onValueChange,onBlur:this.onBlur}),this.renderRefValueWarning())}focus(){null!==this.textBoxRef.current&&this.textBoxRef.current.focus()}onValueChange=e=>{const t=RA(e),n=this.state.sanitizedValue;this.setState({proposedValue:e,sanitizedValue:t}),t!==n&&void 0!==this.props.onValueChange&&this.props.onValueChange(t)};onBlur=e=>{void 0!==this.props.onBlur&&this.props.onBlur(RA(e))};renderRefValueWarning(){const{proposedValue:e,sanitizedValue:t}=this.state;if(e===t)return null;const n=this.props.renderWarningMessage??this.defaultRenderWarningMessage;return be.createElement("div",{className:"warning-helper-text"},be.createElement(si,{symbol:ai}),be.createElement("p",null,n(t,e)))}defaultRenderWarningMessage(e,t){return 0===e.length?be.createElement(be.Fragment,null,be.createElement(QE,null,t)," is not a valid name."):be.createElement(be.Fragment,null,"Will be created as ",be.createElement(QE,null,e),".")}}class TA extends be.Component{constructor(e){super(e),this.state={newName:e.branch.name}}render(){return be.createElement(FE,{id:"rename-branch",title:"重命名分支",onDismissed:this.props.onDismissed,onSubmit:this.renameBranch,focusCloseButtonOnOpen:!0},be.createElement(_E,null,null!=(e=this.props.branch).upstream?be.createElement(mC,{className:"warning-helper-text"},be.createElement(si,{symbol:ai}),be.createElement("p",null,"This branch is tracking ",be.createElement(QE,null,e.upstream)," and renaming this branch will not change the branch name on the remote.")):null,(this.props.stash,null),be.createElement(xA,{label: "名称",initialValue:this.props.branch.name,onValueChange:this.onNameChange})),be.createElement(HE,null,be.createElement(UE,{okButtonText:`Rename ${this.props.branch.name}`,okButtonDisabled:0===this.state.newName.length})));var e}onNameChange=e=>{this.setState({newName:e})};renameBranch=()=>{this.props.dispatcher.renameBranch(this.props.repository,this.props.branch,this.state.newName),this.props.onDismissed()}}class DA extends be.Component{constructor(e){super(e),this.state={includeRemoteBranch:!1,isDeleting:!1}}render(){return be.createElement(FE,{id:"delete-branch",title:"删除分支",type:"warning",onSubmit:this.deleteBranch,onDismissed:this.props.onDismissed,disabled:this.state.isDeleting,loading:this.state.isDeleting,role:"alertdialog",ariaDescribedBy:"delete-branch-confirmation-message delete-branch-confirmation-message-remote"},be.createElement(_E,null,be.createElement("p",{id:"delete-branch-confirmation-message"},"删除分支 ",be.createElement(QE,null,this.props.branch.name),"?",be.createElement("br",null),"此操作不可撤销"),this.renderDeleteOnRemote()),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText: "删除"})))}renderDeleteOnRemote(){return this.props.branch.upstreamRemoteName&&this.props.existsOnRemote?be.createElement("div",null,be.createElement("p",{id:"delete-branch-confirmation-message-remote"},be.createElement("strong",null,"The branch also exists on the remote, do you wish to delete it there as well?")),be.createElement(GC,{label:"是的，在远程删除此分支",value:this.state.includeRemoteBranch?jC.On:jC.Off,onChange:this.onIncludeRemoteChanged})):null}onIncludeRemoteChanged=e=>{const t=e.currentTarget.checked;this.setState({includeRemoteBranch:t})};deleteBranch=async()=>{const{dispatcher:e,repository:t,branch:n}=this.props;this.setState({isDeleting:!0}),await e.deleteLocalBranch(t,n,this.state.includeRemoteBranch),this.props.onDeleted(t),this.props.onDismissed()}}class AA extends be.Component{constructor(e){super(e),this.state={isDeleting:!1}}render(){return be.createElement(FE,{id:"delete-branch",title:"删除远程分支",type:"warning",onSubmit:this.deleteBranch,onDismissed:this.props.onDismissed,disabled:this.state.isDeleting,loading:this.state.isDeleting,role:"alertdialog",ariaDescribedBy:"delete-branch-confirmation-message"},be.createElement(_E,null,be.createElement("div",{id:"delete-branch-confirmation-message"},be.createElement("p",null,"Delete remote branch ",be.createElement(QE,null,this.props.branch.name),"?",be.createElement("br",null),"此操作不可撤销"),be.createElement("p",null,"This branch does not exist locally. Deleting it may impact others collaborating on this branch."))),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText: "删除"})))}deleteBranch=async()=>{const{dispatcher:e,repository:t,branch:n}=this.props;this.setState({isDeleting:!0}),await e.deleteRemoteBranch(t,n),this.props.onDeleted(t),this.props.onDismissed()}}class PA extends be.Component{render(){const e=this.props.progress.value||void 0;return be.createElement(qC,{id:"cloning-repository-view"},be.createElement("div",{className:"title-container"},be.createElement(si,{symbol:bi}),be.createElement("div",{className:"title"},"Cloning ",this.props.repository.name)),be.createElement("progress",{value:e}),be.createElement(Xo,{tagName:"div",className:"details",tooltip:this.props.progress.description},this.props.progress.description))}}class IA extends be.Component{constructor(e){super(e),this.state={isDiscardingChanges:!1,confirmDiscardChanges:this.props.confirmDiscardChanges}}getOkButtonLabel(){return this.props.discardingAllChanges?"Discard All Changes":"Discard Changes"}getDialogTitle(){return this.props.discardingAllChanges?"Confirm Discard All Changes":"Confirm Discard Changes"}render(){const e=this.state.isDiscardingChanges;return be.createElement(FE,{id:"discard-changes",title:this.getDialogTitle(),onDismissed:this.props.onDismissed,onSubmit:this.discard,dismissable:!e,loading:e,disabled:e,type:"warning"},be.createElement(_E,null,this.renderFileList(),be.createElement("p",null,"变更可以恢复，通过检索",xh,"."),this.renderConfirmDiscardChanges()),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:this.getOkButtonLabel()})))}renderConfirmDiscardChanges(){return this.props.showDiscardChangesSetting?be.createElement(GC,{label:"不再显示此消息",value:this.state.confirmDiscardChanges?jC.Off:jC.On,onChange:this.onConfirmDiscardChangesChanged}):null}renderFileList(){return this.props.files.length>10?be.createElement("p",null,"Are you sure you want to discard all ",this.props.files.length," changed files?"):be.createElement("div",null,be.createElement("p",null,"确定要放弃所有更改吗？"),be.createElement("div",{className:"file-list"},be.createElement("ul",null,this.props.files.map((e=>be.createElement("li",{key:e.id},be.createElement(Pk,{path:e.path})))))))}discard=async()=>{this.setState({isDiscardingChanges:!0}),await this.props.dispatcher.discardChanges(this.props.repository,this.props.files),this.props.onConfirmDiscardChangesChanged(this.state.confirmDiscardChanges),this.props.onDismissed()};onConfirmDiscardChangesChanged=e=>{const t=!e.currentTarget.checked;this.setState({confirmDiscardChanges:t})}}class _A extends be.Component{render(){const e=Vr()("form-component",this.props.className);return be.createElement("form",{className:e,onSubmit:this.onSubmit},this.props.children)}onSubmit=e=>{e.preventDefault(),this.props.onSubmit&&this.props.onSubmit()}}class NA extends be.Component{render(){const e=Vr()("errors-component",this.props.className);return be.createElement("div",{className:e,role:"alert"},this.props.children)}}const OA=e=>we().createElement("div",{className:"horizontal-rule"},we().createElement("span",{className:"horizontal-rule-content"},e.title));class MA extends be.Component{textBoxRef=be.createRef();constructor(e){super(e),this.state={showPassword:!1}}onTogglePasswordVisibility=()=>{this.setState({showPassword:!this.state.showPassword}),this.textBoxRef.current.focus()};render(){const e=this.state.showPassword?xi:Ti,t=this.state.showPassword?"text":"password",n={...this.props,type:t};return be.createElement("div",{className:"password-text-box"},be.createElement(dC,{...n,ref:this.textBoxRef}),be.createElement(ii,{ariaLabel:"Toggle password visibility",tooltip:"Toggle password visibility",onClick:this.onTogglePasswordVisibility,ariaPressed:this.state.showPassword},be.createElement(si,{symbol:e})))}}const BA="登录后，浏览器将会重定向到GitHub Desktop。如果您的浏览器请求您允许启动GitHub Desktop，请点击允许。";class FA extends be.Component{constructor(e){super(e),this.state={username:"",password:""}}render(){const e=this.props.supportsBasicAuth?this.renderSignInForm():this.renderEndpointRequiresWebFlow();return be.createElement(_A,{className:"sign-in-form",onSubmit:this.signIn},e)}renderUsernamePassword(){const e=this.props.loading;return be.createElement(be.Fragment,null,be.createElement(dC,{label:"用户名或邮箱地址",disabled:e,required:!0,displayInvalidState:!1,autoFocus:this.props.endpoint===Qn(),onValueChanged:this.onUsernameChange}),be.createElement(MA,{label:"密码",disabled:e,required:!0,displayInvalidState:!1,onValueChanged:this.onPasswordChange}),this.renderError(),be.createElement("div",{className:"sign-in-footer"},this.renderActions()))}renderActions(){const e=Boolean(!this.state.username.length||!this.state.password.length||this.props.loading);return be.createElement("div",{className:"actions"},this.props.supportsBasicAuth?be.createElement(ii,{type:"submit",disabled:e},this.props.loading?be.createElement(hE,null):null," Sign in"):null,this.props.additionalButtons,this.props.supportsBasicAuth?be.createElement(CE,{className:"forgot-password-link",uri:this.props.forgotPasswordUrl},"Forgot password?"):null)}renderSignInForm(){return this.props.endpoint===Qn()?this.renderUsernamePassword():be.createElement(be.Fragment,null,this.renderSignInWithBrowserButton(),be.createElement(OA,{title:"or"}),this.renderUsernamePassword())}renderEndpointRequiresWebFlow(){return be.createElement(be.Fragment,null,this.props.endpoint===Qn()?be.createElement(be.Fragment,null,be.createElement("p",null,"GitHub now requires you to sign in with your browser."),be.createElement("p",null,BA)):be.createElement("p",null,"您必须使用浏览器登录GitHub Enterprise"),this.renderSignInWithBrowserButton(),this.props.additionalButtons)}renderSignInWithBrowserButton(){return be.createElement(ii,{type:"submit",className:"button-with-icon",onClick:this.signInWithBrowser,autoFocus:!0},"Sign in using your browser",be.createElement(si,{symbol:ji}))}renderError(){const e=this.props.error;return e?be.createElement(NA,null,e.message):null}onUsernameChange=e=>{this.setState({username:e})};onPasswordChange=e=>{this.setState({password:e})};signInWithBrowser=e=>{e&&e.preventDefault(),this.props.onBrowserSignInRequested()};signIn=()=>{this.props.onSubmit(this.state.username,this.state.password)}}class LA extends be.Component{render(){return be.createElement("section",{id:"start","aria-label":"Welcome to GitHub Desktop","aria-describedby":"start-description"},be.createElement("h1",{className:"welcome-title"},"欢迎使用Github Desktop"),this.props.loadingBrowserAuth?be.createElement("p",null,BA):be.createElement(be.Fragment,null,be.createElement("p",{id:"start-description",className:"welcome-text"},"")),be.createElement("div",{className:"welcome-main-buttons"},be.createElement(ii,{type:"submit",className:"button-with-icon",disabled:this.props.loadingBrowserAuth,onClick:this.signInWithBrowser,autoFocus:!0},this.props.loadingBrowserAuth&&be.createElement(hE,null),"GitHub登录",be.createElement(si,{symbol:ji})),this.props.loadingBrowserAuth?be.createElement(ii,{onClick:this.cancelBrowserAuth},"Cancel"):be.createElement(ii,{onClick:this.signInToEnterprise},"Github企业版登录")),be.createElement("div",{className:"skip-action-container"},be.createElement("p",{className:"welcome-text"},"第一次使用Github？"," ",be.createElement(CE,{uri:"https://github.com/join?source=github-desktop",className:"create-account-link"},"创建账户")),be.createElement(CE,{className:"skip-button",onClick:this.skip},"跳过")),be.createElement("div",{className:"welcome-start-disclaimer-container"},"创建账户，代表您同意"," ",be.createElement(CE,{uri:"https://github.com/site/terms"},"服务条款"),". 更多信息，请参阅"," ",be.createElement(CE,{uri:"https://github.com/site/privacy"},"GitHub 隐私声明"),".",be.createElement("br",null),be.createElement("br",null),"GitHub Desktop sends usage metrics to improve the product and inform feature decisions."," ",be.createElement(CE,{uri:Lv},"Learn more about user metrics.")))}signInWithBrowser=e=>{e&&e.preventDefault(),this.props.advance(GA.SignInToDotComWithBrowser),this.props.dispatcher.requestBrowserAuthenticationToDotcom()};cancelBrowserAuth=()=>{this.props.advance(GA.Start)};signInToEnterprise=()=>{this.props.advance(GA.SignInToEnterprise)};skip=()=>{this.props.advance(GA.ConfigureGit)}}class HA extends be.Component{constructor(e){super(e),this.state={otp:""}}render(){const e=this.props.loading,t=!/\S+/.test(this.state.otp)||this.props.loading,n=this.props.error?be.createElement(NA,null,this.props.error.message):null;return be.createElement("div",null,be.createElement("p",{className:"welcome-text"},ln(this.props.type)),be.createElement(_A,{onSubmit:this.signIn},be.createElement(dC,{label:"身份验证码",disabled:e,autoFocus:!0,onValueChanged:this.onOTPChange}),n,be.createElement("div",{className:"actions"},be.createElement(ii,{type:"submit",disabled:t},this.props.loading?be.createElement(hE,null):null," Verify"),this.props.additionalButtons)))}onOTPChange=e=>{this.setState({otp:e})};signIn=()=>{this.props.onOTPEntered(this.state.otp)}}class UA extends be.Component{constructor(e){super(e),this.state={serverAddress:""}}render(){const e=this.props.loading,t=0===this.state.serverAddress.length||this.props.loading;return be.createElement(_A,{onSubmit:this.onSubmit},be.createElement(dC,{label:"企业或 AE 地址",autoFocus:!0,disabled:e,onValueChanged:this.onServerAddressChanged,placeholder:"https://github.example.com"}),this.props.error?be.createElement(NA,null,this.props.error.message):null,be.createElement("div",{className:"actions"},be.createElement(ii,{type:"submit",disabled:t},this.props.loading?be.createElement(hE,null):null," Continue"),this.props.additionalButtons))}onServerAddressChanged=e=>{this.setState({serverAddress:e})};onSubmit=()=>{this.props.onSubmit(this.state.serverAddress)}}class WA extends be.Component{onEndpointEntered=e=>{this.props.dispatcher.setSignInEndpoint(e)};onCredentialsEntered=(e,t)=>{this.props.dispatcher.setSignInCredentials(e,t)};onBrowserSignInRequested=()=>{this.props.dispatcher.requestBrowserAuthentication()};onOTPEntered=e=>{this.props.dispatcher.setSignInOTP(e)};renderEndpointEntryStep(e){const t=this.props.children;return be.createElement(UA,{loading:e.loading,error:e.error,onSubmit:this.onEndpointEntered,additionalButtons:t})}renderAuthenticationStep(e){const t=this.props.children;return be.createElement(FA,{loading:e.loading,error:e.error,supportsBasicAuth:e.supportsBasicAuth,additionalButtons:t,onBrowserSignInRequested:this.onBrowserSignInRequested,onSubmit:this.onCredentialsEntered,forgotPasswordUrl:e.forgotPasswordUrl,endpoint:e.endpoint})}renderTwoFactorAuthenticationStep(e){return be.createElement(HA,{loading:e.loading,error:e.error,type:e.type,additionalButtons:this.props.children,onOTPEntered:this.onOTPEntered})}render(){const e=this.props.signInState,t=this.props.signInState.kind;switch(e.kind){case bw.EndpointEntry:return this.renderEndpointEntryStep(e);case bw.Authentication:return this.renderAuthenticationStep(e);case bw.TwoFactorAuthentication:return this.renderTwoFactorAuthenticationStep(e);case bw.Success:return null;default:return et(0,`Unknown sign-in step: ${t}`)}}}class $A extends be.Component{render(){const e=this.props.signInState;return e?be.createElement("section",{id:"sign-in-enterprise","aria-label":"Sign in to your GitHub Enterprise"},be.createElement("h1",{className:"welcome-title"},"Sign in to your GitHub Enterprise"),be.createElement(WA,{signInState:e,dispatcher:this.props.dispatcher},be.createElement(ii,{onClick:this.cancel},"Cancel"))):null}cancel=()=>{this.props.advance(GA.Start)}}class zA extends be.Component{onDeleteLockFile=async()=>{try{await(0,y.unlink)(this.props.lockFilePath)}catch(e){if("ENOENT"!==e.code)return void this.props.onError(e)}this.props.onLockFileDeleted()};render(){return be.createElement("div",{className:"config-lock-file-exists-component"},be.createElement("p",null,"Failed to update Git configuration file. A lock file already exists at"," ",be.createElement(QE,null,this.props.lockFilePath),"."),be.createElement("p",null,"This can happen if another tool is currently modifying the Git configuration or if a Git process has terminated earlier without cleaning up the lock file. Do you want to"," ",be.createElement(CE,{onClick:this.onDeleteLockFile},"delete the lock file")," ","and try again?"))}}class qA extends be.Component{globalUsernamePromise=ol("user.name");globalEmailPromise=ol("user.email");loadInitialDataPromise=null;constructor(e){super(e);const t=this.account;this.state={globalUserName:null,globalUserEmail:null,manualName:"",manualEmail:"",useGitHubAuthorInfo:null!==this.account,gitHubName:t?.name||t?.login||"",gitHubEmail:null!==this.account?yh(this.account):"",loadingGitConfig:!0}}async componentDidMount(){this.loadInitialDataPromise=this.loadInitialData()}async loadInitialData(){const e=this.props.accounts,[t,n]=await Promise.all([this.globalUsernamePromise,this.globalEmailPromise]);this.setState((e=>({globalUserName:t,globalUserEmail:n,manualName:0===e.manualName.length?t||"":e.manualName,manualEmail:0===e.manualEmail.length?n||"":e.manualEmail,loadingGitConfig:!1})),(()=>{e===this.props.accounts&&e.length>0&&this.setDefaultValuesFromAccount(e[0])}))}async componentDidUpdate(e){if(null!==this.loadInitialDataPromise&&this.props.accounts!==e.accounts&&this.props.accounts.length>0&&this.props.accounts[0]!==e.accounts[0]){await this.loadInitialDataPromise;const e=this.props.accounts[0];this.setDefaultValuesFromAccount(e)}}setDefaultValuesFromAccount(e){const t=yh(e);this.setState({useGitHubAuthorInfo:!0,gitHubName:e.name||e.login,gitHubEmail:t}),0===this.state.manualName.length&&this.setState({manualName:e.name||e.login}),0===this.state.manualEmail.length&&this.setState({manualEmail:t})}get account(){return 0===this.props.accounts.length?null:this.props.accounts[0]}dateWithMinuteOffset(e,t){const n=new Date(e.getTime());return n.setTime(n.getTime()+60*t*1e3),n}render(){const e=void 0!==this.state.existingLockFilePath?be.createElement(zA,{lockFilePath:this.state.existingLockFilePath,onLockFileDeleted:this.onLockFileDeleted,onError:this.onLockFileDeleteError}):null;return be.createElement("div",{id:"configure-git-user"},this.renderAuthorOptions(),e,this.state.useGitHubAuthorInfo?this.renderGitHubInfo():this.renderGitConfigForm(),this.renderExampleCommit())}renderExampleCommit(){const e=new Date;let t=this.state.manualName,n=this.state.manualEmail;this.state.useGitHubAuthorInfo&&(t=this.state.gitHubName,n=this.state.gitHubEmail);const r=new Lc(t,n,this.dateWithMinuteOffset(e,-30)),i=new vl(t,t.slice(0,7),"Fix all the things","",r,r,[],[],[]),o=new Map;return be.createElement("div",{id:"commit-list",className:"commit-list-example"},be.createElement("div",{className:"header"},"Example commit"),be.createElement(AD,{commit:i,emoji:o,gitHubRepository:null,showUnpushedIndicator:!1,selectedCommits:[i]}))}renderAuthorOptions(){const e=this.account;if(null===e)return;const t=e.endpoint===Qn()?"":" Enterprise";return be.createElement("div",null,be.createElement(nk,{label:`Use my GitHub${t} account name and email address`,checked:this.state.useGitHubAuthorInfo,onSelected:this.onUseGitHubInfoSelected,value:"github-account",autoFocus:!0}),be.createElement(nk,{label:"手动配置",checked:!this.state.useGitHubAuthorInfo,onSelected:this.onUseGitConfigInfoSelected,value:"git-config"}))}renderGitHubInfo(){if(null!==this.account)return be.createElement(_A,{className:"sign-in-form",onSubmit:this.save},be.createElement(dC,{label: "名称",placeholder:"您的姓名",value:this.state.gitHubName,readOnly:!0}),be.createElement(RE,{label:"邮箱",value:this.state.gitHubEmail,onChange:this.onSelectedGitHubEmailChange},this.account.emails.map((e=>be.createElement("option",{key:e.email,value:e.email},e.email)))),be.createElement(mC,null,be.createElement(ii,{type:"submit"},this.props.saveLabel||"Save"),this.props.children))}renderGitConfigForm(){return be.createElement(_A,{className:"sign-in-form",onSubmit:this.save},this.state.loadingGitConfig&&be.createElement("div",{className:"git-config-loading"},be.createElement(hE,null)," Checking for an existing git config…"),!this.state.loadingGitConfig&&be.createElement(be.Fragment,null,be.createElement(dC,{label: "名称",placeholder:"您的姓名",onValueChanged:this.onNameChange,value:this.state.manualName,autoFocus:!0}),be.createElement(dC,{type:"email",label:"邮箱",placeholder:"您的邮箱",value:this.state.manualEmail,onValueChanged:this.onEmailChange})),null!==this.account&&be.createElement(ik,{accounts:[this.account],email:this.state.manualEmail}),be.createElement(mC,null,be.createElement(ii,{type:"submit"},this.props.saveLabel||"Save"),this.props.children))}onSelectedGitHubEmailChange=e=>{const t=e.currentTarget.value;t&&this.setState({gitHubEmail:t})};onLockFileDeleted=()=>{this.setState({existingLockFilePath:void 0})};onLockFileDeleteError=e=>{log.error("Failed to unlink config lock file",e),this.setState({existingLockFilePath:void 0})};onUseGitHubInfoSelected=()=>{this.setState({useGitHubAuthorInfo:!0})};onUseGitConfigInfoSelected=()=>{this.setState({useGitHubAuthorInfo:!1})};onNameChange=e=>{this.setState({manualName:e})};onEmailChange=e=>{this.setState({manualEmail:e})};save=async()=>{const{manualName:e,manualEmail:t,globalUserName:n,globalUserEmail:r,useGitHubAuthorInfo:i,gitHubName:o,gitHubEmail:s}=this.state,a=i?o:e,l=i?s:t;try{a.length>0&&a!==n&&await cl("user.name",a),l.length>0&&l!==r&&await cl("user.email",l)}catch(e){if(Gw(e)){const t=Kw(e.result);if(null!==t)return void this.setState({existingLockFilePath:t})}}this.props.onSave&&this.props.onSave()}}class jA extends be.Component{render(){return be.createElement("section",{id:"configure-git","aria-label":"Configure Git"},be.createElement("h1",{className:"welcome-title"},"Configure Git"),be.createElement("p",{className:"welcome-text"},"This is used to identify the commits you create. Anyone will be able to see this information if you publish commits."),be.createElement(qA,{accounts:this.props.accounts,onSave:this.props.done,saveLabel:"Finish"},be.createElement(ii,{onClick:this.cancel},"Cancel")))}cancel=()=>{this.props.advance(GA.Start)}}var GA;!function(e){e.Start="Start",e.SignInToDotComWithBrowser="SignInToDotComWithBrowser",e.SignInToEnterprise="SignInToEnterprise",e.ConfigureGit="ConfigureGit"}(GA||(GA={}));const VA=St(__dirname,"static/welcome-illustration-right.svg"),KA=St(__dirname,"static/welcome-illustration-left-top.svg"),YA=St(__dirname,"static/welcome-illustration-left-bottom.svg");class XA extends be.Component{constructor(e){super(e),this.state={currentStep:GA.Start,exiting:!1}}componentWillReceiveProps(e){this.advanceOnSuccessfulSignIn(e)}componentDidMount(){this.props.dispatcher.recordWelcomeWizardInitiated()}get inSignInStep(){return this.state.currentStep===GA.SignInToDotComWithBrowser||this.state.currentStep===GA.SignInToEnterprise}advanceOnSuccessfulSignIn(e){this.inSignInStep?this.props.signInState?e.signInState?this.props.signInState.kind!==e.signInState.kind?e.signInState.kind===bw.Success&&(this.advanceToStep(GA.ConfigureGit),this.props.dispatcher.resetSignInState()):log.info(`[Welcome] kind ${this.props.signInState.kind} is the same as ${e.signInState.kind}. ignoring...`):log.info("[Welcome] next sign in state not found. ignoring..."):log.info("[Welcome] current sign in state not found. ignoring..."):log.info("[Welcome] no sign in step found. ignoring...")}getComponentForCurrentStep(){const e=this.state.currentStep,t=this.props.signInState;switch(e){case GA.Start:case GA.SignInToDotComWithBrowser:const n=e===GA.SignInToDotComWithBrowser&&null!==t&&t.kind===bw.Authentication&&t.loading;return be.createElement(LA,{advance:this.advanceToStep,dispatcher:this.props.dispatcher,loadingBrowserAuth:n});case GA.SignInToEnterprise:return be.createElement($A,{dispatcher:this.props.dispatcher,advance:this.advanceToStep,signInState:t});case GA.ConfigureGit:return be.createElement(jA,{advance:this.advanceToStep,accounts:this.props.accounts,done:this.done});default:return et(0,`Unknown welcome step: ${e}`)}}advanceToStep=e=>{log.info(`[Welcome] advancing to step: ${e}`),e===GA.SignInToEnterprise&&this.props.dispatcher.beginEnterpriseSignIn(),this.setState({currentStep:e})};done=()=>{this.setState({exiting:!0},(()=>{setTimeout((()=>{this.props.dispatcher.endWelcomeFlow()}),250)}))};render(){const e=Vr()({exiting:this.state.exiting});return be.createElement(qC,{id:"welcome",className:e},be.createElement("div",{className:"welcome-left"},be.createElement("div",{className:"welcome-content"},this.getComponentForCurrentStep(),be.createElement("img",{className:"welcome-graphic-top",src:KA,alt:""}),be.createElement("img",{className:"welcome-graphic-bottom",src:YA,alt:""}))),be.createElement("div",{className:"welcome-right"},be.createElement("img",{className:"welcome-graphic",src:VA,alt:""})))}}class QA extends be.Component{timeoutId=null;render(){return be.createElement("div",{id:this.props.id,className:"banner"},be.createElement("div",{className:"contents"},this.props.children),this.renderCloseButton())}renderCloseButton(){const{dismissable:e}=this.props;return void 0===e||!1===e?null:be.createElement("div",{className:"close"},be.createElement("button",{onClick:this.props.onDismissed},be.createElement(si,{symbol:go})))}componentDidMount=()=>{void 0!==this.props.timeout&&(this.timeoutId=window.setTimeout((()=>{this.props.onDismissed()}),this.props.timeout))};componentWillUnmount=()=>{void 0!==this.props.timeout&&null!==this.timeoutId&&window.clearTimeout(this.timeoutId)}}const ZA="https://desktop.github.com/release-notes/";class JA extends be.Component{render(){return be.createElement(QA,{id:"update-available",onDismissed:this.props.onDismissed},!this.props.isUpdateShowcaseVisible&&be.createElement(si,{className:"download-icon",symbol:bi}),this.renderMessage())}renderMessage=()=>{if(this.props.isX64ToARM64ImmediateAutoUpdate)return be.createElement("span",{onSubmit:this.updateNow},"An optimized version of GitHub Desktop is available for your"," ","Apple silicon"," machine and will be installed at the next launch or"," ",be.createElement(CE,{onClick:this.updateNow},"重启 GitHub Desktop")," ","now.");if(this.props.isUpdateShowcaseVisible){const e=null!==this.props.newReleases?` with GitHub Desktop ${this.props.newReleases[0].latestVersion}`:"";return be.createElement("span",null,be.createElement(Uk,{className:"banner-emoji",text:":tada:",emoji:this.props.emoji}),"Exciting new features have been added",e,". See"," ",be.createElement(CE,{onClick:this.showReleaseNotes},"更新内容")," 或"," ",be.createElement(CE,{onClick:this.dismissUpdateShowCaseVisibility},"dismiss"),".")}return be.createElement("span",{onSubmit:this.updateNow}," GitHub Desktop 有新版本可用，将在下次启动时安装。查看"," ",be.createElement(CE,{onClick:this.showReleaseNotes},"更新内容")," 或"," ",be.createElement(CE,{onClick:this.updateNow},"重启 GitHub Desktop"),".")};dismissUpdateShowCaseVisibility=()=>{const e=null===this.props.newReleases?"3.3.5":this.props.newReleases[0].latestVersion;localStorage.setItem(Vt,e),this.props.dispatcher.setUpdateShowCaseVisibility(!1)};showReleaseNotes=()=>{null==this.props.newReleases?rt.openExternal(ZA):this.props.dispatcher.showPopup({type:nl.ReleaseNotes,newReleases:this.props.newReleases}),this.dismissUpdateShowCaseVisibility()};updateNow=()=>{Yt.quitAndInstallUpdate()}}class eP extends be.Component{openDialog=()=>{this.props.onDismissed(),this.props.dispatcher.showPopup(this.props.popup),this.props.dispatcher.incrementMetric("mergeConflictsDialogReopenedCount")};render(){return be.createElement(QA,{id:"merge-conflicts-banner",dismissable:!1,onDismissed:this.props.onDismissed},be.createElement(si,{className:"alert-icon",symbol:ai}),be.createElement("div",{className:"banner-message"},be.createElement("span",null,"Resolve conflicts and commit to merge into"," ",be.createElement("strong",null,this.props.ourBranch),"."),be.createElement(CE,{onClick:this.openDialog},"View conflicts")))}}class tP extends be.Component{undo=()=>{this.props.onDismissed(),void 0!==this.props.onUndo&&this.props.onUndo()};renderUndo=()=>{if(void 0!==this.props.onUndo)return be.createElement(CE,{onClick:this.undo},"Undo")};render(){return be.createElement(QA,{id:"successful",timeout:this.props.timeout,onDismissed:this.props.onDismissed},be.createElement("div",{className:"green-circle"},be.createElement(si,{className:"check-icon",symbol:pi})),be.createElement("div",{className:"banner-message"},be.createElement("span",{className:"success-contents"},this.props.children),this.renderUndo()))}}function nP({ourBranch:e,theirBranch:t,onDismissed:n}){const r=void 0!==t?be.createElement("span",null,"成功合并 ",be.createElement("strong",null,t)," 到 ",be.createElement("strong",null,e)):be.createElement("span",null,"Successfully merged into ",be.createElement("strong",null,e));return be.createElement(tP,{timeout:5e3,onDismissed:n},be.createElement("div",{className:"banner-message"},r))}class rP extends be.Component{openDialog=async()=>{this.props.onDismissed(),this.props.onOpenDialog(),this.props.dispatcher.incrementMetric("rebaseConflictsDialogReopenedCount")};onDismissed=()=>{log.warn("[RebaseConflictsBanner] this is not dismissable by default unless the user clicks on the link")};render(){return be.createElement(QA,{id:"rebase-conflicts-banner",dismissable:!1,onDismissed:this.onDismissed},be.createElement(si,{className:"alert-icon",symbol:ai}),be.createElement("div",{className:"banner-message"},be.createElement("span",null,"Resolve conflicts to continue rebasing"," ",be.createElement("strong",null,this.props.targetBranch),"."),be.createElement(CE,{onClick:this.openDialog},"View conflicts")))}}function iP({baseBranch:e,targetBranch:t,onDismissed:n}){const r=void 0!==e?be.createElement("span",null,"Successfully rebased ",be.createElement("strong",null,t)," onto ",be.createElement("strong",null,e)):be.createElement("span",null,"Successfully rebased ",be.createElement("strong",null,t));return be.createElement(tP,{timeout:5e3,onDismissed:n},be.createElement("div",{className:"banner-message"},r))}function oP({ourBranch:e,theirBranch:t,onDismissed:n}){const r=void 0!==t?be.createElement("span",null,be.createElement("strong",null,e)," is already up to date with ",be.createElement("strong",null,t)):be.createElement("span",null,be.createElement("strong",null,e)," is already up to date");return be.createElement(QA,{id:"successful-merge",timeout:5e3,onDismissed:n},be.createElement("div",{className:"green-circle"},be.createElement(si,{className:"check-icon",symbol:pi})),be.createElement("div",{className:"banner-message"},r))}class sP extends be.Component{render(){const{countCherryPicked:e,onDismissed:t,onUndo:n,targetBranchName:r}=this.props,i=1===e?"commit":"commits";return be.createElement(tP,{timeout:15e3,onDismissed:t,onUndo:n},be.createElement("span",null,"Successfully copied ",e," ",i," to"," ",be.createElement("strong",null,r),"."))}}class aP extends be.Component{openDialog=async()=>{this.props.onDismissed(),this.props.onOpenConflictsDialog()};onDismissed=()=>{log.warn("[CherryPickConflictsBanner] this is not dismissable by default unless the user clicks on the link")};render(){return be.createElement(QA,{id:"cherry-pick-conflicts-banner",dismissable:!1,onDismissed:this.onDismissed},be.createElement(si,{className:"alert-icon",symbol:ai}),be.createElement("div",{className:"banner-message"},be.createElement("span",null,"Resolve conflicts to continue cherry-picking onto"," ",be.createElement("strong",null,this.props.targetBranchName),"."),be.createElement(CE,{onClick:this.openDialog},"View conflicts")))}}class lP extends be.Component{render(){const{countCherryPicked:e,targetBranchName:t,onDismissed:n}=this.props,r=1===e?"commit":"commits";return be.createElement(tP,{timeout:5e3,onDismissed:n},"Cherry-pick undone. Successfully removed the ",e," copied ",r," 自 ",be.createElement("strong",null,t),".")}}class cP extends be.Component{render(){return be.createElement(QA,{id:"open-thank-you-card",onDismissed:this.props.onDismissed},be.createElement("span",{onSubmit:this.props.onOpenCard},"The Desktop team would like to thank you for your contributions."," ",be.createElement(CE,{onClick:this.props.onOpenCard},"Open Your Card")," ",be.createElement(Uk,{className:"thank-you-banner-emoji",text:":tada:",emoji:this.props.emoji,renderUrlsAsLinks:!0}),"or"," ",be.createElement(CE,{onClick:this.onThrowCardAway},"Throw It Away")," ",be.createElement(Uk,{className:"thank-you-banner-emoji",text:":sob:",emoji:this.props.emoji,renderUrlsAsLinks:!0})))}onThrowCardAway=()=>{this.props.onDismissed(),this.props.onThrowCardAway()}}class uP extends be.Component{render(){const{count:e,onDismissed:t,onUndo:n}=this.props,r=1===e?"commit":"commits";return be.createElement(tP,{timeout:15e3,onDismissed:t,onUndo:n},be.createElement("span",null,"Successfully squashed ",e," ",r,"."))}}class hP extends be.Component{openDialog=async()=>{this.props.onDismissed(),this.props.onOpenConflictsDialog()};onDismissed=()=>{log.warn("[ConflictsBanner] This cannot be dismissed by default unless the user clicks on the link")};render(){return be.createElement(QA,{id:"conflicts-found-banner",dismissable:!1,onDismissed:this.onDismissed},be.createElement(si,{className:"alert-icon",symbol:ai}),be.createElement("div",{className:"banner-message"},be.createElement("span",null,"Resolve conflicts to continue ",this.props.operationDescription,"."),be.createElement(CE,{onClick:this.openDialog},"View conflicts")))}}const pP="unsupported-os-banner-dismissed-at";class dP extends be.Component{onDismissed=()=>{_t(pP,Date.now()),this.props.onDismissed()};render(){return be.createElement(QA,{id:"conflicts-found-banner",dismissable:!0,onDismissed:this.onDismissed},be.createElement(si,{className:"alert-icon",symbol:ai}),be.createElement("div",{className:"banner-message"},be.createElement("span",null,"This operating system is no longer supported. Software updates have been disabled."),be.createElement(CE,{uri:"https://docs.github.com/en/desktop/installing-and-configuring-github-desktop/overview/supported-operating-systems"},"Support details")))}}var mP;!function(e){e[e.DotCom=0]="DotCom",e[e.Enterprise=1]="Enterprise"}(mP||(mP={}));class fP extends be.Component{render(){return be.createElement(_E,{className:"accounts-tab"},be.createElement("h2",null,"GitHub.com"),this.props.dotComAccount?this.renderAccount(this.props.dotComAccount):this.renderSignIn(mP.DotCom),be.createElement("h2",null,"GitHub Enterprise"),this.props.enterpriseAccount?this.renderAccount(this.props.enterpriseAccount):this.renderSignIn(mP.Enterprise))}renderAccount(e){const t={name:e.name,email:yh(e),avatarURL:e.avatarURL,endpoint:e.endpoint};return be.createElement(mC,{className:"account-info"},be.createElement(IE,{user:t}),be.createElement("div",{className:"user-info"},be.createElement("div",{className:"name"},e.name),be.createElement("div",{className:"login"},"@",e.login)),be.createElement(ii,{onClick:this.logout(e)},"Sign Out"))}onDotComSignIn=()=>{this.props.onDotComSignIn()};onEnterpriseSignIn=()=>{this.props.onEnterpriseSignIn()};renderSignIn(e){const t="登录";switch(e){case mP.DotCom:return be.createElement(JE,{actionTitle:t,onAction:this.onDotComSignIn},be.createElement("div",null,"登录您的GitHub.com帐户访问您的存储库。"));case mP.Enterprise:return be.createElement(JE,{actionTitle:t,onAction:this.onEnterpriseSignIn},be.createElement("div",null,"如果您有GitHub Enterprise或AE帐户，请登录该帐户以访问您的存储库。"));default:return et(0,`Unknown sign in type: ${e}`)}}logout=e=>()=>{this.props.onLogout(e)}}class gP extends be.Component{constructor(e){super(e),this.state={optOutOfUsageTracking:this.props.optOutOfUsageTracking,canUseWindowsSSH:!1}}componentDidMount(){this.checkSSHAvailability()}async checkSSHAvailability(){this.setState({canUseWindowsSSH:await gd()})}onReportingOptOutChanged=e=>{const t=!e.currentTarget.checked;this.setState({optOutOfUsageTracking:t}),this.props.onOptOutofReportingChanged(t)};onRepositoryIndicatorsEnabledChanged=e=>{this.props.onRepositoryIndicatorsEnabledChanged(e.currentTarget.checked)};onUseWindowsOpenSSHChanged=e=>{this.props.onUseWindowsOpenSSHChanged(e.currentTarget.checked)};reportDesktopUsageLabel(){return be.createElement("span",null,"帮助GitHub Desktop改进，允许提交"," ",be.createElement(CE,{uri:Lv},"使用状态"))}render(){return be.createElement(_E,null,be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"后台更新"),be.createElement(GC,{label:"Show status icons in the repository list",value:this.props.repositoryIndicatorsEnabled?jC.On:jC.Off,onChange:this.onRepositoryIndicatorsEnabledChanged,ariaDescribedBy:"periodic-fecth-description"}),be.createElement("p",{id:"periodic-fecth-description",className:"git-settings-description"},be.createElement("p",null,"These icons indicate which repositories have local or remote changes, and require the periodic fetching of repositories that are not currently selected."),be.createElement("p",null,"Turning this off will not stop the periodic fetching of your currently selected repository, but may improve overall app performance for users with many repositories."))),this.renderSSHSettings(),be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"使用情况"),be.createElement(GC,{label:this.reportDesktopUsageLabel(),value:this.state.optOutOfUsageTracking?jC.Off:jC.On,onChange:this.onReportingOptOutChanged})))}renderSSHSettings(){return this.state.canUseWindowsSSH?be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"SSH"),be.createElement(GC,{label:"使用系统OpenSSH(推荐)",value:this.props.useWindowsOpenSSH?jC.On:jC.Off,onChange:this.onUseWindowsOpenSSHChanged})):null}}class yP extends be.Component{defaultBranchInputRef=be.createRef();constructor(e){super(e),this.state={defaultBranchIsOther:this.isDefaultBranchOther()}}isDefaultBranchOther=()=>!this.props.isLoadingGitConfig&&!lu.includes(this.props.defaultBranch);componentDidUpdate(e){this.props.defaultBranch!==e.defaultBranch&&(this.setState({defaultBranchIsOther:this.isDefaultBranchOther()}),""===this.props.defaultBranch&&null!==this.defaultBranchInputRef.current&&this.defaultBranchInputRef.current.focus())}render(){return be.createElement(_E,null,this.renderGitConfigAuthorInfo(),this.renderDefaultBranchSetting())}renderGitConfigAuthorInfo(){return be.createElement(sk,{email:this.props.email,name:this.props.name,isLoadingGitConfig:this.props.isLoadingGitConfig,enterpriseAccount:this.props.enterpriseAccount,dotComAccount:this.props.dotComAccount,onEmailChanged:this.props.onEmailChanged,onNameChanged:this.props.onNameChanged})}renderWarningMessage=(e,t)=>""===e?be.createElement(be.Fragment,null,be.createElement(QE,null,t)," is an invalid branch name."):be.createElement(be.Fragment,null,"Will be saved as ",be.createElement(QE,null,e),".");renderDefaultBranchSetting(){const{defaultBranchIsOther:e}=this.state;return be.createElement("div",{className:"default-branch-component"},be.createElement("h2",null,"新建存储库时默认分支"),lu.map(((t,n)=>be.createElement(nk,{key:t,checked:!e&&this.props.defaultBranch===t||this.props.isLoadingGitConfig&&0===n,value:t,label:t,onSelected:this.onDefaultBranchChanged}))),be.createElement(nk,{key:"",checked:e,value:"",label:"其他...",onSelected:this.onDefaultBranchChanged}),e&&be.createElement(xA,{initialValue:this.props.defaultBranch,renderWarningMessage:this.renderWarningMessage,onValueChange:this.props.onDefaultBranchChanged,ref:this.defaultBranchInputRef}),be.createElement("p",{className:"git-settings-description"},"这些首选项将编辑您的全局Git配置"))}onDefaultBranchChanged=e=>{this.setState({defaultBranchIsOther:!lu.includes(e)}),this.props.onDefaultBranchChanged(e)}}class bP extends be.Component{onSelectionChanged=e=>{this.props.onSelectionChanged(e)};renderRadioButtons(){const{radioButtonKeys:e,selectedKey:t}=this.props;return e.map((e=>{const n=t===e;return be.createElement(nk,{key:e,checked:n,value:e,onSelected:this.onSelectionChanged,tabIndex:n?0:-1},this.props.renderRadioButtonLabelContents(e))}))}render(){return be.createElement("div",{role:"radiogroup","aria-labelledby":this.props.ariaLabelledBy,className:this.props.className},this.renderRadioButtons())}}class wP extends be.Component{constructor(e){super(e);const t=e.selectedTheme!==aa.System||ma();this.state={selectedTheme:t?e.selectedTheme:null},t||this.initializeSelectedTheme()}async componentDidUpdate(e){if(e.selectedTheme===this.props.selectedTheme)return;const t=this.props.selectedTheme!==aa.System||ma()?this.props.selectedTheme:await ha();this.setState({selectedTheme:t})}initializeSelectedTheme=async()=>{const e=await ha();this.setState({selectedTheme:e})};onSelectedThemeChanged=e=>{this.props.onSelectedThemeChanged(e)};renderThemeSwatch=e=>{const t=St(__dirname,"static/ghd_dark.svg"),n=St(__dirname,"static/ghd_light.svg");switch(e){case aa.Light:return be.createElement("span",null,be.createElement("img",{src:n,alt:""}),be.createElement("span",{className:"theme-value-label"},"Light"));case aa.Dark:return be.createElement("span",null,be.createElement("img",{src:t,alt:""}),be.createElement("span",{className:"theme-value-label"},"Dark"));case aa.System:return be.createElement("span",null,be.createElement("span",{className:"system-theme-swatch"},be.createElement("img",{src:n,alt:""}),be.createElement("img",{src:n,alt:""}),be.createElement("img",{src:t,alt:""})),be.createElement("span",{className:"theme-value-label"},"System"))}};render(){const{selectedTheme:e}=this.state;if(null==e)return be.createElement(_E,null,be.createElement(mC,null,"加载系统主题"));const t=[aa.Light,aa.Dark,...ma()?[aa.System]:[]];return be.createElement(_E,null,be.createElement("h2",{id:"theme-heading"},"Theme"),be.createElement(bP,{ariaLabelledBy:"theme-heading",className:"theme-selector",selectedKey:e,radioButtonKeys:t,onSelectionChanged:this.onSelectedThemeChanged,renderRadioButtonLabelContents:this.renderThemeSwatch}))}}class vP extends be.Component{constructor(e){super(e),this.state={selectedExternalEditor:this.props.selectedExternalEditor,selectedShell:this.props.selectedShell}}async componentWillReceiveProps(e){const t=e.availableEditors;let n=e.selectedExternalEditor;t.length&&-1===(n?t.indexOf(n):-1)&&(n=t[0],e.onSelectedEditorChanged(n));const r=e.availableShells;let i=e.selectedShell;r.length&&-1===r.indexOf(i)&&(i=r[0],e.onSelectedShellChanged(i)),this.setState({selectedExternalEditor:n,selectedShell:i})}onSelectedEditorChanged=e=>{const t=e.currentTarget.value;t&&(this.setState({selectedExternalEditor:t}),this.props.onSelectedEditorChanged(t))};onSelectedShellChanged=e=>{const t=Cc(e.currentTarget.value);this.setState({selectedShell:t}),this.props.onSelectedShellChanged(t)};renderExternalEditor(){const e=this.props.availableEditors,t=this.state.selectedExternalEditor,n="外部编辑器";return 0===e.length?be.createElement("div",{className:"select-component no-options-found"},be.createElement("label",null,n),be.createElement("span",null,"找不到编辑器。"," ",be.createElement(CE,{uri:kl},"安装 ",El,"?"))):be.createElement(RE,{label:n,value:t||void 0,onChange:this.onSelectedEditorChanged},e.map((e=>be.createElement("option",{key:e,value:e},e))))}renderSelectedShell(){const e=this.props.availableShells;return be.createElement(RE,{label:"Shell",value:this.state.selectedShell,onChange:this.onSelectedShellChanged},e.map((e=>be.createElement("option",{key:e,value:e},e))))}render(){return be.createElement(_E,null,be.createElement("h2",null,"应用"),be.createElement(mC,null,this.renderExternalEditor()),be.createElement(mC,null,this.renderSelectedShell()))}}class CP extends be.Component{constructor(e){super(e),this.state={confirmRepositoryRemoval:this.props.confirmRepositoryRemoval,confirmDiscardChanges:this.props.confirmDiscardChanges,confirmDiscardChangesPermanently:this.props.confirmDiscardChangesPermanently,confirmDiscardStash:this.props.confirmDiscardStash,confirmCheckoutCommit:this.props.confirmCheckoutCommit,confirmForcePush:this.props.confirmForcePush,confirmUndoCommit:this.props.confirmUndoCommit,uncommittedChangesStrategy:this.props.uncommittedChangesStrategy}}onConfirmDiscardChangesChanged=e=>{const t=e.currentTarget.checked;this.setState({confirmDiscardChanges:t}),this.props.onConfirmDiscardChangesChanged(t)};onConfirmDiscardChangesPermanentlyChanged=e=>{const t=e.currentTarget.checked;this.setState({confirmDiscardChangesPermanently:t}),this.props.onConfirmDiscardChangesPermanentlyChanged(t)};onConfirmDiscardStashChanged=e=>{const t=e.currentTarget.checked;this.setState({confirmDiscardStash:t}),this.props.onConfirmDiscardStashChanged(t)};onConfirmCheckoutCommitChanged=e=>{const t=e.currentTarget.checked;this.setState({confirmCheckoutCommit:t}),this.props.onConfirmCheckoutCommitChanged(t)};onConfirmForcePushChanged=e=>{const t=e.currentTarget.checked;this.setState({confirmForcePush:t}),this.props.onConfirmForcePushChanged(t)};onConfirmUndoCommitChanged=e=>{const t=e.currentTarget.checked;this.setState({confirmUndoCommit:t}),this.props.onConfirmUndoCommitChanged(t)};onConfirmRepositoryRemovalChanged=e=>{const t=e.currentTarget.checked;this.setState({confirmRepositoryRemoval:t}),this.props.onConfirmRepositoryRemovalChanged(t)};onUncommittedChangesStrategyChanged=e=>{this.setState({uncommittedChangesStrategy:e}),this.props.onUncommittedChangesStrategyChanged(e)};onShowCommitLengthWarningChanged=e=>{this.props.onShowCommitLengthWarningChanged(e.currentTarget.checked)};render(){return be.createElement(_E,null,be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"确认对话框"),be.createElement(GC,{label:"删除仓库",value:this.state.confirmRepositoryRemoval?jC.On:jC.Off,onChange:this.onConfirmRepositoryRemovalChanged}),be.createElement(GC,{label:"放弃更改",value:this.state.confirmDiscardChanges?jC.On:jC.Off,onChange:this.onConfirmDiscardChangesChanged}),be.createElement(GC,{label:"永久放弃更改",value:this.state.confirmDiscardChangesPermanently?jC.On:jC.Off,onChange:this.onConfirmDiscardChangesPermanentlyChanged}),be.createElement(GC,{label:"放弃暂存",value:this.state.confirmDiscardStash?jC.On:jC.Off,onChange:this.onConfirmDiscardStashChanged}),be.createElement(GC,{label:"Checking out a commit",value:this.state.confirmCheckoutCommit?jC.On:jC.Off,onChange:this.onConfirmCheckoutCommitChanged}),be.createElement(GC,{label:"强制推送",value:this.state.confirmForcePush?jC.On:jC.Off,onChange:this.onConfirmForcePushChanged}),be.createElement(GC,{label:"撤消提交",value:this.state.confirmUndoCommit?jC.On:jC.Off,onChange:this.onConfirmUndoCommitChanged})),be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"如果我有更改并切换分支..."),be.createElement(nk,{value:Su.AskForConfirmation,checked:this.state.uncommittedChangesStrategy===Su.AskForConfirmation,label:"询问我要更改的位置",onSelected:this.onUncommittedChangesStrategyChanged}),be.createElement(nk,{value:Su.MoveToNewBranch,checked:this.state.uncommittedChangesStrategy===Su.MoveToNewBranch,label:"始终将我的更改带到我的新分支",onSelected:this.onUncommittedChangesStrategyChanged}),be.createElement(nk,{value:Su.StashOnCurrentBranch,checked:this.state.uncommittedChangesStrategy===Su.StashOnCurrentBranch,label:"始终将更改保存并保留在当前分支上",onSelected:this.onUncommittedChangesStrategyChanged})),be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"Commit Length"),be.createElement(GC,{label:"Show commit length warning",value:this.props.showCommitLengthWarning?jC.On:jC.Off,onChange:this.onShowCommitLengthWarningChanged})))}}class SP extends be.Component{constructor(e){super(e),this.state={suggestGrantNotificationPermission:!1,warnNotificationsDenied:!1,suggestConfigureNotifications:!1}}componentDidMount(){this.updateNotificationsState()}onNotificationsEnabledChanged=e=>{this.props.onNotificationsEnabledChanged(e.currentTarget.checked)};render(){return be.createElement(_E,null,be.createElement("div",{className:"advanced-section"},be.createElement("h2",null,"通知"),be.createElement(GC,{label:"启用通知",value:this.props.notificationsEnabled?jC.On:jC.Off,onChange:this.onNotificationsEnabledChanged}),be.createElement("p",{className:"git-settings-description"},"允许在当前仓库中发生高级事件时显示通知。",this.renderNotificationHint())))}onGrantNotificationPermission=async()=>{await me(),this.updateNotificationsState()};async updateNotificationsState(){const e=await de();this.setState({suggestGrantNotificationPermission:(0,Av.YF)()&&"default"===e,warnNotificationsDenied:"denied"===e,suggestConfigureNotifications:"granted"===e})}renderNotificationHint(){if(!(0,Av.VB)()||!this.props.notificationsEnabled)return null;const{suggestGrantNotificationPermission:e,warnNotificationsDenied:t,suggestConfigureNotifications:n}=this.state;if(e)return be.createElement(be.Fragment,null," ","你需要"," ",be.createElement(CE,{onClick:this.onGrantNotificationPermission},"grant permission")," ","从GitHub DeskTop显示这些通知");const r=(0,Av.Y4)();if(null===r)return null;if(t)return be.createElement(be.Fragment,null,be.createElement("br",null),be.createElement("br",null),be.createElement("span",{className:"warning-icon"},"⚠️")," GitHub DeskTop没有显示通知的权限。请在设置中启用它们"," ",be.createElement(CE,{uri:r},"通知设置"),".");const i=n?"properly configured":"允许";return be.createElement(be.Fragment,null," ","确认GitHub DeskTop ",i," 向你发出通知"," ",be.createElement(CE,{uri:r},"通知设置"),".")}}class EP extends be.Component{constructor(e){super(e),this.state={selectedIndex:this.props.initialSelectedTab||Dr.Accounts,committerName:"",committerEmail:"",defaultBranch:"",initialCommitterName:null,initialCommitterEmail:null,initialDefaultBranch:null,disallowedCharactersMessage:null,availableEditors:[],useWindowsOpenSSH:!1,showCommitLengthWarning:!1,notificationsEnabled:!0,optOutOfUsageTracking:!1,confirmRepositoryRemoval:!1,confirmDiscardChanges:!1,confirmDiscardChangesPermanently:!1,confirmDiscardStash:!1,confirmCheckoutCommit:!1,confirmForcePush:!1,confirmUndoCommit:!1,uncommittedChangesStrategy:Eu,selectedExternalEditor:this.props.selectedExternalEditor,availableShells:[],selectedShell:this.props.selectedShell,repositoryIndicatorsEnabled:this.props.repositoryIndicatorsEnabled,initiallySelectedTheme:this.props.selectedTheme,isLoadingGitConfig:!0}}async componentWillMount(){const e=await ol("user.name"),t=await ol("user.email"),n=await cu();let r=e,i=t;if(!r||!i){const e=this.props.dotComAccount||this.props.enterpriseAccount;e&&(r||(r=e.login),i||(i=yh(e)))}r=r||"",i=i||"";const[o,s]=await Promise.all([Ll(),Sc()]),a=o.map((e=>e.editor)),l=s.map((e=>e.shell));this.setState({committerName:r,committerEmail:i,defaultBranch:n,initialCommitterName:e,initialCommitterEmail:t,initialDefaultBranch:n,useWindowsOpenSSH:this.props.useWindowsOpenSSH,showCommitLengthWarning:this.props.showCommitLengthWarning,notificationsEnabled:this.props.notificationsEnabled,optOutOfUsageTracking:this.props.optOutOfUsageTracking,confirmRepositoryRemoval:this.props.confirmRepositoryRemoval,confirmDiscardChanges:this.props.confirmDiscardChanges,confirmDiscardChangesPermanently:this.props.confirmDiscardChangesPermanently,confirmDiscardStash:this.props.confirmDiscardStash,confirmCheckoutCommit:this.props.confirmCheckoutCommit,confirmForcePush:this.props.confirmForcePush,confirmUndoCommit:this.props.confirmUndoCommit,uncommittedChangesStrategy:this.props.uncommittedChangesStrategy,availableShells:l,availableEditors:a,isLoadingGitConfig:!1})}onCancel=()=>{this.state.initiallySelectedTheme!==this.props.selectedTheme&&this.onSelectedThemeChanged(this.state.initiallySelectedTheme),this.props.onDismissed()};render(){return be.createElement(FE,{id:"preferences",title:"Settings",onDismissed:this.onCancel,onSubmit:this.onSave},be.createElement("div",{className:"preferences-container"},this.renderDisallowedCharactersError(),be.createElement(KE,{onTabClicked:this.onTabClicked,selectedIndex:this.state.selectedIndex,type:GE.Vertical},be.createElement("span",null,be.createElement(si,{className:"icon",symbol:Wi}),"帐户"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:Qi}),"集成"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:Fi}),"Git"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:Xi}),"主题"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:hi}),"通知"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:Ji}),"提示"),be.createElement("span",null,be.createElement(si,{className:"icon",symbol:io}),"高级")),this.renderActiveTab()),this.renderFooter())}onDotComSignIn=()=>{this.props.onDismissed(),this.props.dispatcher.showDotComSignInDialog()};onEnterpriseSignIn=()=>{this.props.onDismissed(),this.props.dispatcher.showEnterpriseSignInDialog()};onLogout=e=>{this.props.dispatcher.removeAccount(e)};renderDisallowedCharactersError(){const e=this.state.disallowedCharactersMessage;return null!=e?be.createElement(LE,null,e):null}renderActiveTab(){const e=this.state.selectedIndex;let t;switch(e){case Dr.Accounts:t=be.createElement(fP,{dotComAccount:this.props.dotComAccount,enterpriseAccount:this.props.enterpriseAccount,onDotComSignIn:this.onDotComSignIn,onEnterpriseSignIn:this.onEnterpriseSignIn,onLogout:this.onLogout});break;case Dr.Integrations:t=be.createElement(vP,{availableEditors:this.state.availableEditors,selectedExternalEditor:this.state.selectedExternalEditor,onSelectedEditorChanged:this.onSelectedEditorChanged,availableShells:this.state.availableShells,selectedShell:this.state.selectedShell,onSelectedShellChanged:this.onSelectedShellChanged});break;case Dr.Git:{const{existingLockFilePath:e}=this.state,n=void 0!==e?be.createElement(LE,null,be.createElement(zA,{lockFilePath:e,onLockFileDeleted:this.onLockFileDeleted,onError:this.onLockFileDeleteError})):null;t=be.createElement(be.Fragment,null,n,be.createElement(yP,{name:this.state.committerName,email:this.state.committerEmail,defaultBranch:this.state.defaultBranch,dotComAccount:this.props.dotComAccount,enterpriseAccount:this.props.enterpriseAccount,onNameChanged:this.onCommitterNameChanged,onEmailChanged:this.onCommitterEmailChanged,onDefaultBranchChanged:this.onDefaultBranchChanged,isLoadingGitConfig:this.state.isLoadingGitConfig}));break}case Dr.Appearance:t=be.createElement(wP,{selectedTheme:this.props.selectedTheme,onSelectedThemeChanged:this.onSelectedThemeChanged});break;case Dr.Notifications:t=be.createElement(SP,{notificationsEnabled:this.state.notificationsEnabled,onNotificationsEnabledChanged:this.onNotificationsEnabledChanged});break;case Dr.Prompts:t=be.createElement(CP,{confirmRepositoryRemoval:this.state.confirmRepositoryRemoval,confirmDiscardChanges:this.state.confirmDiscardChanges,confirmDiscardChangesPermanently:this.state.confirmDiscardChangesPermanently,confirmDiscardStash:this.state.confirmDiscardStash,confirmCheckoutCommit:this.state.confirmCheckoutCommit,confirmForcePush:this.state.confirmForcePush,confirmUndoCommit:this.state.confirmUndoCommit,onConfirmRepositoryRemovalChanged:this.onConfirmRepositoryRemovalChanged,onConfirmDiscardChangesChanged:this.onConfirmDiscardChangesChanged,onConfirmDiscardStashChanged:this.onConfirmDiscardStashChanged,onConfirmCheckoutCommitChanged:this.onConfirmCheckoutCommitChanged,onConfirmForcePushChanged:this.onConfirmForcePushChanged,onConfirmDiscardChangesPermanentlyChanged:this.onConfirmDiscardChangesPermanentlyChanged,onConfirmUndoCommitChanged:this.onConfirmUndoCommitChanged,uncommittedChangesStrategy:this.state.uncommittedChangesStrategy,onUncommittedChangesStrategyChanged:this.onUncommittedChangesStrategyChanged,showCommitLengthWarning:this.state.showCommitLengthWarning,onShowCommitLengthWarningChanged:this.onShowCommitLengthWarningChanged});break;case Dr.Advanced:t=be.createElement(gP,{useWindowsOpenSSH:this.state.useWindowsOpenSSH,optOutOfUsageTracking:this.state.optOutOfUsageTracking,repositoryIndicatorsEnabled:this.state.repositoryIndicatorsEnabled,onUseWindowsOpenSSHChanged:this.onUseWindowsOpenSSHChanged,onOptOutofReportingChanged:this.onOptOutofReportingChanged,onRepositoryIndicatorsEnabledChanged:this.onRepositoryIndicatorsEnabledChanged});break;default:return et(0,`Unknown tab index: ${e}`)}return be.createElement("div",{className:"tab-container"},t)}onRepositoryIndicatorsEnabledChanged=e=>{this.setState({repositoryIndicatorsEnabled:e})};onLockFileDeleted=()=>{this.setState({existingLockFilePath:void 0})};onLockFileDeleteError=e=>{this.props.dispatcher.postError(e)};onUseWindowsOpenSSHChanged=e=>{this.setState({useWindowsOpenSSH:e})};onShowCommitLengthWarningChanged=e=>{this.setState({showCommitLengthWarning:e})};onNotificationsEnabledChanged=e=>{this.setState({notificationsEnabled:e})};onOptOutofReportingChanged=e=>{this.setState({optOutOfUsageTracking:e})};onConfirmRepositoryRemovalChanged=e=>{this.setState({confirmRepositoryRemoval:e})};onConfirmDiscardChangesChanged=e=>{this.setState({confirmDiscardChanges:e})};onConfirmDiscardStashChanged=e=>{this.setState({confirmDiscardStash:e})};onConfirmCheckoutCommitChanged=e=>{this.setState({confirmCheckoutCommit:e})};onConfirmDiscardChangesPermanentlyChanged=e=>{this.setState({confirmDiscardChangesPermanently:e})};onConfirmForcePushChanged=e=>{this.setState({confirmForcePush:e})};onConfirmUndoCommitChanged=e=>{this.setState({confirmUndoCommit:e})};onUncommittedChangesStrategyChanged=e=>{this.setState({uncommittedChangesStrategy:e})};onCommitterNameChanged=e=>{this.setState({committerName:e,disallowedCharactersMessage:uk(e)?null:hk})};onCommitterEmailChanged=e=>{this.setState({committerEmail:e})};onDefaultBranchChanged=e=>{this.setState({defaultBranch:e})};onSelectedEditorChanged=e=>{this.setState({selectedExternalEditor:e})};onSelectedShellChanged=e=>{this.setState({selectedShell:e})};onSelectedThemeChanged=e=>{this.props.dispatcher.setSelectedTheme(e)};renderFooter(){const e=null!=this.state.disallowedCharactersMessage;return be.createElement(HE,null,be.createElement(UE,{okButtonText:"保存",okButtonDisabled:e}))}onSave=async()=>{try{let e=!1;this.state.committerName!==this.state.initialCommitterName&&(await cl("user.name",this.state.committerName),e=!0),this.state.committerEmail!==this.state.initialCommitterEmail&&(await cl("user.email",this.state.committerEmail),e=!0),null!==this.props.repository&&e&&this.props.dispatcher.refreshAuthor(this.props.repository),this.state.defaultBranch.length>0&&this.state.defaultBranch!==this.state.initialDefaultBranch&&await async function(e){return cl(au,e)}(this.state.defaultBranch),this.props.repositoryIndicatorsEnabled!==this.state.repositoryIndicatorsEnabled&&this.props.dispatcher.setRepositoryIndicatorsEnabled(this.state.repositoryIndicatorsEnabled)}catch(e){if(Gw(e)){const t=Kw(e.result);if(null!==t)return void this.setState({existingLockFilePath:t,selectedIndex:Dr.Git})}return this.props.onDismissed(),void this.props.dispatcher.postError(e)}this.props.dispatcher.setUseWindowsOpenSSH(this.state.useWindowsOpenSSH),this.props.dispatcher.setShowCommitLengthWarning(this.state.showCommitLengthWarning),this.props.dispatcher.setNotificationsEnabled(this.state.notificationsEnabled),await this.props.dispatcher.setStatsOptOut(this.state.optOutOfUsageTracking,!1),await this.props.dispatcher.setConfirmRepoRemovalSetting(this.state.confirmRepositoryRemoval),await this.props.dispatcher.setConfirmForcePushSetting(this.state.confirmForcePush),await this.props.dispatcher.setConfirmDiscardStashSetting(this.state.confirmDiscardStash),await this.props.dispatcher.setConfirmCheckoutCommitSetting(this.state.confirmCheckoutCommit),await this.props.dispatcher.setConfirmUndoCommitSetting(this.state.confirmUndoCommit),this.state.selectedExternalEditor&&await this.props.dispatcher.setExternalEditor(this.state.selectedExternalEditor),await this.props.dispatcher.setShell(this.state.selectedShell),await this.props.dispatcher.setConfirmDiscardChangesSetting(this.state.confirmDiscardChanges),await this.props.dispatcher.setConfirmDiscardChangesPermanentlySetting(this.state.confirmDiscardChangesPermanently),await this.props.dispatcher.setUncommittedChangesStrategySetting(this.state.uncommittedChangesStrategy),this.props.onDismissed()};onTabClicked=e=>{this.setState({selectedIndex:e})}}function kP(e){return e.indexOf("\r")<0?e:e.split("\n").map((e=>e.split("\r").reduce(((e,t)=>t.length>=e.length?t:t+e.substring(t.length))))).join("\n")}class RP extends be.Component{dialogContent=null;formatGitErrorMessage=mr(kP);constructor(e){super(e),this.state={error:e.error,disabled:!1}}componentWillReceiveProps(e){const t=e.error;t!==this.state.error&&this.setState({error:t,disabled:!1})}showPreferencesDialog=()=>{this.props.onDismissed(),window.setTimeout((()=>{this.props.onShowPopup({type:nl.Preferences})}),gN.exit)};onRetryAction=e=>{e.preventDefault(),this.props.onDismissed();const{error:t}=this.state;if(null!==t&&TP(t)){const{retryAction:e}=t.metadata;void 0!==e&&this.props.onRetryAction(e)}};renderErrorMessage(e){const t=xP(e);if(DP(t)){const e=this.formatGitErrorMessage(t.message);return be.createElement("p",{className:"monospace"},e)}return be.createElement("p",null,t.message)}getTitle(e){return AP(e)?"Clone failed":"Error"}renderContentAfterErrorMessage(e){if(!TP(e))return;const{retryAction:t}=e.metadata;return t&&t.type===ot.Clone?be.createElement("p",null,"Would you like to retry cloning ",be.createElement(QE,null,t.name),"?"):void 0}onDialogContentRef=e=>{this.dialogContent=e};scrollToBottomOfGitErrorMessage(){null!==this.dialogContent&&null!==this.state.error&&DP(xP(this.state.error))&&(this.dialogContent.scrollTop=this.dialogContent.scrollHeight)}componentDidMount(){this.scrollToBottomOfGitErrorMessage()}componentDidUpdate(e,t){t.error!==this.state.error&&this.scrollToBottomOfGitErrorMessage()}onCloseButtonClick=e=>{e.preventDefault(),this.props.onDismissed()};renderFooter(e){if(AP(e))return this.renderRetryCloneFooter();const t=xP(e);if(function(e){return e instanceof zw}(t)){const{gitError:e}=t.result;if(null!==e&&jw(e))return this.renderOpenPreferencesFooter()}return this.renderDefaultFooter()}renderRetryCloneFooter(){return be.createElement(HE,null,be.createElement(UE,{okButtonText:"Retry Clone",onOkButtonClick:this.onRetryAction,onCancelButtonClick:this.onCloseButtonClick}))}renderOpenPreferencesFooter(){return be.createElement(HE,null,be.createElement(UE,{okButtonText:"关闭",onOkButtonClick:this.onCloseButtonClick,cancelButtonText:"Open Preferences",onCancelButtonClick:this.showPreferencesDialog}))}renderDefaultFooter(){return be.createElement(WE,{onButtonClick:this.onCloseButtonClick})}render(){const e=this.state.error;return e?be.createElement(FE,{id:"app-error",type:"error",key:"error",title:this.getTitle(e),dismissable:!1,onSubmit:this.props.onDismissed,onDismissed:this.props.onDismissed,disabled:this.state.disabled,className:DP(this.state.error)?"raw-git-error":void 0,role:"alertdialog",ariaDescribedBy:"app-error-description"},be.createElement(_E,{onRef:this.onDialogContentRef},be.createElement("div",{id:"app-error-description"},this.renderErrorMessage(e),this.renderContentAfterErrorMessage(e))),this.renderFooter(e)):null}}function xP(e){return TP(e)?e.underlyingError:e}function TP(e){return e instanceof at}function DP(e){if(!e)return!1;const t=xP(e);return t instanceof zw&&t.isRawMessage}function AP(e){if(!TP(e))return!1;const{retryAction:t}=e.metadata;return void 0!==t&&t.type===ot.Clone}class PP extends be.Component{constructor(e){super(e),this.state={isPathUnsafe:!1,isTrustingPath:!1}}onTrustDirectory=async()=>{this.setState({isTrustingPath:!0});const{unsafePath:e}=this.state,{repository:t}=this.props;if(e){await ul(e);const n=await wv(t.path);this.setState({isTrustingPath:!1}),"unsafe"!==n.kind&&this.checkAgain()}};async componentDidMount(){this.updateUnsafePathState()}async componentDidUpdate(e){e.repository.path!==this.props.repository.path&&this.updateUnsafePathState()}updateUnsafePathState=async()=>{const{path:e}=this.props.repository,t=await wv(e);e===this.props.repository.path&&this.setState({isPathUnsafe:"unsafe"===t.kind,unsafePath:"unsafe"===t.kind?t.path:void 0})};render(){const e=new Array,{isPathUnsafe:t,unsafePath:n}=this.state;return t?e.push(be.createElement(ii,{key:"trustDirectory",onClick:this.onTrustDirectory,type:"submit",disabled:this.state.isTrustingPath},this.state.isTrustingPath&&be.createElement(hE,null),"Trust Repository")):(e.push(be.createElement(ii,{key:"locate",onClick:this.locate,type:"submit"},"Locate…")),this.canCloneAgain()&&e.push(be.createElement(ii,{key:"clone-again",onClick:this.cloneAgain},"Clone Again"))),e.push(be.createElement(ii,{key:"remove",onClick:this.remove},"Remove")),t?be.createElement(qC,{id:"missing-repository-view"},be.createElement("div",{className:"title-container"},be.createElement("div",{className:"title"},this.props.repository.name," is potentially unsafe"),be.createElement("div",{className:"details"},be.createElement("p",null,"The Git repository at ",be.createElement(QE,null,n)," appears to be owned by another user on your machine. Adding untrusted repositories may automatically execute files in the repository."),be.createElement("p",null,"If you trust the owner of the directory you can add an exception for this directory in order to continue."))),be.createElement(mC,null,e)):be.createElement(qC,{id:"missing-repository-view"},be.createElement("div",{className:"title-container"},be.createElement("div",{className:"title"},"Can't find \"",this.props.repository.name,'"'),be.createElement("div",{className:"details"},"It was last seen at"," ",be.createElement("span",{className:"path"},this.props.repository.path),"."," ",be.createElement(CE,{onClick:this.checkAgain},"Check again."))),be.createElement(mC,null,e))}canCloneAgain(){const e=this.props.repository.gitHubRepository;return e&&e.cloneURL}checkAgain=()=>{this.props.dispatcher.refreshRepository(this.props.repository)};remove=()=>{this.props.dispatcher.removeRepository(this.props.repository,!1)};locate=()=>{this.props.dispatcher.relocateRepository(this.props.repository)};cloneAgain=async()=>{const e=this.props.repository.gitHubRepository;if(!e)return;const t=e.cloneURL;if(t)try{await this.props.dispatcher.cloneAgain(t,this.props.repository.path)}catch(e){this.props.dispatcher.postError(e)}}}var IP,_P=n(4143),NP=n.n(_P);!function(e){e[e.Caption=0]="Caption",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(IP||(IP={}));class OP extends be.Component{getClassName(){const{inputDescriptionType:e}=this.props;switch(e){case IP.Caption:return Vr()("input-description","input-description-caption");case IP.Warning:return Vr()("input-description","input-description-warning");case IP.Error:return Vr()("input-description","input-description-error");default:return et(0,`Unknown input type  ${e}`)}}renderIcon(){const{inputDescriptionType:e}=this.props;switch(e){case IP.Caption:return null;case IP.Warning:return be.createElement(si,{symbol:ai});case IP.Error:return be.createElement(si,{symbol:ao});default:return et(0,`Unknown input type  ${e}`)}}renderAriaLiveContainer(){return this.props.inputDescriptionType===IP.Caption||void 0===this.props.trackedUserInput||void 0===this.props.ariaLiveMessage?null:be.createElement(pC,{message:this.props.ariaLiveMessage,trackedUserInput:this.props.trackedUserInput})}getRole(){if(this.props.inputDescriptionType===IP.Error&&void 0===this.props.trackedUserInput)return"alert"}render(){return be.createElement(be.Fragment,null,be.createElement("div",{id:this.props.id,className:this.getClassName(),role:this.getRole()},this.renderIcon(),be.createElement("div",null,this.props.children)),this.renderAriaLiveContainer())}}class MP extends be.Component{render(){return be.createElement(OP,{inputDescriptionType:IP.Error,...this.props},this.props.children)}}class BP extends be.Component{constructor(e){super(e);const t=this.props.path?this.props.path:"";this.state={path:t,isRepository:!1,showNonGitRepositoryWarning:!1,isRepositoryBare:!1,isRepositoryUnsafe:!1,isTrustingRepository:!1}}async componentDidMount(){const{path:e}=this.state;0!==e.length&&await this.validatePath(e)}onTrustDirectory=async()=>{this.setState({isTrustingRepository:!0});const{repositoryUnsafePath:e,path:t}=this.state;e&&await ul(e),await this.validatePath(t),this.setState({isTrustingRepository:!1})};async updatePath(e){this.setState({path:e,isRepository:!1}),await this.validatePath(e)}async validatePath(e){if(0===e.length)return void this.setState({isRepository:!1,isRepositoryBare:!1,showNonGitRepositoryWarning:!1});const t=await wv(e),n="missing"!==t.kind&&"unsafe"!==t.kind,r="unsafe"===t.kind,i="bare"===t.kind,o=!n||i,s="unsafe"===t.kind?t.path:void 0;this.setState((t=>e===t.path?{isRepository:n,isRepositoryBare:i,isRepositoryUnsafe:r,showNonGitRepositoryWarning:o,repositoryUnsafePath:s}:null))}buildBareRepositoryError(){if(!this.state.path.length||!this.state.showNonGitRepositoryWarning||!this.state.isRepositoryBare)return null;const e="This directory appears to be a bare repository. Bare repositories are not currently supported.";return{screenReaderMessage:e,displayedMessage:e}}buildRepositoryUnsafeError(){const{repositoryUnsafePath:e,path:t}=this.state;if(!this.state.path.length||!this.state.showNonGitRepositoryWarning||!this.state.isRepositoryUnsafe||void 0===e)return null;const n=t;return{screenReaderMessage:"The Git repository appears to be owned by another user on your machine.\n      Adding untrusted repositories may automatically execute files in the repository.\n      If you trust the owner of the directory you can add an exception for this directory in order to continue.",displayedMessage:be.createElement(be.Fragment,null,be.createElement("p",null,"The Git repository",e!==n&&be.createElement(be.Fragment,null," at ",be.createElement(QE,null,e))," ","appears to be owned by another user on your machine. Adding untrusted repositories may automatically execute files in the repository."),be.createElement("p",null,"If you trust the owner of the directory you can",be.createElement(CE,{onClick:this.onTrustDirectory}," ","add an exception for this directory")," ","in order to continue."))}}buildNotAGitRepositoryError(){return this.state.path.length&&this.state.showNonGitRepositoryWarning?{screenReaderMessage:"This directory does not appear to be a Git repository. Would you like to create a repository here instead?",displayedMessage:be.createElement(be.Fragment,null,"This directory does not appear to be a Git repository.",be.createElement("br",null),"Would you like to"," ",be.createElement(CE,{onClick:this.onCreateRepositoryClicked},"create a repository")," ","here instead?")}:null}renderErrors(){const e=this.buildBareRepositoryError()??this.buildRepositoryUnsafeError()??this.buildNotAGitRepositoryError();return null===e?null:be.createElement(mC,null,be.createElement(MP,{id:"add-existing-repository-path-error",trackedUserInput:this.state.path,ariaLiveMessage:e.screenReaderMessage},e.displayedMessage))}render(){const e=0===this.state.path.length||!this.state.isRepository||this.state.isRepositoryBare;return be.createElement(FE,{id:"add-existing-repository",title:"添加本地存储库",onSubmit:this.addRepository,onDismissed:this.props.onDismissed,loading:this.state.isTrustingRepository},be.createElement(_E,null,be.createElement(mC,null,be.createElement(dC,{value:this.state.path,label:"本地路径",placeholder:"存储库路径",onValueChanged:this.onPathChanged,ariaDescribedBy:"add-existing-repository-path-error"}),be.createElement(ii,{onClick:this.showFilePicker},"选择…")),this.renderErrors()),be.createElement(HE,null,be.createElement(UE,{okButtonText:"添加存储库",okButtonDisabled:e})))}onPathChanged=async e=>{this.state.path!==e&&this.updatePath(e)};showFilePicker=async()=>{const e=await ce({properties:["createDirectory","openDirectory"]});null!==e&&this.updatePath(e)};resolvedPath(t){return e.resolve("/",NP()(t))}addRepository=async()=>{this.props.onDismissed();const{dispatcher:e}=this.props,t=this.resolvedPath(this.state.path),n=await e.addRepositories([t]);n.length>0&&(e.closeFoldout(je.Repository),e.selectRepository(n[0]),e.recordAddExistingRepository())};onCreateRepositoryClicked=()=>{this.props.onDismissed();const e=this.resolvedPath(this.state.path);return this.props.dispatcher.showPopup({type:nl.CreateRepository,path:e})}}const FP=new RegExp(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]"].join("|"),"g");function LP(e){return e.replace(FP,"-").replace(/[^\w.-]/g,"-")}const HP=".gitignore",UP=e.join(__dirname,"static","gitignore");let WP=null;async function $P(){if(null!=WP)return WP;{const t=(await(0,y.readdir)(UP)).filter((e=>e.endsWith(HP)));WP=new Map;for(const n of t)WP.set(e.basename(n,HP),e.join(UP,n));return WP}}let zP=null;function qP(e,t,n){const r=new RegExp(`\\[${t}\\]`,"g"),i=e.replace(r,`{${t}}`),o=new RegExp(`\\{${t}\\}`,"g");return i.replace(o,n)}class jP extends be.Component{render(){return be.createElement(OP,{inputDescriptionType:IP.Warning,...this.props},this.props.children)}}const GP="None",VP={name:"None",featured:!1,body:"",hidden:!1};class KP extends be.Component{checkIsTopMostDialog=OE((()=>{this.updateReadMeExists(this.state.path,this.state.name),window.addEventListener("focus",this.onWindowFocus)}),(()=>{window.removeEventListener("focus",this.onWindowFocus)}));constructor(t){super(t);const n=this.props.initialPath?this.props.initialPath:null,r=this.props.initialPath?LP(e.basename(this.props.initialPath)):"";this.state={path:n,name:r,description:"",createWithReadme:!1,creating:!1,gitIgnoreNames:null,gitIgnore:GP,licenses:null,license:VP.name,isValidPath:null,isRepository:!1,readMeExists:!1},null===n&&this.initializePath()}async componentDidMount(){this.checkIsTopMostDialog(this.props.isTopMost);const t=await async function(){const e=await $P();return Array.from(e.keys())}(),n=await async function(){if(null!=zP)return zP;{const t=e.join(__dirname,"static","available-licenses.json"),n=await(0,y.readFile)(t,"utf8"),r=JSON.parse(n);return zP=r.sort(((e,t)=>e.featured?-1:t.featured?1:e.name.localeCompare(t.name))),zP}}();this.setState({gitIgnoreNames:t,licenses:n});const r=this.state.path??await dh();this.updateIsRepository(r,this.state.name),this.updateReadMeExists(r,this.state.name)}componentDidUpdate(){this.checkIsTopMostDialog(this.props.isTopMost)}componentWillUnmount(){this.checkIsTopMostDialog(!1)}initializePath=async()=>{const e=await dh();this.setState((t=>null===t.path?{path:e}:null))};onPathChanged=async e=>{this.setState({path:e,isValidPath:null,isRepository:!1}),this.updateIsRepository(e,this.state.name),this.updateReadMeExists(e,this.state.name)};onNameChanged=e=>{const{path:t}=this.state;this.setState({name:e}),null!==t&&(this.updateIsRepository(t,e),this.updateReadMeExists(this.state.path,e))};async updateIsRepository(t,n){const r=e.join(t,LP(n)),i=await(async t=>{const n=await wv(t).catch((e=>(log.error("Unable to determine repository type",e),{kind:"missing"})));return"unsafe"===n.kind?bv((0,e.join)(t,".git")):"missing"!==n.kind})(r);this.setState((e=>e.path===t&&e.name===n?{isRepository:i}:null))}onDescriptionChanged=e=>{this.setState({description:e})};showFilePicker=async()=>{const e=await ce({properties:["createDirectory","openDirectory"]});null!==e&&(this.setState({path:e,isRepository:!1}),this.updateIsRepository(e,this.state.name))};async updateReadMeExists(t,n){if(!Ht()||null===t)return;const r=e.join(t,LP(n),"README.md"),i=await S(r);this.setState((e=>e.path===t?{readMeExists:i}:null))}resolveRepositoryRoot=async()=>{const t=this.state.path;if(null===t)return null;if(this.props.initialPath&&this.props.initialPath===t)try{return await(0,y.mkdir)(t,{recursive:!0}),t}catch{}return e.join(t,LP(this.state.name))};createRepository=async()=>{const t=await this.resolveRepositoryRoot();if(null===t)return void this.setState({isValidPath:!0});try{await(0,y.mkdir)(t,{recursive:!0}),this.setState({isValidPath:!0})}catch(e){return"EACCES"===e.code&&-13===e.errno?this.setState({isValidPath:!1}):(log.error(`createRepository: the directory at ${t} is not valid`,e),this.props.dispatcher.postError(e))}this.setState({creating:!0});try{await async function(e){await qw(["-c",`init.defaultBranch=${await cu()}`,"init"],e,"initGitRepository")}(t)}catch(e){return this.setState({creating:!1}),log.error(`createRepository: unable to initialize a Git repository at ${t}`,e),this.props.dispatcher.postError(e)}const n=await this.props.dispatcher.addRepositories([t]);if(n.length<1)return;const r=n[0];if(this.state.createWithReadme)try{await async function(t,n,r){const i=e.join(t,"README.md"),o=function(e,t){return void 0!==t?`# ${e}\n ${t}\n`:`# ${e}\n`}(n,r);await(0,y.writeFile)(i,o)}(t,this.state.name,this.state.description)}catch(e){log.error(`createRepository: unable to write README at ${t}`,e),this.props.dispatcher.postError(e)}const i=this.state.gitIgnore;if(i!==GP)try{await async function(t,n){const r=e.join(t,".gitignore"),i=await async function(e){const t=(await $P()).get(e);if(!t)throw new Error(`Unknown gitignore: ${e}. Only names returned from getGitIgnoreNames() can be used.`);return await(0,y.readFile)(t,"utf8")}(n);await(0,y.writeFile)(r,i)}(t,i)}catch(e){log.error(`createRepository: unable to write .gitignore file at ${t}`,e),this.props.dispatcher.postError(e)}const o=this.state.description;if(o)try{await async function(t,n){const r=e.join(t,mv);await(0,y.writeFile)(r,n)}(t,o)}catch(e){log.error(`createRepository: unable to write .git/description file at ${t}`,e),this.props.dispatcher.postError(e)}const s=this.state.license===VP.name?null:this.state.license,a=(this.state.licenses||[]).find((e=>e.name===s));if(a)try{const n=await vv(r);await async function(t,n,r){const i=e.join(t,"LICENSE"),o=function(e,t,n){let r=e;for(const e of["fullname","email","project","description","year"])r=qP(r,e,n[e]);return r}(n.body,0,r);await(0,y.writeFile)(i,o)}(t,a,{fullname:n?n.name:"",email:n?n.email:"",year:(new Date).getFullYear().toString(),description:"",project:this.state.name})}catch(e){log.error(`createRepository: unable to write LICENSE at ${t}`,e),this.props.dispatcher.postError(e)}try{const n=e.join(t,".gitattributes");await S(n)||await async function(t){const n=(0,e.join)(t,".gitattributes");await(0,y.writeFile)(n,"# Auto detect text files and perform LF normalization\n* text=auto\n")}(t)}catch(e){log.error(`createRepository: unable to write .gitattributes at ${t}`,e),this.props.dispatcher.postError(e)}const l=await od(r);if(null!==l){try{const e=l.workingDirectory.files;e.length>0&&await dv(r,"Initial commit",e)}catch(e){log.error(`createRepository: initial commit failed at ${t}`,e),this.props.dispatcher.postError(e)}this.setState({creating:!1}),this.updateDefaultDirectory(),this.props.dispatcher.closeFoldout(je.Repository),this.props.dispatcher.selectRepository(r),this.props.dispatcher.recordCreateRepository(),this.props.onDismissed()}else this.props.dispatcher.postError(new Error("Unable to create the new repository because there are too many new files in this directory"))};updateDefaultDirectory=()=>{this.props.initialPath||null===this.state.path||mh(this.state.path)};onCreateWithReadmeChange=e=>{this.setState({createWithReadme:e.currentTarget.checked})};renderSanitizedName(){const e=LP(this.state.name);return this.state.name===e?null:be.createElement(mC,{className:"warning-helper-text"},be.createElement(si,{symbol:ai}),"Will be created as ",e)}onGitIgnoreChange=e=>{const t=e.currentTarget.value;this.setState({gitIgnore:t})};onLicenseChange=e=>{const t=e.currentTarget.value;this.setState({license:t})};renderGitIgnores(){const e=this.state.gitIgnoreNames||[],t=[GP,...e];return be.createElement(mC,null,be.createElement(RE,{label:"Git ignore",value:this.state.gitIgnore,onChange:this.onGitIgnoreChange},t.map((e=>be.createElement("option",{key:e,value:e},e)))))}renderLicenses(){const e=this.state.licenses||[],t=[VP,...e.filter((e=>e.featured))],n=e.filter((e=>!e.featured));return be.createElement(mC,null,be.createElement(RE,{label:"许可证",value:this.state.license,onChange:this.onLicenseChange},t.map((e=>be.createElement("option",{key:e.name,value:e.name},e.name))),be.createElement("option",{disabled:!0},"────────────────────"),n.map((e=>be.createElement("option",{key:e.name,value:e.name},e.name)))))}renderInvalidPathError(){const e=this.state.isValidPath;return null===e||e?null:be.createElement(LE,null,"Directory could not be created at this path. You may not have permissions to create a directory here.")}renderGitRepositoryError(){const e=this.state.isRepository;return this.state.path&&0!==this.state.path.length&&e?be.createElement(mC,null,be.createElement(MP,{id:"existing-repository-path-error",trackedUserInput:this.state.path+this.state.name,ariaLiveMessage:"这个目录看起来是一个 Git 仓库。你想要 add this repository instead?"},"这个目录看起来是一个 Git 仓库。你想要"," ",be.createElement(CE,{onClick:this.onAddRepositoryClicked},"add this repository")," ","instead?")):null}renderReadmeOverwriteWarning(){return Ht()?!1===this.state.createWithReadme||!1===this.state.readMeExists?null:be.createElement(mC,null,be.createElement(jP,{id:"readme-overwrite-warning",trackedUserInput:this.state.createWithReadme,ariaLiveMessage:"This directory contains a README.md file already. Checking\n          this box will result in the existing file being overwritten."},"This directory contains a ",be.createElement(QE,null,"README.md")," file already. Checking this box will result in the existing file being overwritten.")):null}onAddRepositoryClicked=()=>{this.props.onDismissed();const{path:t,name:n}=this.state;null!==t&&this.props.dispatcher.showPopup({type:nl.AddRepository,path:e.join(t,LP(n))})};render(){const e=null===this.state.path||0===this.state.path.length||0===this.state.name.length||this.state.creating||this.state.isRepository,t=!!this.props.initialPath,n=null===this.state.path;return be.createElement(FE,{id:"create-repository",title:"新建存储库",loading:this.state.creating,onSubmit:this.createRepository,onDismissed:this.props.onDismissed},this.renderInvalidPathError(),be.createElement(_E,null,be.createElement(mC,null,be.createElement(dC,{value:this.state.name,label: "名称",placeholder:"存储库名称",onValueChanged:this.onNameChanged,ariaDescribedBy:"existing-repository-path-error"})),this.renderSanitizedName(),be.createElement(mC,null,be.createElement(dC,{value:this.state.description,label: "描述",onValueChanged:this.onDescriptionChanged})),be.createElement(mC,null,be.createElement(dC,{value:this.state.path??"",label:"本地路径",placeholder:"存储库路径",onValueChanged:this.onPathChanged,disabled:t||n,ariaDescribedBy:"existing-repository-path-error"}),be.createElement(ii,{onClick:this.showFilePicker,disabled:t||n},"选择…")),this.renderGitRepositoryError(),be.createElement(mC,null,be.createElement(GC,{label:"添加README文件",value:this.state.createWithReadme?jC.On:jC.Off,onChange:this.onCreateWithReadmeChange,ariaDescribedBy:"readme-overwrite-warning"})),this.renderReadmeOverwriteWarning(),this.renderGitIgnores(),this.renderLicenses()),be.createElement(HE,null,be.createElement(UE,{okButtonText:"新建存储库",okButtonDisabled:e||n})))}onWindowFocus=()=>{this.updateReadMeExists(this.state.path,this.state.name)}}async function YP(e,t,n){const r=Vn.fromAccount(e);return!!await r.fetchRepository(t,n)}async function XP(e,t,n=YP){const r=[...t,tn.anonymous()],i=tr(e);if(i){const e=r.find((e=>{const t=Xn(e.endpoint),n=o.parse(t);return i.hostname===n.hostname}))||null;if(e)return e}const s=nr(e);if(s){const{owner:e,name:t,hostname:i}=s,a=Array.from(r).sort(((e,t)=>e.endpoint===Qn()?e.token.length?-1:1:t.endpoint===Qn()?t.token.length?1:-1:0));for(const r of a)if((null==i||o.parse(Xn(r.endpoint)).hostname===i)&&await n(r,e,t))return r}return null}class QP extends be.Component{render(){return be.createElement(_E,{className:"clone-generic-repository-content"},be.createElement(mC,null,be.createElement(dC,{placeholder:"URL 或用户名/存储库名",value:this.props.url,onValueChanged:this.onUrlChanged,autoFocus:!0,label:be.createElement("span",null,"存储库URL或GitHub用户名和存储库",be.createElement("br",null),"(",be.createElement(QE,null,"hubot/cool-repo"),")")})),be.createElement(mC,null,be.createElement(dC,{value:this.props.path,label:"本地路径",placeholder:"存储库路径",onValueChanged:this.props.onPathChanged}),be.createElement(ii,{onClick:this.props.onChooseDirectory},"选择…")))}onUrlChanged=e=>{this.props.onUrlChanged(e)}}var ZP=n(2373),JP=n.n(ZP),eI=n(8228),tI=n.n(eI);const nI="your-repositories";function rI(e){return e.private?Vi:e.fork?no:eo}const iI=e=>e.map((e=>({id:e.html_url,text:[`${e.owner.login}/${e.name}`],url:e.clone_url,name:e.name,icon:rI(e),archived:e.archived}))).sort(((e,t)=>rr(e.name,t.name)));function oI(e,t){if(null!==t)for(const n of e)for(const e of n.items)if(e.url===t.clone_url)return e;return null}function sI(e,t){return e.find((e=>e.clone_url===t.url))||null}class aI extends be.PureComponent{getRepositoryGroups=mr(((e,t)=>null===e?[]:function(e,t){const n=tI()(e,(e=>or(e.owner.login,t)?nI:e.owner.login));return JP()(n).map((([e,t])=>({identifier:e,items:iI(t)}))).sort(((e,t)=>e.identifier===nI?-1:t.identifier===nI?1:rr(e.identifier,t.identifier)))}(e,t)));getSelectedListItem=mr(oI);componentDidMount(){null===this.props.repositories&&this.refreshRepositories()}componentDidUpdate(e){e.repositories!==this.props.repositories&&null===this.props.repositories&&this.refreshRepositories()}refreshRepositories=()=>{this.props.onRefreshRepositories(this.props.account)};render(){const{repositories:e,account:t,selectedItem:n}=this.props,r=this.getRepositoryGroups(e,t.login),i=this.getSelectedListItem(r,n),o=Wt()?BC:bC,s={className:"clone-github-repo",rowHeight:31,selectedItem:i,renderItem:this.renderItem,renderGroupHeader:this.renderGroupHeader,onSelectionChanged:this.onSelectionChanged,invalidationProps:r,groups:r,filterText:this.props.filterText,onFilterTextChanged:this.props.onFilterTextChanged,renderNoItems:this.renderNoItems,renderPostFilter:this.renderPostFilter,onItemClick:this.props.onItemClicked?this.onItemClick:void 0,placeholderText:"筛选存储库",getGroupAriaLabel:e=>{const t=r[e].identifier;return t===nI?this.getYourRepositoriesLabel():t}};return be.createElement(o,{...s})}onItemClick=(e,t)=>{const{onItemClicked:n,repositories:r}=this.props;if(void 0===n||null===r)return;const i=sI(r,e);null!==i&&n(i,t)};onSelectionChanged=e=>{null===e||null===this.props.repositories?this.props.onSelectionChanged(null):this.props.onSelectionChanged(sI(this.props.repositories,e))};getYourRepositoriesLabel=()=>"Your Repositories";renderGroupHeader=e=>{let t=e;return e===nI&&(t=this.getYourRepositoriesLabel()),be.createElement("div",{className:"clone-repository-list-content clone-repository-list-group-header"},t)};renderItem=(e,t)=>be.createElement("div",{className:"clone-repository-list-item"},be.createElement(si,{className:"icon",symbol:e.icon}),be.createElement(Xo,{className:"name",tooltip:e.text[0],onlyWhenOverflowed:!0,tagName:"div"},be.createElement(Yo,{text:e.text[0],highlight:t.title})),e.archived&&be.createElement("div",{className:"archived"},"Archived"));renderPostFilter=()=>{const e="刷新存储库列表";return be.createElement(ii,{disabled:this.props.loading,onClick:this.refreshRepositories,ariaLabel:e,tooltip:e},be.createElement(si,{symbol:Ko,className:this.props.loading?"spin":void 0}))};renderNoItems=()=>{const{loading:e,repositories:t}=this.props,n=this.props.account.endpoint===Qn()?"GitHub.com":Xn(this.props.account.endpoint);return!e||null!==t&&0!==t.length?0!==this.props.filterText.length?be.createElement("div",{className:"no-items no-results-found"},be.createElement("div",null,"没有匹配的存储库"," ",be.createElement(QE,null,this.props.filterText))):be.createElement("div",{className:"no-items empty-repository-list"},be.createElement("div",null,"没有仓库"," ",be.createElement(QE,null,this.props.account.login)," 在 ",n,"."," ",be.createElement(CE,{onClick:this.refreshRepositories},"刷新此列表")," ","如果您最近创建了存储库。")):be.createElement("div",{className:"no-items loading"},`从 ${n} 加载存储库…`)}}class lI extends be.PureComponent{render(){return be.createElement(_E,{className:"clone-github-repository-content"},be.createElement(mC,null,be.createElement(aI,{account:this.props.account,selectedItem:this.props.selectedItem,onSelectionChanged:this.props.onSelectionChanged,loading:this.props.loading,repositories:this.props.repositories,filterText:this.props.filterText,onFilterTextChanged:this.props.onFilterTextChanged,onRefreshRepositories:this.props.onRefreshRepositories,onItemClicked:this.props.onItemClicked})),be.createElement(mC,{className:"local-path-field"},be.createElement(dC,{value:this.props.path,label:"本地路径",placeholder:"存储库路径",onValueChanged:this.props.onPathChanged}),be.createElement(ii,{onClick:this.props.onChooseDirectory},"选择…")))}}class cI extends be.Component{checkIsTopMostDialog=OE((()=>{this.validatePath(),window.addEventListener("focus",this.onWindowFocus)}),(()=>{window.removeEventListener("focus",this.onWindowFocus)}));constructor(e){super(e);const t={error:null,lastParsedIdentifier:null,path:null,url:this.props.initialURL||""};this.state={initialPath:null,loading:!1,dotComTabState:{kind:"dotComTabState",filterText:"",selectedItem:null,...t},enterpriseTabState:{kind:"enterpriseTabState",filterText:"",selectedItem:null,...t},urlTabState:{kind:"urlTabState",...t}},this.initializePath()}componentDidUpdate(e){e.selectedTab!==this.props.selectedTab&&this.validatePath(),e.initialURL!==this.props.initialURL&&this.updateUrl(this.props.initialURL||""),this.checkIsTopMostDialog(this.props.isTopMost)}componentDidMount(){const e=this.props.initialURL;e&&this.updateUrl(e),this.checkIsTopMostDialog(this.props.isTopMost)}componentWillUnmount(){this.checkIsTopMostDialog(!1)}initializePath=async()=>{const e=await dh(),t={...this.state.dotComTabState,path:e},n={...this.state.enterpriseTabState,path:e},r={...this.state.urlTabState,path:e};this.setState({initialPath:e,dotComTabState:t,enterpriseTabState:n,urlTabState:r});const i=this.getSelectedTabState();this.updateUrl(i.url)};render(){const{error:e}=this.getSelectedTabState();return be.createElement(FE,{className:"clone-repository",title:"克隆仓库",onSubmit:this.clone,onDismissed:this.props.onDismissed,loading:this.state.loading},be.createElement(KE,{onTabClicked:this.onTabClicked,selectedIndex:this.props.selectedTab},be.createElement("span",null,"GitHub.com"),be.createElement("span",null,"GitHub Enterprise"),be.createElement("span",null,"URL")),e?be.createElement(LE,null,e.message):null,this.renderActiveTab(),this.renderFooter())}checkIfCloningDisabled=()=>{const e=this.getSelectedTabState(),{error:t,url:n,path:r}=e,{loading:i}=this.state;return 0===n.length||null==r||0===r.length||i||null!==t};renderFooter(){const e=this.props.selectedTab;if(e!==Pr.Generic&&!this.getAccountForTab(e))return null;const t=this.checkIfCloningDisabled();return be.createElement(HE,null,be.createElement(UE,{okButtonText: "克隆",okButtonDisabled:t}))}onTabClicked=e=>{this.props.onTabSelected(e)};onPathChanged=e=>{this.setSelectedTabState({path:e},this.validatePath)};renderActiveTab(){const e=this.props.selectedTab;switch(e){case Pr.Generic:const t=this.state.urlTabState;return be.createElement(QP,{path:t.path??"",url:t.url,onPathChanged:this.onPathChanged,onUrlChanged:this.updateUrl,onChooseDirectory:this.onChooseDirectory});case Pr.DotCom:case Pr.Enterprise:{const t=this.getAccountForTab(e);if(t){const n=this.props.apiRepositories.get(t),r=void 0===n?null:n.repositories,i=void 0!==n&&n.loading,o=this.getGitHubTabState(e);return be.createElement(lI,{path:o.path??"",account:t,selectedItem:o.selectedItem,onSelectionChanged:this.onSelectionChanged,onPathChanged:this.onPathChanged,onChooseDirectory:this.onChooseDirectory,repositories:r,loading:i,onRefreshRepositories:this.props.onRefreshRepositories,filterText:o.filterText,onFilterTextChanged:this.onFilterTextChanged,onItemClicked:this.onItemClicked})}return be.createElement(_E,null,this.renderSignIn(e))}default:return et(0,`Unknown tab: ${e}`)}}getAccountForTab(e){switch(e){case Pr.DotCom:return this.props.dotComAccount;case Pr.Enterprise:return this.props.enterpriseAccount;default:return null}}getGitHubTabState(e){return e===Pr.DotCom?this.state.dotComTabState:e===Pr.Enterprise?this.state.enterpriseTabState:et(0,`Unknown tab: ${e}`)}getTabState(e){return e===Pr.DotCom?this.state.dotComTabState:e===Pr.Enterprise?this.state.enterpriseTabState:e===Pr.Generic?this.state.urlTabState:et(0,`Unknown tab: ${e}`)}getSelectedTabState(){return this.getTabState(this.props.selectedTab)}setSelectedTabState(e,t){this.setTabState(e,this.props.selectedTab,t)}setTabState(e,t,n){if(t===Pr.DotCom)this.setState((t=>({dotComTabState:{...t.dotComTabState,...e}})),n);else if(t===Pr.Enterprise)this.setState((t=>({enterpriseTabState:{...t.enterpriseTabState,...e}})),n);else{if(t!==Pr.Generic)return et(0,`Unknown tab: ${t}`);this.setState((t=>({urlTabState:{...t.urlTabState,...e}})),n)}}setGitHubTabState(e,t){if(t===Pr.DotCom)this.setState((t=>({dotComTabState:sa(t.dotComTabState,e)})));else{if(t!==Pr.Enterprise)return et(0,`Unknown tab: ${t}`);this.setState((t=>({enterpriseTabState:sa(t.enterpriseTabState,e)})))}}renderSignIn(e){const t="登录";switch(e){case Pr.DotCom:return be.createElement(JE,{actionTitle:t,onAction:this.signInDotCom},be.createElement("div",null,"登录您的GitHub.com帐户访问您的存储库。"));case Pr.Enterprise:return be.createElement(JE,{actionTitle:t,onAction:this.signInEnterprise},be.createElement("div",null,"如果您有GitHub Enterprise或AE帐户，请登录该帐户以访问您的存储库。"));case Pr.Generic:return null;default:return et(0,`Unknown sign in tab: ${e}`)}}signInDotCom=()=>{this.props.dispatcher.showDotComSignInDialog()};signInEnterprise=()=>{this.props.dispatcher.showEnterpriseSignInDialog()};onFilterTextChanged=e=>{this.props.selectedTab!==Pr.Generic&&this.setGitHubTabState({filterText:e},this.props.selectedTab)};onSelectionChanged=e=>{this.props.selectedTab!==Pr.Generic&&(this.setGitHubTabState({selectedItem:e},this.props.selectedTab),this.updateUrl(null===e?"":e.clone_url))};validatePath=async()=>{const e=this.getSelectedTabState(),{path:t,url:n,error:r}=e,{initialPath:i}=this.state;if(i===t&&""===n)r&&this.setSelectedTabState({error:null});else{const e=await this.validateEmptyFolder(t);this.getSelectedTabState().path===t&&this.setSelectedTabState({error:e,path:t})}};onChooseDirectory=async()=>this.onChooseWithSaveDialog();onChooseWithOpenDialog=async()=>{const t=await ce({properties:["createDirectory","openDirectory"]});if(null===t)return;const n=this.getSelectedTabState().lastParsedIdentifier,r=n?e.join(t,n.name):t;return this.setSelectedTabState({path:r,error:null},this.validatePath),r};onChooseWithSaveDialog=async()=>{const e=this.getSelectedTabState(),t=await le({buttonLabel:"Select",nameFieldLabel:"克隆到:",showsTagField:!1,defaultPath:e.path??"",properties:["createDirectory"]});if(null!=t)return this.setSelectedTabState({path:t,error:null},this.validatePath),t};updateUrl=async t=>{const n=nr(t),r=this.getSelectedTabState(),i=r.lastParsedIdentifier;if(null===r.path)return void this.setSelectedTabState({url:t},this.validatePath);let o;const s=r.path;o=i?n?e.join(e.dirname(s),n.name):e.dirname(s):n?e.join(s,n.name):s,this.setSelectedTabState({url:t,lastParsedIdentifier:n,path:o},this.validatePath)};async validateEmptyFolder(e){if(null===e)return new Error("Unable to read path on disk. Please check the path and try again.");try{return 0===(await(0,y.readdir)(e)).length?null:new Error("This folder contains files. Git can only clone to empty folders.")}catch(e){return"ENOTDIR"===e.code?new Error("There is already a file with this name. Git can only clone to a folder."):"ENOENT"===e.code?null:(log.error("CloneRepository: Path validation failed. Error: "+e.message),new Error("Unable to read path on disk. Please check the path and try again."))}}async resolveCloneInfo(){const{url:e,lastParsedIdentifier:t}=this.getSelectedTabState(),n=new Array;this.props.dotComAccount&&n.push(this.props.dotComAccount),this.props.enterpriseAccount&&n.push(this.props.enterpriseAccount);const r=await XP(e,n);if(null!==t&&null!==r){const n=Vn.fromAccount(r),{owner:i,name:o}=t,s=tr(e)?.protocol;return n.fetchRepositoryCloneInfo(i,o,s).catch((t=>(log.error(`Failed to look up repository clone info for '${e}'`,t),{url:e})))}return{url:e}}onItemClicked=(e,t)=>{"keyboard"===t.kind&&"Enter"===t.event.key&&!1===this.checkIfCloningDisabled()&&this.clone()};clone=async()=>{this.setState({loading:!0});const e=await this.resolveCloneInfo(),{path:t}=this.getSelectedTabState();if(null==t){const e=new Error("Directory could not be created at this path.");return this.setState({loading:!1}),void this.setSelectedTabState({error:e})}if(!e){const e=new Error("We couldn't find that repository. Check that you are logged in, the network is accessible, and the URL or repository alias are spelled correctly.");return this.setState({loading:!1}),void this.setSelectedTabState({error:e})}const{url:n,defaultBranch:r}=e;this.props.dispatcher.closeFoldout(je.Repository);try{this.cloneImpl(n.trim(),t,r)}catch(e){log.error(`CloneRepository: clone failed to complete to ${t}`,e),this.setState({loading:!1}),this.setSelectedTabState({error:e})}};cloneImpl(t,n,r){this.props.dispatcher.clone(t,n,{defaultBranch:r}),this.props.onDismissed(),mh(e.resolve(n,".."))}onWindowFocus=()=>{this.validatePath()}}class uI extends be.Component{onClick=()=>{this.props.onClick(this.props.value)};onDoubleClick=()=>{this.props.onDoubleClick(this.props.value)};render(){const e=this.props.description?be.createElement("p",null,this.props.description):void 0,t=this.props.isSelected,n=t?"selected":void 0;return be.createElement("li",{className:n,onClick:this.onClick,onDoubleClick:this.onDoubleClick,role:"radio",id:this.props.id,"aria-checked":t?"true":"false"},be.createElement("div",{className:"title"},this.props.title),e)}}class hI extends be.Component{listRef=null;formRef=null;constructor(e){super(e),this.state={}}updateListId(e){this.state.listId&&(Xr(this.state.listId),this.setState({listId:void 0})),e&&this.setState({listId:Yr(`VerticalSegmentedControl_${e}`)})}componentWillMount(){this.updateListId(this.props.label)}componentWillUnmount(){this.state.listId&&Xr(this.state.listId)}componentWillReceiveProps(e){this.props.label!==e.label&&this.updateListId(e.label)}submitForm(){const e=this.formRef;e&&e.dispatchEvent(new Event("submit"))}onItemClick=e=>{e!==this.props.selectedKey&&this.props.onSelectionChanged(e)};onItemDoubleClick=e=>{this.onItemClick(e),this.submitForm()};getListItemId(e){return`${this.state.listId}_Item_${e}`}renderItem(e,t){return be.createElement(uI,{id:this.getListItemId(t),key:e.key,title:e.title,description:e.description,isSelected:e.key===this.props.selectedKey,value:e.key,onClick:this.onItemClick,onDoubleClick:this.onItemDoubleClick})}onKeyDown=e=>{const t=this.findSelectedIndex(this.props.items);"ArrowUp"===e.key?(t>0&&this.props.onSelectionChanged(this.props.items[t-1].key),e.preventDefault()):"ArrowDown"===e.key?(t<this.props.items.length-1&&this.props.onSelectionChanged(this.props.items[t+1].key),e.preventDefault()):"Enter"===e.key&&this.submitForm()};onListRef=e=>{this.listRef=e};onFieldsetRef=e=>{this.formRef=e?e.form:null};onLegendClick=()=>{this.listRef&&this.listRef.focus()};render(){if(0===this.props.items.length)return null;const e=this.props.label?be.createElement("legend",{onClick:this.onLegendClick},this.props.label):void 0,t=this.findSelectedIndex(this.props.items),n=this.getListItemId(t);return be.createElement("fieldset",{className:"vertical-segmented-control",ref:this.onFieldsetRef},e,be.createElement("ul",{ref:this.onListRef,id:this.state.listId,className:"vertical-segmented-control",tabIndex:0,onKeyDown:this.onKeyDown,role:"radiogroup","aria-activedescendant":n},this.props.items.map(((e,t)=>this.renderItem(e,t)))))}findSelectedIndex(e){return e.findIndex((e=>e.key===this.props.selectedKey))}}function pI(e,t){return e.tip.kind===Ar.Detached?el.Head:t===el.UpstreamDefaultBranch&&null!==e.upstreamDefaultBranch||t===el.DefaultBranch&&null!==e.defaultBranch||t===el.CurrentBranch&&e.tip.kind===Ar.Valid||t===el.Head?t:e.upstreamDefaultBranch?el.UpstreamDefaultBranch:e.defaultBranch?el.DefaultBranch:e.tip.kind===Ar.Valid?el.CurrentBranch:el.Head}class dI extends be.Component{branchRulesDebounceId=null;ERRORS_ID="branch-name-errors";constructor(e){super(e);const t=pI(e,el.UpstreamDefaultBranch);this.state={currentError:null,branchName:e.initialName,startPoint:t,isCreatingBranch:!1,tipAtCreateStart:e.tip,defaultBranchAtCreateStart:fI(t,e)}}componentWillReceiveProps(e){if(this.setState({startPoint:pI(e,this.state.startPoint)}),!this.state.isCreatingBranch){const t=pI(e,el.UpstreamDefaultBranch);this.setState({tipAtCreateStart:e.tip,defaultBranchAtCreateStart:fI(t,e)})}e.initialName.length>0&&this.checkBranchRules(e.initialName)}componentWillUnmount(){null!==this.branchRulesDebounceId&&window.clearTimeout(this.branchRulesDebounceId)}renderBranchSelection(){const e=this.state.isCreatingBranch?this.state.tipAtCreateStart:this.props.tip,t=e.kind,n=this.props.targetCommit;if(void 0!==n)return be.createElement("p",null,"您的新分支将基于提交 '",n.summary,"' (",n.sha.substring(0,7),") 从您的存储库。");if(e.kind===Ar.Detached)return be.createElement("p",null,"您当前没有签出任何分支（您的头引用已分离). 因此，您的新分支将基于您当前签出的提交 (",e.currentSha.substring(0,7),").");if(e.kind===Ar.Unborn)return be.createElement("p",null,"当前分支未绑定（不包含任何提交）。创建新分支将重命名当前分支。");if(e.kind===Ar.Valid){if(null!==this.props.upstreamGitHubRepository&&null!==this.props.upstreamDefaultBranch)return this.renderForkBranchSelection(e.branch.name,this.props.upstreamDefaultBranch,this.props.upstreamGitHubRepository.fullName);const t=this.state.isCreatingBranch?this.props.defaultBranch:this.state.defaultBranchAtCreateStart;return this.renderRegularBranchSelection(e.branch.name,t)}return et(0,`Unknown tip kind ${t}`)}renderBranchNameErrors(){const{currentError:e}=this.state;return e?e.isWarning?be.createElement(mC,null,be.createElement(jP,{id:this.ERRORS_ID,trackedUserInput:this.state.branchName},e.error.message)):be.createElement(mC,null,be.createElement(MP,{id:this.ERRORS_ID,trackedUserInput:this.state.branchName},e.error.message)):null}onBaseBranchChanged=e=>{this.setState({startPoint:e})};render(){const e=this.state.branchName.length<=0||!!this.state.currentError&&!this.state.currentError.isWarning||/^\s*$/.test(this.state.branchName),t=!!this.state.currentError;return be.createElement(FE,{id:"create-branch",title:this.getHeaderText(),onSubmit:this.createBranch,onDismissed:this.props.onDismissed,loading:this.state.isCreatingBranch,disabled:this.state.isCreatingBranch},be.createElement(_E,null,be.createElement(xA,{label: "名称",ariaDescribedBy:t?this.ERRORS_ID:void 0,initialValue:this.props.initialName,onValueChange:this.onBranchNameChange}),this.renderBranchNameErrors(),function(e,t){const n=t.findIndex((t=>t.nameWithoutRemote===e&&t.type===Ja.Remote))>-1;return!1===n?null:be.createElement(mC,{className:"warning-helper-text"},be.createElement(si,{symbol:ai}),be.createElement("p",null,"分支名为 ",be.createElement(QE,null,e)," 已存在于远程"))}(this.state.branchName,this.props.allBranches),this.renderBranchSelection()),be.createElement(HE,null,be.createElement(UE,{okButtonText:this.getOkButtonText(),okButtonDisabled:e})))}getHeaderText=()=>void 0!==this.props.headerText?this.props.headerText:"新建分支";getOkButtonText=()=>void 0!==this.props.okButtonText?this.props.okButtonText:"确定";onBranchNameChange=e=>{this.updateBranchName(e)};async updateBranchName(e){this.setState({branchName:e});const t=this.props.allBranches.findIndex((t=>t.name===e))>-1,n=t?{error:new Error(`分支名为 ${e} already exists.`),isWarning:!1}:null;n||(null!==this.branchRulesDebounceId&&window.clearTimeout(this.branchRulesDebounceId),this.branchRulesDebounceId=window.setTimeout(this.checkBranchRules,500,e)),this.setState({branchName:e,currentError:n})}checkBranchRules=async e=>{if(this.state.branchName!==e||0===this.props.accounts.length||!_r(this.props.repository)||""===e||null!==this.state.currentError)return;const t=Gl(this.props.accounts,this.props.repository);if(null===t||!Im(t,this.props.repository))return;const n=Vn.fromAccount(t),r=await n.fetchRepoRulesForBranch(this.props.repository.gitHubRepository.owner.login,this.props.repository.gitHubRepository.name,e);if(this.state.branchName!==e)return;const i=new Set(r.filter((e=>e.type===Wn.Creation||e.type===Wn.BranchNamePattern)).map((e=>e.ruleset_id)));if(0===i.size)return;const{branchNamePatterns:o,creationRestricted:s}=await _m(r,this.props.cachedRepoRulesets,this.props.repository);if(this.state.branchName!==e)return;const{status:a}=o.getFailedRules(e);if(!0!==s&&"pass"===a)return;let l=!1;for(const e of i)if("always"!==this.props.cachedRepoRulesets.get(e)?.current_user_can_bypass){l=!0;break}l?this.setState({currentError:{error:new Error(`Branch name '${e}' is restricted by repo rules.`),isWarning:!1}}):this.setState({currentError:{error:new Error(`Branch name '${e}' is restricted by repo rules, but you can bypass them. Proceed with caution!`),isWarning:!0}})};createBranch=async()=>{const e=this.state.branchName;let t=null,n=!1;const{defaultBranch:r,upstreamDefaultBranch:i,repository:o}=this.props;if(void 0!==this.props.targetCommit)t=this.props.targetCommit.sha;else if(this.state.startPoint===el.DefaultBranch){if(!r)return void this.setState({currentError:{error:new Error("Could not determine the default branch."),isWarning:!1}});t=r.name}else if(this.state.startPoint===el.UpstreamDefaultBranch){if(!i)return void this.setState({currentError:{error:new Error("Could not determine the default branch."),isWarning:!1}});t=i.name,n=!0}if(e.length>0){if(this.setState({isCreatingBranch:!0}),void 0!==this.props.createBranch)return void this.props.createBranch(e,t,n);const r=bE("create branch",o),i=await this.props.dispatcher.createBranch(o,e,t,n);r.done(),this.props.onDismissed(),void 0!==i&&void 0!==this.props.targetCommit&&void 0!==this.props.onBranchCreatedFromCommit&&this.props.onBranchCreatedFromCommit()}};renderRegularBranchSelection(e,t){if(null===t||t.name===e)return be.createElement("div",null,"新分支将基于当前签出的分支 (",be.createElement(QE,null,e),")",this.renderForkLinkSuffix(),"."," ",t?.name===e&&be.createElement(be.Fragment,null,be.createElement(QE,null,e)," 是仓库的 ",mI,""));{const n=[{title:t.name,description:"你的代码库中的默认分支。选择它来开始一些不依赖于当前分支的新工作",key:el.DefaultBranch},{title:e,description:"当前检出的分支。如果你需要在这个分支的基础上继续工作，请选择它",key:el.CurrentBranch}],r=this.state.startPoint===el.DefaultBranch?this.state.startPoint:el.CurrentBranch;return be.createElement("div",null,this.renderOptions(n,r),this.renderForkLink())}}renderForkBranchSelection(e,t,n){if(e===t.nameWithoutRemote)return be.createElement("div",null,"Your new branch will be based on"," ",be.createElement("strong",null,n),"'s ",mI," (",be.createElement(QE,null,t.nameWithoutRemote),")",this.renderForkLinkSuffix(),".");{const n=[{title:t.name,description:"上游代码库的默认分支。选择它来开始一些不依赖于当前分支的新工作",key:el.UpstreamDefaultBranch},{title:e,description:"当前检出的分支。如果你需要在这个分支的基础上继续工作，请选择它",key:el.CurrentBranch}],r=this.state.startPoint===el.UpstreamDefaultBranch?this.state.startPoint:el.CurrentBranch;return be.createElement("div",null,this.renderOptions(n,r),this.renderForkLink())}}renderForkLink=()=>Nr(this.props.repository)?be.createElement("div",{className:"secondary-text"},"Your default branch source is determined by your"," ",be.createElement(CE,{onClick:this.onForkSettingsClick},"fork behavior settings"),"."):void 0;renderForkLinkSuffix=()=>Nr(this.props.repository)?be.createElement("span",null," as determined by your"," ",be.createElement(CE,{onClick:this.onForkSettingsClick},"fork behavior settings")):void 0;renderOptions=(e,t)=>be.createElement(mC,null,be.createElement(hI,{label:"基于以下创建分支…",items:e,selectedKey:t,onSelectionChanged:this.onBaseBranchChanged}));onForkSettingsClick=()=>{this.props.dispatcher.showPopup({type:nl.RepositorySettings,repository:this.props.repository,initialSelectedTab:pk.ForkSettings})}}const mI=be.createElement(CE,{uri:"https://help.github.com/articles/setting-the-default-branch/"},"默认分支");function fI(e,t){return e===el.UpstreamDefaultBranch?t.upstreamDefaultBranch:e===el.DefaultBranch?t.defaultBranch:null}class gI extends be.Component{dialogRef=be.createRef();constructor(e){super(e),this.state={endpoint:"",username:"",password:"",otpToken:""}}componentDidUpdate(e){null!==e.signInState&&null!==this.props.signInState&&e.signInState.kind!==this.props.signInState.kind&&this.dialogRef.current?.focusFirstSuitableChild()}componentWillReceiveProps(e){e.signInState!==this.props.signInState&&e.signInState&&e.signInState.kind===bw.Success&&this.onDismissed()}onSubmit=()=>{const e=this.props.signInState;if(!e)return;const t=e.kind;switch(e.kind){case bw.EndpointEntry:this.props.dispatcher.setSignInEndpoint(this.state.endpoint);break;case bw.Authentication:e.supportsBasicAuth?this.props.dispatcher.setSignInCredentials(this.state.username,this.state.password):this.props.dispatcher.requestBrowserAuthentication();break;case bw.TwoFactorAuthentication:this.props.dispatcher.setSignInOTP(this.state.otpToken);break;case bw.Success:this.onDismissed();break;default:et(0,`Unknown sign in step ${t}`)}};onEndpointChanged=e=>{this.setState({endpoint:e})};onUsernameChanged=e=>{this.setState({username:e})};onPasswordChanged=e=>{this.setState({password:e})};onOTPTokenChanged=e=>{this.setState({otpToken:e})};onSignInWithBrowser=()=>{this.props.dispatcher.requestBrowserAuthentication()};renderFooter(){const e=this.props.signInState;if(!e||e.kind===bw.Success)return null;let t,n=!1;const r=e.kind;switch(e.kind){case bw.EndpointEntry:n=0===this.state.endpoint.length,t="确定";break;case bw.TwoFactorAuthentication:n=!/\S+/.test(this.state.otpToken),t="登录";break;case bw.Authentication:if(e.supportsBasicAuth){const e=this.state.username.length>0,r=this.state.password.length>0;n=!e||!r,t="Sign in"}else t="打开浏览器";break;default:return et(0,`Unknown sign in step ${r}`)}return be.createElement(HE,null,be.createElement(UE,{okButtonText:t,okButtonDisabled:n,onCancelButtonClick:this.onDismissed}))}renderEndpointEntryStep(e){return be.createElement(_E,null,be.createElement(mC,null,be.createElement(dC,{label:"企业版地址",value:this.state.endpoint,onValueChanged:this.onEndpointChanged,placeholder:"https://github.example.com"})))}renderAuthenticationStep(e){if(!e.supportsBasicAuth)return e.endpoint===Qn()?be.createElement(_E,null,be.createElement("p",null,"为了提高账户安全性，您必须使用浏览器登录"),be.createElement("p",null,"登录后，浏览器将会重定向到GitHub Desktop。如果您的浏览器请求您允许启动GitHub Desktop，请点击允许。")):be.createElement(_E,null,be.createElement("p",null,"您必须使用浏览器登录GitHub Enterprise"));const t=e.loading;return be.createElement(_E,null,be.createElement(mC,{className:"sign-in-with-browser"},be.createElement(ii,{className:"button-with-icon button-component-primary",onClick:this.onSignInWithBrowser,disabled:t},"Sign in using your browser",be.createElement(si,{symbol:ji}))),be.createElement(OA,{title:"or"}),be.createElement(mC,null,be.createElement(dC,{label:"用户名或邮箱地址",value:this.state.username,onValueChanged:this.onUsernameChanged})),be.createElement(mC,null,be.createElement(MA,{label:"密码",value:this.state.password,onValueChanged:this.onPasswordChanged})),be.createElement(mC,null,be.createElement(CE,{className:"forgot-password-link-sign-in",uri:e.forgotPasswordUrl},"Forgot password?")))}renderTwoFactorAuthenticationStep(e){return be.createElement(_E,null,be.createElement("p",null,ln(e.type)),be.createElement(mC,null,be.createElement(dC,{label:"身份验证码",value:this.state.otpToken,onValueChanged:this.onOTPTokenChanged,autoFocus:!0})))}renderStep(){const e=this.props.signInState;if(!e)return null;const t=e.kind;switch(e.kind){case bw.EndpointEntry:return this.renderEndpointEntryStep(e);case bw.Authentication:return this.renderAuthenticationStep(e);case bw.TwoFactorAuthentication:return this.renderTwoFactorAuthenticationStep(e);case bw.Success:return null;default:return et(0,`Unknown sign in step ${t}`)}}render(){const e=this.props.signInState;if(!e||e.kind===bw.Success)return null;const t=e.loading,n=e.error?be.createElement(LE,null,e.error.message):null,r=this.props.signInState&&this.props.signInState.kind===bw.Authentication&&!this.props.signInState.supportsBasicAuth?"使用浏览器登录":"登录";return be.createElement(FE,{id:"sign-in",title:r,disabled:t,onDismissed:this.onDismissed,onSubmit:this.onSubmit,loading:e.loading,ref:this.dialogRef},n,this.renderStep(),this.renderFooter())}onDismissed=()=>{this.props.dispatcher.resetSignInState(),this.props.onDismissed()}}class yI extends be.Component{constructor(e){super(e)}onSubmit=()=>{this.props.onOpenShell(this.props.path),this.props.onDismissed()};onExternalLink=e=>{rt.openExternal("https://help.github.com/articles/set-up-git/#setting-up-git")};render(){return be.createElement(FE,{id:"install-git",type:"warning",title:"找不到 Git",onSubmit:this.onSubmit,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement("p",null,"We were unable to locate Git on your system. This means you won't be able to execute any Git commands in the"," ","Terminal window","."),be.createElement("p",null,"To help you get Git installed and configured for your operating system, we have some external resources available.")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Open Without Git",cancelButtonText: "安装 Git",onCancelButtonClick:this.onExternalLink})))}}class bI extends be.Component{constructor(e){super(e)}onExternalLink=()=>{rt.openExternal(kl)};onShowPreferencesDialog=e=>{e.preventDefault(),this.props.onDismissed(),this.props.showPreferencesDialog()};renderFooter(){const{viewPreferences:e,suggestDefaultEditor:t}=this.props;return e?be.createElement(HE,null,be.createElement(UE,{okButtonText:"关闭",cancelButtonText:"Open Preferences",onCancelButtonClick:this.onShowPreferencesDialog})):t?be.createElement(HE,null,be.createElement(UE,{okButtonText:"关闭",cancelButtonText:"Download Visual Studio Code",onCancelButtonClick:this.onExternalLink})):be.createElement(WE,null)}render(){return be.createElement(FE,{id:"external-editor-error",type:"error",title:"无法打开外部编辑器",onSubmit:this.props.onDismissed,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement("p",null,this.props.message)),this.renderFooter())}}const wI=St(__dirname,"static/logo-64x64@2x.png");class vI extends be.Component{updateStoreEventHandle=null;checkIsTopMostDialog=OE((()=>{window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}),(()=>{window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}));constructor(e){super(e),this.state={updateState:Yt.state,altKeyPressed:!1}}onUpdateStateChanged=e=>{this.setState({updateState:e})};componentDidMount(){this.updateStoreEventHandle=Yt.onDidChange(this.onUpdateStateChanged),this.setState({updateState:Yt.state}),this.checkIsTopMostDialog(this.props.isTopMost)}componentDidUpdate(){this.checkIsTopMostDialog(this.props.isTopMost)}componentWillUnmount(){this.updateStoreEventHandle&&(this.updateStoreEventHandle.dispose(),this.updateStoreEventHandle=null),this.checkIsTopMostDialog(!1)}onKeyDown=e=>{"Alt"===e.key&&this.setState({altKeyPressed:!0})};onKeyUp=e=>{"Alt"===e.key&&this.setState({altKeyPressed:!1})};onQuitAndInstall=()=>{Yt.quitAndInstallUpdate()};renderUpdateButton(){const e=this.state.updateState.status;switch(e){case Kt.UpdateReady:return be.createElement(mC,null,be.createElement(ii,{onClick:this.onQuitAndInstall},"退出并安装更新"));case Kt.UpdateNotAvailable:case Kt.CheckingForUpdates:case Kt.UpdateAvailable:case Kt.UpdateNotChecked:const t=![Kt.UpdateNotChecked,Kt.UpdateNotAvailable].includes(e)||Er(),n=this.state.altKeyPressed?this.props.onCheckForNonStaggeredUpdates:this.props.onCheckForUpdates,r=this.state.altKeyPressed?"Ensure Latest Version":"检查更新",i=this.state.altKeyPressed?"GitHub Desktop may release updates to our user base gradually to ensure we catch any problems early. This lets you bypass the gradual rollout and jump straight to the latest version if there's one available.":"";return be.createElement(mC,null,be.createElement(ii,{disabled:t,onClick:n,tooltip:i},r));default:return et(0,`未知更新状态 ${e}`)}}renderCheckingForUpdate(){return be.createElement(mC,{className:"update-status"},be.createElement(hE,null),be.createElement("span",null,"正在检查更新..."))}renderUpdateAvailable(){return be.createElement(mC,{className:"update-status"},be.createElement(hE,null),be.createElement("span",null,"正在下载…"))}renderUpdateNotAvailable(){const e=this.state.updateState.lastSuccessfulCheck;return e?be.createElement("p",{className:"update-status"},"当前已是最新版本 (最后检查时间:"," ",be.createElement(jk,{date:e}),")"):null}renderUpdateReady(){return be.createElement("p",{className:"update-status"},"已下载更新并准备安装。")}renderUpdateDetails(){const e=this.state.updateState;switch(e.status){case Kt.CheckingForUpdates:return this.renderCheckingForUpdate();case Kt.UpdateAvailable:return this.renderUpdateAvailable();case Kt.UpdateNotAvailable:return this.renderUpdateNotAvailable();case Kt.UpdateReady:return this.renderUpdateReady();case Kt.UpdateNotChecked:return null;default:return et(e.status,`未知更新状态 ${e.status}`)}}renderUpdateErrors(){return Er()?be.createElement(LE,null,"This operating system is no longer supported. Software updates have been disabled."," ",be.createElement(CE,{uri:"https://docs.github.com/en/desktop/installing-and-configuring-github-desktop/overview/supported-operating-systems"},"Supported operating systems")):this.state.updateState.lastSuccessfulCheck?null:be.createElement(LE,null,"无法确定上次执行更新检查的时间，您可能正在运行旧版本，请尝试手动检查更新，如果问题仍然存在，请联系GitHub支持")}renderBetaLink(){return be.createElement("div",null,be.createElement("p",{className:"no-padding"},"想要查看最新功能？"),be.createElement("p",{className:"no-padding"},"请查看"," ",be.createElement(CE,{uri:"https://desktop.github.com/beta"},"测试版")))}render(){const e=this.props.applicationName,t=this.props.applicationVersion,n=be.createElement(CE,{uri:ZA},"发布记录"),r=`版本 ${t}`;return be.createElement(FE,{id:"about",onSubmit:this.props.onDismissed,onDismissed:this.props.onDismissed},this.renderUpdateErrors(),be.createElement(_E,null,be.createElement(mC,{className:"logo"},be.createElement("img",{src:wI,alt:"GitHub Desktop",width:"64",height:"64"})),be.createElement("h2",null,e),be.createElement("p",{className:"no-padding"},be.createElement("span",{className:"selectable-text"},r," (",this.props.applicationArchitecture,")")," ","(",n,")"),be.createElement("p",{className:"no-padding"},be.createElement(CE,{onClick:this.props.onShowTermsAndConditions},"服务条款")),be.createElement("p",null,be.createElement(CE,{onClick:this.props.onShowAcknowledgements},"许可证和开源声明")),this.renderUpdateDetails(),this.renderUpdateButton(),this.renderBetaLink()),be.createElement(WE,null))}}class CI extends be.Component{name;constructor(e){super(e),this.state={orgs:[]},this.name=e.settings.name}async componentWillMount(){this.fetchOrgs(this.props.account)}componentWillReceiveProps(e){this.props.account!==e.account&&(this.setState({orgs:[]}),this.fetchOrgs(e.account))}async fetchOrgs(e){const t=Vn.fromAccount(e),n=[...await t.fetchOrgs()];n.sort(((e,t)=>sr(e.login,t.login))),this.setState({orgs:n})}updateSettings(e){const t=sa(this.props.settings,e);this.props.onSettingsChanged(t)}onNameChange=e=>{this.name=e,e=LP(e),this.updateSettings({name:e})};onDescriptionChange=e=>{this.updateSettings({description:e})};onPrivateChange=e=>{this.updateSettings({private:e.currentTarget.checked})};onOrgChange=e=>{const{settings:t}=this.props,n=e.currentTarget.value,r=parseInt(n,10);let i;if(r<0||isNaN(r))i={...t,org:null};else{const e=this.state.orgs[r];i={...t,org:e}}this.props.onSettingsChanged(i)};renderOrgs(){if(0===this.state.orgs.length)return null;const e=new Array;e.push(be.createElement("option",{value:-1,key:-1},"None"));let t=-1;const n=this.props.settings.org;for(const[r,i]of this.state.orgs.entries())n&&n.id===i.id&&(t=r),e.push(be.createElement("option",{value:r,key:r},i.login));return be.createElement(RE,{label:"组织",value:t.toString(),onChange:this.onOrgChange},e)}render(){return be.createElement(_E,null,be.createElement(mC,null,be.createElement(dC,{label: "名称",value:this.name,onValueChanged:this.onNameChange})),this.renderSanitizedName(),be.createElement(mC,null,be.createElement(dC,{label: "描述",value:this.props.settings.description,onValueChanged:this.onDescriptionChange})),be.createElement(mC,null,be.createElement("label",null,be.createElement("input",{type:"checkbox",checked:this.props.settings.private,onChange:this.onPrivateChange}),"Keep this code private")),this.renderOrgs())}renderSanitizedName(){const e=this.props.settings.name;return this.name===e?null:be.createElement(mC,{className:"warning-helper-text"},be.createElement(si,{symbol:ai}),"Will be created as ",e)}}var SI,EI,kI;!function(e){e[e.enterprise=0]="enterprise",e[e.dotcom=1]="dotcom"}(SI||(SI={})),function(e){e[e.DotCom=0]="DotCom",e[e.Enterprise=1]="Enterprise"}(EI||(EI={}));class RI extends be.Component{constructor(e){super(e);const t=this.getAccountForTab(EI.DotCom),n=this.getAccountForTab(EI.Enterprise);let r=EI.DotCom;!t&&n&&(r=EI.Enterprise);const i={name:e.repository.name,description:"",private:!0},o={kind:"dotcom",settings:{...i,kind:SI.dotcom,org:null},error:null},s={kind:"enterprise",settings:{...i,kind:SI.enterprise,org:null},error:null};this.state={currentTab:r,dotcomTabState:o,enterpriseTabState:s,publishing:!1}}render(){const e=this.getCurrentTabState();return be.createElement(FE,{id:"publish-repository",title:"发布存储库",onDismissed:this.props.onDismissed,onSubmit:this.publishRepository,disabled:this.state.publishing,loading:this.state.publishing},be.createElement(KE,{onTabClicked:this.onTabClicked,selectedIndex:this.state.currentTab},be.createElement("span",null,"GitHub.com"),be.createElement("span",null,"GitHub Enterprise")),e.error?be.createElement(LE,null,e.error.message):null,this.renderContent(),this.renderFooter())}async componentDidMount(){const t=this.getCurrentTabState();try{const n=await async function(t){const n=e.join(t,mv);try{const e=await(0,y.readFile)(n,"utf8");return"Unnamed repository; edit this file 'description' to name the repository.\n"===e?"":e}catch(e){return""}}(this.props.repository.path),r={...t.settings,description:n};this.setCurrentTabSettings(r)}catch(e){log.warn("Couldn't get the repository's description",e)}}renderContent(){const e=this.state.currentTab,t=this.getCurrentTabState(),n=this.getAccountForTab(e);return n?be.createElement(CI,{account:n,settings:t.settings,onSettingsChanged:this.onSettingsChanged}):be.createElement(_E,null,this.renderSignInTab(e))}onSettingsChanged=e=>{let t;t=e.kind===SI.enterprise?{kind:"enterprise",settings:e,error:this.state.enterpriseTabState.error}:{kind:"dotcom",settings:e,error:this.state.dotcomTabState.error},this.setTabState(t)};getAccountForTab(e){const t=this.props.accounts;switch(e){case EI.DotCom:return t.find((e=>e.endpoint===Qn()))||null;case EI.Enterprise:return t.find((e=>e.endpoint!==Qn()))||null;default:return et(0,`Unknown tab: ${e}`)}}renderSignInTab(e){const t="登录";switch(e){case EI.DotCom:return be.createElement(JE,{actionTitle:t,onAction:this.signInDotCom},be.createElement("div",null,"登录您的GitHub.com帐户访问您的存储库。"));case EI.Enterprise:return be.createElement(JE,{actionTitle:t,onAction:this.signInEnterprise},be.createElement("div",null,"如果您有GitHub Enterprise或AE帐户，请登录该帐户以访问您的存储库。"));default:return et(0,`Unknown tab: ${e}`)}}renderFooter(){const e=!this.getCurrentTabState().settings.name.length,t=this.state.currentTab;return this.getAccountForTab(t)?be.createElement(HE,null,be.createElement(UE,{okButtonText:"Publish Repository",okButtonDisabled:e})):null}signInDotCom=()=>{this.props.dispatcher.showDotComSignInDialog()};signInEnterprise=()=>{this.props.dispatcher.showEnterpriseSignInDialog()};publishRepository=async()=>{const e=this.getCurrentTabState();this.setCurrentTabError(null),this.setState({publishing:!0});const t=this.state.currentTab,n=this.getAccountForTab(t);n||Je("Tried to publish with no user. That seems impossible!");const r=e.settings,{org:i}=e.settings;try{await this.props.dispatcher.publishRepository(this.props.repository,r.name,r.description,r.private,n,i),this.props.onDismissed()}catch(e){this.setCurrentTabError(e),this.setState({publishing:!1})}};onTabClicked=e=>{e!==this.state.currentTab&&this.setState({currentTab:e})};getCurrentTabState=()=>this.state.currentTab===EI.DotCom?this.state.dotcomTabState:this.state.enterpriseTabState;setTabState=e=>{"enterprise"===e.kind?this.setState({enterpriseTabState:e}):this.setState({dotcomTabState:e})};setCurrentTabSettings=e=>{if(e.kind===SI.enterprise){const t={...this.state.enterpriseTabState,settings:e};this.setTabState(t)}else{const t={...this.state.dotcomTabState,settings:e};this.setTabState(t)}};setCurrentTabError=e=>{this.setTabState({...this.getCurrentTabState(),error:e})}}class xI extends be.Component{constructor(e){super(e),this.state={licenses:null}}async componentDidMount(){const n=e.join(await dt(),"static","licenses.json");t.readFile(n,"utf8",((e,t)=>{if(e)return void log.error("Error loading licenses",e);const n=JSON.parse(t);n?this.setState({licenses:n}):log.warn("Couldn't parse licenses!")}))}renderLicenses(e){const t=[];for(const[n,r]of Object.keys(e).sort().entries()){if(0===n)continue;const i=e[r],o=i.repository;let s,a;if(o){const e=TI(o);s=be.createElement(CE,{uri:e},r)}else s=r;a=i.sourceText?i.sourceText:i.license?`License: ${i.license}`:"Unknown license";const l=be.createElement("h2",{key:`${r}-header`},s),c=be.createElement("p",{key:`${r}-text`,className:"license-text"},a);t.push(l,c)}return t}render(){const e=this.state.licenses;let t=null;if(e){const n=e[`desktop@${this.props.applicationVersion}`];t=be.createElement("p",{className:"license-text"},n.sourceText)}return be.createElement(FE,{id:"acknowledgements",title:"许可证和开源声明",onSubmit:this.props.onDismissed,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement("p",null,be.createElement(CE,{uri:"https://desktop.github.com"},"GitHub Desktop")," is an open source project published under the MIT License. You can view the source code and contribute to this project on"," ",be.createElement(CE,{uri:"https://github.com/desktop/desktop"},"GitHub"),"."),t,be.createElement("p",null,"GitHub Desktop also distributes these libraries:"),e?this.renderLicenses(e):be.createElement(hE,null)),be.createElement(WE,null))}}function TI(e){let t=e;return t=t.replace("git+https://github.com","https://github.com"),t=t.replace("git+ssh://git@github.com","https://github.com"),t}class DI extends be.Component{render(){const e=o.parse(this.props.url).hostname;return be.createElement(FE,{title:"不受信任的服务器",onDismissed:this.props.onDismissed,onSubmit:this.onContinue,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"GitHub Desktop cannot verify the identity of ",e,". The certificate (",this.props.certificate.subjectName,") is invalid or untrusted."," ",be.createElement("strong",null,"This may indicate attackers are trying to steal your data.")),be.createElement("p",null,"In some cases, this may be expected. For example:"),be.createElement("ul",null,be.createElement("li",null,"If this is a GitHub Enterprise trial."),be.createElement("li",null,"If your GitHub Enterprise instance is run on an unusual top-level domain.")),be.createElement("p",null,"If you are unsure of what to do, cancel and contact your system administrator.")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"View Certificate"})))}onContinue=()=>{this.props.onDismissed(),this.props.onContinue(this.props.certificate)}}!function(e){e[e.dotCom=0]="dotCom",e[e.enterprise=1]="enterprise"}(kI||(kI={}));class AI extends be.Component{constructor(e){super(e),this.state={selectedTab:kI.dotCom,dotComFilterText:"",enterpriseFilterText:"",selectedDotComRepository:null,selectedEnterpriseRepository:null}}render(){return be.createElement(qC,{id:"no-repositories"},be.createElement("section",{"aria-label":"让我们一起摇摆！🥳🥳🥳"},be.createElement("header",null,be.createElement("h1",null,"让我们一起摇摆！🥳🥳🥳"),be.createElement("p",null,"用GitHub Desktop协作开发")),be.createElement("div",{className:"content"},this.renderGetStartedActions(),this.renderRepositoryList()),be.createElement("img",{className:"no-repositories-graphic-top",src:KA,alt:""}),be.createElement("img",{className:"no-repositories-graphic-bottom",src:YA,alt:""})))}componentDidMount(){this.ensureRepositoriesForAccount(this.getSelectedAccount())}componentDidUpdate(e,t){e.dotComAccount===this.props.dotComAccount&&e.enterpriseAccount===this.props.enterpriseAccount&&t.selectedTab===this.state.selectedTab||this.ensureRepositoriesForAccount(this.getSelectedAccount())}ensureRepositoriesForAccount(e){null!==e&&void 0===this.props.apiRepositories.get(e)&&this.props.onRefreshRepositories(e)}isUserSignedIn(){return null!==this.props.dotComAccount||null!==this.props.enterpriseAccount}getSelectedAccount(){const{selectedTab:e}=this.state;return e===kI.dotCom?this.props.dotComAccount||this.props.enterpriseAccount:e===kI.enterprise?this.props.enterpriseAccount||this.props.dotComAccount:et(0,`Unknown account tab ${e}`)}renderRepositoryList(){const e=this.getSelectedAccount();if(null===e)return null;const t=this.props.apiRepositories.get(e);return be.createElement("div",{className:"content-pane repository-list"},this.renderAccountsTabBar(),this.renderAccountRepositoryList(e,t))}getSelectedItemForAccount(e){return e===this.props.dotComAccount?this.state.selectedDotComRepository:this.state.selectedEnterpriseRepository}renderAccountRepositoryList(e,t){const n=void 0===t||t.loading,r=void 0===t?null:t.repositories,i=this.getSelectedItemForAccount(e),o=e===this.props.dotComAccount?this.state.dotComFilterText:this.state.enterpriseFilterText;return be.createElement(be.Fragment,null,be.createElement(aI,{account:e,selectedItem:i,filterText:o,onRefreshRepositories:this.props.onRefreshRepositories,loading:n,repositories:r,onSelectionChanged:this.onSelectionChanged,onFilterTextChanged:this.onFilterTextChanged,onItemClicked:this.onItemClicked}),this.renderCloneSelectedRepositoryButton(i))}onItemClicked=(e,t)=>{"keyboard"===t.kind&&"Enter"===t.event.key&&this.onCloneSelectedRepository()};renderCloneSelectedRepositoryButton(e){return null===e?null:be.createElement(ii,{type:"submit",className:"clone-selected-repository",onClick:this.onCloneSelectedRepository},"Clone"," ",be.createElement("strong",null,e.owner.login,"/",e.name))}onCloneSelectedRepository=()=>{const e=this.getSelectedAccount();if(null===e)return;const t=this.getSelectedItemForAccount(e);null!==t&&this.props.onClone(t.clone_url)};onSelectionChanged=e=>{const t=this.getSelectedAccount();t===this.props.dotComAccount?this.setState({selectedDotComRepository:e}):t===this.props.enterpriseAccount&&this.setState({selectedEnterpriseRepository:e})};onFilterTextChanged=e=>{const t=this.getSelectedAccount();t===this.props.dotComAccount?this.setState({dotComFilterText:e}):t===this.props.enterpriseAccount&&this.setState({enterpriseFilterText:e})};renderAccountsTabBar(){if(null===this.props.dotComAccount||null===this.props.enterpriseAccount)return null;const e=this.getSelectedAccount()===this.props.dotComAccount?0:1;return be.createElement(KE,{selectedIndex:e,onTabClicked:this.onTabClicked},be.createElement("span",null,"GitHub.com"),be.createElement("span",null,"GitHub Enterprise"))}onTabClicked=e=>{0===e?this.setState({selectedTab:kI.dotCom}):1===e&&this.setState({selectedTab:kI.enterprise})};onShowClone=()=>this.props.onClone();renderButtonGroupButton(e,t,n,r,i){return be.createElement("span",null,be.createElement(ii,{onClick:n,type:r,autoFocus:i},be.createElement(si,{symbol:e}),be.createElement("div",null,t)))}renderTutorialRepositoryButton(){return this.isUserSignedIn()?this.props.tutorialPaused?this.renderButtonGroupButton(Yi,"Return to In Progress Tutorial",this.props.onResumeTutorialRepository,"submit"):this.renderButtonGroupButton(Yi,"Create a Tutorial Repository…",this.props.onCreateTutorialRepository,"submit"):null}renderCloneButton(){return this.renderButtonGroupButton(to,"克隆存储库...",this.onShowClone,void 0,!this.isUserSignedIn())}renderCreateRepositoryButton(){return this.renderButtonGroupButton(Zi,"创建存储库...",this.props.onCreate)}renderAddExistingRepositoryButton(){return this.renderButtonGroupButton(Ii,"打开存储库...",this.props.onAdd)}renderGetStartedActions(){return be.createElement("div",{className:"content-pane"},be.createElement("div",{className:"button-group"},this.renderTutorialRepositoryButton(),this.renderCloneButton(),this.renderCreateRepositoryButton(),this.renderAddExistingRepositoryButton()),be.createElement("div",{className:"drag-drop-info"},be.createElement(si,{symbol:qi}),be.createElement("div",null,be.createElement("strong",null,"提示："),"您可以将本地的存储库文件夹拖放到此处进行添加")))}}class PI extends be.Component{constructor(e){super(e),this.state={deleteRepoFromDisk:!1,isRemovingRepository:!1}}onSubmit=async()=>{this.setState({isRemovingRepository:!0}),await this.props.onConfirmation(this.props.repository,this.state.deleteRepoFromDisk),this.props.onDismissed()};render(){const e=this.state.isRemovingRepository;return be.createElement(FE,{id:"confirm-remove-repository",key:"remove-repository-confirmation",type:"warning",title:"移除存储库",dismissable:!e,loading:e,disabled:e,onDismissed:this.props.onDismissed,onSubmit:this.onSubmit},be.createElement(_E,null,be.createElement("p",null,'确定从Github Desktop中移除仓库 "',this.props.repository.name,'" ?'),be.createElement("p",{className:"description"},"存储库将从Github Desktop中移除：",be.createElement("br",null),be.createElement(QE,null,this.props.repository.path)),be.createElement("div",null,be.createElement(GC,{label:"同时将仓库移到废纸篓",value:this.state.deleteRepoFromDisk?jC.On:jC.Off,onChange:this.onConfirmRepositoryDeletion}))),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"移除"})))}onConfirmRepositoryDeletion=e=>{const t=e.currentTarget.checked;this.setState({deleteRepoFromDisk:t})}}const II="https://github.com/contact";class _I extends be.Component{render(){return be.createElement(FE,{id:"terms-and-conditions",title:"GitHub 开源应用程序条款和条件",onSubmit:this.props.onDismissed,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement("p",null,'These GitHub Open Source Applications Terms and Conditions ("Application Terms") are a legal agreement between you (either as an individual or on behalf of an entity) and GitHub, Inc. regarding your use of GitHub\'s applications, such as GitHub Desktop™ and associated documentation ("Software"). These Application Terms apply to the executable code version of the Software. Source code for the Software is available separately and free of charge under open source software license agreements. If you do not agree to all of the terms in these Application Terms, do not download, install, use, or copy the Software.'),be.createElement("h2",null,"Connecting to GitHub"),be.createElement("p",null,'If you configure the Software to work with one or more accounts on the GitHub.com website or with an instance of GitHub Enterprise Server, your use of the Software will also be governed your applicable GitHub.com website Terms of Service and/or the license agreement applicable to your instance of GitHub Enterprise ("GitHub Terms").'),be.createElement("p",null,"Any use of the Software that violates your applicable GitHub Terms will also be a violation of these Application Terms."),be.createElement("h2",null,"Open Source Licenses and Notices"),be.createElement("p",null,'The open source license for the Software is included in the "Open Source Notices" documentation that is included with the Software. That documentation also includes copies of all applicable open source licenses.'),be.createElement("p",null,"To the extent the terms of the licenses applicable to open source components require GitHub to make an offer to provide source code in connection with the Software, such offer is hereby made, and you may exercise it by contacting GitHub:"," ",be.createElement(CE,{uri:II},"contact"),"."),be.createElement("p",null,"Unless otherwise agreed to in writing with GitHub, your agreement with GitHub will always include, at a minimum, these Application Terms. Open source software licenses for the Software's source code constitute separate written agreements. To the limited extent that the open source software licenses expressly supersede these Application Terms, the open source licenses govern your agreement with GitHub for the use of the Software or specific included components of the Software."),be.createElement("h2",null,"GitHub's Logos"),be.createElement("p",null,'The license grant included with the Software is not for GitHub\'s trademarks, which include the Software logo designs. GitHub reserves all trademark and copyright rights in and to all GitHub trademarks. GitHub\'s logos include, for instance, the stylized designs that include "logo" in the file title in the "logos" folder.'),be.createElement("p",null,"The names GitHub, GitHub Desktop, GitHub for Mac, GitHub for Windows, Atom, the Octocat, and related GitHub logos and/or stylized names are trademarks of GitHub. You agree not to display or use these trademarks in any manner without GitHub's prior, written permission, except as allowed by GitHub's Logos and Usage Policy:"," ",be.createElement(CE,{uri:"https://github.com/logos"},"logos"),"."),be.createElement("h2",null,"Privacy"),be.createElement("p",null,"The Software may collect personal information. You may control what information the Software collects in the settings panel. If the Software does collect personal information on GitHub's behalf, GitHub will process that information in accordance with the",be.createElement(CE,{uri:"https://help.github.com/articles/github-privacy-statement/"},"GitHub 隐私声明"),"."),be.createElement("h2",null,"Additional Services"),be.createElement("h3",null,"Auto-Update Services"),be.createElement("p",null,'The Software may include an auto-update service ("Service"). If you choose to use the Service or you download Software that automatically enables the Service, GitHub will automatically update the Software when a new version is available.'),be.createElement("h3",null,"Disclaimers and Limitations of Liability"),be.createElement("p",null,'THE SERVICE IS PROVIDED ON AN "AS IS" BASIS, AND NO WARRANTY, EITHER EXPRESS OR IMPLIED, IS GIVEN. YOUR USE OF THE SERVICE IS AT YOUR SOLE RISK. GitHub does not warrant that (i) the Service will meet your specific requirements; (ii) the Service is fully compatible with any particular platform; (iii) your use of the Service will be uninterrupted, timely, secure, or error-free; (iv) the results that may be obtained from the use of the Service will be accurate or reliable; (v) the quality of any products, services, information, or other material purchased or obtained by you through the Service will meet your expectations; or (vi) any errors in the Service will be corrected.'),be.createElement("p",null,"YOU EXPRESSLY UNDERSTAND AND AGREE THAT GITHUB SHALL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR EXEMPLARY DAMAGES, INCLUDING BUT NOT LIMITED TO, DAMAGES FOR LOSS OF PROFITS, GOODWILL, USE, DATA OR OTHER INTANGIBLE LOSSES (EVEN IF GITHUB HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES) RELATED TO THE SERVICE, including, for example: (i) the use or the inability to use the Service; (ii) the cost of procurement of substitute goods and services resulting from any goods, data, information or services purchased or obtained or messages received or transactions entered into through or from the Service; (iii) unauthorized access to or alteration of your transmissions or data; (iv) statements or conduct of any third-party on the Service; (v) or any other matter relating to the Service."),be.createElement("p",null,"GitHub reserves the right at any time and from time to time to modify or discontinue, temporarily or permanently, the Service (or any part thereof) with or without notice. GitHub shall not be liable to you or to any third-party for any price change, suspension or discontinuance of the Service."),be.createElement("h2",null,"Miscellanea"),be.createElement("ol",null,be.createElement("li",null,"No Waiver. The failure of GitHub to exercise or enforce any right or provision of these Application Terms shall not constitute a waiver of such right or provision."),be.createElement("li",null,"Entire Agreement. These Application Terms, together with any applicable Privacy Notices, constitutes the entire agreement between you and GitHub and governs your use of the Software, superseding any prior agreements between you and GitHub (including, but not limited to, any prior versions of the Application Terms)."),be.createElement("li",null,"Governing Law. You agree that these Application Terms and your use of the Software are governed under California law and any dispute related to the Software must be brought in a tribunal of competent jurisdiction located in or near San Francisco, California."),be.createElement("li",null,'Third-Party Packages. The Software supports third-party "Packages" which may modify, add, remove, or alter the functionality of the Software. These Packages are not covered by these Application Terms and may include their own license which governs your use of that particular package.'),be.createElement("li",null,"No Modifications; Complete Agreement. These Application Terms may only be modified by a written amendment signed by an authorized representative of GitHub, or by the posting by GitHub of a revised version. These Application Terms, together with any applicable Open Source Licenses and Notices and GitHub's Privacy Statement, represent the complete and exclusive statement of the agreement between you and us. These Application Terms supersede any proposal or prior agreement oral or written, and any other communications between you and GitHub relating to the subject matter of these terms."),be.createElement("li",null,"License to GitHub Policies. These Application Terms are licensed under the"," ",be.createElement(CE,{uri:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons Attribution license"),". You may use it freely under the terms of the Creative Commons license."),be.createElement("li",null,"Contact Us. Please send any questions about these Application Terms to ",be.createElement(CE,{uri:II},"support@github.com"),"."))),be.createElement(WE,null))}}class NI extends be.Component{render(){return be.createElement(FE,{title:"命令行工具已安装",onDismissed:this.props.onDismissed,onSubmit:this.props.onDismissed},be.createElement(_E,null,be.createElement("div",null,"The command line tool has been installed at"," ",be.createElement("strong",null,jD),".")),be.createElement(WE,{buttonText:"确定"}))}}class OI extends be.Component{constructor(e){super(e),this.state={username:"",password:""}}render(){const e=!this.state.password.length||!this.state.username.length;return be.createElement(FE,{id:"generic-git-auth",title:"验证失败",onDismissed:this.props.onDismiss,onSubmit:this.save},be.createElement(_E,null,be.createElement("p",null,"We were unable to authenticate with ",be.createElement(QE,null,this.props.hostname),". Please enter your username and password to try again."),be.createElement(mC,null,be.createElement(dC,{label:"用户名",autoFocus:!0,value:this.state.username,onValueChanged:this.onUsernameChange})),be.createElement(mC,null,be.createElement(MA,{label:"密码",value:this.state.password,onValueChanged:this.onPasswordChange})),be.createElement(mC,null,be.createElement("div",null,"Depending on your repository's hosting service, you might need to use a Personal Access Token (PAT) as your password. Learn more about creating a PAT in our"," ",be.createElement(CE,{uri:"https://github.com/desktop/desktop/tree/development/docs/integrations"},"integration docs"),"."))),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Save and Retry",okButtonDisabled:e})))}onUsernameChange=e=>{this.setState({username:e})};onPasswordChange=e=>{this.setState({password:e})};save=()=>{this.props.onDismiss(),this.props.onSave(this.props.hostname,this.state.username,this.state.password,this.props.retryAction)}}class MI extends be.Component{onShowPreferencesDialog=e=>{e.preventDefault(),this.props.onDismissed(),this.props.showPreferencesDialog()};render(){return be.createElement(FE,{id:"shell-error",type:"error",title:"无法打开 shell",onSubmit:this.props.onDismissed,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement("p",null,this.props.message)),be.createElement(HE,null,be.createElement(UE,{okButtonText:"关闭",cancelButtonText:"Open Preferences",onCancelButtonClick:this.onShowPreferencesDialog})))}}const BI="https://git-lfs.github.com/";class FI extends be.Component{render(){return be.createElement(FE,{id:"initialize-lfs",title:"初始化 Git LFS",dismissable:!1,onSubmit:this.onInitialize},be.createElement(_E,null,this.renderRepositories()),be.createElement(HE,null,be.createElement(UE,{okButtonText:"初始化 Git LFS",cancelButtonText:"暂不",onCancelButtonClick:this.props.onDismissed})))}onInitialize=()=>{this.props.onInitialize(this.props.repositories),this.props.onDismissed()};renderRepositories(){if(this.props.repositories.length>10)return be.createElement("p",null,this.props.repositories.length," repositories use"," ",be.createElement(CE,{uri:BI},"Git LFS"),". To contribute to them, Git LFS must first be initialized. Would you like to do so now?");{const e=1!==this.props.repositories.length,t=e?"The repositories use":"This repository uses",n=e?"them":"it";return be.createElement("div",null,be.createElement("p",null,t," ",be.createElement(CE,{uri:BI},"Git LFS"),". To contribute to"," ",n,", Git LFS must first be initialized. Would you like to do so now?"),be.createElement("ul",null,this.props.repositories.map((e=>be.createElement("li",{key:e.id},be.createElement(Pk,{path:e.path}))))))}}}class LI extends be.Component{constructor(e){super(e),this.state={globalGitConfigPath:null}}async componentDidMount(){try{const t=await async function(t){const n=(await qw(["config","--global","--list","--show-origin","--name-only","-z"],__dirname,"getGlobalConfigPath",undefined)).stdout.split("\0");if(n.length<1)return null;const r=n[0];if(!r.length)return null;const i=r.match(/file:(.+)/i);return!i||i.length<2?null:(0,e.normalize)(i[1])}();this.setState({globalGitConfigPath:t})}catch(e){log.warn("Couldn't get the global git config path",e)}}renderGlobalGitConfigLink(){const e="your global git config";return this.state.globalGitConfigPath?be.createElement(CE,{onClick:this.showGlobalGitConfig},e):e}showGlobalGitConfig=()=>{const e=this.state.globalGitConfigPath;e&&rt.openPath(e)};render(){return be.createElement(FE,{id:"lfs-attribute-mismatch",title:"更新现有的 Git LFS 过滤器？",onDismissed:this.props.onDismissed,onSubmit:this.onSubmit},be.createElement(_E,null,be.createElement("p",null,"Git LFS filters are already configured in"," ",this.renderGlobalGitConfigLink()," but are not the values it expects. Would you like to update them now?")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Update Existing Filters",cancelButtonText:"Not Now"})))}onSubmit=()=>{this.props.onUpdateExistingFilters(),this.props.onDismissed()}}class HI extends be.Component{render(){const e=this.props.repository.name,t=tt("A repository must have a GitHub repository to add an upstream remote",this.props.repository.gitHubRepository),n=tt("A repository must have a parent repository to add an upstream remote",t.parent),r=n.fullName,i=this.props.existingRemote.url,o=n.cloneURL;return be.createElement(FE,{title:"上游已存在",onDismissed:this.props.onDismissed,onSubmit:this.onUpdate,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"The repository ",be.createElement(QE,null,e)," is a fork of"," ",be.createElement(QE,null,r),", but its ",be.createElement(QE,null,Oc)," ","remote points elsewhere."),be.createElement("ul",null,be.createElement("li",null,"Current: ",be.createElement(QE,null,i)),be.createElement("li",null,"Expected: ",be.createElement(QE,null,o))),be.createElement("p",null,"Would you like to update the remote to use the expected URL?")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"更新",cancelButtonText:"忽略",onCancelButtonClick:this.onIgnore})))}onUpdate=()=>{this.props.onUpdate(this.props.repository),this.props.onDismissed()};onIgnore=e=>{e.preventDefault(),this.props.onIgnore(this.props.repository),this.props.onDismissed()}}const UI=new lw("desktop",Qn(),-1),WI=new Ir("",-1,new Rr("desktop",UI,-1,!1,"https://github.com/desktop/desktop"),!0);class $I extends be.Component{renderList(e,t){if(0===e.length)return null;const n=new Array;for(const[t,r]of e.entries())n.push(be.createElement("li",{key:t},be.createElement(Uk,{text:r.message,emoji:this.props.emoji,renderUrlsAsLinks:!0,repository:WI})));return be.createElement("div",{className:"section"},be.createElement("p",{className:"header"},be.createElement("strong",null,t)),be.createElement("ul",{className:"entries"},n))}drawSingleColumnLayout(e){return be.createElement("div",{className:"container"},be.createElement("div",{className:"column"},this.renderList(e.bugfixes,"Bugfixes"),this.renderList(e.enhancements,"Enhancements"),this.renderList(e.other,"Other")))}drawTwoColumnLayout(e){return be.createElement("div",{className:"container"},be.createElement("div",{className:"column"},this.renderList(e.enhancements,"Enhancements"),this.renderList(e.other,"Other")),be.createElement("div",{className:"column"},this.renderList(e.bugfixes,"Bugfixes")))}getDisplayRelease=()=>{const{newReleases:e}=this.props,t=e.at(0),n=e.at(-1);return void 0===t||void 0===n||t===n?t:{latestVersion:`${n.latestVersion} - ${t.latestVersion}`,datePublished:`${n.datePublished} to ${t.datePublished}`,enhancements:e.flatMap((e=>e.enhancements)),bugfixes:e.flatMap((e=>e.bugfixes)),pretext:e.flatMap((e=>e.pretext)),other:[],thankYous:[]}};renderPretext=e=>{if(0!==e.length)return be.createElement(ZT,{markdown:e[0].message,emoji:this.props.emoji,onMarkdownLinkClicked:this.onMarkdownLinkClicked})};onDismissed=e=>{e.preventDefault(),this.props.onDismissed()};renderButtons=()=>"3.3.5"===this.props.newReleases[0].latestVersion?be.createElement(ii,{type:"submit",onClick:this.onDismissed},"关闭"):be.createElement(UE,{destructive:!0,okButtonText:"Install and Restart",cancelButtonText:"关闭"});render(){const e=this.getDisplayRelease();if(void 0===e)return null;const{latestVersion:t,datePublished:n,enhancements:r,bugfixes:i,pretext:o}=e,s=r.length>0&&i.length>0?this.drawTwoColumnLayout(e):this.drawSingleColumnLayout(e),a=be.createElement(be.Fragment,null,be.createElement("span",{className:"version"},"Version ",t),be.createElement("span",{className:"date"},n));return be.createElement(FE,{id:"release-notes",onDismissed:this.props.onDismissed,onSubmit:this.updateNow,title:a},be.createElement(_E,null,this.renderPretext(o),s),be.createElement(HE,null,be.createElement(CE,{onClick:this.showAllReleaseNotes},"View all release notes"),this.renderButtons()))}updateNow=()=>{Yt.quitAndInstallUpdate()};showAllReleaseNotes=()=>{rt.openExternal(ZA)};onMarkdownLinkClicked=e=>{rt.openExternal(e)}}class zI extends be.Component{render(){return be.createElement(FE,{id:"delete-branch",title:"删除分支",type:"warning",onDismissed:this.props.onDismissed,onSubmit:this.deleteBranch},be.createElement(_E,null,be.createElement("p",null,"This branch may have an open pull request associated with it."),be.createElement("p",null,"If"," ",be.createElement(CE,{onClick:this.openPullRequest},"#",this.props.pullRequest.pullRequestNumber)," ","has been merged, you can also go to GitHub to delete the remote branch.")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText: "删除"})))}openPullRequest=()=>{this.props.dispatcher.showPullRequest(this.props.repository)};deleteBranch=()=>(this.props.dispatcher.deleteLocalBranch(this.props.repository,this.props.branch),this.props.onDismissed())}class qI extends be.Component{onCancel=()=>{this.props.onDismissed()};onSubmit=async()=>{this.props.onDismissed(),await this.props.dispatcher.commitIncludedChanges(this.props.repository,this.props.context),this.props.dispatcher.clearBanner(),this.props.dispatcher.setCommitMessage(this.props.repository,Ic)};renderFiles(e){return be.createElement("div",{className:"conflicted-files-text"},be.createElement("ul",null,e.map((e=>be.createElement("li",{key:e.path},be.createElement(Pk,{path:e.path}))))))}render(){return be.createElement(FE,{id:"commit-conflict-markers-warning",onDismissed:this.onCancel,onSubmit:this.onSubmit,title:"确认提交冲突文件",type:"warning"},be.createElement(_E,null,be.createElement("p",null,"If you choose to commit, you’ll be committing the following conflicted files into your repository:"),this.renderFiles(this.props.files),be.createElement("p",null,"Are you sure you want to commit these conflicted files?")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"Yes, Commit Files"})))}}class jI extends be.PureComponent{componentDidMount(){this.ensureTheme()}componentDidUpdate(){this.ensureTheme()}componentWillUnmount(){this.clearThemes()}async ensureTheme(){let e=this.props.theme;this.props.theme===aa.System&&(e=await ha());const t=`theme-${la(e)}`;document.body.classList.contains(t)||(this.clearThemes(),document.body.classList.add(t),this.updateColorScheme())}updateColorScheme=()=>{const e=document.body.classList.contains("theme-dark");document.documentElement.style.colorScheme=e?"dark":"light"};clearThemes(){const e=document.body,t=[...e.classList];for(const n of t)n.startsWith("theme-")&&e.classList.remove(n)}render(){return null}}class GI extends be.Component{constructor(e){super(e)}render(){return be.createElement(FE,{id:"oversized-files",title:"文件过大",onSubmit:this.onSubmit,onDismissed:this.props.onDismissed,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"The following files are over 100MB."," ",be.createElement("strong",null,"If you commit these files, you will no longer be able to push this repository to GitHub.com.")),this.renderFileList(),be.createElement("p",{className:"recommendation"},"We recommend you avoid committing these files or use"," ",be.createElement(CE,{uri:"https://help.github.com/articles/versioning-large-files/"},"Git LFS")," to store large files on GitHub.")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"Commit Anyway"})))}renderFileList(){return be.createElement("div",{className:"files-list"},be.createElement("ul",null,this.props.oversizedFiles.map((e=>be.createElement("li",{key:e},be.createElement(Pk,{path:e}))))))}onSubmit=async()=>{this.props.onDismissed(),await this.props.dispatcher.commitIncludedChanges(this.props.repository,this.props.context),this.props.dispatcher.setCommitMessage(this.props.repository,Ic)}}class VI extends be.Component{constructor(e){super(e),this.state={isLoading:!1}}render(){return be.createElement(FE,{title:"远程存在更新的提交",dismissable:!this.state.isLoading,disabled:this.state.isLoading,onDismissed:this.props.onDismissed,onSubmit:this.onFetch,loading:this.state.isLoading,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"无法将推送提交到此分支，因为远程上的提交在本地分支上不存在。在推送之前获取这些新提交，以使它们与您的本地提交同步。")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"获取",okButtonDisabled:this.state.isLoading})))}onFetch=async()=>{this.setState({isLoading:!0}),await this.props.dispatcher.fetch(this.props.repository,Xt.UserInitiatedTask),this.setState({isLoading:!1}),this.props.onDismissed()}}var KI;!function(e){e[e.StashOnCurrentBranch=0]="StashOnCurrentBranch",e[e.MoveToNewBranch=1]="MoveToNewBranch"}(KI||(KI={}));class YI extends be.Component{constructor(e){super(e),this.state={isStashingChanges:!1,selectedStashAction:KI.StashOnCurrentBranch,currentBranchName:e.currentBranch.name}}render(){const{isStashingChanges:e}=this.state;return be.createElement(FE,{id:"stash-changes",title:"切换分支",onSubmit:this.onSubmit,onDismissed:this.props.onDismissed,loading:e,disabled:e},be.createElement(_E,null,this.renderStashActions(),this.renderStashOverwriteWarning()),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Switch Branch"})))}renderStashOverwriteWarning(){return this.props.hasAssociatedStash&&this.state.selectedStashAction===KI.StashOnCurrentBranch?be.createElement(mC,null,be.createElement(si,{symbol:ai})," 新暂存将覆盖当前暂存"):null}renderStashActions(){const{branchToCheckout:e}=this.props,t=[{title:`保留 ${this.state.currentBranchName} 上的更改`,description:"更改将保留在此分支",key:KI.StashOnCurrentBranch},{title:`将更改带到 ${e.name}`,description:"更改将带到新的分支",key:KI.MoveToNewBranch}];return be.createElement(mC,null,be.createElement(hI,{label:"此分支已更改。请选择下一步操作:",items:t,selectedKey:this.state.selectedStashAction,onSelectionChanged:this.onSelectionChanged}))}onSelectionChanged=e=>{this.setState({selectedStashAction:e})};onSubmit=async()=>{const{repository:e,branchToCheckout:t,dispatcher:n,hasAssociatedStash:r}=this.props,{selectedStashAction:i}=this.state;if(i===KI.StashOnCurrentBranch&&r)return void n.showPopup({type:nl.ConfirmOverwriteStash,repository:e,branchToCheckout:t});this.setState({isStashingChanges:!0});const o=bE("stash and checkout",e);try{i===KI.StashOnCurrentBranch?await n.checkoutBranch(e,t,Su.StashOnCurrentBranch):i===KI.MoveToNewBranch&&await n.checkoutBranch(e,t,Su.MoveToNewBranch)}finally{o.done(),this.setState({isStashingChanges:!1},(()=>{this.props.onDismissed()}))}}}class XI extends be.Component{constructor(e){super(e),this.state={isLoading:!1}}render(){return be.createElement(FE,{id:"overwrite-stash",type:"warning",title:"覆盖临时保存的更改？",loading:this.state.isLoading,disabled:this.state.isLoading,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed,role:"alertdialog",ariaDescribedBy:"overwrite-stash-warning-message"},be.createElement(_E,null,be.createElement(mC,{id:"overwrite-stash-warning-message"},"Are you sure you want to proceed? This will overwrite your existing stash with your current changes.")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"覆盖"})))}onSubmit=async()=>{const{dispatcher:e,repository:t,branchToCheckout:n,onDismissed:r}=this.props;this.setState({isLoading:!0});try{if(null!==n){const r=Su.StashOnCurrentBranch;await e.checkoutBranch(t,n,r)}else await e.createStashForCurrentBranch(t,!1)}finally{this.setState({isLoading:!1})}r()}}class QI extends be.Component{constructor(e){super(e),this.state={isDiscarding:!1,confirmDiscardStash:e.askForConfirmationOnDiscardStash}}render(){return be.createElement(FE,{id:"discard-stash",type:"warning",title:"放弃临时保存的更改？",loading:this.state.isDiscarding,disabled:this.state.isDiscarding,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed,role:"alertdialog",ariaDescribedBy:"discard-stash-warning-message"},be.createElement(_E,null,be.createElement(mC,{id:"discard-stash-warning-message"},"Are you sure you want to discard these stashed changes?"),be.createElement(mC,null,be.createElement(GC,{label:"不再显示此消息",value:this.state.confirmDiscardStash?jC.Off:jC.On,onChange:this.onAskForConfirmationOnDiscardStashChanged}))),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"放弃"})))}onAskForConfirmationOnDiscardStashChanged=e=>{const t=!e.currentTarget.checked;this.setState({confirmDiscardStash:t})};onSubmit=async()=>{const{dispatcher:e,repository:t,stash:n,onDismissed:r}=this.props;this.setState({isDiscarding:!0});try{e.setConfirmDiscardStashSetting(this.state.confirmDiscardStash),await e.dropStash(t,n)}finally{this.setState({isDiscarding:!1})}r()}}class ZI extends be.Component{constructor(e){super(e),this.state={isCheckingOut:!1,confirmCheckoutCommit:e.askForConfirmationOnCheckoutCommit}}render(){return be.createElement(FE,{id:"checkout-commit",type:"warning",title:"Checkout Commit?",loading:this.state.isCheckingOut,disabled:this.state.isCheckingOut,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed,ariaDescribedBy:"checking-out-commit-confirmation",role:"alertdialog"},be.createElement(_E,null,be.createElement(mC,{id:"checking-out-commit-confirmation"},"Checking out a commit will create a detached HEAD, and you will no longer be on any branch. Are you sure you want to checkout this commit?"),be.createElement(mC,null,be.createElement(GC,{label:"不再显示此消息",value:this.state.confirmCheckoutCommit?jC.Off:jC.On,onChange:this.onaskForConfirmationOnCheckoutCommitChanged}))),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"Checkout"})))}onaskForConfirmationOnCheckoutCommitChanged=e=>{const t=!e.currentTarget.checked;this.setState({confirmCheckoutCommit:t})};onSubmit=async()=>{const{dispatcher:e,repository:t,commit:n,onDismissed:r}=this.props;this.setState({isCheckingOut:!0});try{e.setConfirmCheckoutCommitSetting(this.state.confirmCheckoutCommit),await e.checkoutCommit(t,n)}finally{this.setState({isCheckingOut:!1})}r()}}class JI extends be.Component{onSubmit=()=>this.props.onCreateTutorialRepository(this.props.account);renderProgress(){const{progress:e}=this.props;if(void 0===e)return null;const t=e.description?be.createElement("div",{className:"description"},e.description):null;return be.createElement("div",{className:"progress-container"},be.createElement("div",null,e.title),be.createElement("progress",{value:e.value}),t)}render(){const{account:e,progress:t}=this.props,n=void 0!==t;return be.createElement(FE,{id:"create-tutorial-repository-dialog",title:"开始教程",onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,dismissable:!n,loading:n,disabled:n},be.createElement(_E,null,be.createElement("div",null,"This will create a repository on your local machine, and push it to your account ",be.createElement(QE,null,"@",this.props.account.login)," 在"," ",be.createElement(CE,{uri:Xn(e.endpoint)},ih(e)),". This repository will only be visible to you, and not visible publicly."),this.renderProgress()),be.createElement(HE,null,be.createElement(UE,{okButtonText:"确定"})))}}class e_ extends be.Component{constructor(e){super(e),this.state={loading:!1}}render(){return be.createElement(FE,{id:"workflow-push-rejected",title:"推送被拒绝",loading:this.state.loading,onDismissed:this.props.onDismissed,onSubmit:this.onSignIn,type:"error"},be.createElement(_E,null,be.createElement("p",null,"The push was rejected by the server for containing a modification to the workflow file ",be.createElement(QE,null,this.props.rejectedPath),". In order to be able to push to workflow files GitHub Desktop needs to request additional permissions."),be.createElement("p",null,"Would you like to open a browser to grant GitHub Desktop permission to update workflow files?")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Continue in Browser"})))}onSignIn=async()=>{this.setState({loading:!0});const{repository:e,dispatcher:t}=this.props,{endpoint:n}=e.gitHubRepository;n===Qn()?await t.beginDotComSignIn():(await t.beginEnterpriseSignIn(),await t.setSignInEndpoint(n)),await t.requestBrowserAuthentication(),t.push(e),this.props.onDismissed()}}class t_ extends be.Component{constructor(e){super(e),this.state={loading:!1}}render(){return be.createElement(FE,{title:"需要重新授权",loading:this.state.loading,onDismissed:this.props.onDismissed,onSubmit:this.onSignIn,type:"error"},be.createElement(_E,null,be.createElement("p",null,'The "',this.props.organizationName,"\" organization has enabled or enforced SAML SSO. To access this repository, you must sign in again and grant GitHub Desktop permission to access the organization's repositories."),be.createElement("p",null,"Would you like to open a browser to grant GitHub Desktop permission to access the repository?")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Continue in Browser"})))}onSignIn=async()=>{this.setState({loading:!0}),this.props.endpoint===Qn()?await this.props.dispatcher.beginDotComSignIn():await this.props.dispatcher.beginEnterpriseSignIn(),await this.props.dispatcher.requestBrowserAuthentication(),void 0!==this.props.retryAction&&this.props.dispatcher.performRetry(this.props.retryAction),this.props.onDismissed()}}class n_ extends be.Component{constructor(e){super(e),this.state={loading:!1}}onSubmit=async()=>{this.setState({loading:!0});const{gitHubRepository:e}=this.props.repository,t=Vn.fromAccount(this.props.account);try{const n=await t.forkRepository(e.owner.login,e.name);this.props.dispatcher.incrementMetric("forksCreated");const r=await this.props.dispatcher.convertRepositoryToFork(this.props.repository,n);this.setState({loading:!1}),this.props.onDismissed(),Nr(r)&&this.props.dispatcher.showPopup({type:nl.ChooseForkSettings,repository:r})}catch(e){log.error(`Fork creation through API failed (${e})`),iC("forkCreation",e),this.setState({error:e,loading:!1})}};render(){return be.createElement(FE,{title:"是否要 fork 此存储库？",onDismissed:this.props.onDismissed,onSubmit:this.state.error?void 0:this.onSubmit,dismissable:!this.state.loading,loading:this.state.loading,type:this.state.error?"error":"normal",key:this.props.repository.name,id:"create-fork"},void 0!==this.state.error?function(e,t,n){const r=null!==e.gitHubRepository.htmlURL?be.createElement(be.Fragment,null,"You can try ",be.createElement(CE,{uri:e.gitHubRepository.htmlURL},"creating the fork manually on GitHub"),"."):void 0;return be.createElement(be.Fragment,null,be.createElement(_E,null,be.createElement("div",null,"Creating your fork ",be.createElement("strong",null,`${t.login}/${e.gitHubRepository.name}`)," failed. ",r),be.createElement("details",null,be.createElement("summary",null,"Error details"),be.createElement("pre",{className:"error"},n.message))),be.createElement(WE,null))}(this.props.repository,this.props.account,this.state.error):(e=this.props.repository,t=this.props.account,n=this.state.loading,be.createElement(be.Fragment,null,be.createElement(_E,null,be.createElement("p",null,"It looks like you don’t have write access to ",be.createElement("strong",null,e.gitHubRepository.fullName),". If you should, please check with a repository administrator."),be.createElement("p",null," Do you want to create a fork of this repository at ",be.createElement("strong",null,`${t.login}/${e.gitHubRepository.name}`)," to continue?")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"Fork This Repository",okButtonDisabled:n,cancelButtonDisabled:n})))));var e,t,n}}class r_ extends be.Component{constructor(e){super(e),this.state={tagName:e.initialName||"",isCreatingTag:!1,previousTags:this.getExistingTagsFiltered()}}render(){const e=this.getCurrentError(),t=null!==e||0===this.state.tagName.length;return be.createElement(FE,{id:"create-tag",title:"创建标签",onSubmit:this.createTag,onDismissed:this.props.onDismissed,loading:this.state.isCreatingTag,disabled:this.state.isCreatingTag},e&&be.createElement(LE,null,e),be.createElement(_E,null,be.createElement(xA,{label: "名称",initialValue:this.props.initialName,onValueChange:this.updateTagName}),this.renderPreviousTags()),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Create Tag",okButtonDisabled:t})))}renderPreviousTags(){if(!Lt())return null;const{localTags:e}=this.props,{previousTags:t,tagName:n}=this.state;if(null===t||null===e||0===e.size)return null;const r=t.slice(-3);return be.createElement(be.Fragment,null,be.createElement("p",null,"Previous Tags"),0===r.length?be.createElement("p",null,`No matches found for '${n}'`):r.map(((e,t)=>be.createElement(QE,{key:t},e))))}getCurrentError(){return this.state.tagName.length>245?be.createElement(be.Fragment,null,"The tag name cannot be longer than ",245," characters"):this.props.localTags&&this.props.localTags.has(this.state.tagName)?be.createElement(be.Fragment,null,"A tag named ",be.createElement(QE,null,this.state.tagName)," already exists"):null}getExistingTagsFiltered(e=""){return null===this.props.localTags?null:Array.from(this.props.localTags.keys()).filter((t=>t.includes(e)))}updateTagName=e=>{this.setState({tagName:e,previousTags:this.getExistingTagsFiltered(e)})};createTag=async()=>{const e=this.state.tagName,t=this.props.repository;if(e.length>0){this.setState({isCreatingTag:!0});const n=bE("create tag",t);await this.props.dispatcher.createTag(t,e,this.props.targetCommitSha),n.done(),this.props.onDismissed()}}}class i_ extends be.Component{constructor(e){super(e),this.state={isDeleting:!1}}render(){return be.createElement(FE,{id:"delete-tag",title:"删除标签",type:"warning",onSubmit:this.DeleteTag,onDismissed:this.props.onDismissed,disabled:this.state.isDeleting,loading:this.state.isDeleting,role:"alertdialog",ariaDescribedBy:"delete-tag-confirmation"},be.createElement(_E,null,be.createElement("p",{id:"delete-tag-confirmation"},"Are you sure you want to delete the tag"," ",be.createElement(QE,null,this.props.tagName),"?")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText: "删除"})))}DeleteTag=async()=>{const{dispatcher:e,repository:t,tagName:n}=this.props;this.setState({isDeleting:!0}),await e.deleteTag(t,n),this.props.onDismissed()}}class o_ extends be.Component{constructor(e){super(e),this.state={forkContributionTarget:Fr(e.repository)}}render(){const e=[{title:"为了为父项目做贡献",description:be.createElement(be.Fragment,null,"We will help you contribute to the"," ",be.createElement("strong",null,this.props.repository.gitHubRepository.parent.fullName)," ","repository"),key:Tr.Parent},{title:"出于自己的目的",description:be.createElement(be.Fragment,null,"We will help you contribute to the"," ",be.createElement("strong",null,this.props.repository.gitHubRepository.fullName)," ","repository"),key:Tr.Self}];return be.createElement(FE,{id:"fork-settings",title:"你打算如何使用此 fork？",onSubmit:this.onSubmit,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement(mC,null,be.createElement(hI,{label:"此分支已更改。请选择下一步操作:",items:e,selectedKey:this.state.forkContributionTarget,onSelectionChanged:this.onSelectionChanged})),be.createElement(mC,null,be.createElement(tk,{repository:this.props.repository,forkContributionTarget:this.state.forkContributionTarget}))),be.createElement(HE,null,be.createElement(UE,{okButtonText:"确定"})))}onSelectionChanged=e=>{this.setState({forkContributionTarget:e})};onSubmit=async()=>{this.props.dispatcher.updateRepositoryWorkflowPreferences(this.props.repository,{forkContributionTarget:this.state.forkContributionTarget}),this.props.onDismissed()}}class s_ extends be.Component{constructor(e){super(e),this.state={isDiscardingSelection:!1,confirmDiscardSelection:!0}}getOkButtonLabel(){return"Discard Changes"}render(){const e=this.state.isDiscardingSelection;return be.createElement(FE,{id:"discard-changes",title:"确认放弃更改",onDismissed:this.props.onDismissed,onSubmit:this.discard,dismissable:!e,loading:e,disabled:e,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"确定要放弃选中的更改吗？"),be.createElement("ul",null,be.createElement("li",null,be.createElement(Pk,{path:this.props.file.path}))),be.createElement(GC,{label:"不再显示此消息",value:this.state.confirmDiscardSelection?jC.Off:jC.On,onChange:this.onConfirmDiscardSelectionChanged})),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:this.getOkButtonLabel()})))}discard=async()=>{this.setState({isDiscardingSelection:!0}),await this.props.dispatcher.discardChangesFromSelection(this.props.repository,this.props.file.path,this.props.diff,this.props.selection),this.props.dispatcher.setConfirmDiscardChangesSetting(this.state.confirmDiscardSelection),this.props.onDismissed()};onConfirmDiscardSelectionChanged=e=>{const t=!e.currentTarget.checked;this.setState({confirmDiscardSelection:t})}}class a_ extends be.Component{constructor(e){super(e),this.state={stashingAndRetrying:!1}}render(){const e=this.props.files.length>0?" The following files would be overwritten:":null;return be.createElement(FE,{title:"错误",id:"local-changes-overwritten",loading:this.state.stashingAndRetrying,disabled:this.state.stashingAndRetrying,onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,type:"error",role:"alertdialog",ariaDescribedBy:"local-changes-error-description"},be.createElement(_E,null,be.createElement("div",{id:"local-changes-error-description"},be.createElement("p",null,"Unable to ",this.getRetryActionName()," when changes are present on your branch.",e),this.renderFiles(),this.renderStashText())),this.renderFooter())}renderFiles(){const{files:e}=this.props;return 0===e.length?null:be.createElement("div",{className:"files-list"},be.createElement("ul",null,e.map((e=>be.createElement("li",{key:e},be.createElement(Pk,{path:e}))))))}renderStashText(){return this.props.hasExistingStash&&!this.state.stashingAndRetrying?null:be.createElement("p",null,"You can stash your changes now and recover them afterwards.")}renderFooter(){return this.props.hasExistingStash&&!this.state.stashingAndRetrying?be.createElement(WE,null):be.createElement(HE,null,be.createElement(UE,{okButtonText:"Stash Changes and Continue",okButtonTitle:"This will create a stash with your current changes. You can recover them by restoring the stash afterwards.",cancelButtonText:"关闭"}))}onSubmit=async()=>{const{hasExistingStash:e,repository:t,dispatcher:n,retryAction:r}=this.props;e||(this.setState({stashingAndRetrying:!0}),await n.createStashForCurrentBranch(t,!1)&&await n.performRetry(r)),this.props.onDismissed()};getRetryActionName(){switch(this.props.retryAction.type){case ot.Checkout:return"checkout";case ot.Pull:return"pull";case ot.Merge:return"merge";case ot.Rebase:return"rebase";case ot.Clone:return"clone";case ot.Fetch:return"fetch";case ot.Push:return"push";case ot.CherryPick:case ot.CreateBranchForCherryPick:return"cherry-pick";case ot.Squash:return"squash";case ot.Reorder:return"reorder";case ot.DiscardChanges:return"discard changes";default:et(this.props.retryAction,`Unknown retryAction: ${this.props.retryAction}`)}}}class l_ extends be.Component{timeoutId=null;onEnterDropTarget=null;onLeaveDropTargetDisposable=null;constructor(e){super(e),this.state={showTooltip:!1,currentDropTarget:null}}clearTimeout(){null!==this.timeoutId&&window.clearTimeout(this.timeoutId)}setToolTipTimer(e){this.setState({showTooltip:!1}),this.clearTimeout(),this.timeoutId=window.setTimeout((()=>this.setState({showTooltip:!0})),e)}renderDragToolTip(){const{showTooltip:e,currentDropTarget:t}=this.state;if(!e||null===t)return;let n;switch(t.type){case ea.Branch:const e=null;n=be.createElement(be.Fragment,null,e,be.createElement("span",null,be.createElement("span",{className:"copy-to"},"Copy to"),be.createElement("span",{className:"branch-name"},t.branchName)));break;case ea.Commit:const r=this.props.selectedCommits.length+1;n=be.createElement(be.Fragment,null,be.createElement("span",null,"Squash ",r," commits"));break;case ea.ListInsertionPoint:if(t.data.type!==Js.Commit){n=be.createElement(be.Fragment,null,be.createElement("span",null,"'Insert here'"));break}const i=1===t.data.commits.length?"commit":"commits";n=be.createElement(be.Fragment,null,be.createElement("span",null,`Move ${i} here`));break;default:et(0,`Unknown drop target type: ${t}`)}return be.createElement("div",{className:"tool-tip-contents"},be.createElement("div",null,n))}componentDidMount(){this.onEnterDropTarget=Zs.onEnterDropTarget((e=>{switch(this.setState({currentDropTarget:e}),e.type){case ea.Branch:case ea.Commit:case ea.ListInsertionPoint:this.setToolTipTimer(1500);break;default:et(0,`Unknown drop target type: ${e}`)}})),this.onLeaveDropTargetDisposable=Zs.onLeaveDropTarget((()=>{this.setState({currentDropTarget:null,showTooltip:!1})}))}componentWillUnmount(){this.clearTimeout(),null!==this.onEnterDropTarget&&(this.onEnterDropTarget.dispose(),this.onEnterDropTarget=null),null!==this.onLeaveDropTargetDisposable&&(this.onLeaveDropTargetDisposable.dispose(),this.onLeaveDropTargetDisposable=null)}render(){const{commit:e,gitHubRepository:t,selectedCommits:n,emoji:r}=this.props,i=n.length,o=Vr()({"multiple-selected":i>1});return be.createElement("div",{id:"commit-drag-element",className:o},be.createElement("div",{className:"commit-box"},be.createElement("div",{className:"count"},i),be.createElement(AD,{gitHubRepository:t,commit:e,selectedCommits:n,emoji:r,showUnpushedIndicator:!1})),this.renderDragToolTip())}}class c_ extends be.Component{constructor(e){super(e),this.state={askToMoveToApplicationsFolder:!0}}render(){return be.createElement(FE,{title:"将 GitHub 桌面版移动到应用程序文件夹中？",id:"move-to-applications-folder",dismissable:!1,onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"We've detected that you're not running GitHub Desktop from the Applications folder of your machine. This could cause problems with the app, including impacting your ability to sign in.",be.createElement("br",null),be.createElement("br",null),"Do you want to move GitHub Desktop to the Applications folder now? This will also restart the app."),be.createElement("div",null,be.createElement(GC,{label:"不再显示此消息",value:this.state.askToMoveToApplicationsFolder?jC.Off:jC.On,onChange:this.onAskToMoveToApplicationsFolderChanged}))),this.renderFooter())}renderFooter(){return be.createElement(HE,null,be.createElement(UE,{okButtonText:"移动并重启",okButtonTitle:"This will move GitHub Desktop to the Applications folder in your machine and restart the app.",cancelButtonText:"暂不",onCancelButtonClick:this.onNotNow}))}onAskToMoveToApplicationsFolderChanged=e=>{const t=!e.currentTarget.checked;this.setState({askToMoveToApplicationsFolder:t})};onNotNow=()=>{this.props.onDismissed(),this.props.dispatcher.setAskToMoveToApplicationsFolderSetting(this.state.askToMoveToApplicationsFolder)};onSubmit=async()=>{this.props.onDismissed();try{await this.props.dispatcher.moveToApplicationsFolder()}catch(e){this.props.dispatcher.postError(e)}}}class u_ extends be.Component{constructor(e){super(e),this.state={newAlias:e.repository.alias??e.repository.name}}render(){const e=this.props.repository,t=null===e.alias?"创建":"变更";return be.createElement(FE,{id:"change-repository-alias",title:`${t} Repository Alias`,ariaDescribedBy:"change-repository-alias-description",onDismissed:this.props.onDismissed,onSubmit:this.changeAlias},be.createElement(_E,null,be.createElement("p",{id:"change-repository-alias-description"},'请输入别名，此别名对应的存储库是 "',Or(e),'".'," "),be.createElement("p",null,be.createElement(dC,{ariaLabel:"Alias",value:this.state.newAlias,onValueChanged:this.onNameChanged})),null!==e.gitHubRepository&&be.createElement("p",{className:"description"},"This will not affect the original repository name on GitHub.")),be.createElement(HE,null,be.createElement(UE,{okButtonText:`${t} Alias`,okButtonDisabled:0===this.state.newAlias.length})))}onNameChanged=e=>{this.setState({newAlias:e})};changeAlias=()=>{this.props.dispatcher.changeRepositoryAlias(this.props.repository,this.state.newAlias),this.props.onDismissed()}}var h_=n(6215),p_=n.n(h_);class d_ extends be.Component{constructor(e){super(e),this.state={}}renderList(e){if(0===e.length)return null;const t=new Array;for(const[n,r]of e.entries())t.push(be.createElement("li",{key:n},be.createElement(Uk,{text:r.message,emoji:this.props.emoji,renderUrlsAsLinks:!0,repository:WI})));return be.createElement("div",{className:"section"},be.createElement("ul",{className:"entries"},t))}renderConfetti(){const{confettiHost:e}=this.state;if(e){const{left:e,top:t}=this.state.confettiRect??{left:0,top:0};return be.createElement(p_(),{recycle:!1,numberOfPieces:750,width:window.innerWidth,height:window.innerHeight,style:{left:e,top:t}})}}updateConfettiRect=e=>{if(e.currentTarget instanceof HTMLElement){const{offsetLeft:t,offsetTop:n}=e.currentTarget,{innerWidth:r,innerHeight:i}=window,o=new DOMRect(-Math.round(t),-Math.round(n),r,i);this.setState({confettiRect:o})}};onDialogRef=e=>{this.setState({confettiHost:e??void 0}),e?.addEventListener("dialog-show",this.updateConfettiRect)};render(){const e=null!==this.props.latestVersion?` ${this.props.latestVersion}`:"",t=be.createElement(be.Fragment,null,"Thanks so much for all your hard work on GitHub Desktop",e,". We're so grateful for your willingness to contribute and make the app better for everyone!");return be.createElement(FE,{id:"thank-you-notes",onDismissed:this.props.onDismissed,title:`Thank you ${this.props.friendlyName}! 🎉`,onDialogRef:this.onDialogRef},be.createElement(_E,null,be.createElement("div",{className:"container"},be.createElement("div",{className:"thank-you-note"},t),be.createElement("div",{className:"contributions-heading"},"You contributed:"),be.createElement("div",{className:"contributions"},this.renderList(this.props.userContributions)),this.renderConfetti())))}}function m_(e,t,n,r){const i=[n],o={version:r,checkedUsers:[...void 0===t||t.version!==r?[]:t.checkedUsers,...i]};e.setLastThankYou(o)}class f_ extends be.Component{constructor(e){super(e),this.state=Ck(e,"showCoAuthoredBy","coAuthors")}render(){return be.createElement(FE,{id:"commit-message-dialog",title:this.props.dialogTitle,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement(xk,{branch:this.props.branch,mostRecentLocalCommit:null,commitAuthor:this.props.commitAuthor,dispatcher:this.props.dispatcher,isShowingModal:!0,isShowingFoldout:!1,commitButtonText:this.props.dialogButtonText,commitToAmend:null,repository:this.props.repository,commitMessage:this.props.commitMessage,focusCommitMessage:!1,autocompletionProviders:this.props.autocompletionProviders,showCoAuthoredBy:this.state.showCoAuthoredBy,coAuthors:this.state.coAuthors,placeholder:"",prepopulateCommitSummary:this.props.prepopulateCommitSummary,key:this.props.repository.id,showBranchProtected:this.props.showBranchProtected,repoRulesInfo:this.props.repoRulesInfo,aheadBehind:this.props.aheadBehind,showNoWriteAccess:this.props.showNoWriteAccess,commitSpellcheckEnabled:this.props.commitSpellcheckEnabled,showCommitLengthWarning:this.props.showCommitLengthWarning,onCoAuthorsUpdated:this.onCoAuthorsUpdated,onShowCoAuthoredByChanged:this.onShowCoAuthorsChanged,onConfirmCommitWithUnknownCoAuthors:this.onConfirmCommitWithUnknownCoAuthors,onCreateCommit:this.props.onSubmitCommitMessage,anyFilesAvailable:!0,anyFilesSelected:!0,onCommitMessageFocusSet:QR(),onRefreshAuthor:this.onRefreshAuthor,onShowPopup:this.onShowPopup,onShowFoldout:this.onShowFoldout,onCommitSpellcheckEnabledChanged:this.onCommitSpellcheckEnabledChanged,repositoryAccount:this.props.repositoryAccount,onStopAmending:this.onStopAmending,onShowCreateForkDialog:this.onShowCreateForkDialog})))}onCoAuthorsUpdated=e=>this.setState({coAuthors:e});onShowCoAuthorsChanged=e=>this.setState({showCoAuthoredBy:e});onConfirmCommitWithUnknownCoAuthors=(e,t)=>{const{dispatcher:n}=this.props;n.showUnknownAuthorsCommitWarning(e,t)};onRefreshAuthor=()=>this.props.dispatcher.refreshAuthor(this.props.repository);onShowPopup=e=>this.props.dispatcher.showPopup(e);onShowFoldout=e=>this.props.dispatcher.showFoldout(e);onCommitSpellcheckEnabledChanged=e=>this.props.dispatcher.setCommitSpellcheckEnabled(e);onStopAmending=()=>this.props.dispatcher.stopAmendingRepository(this.props.repository);onShowCreateForkDialog=()=>{_r(this.props.repository)&&this.props.dispatcher.showCreateForkDialog(this.props.repository)}}function g_(e,t){return be.createElement("li",{key:e,className:"unmerged-file-status-conflicts"},be.createElement(si,{symbol:Ai,className:"file-octicon"}),t)}const y_=(e,t,n,r,i,o)=>()=>{lC(v_(e,n,r,t,i,o))},b_=(e,t,n)=>()=>n.updateManualConflictResolution(t,e,null),w_=(t,n,r,i,o,s,a)=>()=>{const l=(0,e.join)(n.path,t),c=[{label:Th,action:()=>Vk(l,r)},{label:Rh,action:()=>m.shell.showItemInFolder(l)},{type:"separator"},...v_(t,n,r,i,o,s)];a(!0),lC(c).then((()=>{a(!1)}))};function v_(e,t,n,r,i,o){return[{label:ec(r.entry.us,i),action:()=>n.updateManualConflictResolution(t,e,Fp.ours)},{label:ec(r.entry.them,o),action:()=>n.updateManualConflictResolution(t,e,Fp.theirs)}]}const C_=e=>{if(Wo(e.status)&&0===e.status.conflictMarkerCount)return be.createElement("div",{className:"file-conflicts-status"},"No conflicts remaining");const t=function(e,t,n){return t===Fp.ours?Jl(e.entry.us,n):t===Fp.theirs?Jl(e.entry.them,n):"No conflicts remaining"}(e.status,e.manualResolution,e.branch);return be.createElement("div",{className:"file-conflicts-status"},t)};const S_="Manual conflict";class E_ extends be.Component{constructor(e){super(e),this.state={isCommitting:!1,isAborting:!1,isFileResolutionOptionsMenuOpen:!1}}componentWillUnmount(){const{workingDirectory:e,userHasResolvedConflicts:t,manualResolutions:n,someConflictsHaveBeenResolved:r}=this.props;t||void 0===r||tc(e,n).length>0&&r()}onSubmit=async()=>{this.setState({isCommitting:!0}),await this.props.onSubmit()};onAbort=async e=>{e.preventDefault(),this.setState({isAborting:!0}),await this.props.onAbort(),this.setState({isAborting:!1})};openThisRepositoryInShell=()=>this.props.openRepositoryInShell(this.props.repository);setIsFileResolutionOptionsMenuOpen=e=>{this.setState({isFileResolutionOptionsMenuOpen:e})};renderUnmergedFiles(t){return be.createElement("ul",{className:"unmerged-file-statuses"},t.map((t=>{return Xl(t.status)?Wo((o={path:t.path,status:t.status,resolvedExternalEditor:this.props.resolvedExternalEditor,openFileInExternalEditor:this.props.openFileInExternalEditor,repository:this.props.repository,dispatcher:this.props.dispatcher,manualResolution:this.props.manualResolutions.get(t.path),ourBranch:this.props.ourBranch,theirBranch:this.props.theirBranch,isFileResolutionOptionsMenuOpen:this.state.isFileResolutionOptionsMenuOpen,setIsFileResolutionOptionsMenuOpen:this.setIsFileResolutionOptionsMenuOpen}).status)&&Zl(o.status,o.manualResolution)?(e=>{const t=(n=e.status.conflictMarkerCount,Math.ceil(n/3));var n;const r=1===t?"1 conflict":`${t} conflicts`,i=null===e.resolvedExternalEditor,o=function(e){if(null===e)return"No editor configured in Preferences > Advanced"}(e.resolvedExternalEditor),s=w_(e.path,e.repository,e.dispatcher,e.status,e.ourBranch,e.theirBranch,e.setIsFileResolutionOptionsMenuOpen),a=be.createElement(be.Fragment,null,be.createElement("div",{className:"column-left"},be.createElement(Pk,{path:e.path}),be.createElement("div",{className:"file-conflicts-status"},r)),be.createElement("div",{className:"action-buttons"},be.createElement(ii,{onClick:e.onOpenEditorClick,disabled:i,tooltip:o,className:"small-button button-group-item"},`打开于 ${e.resolvedExternalEditor||"editor"}`),be.createElement(ii,{onClick:s,className:"small-button button-group-item arrow-menu",ariaLabel:"File resolution options",ariaHaspopup:"menu",ariaExpanded:e.isFileResolutionOptionsMenuOpen},be.createElement(si,{symbol:uo}))));return g_(e.path,a)})({path:o.path,status:o.status,resolvedExternalEditor:o.resolvedExternalEditor,onOpenEditorClick:()=>o.openFileInExternalEditor((0,e.join)(o.repository.path,o.path)),repository:o.repository,dispatcher:o.dispatcher,ourBranch:o.ourBranch,theirBranch:o.theirBranch,isFileResolutionOptionsMenuOpen:o.isFileResolutionOptionsMenuOpen,setIsFileResolutionOptionsMenuOpen:o.setIsFileResolutionOptionsMenuOpen}):$o(o.status)&&Zl(o.status,o.manualResolution)?(e=>{const t=y_(e.path,e.status,e.repository,e.dispatcher,e.ourBranch,e.theirBranch),{ourBranch:n,theirBranch:r}=e,{entry:i}=e.status;let o=S_;if([i.us,i.them].includes(Po.Deleted)){let e="target branch";i.us===Po.Deleted&&void 0!==n&&(e=n),i.them===Po.Deleted&&void 0!==r&&(e=r),o=`File does not exist on ${e}.`}const s=be.createElement(be.Fragment,null,be.createElement("div",{className:"column-left"},be.createElement(Pk,{path:e.path}),be.createElement("div",{className:"file-conflicts-status"},o)),be.createElement("div",{className:"action-buttons"},be.createElement(ii,{className:"small-button button-group-item resolve-arrow-menu",onClick:t},"Resolve",be.createElement(si,{symbol:uo}))));return g_(e.path,s)})({path:o.path,status:o.status,repository:o.repository,dispatcher:o.dispatcher,ourBranch:o.ourBranch,theirBranch:o.theirBranch}):(e=>be.createElement("li",{key:e.path,className:"unmerged-file-status-resolved"},be.createElement(si,{symbol:Ai,className:"file-octicon"}),be.createElement("div",{className:"column-left"},be.createElement(Pk,{path:e.path}),C_({path:e.path,status:e.status,branch:e.branch,manualResolution:e.manualResolution,repository:e.repository,dispatcher:e.dispatcher})),be.createElement(ii,{className:"undo-button",onClick:b_(e.path,e.repository,e.dispatcher)},"Undo"),be.createElement("div",{className:"green-circle"},be.createElement(si,{symbol:pi}))))({path:o.path,status:o.status,repository:o.repository,dispatcher:o.dispatcher,manualResolution:o.manualResolution,branch:(n=o.manualResolution,r=o.ourBranch,i=o.theirBranch,n===Fp.ours?r:n===Fp.theirs?i:void 0)}):null;var n,r,i,o})))}renderContent(e,t){return 0===e.length?be.createElement("div",{className:"all-conflicts-resolved"},be.createElement("div",{className:"green-circle"},be.createElement(si,{symbol:pi})),be.createElement("div",{className:"message"},"All conflicts resolved")):be.createElement(be.Fragment,null,function(e){const t=1===e?"1 conflicted file":`${e} conflicted files`;return be.createElement("h3",{className:"summary"},t)}(t),this.renderUnmergedFiles(e),(n=this.openThisRepositoryInShell,be.createElement("div",null,be.createElement(CE,{onClick:n},"打开于 command line,")," ","your tool of choice, or close to resolve manually.")));var n}render(){const{workingDirectory:e,manualResolutions:t,headerTitle:n,submitButton:r,abortButton:i}=this.props,o=function(e){return e.files.filter((e=>Xl(e.status)))}(this.props.workingDirectory),s=nc(e,t),a=s.length>0?"Resolve all changes before continuing":void 0;return be.createElement(FE,{id:"conflicts-dialog",dismissable:!this.state.isCommitting,onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,title:n,loading:this.state.isCommitting,disabled:this.state.isCommitting},be.createElement(_E,null,this.renderContent(o,s.length)),be.createElement(HE,null,be.createElement(UE,{okButtonText:r,okButtonDisabled:s.length>0,okButtonTitle:a,cancelButtonText:i,onCancelButtonClick:this.onAbort,cancelButtonDisabled:this.state.isAborting})))}}class k_ extends be.Component{constructor(e){super(e),this.state={isAborting:!1}}onSubmit=async()=>{this.setState({isAborting:!0}),await this.props.onConfirmAbort(),this.setState({isAborting:!1})};onCancel=async()=>this.props.onReturnToConflicts();render(){const{operation:e}=this.props;return be.createElement(FE,{id:"abort-warning",title:`Confirm Abort ${e}`,onDismissed:this.onCancel,onSubmit:this.onSubmit,disabled:this.state.isAborting,type:"warning",role:"alertdialog",ariaDescribedBy:"abort-operation-confirmation"},be.createElement(_E,null,be.createElement("div",{className:"column-left",id:"abort-operation-confirmation"},be.createElement("p",null,"Are you sure you want to abort this ",e.toLowerCase(),"?"),be.createElement("p",null,"This will take you back to the original branch state and the conflicts you have already resolved will be discarded."))),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:`Abort ${e}`})))}}class R_ extends be.Component{render(){const{progress:e,operation:t,emoji:n}=this.props,{position:r,totalCommitCount:i,value:o,currentCommitSummary:s}=e,a=hc(o);return be.createElement(FE,{dismissable:!1,id:"multi-commit-progress",title:`${t} in progress`},be.createElement(_E,null,be.createElement("div",null,be.createElement("progress",{value:a}),be.createElement("div",{className:"details"},be.createElement("div",{className:"green-circle"},be.createElement(si,{symbol:pi})),be.createElement("div",{className:"summary"},be.createElement("div",{className:"message"},"Commit ",r," of ",i),be.createElement("div",{className:"detail"},be.createElement(Uk,{emoji:n,text:s||""})))))))}}class x_ extends be.Component{constructor(e){super(e),this.state={askForConfirmationOnForcePush:e.askForConfirmationOnForcePush}}render(){const{operation:e,onDismissed:t}=this.props,n=`${e} Will Require Force Push`;return be.createElement(FE,{title:n,onDismissed:t,onSubmit:this.onBegin,dismissable:!1,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"Are you sure you want to ",e.toLowerCase(),"?"),be.createElement("p",null,"At the end of the ",e.toLowerCase()," flow, GitHub Desktop will enable you to force push the branch to update the upstream branch. Force pushing will alter the history on the remote and potentially cause problems for others collaborating on this branch."),be.createElement("div",null,be.createElement(GC,{label:"不再显示此消息",value:this.state.askForConfirmationOnForcePush?jC.Off:jC.On,onChange:this.onAskForConfirmationOnForcePushChanged}))),be.createElement(HE,null,be.createElement(UE,{okButtonText:`Begin ${e}`,onCancelButtonClick:this.props.onDismissed})))}onAskForConfirmationOnForcePushChanged=e=>{const t=!e.currentTarget.checked;this.setState({askForConfirmationOnForcePush:t})};onBegin=async()=>{this.props.dispatcher.setConfirmForcePushSetting(this.state.askForConfirmationOnForcePush),this.props.onBegin()}}class T_ extends be.Component{onFlowEnded=()=>{this.props.dispatcher.closePopup(nl.MultiCommitOperation),this.props.dispatcher.endMultiCommitOperation(this.props.repository)};endFlowInvalidState(e=!1){const{step:t,operationDetail:n}=this.props.state,r=`[${n.kind}] - Invalid state - ${n.kind} ended during ${t.kind}.`;if(e)return this.onFlowEnded(),void log.error(r);throw new Error(r)}onInvokeConflictsDialogDismissed=e=>{const{repository:t,dispatcher:n,state:r}=this.props,{targetBranch:i,step:o}=r;if("ShowConflicts"!==o.kind)return void this.endFlowInvalidState();const{conflictState:s}=o;n.setMultiCommitOperationStep(t,{kind:"HideConflicts",conflictState:s});const a=be.createElement(be.Fragment,null,e," ",null!==i?be.createElement("strong",null,i.name):null);return this.props.dispatcher.closePopup(nl.MultiCommitOperation),n.onConflictsFoundBanner(t,a,s)};onConfirmingAbort=async()=>{const{repository:e,dispatcher:t,workingDirectory:n,state:r}=this.props,{userHasResolvedConflicts:i,step:o}=r;if("ShowConflicts"!==o.kind)return void this.endFlowInvalidState();const{conflictState:s}=o,a=tc(n,s.manualResolutions);if(!(i||a.length>0))return this.onAbort();t.setMultiCommitOperationStep(e,{kind:"ConfirmAbort",conflictState:s})};moveToConflictState=()=>{const{dispatcher:e,repository:t,state:n}=this.props,{step:r}=n;if("ConfirmAbort"!==r.kind)return void this.endFlowInvalidState();const{conflictState:i}=r;return e.setMultiCommitOperationStep(t,{kind:"ShowConflicts",conflictState:i})};setConflictsHaveBeenResolved=()=>{this.props.dispatcher.setConflictsResolved(this.props.repository)};render(){const{state:e}=this.props,{step:t}=e;switch(t.kind){case"ChooseBranch":return this.renderChooseBranch();case"ShowProgress":const{emoji:n}=this.props;return be.createElement(R_,{progress:e.progress,emoji:n,operation:e.operationDetail.kind});case"ShowConflicts":{const{repository:e,resolvedExternalEditor:n,openFileInExternalEditor:r,openRepositoryInShell:i,dispatcher:o,workingDirectory:s,state:a}=this.props,{userHasResolvedConflicts:l,operationDetail:c}=a,{manualResolutions:u,ourBranch:h,theirBranch:p}=t.conflictState,d=c.kind,m=`Continue ${d}`,f=`Abort ${d}`;return be.createElement(E_,{dispatcher:o,repository:e,workingDirectory:s,userHasResolvedConflicts:l,resolvedExternalEditor:n,ourBranch:h,theirBranch:p,manualResolutions:u,headerTitle:`Resolve conflicts before ${c.kind}`,submitButton:m,abortButton:f,onSubmit:this.onContinueAfterConflicts,onAbort:this.onConfirmingAbort,onDismissed:this.onConflictsDialogDismissed,openFileInExternalEditor:r,openRepositoryInShell:i,someConflictsHaveBeenResolved:this.setConflictsHaveBeenResolved})}case"ConfirmAbort":return be.createElement(k_,{operation:this.props.state.operationDetail.kind,onConfirmAbort:this.onAbort,onReturnToConflicts:this.moveToConflictState});case"WarnForcePush":const{dispatcher:r,askForConfirmationOnForcePush:i}=this.props;return be.createElement(x_,{operation:e.operationDetail.kind,dispatcher:r,askForConfirmationOnForcePush:i,onBegin:this.onBeginOperation,onDismissed:this.onFlowEnded});case"CreateBranch":return this.renderCreateBranch();case"HideConflicts":return null;default:return et(0,`Unknown multi commit operation step found: ${t}`)}}}class D_ extends T_{onContinueAfterConflicts=async()=>{const{repository:e,dispatcher:t,workingDirectory:n,state:r,conflictState:i}=this.props,{operationDetail:o,originalBranchTip:s}=r;if(null===i||null===s||!Qe(i)||(a=o,!Object.keys({commits:[],currentTip:""}).every((e=>e in a))))return void this.endFlowInvalidState();var a;const{targetBranch:l,baseBranch:c}=i,{commits:u,currentTip:h}=o;await t.switchMultiCommitOperationToShowProgress(e);const p={kind:"rebase",currentTip:h,targetBranch:l,baseBranch:c,originalBranchTip:s,baseBranchTip:h,manualResolutions:i.manualResolutions},d=await t.continueRebase(this.rebaseKind,e,n,p),m="Rebase"===this.rebaseKind?c||"":`${this.rebaseKind.toLowerCase()} commit`;await t.processMultiCommitOperationRebaseResult(this.rebaseKind,e,d,u.length+1,l,m)};onAbort=async()=>{const{repository:e,dispatcher:t}=this.props;return this.onFlowEnded(),t.abortRebase(e)};onConflictsDialogDismissed=()=>{this.onInvokeConflictsDialogDismissed(this.conflictDialogOperationPrefix)}}class A_ extends D_{conflictDialogOperationPrefix="squashing commits on";rebaseKind="Squash";onBeginOperation=()=>{const{repository:e,dispatcher:t,state:n}=this.props,{operationDetail:r}=n;if("Squash"!==r.kind)return void this.endFlowInvalidState();const{targetCommit:i,lastRetainedCommitRef:o,commitContext:s,commits:a}=r;return t.squash(e,a,i,o,s,!0)}}class P_ extends be.Component{constructor(e){super(e);const t=this.resolveSelectedBranch();this.state={selectedBranch:t,filterText:"",statusPreview:null}}componentDidMount(){const{selectedBranch:e}=this.state;null!==e&&this.updateStatus(e)}getSubmitButtonToolTip=()=>{};onFilterTextChanged=e=>{this.setState({filterText:e})};onItemClick=(e,t)=>{if("keyboard"!==t.kind||"Enter"!==t.event.key)return;t.event.preventDefault();const{selectedBranch:n}=this.state;null!==n&&n.name===e.name&&this.start()};onSelectionChanged=async e=>{if(null!=e)return this.setState({selectedBranch:e}),this.updateStatus(e);this.setState({selectedBranch:e})};resolveSelectedBranch(){const{currentBranch:e,defaultBranch:t,initialBranch:n}=this.props;return void 0!==n?n:e===t?null:t}onOperationChange=e=>{if(!yd(e.id))return;const{dispatcher:t,repository:n}=this.props,{selectedBranch:r}=this.state;switch(e.id){case"Merge":t.startMergeBranchOperation(n,!1,r);break;case"Squash":t.startMergeBranchOperation(n,!0,r);break;case"Rebase":t.showRebaseDialog(n,r);break;case"Cherry-pick":case"Reorder":break;default:et(e.id,`Unknown operation value: ${e.id}`)}};renderStatusPreview(){const{currentBranch:e}=this.props,{selectedBranch:t,statusPreview:n}=this.state;return null==n||null==e||null==t||e.name===t.name?null:be.createElement("div",{className:"merge-status-component"},this.renderActionStatusIcon(),be.createElement("p",{className:"merge-info",id:"merge-status-preview"},n))}renderBranch=(e,t)=>zx(e,t,this.props.currentBranch);getBranchAriaLabel=e=>qx(e);render(){const{selectedBranch:e}=this.state,{currentBranch:t,operation:n}=this.props,r=_v(t.name,40);return be.createElement(FE,{id:"choose-branch",onDismissed:this.props.onDismissed,onSubmit:this.start,dismissable:!0,title:this.getDialogTitle(r)},be.createElement(_E,null,be.createElement(Dx,{allBranches:this.props.allBranches,currentBranch:t,defaultBranch:this.props.defaultBranch,recentBranches:this.props.recentBranches,filterText:this.state.filterText,onFilterTextChanged:this.onFilterTextChanged,selectedBranch:e,onSelectionChanged:this.onSelectionChanged,canCreateNewBranch:!1,renderBranch:this.renderBranch,getBranchAriaLabel:this.getBranchAriaLabel,onItemClick:this.onItemClick})),be.createElement(HE,null,this.renderStatusPreview(),be.createElement(mD,{checkedOption:n,options:[{label:"创建合并提交",description:"来自所选分支的提交将通过合并提交添加到当前分支.",id:"Merge"},{label:"压缩合并",description:"选定分支中的提交将合并为当前分支中的一个提交.",id:"Squash"},{label:"变基",description:"来自所选分支的提交将重新设置基础并添加到当前分支.",id:"Rebase"}],disabled:!this.canStart(),ariaDescribedBy:"merge-status-preview",dropdownAriaLabel:"Merge options",tooltip:this.getSubmitButtonToolTip(),onCheckedOptionChange:this.onOperationChange})))}}class I_ extends P_{commitCount=0;mergeStatus=null;start=()=>{if(!this.canStart())return;const{selectedBranch:e}=this.state,{operation:t,dispatcher:n,repository:r}=this.props;e&&(n.mergeBranch(r,e,this.mergeStatus,"Squash"===t),this.props.dispatcher.closePopup(nl.MultiCommitOperation))};canStart=()=>{const e=this.state.selectedBranch,t=this.props.currentBranch,n=null!==e&&null!==t&&e.name===t.name,r=void 0!==this.commitCount&&this.commitCount>0,i=null===this.mergeStatus||this.mergeStatus.kind!==Cu.Invalid;return null!==e&&!n&&r&&i};onSelectionChanged=async e=>{if(null!=e)return this.setState({selectedBranch:e}),this.updateStatus(e);this.setState({selectedBranch:e}),this.commitCount=0,this.mergeStatus=null};renderActionStatusIcon=()=>we().createElement(tA,{status:this.mergeStatus,classNamePrefix:"merge-status"});getDialogTitle=e=>{const t="Squash"===this.props.operation?"压缩并":null;return we().createElement(we().Fragment,null,t,"合并到 ",we().createElement("strong",null,e))};updateStatus=async e=>{const{currentBranch:t,repository:n}=this.props;this.mergeStatus={kind:Cu.Loading},this.updateMergeStatusPreview(e),null!=t&&(this.mergeStatus=await Ec((()=>Sd(n,t,e)),500).catch((e=>(log.error("Failed determining mergeability",e),{kind:Cu.Clean}))),this.updateMergeStatusPreview(e));const r=jp("",e.name),i=await Gp(this.props.repository,r);this.commitCount=i?i.behind:0,this.state.selectedBranch!==e&&(this.commitCount=0),this.updateMergeStatusPreview(e)};updateMergeStatusPreview(e){this.setState({statusPreview:this.getMergeStatusPreview(e)})}getMergeStatusPreview(e){const{currentBranch:t}=this.props;return null===this.mergeStatus?null:this.mergeStatus.kind===Cu.Loading?this.renderLoadingMergeMessage():this.mergeStatus.kind===Cu.Clean?this.renderCleanMergeMessage(e,t,this.commitCount):this.mergeStatus.kind===Cu.Invalid?this.renderInvalidMergeMessage():this.renderConflictedMergeMessage(e,t,this.mergeStatus.conflictedFiles)}renderLoadingMergeMessage(){return we().createElement(we().Fragment,null,"正在检查允许自动合并...")}renderCleanMergeMessage(e,t,n){if(0===n)return we().createElement(we().Fragment,null,"此分支是最新的 ",we().createElement("strong",null,e.name));const r=1===n?"commit":"commits";return we().createElement(we().Fragment,null,"这将合并",we().createElement("strong",null,` ${n} ${r}`)," 自 ",we().createElement("strong",null,e.name)," 到 ",we().createElement("strong",null,t.name))}renderInvalidMergeMessage(){return we().createElement(we().Fragment,null,"无法在此仓库中合并不相关的历史记录")}renderConflictedMergeMessage(e,t,n){const r=1===n?"文件":"文件";return we().createElement(we().Fragment,null,"这将会",we().createElement("strong",null,` ${n} 与 ${r} 冲突`)," 当合并时 ",we().createElement("strong",null,e.name)," 到 ",we().createElement("strong",null,t.name))}}class __ extends T_{onContinueAfterConflicts=async()=>{const{repository:e,dispatcher:t,workingDirectory:n,state:r,conflictState:i,state:{operationDetail:o}}=this.props;if("ShowConflicts"!==r.step.kind||null===i||!Xe(i)||"Merge"!==o.kind)return void this.endFlowInvalidState();const{theirBranch:s}=r.step.conflictState,{currentBranch:a}=i;await t.finishConflictedMerge(e,n,{type:vu.SuccessfulMerge,ourBranch:a,theirBranch:s},o.isSquash),await t.setCommitMessage(e,Ic),await this.props.dispatcher.changeRepositorySection(e,Ge.Changes),this.onFlowEnded(),t.incrementMetric("guidedConflictedMergeCompletionCount")};onAbort=async()=>{const{repository:e,dispatcher:t,state:{operationDetail:n}}=this.props;return this.onFlowEnded(),"Merge"===n.kind&&n.isSquash?t.abortSquashMerge(e):t.abortMerge(e)};onConflictsDialogDismissed=()=>{const{dispatcher:e,workingDirectory:t,conflictState:n}=this.props;null!==n&&Xe(n)?(e.incrementMetric("mergeConflictsDialogDismissalCount"),nc(t,n.manualResolutions).length>0&&e.incrementMetric("anyConflictsLeftOnMergeConflictsDialogDismissalCount"),this.onInvokeConflictsDialogDismissed("merge into")):this.endFlowInvalidState(!0)};renderChooseBranch=()=>{const{repository:e,dispatcher:t,state:n}=this.props,{step:r,operationDetail:i}=n;if("ChooseBranch"!==r.kind||"Merge"!==i.kind)return this.endFlowInvalidState(),null;const{defaultBranch:o,currentBranch:s,allBranches:a,recentBranches:l,initialBranch:c}=r,{isSquash:u}=i;return we().createElement(I_,{dispatcher:t,repository:e,allBranches:a,defaultBranch:o,recentBranches:l,currentBranch:s,initialBranch:c,operation:u?"Squash":"Merge",onDismissed:this.onFlowEnded})}}class N_ extends D_{conflictDialogOperationPrefix="reordering commits on";rebaseKind="Reorder";onBeginOperation=()=>{const{repository:e,dispatcher:t,state:n}=this.props,{operationDetail:r}=n;if("Reorder"!==r.kind)return void this.endFlowInvalidState();const{commits:i,beforeCommit:o,lastRetainedCommitRef:s}=r;return t.reorderCommits(e,i,o,s,!0)}}class O_ extends be.Component{constructor(e){super(e),this.state={selectedBranch:null,filterText:"",isCreateBranchState:0===e.allBranches.length}}onFilterTextChanged=e=>{this.setState({filterText:e})};onSelectionChanged=e=>{this.setState({selectedBranch:e})};renderBranch=(e,t)=>zx(e,t,this.props.currentBranch);getBranchAriaLabel=e=>qx(e);onEnterPressed=(e,t)=>{if("keyboard"!==t.kind||"Enter"!==t.event.key)return;t.event.preventDefault();const{selectedBranch:n}=this.state;null!==n&&n.name===e.name&&this.startCherryPick()};canCherryPickOntoSelectedBranch(){const{selectedBranch:e,isCreateBranchState:t}=this.state;return null!==e&&!this.selectedBranchIsCurrentBranch()||t}selectedBranchIsCurrentBranch(){const{selectedBranch:e}=this.state,t=this.props.currentBranch;return null!==e&&null!==t&&e.name===t.name}renderOkButtonText(){const{selectedBranch:e,isCreateBranchState:t}=this.state;if(t)return"Cherry-pick to New Branch";const n=this.props.commitCount>1?"commits":"commit",r=`Cherry-pick ${this.props.commitCount} ${n}`;return null!==e?be.createElement(be.Fragment,null,r," 到 ",be.createElement("strong",null,e.name),"…"):r}onFilterListResultsChanged=e=>{const{isCreateBranchState:t}=this.state;0!==e||t?e>0&&t&&this.setState({isCreateBranchState:!1}):this.setState({isCreateBranchState:!0})};render(){const e=this.selectedBranchIsCurrentBranch()?"You are not able to cherry-pick from and to the same branch":void 0,t=this.props.commitCount>1?"commits":"commit";return be.createElement(FE,{id:"cherry-pick",onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,dismissable:!0,title:be.createElement("strong",null,"Cherry-pick ",this.props.commitCount," ",t," to a branch")},be.createElement(_E,null,be.createElement(Dx,{allBranches:this.props.allBranches,currentBranch:this.props.currentBranch,defaultBranch:this.props.defaultBranch,recentBranches:this.props.recentBranches,filterText:this.state.filterText,onFilterTextChanged:this.onFilterTextChanged,onFilterListResultsChanged:this.onFilterListResultsChanged,selectedBranch:this.state.selectedBranch,onSelectionChanged:this.onSelectionChanged,canCreateNewBranch:!0,onCreateNewBranch:this.props.onCreateNewBranch,renderBranch:this.renderBranch,getBranchAriaLabel:this.getBranchAriaLabel,onItemClick:this.onEnterPressed})),be.createElement(HE,null,be.createElement(UE,{okButtonText:this.renderOkButtonText(),okButtonDisabled:!this.canCherryPickOntoSelectedBranch(),okButtonTitle:e,cancelButtonVisible:!1})))}onSubmit=async()=>{const{isCreateBranchState:e,filterText:t}=this.state;e?this.props.onCreateNewBranch(t):this.startCherryPick()};startCherryPick=async()=>{const{selectedBranch:e}=this.state;null!==e&&this.canCherryPickOntoSelectedBranch()&&this.props.onCherryPick(e)}}class M_ extends T_{onContinueAfterConflicts=async()=>{const{repository:e,dispatcher:t,workingDirectory:n,state:r,conflictState:i}=this.props,{operationDetail:o,targetBranch:s}=r;if(null===i||"Cherry-pick"!==o.kind||null===s)return void this.endFlowInvalidState();const{commits:a}=o;await t.switchMultiCommitOperationToShowProgress(e);const l={kind:"cherryPick",targetBranchName:s.name,manualResolutions:i.manualResolutions};await t.continueCherryPick(e,n.files,l,a,o.sourceBranch)};onAbort=async()=>{const{repository:e,dispatcher:t,state:n}=this.props,{operationDetail:r}=n;if("Cherry-pick"===r.kind)return this.onFlowEnded(),t.abortCherryPick(e,r.sourceBranch);this.endFlowInvalidState()};onConflictsDialogDismissed=()=>{this.onInvokeConflictsDialogDismissed("cherry-picking onto")};renderChooseBranch=()=>{const{state:{step:e,operationDetail:t}}=this.props;if("ChooseBranch"!==e.kind||"Cherry-pick"!==t.kind)return this.endFlowInvalidState(),null;const{allBranches:n,defaultBranch:r,currentBranch:i,recentBranches:o}=e,{commits:s}=t;return we().createElement(O_,{key:"choose-target-branch",allBranches:n,defaultBranch:r,recentBranches:o,currentBranch:i,onCherryPick:this.onChooseBranch,onDismissed:this.onFlowEnded,commitCount:s.length,onCreateNewBranch:this.onCreateNewBranch})};renderCreateBranch=()=>{const{repository:e,dispatcher:t,state:{step:n,operationDetail:r}}=this.props;if("CreateBranch"!==n.kind||"Cherry-pick"!==r.kind)return this.endFlowInvalidState(),null;const{allBranches:i,defaultBranch:o,upstreamDefaultBranch:s,upstreamGhRepo:a,tip:l,targetBranchName:c}=n;return we().createElement(dI,{key:"create-branch",tip:l,defaultBranch:o,upstreamDefaultBranch:s,upstreamGitHubRepository:a,accounts:this.props.accounts,cachedRepoRulesets:this.props.cachedRepoRulesets,allBranches:i,repository:e,onDismissed:this.onFlowEnded,dispatcher:t,initialName:c,createBranch:this.onCreateBranchAndCherryPick,okButtonText:"Create Branch and Cherry-pick",headerText:"Cherry-pick to New Branch"})};onChooseBranch=e=>{const{dispatcher:t,repository:n,state:{operationDetail:r}}=this.props;if("Cherry-pick"!==r.kind)return void this.endFlowInvalidState();const{commits:i,sourceBranch:o}=r;t.setMultiCommitOperationTargetBranch(n,e),t.setCherryPickBranchCreated(n,!1),t.cherryPick(n,e,i,o)};onCreateNewBranch=e=>{const{dispatcher:t,repository:n,state:{step:r,operationDetail:i}}=this.props;if("ChooseBranch"!==r.kind||"Cherry-pick"!==i.kind)return void this.endFlowInvalidState();const{commits:o,sourceBranch:s}=i;t.setCherryPickCreateBranchFlowStep(n,e,o,s)};onCreateBranchAndCherryPick=(e,t,n)=>{const{dispatcher:r,repository:i,state:{step:o,operationDetail:s}}=this.props;if("CreateBranch"!==o.kind||"Cherry-pick"!==s.kind)return void this.endFlowInvalidState();const{commits:a,sourceBranch:l}=s;r.startCherryPickWithBranchName(i,e,t,n,a,l)}}class B_ extends P_{rebasePreview=null;start=()=>{const{selectedBranch:e}=this.state,{repository:t,currentBranch:n}=this.props;e&&null!==this.rebasePreview&&this.rebasePreview.kind===Cu.Clean&&this.canStart()&&this.props.dispatcher.startRebase(t,e,n,this.rebasePreview.commits)};canStart=()=>null!==this.state.selectedBranch&&!this.selectedBranchIsCurrentBranch()&&this.selectedBranchIsAheadOfCurrentBranch();selectedBranchIsCurrentBranch(){const e=this.props.currentBranch,{selectedBranch:t}=this.state;return null!==t&&null!==e&&t.name===e.name}selectedBranchIsAheadOfCurrentBranch(){return null!==this.rebasePreview&&this.rebasePreview.kind===Cu.Clean&&this.rebasePreview.commits.length>0}getSubmitButtonToolTip=()=>this.selectedBranchIsCurrentBranch()?"You are not able to rebase this branch onto itself":this.selectedBranchIsAheadOfCurrentBranch()?void 0:"There are no commits on the current branch to rebase";getDialogTitle=e=>we().createElement(we().Fragment,null,"变基 ",we().createElement("strong",null,e));renderActionStatusIcon=()=>we().createElement(tA,{status:this.rebasePreview,classNamePrefix:"merge-status"});updateStatus=async e=>{const{currentBranch:t,repository:n}=this.props;rA(e,t,n,(t=>{this.rebasePreview=t,this.updateRebaseStatusPreview(e)}))};updateRebaseStatusPreview(e){this.setState({statusPreview:this.getRebaseStatusPreview(e)})}getRebaseStatusPreview(e){if(null==this.rebasePreview)return null;const{currentBranch:t}=this.props;return this.rebasePreview.kind===Cu.Loading?this.renderLoadingRebaseMessage():this.rebasePreview.kind===Cu.Clean?this.renderCleanRebaseMessage(t,e,this.rebasePreview.commits.length):this.rebasePreview.kind===Cu.Invalid?this.renderInvalidRebaseMessage():null}renderLoadingRebaseMessage(){return we().createElement(we().Fragment,null,"Checking for ability to rebase automatically…")}renderInvalidRebaseMessage(){return we().createElement(we().Fragment,null,"Unable to start rebase. Check you have chosen a valid branch.")}renderCleanRebaseMessage(e,t,n){if(n<=0)return we().createElement(we().Fragment,null,"此分支是最新的"," ",we().createElement("strong",null,e.name));const r=1===n?"commit":"commits";return we().createElement(we().Fragment,null,"This will update ",we().createElement("strong",null,e.name)," by applying its ",we().createElement("strong",null,` ${n} ${r}`)," on top of ",we().createElement("strong",null,t.name))}}class F_ extends D_{conflictDialogOperationPrefix="rebasing";rebaseKind="Rebase";onBeginOperation=()=>{const{repository:e,dispatcher:t,state:n}=this.props,{operationDetail:r,targetBranch:i}=n;if("Rebase"!==r.kind)return void this.endFlowInvalidState();const{commits:o,sourceBranch:s}=r;if(null!==s&&null!==i)return t.startRebase(e,s,i,o,{continueWithForcePush:!0});this.endFlowInvalidState()};renderChooseBranch=()=>{const{repository:e,dispatcher:t,state:n}=this.props,{step:r}=n;if("ChooseBranch"!==r.kind)return this.endFlowInvalidState(),null;const{defaultBranch:i,currentBranch:o,allBranches:s,recentBranches:a,initialBranch:l}=r;return we().createElement(B_,{key:"choose-branch",dispatcher:t,repository:e,allBranches:s,defaultBranch:i,recentBranches:a,currentBranch:o,initialBranch:l,operation:"Rebase",onDismissed:this.onFlowEnded})}}class L_ extends be.Component{render(){const{kind:e}=this.props.state.operationDetail;switch(e){case"Cherry-pick":return be.createElement(M_,{...this.props});case"Rebase":return be.createElement(F_,{...this.props});case"Merge":return be.createElement(__,{repository:this.props.repository,dispatcher:this.props.dispatcher,state:this.props.state,conflictState:this.props.conflictState,emoji:this.props.emoji,workingDirectory:this.props.workingDirectory,askForConfirmationOnForcePush:this.props.askForConfirmationOnForcePush,accounts:this.props.accounts,cachedRepoRulesets:this.props.cachedRepoRulesets,openFileInExternalEditor:this.props.openFileInExternalEditor,resolvedExternalEditor:this.props.resolvedExternalEditor,openRepositoryInShell:this.props.openRepositoryInShell});case"Squash":return be.createElement(A_,{repository:this.props.repository,dispatcher:this.props.dispatcher,state:this.props.state,conflictState:this.props.conflictState,emoji:this.props.emoji,workingDirectory:this.props.workingDirectory,askForConfirmationOnForcePush:this.props.askForConfirmationOnForcePush,accounts:this.props.accounts,cachedRepoRulesets:this.props.cachedRepoRulesets,openFileInExternalEditor:this.props.openFileInExternalEditor,resolvedExternalEditor:this.props.resolvedExternalEditor,openRepositoryInShell:this.props.openRepositoryInShell});case"Reorder":return be.createElement(N_,{repository:this.props.repository,dispatcher:this.props.dispatcher,state:this.props.state,conflictState:this.props.conflictState,emoji:this.props.emoji,workingDirectory:this.props.workingDirectory,askForConfirmationOnForcePush:this.props.askForConfirmationOnForcePush,accounts:this.props.accounts,cachedRepoRulesets:this.props.cachedRepoRulesets,openFileInExternalEditor:this.props.openFileInExternalEditor,resolvedExternalEditor:this.props.resolvedExternalEditor,openRepositoryInShell:this.props.openRepositoryInShell});default:return et(0,`Unknown multi commit operation kind of ${e}.`)}}}class H_ extends be.Component{constructor(e){super(e),this.state={isLoading:!1,confirmUndoCommit:e.confirmUndoCommit}}render(){return be.createElement(FE,{id:"warn-local-changes-before-undo",type:"warning",title:"撤消提交",loading:this.state.isLoading,disabled:this.state.isLoading,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed,role:"alertdialog",ariaDescribedBy:"undo-warning-message"},this.getWarningDialog(),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"确定"})))}getWarningDialog(){return this.props.commit.isMergeCommit?this.getMergeCommitWarningDialog():be.createElement(_E,null,be.createElement(mC,{id:"undo-warning-message"},"You have changes in progress. Undoing the commit might result in some of these changes being lost. Do you want to continue anyway?"),be.createElement(mC,null,be.createElement(GC,{label:"不再显示此消息",value:this.state.confirmUndoCommit?jC.Off:jC.On,onChange:this.onConfirmUndoCommitChanged})))}getMergeCommitWarningDialog(){return this.props.isWorkingDirectoryClean?be.createElement(_E,null,be.createElement(mC,null,this.getMergeCommitUndoWarningText(),be.createElement("br",null),be.createElement("br",null),"Do you want to continue anyway?")):be.createElement(_E,null,be.createElement(mC,null,"You have changes in progress. Undoing the merge commit might result in some of these changes being lost.",be.createElement("br",null),be.createElement("br",null),this.getMergeCommitUndoWarningText(),be.createElement("br",null),be.createElement("br",null),"Do you want to continue anyway?"))}getMergeCommitUndoWarningText(){return"Undoing a merge commit will apply the changes from the merge into\n    your working directory, and committing again will create an entirely new\n    commit. This means you will lose the merge commit and, as a result, commits\n    from the merged branch could disappear from this branch."}onSubmit=async()=>{const{dispatcher:e,repository:t,commit:n,onDismissed:r}=this.props;this.setState({isLoading:!0});try{e.setConfirmUndoCommitSetting(this.state.confirmUndoCommit),await e.undoCommit(t,n,!1)}finally{this.setState({isLoading:!1})}r()};onConfirmUndoCommitChanged=e=>{const t=!e.currentTarget.checked;this.setState({confirmUndoCommit:t})}}class U_ extends be.Component{constructor(e){super(e),this.state={isLoading:!1}}render(){return be.createElement(FE,{id:"warning-before-reset",type:"warning",title:"重置到提交",loading:this.state.isLoading,disabled:this.state.isLoading,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement(mC,null,"You have changes in progress. Resetting to a previous commit might result in some of these changes being lost. Do you want to continue anyway?")),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"确定"})))}onSubmit=async()=>{const{dispatcher:e,repository:t,commit:n,onDismissed:r}=this.props;this.setState({isLoading:!0});try{await e.resetToCommit(t,n,!1)}finally{this.setState({isLoading:!1})}r()}}class W_ extends be.Component{render(){const e=this.isEnterpriseAccount?" Enterprise":"";return be.createElement(FE,{id:"invalidated-token",type:"warning",title:"警告",onSubmit:this.onSubmit,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement(mC,null,"Your account token has been invalidated and you have been signed out from your GitHub",e," account. Do you want to sign in again?")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Yes",cancelButtonText:"否"})))}get isEnterpriseAccount(){return this.props.account.endpoint!==Qn()}onSubmit=()=>{const{dispatcher:e,onDismissed:t}=this.props;t(),this.isEnterpriseAccount?e.showEnterpriseSignInDialog(this.props.account.endpoint):e.showDotComSignInDialog()}}class $_ extends be.Component{render(){return be.createElement(FE,{id:"add-ssh-host",type:"normal",title:"SSH 主机",dismissable:!1,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement(mC,null,"The authenticity of host '",this.props.host," (",this.props.ip,")' can't be established. ",this.props.keyType," key fingerprint is"," ",this.props.fingerprint,".",be.createElement("br",null),"Are you sure you want to continue connecting?")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Yes",cancelButtonText: "取消",onCancelButtonClick:this.onCancel})))}submit(e){const{onSubmit:t,onDismissed:n}=this.props;t(e),n()}onSubmit=()=>{this.submit(!0)};onCancel=()=>{this.submit(!1)}}class z_ extends be.Component{constructor(e){super(e),this.state={passphrase:"",rememberPassphrase:!1}}render(){return be.createElement(FE,{id:"ssh-key-passphrase",type:"normal",title:"SSH 密钥密码",dismissable:!1,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement(mC,null,be.createElement(MA,{label:`Enter passphrase for key '${this.props.keyPath}':`,value:this.state.passphrase,onValueChanged:this.onValueChanged})),be.createElement(mC,null,be.createElement(GC,{label:"记住密语",value:this.state.rememberPassphrase?jC.On:jC.Off,onChange:this.onRememberPassphraseChanged}))),be.createElement(HE,null,be.createElement(UE,{onCancelButtonClick:this.onCancel,okButtonDisabled:0===this.state.passphrase.length})))}onRememberPassphraseChanged=e=>{this.setState({rememberPassphrase:e.currentTarget.checked})};onValueChanged=e=>{this.setState({passphrase:e})};submit(e,t){const{onSubmit:n,onDismissed:r}=this.props;n(e,t),r()}onSubmit=()=>{this.submit(this.state.passphrase,this.state.rememberPassphrase)};onCancel=()=>{this.submit(void 0,!1)}}class q_ extends be.Component{constructor(e){super(e),this.state={isLoading:!1,askForConfirmationOnForcePush:e.askForConfirmationOnForcePush}}render(){return be.createElement(FE,{title:"确认要强制推送吗？",dismissable:!this.state.isLoading,onDismissed:this.props.onDismissed,onSubmit:this.onForcePush,type:"warning"},be.createElement(_E,null,be.createElement("p",null,"A force push will rewrite history on"," ",be.createElement(QE,null,this.props.upstreamBranch),". Any collaborators working on this branch will need to reset their own local branch to match the history of the remote."),be.createElement("div",null,be.createElement(GC,{label:"不再显示此消息",value:this.state.askForConfirmationOnForcePush?jC.Off:jC.On,onChange:this.onAskForConfirmationOnForcePushChanged}))),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"确定"})))}onAskForConfirmationOnForcePushChanged=e=>{const t=!e.currentTarget.checked;this.setState({askForConfirmationOnForcePush:t})};onForcePush=async()=>{this.props.dispatcher.setConfirmForcePushSetting(this.state.askForConfirmationOnForcePush),this.props.onDismissed(),await this.props.dispatcher.performForcePush(this.props.repository)}}const j_=St(__dirname,"static/paper-stack.svg"),G_=St(__dirname,"static/empty-no-pull-requests.svg");class V_ extends be.Component{checkRunsLoadCancelled=!1;constructor(e){super(e);const{checks:t}=this.props,n=t.find(Ia)??t[0];this.state={switchingToPullRequest:!1,selectedCheckID:n.id,checks:t,loadingActionWorkflows:!0,loadingActionLogs:!0}}get selectedCheck(){return this.state.checks.find((e=>e.id===this.state.selectedCheckID))}get loadingChecksInfo(){return this.state.loadingActionWorkflows||this.state.loadingActionLogs}render(){let e="Switch to Pull Request";this.props.shouldChangeRepository&&(e="Switch to Repository and Pull Request");const{pullRequest:t}=this.props,n=this.loadingChecksInfo,r=this.state.checks.filter(Ia),i=r.length>1?"checks":"check",o=be.createElement("div",{className:"ci-check-run-dialog-header"},be.createElement(si,{symbol:yo}),be.createElement("div",{className:"title-container"},be.createElement("div",{className:"summary"},r.length," ",i," failed in your pull request"),be.createElement("span",{className:"pr-title"},be.createElement("span",{className:"pr-title"},t.title)," ",be.createElement("span",{className:"pr-number"},"#",t.pullRequestNumber)," ")),this.renderRerunButton());return be.createElement(FE,{id:"pull-request-checks-failed",type:"normal",title:o,dismissable:!1,onSubmit:this.props.onSubmit,onDismissed:this.props.onDismissed,loading:n||this.state.switchingToPullRequest},be.createElement(_E,null,be.createElement(mC,null,be.createElement("div",{className:"ci-check-run-dialog-container"},be.createElement("div",{className:"ci-check-run-content"},this.renderCheckRunJobs(),this.renderCheckRunSteps())))),be.createElement(HE,null,be.createElement(mC,null,this.renderSummary(),be.createElement(UE,{onCancelButtonClick:this.props.onDismissed,cancelButtonText:"忽略",okButtonText:e,okButtonDisabled:this.state.switchingToPullRequest,onOkButtonClick:this.onSubmit}))))}renderSummary(){const e=this.state.checks.filter(Ia).length>1?"them":"it";return be.createElement("div",{className:"footer-question"},be.createElement("span",null,"Do you want to switch to that Pull Request now and start fixing"," ",e,"?"))}onRerunJob=e=>{this.rerunChecks(!1,[e])};renderCheckRunJobs(){return be.createElement(oD,{checkRuns:this.state.checks,loadingActionLogs:this.state.loadingActionLogs,loadingActionWorkflows:this.state.loadingActionWorkflows,selectable:!0,onViewCheckDetails:this.onViewOnGitHub,onCheckRunClick:this.onCheckRunClick,onRerunJob:Dn(this.props.repository.gitHubRepository.endpoint)?this.onRerunJob:void 0})}renderCheckRunSteps(){const e=this.selectedCheck;if(void 0===e)return null;let t=null;return t=this.loadingChecksInfo?this.renderCheckRunStepsLoading():void 0===e.actionJobSteps?this.renderEmptyLogOutput():be.createElement(rD,{steps:e.actionJobSteps,onViewJobStep:this.onViewJobStep}),be.createElement("div",{className:"ci-check-run-job-steps-container"},t)}renderCheckRunStepsLoading(){return be.createElement("div",{className:"loading-check-runs"},be.createElement("img",{src:G_,className:"blankslate-image",alt:""}),be.createElement("div",{className:"title"},"Stand By"),be.createElement("div",{className:"call-to-action"},"Check run steps incoming!"))}renderEmptyLogOutput(){return be.createElement("div",{className:"no-steps-to-display"},be.createElement("div",{className:"text"},"There are no steps to display for this check.",be.createElement("div",null,be.createElement(CE,{onClick:this.onViewSelectedCheckRunOnGitHub},"View check details"))),be.createElement("img",{src:j_,className:"blankslate-image",alt:""}))}onViewJobStep=e=>{const{repository:t,pullRequest:n,dispatcher:r}=this.props,i=this.selectedCheck;if(void 0===i)return;const o=Ba(i,e,t.gitHubRepository,n.pullRequestNumber);null!==o&&r.openInBrowser(o)};componentDidMount(){this.loadCheckRunLogs()}componentWillUnmount(){this.checkRunsLoadCancelled=!0}renderRerunButton=()=>{const{checks:e}=this.state;return be.createElement("div",{className:"ci-check-rerun"},be.createElement(lD,{disabled:0===e.length,checkRuns:e,canReRunFailed:Dn(this.props.repository.gitHubRepository.endpoint),onRerunChecks:this.rerunChecks}))};rerunChecks=(e,t)=>{this.props.dispatcher.incrementMetric("checksFailedDialogRerunChecksCount");const n=ya(this.props.pullRequest.pullRequestNumber);this.props.dispatcher.showPopup({type:nl.CICheckRunRerun,checkRuns:t??this.state.checks,repository:this.props.repository.gitHubRepository,prRef:n,failedOnly:e})};async loadCheckRunLogs(){const{pullRequest:e,repository:t}=this.props,{gitHubRepository:n}=t,r=this.props.accounts.find((e=>e.endpoint===n.endpoint));if(void 0===r)return void this.setState({loadingActionWorkflows:!1,loadingActionLogs:!1});const i=Vn.fromAccount(r),o=await Ma(r,n.owner.login,n.name,e.head.ref,this.props.checks);if(this.checkRunsLoadCancelled)return;this.setState({checks:o,loadingActionWorkflows:!1});const s=await Oa(i,n.owner.login,n.name,o);this.checkRunsLoadCancelled||this.setState({checks:s,loadingActionLogs:!1})}onCheckRunClick=e=>{this.setState({selectedCheckID:e.id})};onViewSelectedCheckRunOnGitHub=()=>{const e=this.selectedCheck;void 0!==e&&this.onViewOnGitHub(e)};onViewOnGitHub=e=>{const{repository:t,pullRequest:n,dispatcher:r}=this.props,i=e.htmlUrl??`${t.gitHubRepository.htmlURL}/pull/${n.pullRequestNumber}`;null!==i&&r.openInBrowser(i)};onSubmit=async e=>{e.preventDefault();const{dispatcher:t,repository:n,pullRequest:r}=this.props;this.props.dispatcher.incrementMetric("checksFailedDialogSwitchToPullRequestCount"),this.setState({switchingToPullRequest:!0}),await t.selectRepository(n),await t.checkoutPullRequest(n,r),this.setState({switchingToPullRequest:!1}),this.props.onDismissed()}}const K_=St(__dirname,"static/empty-no-pull-requests.svg");class Y_ extends be.Component{constructor(e){super(e),this.state={loadingCheckSuites:!0,loadingRerun:!1,rerunnable:[],nonRerunnable:[]},this.determineRerunnability()}onSubmit=async()=>{const{dispatcher:e,repository:t,prRef:n}=this.props;this.setState({loadingRerun:!0}),await e.rerequestCheckSuites(t,this.state.rerunnable,this.props.failedOnly),await e.manualRefreshSubscription(t,n,this.state.rerunnable),e.incrementMetric("rerunsChecks"),this.props.onDismissed()};determineRerunnability=async()=>{const e=this.props.failedOnly?this.props.checkRuns.filter((e=>e.conclusion===Un.Failure)):this.props.checkRuns,t=new Set(e.map((e=>e.checkSuiteId))),n=new Array;for(const e of t)null!==e&&n.push(this.props.dispatcher.fetchCheckSuite(this.props.repository,e));const r=[];for(const e of await Promise.all(n)){if(null===e)continue;const t=Date.parse(e.created_at);e.rerequestable&&t>Ct(-30,"days")&&e.status===Hn.Completed&&r.push(e.id)}const i=e.filter((e=>null!==e.checkSuiteId&&r.includes(e.checkSuiteId))),o=e.filter((e=>null===e.checkSuiteId||!r.includes(e.checkSuiteId)));this.setState({loadingCheckSuites:!1,rerunnable:i,nonRerunnable:o})};renderRerunnableJobsList=()=>0===this.state.rerunnable.length?null:be.createElement("div",{className:"ci-check-run-list check-run-rerun-list"},be.createElement(oD,{checkRuns:this.state.rerunnable,loadingActionLogs:!1,loadingActionWorkflows:!1,notExpandable:!0,isCondensedView:!0}));renderRerunDependentsMessage=()=>{if(0===this.state.rerunnable.length)return null;const e=1===this.props.checkRuns.length?be.createElement("strong",null,this.props.checkRuns[0].name):"these workflows",t=1===this.props.checkRuns.length?"its":"their";return be.createElement("div",{className:"re-run-dependents-message"},"A new attempt of ",e," will be started, including all of ",t," ","dependents:")};renderRerunWarning=()=>{if(this.state.loadingCheckSuites||0===this.state.nonRerunnable.length)return null;const e="check"+(1!==this.state.nonRerunnable.length?"s":""),t=1!==this.state.nonRerunnable.length?"are":"is",n=0===this.state.rerunnable.length?`There are no ${this.props.failedOnly?"failed ":""}checks that can be re-run`:`There ${t} ${this.state.nonRerunnable.length} ${this.props.failedOnly?"failed ":""}${e} that cannot be re-run`;return be.createElement("div",{className:"non-re-run-info warning-helper-text"},be.createElement(si,{symbol:ai}),`${n}. A check run cannot be re-run if the check is more than one month old,\n          the check or its dependent has not completed, or the check is not configured to be\n          re-run.`)};getTitle=(e=!0)=>{const{checkRuns:t,failedOnly:n}=this.props,r=1===t.length?"":"s";let i="";return e&&1===t.length&&(i="Single "),e&&n&&(i="Failed "),`Re-run ${i}Check${r}`};renderDialogContent=()=>this.state.loadingCheckSuites&&this.props.checkRuns.length>1?be.createElement("div",{className:"loading-rerun-checks"},be.createElement("img",{src:K_,className:"blankslate-image",alt:""}),be.createElement("div",{className:"title"},"Please wait"),be.createElement("div",{className:"call-to-action"},"Determining which checks can be re-run.")):be.createElement(be.Fragment,null,this.renderRerunDependentsMessage(),this.renderRerunnableJobsList(),this.renderRerunWarning());render(){return be.createElement(FE,{id:"rerun-check-runs",title:this.getTitle(),onSubmit:this.onSubmit,onDismissed:this.props.onDismissed,loading:this.state.loadingCheckSuites||this.state.loadingRerun},be.createElement(_E,null,this.renderDialogContent()),be.createElement(HE,null,be.createElement(UE,{okButtonText:this.getTitle(!1),okButtonDisabled:0===this.state.rerunnable.length})))}}class X_ extends be.Component{constructor(e){super(e),this.state={retrying:!1,confirmDiscardChanges:!0}}render(){const{retrying:e}=this.state;return be.createElement(FE,{title:"错误",id:"discard-changes-retry",loading:e,disabled:e,onDismissed:this.props.onDismissed,onSubmit:this.onSubmit,type:"error"},be.createElement(_E,null,be.createElement("p",null,"Failed to discard changes to ",xh,"."),be.createElement("div",null,"Common reasons are:",be.createElement("ul",null,be.createElement("li",null,"The ",xh," is configured to delete items immediately."),be.createElement("li",null,"Restricted access to move the file(s)."))),be.createElement("p",null,"These changes will be unrecoverable from the ",xh,"."),this.renderConfirmDiscardChanges()),this.renderFooter())}renderConfirmDiscardChanges(){return be.createElement(GC,{label:"不再显示此消息",value:this.state.confirmDiscardChanges?jC.Off:jC.On,onChange:this.onConfirmDiscardChangesChanged})}renderFooter(){return be.createElement(HE,null,be.createElement(UE,{okButtonText:"Permanently Discard Changes",okButtonTitle:"This will discard changes and they will be unrecoverable.",cancelButtonText:"取消",destructive:!0}))}onConfirmDiscardChangesChanged=e=>{const t=!e.currentTarget.checked;this.setState({confirmDiscardChanges:t})};onSubmit=async()=>{const{dispatcher:e,retryAction:t}=this.props;this.setState({retrying:!0}),await e.performRetry(t),this.props.onConfirmDiscardChangesChanged(this.state.confirmDiscardChanges),this.props.onDismissed()}}class Q_ extends be.Component{render(){const{title:e,pullRequestNumber:t}=this.props.pullRequest,n=be.createElement("div",{className:"pull-request-comment-like-dialog-header"},this.renderPullRequestIcon(),be.createElement("span",{className:"pr-title"},be.createElement("span",{className:"pr-title"},e)," ",be.createElement("span",{className:"pr-number"},"#",t)," "));return be.createElement(FE,{id:this.props.id,type:"normal",title:n,dismissable:!1,onSubmit:this.props.onSubmit,onDismissed:this.props.onDismissed,loading:this.props.switchingToPullRequest},be.createElement(_E,null,be.createElement("div",{className:"comment-container"},this.renderTimelineItem(),this.renderCommentBubble())),be.createElement(HE,null,this.props.renderFooterContent()))}renderTimelineItem(){const{user:e,repository:t,eventDate:n,eventVerb:r,externalURL:i}=this.props,{endpoint:o}=t.gitHubRepository,s={name:e.login,email:vh(e.id,e.login,o),avatarURL:e.avatar_url,endpoint:o},a=this.shouldRenderCommentBubble()?null:this.renderDashedTimelineLine("bottom"),l=Vr()("timeline-item",{"with-comment":this.shouldRenderCommentBubble()}),c=gu(n.getTime()-Date.now());return be.createElement("div",{className:"timeline-item-container"},this.renderDashedTimelineLine("top"),be.createElement("div",{className:l},be.createElement(IE,{user:s,title:null,size:40}),this.renderReviewIcon(),be.createElement("div",{className:"summary"},be.createElement(CE,{uri:e.html_url,className:"author"},e.login)," ",r," your pull request"," ",be.createElement(CE,{uri:i,className:"submission-date"},c))),a)}shouldRenderCommentBubble(){return""!==this.props.body}renderCommentBubble(){return this.shouldRenderCommentBubble()?be.createElement("div",{className:"comment-bubble-container"},be.createElement("div",{className:"comment-bubble"},this.renderReviewBody()),this.renderDashedTimelineLine("bottom")):null}renderDashedTimelineLine(e){return be.createElement("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",className:`timeline-line ${e}`},be.createElement("line",{x1:"0.5",y1:"0",x2:"0.5",y2:"100%"}))}onMarkdownLinkClicked=e=>{this.props.dispatcher.openInBrowser(e)};renderReviewBody(){const{body:e,emoji:t,pullRequest:n}=this.props,{base:r}=n;return be.createElement(ZT,{markdown:e,emoji:t,baseHref:r.gitHubRepository.htmlURL??void 0,repository:r.gitHubRepository,onMarkdownLinkClicked:this.onMarkdownLinkClicked,markdownContext:"PullRequestComment"})}renderPullRequestIcon=()=>{const{pullRequest:e}=this.props,t=Vr()("pull-request-icon",{draft:e.draft});return be.createElement(si,{className:t,symbol:e.draft?Ui:Hi})};renderReviewIcon=()=>{const{eventIconSymbol:e,eventIconClass:t}=this.props;return be.createElement("div",{className:Vr()("review-icon-container",t)},be.createElement(si,{symbol:e}))}}class Z_ extends be.Component{constructor(e){super(e),this.state={switchingToPullRequest:!1}}render(){const{dispatcher:e,accounts:t,repository:n,pullRequest:r,emoji:i,review:o,onSubmit:s,onDismissed:a}=this.props,l=Ov(o.state);return be.createElement(Q_,{id:"pull-request-review",dispatcher:e,accounts:t,repository:n,pullRequest:r,emoji:i,eventDate:new Date(o.submitted_at),eventVerb:Nv(o),eventIconSymbol:l.symbol,eventIconClass:l.className,externalURL:o.html_url,user:o.user,body:o.body,switchingToPullRequest:this.state.switchingToPullRequest,renderFooterContent:this.renderFooterContent,onSubmit:s,onDismissed:a})}renderFooterContent=()=>{const{review:e,shouldChangeRepository:t,shouldCheckoutBranch:n}=this.props;let r;"APPROVED"===e.state||(t?r="Switch to Repository and Pull Request":n&&(r="Switch to Pull Request"));const i=be.createElement(UE,{onCancelButtonClick:this.props.onDismissed,cancelButtonText:"忽略",cancelButtonVisible:void 0!==r,okButtonText:r,okButtonDisabled:this.state.switchingToPullRequest,onOkButtonClick:this.onSubmit});return be.createElement(mC,null,be.createElement("div",{className:"footer-links"},be.createElement(CE,{uri:e.html_url},"打开于 Browser")),i)};onSubmit=async e=>{e.preventDefault();const{dispatcher:t,repository:n,pullRequest:r,shouldChangeRepository:i,shouldCheckoutBranch:o,review:s}=this.props;"APPROVED"===s.state||!i&&!o||(this.setState({switchingToPullRequest:!0}),await t.selectRepository(n),await t.checkoutPullRequest(n,r),this.setState({switchingToPullRequest:!1}),t.recordPullRequestReviewDialogSwitchToPullRequest(s.state)),this.props.onDismissed()}}class J_ extends be.Component{constructor(e){super(e),this.state={password:"",rememberPassword:!1}}render(){return be.createElement(FE,{id:"ssh-user-password",type:"normal",title:"SSH 用户密码",dismissable:!1,onSubmit:this.onSubmit,onDismissed:this.props.onDismissed},be.createElement(_E,null,be.createElement(mC,null,be.createElement(MA,{label:`Enter password for '${this.props.username}':`,value:this.state.password,onValueChanged:this.onValueChanged})),be.createElement(mC,null,be.createElement(GC,{label:"记住密码",value:this.state.rememberPassword?jC.On:jC.Off,onChange:this.onRememberPasswordChanged}))),be.createElement(HE,null,be.createElement(UE,{onCancelButtonClick:this.onCancel,okButtonDisabled:0===this.state.password.length})))}onRememberPasswordChanged=e=>{this.setState({rememberPassword:e.currentTarget.checked})};onValueChanged=e=>{this.setState({password:e})};submit(e,t){const{onSubmit:n,onDismissed:r}=this.props;n(e,t),r()}onSubmit=()=>{this.submit(this.state.password,this.state.rememberPassword)};onCancel=()=>{this.submit(void 0,!1)}}class eN extends be.Component{invokeButtonRef=null;constructor(e){super(e),this.state={showPopover:!1}}onInvokeButtonRef=e=>{this.invokeButtonRef=e};togglePopover=()=>{this.setState({showPopover:!this.state.showPopover})};closePopover=()=>{this.setState({showPopover:!1})};renderPopover(){if(!this.state.showPopover)return;const{contentTitle:e}=this.props;return be.createElement(eE,{className:"popover-dropdown-popover",anchor:this.invokeButtonRef,anchorPosition:XS.BottomLeft,maxHeight:500,decoration:ZS.Balloon,onClickOutside:this.closePopover,"aria-labelledby":"popover-dropdown-header"},be.createElement("div",{className:"popover-dropdown-wrapper"},be.createElement("div",{className:"popover-dropdown-header"},be.createElement("span",{id:"popover-dropdown-header"},e),be.createElement("button",{className:"close",onClick:this.closePopover,"aria-label":"Close"},be.createElement(si,{symbol:go}))),be.createElement("div",{className:"popover-dropdown-content"},this.props.children)))}render(){const{className:e,buttonContent:t,label:n}=this.props,r=Vr()("popover-dropdown-component",e);return be.createElement("div",{className:r},be.createElement(ii,{onClick:this.togglePopover,onButtonRef:this.onInvokeButtonRef},be.createElement("span",{className:"popover-dropdown-button-label"},n),be.createElement("span",{className:"button-content"},t),be.createElement(si,{symbol:uo})),this.renderPopover())}}class tN extends be.Component{popoverRef=be.createRef();constructor(e){super(e),this.state={selectedBranch:e.branch,filterText:""}}renderBranch=(e,t)=>zx(e,t,this.props.currentBranch);getBranchAriaLabel=e=>qx(e);onItemClick=(e,t)=>{t.event.preventDefault(),this.popoverRef.current?.closePopover(),this.setState({selectedBranch:e}),this.props.onChange?.(e)};onFilterTextChanged=e=>{this.setState({filterText:e})};render(){const{currentBranch:e,defaultBranch:t,recentBranches:n,allBranches:r,noBranchesMessage:i}=this.props,{filterText:o,selectedBranch:s}=this.state;return be.createElement(eN,{contentTitle:"Choose a base branch",buttonContent:s?.name??"",label:"基础:",ref:this.popoverRef},be.createElement(Dx,{allBranches:r,currentBranch:e,defaultBranch:t,recentBranches:n,filterText:o,onFilterTextChanged:this.onFilterTextChanged,selectedBranch:s,canCreateNewBranch:!1,renderBranch:this.renderBranch,getBranchAriaLabel:this.getBranchAriaLabel,onItemClick:this.onItemClick,noBranchesMessage:i}))}}class nN extends be.Component{constructor(e){super(e),this.state={titleId:Yr("Dialog_Open_Pull_Request")}}componentWillUnmount(){Xr(this.state.titleId)}render(){const{baseBranch:e,currentBranch:t,defaultBranch:n,prBaseBranches:r,prRecentBaseBranches:i,commitCount:o,onBranchChange:s,onDismissed:a}=this.props,l=`${o} commit${o>1?"s":""}`;return be.createElement(NE,{title:"开启拉取请求",titleId:this.state.titleId,dismissable:!0,onDismissed:a},be.createElement("div",{className:"break"}),be.createElement("div",{className:"base-branch-details"},"Merge ",l," into"," ",be.createElement(tN,{branch:e,defaultBranch:n,currentBranch:t,allBranches:r,recentBranches:i,onChange:s,noBranchesMessage:be.createElement(be.Fragment,null,"Sorry, I can't find that remote branch. ",be.createElement("br",null),"You can only open pull requests against remote branches.")})," ","from ",be.createElement(QE,null,t.name),"."))}}function rN(e,t,n){const r=e.htmlURL;return null===r?null:void 0===n?`${r}/commit/${t}`:`${r}/commit/${t}${"#diff-"+cn.createHash("sha256").update(n).digest("hex")}`}class iN extends be.Component{constructor(e){super(e),this.state={showSideBySideDiff:e.showSideBySideDiff}}onOpenFile=t=>{const n=e.join(this.props.repository.path,t);this.onOpenBinaryFile(n)};onOpenBinaryFile=e=>{Vk(e,this.props.dispatcher)};onHideWhitespaceInDiffChanged=e=>{const{selectedFile:t}=this.props;return this.props.dispatcher.onHideWhitespaceInPullRequestDiffChanged(e,this.props.repository,t)};onShowSideBySideDiffChanged=e=>{this.setState({showSideBySideDiff:e})};onDiffOptionsOpened=()=>{this.props.dispatcher.incrementMetric("diffOptionsViewedCount")};onChangeImageDiffType=e=>{this.props.dispatcher.changeImageDiffType(e)};onFileListResize=e=>{this.props.dispatcher.setPullRequestFileListWidth(e)};onFileListSizeReset=()=>{this.props.dispatcher.resetPullRequestFileListWidth()};onViewOnGitHub=e=>{const{nonLocalCommitSHA:t,repository:n,dispatcher:r}=this.props,{gitHubRepository:i}=n;if(null===i||null===t)return;const o=rN(i,t,e.path);null!==o&&r.openInBrowser(o)};onFileContextMenu=async(t,n)=>{n.preventDefault();const{repository:r}=this.props,i=e.join(r.path,t.path),o=await S(i);if(!o)return void lC([{label:"File Does Not Exist on Disk",enabled:!1}]);const{externalEditorLabel:s,dispatcher:a}=this.props,l=(e.extname(t.path),[{label:Rh,action:()=>it(r,t.path),enabled:o},{label:void 0!==s?`打开于 ${s}`:kh,action:()=>a.openInExternalEditor(i),enabled:o},{label:Th,action:()=>this.onOpenFile(t.path),enabled:o},{type:"separator"},{label:Sh,action:()=>m.clipboard.writeText(i)},{label:Eh,action:()=>m.clipboard.writeText(e.normalize(t.path))},{type:"separator"}]),{nonLocalCommitSHA:c}=this.props,{gitHubRepository:u}=r,h=u&&u.endpoint!==Qn();l.push({label:"在Github上查看"+(h?" Enterprise":""),action:()=>this.onViewOnGitHub(t),enabled:null!==c&&null!==u}),lC(l)};onFileSelected=e=>{this.props.dispatcher.changePullRequestFileSelection(this.props.repository,e)};onRowDoubleClick=e=>{const t=this.props.files[e];this.props.onOpenInExternalEditor(t.path)};renderHeader(){const{hideWhitespaceInDiff:e}=this.props,{showSideBySideDiff:t}=this.state;return be.createElement("div",{className:"files-changed-header"},be.createElement("div",{className:"commits-displayed"},"Showing changes from all commits"),be.createElement(Yk,{isInteractiveDiff:!1,hideWhitespaceChanges:e,onHideWhitespaceChangesChanged:this.onHideWhitespaceInDiffChanged,showSideBySideDiff:t,onShowSideBySideDiffChanged:this.onShowSideBySideDiffChanged,onDiffOptionsOpened:this.onDiffOptionsOpened}))}renderFileList(){const{files:e,selectedFile:t,fileListWidth:n}=this.props;return be.createElement(Rd,{width:n.value,minimumWidth:n.min,maximumWidth:n.max,onResize:this.onFileListResize,onReset:this.onFileListSizeReset},be.createElement(LD,{files:e,onSelectedFileChanged:this.onFileSelected,selectedFile:t,availableWidth:lc(n),onContextMenu:this.onFileContextMenu,onRowDoubleClick:this.onRowDoubleClick}))}renderDiff(){const{selectedFile:e}=this.props;if(null===e)return;const{diff:t,repository:n,imageDiffType:r,hideWhitespaceInDiff:i}=this.props,{showSideBySideDiff:o}=this.state;return be.createElement(tx,{repository:n,imageDiffType:r,file:e,diff:t,readOnly:!0,hideWhitespaceInDiff:i,showSideBySideDiff:o,onOpenBinaryFile:this.onOpenBinaryFile,onChangeImageDiffType:this.onChangeImageDiffType,onHideWhitespaceInDiffChanged:this.onHideWhitespaceInDiffChanged})}render(){return be.createElement("div",{className:"pull-request-files-changed"},this.renderHeader(),be.createElement("div",{className:"files-diff-viewer"},this.renderFileList(),this.renderDiff()))}}class oN extends be.Component{getMergeStatusDescription=()=>{const{mergeStatus:e}=this.props;if(null===e)return"";const{kind:t}=e;switch(t){case Cu.Loading:return be.createElement("span",{className:"pr-merge-status-loading"},be.createElement("strong",null,"Checking mergeability…")," Don’t worry, you can still create the pull request.");case Cu.Invalid:return be.createElement("span",{className:"pr-merge-status-invalid"},be.createElement("strong",null,"Error checking merge status.")," 无法在此仓库中合并不相关的历史记录");case Cu.Clean:return be.createElement("span",{className:"pr-merge-status-clean"},be.createElement("strong",null,be.createElement(si,{symbol:pi})," Able to merge.")," ","These branches can be automatically merged.");case Cu.Conflicts:return be.createElement("span",{className:"pr-merge-status-conflicts"},be.createElement("strong",null,be.createElement(si,{symbol:go})," Can't automatically merge.")," ","Don’t worry, you can still create the pull request.");default:return et(0,`Unknown merge status kind of ${t}.`)}};render(){return be.createElement("div",{className:"pull-request-merge-status"},this.getMergeStatusDescription())}}class sN extends be.Component{onCreatePullRequest=()=>{const{currentBranchHasPullRequest:e,dispatcher:t,repository:n,onDismissed:r}=this.props;if(e)t.showPullRequest(n);else{const{baseBranch:e}=this.props.pullRequestState;t.createPullRequest(n,e??void 0),t.incrementMetric("createPullRequestCount"),t.incrementMetric("createPullRequestFromPreviewCount")}r()};onBranchChange=e=>{const{repository:t}=this.props;this.props.dispatcher.updatePullRequestBaseBranch(t,e)};renderHeader(){const{currentBranch:e,pullRequestState:t,defaultBranch:n,prBaseBranches:r,prRecentBaseBranches:i}=this.props,{baseBranch:o,commitSHAs:s}=t;return be.createElement(nN,{baseBranch:o,currentBranch:e,defaultBranch:n,prBaseBranches:r,prRecentBaseBranches:i,commitCount:s?.length??0,onBranchChange:this.onBranchChange,onDismissed:this.props.onDismissed})}renderContent(){return be.createElement("div",{className:"open-pull-request-content"},this.renderNoChanges(),this.renderNoDefaultBranch(),this.renderFilesChanged())}renderFilesChanged(){const{dispatcher:e,externalEditorLabel:t,hideWhitespaceInDiff:n,imageDiffType:r,pullRequestState:i,repository:o,fileListWidth:s,nonLocalCommitSHA:a}=this.props,{commitSelection:l}=i;if(null===l)return;const{diff:c,file:u,changesetData:h,shas:p}=l,{files:d}=h;return 0!==p.length?be.createElement(iN,{diff:c,dispatcher:e,externalEditorLabel:t,fileListWidth:s,files:d,hideWhitespaceInDiff:n,imageDiffType:r,nonLocalCommitSHA:a,selectedFile:u,showSideBySideDiff:this.props.showSideBySideDiff,repository:o,onOpenInExternalEditor:this.props.onOpenInExternalEditor}):void 0}renderNoChanges(){const{pullRequestState:e,currentBranch:t}=this.props,{commitSelection:n,baseBranch:r,mergeStatus:i}=e;if(null===n||null===r)return;const{shas:o}=n;if(0!==o.length)return;const s=i?.kind!==Cu.Invalid?be.createElement(be.Fragment,null,be.createElement(QE,null,r.name)," is up to date with all commits from"," ",be.createElement(QE,null,t.name),"."):be.createElement(be.Fragment,null,be.createElement(QE,null,r.name)," and ",be.createElement(QE,null,t.name)," are entirely different commit histories.");return be.createElement("div",{className:"open-pull-request-message"},be.createElement("div",null,be.createElement(si,{symbol:Hi}),be.createElement("h3",null,"There are no changes."),s))}renderNoDefaultBranch(){const{baseBranch:e}=this.props.pullRequestState;if(null===e)return be.createElement("div",{className:"open-pull-request-message"},be.createElement("div",null,be.createElement(si,{symbol:Hi}),be.createElement("h3",null,"Could not find a default branch to compare against."),"Select a base branch above."))}renderFooter(){const{currentBranchHasPullRequest:e,pullRequestState:t,repository:n}=this.props,{mergeStatus:r,commitSHAs:i}=t,o=n.gitHubRepository,s=e?"View":" Create",a=`${s} pull request on GitHub${o&&o.endpoint!==Qn()?" Enterprise":""}.`,l=be.createElement(be.Fragment,null,e&&be.createElement(si,{symbol:ji}),`${s} Pull Request`);return be.createElement(HE,null,be.createElement(oN,{mergeStatus:r}),be.createElement(UE,{okButtonText:l,okButtonTitle:a,cancelButtonText:"取消",okButtonDisabled:null===i||0===i.length}))}render(){return be.createElement(FE,{className:"open-pull-request",onSubmit:this.onCreatePullRequest,onDismissed:this.props.onDismissed},this.renderHeader(),this.renderContent(),this.renderFooter())}}class aN extends be.Component{updateStoreEventHandle=null;onUpdateStateChanged=e=>{e.status!==Kt.UpdateAvailable&&this.props.dispatcher.quitApp(!1)};componentDidMount(){this.updateStoreEventHandle=Yt.onDidChange(this.onUpdateStateChanged),this.onUpdateStateChanged(Yt.state)}componentWillUnmount(){this.updateStoreEventHandle&&(this.updateStoreEventHandle.dispose(),this.updateStoreEventHandle=null),this.props.dispatcher.cancelQuittingApp()}onQuitAnywayButtonClicked=()=>{this.props.dispatcher.quitApp(!0)};render(){return be.createElement(FE,{id:"installing-update",onSubmit:this.props.onDismissed,dismissable:!1,type:"warning"},be.createElement(NE,{title:"安装更新...",loading:!0,dismissable:!0,onDismissed:this.props.onDismissed}),be.createElement(_E,null,be.createElement(mC,{className:"updating-message"},"Do not close GitHub Desktop while the update is in progress. Closing now may break your installation.")),be.createElement(HE,null,be.createElement(UE,{okButtonText:"Quit Anyway",onOkButtonClick:this.onQuitAnywayButtonClicked,onCancelButtonClick:this.props.onDismissed,destructive:!0})))}}var lN,cN;!function(e){e[e.PullRequestReview=0]="PullRequestReview",e[e.PullRequestComment=1]="PullRequestComment",e[e.ChecksFailed=2]="ChecksFailed"}(lN||(lN={})),function(e){e[e.SelectPullRequest=0]="SelectPullRequest",e[e.SelectPullRequestReview=1]="SelectPullRequestReview",e[e.SelectPullRequestComment=2]="SelectPullRequestComment"}(cN||(cN={}));const uN=[{type:lN.PullRequestReview,steps:[cN.SelectPullRequest,cN.SelectPullRequestReview]},{type:lN.PullRequestComment,steps:[cN.SelectPullRequest,cN.SelectPullRequestComment]},{type:lN.ChecksFailed,steps:[cN.SelectPullRequest]}];class hN extends we().Component{render(){const{leftAccessory:e,html_url:t,children:n}=this.props;return we().createElement("div",{className:"row-content"},e&&we().createElement("div",{className:"left-accessory"},e),we().createElement("div",{className:"main-content"},n),t&&we().createElement("div",{className:"right-accessory"},we().createElement(ii,{onClick:this.onExternalLinkClick},we().createElement(si,{symbol:ji}))))}onExternalLinkClick=e=>{const{dispatcher:t,html_url:n}=this.props;void 0!==n&&(e.stopPropagation(),t.openInBrowser(n))}}class pN extends we().Component{constructor(e){super(e),this.state={selectedFlow:null,stepResults:new Map,loading:!1,pullRequests:[],reviews:[],comments:[],selectedRows:[],suggestGrantNotificationPermission:!1,warnNotificationsDenied:!1,suggestConfigureNotifications:!1}}componentDidMount(){this.updateNotificationsState()}async updateNotificationsState(){const e=await(0,Av.X)();this.setState({suggestGrantNotificationPermission:(0,Av.YF)()&&"default"===e,warnNotificationsDenied:"denied"===e,suggestConfigureNotifications:"granted"===e})}onGrantNotificationPermission=async()=>{await(0,Av.QJ)(),this.updateNotificationsState()};renderNotificationHint(){const{suggestGrantNotificationPermission:e,warnNotificationsDenied:t,suggestConfigureNotifications:n}=this.state;if(e)return we().createElement(we().Fragment,null," ","你需要"," ",we().createElement(CE,{onClick:this.onGrantNotificationPermission},"grant permission")," ","从GitHub DeskTop显示这些通知");const r=(0,Av.Y4)();if(null===r)return null;if(t)return we().createElement(we().Fragment,null,we().createElement("span",{className:"warning-icon"},"⚠️")," GitHub DeskTop没有显示通知的权限。请在设置中启用它们"," ",we().createElement(CE,{uri:r},"通知设置"),".");const i=n?"properly configured":"允许";return we().createElement(we().Fragment,null,"确认GitHub DeskTop ",i," 向你发出通知"," ",we().createElement(CE,{uri:r},"通知设置"),".")}onDismissed=()=>{this.props.dispatcher.closePopup()};getTypeFriendlyName(e){return new Map([[lN.PullRequestReview,"Pull Request Review"],[lN.PullRequestComment,"Pull Request Comment"],[lN.ChecksFailed,"Pull Request Checks Failed"]]).get(e??this.state.selectedFlow?.type??lN.PullRequestReview)??""}renderNotificationType=e=>we().createElement(ii,{onClick:this.getOnNotificationTypeClick(e)},this.getTypeFriendlyName(e));getOnNotificationTypeClick=e=>()=>{const t=uN.find((t=>t.type===e))??null;this.setState({selectedFlow:t},(()=>{this.prepareForNextStep()}))};doFinalAction(){const e=this.state.selectedFlow;if(null!==e)switch(e.type){case lN.PullRequestReview:{const e=this.getPullRequest(),t=this.getReview();if(null===e||null===t)return;this.props.notificationsDebugStore.simulatePullRequestReviewNotification(this.props.repository.gitHubRepository,e,t);break}case lN.PullRequestComment:{const e=this.getPullRequest(),t=this.getCommentInfo();if(null===e||null===t)return;const{comment:n,isIssueComment:r}=t;this.props.notificationsDebugStore.simulatePullRequestCommentNotification(this.props.repository.gitHubRepository,e,n,r);break}case lN.ChecksFailed:{const e=this.getPullRequest();if(null===e)return;this.props.notificationsDebugStore.simulatePullRequestChecksFailed(this.props.repository,e,this.props.dispatcher);break}default:et(e.type,`Unknown flow type: ${e}`)}}prepareForNextStep(){const e=this.state.selectedFlow?.steps[this.state.stepResults.size];if(void 0===e)return this.doFinalAction(),void this.back();switch(e){case cN.SelectPullRequest:this.setState({loading:!0}),this.props.notificationsDebugStore.getPullRequests(this.props.repository,{filterByComments:this.state.selectedFlow?.type===lN.PullRequestComment,filterByReviews:this.state.selectedFlow?.type===lN.PullRequestReview}).then((e=>{this.setState({pullRequests:e,selectedRows:[],loading:!1})}));break;case cN.SelectPullRequestReview:{this.setState({loading:!0});const e=this.getPullRequest();if(null===e)return;this.props.notificationsDebugStore.getPullRequestReviews(this.props.repository,e.pullRequestNumber).then((e=>{this.setState({reviews:e,selectedRows:[],loading:!1})}));break}case cN.SelectPullRequestComment:{this.setState({loading:!0});const e=this.getPullRequest();if(null===e)return;this.props.notificationsDebugStore.getPullRequestComments(this.props.repository,e.pullRequestNumber).then((e=>{this.setState({comments:e,selectedRows:[],loading:!1})}));break}default:et(0,`Unknown step: ${e}`)}}getPullRequest(){const e=this.state.stepResults.get(cN.SelectPullRequest);return void 0===e?null:e.pullRequest}getReview(){const e=this.state.stepResults.get(cN.SelectPullRequestReview);return void 0===e?null:e.review}getCommentInfo(){const e=this.state.stepResults.get(cN.SelectPullRequestComment);return void 0===e?null:{comment:e.comment,isIssueComment:e.isIssueComment}}renderCurrentStep(){if(null===this.state.selectedFlow)return we().createElement("div",null,we().createElement("p",null,"Select the type of notification to display:"),we().createElement("div",{className:"notification-type-list"},this.renderNotificationType(lN.PullRequestReview),this.renderNotificationType(lN.PullRequestComment),this.renderNotificationType(lN.ChecksFailed)));const e=this.state.selectedFlow.steps.at(this.state.stepResults.size);if(void 0===e)return we().createElement("p",null,"Done!");switch(e){case cN.SelectPullRequest:return this.renderSelectPullRequest();case cN.SelectPullRequestReview:return this.renderSelectPullRequestReview();case cN.SelectPullRequestComment:return this.renderSelectPullRequestComment();default:return et(0,`Unknown step: ${e}`)}}renderSelectPullRequest(){if(this.state.loading)return we().createElement(hE,null);const{pullRequests:e,selectedRows:t}=this.state;return 0===e.length?we().createElement("p",null,"No pull requests found"):we().createElement("div",null,"Pull requests for ",this.getTypeFriendlyName(),":",we().createElement(MC,{rowHeight:40,rowCount:[e.length],rowRenderer:this.renderPullRequestRow,selectedRows:t,onRowClick:this.onPullRequestRowClick,onSelectedRowChanged:this.onSelectedRowChanged}))}onPullRequestRowClick=e=>{const t=this.state.pullRequests[e.row],n=this.state.stepResults;n.set(cN.SelectPullRequest,{kind:cN.SelectPullRequest,pullRequest:t}),this.setState({stepResults:n},(()=>{this.prepareForNextStep()}))};renderSelectPullRequestReview(){if(this.state.loading)return we().createElement(hE,null);const{reviews:e,selectedRows:t}=this.state;return 0===e.length?we().createElement("p",null,"No reviews found"):we().createElement("div",null,"Reviews:",we().createElement(MC,{rowHeight:40,rowCount:[e.length],rowRenderer:this.renderPullRequestReviewRow,selectedRows:t,onRowClick:this.onPullRequestReviewRowClick,onSelectedRowChanged:this.onSelectedRowChanged}))}onSelectedRowChanged=e=>{this.setState({selectedRows:[e]})};onPullRequestReviewRowClick=e=>{const t=this.state.reviews[e.row],n=this.state.stepResults;n.set(cN.SelectPullRequestReview,{kind:cN.SelectPullRequestReview,review:t}),this.setState({stepResults:n},(()=>{this.prepareForNextStep()}))};renderSelectPullRequestComment(){if(this.state.loading)return we().createElement(hE,null);const{comments:e,selectedRows:t}=this.state;return 0===e.length?we().createElement("p",null,"No comments found"):we().createElement("div",null,"Comments:",we().createElement(MC,{rowHeight:40,rowCount:[e.length],rowRenderer:this.renderPullRequestCommentRow,selectedRows:t,onRowClick:this.onPullRequestCommentRowClick,onSelectedRowChanged:this.onSelectedRowChanged}))}onPullRequestCommentRowClick=e=>{const t=this.state.comments[e.row],n=this.state.stepResults;n.set(cN.SelectPullRequestComment,{kind:cN.SelectPullRequestComment,comment:t,isIssueComment:t.html_url.includes("#issuecomment-")}),this.setState({stepResults:n},(()=>{this.prepareForNextStep()}))};renderPullRequestCommentRow=e=>{const t=this.state.comments[e.row];return we().createElement(hN,{dispatcher:this.props.dispatcher,html_url:t.html_url,leftAccessory:this.renderReviewStateIcon("COMMENTED")},t.body,we().createElement("br",null),"by ",we().createElement("i",null,t.user.login))};renderPullRequestReviewRow=e=>{const t=this.state.reviews[e.row];return we().createElement(hN,{dispatcher:this.props.dispatcher,html_url:t.html_url,leftAccessory:this.renderReviewStateIcon(t.state)},t.body||we().createElement("i",null,"Review without body"),we().createElement("br",null),"by ",we().createElement("i",null,t.user.login))};renderReviewStateIcon=e=>{const t=Ov(e);return we().createElement("div",{className:Vr()("review-icon-container",t.className)},we().createElement(si,{symbol:t.symbol}))};renderPullRequestRow=e=>{const t=this.state.pullRequests[e.row],n=this.props.repository.gitHubRepository,r=`${Xn(n.endpoint)}/${n.owner.login}/${n.name}/pull/${t.pullRequestNumber}`;return we().createElement(hN,{dispatcher:this.props.dispatcher,html_url:r,leftAccessory:this.renderPullRequestStateIcon(t)},we().createElement("b",null,"#",t.pullRequestNumber,t.draft?" (Draft)":"",":")," ",t.title," ",we().createElement("br",null),"by ",we().createElement("i",null,t.author))};renderPullRequestStateIcon=e=>we().createElement(si,{className:e.draft?"pr-draft-icon":"pr-icon",symbol:e.draft?Ui:Hi});render(){return we().createElement(FE,{id:"test-notifications",onSubmit:this.onDismissed,dismissable:!0,onDismissed:this.onDismissed},we().createElement(NE,{title:"测试通知",dismissable:!0,onDismissed:this.onDismissed}),we().createElement(_E,null,we().createElement("p",null,this.renderNotificationHint()),this.renderCurrentStep()),we().createElement(HE,null,we().createElement(UE,{okButtonText:"关闭",okButtonDisabled:!1,cancelButtonDisabled:!1,cancelButtonVisible:null!==this.state.selectedFlow,cancelButtonText:"返回",onCancelButtonClick:this.onBack})))}onBack=e=>{this.back(),e.preventDefault()};back(){const{selectedFlow:e,stepResults:t}=this.state;if(null===e)return;0===t.size&&this.setState({selectedFlow:null,stepResults:new Map},(()=>{this.prepareForNextStep()}));const n=e.steps.at(t.size-1);if(void 0===n)return;const r=new Map(t);r.delete(n),this.setState({stepResults:r},(()=>{this.prepareForNextStep()}))}}class dN extends be.Component{constructor(e){super(e),this.state={switchingToPullRequest:!1}}render(){const{dispatcher:e,accounts:t,repository:n,pullRequest:r,emoji:i,comment:o,onSubmit:s,onDismissed:a}=this.props,l=Ov("COMMENTED");return be.createElement(Q_,{id:"pull-request-comment",dispatcher:e,accounts:t,repository:n,pullRequest:r,emoji:i,eventDate:new Date(o.created_at),eventVerb:"commented",eventIconSymbol:l.symbol,eventIconClass:l.className,externalURL:o.html_url,user:o.user,body:o.body,switchingToPullRequest:this.state.switchingToPullRequest,renderFooterContent:this.renderFooterContent,onSubmit:s,onDismissed:a})}renderFooterContent=()=>{const{shouldChangeRepository:e,shouldCheckoutBranch:t,comment:n}=this.props;let r;e?r="Switch to Repository and Pull Request":t&&(r="Switch to Pull Request");const i=be.createElement(UE,{onCancelButtonClick:this.props.onDismissed,cancelButtonText:"忽略",cancelButtonVisible:void 0!==r,okButtonText:r,okButtonDisabled:this.state.switchingToPullRequest,onOkButtonClick:this.onSubmit});return be.createElement(mC,null,be.createElement("div",{className:"footer-links"},be.createElement(CE,{uri:n.html_url},"打开于 Browser")),i)};onSubmit=async e=>{e.preventDefault();const{dispatcher:t,repository:n,pullRequest:r,shouldChangeRepository:i,shouldCheckoutBranch:o}=this.props;(i||o)&&(this.setState({switchingToPullRequest:!0}),await t.selectRepository(n),await t.checkoutPullRequest(n,r),this.setState({switchingToPullRequest:!1}),t.incrementMetric("pullRequestCommentDialogSwitchToPullRequestCount")),this.props.onDismissed()}}class mN extends be.Component{constructor(e){super(e)}render(){return be.createElement(FE,{id:"unknown-authors",title:"Unknown Co-Authors",onDismissed:this.props.onDismissed,onSubmit:this.commit,type:"warning"},be.createElement(_E,null,this.renderAuthorList()),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"Commit Anyway"})))}renderAuthorList(){return this.props.authors.length>10?be.createElement("p",null,this.props.authors.length," users weren't found and won't be added as co-authors of this commit. Are you sure you want to commit?"):be.createElement("div",null,be.createElement("p",null,"These users weren't found and won't be added as co-authors of this commit. Are you sure you want to commit?"),be.createElement("div",{className:"author-list"},be.createElement("ul",null,this.props.authors.map((e=>be.createElement("li",{key:e.username},be.createElement(Pk,{path:e.username})))))))}commit=async()=>{this.props.onCommit(),this.props.onDismissed()}}class fN extends be.Component{render(){return be.createElement(FE,{id:"repo-rules-bypass-confirmation",title:"Bypass Repository Rules",onSubmit:this.submit,onDismissed:this.props.onDismissed,type:"warning"},be.createElement(_E,null,"This commit will bypass"," ",be.createElement($E,{repository:this.props.repository,branch:this.props.branch},"one or more repository rules"),". Are you sure you want to continue?"),be.createElement(HE,null,be.createElement(UE,{destructive:!0,okButtonText:"Bypass Rules and Commit"})))}submit=()=>{this.props.onConfirm(),this.props.onDismissed()}}const gN={enter:250,exit:100},yN={enter:500,exit:400};class bN extends be.Component{loading=!0;lastKeyPressed=null;updateIntervalHandle;repositoryViewRef=be.createRef();get isShowingModal(){return null!==this.state.currentPopup}getOnPopupDismissedFn=mr((e=>()=>this.onPopupDismissed(e)));constructor(e){super(e),e.dispatcher.loadInitialState().then((()=>{this.loading=!1,this.forceUpdate(),requestIdleCallback((()=>{const t=performance.now();T(t-e.startTime),requestIdleCallback((()=>{this.performDeferredLaunchActions()}))}),{timeout:100})})),this.state=e.appStore.getState(),e.appStore.onDidUpdate((e=>{this.setState(e)})),e.appStore.onDidError((t=>{e.dispatcher.postError(t)})),g("menu-event",((e,t)=>this.onMenuEvent(t))),Yt.onDidChange((async e=>{const t=e.status;t===Kt.UpdateReady&&this.props.dispatcher.setUpdateBannerVisibility(!0),t!==Kt.UpdateReady&&await Yt.isUpdateShowcase()&&this.props.dispatcher.setUpdateShowCaseVisibility(!0)})),Yt.onError((e=>{log.error("Error checking for updates",e),this.props.dispatcher.postError(e)})),g("launch-timing-stats",((e,t)=>{console.info(`App ready time: ${t.mainReadyTime}ms`),console.info(`Load time: ${t.loadTime}ms`),console.info(`Renderer ready time: ${t.rendererReadyTime}ms`),this.props.dispatcher.recordLaunchStats(t)})),g("certificate-error",((e,t,n,r)=>{this.props.dispatcher.showPopup({type:nl.UntrustedCertificate,certificate:t,url:r})})),Zs.onDragEnded(this.onDragEnd)}componentWillUnmount(){window.clearInterval(this.updateIntervalHandle)}async performDeferredLaunchActions(){this.props.appStore.loadEmoji(),this.props.dispatcher.reportStats(),setInterval((()=>this.props.dispatcher.reportStats()),144e5),this.props.dispatcher.installGlobalLFSFilters(!1),setInterval((()=>this.checkForUpdates(!0)),144e5),this.checkForUpdates(!0),log.info(`launching: 3.3.5 (${br()})`),log.info(`execPath: '${process.execPath}'`),this.state.askToMoveToApplicationsFolderSetting&&!1===await ae()&&this.showPopup({type:nl.MoveToApplicationsFolder}),this.checkIfThankYouIsInOrder(),Er()&&It(pP,0)<Ct(-90,"days")&&this.setBanner({type:vu.WindowsVersionNoLongerSupported})}onMenuEvent(e){if(!("show-app-error"!==e&&this.state.errorCount>1))switch(e){case"push":return this.push();case"force-push":return this.push({forceWithLease:!0});case"pull":return this.pull();case"fetch":return this.fetch();case"show-changes":return this.showChanges(!0);case"show-history":return this.showHistory(!0);case"choose-repository":return this.chooseRepository();case"add-local-repository":return this.showAddLocalRepo();case"create-branch":return this.showCreateBranch();case"show-branches":return this.showBranches();case"remove-repository":return this.removeRepository(this.getRepository());case"create-repository":return this.showCreateRepository();case"rename-branch":return this.renameBranch();case"delete-branch":return this.deleteBranch();case"discard-all-changes":return this.discardAllChanges();case"stash-all-changes":return this.stashAllChanges();case"show-preferences":return this.props.dispatcher.showPopup({type:nl.Preferences});case"open-working-directory":return this.openCurrentRepositoryWorkingDirectory();case"update-branch-with-contribution-target-branch":return this.props.dispatcher.incrementMetric("updateFromDefaultBranchMenuCount"),this.updateBranchWithContributionTargetBranch();case"compare-to-branch":return this.showHistory(!1,!0);case"merge-branch":return this.props.dispatcher.recordMenuInitiatedMerge(),this.mergeBranch();case"squash-and-merge-branch":return this.props.dispatcher.recordMenuInitiatedMerge(!0),this.mergeBranch(!0);case"rebase-branch":return this.props.dispatcher.incrementMetric("rebaseCurrentBranchMenuCount"),this.showRebaseDialog();case"show-repository-settings":return this.showRepositorySettings();case"view-repository-on-github":return this.viewRepositoryOnGitHub();case"compare-on-github":return this.openBranchOnGitHub("compare");case"branch-on-github":return this.openBranchOnGitHub("tree");case"create-issue-in-repository-on-github":return this.openIssueCreationOnGitHub();case"open-in-shell":return this.openCurrentRepositoryInShell();case"clone-repository":return this.showCloneRepo();case"show-about":return this.showAbout();case"boomtown":return this.boomtown();case"go-to-commit-message":return this.goToCommitMessage();case"open-pull-request":return this.openPullRequest();case"preview-pull-request":return this.startPullRequest();case"install-cli":return this.props.dispatcher.installCLI();case"open-external-editor":return this.openCurrentRepositoryInExternalEditor();case"select-all":return this.selectAll();case"show-release-notes-popup":return this.showFakeReleaseNotesPopup();case"show-thank-you-popup":return this.showFakeThankYouPopup();case"show-stashed-changes":return this.showStashedChanges();case"hide-stashed-changes":return this.hideStashedChanges();case"test-show-notification":return this.testShowNotification();case"test-prune-branches":return this.testPruneBranches();case"find-text":return this.findText();case"show-app-error":return this.props.dispatcher.postError(new Error("Test Error - to use default error handler"+dn()));case"increase-active-resizable-width":return this.resizeActiveResizable("increase-active-resizable-width");case"decrease-active-resizable-width":return this.resizeActiveResizable("decrease-active-resizable-width");case"show-update-banner":return this.showFakeUpdateBanner({});case"show-arm64-banner":return this.showFakeUpdateBanner({isArm64:!0});case"show-showcase-update-banner":return this.showFakeUpdateBanner({isShowcase:!0});case"show-thank-you-banner":return this.showFakeThankYouBanner();default:return et(0,`Unknown menu event name: ${e}`)}}showFakeUpdateBanner(e){Yt.setIsx64ToARM64ImmediateAutoUpdate(!0===e.isArm64),e.isShowcase?this.props.dispatcher.setUpdateShowCaseVisibility(!0):this.props.dispatcher.setUpdateBannerVisibility(!0)}showFakeThankYouBanner(){const e=[{kind:"fixed",message:"A totally awesome fix that fixes something - #123. Thanks!"},{kind:"added",message:"You can now do this new thing that was added here - #456. Thanks!"}],t={type:vu.OpenThankYouCard,emoji:this.state.emoji,onOpenCard:()=>this.openThankYouCard(e,"3.3.5"),onThrowCardAway:()=>{console.log("Thrown away :(....")}};this.setBanner(t)}async showFakeReleaseNotesPopup(){}showFakeThankYouPopup(){}testShowNotification(){}testPruneBranches(){}resizeActiveResizable(e){document.activeElement?.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0}))}selectAll(){const e=new CustomEvent("select-all",{bubbles:!0,cancelable:!0});null!=document.activeElement&&document.activeElement.dispatchEvent(e)&&R()}findText(){const e=new CustomEvent("find-text",{bubbles:!0,cancelable:!0});null!=document.activeElement?document.activeElement.dispatchEvent(e):document.dispatchEvent(e)}boomtown(){setImmediate((()=>{throw new Error("Boomtown!")}))}async goToCommitMessage(){await this.showChanges(!1),this.props.dispatcher.setCommitMessageFocus(!0)}checkForUpdates(e,t=!1){Er()?log.error("Can't check for updates on Windows 8.1 or older. Next available update only supports Windows 10 and later"):Yt.checkForUpdates(e,t)}getDotComAccount(){const e=this.state.accounts.find((e=>e.endpoint===Qn()));return e||null}getEnterpriseAccount(){const e=this.state.accounts.find((e=>e.endpoint!==Qn()));return e||null}updateBranchWithContributionTargetBranch(){const{selectedState:e}=this.state;if(null==e||e.type!==qe.Repository)return;const{state:t,repository:n}=e,r=rc(n,t.branchesState);if(!r)return;this.props.dispatcher.initializeMergeOperation(n,!1,r);const{mergeStatus:i}=t.compareState;this.props.dispatcher.mergeBranch(n,r,i)}mergeBranch(e=!1){const t=this.state.selectedState;if(null==t||t.type!==qe.Repository)return;const{repository:n}=t;this.props.dispatcher.startMergeBranchOperation(n,e)}openBranchOnGitHub(e){const t=this.getCurrentRepositoryGitHubURL();if(!t)return;const n=this.state.selectedState;if(null==n||n.type!==qe.Repository)return;const r=n.state.branchesState.tip;if(r.kind!==Ar.Valid||!r.branch.upstreamWithoutRemote)return;const i=`${t}/${e}/${encodeURIComponent(r.branch.upstreamWithoutRemote)}`;this.props.dispatcher.openInBrowser(i)}openCurrentRepositoryWorkingDirectory(){const e=this.state.selectedState;null!=e&&e.type===qe.Repository&&this.showRepository(e.repository)}renameBranch(){const e=this.state.selectedState;if(null==e||e.type!==qe.Repository)return;const t=e.state.branchesState.tip;t.kind===Ar.Valid&&this.props.dispatcher.showPopup({type:nl.RenameBranch,repository:e.repository,branch:t.branch})}deleteBranch(){const e=this.state.selectedState;if(null===e||e.type!==qe.Repository)return;const t=e.state.branchesState.tip;if(t.kind===Ar.Valid){const n=e.state.branchesState.currentPullRequest;if(null!==n)this.props.dispatcher.showPopup({type:nl.DeletePullRequest,repository:e.repository,branch:t.branch,pullRequest:n});else{const n=null!==e.state.aheadBehind;this.props.dispatcher.showPopup({type:nl.DeleteBranch,repository:e.repository,branch:t.branch,existsOnRemote:n})}}}discardAllChanges(){const e=this.state.selectedState;if(null==e||e.type!==qe.Repository)return;const{workingDirectory:t}=e.state.changesState;this.props.dispatcher.showPopup({type:nl.ConfirmDiscardChanges,repository:e.repository,files:t.files,showDiscardChangesSetting:!1,discardingAllChanges:!0})}stashAllChanges(){const e=this.getRepository();null!==e&&e instanceof Ir&&this.props.dispatcher.createStashForCurrentBranch(e)}showAddLocalRepo=()=>this.props.dispatcher.showPopup({type:nl.AddRepository});showCreateRepository=()=>{this.props.dispatcher.showPopup({type:nl.CreateRepository})};showCloneRepo=e=>{let t=null;return void 0!==e&&(this.props.dispatcher.changeCloneRepositoriesTab(Pr.Generic),t=e),this.props.dispatcher.showPopup({type:nl.CloneRepository,initialURL:t})};showCreateTutorialRepositoryPopup=()=>{const e=this.getDotComAccount()||this.getEnterpriseAccount();null!==e&&this.props.dispatcher.showPopup({type:nl.CreateTutorialRepository,account:e})};onResumeTutorialRepository=()=>{const e=this.getSelectedTutorialRepository();e&&this.props.dispatcher.resumeTutorial(e)};getSelectedTutorialRepository(){const{selectedState:e}=this.state,t=e&&e.type===qe.Repository?e.repository:null;return t&&t.isTutorialRepository?t:null}showAbout(){this.props.dispatcher.showPopup({type:nl.About})}async showHistory(e,t=!1){const n=this.state.selectedState;null!=n&&n.type===qe.Repository&&(await this.props.dispatcher.closeCurrentFoldout(),await this.props.dispatcher.initializeCompare(n.repository,{kind:Ke.History}),await this.props.dispatcher.changeRepositorySection(n.repository,Ge.History),await this.props.dispatcher.updateCompareForm(n.repository,{filterText:"",showBranchList:t}),e&&this.repositoryViewRef.current?.setFocusHistoryNeeded())}async showChanges(e){const t=this.state.selectedState;null!=t&&t.type===qe.Repository&&(this.props.dispatcher.closeCurrentFoldout(),await this.props.dispatcher.changeRepositorySection(t.repository,Ge.Changes),e&&this.repositoryViewRef.current?.setFocusChangesNeeded())}chooseRepository(){return this.state.currentFoldout&&this.state.currentFoldout.type===je.Repository?this.props.dispatcher.closeFoldout(je.Repository):this.props.dispatcher.showFoldout({type:je.Repository})}showBranches(){const e=this.state.selectedState;if(null!=e&&e.type===qe.Repository)return this.state.currentFoldout&&this.state.currentFoldout.type===je.Branch?this.props.dispatcher.closeFoldout(je.Branch):this.props.dispatcher.showFoldout({type:je.Branch})}push(e){const t=this.state.selectedState;null!=t&&t.type===qe.Repository&&(e&&e.forceWithLease?this.props.dispatcher.confirmOrForcePush(t.repository):this.props.dispatcher.push(t.repository))}async pull(){const e=this.state.selectedState;null!=e&&e.type===qe.Repository&&this.props.dispatcher.pull(e.repository)}async fetch(){const e=this.state.selectedState;null!=e&&e.type===qe.Repository&&this.props.dispatcher.fetch(e.repository,Xt.UserInitiatedTask)}showStashedChanges(){const e=this.state.selectedState;null!=e&&e.type===qe.Repository&&this.props.dispatcher.selectStashedFile(e.repository)}hideStashedChanges(){const e=this.state.selectedState;null!=e&&e.type===qe.Repository&&this.props.dispatcher.hideStashedChanges(e.repository)}componentDidMount(){document.ondragover=e=>{null!=e.dataTransfer&&(this.isShowingModal?e.dataTransfer.dropEffect="none":e.dataTransfer.dropEffect="copy"),e.preventDefault()},document.ondrop=e=>{e.preventDefault()},document.body.ondrop=e=>{if(!this.isShowingModal){if(null!=e.dataTransfer){const t=e.dataTransfer.files;this.handleDragAndDrop(t)}e.preventDefault()}},Qt()&&(window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("keyup",this.onWindowKeyUp)),document.addEventListener("focus",this.onDocumentFocus,{capture:!0})}onDocumentFocus=e=>{this.props.dispatcher.appFocusedElementChanged()};onWindowKeyDown=e=>{if(!e.defaultPrevented&&!this.isShowingModal){if(Qt())if("Shift"===e.key&&e.altKey)this.props.dispatcher.setAccessKeyHighlightState(!1);else if("Alt"===e.key){if(e.shiftKey)return;this.state.currentFoldout&&this.state.currentFoldout.type===je.AppMenu&&this.state.appMenuState.length>1&&(this.props.dispatcher.setAppMenuState((e=>e.withReset())),this.props.dispatcher.closeFoldout(je.AppMenu)),this.props.dispatcher.setAccessKeyHighlightState(!0)}else if(!e.altKey||e.ctrlKey||e.metaKey)e.altKey||this.props.dispatcher.setAccessKeyHighlightState(!1);else if(this.state.appMenuState.length){const t=this.state.appMenuState[0].items,n=$r(e.key,t);n&&Wr(n)&&("submenuItem"===n.type?(this.props.dispatcher.setAppMenuState((e=>e.withReset().withSelectedItem(n).withOpenedMenu(n,!0))),this.props.dispatcher.showFoldout({type:je.AppMenu,enableAccessKeyNavigation:!0,openedWithAccessKey:!0})):this.props.dispatcher.executeMenuItem(n),e.preventDefault())}this.lastKeyPressed=e.key}};onWindowKeyUp=e=>{e.defaultPrevented||Qt()&&"Alt"===e.key&&(this.props.dispatcher.setAccessKeyHighlightState(!1),"Alt"===this.lastKeyPressed&&(this.state.currentFoldout&&this.state.currentFoldout.type===je.AppMenu?(this.props.dispatcher.setAppMenuState((e=>e.withReset())),this.props.dispatcher.closeFoldout(je.AppMenu)):this.props.dispatcher.showFoldout({type:je.AppMenu,enableAccessKeyNavigation:!0,openedWithAccessKey:!1})))};async handleDragAndDrop(e){const t=[...e].map((e=>e.path)),{dispatcher:n}=this.props;if(t.length>1){const e=await n.addRepositories(t);e.length>0&&(n.recordAddExistingRepository(),await n.selectRepository(e[0]))}else if(1===t.length){const e=await wv(t[0]).then((e=>"regular"===e.kind?e.topLevelWorkingDirectory:t[0])).catch((e=>(log.error("Could not determine repository type",e),t[0]))),{repositories:r}=this.state,i=lr(r,e);i?await n.selectRepository(i):await this.showPopup({type:nl.AddRepository,path:e})}}removeRepository=e=>{e&&(e instanceof jr||e.missing?this.props.dispatcher.removeRepository(e,!1):this.state.askForConfirmationOnRepositoryRemoval?this.props.dispatcher.showPopup({type:nl.RemoveRepository,repository:e}):this.props.dispatcher.removeRepository(e,!1))};onConfirmRepoRemoval=async(e,t)=>{await this.props.dispatcher.removeRepository(e,t)};getRepository(){const e=this.state.selectedState;return null==e?null:e.repository}showRebaseDialog(){const e=this.getRepository();!e||e instanceof jr||this.props.dispatcher.showRebaseDialog(e)}showRepositorySettings(){const e=this.getRepository();!e||e instanceof jr||this.props.dispatcher.showPopup({type:nl.RepositorySettings,repository:e})}openIssueCreationOnGitHub(){const e=this.getRepository();e instanceof Ir&&this.props.dispatcher.openIssueCreationPage(e)}viewRepositoryOnGitHub(){const e=this.getRepository();this.viewOnGitHub(e)}getCurrentRepositoryGitHubURL(){const e=this.getRepository();return!e||e instanceof jr||!e.gitHubRepository?null:e.gitHubRepository.htmlURL}openCurrentRepositoryInShell=()=>{const e=this.getRepository();e&&this.openInShell(e)};openCurrentRepositoryInExternalEditor(){const e=this.getRepository();e&&this.openInExternalEditor(e)}renderAppMenuBar(){return null}onMenuBarLostFocus=()=>{this.props.dispatcher.closeFoldout(je.AppMenu),this.props.dispatcher.setAppMenuState((e=>e.withReset()))};renderTitlebar(){const e="full-screen"===this.state.windowState;if(this.state.currentFoldout&&(this.state.currentFoldout.type,je.AppMenu),e)return null;const t=this.state.showWelcomeFlow,n=this.inNoRepositoriesViewState(),r=t||n?"light":"dark";return be.createElement(wo,{showAppIcon:!1,titleBarStyle:r,windowState:this.state.windowState,windowZoomFactor:this.state.windowZoomFactor},this.renderAppMenuBar())}onPopupDismissed=e=>this.props.dispatcher.closePopupById(e);onContinueWithUntrustedCertificate=e=>{V(e,"Could not securely connect to the server, because its certificate is not trusted. Attackers might be trying to steal your information.\n\nTo connect unsafely, which may put your data at risk, you can “Always trust” the certificate and try again.")};onUpdateAvailableDismissed=()=>this.props.dispatcher.setUpdateBannerVisibility(!1);allPopupContent(){const{allPopups:e}=this.state;return 0===e.length?null:be.createElement(be.Fragment,null,e.map((e=>{const t=this.state.currentPopup?.id===e.id;return be.createElement(ME.Provider,{key:e.id,value:{isTopMost:t}},this.popupContent(e,t))})))}popupContent(e,t){if(void 0===e.id)return iC("PopupNoId",new Error(`Attempted to open a popup of type '${e.type}' without an Id`)),null;const n=this.getOnPopupDismissedFn(e.id);switch(e.type){case nl.RenameBranch:const r=null!==this.state.selectedState&&this.state.selectedState.type===qe.Repository?this.state.selectedState.state.changesState.stashEntry:null;return be.createElement(TA,{key:"rename-branch",dispatcher:this.props.dispatcher,repository:e.repository,branch:e.branch,stash:r,onDismissed:n});case nl.DeleteBranch:return be.createElement(DA,{key:"delete-branch",dispatcher:this.props.dispatcher,repository:e.repository,branch:e.branch,existsOnRemote:e.existsOnRemote,onDismissed:n,onDeleted:this.onBranchDeleted});case nl.DeleteRemoteBranch:return be.createElement(AA,{key:"delete-remote-branch",dispatcher:this.props.dispatcher,repository:e.repository,branch:e.branch,onDismissed:n,onDeleted:this.onBranchDeleted});case nl.ConfirmDiscardChanges:const i=void 0===e.showDiscardChangesSetting||e.showDiscardChangesSetting,o=void 0!==e.discardingAllChanges&&e.discardingAllChanges;return be.createElement(IA,{key:"discard-changes",repository:e.repository,dispatcher:this.props.dispatcher,files:e.files,confirmDiscardChanges:this.state.askForConfirmationOnDiscardChanges,showDiscardChangesSetting:i,discardingAllChanges:o,onDismissed:n,onConfirmDiscardChangesChanged:this.onConfirmDiscardChangesChanged});case nl.ConfirmDiscardSelection:return be.createElement(s_,{key:"discard-selection",repository:e.repository,dispatcher:this.props.dispatcher,file:e.file,diff:e.diff,selection:e.selection,onDismissed:n});case nl.Preferences:let s=this.getRepository();return s instanceof jr&&(s=null),be.createElement(EP,{key:"preferences",initialSelectedTab:e.initialSelectedTab,dispatcher:this.props.dispatcher,dotComAccount:this.getDotComAccount(),confirmRepositoryRemoval:this.state.askForConfirmationOnRepositoryRemoval,confirmDiscardChanges:this.state.askForConfirmationOnDiscardChanges,confirmDiscardChangesPermanently:this.state.askForConfirmationOnDiscardChangesPermanently,confirmDiscardStash:this.state.askForConfirmationOnDiscardStash,confirmCheckoutCommit:this.state.askForConfirmationOnCheckoutCommit,confirmForcePush:this.state.askForConfirmationOnForcePush,confirmUndoCommit:this.state.askForConfirmationOnUndoCommit,uncommittedChangesStrategy:this.state.uncommittedChangesStrategy,selectedExternalEditor:this.state.selectedExternalEditor,useWindowsOpenSSH:this.state.useWindowsOpenSSH,showCommitLengthWarning:this.state.showCommitLengthWarning,notificationsEnabled:this.state.notificationsEnabled,optOutOfUsageTracking:this.state.optOutOfUsageTracking,enterpriseAccount:this.getEnterpriseAccount(),repository:s,onDismissed:n,selectedShell:this.state.selectedShell,selectedTheme:this.state.selectedTheme,repositoryIndicatorsEnabled:this.state.repositoryIndicatorsEnabled});case nl.RepositorySettings:{const t=e.repository,r=this.props.repositoryStateManager.get(t),i=Gl(this.state.accounts,t);return be.createElement(mk,{key:`repository-settings-${t.hash}`,initialSelectedTab:e.initialSelectedTab,remote:r.remote,dispatcher:this.props.dispatcher,repository:t,repositoryAccount:i,onDismissed:n})}case nl.SignIn:return be.createElement(gI,{key:"sign-in",signInState:this.state.signInState,dispatcher:this.props.dispatcher,onDismissed:n});case nl.AddRepository:return be.createElement(BP,{key:"add-existing-repository",onDismissed:n,dispatcher:this.props.dispatcher,path:e.path});case nl.CreateRepository:return be.createElement(KP,{key:"create-repository",onDismissed:n,dispatcher:this.props.dispatcher,initialPath:e.path,isTopMost:t});case nl.CloneRepository:return be.createElement(cI,{key:"clone-repository",dotComAccount:this.getDotComAccount(),enterpriseAccount:this.getEnterpriseAccount(),initialURL:e.initialURL,onDismissed:n,dispatcher:this.props.dispatcher,selectedTab:this.state.selectedCloneRepositoryTab,onTabSelected:this.onCloneRepositoriesTabSelected,apiRepositories:this.state.apiRepositories,onRefreshRepositories:this.onRefreshRepositories,isTopMost:t});case nl.CreateBranch:{const t=this.props.repositoryStateManager.get(e.repository).branchesState,r=e.repository;if(t.tip.kind===Ar.Unknown)return n(),null;let i=null,o=null;return _r(r)&&(i=Br(r),o=t.upstreamDefaultBranch),be.createElement(dI,{key:"create-branch",tip:t.tip,defaultBranch:t.defaultBranch,upstreamDefaultBranch:o,allBranches:t.allBranches,repository:r,targetCommit:e.targetCommit,upstreamGitHubRepository:i,accounts:this.state.accounts,cachedRepoRulesets:this.state.cachedRepoRulesets,onBranchCreatedFromCommit:this.onBranchCreatedFromCommit,onDismissed:n,dispatcher:this.props.dispatcher,initialName:e.initialName||""})}case nl.InstallGit:return be.createElement(yI,{key:"install-git",onDismissed:n,onOpenShell:this.onOpenShellIgnoreWarning,path:e.path});case nl.About:const a="3.3.5";return be.createElement(vI,{key:"about",onDismissed:n,applicationName:"GitHub Desktop",applicationVersion:a,applicationArchitecture:process.arch,onCheckForUpdates:this.onCheckForUpdates,onCheckForNonStaggeredUpdates:this.onCheckForNonStaggeredUpdates,onShowAcknowledgements:this.showAcknowledgements,onShowTermsAndConditions:this.showTermsAndConditions,isTopMost:t});case nl.PublishRepository:return be.createElement(RI,{key:"publish",dispatcher:this.props.dispatcher,repository:e.repository,accounts:this.state.accounts,onDismissed:n});case nl.UntrustedCertificate:return be.createElement(DI,{key:"untrusted-certificate",certificate:e.certificate,url:e.url,onDismissed:n,onContinue:this.onContinueWithUntrustedCertificate});case nl.Acknowledgements:return be.createElement(xI,{key:"acknowledgements",onDismissed:n,applicationVersion:"3.3.5"});case nl.RemoveRepository:return be.createElement(PI,{key:"confirm-remove-repository",repository:e.repository,onConfirmation:this.onConfirmRepoRemoval,onDismissed:n});case nl.TermsAndConditions:return be.createElement(_I,{key:"terms-and-conditions",onDismissed:n});case nl.PushBranchCommits:return be.createElement(Ex,{key:"push-branch-commits",dispatcher:this.props.dispatcher,repository:e.repository,branch:e.branch,unPushedCommits:e.unPushedCommits,onConfirm:this.openCreatePullRequestInBrowser,onDismissed:n});case nl.CLIInstalled:return be.createElement(NI,{key:"cli-installed",onDismissed:n});case nl.GenericGitAuthentication:return be.createElement(OI,{key:"generic-git-authentication",hostname:e.hostname,onDismiss:n,onSave:this.onSaveCredentials,retryAction:e.retryAction});case nl.ExternalEditorFailed:const l=e.openPreferences,c=e.suggestDefaultEditor;return be.createElement(bI,{key:"editor-error",message:e.message,onDismissed:n,showPreferencesDialog:this.onShowAdvancedPreferences,viewPreferences:l,suggestDefaultEditor:c});case nl.OpenShellFailed:return be.createElement(MI,{key:"shell-error",message:e.message,onDismissed:n,showPreferencesDialog:this.onShowAdvancedPreferences});case nl.InitializeLFS:return be.createElement(FI,{key:"initialize-lfs",repositories:e.repositories,onDismissed:n,onInitialize:this.initializeLFS});case nl.LFSAttributeMismatch:return be.createElement(LI,{key:"lsf-attribute-mismatch",onDismissed:n,onUpdateExistingFilters:this.updateExistingLFSFilters});case nl.UpstreamAlreadyExists:return be.createElement(HI,{key:"upstream-already-exists",repository:e.repository,existingRemote:e.existingRemote,onDismissed:n,onUpdate:this.onUpdateExistingUpstreamRemote,onIgnore:this.onIgnoreExistingUpstreamRemote});case nl.ReleaseNotes:return be.createElement($I,{key:"release-notes",emoji:this.state.emoji,newReleases:e.newReleases,onDismissed:n});case nl.DeletePullRequest:return be.createElement(zI,{key:"delete-pull-request",dispatcher:this.props.dispatcher,repository:e.repository,branch:e.branch,onDismissed:n,pullRequest:e.pullRequest});case nl.OversizedFiles:return be.createElement(GI,{key:"oversized-files",oversizedFiles:e.oversizedFiles,onDismissed:n,dispatcher:this.props.dispatcher,context:e.context,repository:e.repository});case nl.CommitConflictsWarning:return be.createElement(qI,{key:"commit-conflicts-warning",dispatcher:this.props.dispatcher,files:e.files,repository:e.repository,context:e.context,onDismissed:n});case nl.PushNeedsPull:return be.createElement(VI,{key:"push-needs-pull",dispatcher:this.props.dispatcher,repository:e.repository,onDismissed:n});case nl.ConfirmForcePush:{const{askForConfirmationOnForcePush:t}=this.state;return be.createElement(q_,{key:"confirm-force-push",dispatcher:this.props.dispatcher,repository:e.repository,upstreamBranch:e.upstreamBranch,askForConfirmationOnForcePush:t,onDismissed:n})}case nl.StashAndSwitchBranch:{const{repository:t,branchToCheckout:r}=e,{branchesState:i,changesState:o}=this.props.repositoryStateManager.get(t),{tip:s}=i;if(s.kind!==Ar.Valid)return null;const a=s.branch,l=null!==o.stashEntry;return be.createElement(YI,{key:"stash-and-switch-branch",dispatcher:this.props.dispatcher,repository:e.repository,currentBranch:a,branchToCheckout:r,hasAssociatedStash:l,onDismissed:n})}case nl.ConfirmOverwriteStash:{const{repository:t,branchToCheckout:r}=e;return be.createElement(XI,{key:"overwrite-stash",dispatcher:this.props.dispatcher,repository:t,branchToCheckout:r,onDismissed:n})}case nl.ConfirmDiscardStash:{const{repository:t,stash:r}=e;return be.createElement(QI,{key:"confirm-discard-stash-dialog",dispatcher:this.props.dispatcher,askForConfirmationOnDiscardStash:this.state.askForConfirmationOnDiscardStash,repository:t,stash:r,onDismissed:n})}case nl.ConfirmCheckoutCommit:{const{repository:t,commit:r}=e;return be.createElement(ZI,{key:"confirm-checkout-commit-dialog",dispatcher:this.props.dispatcher,askForConfirmationOnCheckoutCommit:this.state.askForConfirmationOnDiscardStash,repository:t,commit:r,onDismissed:n})}case nl.CreateTutorialRepository:return be.createElement(JI,{key:"create-tutorial-repository-dialog",account:e.account,progress:e.progress,onDismissed:n,onCreateTutorialRepository:this.onCreateTutorialRepository});case nl.ConfirmExitTutorial:return be.createElement(SA,{key:"confirm-exit-tutorial",onDismissed:n,onContinue:this.onExitTutorialToHomeScreen});case nl.PushRejectedDueToMissingWorkflowScope:return be.createElement(e_,{onDismissed:n,rejectedPath:e.rejectedPath,dispatcher:this.props.dispatcher,repository:e.repository});case nl.SAMLReauthRequired:return be.createElement(t_,{onDismissed:n,organizationName:e.organizationName,endpoint:e.endpoint,retryAction:e.retryAction,dispatcher:this.props.dispatcher});case nl.CreateFork:return be.createElement(n_,{onDismissed:n,dispatcher:this.props.dispatcher,repository:e.repository,account:e.account});case nl.CreateTag:return be.createElement(r_,{key:"create-tag",repository:e.repository,onDismissed:n,dispatcher:this.props.dispatcher,targetCommitSha:e.targetCommitSha,initialName:e.initialName,localTags:e.localTags});case nl.DeleteTag:return be.createElement(i_,{key:"delete-tag",repository:e.repository,onDismissed:n,dispatcher:this.props.dispatcher,tagName:e.tagName});case nl.ChooseForkSettings:return be.createElement(o_,{repository:e.repository,onDismissed:n,dispatcher:this.props.dispatcher});case nl.LocalChangesOverwritten:const u=this.state.selectedState,h=null!==u&&u.type===qe.Repository?u.state.changesState.stashEntry:null;return be.createElement(a_,{repository:e.repository,dispatcher:this.props.dispatcher,hasExistingStash:null!==h,retryAction:e.retryAction,onDismissed:n,files:e.files});case nl.MoveToApplicationsFolder:return be.createElement(c_,{dispatcher:this.props.dispatcher,onDismissed:n});case nl.ChangeRepositoryAlias:return be.createElement(u_,{dispatcher:this.props.dispatcher,repository:e.repository,onDismissed:n});case nl.ThankYou:return be.createElement(d_,{key:"thank-you",emoji:this.state.emoji,userContributions:e.userContributions,friendlyName:e.friendlyName,latestVersion:e.latestVersion,onDismissed:n});case nl.CommitMessage:const p=this.props.repositoryStateManager.get(e.repository),{tip:d}=p.branchesState,m=d.kind===Ar.Valid?d.branch.name:null,f=null===e.repository.gitHubRepository||xr(e.repository.gitHubRepository),g=uE(e.repository,this.props.dispatcher,this.state.emoji,this.props.issuesStore,this.props.gitHubUserStore,this.state.accounts),y=Gl(this.state.accounts,e.repository);return be.createElement(f_,{key:"commit-message",autocompletionProviders:g,branch:m,coAuthors:e.coAuthors,commitAuthor:p.commitAuthor,commitMessage:e.commitMessage,commitSpellcheckEnabled:this.state.commitSpellcheckEnabled,showCommitLengthWarning:this.state.showCommitLengthWarning,dialogButtonText:e.dialogButtonText,dialogTitle:e.dialogTitle,dispatcher:this.props.dispatcher,prepopulateCommitSummary:e.prepopulateCommitSummary,repository:e.repository,showBranchProtected:p.changesState.currentBranchProtected,repoRulesInfo:p.changesState.currentRepoRulesInfo,aheadBehind:p.aheadBehind,showCoAuthoredBy:e.showCoAuthoredBy,showNoWriteAccess:!f,onDismissed:n,onSubmitCommitMessage:e.onSubmitCommitMessage,repositoryAccount:y});case nl.MultiCommitOperation:{const{selectedState:t,emoji:n}=this.state;if(null===t||t.type!==qe.Repository)return null;const{changesState:r,multiCommitOperationState:i}=t.state,{workingDirectory:o,conflictState:s}=r;return null===i?(log.warn("[App] invalid state encountered - multi commit flow should not be active when step is null"),null):be.createElement(L_,{key:"multi-commit-operation",repository:e.repository,dispatcher:this.props.dispatcher,state:i,conflictState:s,emoji:n,workingDirectory:o,askForConfirmationOnForcePush:this.state.askForConfirmationOnForcePush,accounts:this.state.accounts,cachedRepoRulesets:this.state.cachedRepoRulesets,openFileInExternalEditor:this.openFileInExternalEditor,resolvedExternalEditor:this.state.resolvedExternalEditor,openRepositoryInShell:this.openCurrentRepositoryInShell})}case nl.WarnLocalChangesBeforeUndo:{const{repository:t,commit:r,isWorkingDirectoryClean:i}=e;return be.createElement(H_,{key:"warn-local-changes-before-undo",dispatcher:this.props.dispatcher,repository:t,commit:r,isWorkingDirectoryClean:i,confirmUndoCommit:this.state.askForConfirmationOnUndoCommit,onDismissed:n})}case nl.WarningBeforeReset:{const{repository:t,commit:r}=e;return be.createElement(U_,{key:"warning-before-reset",dispatcher:this.props.dispatcher,repository:t,commit:r,onDismissed:n})}case nl.InvalidatedToken:return be.createElement(W_,{key:"invalidated-token",dispatcher:this.props.dispatcher,account:e.account,onDismissed:n});case nl.AddSSHHost:return be.createElement($_,{key:"add-ssh-host",host:e.host,ip:e.ip,keyType:e.keyType,fingerprint:e.fingerprint,onSubmit:e.onSubmit,onDismissed:n});case nl.SSHKeyPassphrase:return be.createElement(z_,{key:"ssh-key-passphrase",keyPath:e.keyPath,onSubmit:e.onSubmit,onDismissed:n});case nl.SSHUserPassword:return be.createElement(J_,{key:"ssh-user-password",username:e.username,onSubmit:e.onSubmit,onDismissed:n});case nl.PullRequestChecksFailed:return be.createElement(V_,{key:"pull-request-checks-failed",dispatcher:this.props.dispatcher,shouldChangeRepository:e.shouldChangeRepository,repository:e.repository,pullRequest:e.pullRequest,commitMessage:e.commitMessage,commitSha:e.commitSha,checks:e.checks,accounts:this.state.accounts,onSubmit:n,onDismissed:n});case nl.CICheckRunRerun:return be.createElement(Y_,{key:"rerun-check-runs",checkRuns:e.checkRuns,dispatcher:this.props.dispatcher,repository:e.repository,prRef:e.prRef,onDismissed:n,failedOnly:e.failedOnly});case nl.WarnForcePush:{const{askForConfirmationOnForcePush:t}=this.state;return be.createElement(x_,{key:"warn-force-push",dispatcher:this.props.dispatcher,operation:e.operation,askForConfirmationOnForcePush:t,onBegin:this.getWarnForcePushDialogOnBegin(e.onBegin,n),onDismissed:n})}case nl.DiscardChangesRetry:return be.createElement(X_,{key:"discard-changes-retry",dispatcher:this.props.dispatcher,retryAction:e.retryAction,onDismissed:n,onConfirmDiscardChangesChanged:this.onConfirmDiscardChangesPermanentlyChanged});case nl.PullRequestReview:return be.createElement(Z_,{key:"pull-request-review",dispatcher:this.props.dispatcher,shouldCheckoutBranch:e.shouldCheckoutBranch,shouldChangeRepository:e.shouldChangeRepository,repository:e.repository,pullRequest:e.pullRequest,review:e.review,emoji:this.state.emoji,accounts:this.state.accounts,onSubmit:n,onDismissed:n});case nl.UnreachableCommits:{const{selectedState:t,emoji:r}=this.state;if(null==t||t.type!==qe.Repository)return null;const{commitLookup:i,commitSelection:{shas:o,shasInDiff:s}}=t.state;return be.createElement(OD,{selectedShas:o,shasInDiff:s,commitLookup:i,selectedTab:e.selectedTab,emoji:r,onDismissed:n})}case nl.StartPullRequest:{const t=this.getPullRequestState();if(null===t)return iC("FailedToStartPullRequest",new Error("Failed to start pull request because pull request state was null")),null;const{pullRequestFilesListWidth:r,hideWhitespaceInPullRequestDiff:i}=this.state,{prBaseBranches:o,currentBranch:s,defaultBranch:a,imageDiffType:l,externalEditorLabel:c,nonLocalCommitSHA:u,prRecentBaseBranches:h,repository:p,showSideBySideDiff:d,currentBranchHasPullRequest:m}=e;return be.createElement(sN,{key:"open-pull-request",prBaseBranches:o,currentBranch:s,defaultBranch:a,dispatcher:this.props.dispatcher,fileListWidth:r,hideWhitespaceInDiff:i,imageDiffType:l,nonLocalCommitSHA:u,pullRequestState:t,prRecentBaseBranches:h,repository:p,externalEditorLabel:c,showSideBySideDiff:d,currentBranchHasPullRequest:m,onDismissed:n,onOpenInExternalEditor:this.onOpenInExternalEditor})}case nl.Error:return be.createElement(RP,{error:e.error,onDismissed:n,onShowPopup:this.showPopup,onRetryAction:this.onRetryAction});case nl.InstallingUpdate:return be.createElement(aN,{key:"installing-update",dispatcher:this.props.dispatcher,onDismissed:n});case nl.TestNotifications:return be.createElement(pN,{key:"test-notifications",dispatcher:this.props.dispatcher,notificationsDebugStore:this.props.notificationsDebugStore,repository:e.repository,onDismissed:n});case nl.PullRequestComment:return be.createElement(dN,{key:"pull-request-comment",dispatcher:this.props.dispatcher,shouldCheckoutBranch:e.shouldCheckoutBranch,shouldChangeRepository:e.shouldChangeRepository,repository:e.repository,pullRequest:e.pullRequest,comment:e.comment,emoji:this.state.emoji,accounts:this.state.accounts,onSubmit:n,onDismissed:n});case nl.UnknownAuthors:return be.createElement(mN,{key:"unknown-authors",authors:e.authors,onCommit:e.onCommit,onDismissed:n});case nl.ConfirmRepoRulesBypass:return be.createElement(fN,{key:"repo-rules-bypass-confirmation",repository:e.repository,branch:e.branch,onConfirm:e.onConfirm,onDismissed:n});default:return et(0,`Unknown popup type: ${e}`)}}getPullRequestState(){const{selectedState:e}=this.state;return null==e||e.type!==qe.Repository?null:e.state.pullRequestState}getWarnForcePushDialogOnBegin(e,t){return()=>{e(),t()}}onExitTutorialToHomeScreen=()=>{const e=this.getSelectedTutorialRepository();return!!e&&(this.props.dispatcher.pauseTutorial(e),!0)};onCreateTutorialRepository=e=>{this.props.dispatcher.createTutorialRepository(e)};onUpdateExistingUpstreamRemote=e=>{this.props.dispatcher.updateExistingUpstreamRemote(e)};onIgnoreExistingUpstreamRemote=e=>{this.props.dispatcher.ignoreExistingUpstreamRemote(e)};updateExistingLFSFilters=()=>{this.props.dispatcher.installGlobalLFSFilters(!0)};initializeLFS=e=>{this.props.dispatcher.installLFSHooks(e)};onCloneRepositoriesTabSelected=e=>{this.props.dispatcher.changeCloneRepositoriesTab(e)};onRefreshRepositories=e=>{this.props.dispatcher.refreshApiRepositories(e)};onShowAdvancedPreferences=()=>{this.props.dispatcher.showPopup({type:nl.Preferences,initialSelectedTab:Dr.Advanced})};onBranchCreatedFromCommit=()=>{const e=this.repositoryViewRef.current;null!==e&&e.scrollCompareListToTop()};onOpenShellIgnoreWarning=e=>{this.props.dispatcher.openShell(e,!0)};onSaveCredentials=async(e,t,n,r)=>{await this.props.dispatcher.saveGenericGitCredentials(e,t,n),this.props.dispatcher.performRetry(r)};onCheckForUpdates=()=>this.checkForUpdates(!1);onCheckForNonStaggeredUpdates=()=>this.checkForUpdates(!1,!0);showAcknowledgements=()=>{this.props.dispatcher.showPopup({type:nl.Acknowledgements})};showTermsAndConditions=()=>{this.props.dispatcher.showPopup({type:nl.TermsAndConditions})};renderPopups(){const e=this.allPopupContent();return be.createElement(Ie,null,e&&be.createElement(ze,{classNames:"modal",timeout:gN},e))}renderDragElement(){return be.createElement("div",{id:"dragElement"},this.renderCurrentDragElement())}renderCurrentDragElement(){const{currentDragElement:e,emoji:t}=this.state;if(null===e)return null;const{gitHubRepository:n,commit:r,selectedCommits:i}=e;return e.type===Js.Commit?be.createElement(l_,{gitHubRepository:n,commit:r,selectedCommits:i,emoji:t}):et(e.type,`Unknown drag element type: ${e}`)}renderZoomInfo(){return be.createElement(vo,{windowZoomFactor:this.state.windowZoomFactor})}renderFullScreenInfo(){return be.createElement(Eo,{windowState:this.state.windowState})}onConfirmDiscardChangesChanged=e=>{this.props.dispatcher.setConfirmDiscardChangesSetting(e)};onConfirmDiscardChangesPermanentlyChanged=e=>{this.props.dispatcher.setConfirmDiscardChangesPermanentlySetting(e)};onRetryAction=e=>{this.props.dispatcher.performRetry(e)};showPopup=e=>{this.props.dispatcher.showPopup(e)};setBanner=e=>this.props.dispatcher.setBanner(e);getDesktopAppContentsClassNames=()=>{const{currentDragElement:e}=this.state,t=null!==e&&e.type===Js.Commit;return Vr()({"commit-being-dragged":t})};renderApp(){return be.createElement("div",{id:"desktop-app-contents",className:this.getDesktopAppContentsClassNames()},this.renderToolbar(),this.renderBanner(),this.renderRepository(),this.renderPopups(),this.renderDragElement())}renderRepositoryList=()=>{const e=this.state.selectedState?this.state.selectedState.repository:null,t=this.state.selectedExternalEditor?this.state.selectedExternalEditor:void 0,n=this.state.selectedShell,r=this.state.repositoryFilterText;return be.createElement(zC,{filterText:r,onFilterTextChanged:this.onRepositoryFilterTextChanged,selectedRepository:e,onSelectionChanged:this.onSelectionChanged,repositories:this.state.repositories,recentRepositories:this.state.recentRepositories,localRepositoryStateLookup:this.state.localRepositoryStateLookup,askForConfirmationOnRemoveRepository:this.state.askForConfirmationOnRepositoryRemoval,onRemoveRepository:this.removeRepository,onViewOnGitHub:this.viewOnGitHub,onOpenInShell:this.openInShell,onShowRepository:this.showRepository,onOpenInExternalEditor:this.openInExternalEditor,externalEditorLabel:t,shellLabel:n,dispatcher:this.props.dispatcher})};viewOnGitHub=e=>{if(!(e instanceof Ir))return;const t=Mr(e);t&&this.props.dispatcher.openInBrowser(t)};openInShell=e=>{e instanceof Ir&&this.props.dispatcher.openShell(e.path)};openFileInExternalEditor=e=>{this.props.dispatcher.openInExternalEditor(e)};openInExternalEditor=e=>{e instanceof Ir&&this.props.dispatcher.openInExternalEditor(e.path)};onOpenInExternalEditor=t=>{const n=this.state.selectedState?.repository;if(void 0===n)return;const r=e.join(n.path,t);this.props.dispatcher.openInExternalEditor(r)};showRepository=e=>{e instanceof Ir&&rt.showFolderContents(e.path)};onRepositoryDropdownStateChanged=e=>{"open"===e?this.props.dispatcher.showFoldout({type:je.Repository}):this.props.dispatcher.closeFoldout(je.Repository)};onExitTutorial=()=>{1===this.state.repositories.length&&xu(this.state.currentOnboardingTutorialStep)?this.props.dispatcher.showPopup({type:nl.ConfirmExitTutorial}):this.onRepositoryDropdownStateChanged("open")};renderRepositoryToolbarButton(){const e=this.state.selectedState,t=e?e.repository:null;let n,r;if(t){const e=t instanceof Ir?t.alias:null;n=ko(t),r=e??t.name}else this.state.repositories.length>0?(n=eo,r="Select a Repository"):(n=eo,r="No Repositories");const i=this.state.currentFoldout&&this.state.currentFoldout.type===je.Repository,o=i?"open":"closed",s=t&&!i?t.path:void 0,a=lc(this.state.sidebarWidth),l={position:"absolute",marginLeft:0,width:a,minWidth:a,height:"100%",top:0},c=null===this.state.currentPopup;return be.createElement(mx,{icon:n,title:r,description:"当前存储库",tooltip:s,foldoutStyle:l,onContextMenu:this.onRepositoryToolbarButtonContextMenu,onDropdownStateChanged:this.onRepositoryDropdownStateChanged,dropdownContentRenderer:this.renderRepositoryList,dropdownState:o,enableFocusTrap:c})}onRepositoryToolbarButtonContextMenu=()=>{const e=this.state.selectedState?.repository;if(void 0===e)return;const t=this.state.selectedExternalEditor??void 0;lC(EC({onRemoveRepository:this.removeRepository,onShowRepository:this.showRepository,onOpenInShell:this.openInShell,onOpenInExternalEditor:this.openInExternalEditor,askForConfirmationOnRemoveRepository:this.state.askForConfirmationOnRepositoryRemoval,externalEditorLabel:t,onChangeRepositoryAlias:e=>{this.props.dispatcher.showPopup({type:nl.ChangeRepositoryAlias,repository:e})},onRemoveRepositoryAlias:e=>{this.props.dispatcher.changeRepositoryAlias(e,null)},onViewOnGitHub:this.viewOnGitHub,repository:e,shellLabel:this.state.selectedShell}))};renderPushPullToolbarButton(){const e=this.state.selectedState;if(!e||e.type!==qe.Repository)return null;const t=e.state,n=t.revertProgress;if(n)return be.createElement(dD,{progress:n});let r=t.remote?t.remote.name:null;const i=t.pushPullFetchProgress,{conflictState:o}=t.changesState,s=null!==o&&"rebase"===o.kind,{aheadBehind:a,branchesState:l}=t,{pullWithRebase:c,tip:u}=l;u.kind===Ar.Valid&&null!==u.branch.upstreamRemoteName&&(r=u.branch.upstreamRemoteName,u.branch.upstreamWithoutRemote!==u.branch.name&&(r=u.branch.upstream));const h=this.state.currentFoldout,p=null!==h&&h.type===je.PushPull,d=pc(l,a),m=null===this.state.currentPopup;return be.createElement(Cx,{dispatcher:this.props.dispatcher,repository:e.repository,aheadBehind:t.aheadBehind,numTagsToPush:null!==t.tagsToPush?t.tagsToPush.length:0,remoteName:r,lastFetched:t.lastFetched,networkActionInProgress:t.isPushPullFetchInProgress,progress:i,tipState:u.kind,pullWithRebase:c,rebaseInProgress:s,forcePushBranchState:d,shouldNudge:this.state.currentOnboardingTutorialStep===Ru.PushBranch,isDropdownOpen:p,askForConfirmationOnForcePush:this.state.askForConfirmationOnForcePush,onDropdownStateChanged:this.onPushPullDropdownStateChanged,enableFocusTrap:m})}showCreateBranch=()=>{const e=this.state.selectedState;if(!e||e.type!==qe.Repository)return;if(e.state.branchesState.tip.kind===Ar.Unknown)return;const t=e.repository;return this.props.dispatcher.showPopup({type:nl.CreateBranch,repository:t})};openPullRequest=()=>{const e=this.state.selectedState;if(null==e||e.type!==qe.Repository)return;const t=e.state.branchesState.currentPullRequest,n=this.props.dispatcher;null==t?(n.createPullRequest(e.repository),n.incrementMetric("createPullRequestCount")):n.showPullRequest(e.repository)};startPullRequest=()=>{const e=this.state.selectedState;null!=e&&e.type===qe.Repository&&this.props.dispatcher.startPullRequest(e.repository)};openCreatePullRequestInBrowser=(e,t)=>{this.props.dispatcher.openCreatePullRequestInBrowser(e,t)};onPushPullDropdownStateChanged=e=>{"open"===e?this.props.dispatcher.showFoldout({type:je.PushPull}):this.props.dispatcher.closeFoldout(je.PushPull)};onBranchDropdownStateChanged=e=>{"open"===e?this.props.dispatcher.showFoldout({type:je.Branch}):this.props.dispatcher.closeFoldout(je.Branch)};renderBranchToolbarButton(){const e=this.state.selectedState;if(null==e||e.type!==qe.Repository)return null;const t=this.state.currentFoldout,n=null!==t&&t.type===je.Branch,r=e.repository,{branchesState:i}=e.state,o=null===this.state.currentPopup;return be.createElement(hD,{dispatcher:this.props.dispatcher,isOpen:n,onDropDownStateChanged:this.onBranchDropdownStateChanged,repository:r,repositoryState:e.state,selectedTab:this.state.selectedBranchesTab,pullRequests:i.openPullRequests,currentPullRequest:i.currentPullRequest,isLoadingPullRequests:i.isLoadingPullRequests,shouldNudge:this.state.currentOnboardingTutorialStep===Ru.CreateBranch,showCIStatusPopover:this.state.showCIStatusPopover,emoji:this.state.emoji,enableFocusTrap:o})}renderBanner(){if(this.inNoRepositoriesViewState())return null;let e=null;return null!==this.state.currentBanner?e=function(e,t,n){switch(e.type){case vu.SuccessfulMerge:return be.createElement(nP,{ourBranch:e.ourBranch,theirBranch:e.theirBranch,onDismissed:n,key:"successful-merge"});case vu.MergeConflictsFound:return be.createElement(eP,{dispatcher:t,ourBranch:e.ourBranch,popup:e.popup,onDismissed:n,key:"merge-conflicts"});case vu.SuccessfulRebase:return be.createElement(iP,{targetBranch:e.targetBranch,baseBranch:e.baseBranch,onDismissed:n,key:"successful-rebase"});case vu.RebaseConflictsFound:return be.createElement(rP,{dispatcher:t,targetBranch:e.targetBranch,onOpenDialog:e.onOpenDialog,onDismissed:n,key:"merge-conflicts"});case vu.BranchAlreadyUpToDate:return be.createElement(oP,{ourBranch:e.ourBranch,theirBranch:e.theirBranch,onDismissed:n,key:"branch-already-up-to-date"});case vu.SuccessfulCherryPick:return be.createElement(sP,{key:"successful-cherry-pick",targetBranchName:e.targetBranchName,countCherryPicked:e.count,onDismissed:n,onUndo:e.onUndo});case vu.CherryPickConflictsFound:return be.createElement(aP,{targetBranchName:e.targetBranchName,onOpenConflictsDialog:e.onOpenConflictsDialog,onDismissed:n,key:"cherry-pick-conflicts"});case vu.CherryPickUndone:return be.createElement(lP,{key:"cherry-pick-undone",targetBranchName:e.targetBranchName,countCherryPicked:e.countCherryPicked,onDismissed:n});case vu.OpenThankYouCard:return be.createElement(cP,{key:"open-thank-you-card",emoji:e.emoji,onDismissed:n,onOpenCard:e.onOpenCard,onThrowCardAway:e.onThrowCardAway});case vu.SuccessfulSquash:return be.createElement(uP,{key:"successful-squash",count:e.count,onDismissed:n,onUndo:e.onUndo});case vu.SquashUndone:{const t=1===e.commitsCount?"commit":"commits";return be.createElement(tP,{timeout:5e3,onDismissed:n},"Squash of ",e.commitsCount," ",t," undone.")}case vu.SuccessfulReorder:{const t=1===e.count?"commit":"commits";return be.createElement(tP,{timeout:15e3,onDismissed:n,onUndo:e.onUndo},be.createElement("span",null,"Successfully reordered ",e.count," ",t,"."))}case vu.ReorderUndone:{const t=1===e.commitsCount?"commit":"commits";return be.createElement(tP,{timeout:5e3,onDismissed:n},"Reorder of ",e.commitsCount," ",t," undone.")}case vu.ConflictsFound:return be.createElement(hP,{operationDescription:e.operationDescription,onOpenConflictsDialog:e.onOpenConflictsDialog,onDismissed:n,key:"conflicts-found"});case vu.WindowsVersionNoLongerSupported:return be.createElement(dP,{onDismissed:n});default:return et(0,`Unknown popup type: ${e}`)}}(this.state.currentBanner,this.props.dispatcher,this.onBannerDismissed):(this.state.isUpdateAvailableBannerVisible||this.state.isUpdateShowcaseVisible)&&(e=this.renderUpdateBanner()),be.createElement(Ie,null,e&&be.createElement(ze,{classNames:"banner",timeout:yN},e))}renderUpdateBanner(){return be.createElement(JA,{dispatcher:this.props.dispatcher,newReleases:Yt.state.newReleases,isX64ToARM64ImmediateAutoUpdate:Yt.state.isX64ToARM64ImmediateAutoUpdate,onDismissed:this.onUpdateAvailableDismissed,isUpdateShowcaseVisible:this.state.isUpdateShowcaseVisible,emoji:this.state.emoji,key:"update-available"})}onBannerDismissed=()=>{this.props.dispatcher.clearBanner()};renderToolbar(){if(this.inNoRepositoriesViewState())return null;const e=lc(this.state.sidebarWidth);return be.createElement(ux,{id:"desktop-app-toolbar"},be.createElement("div",{className:"sidebar-section",style:{width:e}},this.renderRepositoryToolbarButton()),this.renderBranchToolbarButton(),this.renderPushPullToolbarButton())}renderRepository(){const e=this.state;if(this.inNoRepositoriesViewState())return be.createElement(AI,{dotComAccount:this.getDotComAccount(),enterpriseAccount:this.getEnterpriseAccount(),onCreate:this.showCreateRepository,onClone:this.showCloneRepo,onAdd:this.showAddLocalRepo,onCreateTutorialRepository:this.showCreateTutorialRepositoryPopup,onResumeTutorialRepository:this.onResumeTutorialRepository,tutorialPaused:this.isTutorialPaused(),apiRepositories:e.apiRepositories,onRefreshRepositories:this.onRefreshRepositories});const t=e.selectedState;if(!t)return be.createElement(wN,null);if(t.type===qe.Repository){const n=e.selectedExternalEditor?e.selectedExternalEditor:void 0;return be.createElement(EA,{ref:this.repositoryViewRef,key:t.repository.hash,repository:t.repository,state:t.state,dispatcher:this.props.dispatcher,emoji:e.emoji,sidebarWidth:e.sidebarWidth,commitSummaryWidth:e.commitSummaryWidth,stashedFilesWidth:e.stashedFilesWidth,issuesStore:this.props.issuesStore,gitHubUserStore:this.props.gitHubUserStore,onViewCommitOnGitHub:this.onViewCommitOnGitHub,imageDiffType:e.imageDiffType,hideWhitespaceInChangesDiff:e.hideWhitespaceInChangesDiff,hideWhitespaceInHistoryDiff:e.hideWhitespaceInHistoryDiff,showSideBySideDiff:e.showSideBySideDiff,focusCommitMessage:e.focusCommitMessage,askForConfirmationOnDiscardChanges:e.askForConfirmationOnDiscardChanges,askForConfirmationOnDiscardStash:e.askForConfirmationOnDiscardStash,askForConfirmationOnCheckoutCommit:e.askForConfirmationOnCheckoutCommit,accounts:e.accounts,externalEditorLabel:n,resolvedExternalEditor:e.resolvedExternalEditor,onOpenInExternalEditor:this.onOpenInExternalEditor,appMenu:e.appMenuState[0],currentTutorialStep:e.currentOnboardingTutorialStep,onExitTutorial:this.onExitTutorial,isShowingModal:this.isShowingModal,isShowingFoldout:null!==this.state.currentFoldout,aheadBehindStore:this.props.aheadBehindStore,commitSpellcheckEnabled:this.state.commitSpellcheckEnabled,showCommitLengthWarning:this.state.showCommitLengthWarning,onCherryPick:this.startCherryPickWithoutBranch,pullRequestSuggestedNextAction:e.pullRequestSuggestedNextAction})}return t.type===qe.CloningRepository?be.createElement(PA,{repository:t.repository,progress:t.progress}):t.type===qe.MissingRepository?be.createElement(PP,{repository:t.repository,dispatcher:this.props.dispatcher}):et(0,`Unknown state: ${t}`)}renderWelcomeFlow(){return be.createElement(XA,{dispatcher:this.props.dispatcher,optOut:this.state.optOutOfUsageTracking,accounts:this.state.accounts,signInState:this.state.signInState})}render(){if(this.loading)return null;const e=this.state.appIsFocused?"focused":"blurred",t=this.state.showWelcomeFlow?aa.Light:this.state.currentTheme;return be.createElement("div",{id:"desktop-app-chrome",className:e},be.createElement(jI,{theme:t}),this.renderTitlebar(),this.state.showWelcomeFlow?this.renderWelcomeFlow():this.renderApp(),this.renderZoomInfo(),this.renderFullScreenInfo())}onRepositoryFilterTextChanged=e=>{this.props.dispatcher.setRepositoryFilterText(e)};onSelectionChanged=e=>{this.props.dispatcher.selectRepository(e),this.props.dispatcher.closeFoldout(je.Repository)};onViewCommitOnGitHub=async(e,t)=>{const n=this.getRepository();if(!n||n instanceof jr||!n.gitHubRepository)return;const r=rN(n.gitHubRepository,e,t);null!==r&&this.props.dispatcher.openInBrowser(r)};onBranchDeleted=e=>{this.props.dispatcher.executeCompare(e,{kind:Ke.History})};inNoRepositoriesViewState(){return 0===this.state.repositories.length||this.isTutorialPaused()}isTutorialPaused(){return this.state.currentOnboardingTutorialStep===Ru.Paused}startCherryPickWithoutBranch=(e,t)=>{const n=this.props.repositoryStateManager.get(e),{tip:r}=n.branchesState;let i=null;if(r.kind!==Ar.Valid)throw new Error("Tip is not in a valid state, which is required to start the cherry-pick flow");i=r.branch,this.props.dispatcher.initializeMultiCommitOperation(e,{kind:"Cherry-pick",sourceBranch:i,branchCreated:!1,commits:t},null,t,r.branch.tip.sha);const o=wd(n);this.props.dispatcher.setMultiCommitOperationStep(e,o),this.props.dispatcher.incrementMetric("cherryPickViaContextMenuCount"),this.showPopup({type:nl.MultiCommitOperation,repository:e})};async checkIfThankYouIsInOrder(){const e=this.getDotComAccount();if(null===e)return;const{lastThankYou:t}=this.state,{login:n}=e;if(function(e,t,n){if(void 0===e)return!1;const{version:r,checkedUsers:i}=e;return i.includes(t)&&"3.3.5"===r}(t,n))return;const r=void 0!==t&&t.checkedUsers.includes(n),i=await async function(e,t){const n=await async function(e){let t=await xt(250);e&&(t=t.slice(0,1));const n=t.map(Rt),r=new Map;return n.forEach((e=>{if(0===e.thankYous.length)return;const t=/\.\sThanks\s@.+!/i;e.thankYous.forEach((e=>{const n=t.exec(e.message);if(null===n)return;const i=n[0].slice(10,-1);let o=r.get(i);void 0===o?o=[e]:o.push(e),r.set(i,o)}))})),r}(e),r=n.get(t);return void 0!==r?r:null}(r,n);if(null===i)return void m_(this.props.dispatcher,t,n,"3.3.5");const o=r?"3.3.5":null,s={type:vu.OpenThankYouCard,emoji:this.state.emoji,onOpenCard:()=>this.openThankYouCard(i,o),onThrowCardAway:()=>{m_(this.props.dispatcher,t,n,"3.3.5")}};this.setBanner(s)}openThankYouCard=(e,t=null)=>{const n=this.getDotComAccount();if(null===n)return;const{friendlyName:r}=n;this.props.dispatcher.showPopup({type:nl.ThankYou,userContributions:e,friendlyName:r,latestVersion:t})};onDragEnd=e=>{this.props.dispatcher.closeFoldout(je.Branch),void 0===e&&this.props.dispatcher.incrementMetric("dragStartedAndCanceledCount")}}function wN(){return be.createElement("div",{className:"panel blankslate"},"No repository selected")}function vN(e){const{login:t,email:n,avatarURL:r,name:i}=e;return{login:t,email:n,avatarURL:r,name:i}}function CN(e){return Object.keys(localStorage).filter((e=>/^IssuesStore\/\d+\/lastFetch$/.test(e))).forEach((e=>localStorage.removeItem(e))),e.table("issues").clear()}const SN=new Set(["LOCAL_GIT_DIRECTORY"]),EN=new Set(["button","a","input","textarea","label"].map((e=>e.toUpperCase()))),kN=new Set(["button","option","menuitem","tab","radio"]);function RN(e,t){if(t.has(e))return e;for(const n of t.keys())if(en(n,e))return n;return e}var xN=n(9093),TN=n.n(xN),DN=n(7952),AN=n.n(DN);function PN(e,t){const{endpoint:n,owner:r,name:i}=e;return function(e,t,n,r){return`${e}/repos/${t}/${n}/commits/${r}`}(n,r.login,i,t)}function IN(e){return Date.now()-e.fetchedAt.valueOf()>6e4}function _N(e,t,n){return`${e.path}:${t}:${n}`}function NN(e,t){return`${e}:${t}`}function ON(e){const[t,n]=e.p.split(".");return{userId:e.u,presenceKey:NN(e.u,t),connectionCount:Number(n),metadata:e.m||[]}}function MN(e){return e.startsWith("presence-")}class BN{constructor(){this.presenceItems=new Map}shouldUsePresenceItem(e){const t=this.presenceItems.get(e.presenceKey);return!t||t.connectionCount<=e.connectionCount}addPresenceItem(e){this.shouldUsePresenceItem(e)&&this.presenceItems.set(e.presenceKey,e)}removePresenceItem(e){this.shouldUsePresenceItem(e)&&this.presenceItems.delete(e.presenceKey)}replacePresenceItems(e){this.presenceItems.clear();for(const t of e)this.addPresenceItem(t)}getPresenceItems(){return Array.from(this.presenceItems.values())}}class FN{constructor(){this.presenceChannels=new Map}getPresenceChannel(e){const t=this.presenceChannels.get(e)||new BN;return this.presenceChannels.set(e,t),t}handleMessage(e,t){const n=this.getPresenceChannel(e);switch(t.e){case"pf":n.replacePresenceItems(t.d.map(ON));break;case"pa":n.addPresenceItem(ON(t.d));break;case"pr":n.removePresenceItem(ON(t.d))}return this.getChannelItems(e)}getChannelItems(e){return this.getPresenceChannel(e).getPresenceItems()}clearChannel(e){this.presenceChannels.delete(e)}}const LN="_i";function HN(e){return Object.assign(Object.assign({},e),{isLocal:!0})}class UN{constructor(){this.subscriberMetadata=new Map}setMetadata(e,t){this.subscriberMetadata.set(e,t)}removeSubscribers(e){let t=!1;for(const n of e)t=this.subscriberMetadata.delete(n)||t;return t}getMetadata(e){if(!e){const e=[];let t;for(const n of this.subscriberMetadata.values())for(const r of n)if(LN in r){const e=Boolean(r._i);t=void 0===t?e:e&&t}else e.push(r);return void 0!==t&&e.push({[LN]:t?1:0}),e}const t=[],{subscriber:n,markAllAsLocal:r}=e;for(const[e,i]of this.subscriberMetadata){const o=r||e===n?i.map(HN):i;t.push(...o)}return t}hasSubscribers(){return this.subscriberMetadata.size>0}}class WN{constructor(){this.metadataByChannel=new Map}setMetadata({subscriber:e,channelName:t,metadata:n}){let r=this.metadataByChannel.get(t);r||(r=new UN,this.metadataByChannel.set(t,r)),r.setMetadata(e,n)}removeSubscribers(e){const t=new Set;for(const[n,r]of this.metadataByChannel)r.removeSubscribers(e)&&t.add(n),r.hasSubscribers()||this.metadataByChannel.delete(n);return t}getChannelMetadata(e,t){const n=this.metadataByChannel.get(e);return(null==n?void 0:n.getMetadata(t))||[]}}async function $N(e,t){let n;const r=new Promise(((t,r)=>{n=self.setTimeout((()=>r(new Error("timeout"))),e)}));if(!t)return r;try{await Promise.race([r,qN(t)])}catch(e){throw self.clearTimeout(n),e}}async function zN(e,t){let n;const r=new Promise((t=>{n=self.setTimeout(t,e)}));if(!t)return r;try{await Promise.race([r,qN(t)])}catch(e){throw self.clearTimeout(n),e}}function qN(e){return new Promise(((t,n)=>{const r=new Error("aborted");r.name="AbortError",e.aborted?n(r):e.addEventListener("abort",(()=>n(r)))}))}function jN(e,t){return async function(e,t,n=1/0,r){const i=r?qN(r):null;for(let s=0;s<t;s++)try{const t=i?Promise.race([e(),i]):e();return await t}catch(e){if("AbortError"===e.name)throw e;if(s===t-1)throw e;const i=1e3*Math.pow(2,s),a=(o=.1*i,Math.floor(Math.random()*Math.floor(o)));await zN(Math.min(n,i+a),r)}var o;throw new Error("retry failed")}((()=>async function(e,t,n){const r=new WebSocket(e),i=function(e){return new Promise(((t,n)=>{e.readyState===WebSocket.OPEN?t(e):(e.onerror=()=>{e.onerror=null,e.onopen=null,n(new Error("connect failed"))},e.onopen=()=>{e.onerror=null,e.onopen=null,t(e)})}))}(r);try{return await Promise.race([i,$N(t,n)]),r}catch(e){throw async function(e){try{(await e).close()}catch(e){}}(i),e}}(e,t.timeout,t.signal)),t.attempts,t.maxDelay,t.signal)}class GN{constructor(e,t,n){this.socket=null,this.opening=null,this.url=e,this.delegate=t,this.policy=n}async open(){if(this.opening||this.socket)return;this.opening=new AbortController;const e=Object.assign(Object.assign({},this.policy),{signal:this.opening.signal});try{this.socket=await jN(this.url,e)}catch(e){return void this.delegate.socketDidFinish(this)}finally{this.opening=null}this.socket.onclose=e=>{var t,n;this.socket=null,this.delegate.socketDidClose(this,e.code,e.reason),(this.delegate.socketShouldRetry?this.delegate.socketShouldRetry(this,e.code):(n=e.code)!==VN&&n!==KN)?setTimeout((()=>this.open()),(100,t=100+(this.delegate.reconnectWindow||50),Math.random()*(t-100)+100)):this.delegate.socketDidFinish(this)},this.socket.onmessage=e=>{this.delegate.socketDidReceiveMessage(this,e.data)},this.delegate.socketDidOpen(this)}close(e,t){this.opening?(this.opening.abort(),this.opening=null):this.socket&&(this.socket.onclose=null,this.socket.close(e,t),this.socket=null,this.delegate.socketDidClose(this,e,t),this.delegate.socketDidFinish(this))}send(e){this.socket&&this.socket.send(e)}isOpen(){return!!this.socket}}const VN=1008,KN=1011;class YN{constructor(e){if(this.map=new Map,e)for(const[t,n]of e)this.set(t,n)}get(e){return this.map.get(e)||new Set}set(e,t){let n=this.map.get(e);return n||(n=new Set,this.map.set(e,n)),n.add(t),this}has(e){return this.map.has(e)}delete(e,t){const n=this.map.get(e);if(!n)return!1;if(!t)return this.map.delete(e);const r=n.delete(t);return n.size||this.map.delete(e),r}drain(e){const t=[];for(const n of this.keys())this.delete(n,e)&&!this.has(n)&&t.push(n);return t}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}get size(){return this.map.size}}class XN{constructor(){this.subscriptions=new YN,this.signatures=new Map}add(...e){const t=[];for(const{subscriber:n,topic:r}of e)this.subscriptions.has(r.name)||(t.push(r),this.signatures.set(r.name,r)),this.subscriptions.set(r.name,n);return t}delete(...e){const t=[];for(const{subscriber:n,topic:r}of e)this.subscriptions.delete(r.name,n)&&!this.subscriptions.has(r.name)&&(t.push(r),this.signatures.delete(r.name));return t}drain(...e){const t=[];for(const n of e)for(const e of this.subscriptions.drain(n)){const n=this.signatures.get(e);this.signatures.delete(e),t.push(n)}return t}topics(){return this.signatures.values()}topic(e){return this.signatures.get(e)||null}subscribers(e){return this.subscriptions.get(e).values()}}function*QN(e,t){for(let n=0;n<e.length;n+=t)yield e.slice(n,n+t)}function ZN(e){return new Promise(((t,n)=>{const r=new Error("aborted");r.name="AbortError",e.aborted?n(r):e.addEventListener("abort",(()=>n(r)))}))}async function JN(e,t){let n;const r=new Promise((t=>{n=self.setTimeout(t,e)}));if(!t)return r;try{await Promise.race([r,ZN(t)])}catch(e){throw self.clearTimeout(n),e}}var eO;!function(e){e.Deploy="Alive Redeploy",e.Reconnect="Alive Reconnect"}(eO||(eO={}));class tO{constructor(e,t,n,r){this.url=e,this.getUrl=t,this.inSharedWorker=n,this.notify=r,this.subscriptions=new XN,this.state="online",this.retrying=null,this.connectionCount=0,this.presence=new FN,this.presenceMetadata=new WN,this.intentionallyDisconnected=!1,this.lastCameOnline=0,this.userId=function(e){const t=e.match(/\/u\/(\d+)\/ws/);return t?+t[1]:0}(e),this.presenceId=`${Math.round(Math.random()*(Math.pow(2,31)-1))}_${Math.round(Date.now()/1e3)}`,this.presenceKey=NN(this.userId,this.presenceId),this.socket=this.connect()}subscribe(e){const t=this.subscriptions.add(...e);this.sendSubscribe(t);for(const t of e){const e=t.topic.name;MN(e)&&this.notifyCachedPresence(t.subscriber,e)}}unsubscribe(e){const t=this.subscriptions.delete(...e);this.sendUnsubscribe(t)}unsubscribeAll(...e){const t=this.subscriptions.drain(...e);this.sendUnsubscribe(t);const n=this.presenceMetadata.removeSubscribers(e);this.sendPresenceMetadataUpdate(n)}requestPresence(e,t){for(const n of t)this.notifyCachedPresence(e,n)}notifyCachedPresence(e,t){const n=this.presence.getChannelItems(t);0!==n.length&&this.notifyPresenceChannel(t,n)}updatePresenceMetadata(e){const t=new Set;for(const n of e)this.presenceMetadata.setMetadata(n),t.add(n.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;const t=[];for(const n of e){const e=this.subscriptions.topic(n);e&&t.push(e)}this.sendSubscribe(t)}online(){var e;this.lastCameOnline=Date.now(),this.state="online",null===(e=this.retrying)||void 0===e||e.abort(),this.socket.open()}offline(){var e;this.state="offline",null===(e=this.retrying)||void 0===e||e.abort(),this.socket.close()}shutdown(){this.inSharedWorker&&self.close()}get reconnectWindow(){const e=Date.now()-this.lastCameOnline<6e4;return 0===this.connectionCount||this.intentionallyDisconnected||e?0:1e4}socketDidOpen(){this.intentionallyDisconnected=!1,this.connectionCount++,this.socket.url=this.getUrlWithPresenceId(),this.sendSubscribe(this.subscriptions.topics())}socketDidClose(e,t,n){if(void 0!==this.redeployEarlyReconnectTimeout&&clearTimeout(this.redeployEarlyReconnectTimeout),"Alive Reconnect"===n)this.intentionallyDisconnected=!0;else if("Alive Redeploy"===n){this.intentionallyDisconnected=!0;const e=60*(3+22*Math.random())*1e3;this.redeployEarlyReconnectTimeout=setTimeout((()=>{this.intentionallyDisconnected=!0,this.socket.close(1e3,"Alive Redeploy Early Client Reconnect")}),e)}}socketDidFinish(){"offline"!==this.state&&this.reconnect()}socketDidReceiveMessage(e,t){const n=JSON.parse(t);switch(n.e){case"ack":this.handleAck(n);break;case"msg":this.handleMessage(n)}}handleAck(e){for(const t of this.subscriptions.topics())t.offset=e.off}handleMessage(e){const t=e.ch,n=this.subscriptions.topic(t);if(n)if(n.offset=e.off,"e"in e.data){const n=this.presence.handleMessage(t,e.data);this.notifyPresenceChannel(t,n)}else e.data.wait||(e.data.wait=0),this.notify(this.subscriptions.subscribers(t),{channel:t,type:"message",data:e.data})}notifyPresenceChannel(e,t){var n,r;const i=new Map;for(const e of t){const{userId:t,metadata:n,presenceKey:r}=e,o=i.get(t)||{userId:t,isOwnUser:t===this.userId,metadata:[]};if(r!==this.presenceKey){for(const e of n)LN in e?!1!==o.isIdle&&(o.isIdle=Boolean(e._i)):o.metadata.push(e);i.set(t,o)}}for(const t of this.subscriptions.subscribers(e)){const o=this.userId,s=Array.from(i.values()).filter((e=>e.userId!==o)),a=null!==(r=null===(n=i.get(this.userId))||void 0===n?void 0:n.metadata)&&void 0!==r?r:[],l=this.presenceMetadata.getChannelMetadata(e,{subscriber:t,markAllAsLocal:!this.inSharedWorker});this.notify([t],{channel:e,type:"presence",data:[{userId:o,isOwnUser:!0,metadata:[...a,...l]},...s]})}}async reconnect(){if(!this.retrying)try{this.retrying=new AbortController;const e=await async function(e,t,n=1/0,r){const i=r?ZN(r):null;for(let s=0;s<t;s++)try{const t=i?Promise.race([e(),i]):e();return await t}catch(e){if("AbortError"===e.name)throw e;if(s===t-1)throw e;const i=1e3*Math.pow(2,s),a=(o=.1*i,Math.floor(Math.random()*Math.floor(o)));await JN(Math.min(n,i+a),r)}var o;throw new Error("retry failed")}(this.getUrl,1/0,6e4,this.retrying.signal);e?(this.url=e,this.socket=this.connect()):this.shutdown()}catch(e){if("AbortError"!==e.name)throw e}finally{this.retrying=null}}getUrlWithPresenceId(){const e=new URL(this.url,self.location.origin);return e.searchParams.set("shared",this.inSharedWorker.toString()),e.searchParams.set("p",`${this.presenceId}.${this.connectionCount}`),e.toString()}connect(){const e=new GN(this.getUrlWithPresenceId(),this,{timeout:4e3,attempts:7});return e.open(),e}sendSubscribe(e){const t=Array.from(e);for(const e of QN(t,25)){const t={};for(const n of e)MN(n.name)?t[n.signed]=JSON.stringify(this.presenceMetadata.getChannelMetadata(n.name)):t[n.signed]=n.offset;this.socket.send(JSON.stringify({subscribe:t}))}}sendUnsubscribe(e){const t=Array.from(e,(e=>e.signed));for(const e of QN(t,25))this.socket.send(JSON.stringify({unsubscribe:e}));for(const t of e)MN(t.name)&&this.presence.clearChannel(t.name)}}function nO(e,t){return t.find((t=>en(t,e)))}(async function(){const e=localStorage.getItem(zt);if(null!==e){try{await ue(e),localStorage.removeItem(zt)}catch(e){log.error("Error migrating existing GUID",e)}qt=e}})(),function(e){return!("browser"===e.type&&vr()||e.env.PWD)}(process)&&async function(){const e=process.env.SHELL||"/bin/bash",t={timeout:5e3,maxBuffer:10485760};try{const{stdout:n}=await w(e,["-ilc","command awk 'BEGIN{for(k in ENVIRON) printf(\"%c%s=%s%c\", 0, k, ENVIRON[k], 0)}'"],t);for(const[,e,t]of n.matchAll(/\0(.+?)=(.+?)\0/g))SN.has(e)||(process.env[e]=t)}catch(e){log.error("Failed updating process environment from shell",e)}}(),function(){i.install({environment:"node",handleUncaughtExceptions:!1,retrieveSourceMap:a});const e=Error;c=e.prepareStackTrace,e.prepareStackTrace=u}(),process.env.LOCAL_GIT_DIRECTORY=e.resolve(__dirname,"git"),delete process.env.GIT_EXEC_PATH;const rO=performance.now();n(3822),n(858);let iO=null;const oO=(e,t={},n)=>{e=h(e),console.error("Uncaught exception",e);{const r={osVersion:br(),...t};try{iO&&(null!==iO.currentBanner&&(r.currentBanner=iO.currentBanner.type),null!==iO.currentPopup&&(r.currentPopup=`${iO.currentPopup.type}`),null!==iO.selectedState&&(r.selectedState=`${iO.selectedState.type}`,iO.selectedState.type===qe.Repository&&(r.selectedRepositorySection=`${iO.selectedState.state.selectedSection}`)),null!==iO.currentFoldout&&(r.currentFoldout=`${iO.currentFoldout.type}`),iO.showWelcomeFlow&&(r.inWelcomeFlow="true"),1!==iO.windowZoomFactor&&(r.windowZoomFactor=`${iO.windowZoomFactor}`),iO.errorCount>0&&(r.activeAppErrors=`${iO.errorCount}`),r.repositoryCount=`${iO.repositories.length}`,r.windowState=iO.windowState??"Unknown",r.accounts=`${iO.accounts.length}`,r.automaticallySwitchTheme=`${iO.selectedTheme===aa.System&&ma()}`)}catch(e){}!function(e,t,n){ie(ne(e),t,n)}(e,r,n??!1)}};process.once("uncaughtException",(e=>{oO(e),function(e){re(ne(e))}(e)})),process.on("send-non-fatal-exception",((e,t)=>{oO(e,t,!0)})),window.addEventListener("unhandledrejection",(e=>{Lt()&&e.reason instanceof Error&&iC("unhandledRejection",e.reason)}));const sO=new class extends Ya{database;queryCache=null;pruneQueryCacheTimeoutId=null;constructor(e){super(),this.database=e}async getByLogin(e,t){const n=Vn.fromAccount(e),r=await n.fetchUser(t).catch((e=>null));if(!r||"User"!==r.type)return null;const i=null!==r.email&&r.email.length>0?r.email:vh(r.id,t,e.endpoint);return{avatarURL:r.avatar_url,email:i,name:r.name||r.login,login:r.login}}async updateMentionables(e,t){const n=Vn.fromAccount(t),r=await this.database.getMentionableCacheEntry(e.dbID);if(void 0!==r&&Date.now()-r.lastUpdated<6e5)return;const i=await n.fetchMentionables(e.owner.login,e.name,r?.eTag);if(null===i)return void await this.database.touchMentionableCacheEntry(e.dbID,r?.eTag);const{endpoint:o}=t,s=i.users.map((e=>{const{name:t,login:n,avatar_url:r}=e;return{name:t,login:n,email:e.email||wh(n,o),avatarURL:r}}));await this.database.updateMentionablesForRepository(e.dbID,s,i.etag),this.queryCache?.repository.dbID===e.dbID&&(this.queryCache=null,this.clearCachePruneTimeout())}async getMentionableUsers(e){return this.database.getAllMentionablesForRepository(e.dbID)}async getMentionableUsersMatching(e,t,n=25){const r=this.queryCache?.repository.dbID===e.dbID?this.queryCache.users:await this.getMentionableUsers(e);this.setQueryCache(e,r);const i=[],o=t.toLowerCase();for(const e of r){const t=`${e.login} ${e.name}`.trim().toLowerCase().indexOf(o);t>=0&&i.push({user:e,ix:t})}return i.sort(((e,t)=>rr(e.ix,t.ix)||rr(e.user.login,t.user.login))).slice(0,n).map((e=>e.user))}setQueryCache(e,t){this.clearCachePruneTimeout(),this.queryCache={repository:e,users:t},this.pruneQueryCacheTimeoutId=window.setTimeout((()=>{this.pruneQueryCacheTimeoutId=null,this.queryCache=null}),6e4)}clearCachePruneTimeout(){null!==this.pruneQueryCacheTimeoutId&&(clearTimeout(this.pruneQueryCacheTimeoutId),this.pruneQueryCacheTimeoutId=null)}}(new class extends rw{constructor(e,t){super(e,t),this.conditionalVersion(1,{users:"++id, &[endpoint+email]"}),this.conditionalVersion(2,{users:"++id, [endpoint+email], [endpoint+login]",mentionables:"++id, repositoryID, &[userID+repositoryID]"}),this.conditionalVersion(3,{mentionables:null,users:null}),this.conditionalVersion(4,{mentionables:"&[gitHubRepositoryID+login], gitHubRepositoryID"}),this.conditionalVersion(5,{mentionableCache:"gitHubRepositoryID"})}updateMentionablesForRepository(e,t,n){return this.transaction("rw",this.mentionables,this.mentionableCache,(async()=>{await this.mentionables.where("gitHubRepositoryID").equals(e).delete(),await this.touchMentionableCacheEntry(e,n),await this.mentionables.bulkAdd(t.map((t=>({...t,gitHubRepositoryID:e}))))}))}async getAllMentionablesForRepository(e){return(await this.mentionables.where("gitHubRepositoryID").equals(e).toArray()).map(vN)}getMentionableCacheEntry(e){return this.mentionableCache.get(e)}touchMentionableCacheEntry(e,t){const n={gitHubRepositoryID:e,lastUpdated:Date.now(),eTag:t};return this.mentionableCache.put(n)}}("GitHubUserDatabase")),aO=new class extends Ya{_repositories=new Array;stateByID=new Map;async clone(e,t,n){const r=new jr(t,e);this._repositories.push(r);const i=`Cloning into ${t}`;this.stateByID.set(r.id,{kind:"clone",title:i,value:0}),this.emitUpdate();let o=!0;try{await async function(e,t,n,r){const i=await uh(n.account,e),o=n.defaultBranch??await cu(),s=[...Yw(),"-c",`init.defaultBranch=${o}`,"clone","--recursive"];let a={env:i};if(r){s.push("--progress");const e=`Cloning into ${t}`,n="clone";a=await nh({...a,trackLFSProgress:!0},new Uu,(t=>{const i="progress"===t.kind?t.details.text:t.text,o=t.percent;r({kind:n,title:e,description:i,value:o})})),r({kind:n,title:e,value:0})}n.branch&&s.push("-b",n.branch),s.push("--",e,t),await qw(s,__dirname,"clone",a)}(e,t,n,(e=>{this.stateByID.set(r.id,e),this.emitUpdate()}))}catch(i){o=!1;const s={type:ot.Clone,name:r.name,url:e,path:t,options:n};i=new at(i,{retryAction:s,repository:r}),this.emitError(i)}return this.remove(r),o}get repositories(){return Array.from(this._repositories)}getRepositoryState(e){return this.stateByID.get(e.id)||null}remove(e){this.stateByID.delete(e.id);const t=this._repositories.findIndex((t=>t.id===e.id));t>-1&&this._repositories.splice(t,1),this.emitUpdate()}},lO=new class{db;queryCache=null;pruneQueryCacheTimeoutId=null;constructor(e){this.db=e}async getLatestUpdatedAt(e){const t=this.db,n=await t.issues.where("[gitHubRepositoryID+updated_at]").between([e.dbID],[e.dbID+1],!0,!1).last();if(!n||!n.updated_at)return null;const r=new Date(n.updated_at);return isNaN(r.getTime())?null:r}async refreshIssues(e,t){const n=Vn.fromAccount(t),r=await this.getLatestUpdatedAt(e),i=r?"all":"open",o=await n.fetchIssues(e.owner.login,e.name,i,r);this.storeIssues(o,e)}async storeIssues(e,t){const n=e.filter((e=>"closed"===e.state)),r=e.filter((e=>"open"===e.state)).map((e=>({gitHubRepositoryID:t.dbID,number:e.number,title:e.title,updated_at:e.updated_at}))),i=this.db;function o(e,t){return i.issues.where("[gitHubRepositoryID+number]").equals([e,t]).limit(1).first()}await this.db.transaction("rw",this.db.issues,(async()=>{for(const e of n){const n=await o(t.dbID,e.number);n&&await this.db.issues.delete(n.id)}for(const e of r){const n=await o(t.dbID,e.number);n?await i.issues.update(n.id,e):await i.issues.add(e)}})),this.queryCache?.repository.dbID===t.dbID&&(this.queryCache=null,this.clearCachePruneTimeout())}async getAllIssueHitsFor(e){return(await this.db.getIssuesForRepository(e.dbID)).map((e=>({number:e.number,title:e.title})))}async getIssuesMatching(e,t,n=25){const r=this.queryCache?.repository.dbID===e.dbID?await Promise.resolve(this.queryCache?.issues):await this.getAllIssueHitsFor(e);if(this.setQueryCache(e,r),!t.length)return r.slice().sort(((e,t)=>ir(e.number,t.number))).slice(0,n);const i=[],o=t.toLowerCase();for(const e of r){const t=`${e.number} ${e.title}`.trim().toLowerCase().indexOf(o);t>=0&&i.push({hit:{number:e.number,title:e.title},ix:t})}return i.sort(((e,t)=>rr(e.ix,t.ix)||rr(e.hit.title,t.hit.title))).slice(0,n).map((e=>e.hit))}setQueryCache(e,t){this.clearCachePruneTimeout(),this.queryCache={repository:e,issues:t},this.pruneQueryCacheTimeoutId=window.setTimeout((()=>{this.pruneQueryCacheTimeoutId=null,this.queryCache=null}),6e4)}clearCachePruneTimeout(){null!==this.pruneQueryCacheTimeoutId&&(clearTimeout(this.pruneQueryCacheTimeoutId),this.pruneQueryCacheTimeoutId=null)}}(new class extends rw{constructor(e,t){super(e,t),this.conditionalVersion(1,{issues:"++id, &[gitHubRepositoryID+number], gitHubRepositoryID, number"}),this.conditionalVersion(2,{issues:"++id, &[gitHubRepositoryID+number], gitHubRepositoryID, number, [gitHubRepositoryID+updated_at]"},CN)}getIssuesForRepository(e){return this.issues.where("gitHubRepositoryID").equals(e).toArray()}}("IssuesDatabase")),cO=new class{db;uiActivityMonitor;uiActivityMonitorSubscription=null;optOut;constructor(e,t){this.db=e,this.uiActivityMonitor=t;const n=nC();this.optOut=n||!1,At(Wv,!1)||this.sendOptInStatusPing(this.optOut,n),this.enableUiActivityMonitoring(),window.addEventListener("unhandledrejection",(async()=>{try{this.increment("unhandledRejectionCount")}catch(e){log.error("Failed recording unhandled rejection",e)}}))}shouldReportDailyStats(){const e=It(Hv,0);return Date.now()-e>864e5}async reportStats(e,t){if(this.optOut)return;if(!oa())return;if(!this.shouldReportDailyStats())return;const n=Date.now(),r=await this.getDailyStats(e,t);try{const e=await this.post(r);if(!e.ok)throw new Error(`Unexpected status: ${e.statusText} (${e.status})`);log.info("Stats reported."),await this.clearDailyStats(),_t(Hv,n)}catch(e){log.error("Error reporting stats:",e)}}async recordLaunchStats(e){await this.db.launches.add(e)}async clearDailyStats(){await this.db.launches.clear(),await this.db.dailyMeasures.clear(),localStorage.removeItem(Qv),this.enableUiActivityMonitoring()}enableUiActivityMonitoring(){null===this.uiActivityMonitorSubscription&&(this.uiActivityMonitorSubscription=this.uiActivityMonitor.onActivity(this.onUiActivity))}disableUiActivityMonitoring(){null!==this.uiActivityMonitorSubscription&&(this.uiActivityMonitorSubscription.dispose(),this.uiActivityMonitorSubscription=null)}async getDailyStats(e,t){const n=await this.getAverageLaunchStats(),r=await this.getDailyMeasures(),i=this.determineUserType(e),o=this.categorizedRepositoryCounts(t),s=this.getOnboardingStats(),a=localStorage.getItem("shell")||"none",l=localStorage.getItem("externalEditor")||"none",c=Nt(Qv).length,u=ga()?"split":"unified",h=await ae();return{eventType:"usage",version:"3.3.5",osVersion:br(),platform:"darwin",architecture:await Y(),theme:pa(),selectedTerminalEmulator:a,selectedTextEditor:l,notificationsEnabled:Fv(),...n,...r,...i,...s,guid:await jt(),...o,repositoriesCommittedInWithoutWriteAccess:c,diffMode:u,launchedFromApplicationsFolder:h}}getOnboardingStats(){return null===eC($v)?{}:{timeToWelcomeWizardTerminated:tC(zv),timeToFirstAddedRepository:tC(qv),timeToFirstClonedRepository:tC(jv),timeToFirstCreatedRepository:tC(Gv),timeToFirstCommit:tC(Vv),timeToFirstGitHubPush:tC(Kv),timeToFirstNonDefaultBranchCheckout:tC(Yv),welcomeWizardSignInMethod:function(){const e=localStorage.getItem(Xv)??void 0;if("basic"===e||"web"===e||void 0===e)return e;log.error(`Could not parse welcome wizard sign in method: ${e}`)}()}}categorizedRepositoryCounts(e){return{repositoryCount:e.length,gitHubRepositoryCount:e.filter((e=>e.gitHubRepository)).length}}determineUserType(e){const t=!!e.find((e=>e.endpoint===Qn())),n=!!e.find((e=>e.endpoint!==Qn()));return{dotComAccount:t,enterpriseAccount:n}}async getAverageLaunchStats(){const e=await this.db.launches.toArray();if(!e||!e.length)return{mainReadyTime:-1,loadTime:-1,rendererReadyTime:-1};const t=e.reduce(((e,t)=>({mainReadyTime:e.mainReadyTime+t.mainReadyTime,loadTime:e.loadTime+t.loadTime,rendererReadyTime:e.rendererReadyTime+t.rendererReadyTime})),{mainReadyTime:0,loadTime:0,rendererReadyTime:0});return{mainReadyTime:t.mainReadyTime/e.length,loadTime:t.loadTime/e.length,rendererReadyTime:t.rendererReadyTime/e.length}}async getDailyMeasures(){const e=await this.db.dailyMeasures.limit(1).first();return{...Zv,...e,id:void 0}}async updateDailyMeasures(e){const t=Zv;await this.db.transaction("rw",this.db.dailyMeasures,(async()=>{const n=await this.db.dailyMeasures.limit(1).first(),r={...t,...n},i=sa(r,e(r));return this.db.dailyMeasures.put(i)}))}async recordCommit(){await this.increment("提交"),Jv(Vv)}recordCommitUndone=e=>this.increment(e?"commitsUndoneWithoutChanges":"commitsUndoneWithChanges");recordAmendCommitSuccessful=e=>this.increment(e?"amendCommitSuccessfulWithFileChangesCount":"amendCommitSuccessfulWithoutFileChangesCount");recordMenuInitiatedMerge=(e=!1)=>this.increment(e?"squashMergeIntoCurrentBranchMenuCount":"mergeIntoCurrentBranchMenuCount");recordRepoClicked=e=>this.increment(e?"repoWithIndicatorClicked":"repoWithoutIndicatorClicked");async setOptOut(e,t){const n=this.optOut!==e;this.optOut=e;const r=At(Uv);Pt(Uv,e),(n||t)&&await this.sendOptInStatusPing(e,r)}getOptOut(){return this.optOut}async recordPush(e,t){null===e?await this.recordPushToGenericRemote(t):e.endpoint===Qn()?await this.recordPushToGitHub(t):await this.recordPushToGitHubEnterprise(t)}async recordPushToGitHub(e){await this.increment(e&&e.forceWithLease?"dotcomForcePushCount":"dotcomPushCount"),Jv(Kv)}async recordPushToGitHubEnterprise(e){await this.increment(e&&e.forceWithLease?"enterpriseForcePushCount":"enterprisePushCount"),Jv(Kv)}recordPushToGenericRemote=e=>this.increment(e&&e.forceWithLease?"externalForcePushCount":"externalPushCount");recordWelcomeWizardInitiated(){_t($v,Date.now()),localStorage.removeItem(zv)}recordWelcomeWizardTerminated(){_t(zv,Date.now())}recordAddExistingRepository(){Jv(qv)}recordCloneRepository(){Jv(jv)}recordCreateRepository(){Jv(Gv)}recordNonDefaultBranchCheckout(){Jv(Yv)}recordWelcomeWizardSignInMethod(e){localStorage.setItem(Xv,e)}addStashEntriesCreatedOutsideDesktop=e=>this.increment("stashEntriesCreatedOutsideDesktop",e);onUiActivity=async()=>(this.disableUiActivityMonitoring(),this.updateDailyMeasures((e=>({active:!0}))));recordTutorialStarted(){return this.updateDailyMeasures((()=>({tutorialStarted:!0})))}recordTutorialRepoCreated(){return this.updateDailyMeasures((()=>({tutorialRepoCreated:!0})))}recordTutorialEditorInstalled(){return this.updateDailyMeasures((()=>({tutorialEditorInstalled:!0})))}recordTutorialBranchCreated(){return this.updateDailyMeasures((()=>({tutorialEditorInstalled:!0,tutorialBranchCreated:!0})))}recordTutorialFileEdited(){return this.updateDailyMeasures((()=>({tutorialEditorInstalled:!0,tutorialBranchCreated:!0,tutorialFileEdited:!0})))}recordTutorialCommitCreated(){return this.updateDailyMeasures((()=>({tutorialEditorInstalled:!0,tutorialBranchCreated:!0,tutorialFileEdited:!0,tutorialCommitCreated:!0})))}recordTutorialBranchPushed(){return this.updateDailyMeasures((()=>({tutorialEditorInstalled:!0,tutorialBranchCreated:!0,tutorialFileEdited:!0,tutorialCommitCreated:!0,tutorialBranchPushed:!0})))}recordTutorialPrCreated(){return this.updateDailyMeasures((()=>({tutorialEditorInstalled:!0,tutorialBranchCreated:!0,tutorialFileEdited:!0,tutorialCommitCreated:!0,tutorialBranchPushed:!0,tutorialPrCreated:!0})))}recordTutorialCompleted(){return this.updateDailyMeasures((()=>({tutorialCompleted:!0})))}recordHighestTutorialStepCompleted(e){return this.updateDailyMeasures((t=>({highestTutorialStepCompleted:Math.max(e,t.highestTutorialStepCompleted)})))}recordRepositoryCommitedInWithoutWriteAccess(e){const t=Nt(Qv);t.includes(e)||Ot(Qv,[...t,e])}recordTagCreated=e=>this.increment("tagsCreated",e);recordSquashUndone=()=>this.increment("squashUndoneCount");async recordOperationConflictsEncounteredCount(e){switch(e){case"Squash":return this.increment("squashConflictsEncounteredCount");case"Reorder":return this.increment("reorderConflictsEncounteredCount");case"Rebase":return;case"Cherry-pick":case"Merge":return void log.error(`[recordOperationConflictsEncounteredCount] - Operation not supported: ${e}`);default:return et(0,`Unknown operation kind of ${e}.`)}}async recordOperationSuccessful(e){switch(e){case"Squash":return this.increment("squashSuccessfulCount");case"Reorder":return this.increment("reorderSuccessfulCount");case"Cherry-pick":return this.increment("cherryPickSuccessfulCount");case"Rebase":return;case"Merge":return void log.error(`[recordOperationSuccessful] - Operation not supported: ${e}`);default:return et(0,`Unknown operation kind of ${e}.`)}}async recordOperationSuccessfulWithConflicts(e){switch(e){case"Squash":return this.increment("squashSuccessfulWithConflictsCount");case"Reorder":return this.increment("reorderSuccessfulWithConflictsCount");case"Rebase":return this.increment("rebaseSuccessAfterConflictsCount");case"Cherry-pick":case"Merge":return void log.error(`[recordOperationSuccessfulWithConflicts] - Operation not supported: ${e}`);default:return et(0,`Unknown operation kind of ${e}.`)}}async recordOperationUndone(e){switch(e){case"Squash":return this.recordSquashUndone();case"Reorder":return this.increment("reorderUndoneCount");case"Cherry-pick":return this.increment("cherryPickUndoneCount");case"Rebase":case"Merge":return void log.error(`[recordOperationUndone] - Operation not supported: ${e}`);default:return et(0,`Unknown operation kind of ${e}.`)}}getStatFieldForRequestReviewState(e,t){return`pullRequestReview${{CHANGES_REQUESTED:"ChangesRequested",APPROVED:"Approved",COMMENTED:"Commented"}[e]}${t}`}recordPullRequestReviewStat(e,t){const n=this.getStatFieldForRequestReviewState(e,t);return this.increment(n)}recordPullRequestReviewNotificationShown(e){return this.recordPullRequestReviewStat(e,"NotificationCount")}recordPullRequestReviewNotificationClicked(e){return this.recordPullRequestReviewStat(e,"NotificationClicked")}recordPullRequestReviewDialogSwitchToPullRequest(e){return this.recordPullRequestReviewStat(e,"DialogSwitchToPullRequestCount")}increment=(e,t=1)=>this.updateDailyMeasures((n=>({[e]:n[e]+t})));post=e=>fetch("https://central.github.com/api/usage/desktop",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)});async sendOptInStatusPing(e,t){const n=!e,r=void 0===t?null:!t,i=n?"in":"out";try{const e=await this.post({eventType:"ping",optIn:n,previousOptInValue:r});if(!e.ok)throw new Error(`Unexpected status: ${e.statusText} (${e.status})`);Pt(Wv,!0),log.info(`Opt ${i} reported.`)}catch(e){log.error(`Error reporting opt ${i}:`,e)}}}(new class extends Yb{constructor(e){super(e),this.version(1).stores({launches:"++"}),this.version(2).stores({dailyMeasures:"++id"})}}("StatsDatabase"),new class{emitter=new st.Emitter;subscriberCount=0;onActivity(e){const t=this.emitter.on("activity",e);return 0===this.subscriberCount&&this.startTracking(),this.subscriberCount++,new st.Disposable((()=>{this.subscriberCount--,0===this.subscriberCount&&this.stopTracking(),t.dispose()}))}emit(e){this.emitter.emit("activity",e)}startTracking(){document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("keydown",this.onKeyDown),g("menu-event",this.onMenuEvent)}stopTracking(){var e;document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),e=this.onMenuEvent,m.ipcRenderer.removeListener("menu-event",e)}onMouseDown=e=>{null!==e.target&&e.target instanceof HTMLElement&&function(e){for(;null!==e;){if(EN.has(e.nodeName))return!0;const t=e.getAttribute("role");if(null!==t&&kN.has(t))return!0;e=e instanceof HTMLElement?e.parentElement:null}return!1}(e.target)&&this.emit("pointer")};onKeyDown=e=>{this.emit("keyboard")};onMenuEvent=()=>this.emit("menu")}),uO=new class extends Xa{state=null;endpointSupportBasicAuth=new Map;emitAuthenticate(e,t){const n={account:e,method:t};this.emitter.emit("did-authenticate",n)}onDidAuthenticate(e){return this.emitter.on("did-authenticate",(({account:t,method:n})=>{e(t,n)}))}getState(){return this.state}setState(e){this.state=e,this.emitUpdate(this.getState())}async endpointSupportsBasicAuth(e){if(e===Qn())return!1;const t=this.endpointSupportBasicAuth.get(e),n=void 0===t?null:{verifiable_password_authentication:t},r=await async function(e,t,n){let r=null;const i=new Promise((e=>{r=window.setTimeout((()=>e(n)),2e3)}));return Promise.race([e,i]).finally((()=>{null!==r&&window.clearTimeout(r)}))}(async function(e){const t=`${e}/meta`;try{const t=await on(e,null,"GET","meta",void 0,{"Content-Type":"application/json"});Jn(e,t);const n=await sn(t);return n&&void 0!==n.verifiable_password_authentication?n:null}catch(e){return log.error(`fetchMetadata: unable to load metadata from '${t}' as a fallback`,e),null}}(e),0,n);if(null!==r){const t=!0===r.verifiable_password_authentication;return this.endpointSupportBasicAuth.set(e,t),t}throw new Error("Unable to authenticate with the GitHub Enterprise instance. Verify that the URL is correct, that your GitHub Enterprise instance is running version 3.0.0 or later, that you have an internet connection and try again.")}getForgotPasswordURL(e){return`${Xn(e)}/password_reset`}reset(){this.setState(null)}beginDotComSignIn(){const e=Qn();this.setState({kind:bw.Authentication,endpoint:e,supportsBasicAuth:!1,error:null,loading:!1,forgotPasswordUrl:this.getForgotPasswordURL(e)}),this.endpointSupportsBasicAuth(e).then((t=>{null!==this.state&&this.state.kind===bw.Authentication&&this.state.endpoint===e&&this.setState({...this.state,supportsBasicAuth:t})})).catch((e=>log.error("Failed resolving whether GitHub.com supports password authentication",e)))}async authenticateWithBasicAuth(e,t){const n=this.state;if(!n||n.kind!==bw.Authentication)return Je(`Sign in step '${n?n.kind:"null"}' not compatible with authentication`);const r=n.endpoint;let i;this.setState({...n,loading:!0});try{i=await Kn(r,e,t,null)}catch(e){return void this.emitError(e)}if(this.state&&this.state.kind===bw.Authentication)if(i.kind===zn.Authorized){const e=i.token,t=await Yn(r,e);if(!this.state||this.state.kind!==bw.Authentication)return;this.emitAuthenticate(t,ww.Basic),this.setState({kind:bw.Success})}else if(i.kind===zn.TwoFactorAuthenticationRequired)this.setState({kind:bw.TwoFactorAuthentication,endpoint:r,username:e,password:t,type:i.type,error:null,loading:!1});else if(i.kind===zn.Error)this.emitError(new Error(`The server responded with an error while attempting to authenticate (${i.response.status})\n\n${i.response.statusText}`)),this.setState({...n,loading:!1});else if(i.kind===zn.Failed)e.includes("@")?this.setState({...n,loading:!1,error:new Error("Incorrect email or password.")}):this.setState({...n,loading:!1,error:new Error("Incorrect username or password.")});else if(i.kind===zn.UserRequiresVerification)this.setState({...n,loading:!1,error:new Error(gw(e))});else if(i.kind===zn.PersonalAccessTokenBlocked)this.setState({...n,loading:!1,error:new Error("A personal access token cannot be used to login to GitHub Desktop.")});else if(i.kind===zn.EnterpriseTooOld)this.setState({...n,loading:!1,error:new Error(yw)});else{if(i.kind!==zn.WebFlowRequired)return et(0,`Unsupported response: ${i}`);this.setState({...n,loading:!1,supportsBasicAuth:!1,kind:bw.Authentication})}}async authenticateWithBrowser(){const e=this.state;if(!e||e.kind!==bw.Authentication)return Je(`Sign in step '${e?e.kind:"null"}' not compatible with browser authentication`);let t;this.setState({...e,loading:!0});try{log.info("[SignInStore] initializing OAuth flow"),t=await(n=e.endpoint,new Promise(((e,t)=>{hw={state:dn(),endpoint:n,resolve:e,reject:t};const r=function(e,t){const n=Xn(e),r=encodeURIComponent(Fn.join(" "));return`${n}/login/oauth/authorize?client_id=${Mn}&scope=${r}&state=${t}`}(n,hw.state);rt.openExternal(r)}))),log.info("[SignInStore] account resolved")}catch(t){return log.info("[SignInStore] error with OAuth flow",t),void this.setState({...e,error:t,loading:!1})}var n;this.state&&this.state.kind===bw.Authentication&&(this.emitAuthenticate(t,ww.Web),this.setState({kind:bw.Success}))}beginEnterpriseSignIn(){this.setState({kind:bw.EndpointEntry,error:null,loading:!1})}async setEndpoint(e){const t=this.state;if(!t||t.kind!==bw.EndpointEntry)return Je(`Sign in step '${t?t.kind:"null"}' not compatible with endpoint entry`);let n;this.setState({...t,loading:!0});try{n=function(e){const t=e.trim();if(0===t.length){const e=new Error("Unknown address");throw e.name=mw,e}let n=o.parse(t);if(n.host||(e=`https://${t}`,n=o.parse(e)),!n.protocol){const e=new Error("Invalid URL");throw e.name=mw,e}if(!dw.has(n.protocol)){const e=new Error("Invalid protocol");throw e.name=fw,e}return e}(e)}catch(e){let n=e;return e.name===mw?n=new Error("The GitHub Enterprise instance address doesn't appear to be a valid URL. We're expecting something like https://github.example.com."):e.name===fw&&(n=new Error("Unsupported protocol. Only http or https is supported when authenticating with GitHub Enterprise instances.")),void this.setState({...t,loading:!1,error:n})}const r=function(e){const t=o.parse(e);return`${t.protocol}//${t.hostname}/api/v3`}(n);try{const e=await this.endpointSupportsBasicAuth(r);if(!this.state||this.state.kind!==bw.EndpointEntry)return;this.setState({kind:bw.Authentication,endpoint:r,supportsBasicAuth:e,error:null,loading:!1,forgotPasswordUrl:this.getForgotPasswordURL(r)})}catch(e){let n=e;"ENOTFOUND"===e.code&&(n=new Error("The server could not be found. Please verify that the URL is correct and that you have a stable internet connection.")),this.setState({...t,loading:!1,error:n})}}async setTwoFactorOTP(e){const t=this.state;let n;t&&t.kind===bw.TwoFactorAuthentication||Je(`Sign in step '${t?t.kind:"null"}' not compatible with two factor authentication`),this.setState({...t,loading:!0});try{n=await Kn(t.endpoint,t.username,t.password,e)}catch(e){return void this.emitError(e)}if(this.state&&this.state.kind===bw.TwoFactorAuthentication)if(n.kind===zn.Authorized){const e=n.token,r=await Yn(t.endpoint,e);if(!this.state||this.state.kind!==bw.TwoFactorAuthentication)return;this.emitAuthenticate(r,ww.Basic),this.setState({kind:bw.Success})}else switch(n.kind){case zn.Failed:case zn.TwoFactorAuthenticationRequired:this.setState({...t,loading:!1,error:new Error("Two-factor authentication failed.")});break;case zn.Error:this.emitError(new Error(`The server responded with an error (${n.response.status})\n\n${n.response.statusText}`));break;case zn.UserRequiresVerification:this.emitError(new Error(gw(t.username)));break;case zn.PersonalAccessTokenBlocked:this.emitError(new Error("A personal access token cannot be used to login to GitHub Desktop."));break;case zn.EnterpriseTooOld:this.emitError(new Error(yw));break;case zn.WebFlowRequired:this.setState({...t,forgotPasswordUrl:this.getForgotPasswordURL(t.endpoint),loading:!1,supportsBasicAuth:!1,kind:bw.Authentication,error:null});break;default:et(0,`Unknown response: ${n}`)}}},hO=new class extends Xa{dataStore;secureStore;accounts=[];loadingPromise;constructor(e,t){super(),this.dataStore=e,this.secureStore=t,this.loadingPromise=this.loadFromStore()}async getAll(){return await this.loadingPromise,this.accounts.slice()}async addAccount(e){await this.loadingPromise;try{const t=Va(e);await this.secureStore.setItem(t,e.login,e.token)}catch(t){return log.error(`Error adding account '${e.login}'`,t),function(e){const t=e;return t.message&&t.message.startsWith("The user name or passphrase you entered is not correct")}(t)?this.emitError(new Error("GitHub Desktop was unable to store the account token in the keychain. Please check you have unlocked access to the 'login' keychain.")):this.emitError(t),null}const t=this.accounts.reduce(((e,t)=>e.set(t.endpoint,t)),new Map);return t.set(e.endpoint,e),this.accounts=[...t.values()],this.save(),e}async refresh(){this.accounts=await Promise.all(this.accounts.map((e=>this.tryUpdateAccount(e)))),this.save(),this.emitUpdate(this.accounts)}async tryUpdateAccount(e){try{return await async function(e){return e.token?Yn(e.endpoint,e.token):Je(`Cannot update an account which doesn't have a token: ${e.login}`)}(e)}catch(t){return log.warn(`Error refreshing account '${e.login}'`,t),e}}async removeAccount(e){await this.loadingPromise;try{await this.secureStore.deleteItem(Va(e),e.login)}catch(t){return log.error(`Error removing account '${e.login}'`,t),void this.emitError(t)}this.accounts=this.accounts.filter((t=>!(t.endpoint===e.endpoint&&t.id===e.id))),this.save()}async loadFromStore(){const e=this.dataStore.getItem("users");if(!e||!e.length)return;const t=JSON.parse(e),n=[];for(const e of t){const t=new tn(e.login,e.endpoint,"",e.emails,e.avatarURL,e.id,e.name,e.plan),r=Va(t);try{const i=await this.secureStore.getItem(r,e.login);n.push(t.withToken(i||""))}catch(e){log.error(`Error getting token for '${r}'. Skipping.`,e),this.emitError(e)}}this.accounts=n,this.emitUpdate(this.accounts)}save(){const e=this.accounts.map((e=>e.withToken("")));this.dataStore.setItem("users",JSON.stringify(e)),this.emitUpdate(this.accounts)}}(localStorage,$l),pO=new class extends Xa{db;lastStashCheckCache=new Map;branchProtectionSettingsFoundCache=new Map;protectionEnabledForBranchCache=new Map;emitQueued=!1;constructor(e){super(),this.db=e}async upsertGitHubRepositoryLight(e,t){return this.db.transaction("rw",this.db.gitHubRepositories,this.db.owners,(()=>this._upsertGitHubRepository(e,t,!0)))}async upsertGitHubRepository(e,t){return this.db.transaction("rw",this.db.gitHubRepositories,this.db.owners,(()=>this._upsertGitHubRepository(e,t,!1)))}async toGitHubRepository(e,t,n){if(nt(e.id,"Need db id to create GitHubRepository"),void 0===n&&null!==e.parentID){const t=await this.db.gitHubRepositories.get(e.parentID);nt(t,`Missing parent '${e.id}'`),n=await this.toGitHubRepository(t)}if(void 0===t){const n=await this.db.owners.get(e.ownerID);nt(n,`Missing owner '${e.ownerID}'`),t=new lw(n.login,n.endpoint,n.id,n.type)}const r=new Rr(e.name,t,e.id,e.private,e.htmlURL,e.cloneURL,e.issuesEnabled,e.isArchived,e.permissions,n);return Promise.resolve(r)}async toRepository(e){return nt(e.id,"can't convert to Repository without id"),new Ir(e.path,e.id,null!==e.gitHubRepositoryID?await this.findGitHubRepositoryByID(e.gitHubRepositoryID):await Promise.resolve(null),e.missing,e.alias,e.workflowPreferences,e.isTutorialRepository)}async findGitHubRepositoryByID(e){const t=await this.db.gitHubRepositories.get(e);return void 0!==t?this.toGitHubRepository(t):Promise.resolve(null)}getAll(){return this.db.transaction("r",this.db.repositories,this.db.gitHubRepositories,this.db.owners,(async()=>{const e=new Array;for(const t of await this.db.repositories.toArray())nt(t.id,"no id after loading from db"),e.push(await this.toRepository(t));return e}))}async addTutorialRepository(e,t,n){await this.db.transaction("rw",this.db.repositories,this.db.gitHubRepositories,this.db.owners,(async()=>{const r=await this.upsertGitHubRepository(t,n),i=await this.db.repositories.get({path:e});return await this.db.repositories.put({...void 0!==i?.id&&{id:i.id},path:e,alias:null,gitHubRepositoryID:r.dbID,missing:!1,lastStashCheckDate:null,isTutorialRepository:!0})})),this.emitUpdatedRepositories()}async addRepository(e,t){const n=await this.db.transaction("rw",this.db.repositories,this.db.gitHubRepositories,this.db.owners,(async()=>{const n=await this.db.repositories.get({path:e});if(void 0!==n)return await this.toRepository(n);const r={path:e,gitHubRepositoryID:null,missing:t?.missing??!1,lastStashCheckDate:null,alias:null},i=await this.db.repositories.add(r);return this.toRepository({id:i,...r})}));return this.emitUpdatedRepositories(),n}async removeRepository(e){await this.db.repositories.delete(e.id),ou(e),this.emitUpdatedRepositories()}async updateRepositoryMissing(e,t){return await this.db.repositories.update(e.id,{missing:t}),this.emitUpdatedRepositories(),new Ir(e.path,e.id,e.gitHubRepository,t,e.alias,e.workflowPreferences,e.isTutorialRepository)}async updateRepositoryAlias(e,t){await this.db.repositories.update(e.id,{alias:t}),this.emitUpdatedRepositories()}async updateRepositoryWorkflowPreferences(e,t){await this.db.repositories.update(e.id,{workflowPreferences:t}),this.emitUpdatedRepositories()}async updateRepositoryPath(e,t){return await this.db.repositories.update(e.id,{missing:!1,path:t}),this.emitUpdatedRepositories(),new Ir(t,e.id,e.gitHubRepository,!1,e.alias,e.workflowPreferences,e.isTutorialRepository)}async updateLastStashCheckDate(e,t=Date.now()){await this.db.repositories.update(e.id,{lastStashCheckDate:t}),this.lastStashCheckCache.set(e.id,t)}async getLastStashCheckDate(e){let t=this.lastStashCheckCache.get(e.id)||null;if(null!==t)return t;const n=await this.db.repositories.get(e.id);return void 0===n?Je(`'getLastStashCheckDate' - unable to find repository with ID: ${e.id}`):(t=n.lastStashCheckDate??null,null!==t&&this.lastStashCheckCache.set(e.id,t),t)}async putOwner(e,t,n){const r=aw(e,t),i=await this.db.owners.get({key:r});let o;if(void 0===i||i.login!==t||void 0!==n&&i.type!==n){o=i?.id;const s=void 0!==o?{id:o}:{};o=await this.db.owners.put({...s,key:r,endpoint:e,login:t,type:n})}else o=tt("Missing owner id",i.id);return new lw(t,e,o,n??i?.type)}async upsertGitHubRepositoryFromMatch(e){return await this.db.transaction("rw",this.db.gitHubRepositories,this.db.owners,(async()=>{const{account:t}=e,n=await this.putOwner(t.endpoint,e.owner),r=await this.db.gitHubRepositories.where("[ownerID+name]").equals([n.id,e.name]).first();if(r)return this.toGitHubRepository(r,n);const i={cloneURL:null,htmlURL:null,lastPruneDate:null,name:e.name,ownerID:n.id,parentID:null,private:null},o=await this.db.gitHubRepositories.put(i);return this.toGitHubRepository({...i,id:o},n,null)}))}async setGitHubRepository(e,t){if(_r(e)&&e.gitHubRepository.hash===t.hash)return e;await this.db.transaction("rw",this.db.repositories,(()=>this.db.repositories.update(e.id,{gitHubRepositoryID:t.dbID}))),this.emitUpdatedRepositories();const n=new Ir(e.path,e.id,t,e.missing,e.alias,e.workflowPreferences,e.isTutorialRepository);return _r(n)||Je("Repository must be GitHub repository"),n}async _upsertGitHubRepository(e,t,n=!1){const r="parent"in t&&void 0!==t.parent?await this._upsertGitHubRepository(e,t.parent,!0):await Promise.resolve(null),{login:i,type:o}=t.owner,s=await this.putOwner(e,i,o),a=await this.db.gitHubRepositories.where("[ownerID+name]").equals([s.id,t.name]).first(),l=function(e){const t="permissions"in e?e.permissions:void 0;return void 0===t?null:t.admin?"admin":t.push?"write":t.pull?"read":null}(t)??a?.permissions??void 0,c=n?a?.parentID??null:r?.dbID??null,u={...void 0!==a?.id&&{id:a.id},ownerID:s.id,name:t.name,private:t.private,htmlURL:t.html_url,cloneURL:t.clone_url,parentID:c,lastPruneDate:a?.lastPruneDate??null,issuesEnabled:t.has_issues,isArchived:t.archived,permissions:l};if(void 0!==a&&qs(a,u))return this.toGitHubRepository(a,s,r);const h=await this.db.gitHubRepositories.put(u);return this.emitUpdatedRepositories(),this.toGitHubRepository({...u,id:h},s,r)}async updateBranchProtections(e,t){const n=e.dbID;await this.db.transaction("rw",this.db.protectedBranches,(async()=>{const e=uw(n);for(const t of this.protectionEnabledForBranchCache.keys())t.startsWith(e)&&this.protectionEnabledForBranchCache.delete(t);const r=t.map((e=>({repoId:n,name:e.name})));for(const e of r){const t=cw(n,e.name);this.protectionEnabledForBranchCache.set(t,!0)}await this.db.protectedBranches.where("repoId").equals(n).delete();const i=r.length>0;this.branchProtectionSettingsFoundCache.set(n,i),r.length>0&&await this.db.protectedBranches.bulkAdd(r)}))}async updateLastPruneDate(e,t){await this.db.gitHubRepositories.update(e.gitHubRepository.dbID,{lastPruneDate:t})}async getLastPruneDate(e){const t=e.gitHubRepository.dbID,n=await this.db.gitHubRepositories.get(t);return void 0===n?Je(`getLastPruneDate: No such GitHub repository: ${t}`):n.lastPruneDate}async loadAndCacheBranchProtection(e){const t=await this.db.protectedBranches.where("repoId").equals(e).toArray(),n=t.length>0;this.branchProtectionSettingsFoundCache.set(e,n);for(const n of t){const t=cw(e,n.name);this.protectionEnabledForBranchCache.set(t,!0)}return n}async hasBranchProtectionsConfigured(e){const t=this.branchProtectionSettingsFoundCache.get(e.dbID);return void 0===t?this.loadAndCacheBranchProtection(e.dbID):t}emitUpdatedRepositories(){this.emitQueued||(setImmediate((()=>{this.getAll().then((e=>this.emitUpdate(e))).catch((e=>log.error("Failed emitting update",e))).finally((()=>this.emitQueued=!1))})),this.emitQueued=!0)}}(new class extends rw{constructor(e,t){super(e,t),this.conditionalVersion(1,{repositories:"++id, &path",gitHubRepositories:"++id, name",owners:"++id, login"}),this.conditionalVersion(2,{owners:"++id, &[endpoint+login]"}),this.conditionalVersion(3,{},iw),this.conditionalVersion(4,{gitHubRepositories:"++id, name, &[ownerID+name]"}),this.conditionalVersion(5,{gitHubRepositories:"++id, name, &[ownerID+name], cloneURL"}),this.conditionalVersion(6,{protectedBranches:"[repoId+name], repoId"}),this.conditionalVersion(7,{gitHubRepositories:"++id, &[ownerID+name]"}),this.conditionalVersion(8,{},ow),this.conditionalVersion(9,{owners:"++id, &key"},sw)}}("Database")),dO=new class{db;repositoryStore;emitter=new st.Emitter;currentRefreshOperations=new Map;lastRefreshForRepository=new Map;constructor(e,t){this.db=e,this.repositoryStore=t}emitPullRequestsChanged(e,t){this.emitter.emit("onPullRequestsChanged",{repository:e,pullRequests:t})}onPullRequestsChanged(e){return this.emitter.on("onPullRequestsChanged",(t=>{const{repository:n,pullRequests:r}=t;e(n,r)}))}refreshPullRequests(e,t){const n=this.currentRefreshOperations.get(e.dbID);if(void 0!==n)return n;this.lastRefreshForRepository.set(e.dbID,Date.now());const r=this.fetchAndStorePullRequests(e,t).catch((t=>{log.error(`Error refreshing pull requests for '${e.fullName}'`,t)})).then((()=>{this.currentRefreshOperations.delete(e.dbID)}));return this.currentRefreshOperations.set(e.dbID,r),r}async fetchAndStorePullRequests(e,t){const n=Vn.fromAccount(t),r=await this.db.getLastUpdated(e);return r?this.fetchAndStoreUpdatedPullRequests(n,e,r):this.fetchAndStoreOpenPullRequests(n,e)}async fetchAndStoreOpenPullRequests(e,t){const{name:n,owner:r}=Cw(t),i=await e.fetchAllOpenPullRequests(r,n);await this.storePullRequestsAndEmitUpdate(i,t)}async fetchAndStoreUpdatedPullRequests(e,t,n){const{name:r,owner:i}=Cw(t),o=await e.fetchUpdatedPullRequests(i,r,n).catch((e=>e instanceof qn||e instanceof nn?Promise.resolve(null):Promise.reject(e)));if(null!==o)return await this.storePullRequestsAndEmitUpdate(o,t);await this.db.deleteAllPullRequestsInRepository(t),await this.fetchAndStoreOpenPullRequests(e,t)}getLastRefreshed(e){return e.dbID?this.lastRefreshForRepository.get(e.dbID):void 0}async getAll(e){const t=await this.db.getAllPullRequestsInRepository(e),n=new Array,r=this.repositoryStore,i=ft()(r.findGitHubRepositoryByID.bind(r));for(const e of t){const t=await i(e.head.repoId),r=await i(e.base.repoId);if(null===t)return Je("head repository can't be null");if(null===r)return Je("base repository can't be null");n.push(new wa(new Date(e.createdAt),e.title,e.number,new ba(e.head.ref,e.head.sha,t),new ba(e.base.ref,e.base.sha,r),e.author,e.draft??!1,e.body))}return n.reverse()}async storePullRequestsAndEmitUpdate(e,t){await this.storePullRequests(e,t)&&this.emitPullRequestsChanged(t,await this.getAll(t))}async storePullRequests(e,t){if(0===e.length)return!1;let n=e[0].updated_at;const r=new Array,i=new Array,{endpoint:o}=t,s=this.repositoryStore,a=ft()(s.upsertGitHubRepositoryLight.bind(s),{cacheKey:(e,t)=>t.clone_url});for(const s of e){if(s.updated_at>n&&(n=s.updated_at),null===s.base.repo)return Je("PR cannot have a null base repo");const e=await a(o,s.base.repo);if("closed"===s.state){r.push(vw(e,s.number));continue}if(null==s.head.repo){log.debug(`Unable to store pull request #${s.number} for repository ${t.fullName} as it has no head repository associated with it`),r.push(vw(e,s.number));continue}const l=await a(o,s.head.repo);i.push({number:s.number,title:s.title,createdAt:s.created_at,updatedAt:s.updated_at,head:{ref:s.head.ref,sha:s.head.sha,repoId:l.dbID},base:{ref:s.base.ref,sha:s.base.sha,repoId:e.dbID},body:s.body,author:s.user.login,draft:s.draft??!1})}if(0===r.length&&1===i.length){const e=i[0],n=await this.db.getPullRequest(t,e.number);if(void 0!==n&&zs(e,n))return!1}return await this.db.transaction("rw",this.db.pullRequests,this.db.pullRequestsLastUpdated,(async()=>{await this.db.deletePullRequests(r),await this.db.putPullRequests(i),await this.db.setLastUpdated(t,new Date(n))})),!0}}(new class extends rw{constructor(e,t){super(e,t),this.conditionalVersion(1,{pullRequests:"id++, base.repoId"}),this.conditionalVersion(2,{pullRequestStatus:"id++, &[sha+pullRequestId]"}),this.conditionalVersion(3,{pullRequestStatus:"id++, &[sha+pullRequestId], pullRequestId"}),this.conditionalVersion(4,{}),this.conditionalVersion(5,{pullRequestStatus:null}),this.conditionalVersion(6,{pullRequests:null}),this.conditionalVersion(7,{pullRequests:"[base.repoId+number]",pullRequestsLastUpdated:"repoId"}),this.conditionalVersion(8,{},(async e=>{e.table("pullRequests").clear(),e.table("pullRequestsLastUpdated").clear()})),this.conditionalVersion(9,{},(async e=>{e.table("pullRequests").clear(),e.table("pullRequestsLastUpdated").clear()}))}async deleteAllPullRequestsInRepository(e){await this.transaction("rw",this.pullRequests,this.pullRequestsLastUpdated,(async()=>{await this.clearLastUpdated(e),await this.pullRequests.where("[base.repoId+number]").between([e.dbID],[e.dbID+1]).delete()}))}async deletePullRequests(e){await this.pullRequests.bulkDelete(e)}async putPullRequests(e){await this.pullRequests.bulkPut(e)}getAllPullRequestsInRepository(e){return this.pullRequests.where("[base.repoId+number]").between([e.dbID],[e.dbID+1]).toArray()}getPullRequest(e,t){return this.pullRequests.get([e.dbID,t])}async getLastUpdated(e){const t=await this.pullRequestsLastUpdated.get(e.dbID);return t?new Date(t.lastUpdated):null}async clearLastUpdated(e){await this.pullRequestsLastUpdated.delete(e.dbID)}async setLastUpdated(e,t){await this.pullRequestsLastUpdated.put({repoId:e.dbID,lastUpdated:t.getTime()})}}("PullRequestDatabase"),pO),mO=new class{pullRequestStore;repositoriesStore;currentPullRequestUpdater=null;repositories;prCache=new Map;emitter=new st.Emitter;constructor(e,t){this.pullRequestStore=e,this.repositoriesStore=t,this.repositoriesStore.onDidUpdate((e=>{this.repositories=Promise.resolve(e.filter(_r))})),this.repositories=this.repositoriesStore.getAll().then((e=>e.filter(_r))).catch((e=>(log.error("PullRequestCoordinator: Error loading repositories",e),[])))}onPullRequestsChanged(e){return this.pullRequestStore.onPullRequestsChanged((async(t,n)=>{this.prCache.set(t.dbID,n);const r=kw(t,await this.repositories);for(const t of r)e(t,n)}))}onIsLoadingPullRequests(e){return this.emitter.on("onIsLoadingPullRequest",(t=>{const{repository:n,isLoadingPullRequests:r}=t;e(n,r)}))}async refreshPullRequests(e,t){const n=Br(e),r=kw(n,await this.repositories);for(const e of r)this.emitIsLoadingPullRequests(e,!0);await this.pullRequestStore.refreshPullRequests(n,t);for(const e of r)this.emitIsLoadingPullRequests(e,!1)}getLastRefreshed(e){const t=Br(e);return this.pullRequestStore.getLastRefreshed(t)}async getAllPullRequests(e){return this.getPullRequestsFor(Br(e))}startPullRequestUpdater(e,t){null!==this.currentPullRequestUpdater&&this.stopPullRequestUpdater(),this.currentPullRequestUpdater=new Ew(e,t,this),this.currentPullRequestUpdater.start()}stopPullRequestUpdater(){null!==this.currentPullRequestUpdater&&(this.currentPullRequestUpdater.stop(),this.currentPullRequestUpdater=null)}emitIsLoadingPullRequests(e,t){this.emitter.emit("onIsLoadingPullRequest",{repository:e,isLoadingPullRequests:t})}async getPullRequestsFor(e){return this.prCache.has(e.dbID)||this.prCache.set(e.dbID,await this.pullRequestStore.getAll(e)),this.prCache.get(e.dbID)||[]}}(dO,pO),fO=new class{statsStore;repositoryState=new Map;constructor(e){this.statsStore=e}get(e){const t=this.repositoryState.get(e.hash);if(null!=t)return t;const n={commitSelection:{shas:[],shasInDiff:[],isContiguous:!0,file:null,changesetData:{files:[],linesAdded:0,linesDeleted:0},diff:null},changesState:{workingDirectory:Go.fromFiles(new Array),selection:{kind:Ve.WorkingDirectory,selectedFileIDs:[],diff:null},commitMessage:Ic,coAuthors:[],showCoAuthoredBy:!1,conflictState:null,stashEntry:null,currentBranchProtected:!1,currentRepoRulesInfo:new Pm},selectedSection:Ge.Changes,branchesState:{tip:{kind:Ar.Unknown},defaultBranch:null,upstreamDefaultBranch:null,allBranches:new Array,recentBranches:new Array,openPullRequests:new Array,currentPullRequest:null,isLoadingPullRequests:!1,forcePushBranches:new Map},compareState:{formState:{kind:Ke.History},tip:null,mergeStatus:null,showBranchList:!1,filterText:"",commitSHAs:[],shasToHighlight:[],branches:new Array,recentBranches:new Array,defaultBranch:null},pullRequestState:null,commitAuthor:null,commitLookup:new Map,localCommitSHAs:[],localTags:null,tagsToPush:null,aheadBehind:null,remote:null,isPushPullFetchInProgress:!1,isCommitting:!1,commitToAmend:null,lastFetched:null,checkoutProgress:null,pushPullFetchProgress:null,revertProgress:null,multiCommitOperationUndoState:null,multiCommitOperationState:null};return this.repositoryState.set(e.hash,n),n}update(e,t){const n=this.get(e),r=sa(n,t(n)),i=n.branchesState.tip,o=r.branchesState.tip,s=null!==r.commitToAmend&&o.kind===Ar.Valid&&i.kind===Ar.Valid&&i.branch.tip.sha===o.branch.tip.sha&&o.branch.tip.sha===r.commitToAmend.sha&&null===r.changesState.conflictState;this.repositoryState.set(e.hash,{...r,commitToAmend:s?r.commitToAmend:null})}updateCompareState(e,t){this.update(e,(e=>{const n=e.compareState;return{compareState:sa(n,t(n))}}))}updateChangesState(e,t){this.update(e,(e=>{const n=e.changesState,r=sa(n,t(n));return this.recordSubmoduleDiffViewedFromChangesListIfNeeded(n,r),{changesState:r}}))}recordSubmoduleDiffViewedFromChangesListIfNeeded(e,t){if(t.selection.kind!==Ve.WorkingDirectory||1!==t.selection.selectedFileIDs.length)return;const n=t.workingDirectory.findFileWithID(t.selection.selectedFileIDs[0]);null!==n&&void 0!==n.status.submoduleStatus&&(e.selection.kind===Ve.WorkingDirectory&&1===e.selection.selectedFileIDs.length&&e.selection.selectedFileIDs[0]===n.id||this.statsStore.increment("submoduleDiffViewedFromChangesListCount"))}updateCommitSelection(e,t){this.update(e,(e=>{const{commitSelection:n}=e,r=sa(n,t(n));return this.recordSubmoduleDiffViewedFromHistoryIfNeeded(n,r),{commitSelection:r}}))}recordSubmoduleDiffViewedFromHistoryIfNeeded(e,t){e.file?.id!==t.file?.id&&void 0!==t.file?.status.submoduleStatus&&this.statsStore.increment("submoduleDiffViewedFromHistoryCount")}updateBranchesState(e,t){this.update(e,(e=>{const n=e.branchesState;return{branchesState:sa(n,t(n))}}))}updateMultiCommitOperationUndoState(e,t){this.update(e,(e=>{const{multiCommitOperationUndoState:n}=e,r=t(n);return{multiCommitOperationUndoState:null===r?null:sa(n,r)}}))}updateMultiCommitOperationState(e,t){this.update(e,(e=>{const{multiCommitOperationState:n}=e,r=t(n);if(null===n){const e=`Cannot update a null state, trying to update object with keys: ${Object.keys(r).join(", ")}`;return iC("multiCommitOperation",new Error(e)),{multiCommitOperationState:null}}return{multiCommitOperationState:sa(n,r)}}))}initializeMultiCommitOperationState(e,t){this.update(e,(()=>({multiCommitOperationState:t})))}clearMultiCommitOperationState(e){this.update(e,(()=>({multiCommitOperationState:null})))}initializePullRequestState(e,t){this.update(e,(()=>({pullRequestState:t})))}sendPullRequestStateNotExistsException(){iC("PullRequestState",new Error("Cannot update a null pull request state"))}updatePullRequestState(e,t){const{pullRequestState:n}=this.get(e);null!==n?this.update(e,(e=>{const n=e.pullRequestState;return{pullRequestState:null===n?null:sa(n,t(n))}})):this.sendPullRequestStateNotExistsException()}updatePullRequestCommitSelection(e,t){const{pullRequestState:n}=this.get(e);if(null===n)return void this.sendPullRequestStateNotExistsException();const r=n.commitSelection,i=null===r?null:sa(r,t(r));this.updatePullRequestState(e,(()=>({commitSelection:i})))}clearPullRequestState(e){this.update(e,(()=>({pullRequestState:null})))}}(cO),gO=new class extends Ya{accountState=new Map;constructor(e){super(),e.onDidUpdate(this.onAccountsChanged)}onAccountsChanged=e=>{const t=new Map;for(const n of e)for(const[e,r]of this.accountState.entries())if(en(e,n)){t.set(n,r);break}this.accountState=t,this.emitUpdate()};updateAccount(e,t){const n=new Map(this.accountState),r=RN(e,n),i=n.get(r),o=sa(void 0===i?{loading:!1,repositories:[]}:i,t);n.set(r,o),this.accountState=n,this.emitUpdate()}getAccountState(e){return this.accountState.get(RN(e,this.accountState))}async loadRepositories(e){const t=this.getAccountState(e);if(t?.loading)return;this.updateAccount(e,{loading:!0});const n=new Map,r=new Map;t?.repositories.forEach((e=>{n.set(e.clone_url,e),r.set(e.clone_url,e)}));const i=t=>{t.forEach((e=>{r.set(e.clone_url,e),n.delete(e.clone_url)})),this.updateAccount(e,{repositories:[...r.values()]})},o=Vn.fromAccount(RN(e,this.accountState));await o.streamUserRepositories(i,void 0,{continue:async()=>(await Promise.all([o.streamUserRepositories(i,"owner"),o.streamUserRepositories(i,"collaborator"),o.streamUserRepositories(i,"organization_member")]),!1)}),n.size&&(n.forEach(((e,t)=>r.delete(t))),this.updateAccount(e,{repositories:[...r.values()]})),this.updateAccount(e,{loading:!1})}getState(){return this.accountState}}(hO),yO=new class{accounts=[];backgroundRefreshHandle=null;refreshQueued=!1;subscriptions=new Map;cache=new(yt())({maxSize:250});queue=new Set;limit=TN()(6);constructor(e){e.getAll().then(this.onAccountsUpdated),e.onDidUpdate(this.onAccountsUpdated)}onAccountsUpdated=e=>{this.accounts=e};startBackgroundRefresh(){null===this.backgroundRefreshHandle&&(this.backgroundRefreshHandle=window.setInterval((()=>this.queueRefresh()),18e4),this.queueRefresh())}stopBackgroundRefresh(){null!==this.backgroundRefreshHandle&&(window.clearInterval(this.backgroundRefreshHandle),this.backgroundRefreshHandle=null)}queueRefresh(){this.refreshQueued||(this.refreshQueued=!0,setImmediate((()=>{this.refreshQueued=!1,this.refreshEligibleSubscriptions()})))}refreshEligibleSubscriptions(){for(const e of this.subscriptions.keys()){if(this.queue.has(e))continue;const t=this.cache.get(e);t&&!IN(t)||(this.limit((()=>this.refreshSubscription(e))).catch((e=>log.error("Failed refreshing commit status",e))).then((()=>this.queue.delete(e))),this.queue.add(e))}}async manualRefreshSubscription(e,t,n){const r=PN(e,t),i=this.subscriptions.get(r);if(void 0===i)return;const o=this.cache.get(r)?.check;if(null==o)return;const s=function(e,t){const n=[];for(const r of e){const e=t.find((e=>r.id===e.id));void 0!==e?n.push({...r,status:Hn.InProgress,conclusion:null,actionJobSteps:r.actionJobSteps?.map((e=>({...e,status:Hn.InProgress,conclusion:null})))}):n.push(r)}return Aa(n)}(o.checks,n);this.cache.set(r,{check:s,fetchedAt:new Date}),i.callbacks.forEach((e=>e(s)))}async refreshSubscription(e){const t=this.subscriptions.get(e);if(void 0===t)return;const{endpoint:n,owner:r,name:i,ref:o}=t,s=this.accounts.find((e=>e.endpoint===n));if(void 0===s)return;const a=Vn.fromAccount(s),[l,c]=await Promise.all([a.fetchCombinedRefStatus(r,i,o),a.fetchRefCheckRuns(r,i,o)]),u=new Array;if(null===l&&null===c){const t=this.cache.get(e)?.check??null;return void this.cache.set(e,{check:t,fetchedAt:new Date})}if(null!==l&&u.push(...l.statuses.map(ka)),null!==c){const e=Na(c.check_runs);u.push(...e.map(Da))}let h=null;void 0!==t.branchName&&(h=await this.getAndMapActionWorkflowRunsToCheckRuns(u,e,t.branchName));const p=Aa(h??u);this.cache.set(e,{check:p,fetchedAt:new Date}),t.callbacks.forEach((e=>e(p)))}async getAndMapActionWorkflowRunsToCheckRuns(e,t,n){const r=this.cache.get(t);if(void 0!==r&&null!==r.check&&r.check.checks.some((e=>void 0!==e.actionsWorkflow))&&0===AN()(r.check.checks.map((e=>e.id)),e.map((e=>e.id))).length){const t=new Array;for(const n of e){const e=r.check.checks.find((e=>e.id===n.id));if(void 0===e){t.push(n);continue}const{actionsWorkflow:i,actionJobSteps:o}=e;t.push({...n,actionsWorkflow:i,actionJobSteps:o})}return t}const i=await this.getCheckRunActionsWorkflowRuns(t,n,e);return await this.mapActionWorkflowRunsJobsToCheckRuns(t,i)}tryGetStatus(e,t,n){const r=PN(e,t);return void 0!==n&&this.subscriptions.get(r)?.branchName!==n?null:this.cache.get(r)?.check??null}getOrCreateSubscription(e,t,n){const r=PN(e,t);let i=this.subscriptions.get(r);if(void 0!==i){if(i.branchName===n)return i;const e={...i,branchName:n};this.subscriptions.set(r,e);const t=this.cache.get(r);return void 0!==t&&this.cache.set(r,{...t,fetchedAt:new Date(Ct(-61,"minutes"))}),e}return i={endpoint:e.endpoint,owner:e.owner.login,name:e.name,ref:t,callbacks:new Set,branchName:n},this.subscriptions.set(r,i),i}subscribe(e,t,n,r){const i=PN(e,t),o=this.getOrCreateSubscription(e,t,r);return o.callbacks.add(n),this.queueRefresh(),new st.Disposable((()=>{o.callbacks.delete(n),0===o.callbacks.size&&this.subscriptions.delete(i)}))}async getCheckRunActionsWorkflowRuns(e,t,n){const r=this.subscriptions.get(e);if(void 0===r)return n;const{endpoint:i,owner:o,name:s}=r,a=this.accounts.find((e=>e.endpoint===i));return void 0===a?n:Ma(a,o,s,t,n)}async mapActionWorkflowRunsJobsToCheckRuns(e,t){const n=this.subscriptions.get(e);if(void 0===n)return t;const{endpoint:r,owner:i,name:o}=n,s=this.accounts.find((e=>e.endpoint===r));return void 0===s?t:Oa(Vn.fromAccount(s),i,o,t)}async rerequestCheckSuite(e,t){const{owner:n,name:r}=e,i=Zn(this.accounts,e.endpoint);return null!==i&&Vn.fromAccount(i).rerequestCheckSuite(n.login,r,t)}async rerunJob(e,t){const{owner:n,name:r}=e,i=Zn(this.accounts,e.endpoint);return null!==i&&Vn.fromAccount(i).rerunJob(n.login,r,t)}async rerunFailedJobs(e,t){const{owner:n,name:r}=e,i=Zn(this.accounts,e.endpoint);return null!==i&&Vn.fromAccount(i).rerunFailedJobs(n.login,r,t)}async fetchCheckSuite(e,t){const{owner:n,name:r}=e,i=Zn(this.accounts,e.endpoint);return null===i?null:Vn.fromAccount(i).fetchCheckSuite(n.login,r,t)}}(hO),bO=new class{cache=new(yt())({maxSize:2500});workers=new Map;limit=TN()(1);tryGetAheadBehind(e,t,n){return this.cache.get(_N(e,t,n))??void 0}getAheadBehind(e,t,n,r){const i=_N(e,t,n),o=this.cache.get(i),s=new st.Disposable((()=>{}));return null===o?s:void 0!==o?(r(o),s):(this.limit((async()=>{const o=this.cache.get(i);if(s.disposed||null===o)return;if(void 0!==o)return void r(o);let a=this.workers.get(i);void 0===a&&(a=Gp(e,jp(t,n)).catch((e=>(log.error("Failed calculating ahead/behind status",e),null))).then((e=>(this.cache.set(i,e),e))).finally((()=>this.workers.delete(i))),this.workers.set(i,a));const l=await a;null===l||s.disposed||r(l)})).catch((e=>log.error("Failed calculating ahead/behind status",e))),s)}},wO=new class{accountsStore;ALIVE_EVENT_RECEIVED_EVENT="alive-event-received";sessionPerEndpoint=new Map;emitter=new st.Emitter;subscriptions=[];enabled=!1;accountSubscriptionPromise=null;constructor(e){this.accountsStore=e,this.accountsStore.onDidUpdate(this.subscribeToAccounts)}setEnabled(e){this.enabled!==e&&(this.enabled=e,e?this.subscribeToAllAccounts():this.unsubscribeFromAllAccounts())}onAliveEventReceived(e){this.emitter.on(this.ALIVE_EVENT_RECEIVED_EVENT,e)}async subscribeToAllAccounts(){const e=await this.accountsStore.getAll();this.subscribeToAccounts(e)}async unsubscribeFromAllAccounts(){await this.accountSubscriptionPromise;const e=this.subscriptions.map((e=>e.account));for(const t of e)this.unsubscribeFromAccount(t)}subscribeToAccounts=async e=>{this.enabled&&(await this.accountSubscriptionPromise,this.accountSubscriptionPromise=this._subscribeToAccounts(e))};async _subscribeToAccounts(e){const t=this.subscriptions.map((e=>e.account));for(const n of t)nO(n,e)||this.unsubscribeFromAccount(n);for(const n of e)nO(n,t)||await this.subscribeToAccount(n)}sessionForAccount(e){return this.sessionPerEndpoint.get(e.endpoint)}async createSessionForAccount(e){const t=this.sessionForAccount(e);if(void 0!==t)return t;const n=Vn.fromAccount(e);let r=null;try{r=await n.getAliveWebSocketURL()}catch(t){return log.error(`Could not get Alive web socket URL for '${e.login}'`,t),null}if(null===r)return null;const i={session:new tO(r,(()=>n.getAliveWebSocketURL()),!1,this.notify),webSocketUrl:r};return this.sessionPerEndpoint.set(e.endpoint,i),i}unsubscribeFromAccount(e){const t=this.sessionForAccount(e);if(void 0===t)return;const n=this.subscriptions.find((t=>en(t.account,e)));void 0!==n&&(t.session.unsubscribe([n.subscription]),this.subscriptions=this.subscriptions.filter((t=>!en(t.account,e))),this.sessionPerEndpoint.delete(e.endpoint),t.session.offline(),log.info(`Unubscribed '${e.login}' from Alive channel`))}subscribeToAccount=async e=>{if(!Pn(e.endpoint))return;const t=await this.createSessionForAccount(e),n=Vn.fromAccount(e),r=await n.getAliveDesktopChannel();if(null===t||null===r)return;const i={subscriber:this,topic:{name:r.channel_name,signed:r.signed_channel,offset:""}};t.session.subscribe([i]),this.subscriptions.push({account:e,subscription:i}),log.info(`Subscribed '${e.login}' to Alive channel`)};notify=(e,t)=>{if("message"!==t.type)return;const n=t.data;"pr-checks-failed"!==n.type&&"pr-review-submit"!==n.type&&"pr-comment"!==n.type||this.emitter.emit(this.ALIVE_EVENT_RECEIVED_EVENT,n)}}(hO),vO=new class{accountsStore;aliveStore;pullRequestCoordinator;statsStore;repository=null;recentRepositories=[];onChecksFailedCallback=null;onPullRequestReviewSubmitCallback=null;onPullRequestCommentCallback=null;cachedCommits=new Map;skipCommitShas=new Set;skipCheckRuns=new Set;constructor(e,t,n,r){this.accountsStore=e,this.aliveStore=t,this.pullRequestCoordinator=n,this.statsStore=r,this.aliveStore.setEnabled(Fv()),this.aliveStore.onAliveEventReceived(this.onAliveEventReceived)}setNotificationsEnabled(e){At(Bv,!0)!==e&&(Pt(Bv,e),this.aliveStore.setEnabled(e))}onAliveEventReceived=async e=>this.handleAliveEvent(e,!1);onNotificationEventReceived=async(e,t,n)=>this.handleAliveEvent(n,!0);simulateAliveEvent(e){}async handleAliveEvent(e,t){switch(e.type){case"pr-checks-failed":return this.handleChecksFailedEvent(e,t);case"pr-review-submit":return this.handlePullRequestReviewSubmitEvent(e,t);case"pr-comment":return this.handlePullRequestCommentEvent(e,t)}}async handlePullRequestCommentEvent(e,t){const n=this.repository;if(null===n)return;if(!this.isValidRepositoryForEvent(n,e))return void(this.isRecentRepositoryEvent(e)?this.statsStore.increment("pullRequestCommentNotificationFromRecentRepoCount"):this.statsStore.increment("pullRequestCommentNotificationFromNonRecentRepoCount"));const r=(await this.pullRequestCoordinator.getAllPullRequests(n)).find((t=>t.pullRequestNumber===e.pull_request_number));if(void 0===r)return;const i=await this.getAPIForRepository(n.gitHubRepository);if(null===i)return;const o="issue-comment"===e.subtype?await i.fetchIssueComment(e.owner,e.repo,e.comment_id):await i.fetchPullRequestReviewComment(e.owner,e.repo,e.comment_id);if(null===o)return;const s=`@${o.user.login} commented your pull request`,a=`${r.title} #${r.pullRequestNumber}\n${_v(o.body,50)}`,l=()=>{this.statsStore.increment("pullRequestCommentNotificationClicked"),this.onPullRequestCommentCallback?.(n,r,o)};t?l():(Iv({title:s,body:a,userInfo:e,onClick:l}),this.statsStore.increment("pullRequestCommentNotificationCount"))}async handlePullRequestReviewSubmitEvent(e,t){const n=this.repository;if(null===n)return;if(!this.isValidRepositoryForEvent(n,e))return void(this.isRecentRepositoryEvent(e)?this.statsStore.increment("pullRequestReviewNotificationFromRecentRepoCount"):this.statsStore.increment("pullRequestReviewNotificationFromNonRecentRepoCount"));const r=(await this.pullRequestCoordinator.getAllPullRequests(n)).find((t=>t.pullRequestNumber===e.pull_request_number));if(void 0===r)return;const i=this.getContributingRepository(n),o=await this.getAPIForRepository(i);if(null===o)return;const s=await o.fetchPullRequestReview(i.owner.login,i.name,r.pullRequestNumber.toString(),e.review_id);if(null===s||!Mv(s))return;const a=Nv(s),l=`@${s.user.login} ${a} your pull request`,c=`${r.title} #${r.pullRequestNumber}\n${_v(s.body,50)}`,u=()=>{this.statsStore.recordPullRequestReviewNotificationClicked(s.state),this.onPullRequestReviewSubmitCallback?.(n,r,s)};t?u():(Iv({title:l,body:c,userInfo:e,onClick:u}),this.statsStore.recordPullRequestReviewNotificationShown(s.state))}async handleChecksFailedEvent(e,t){const n=this.repository;if(null===n)return;if(!this.isValidRepositoryForEvent(n,e))return void(this.isRecentRepositoryEvent(e)?this.statsStore.increment("checksFailedNotificationFromRecentRepoCount"):this.statsStore.increment("checksFailedNotificationFromNonRecentRepoCount"));const r=(await this.pullRequestCoordinator.getAllPullRequests(n)).find((t=>t.pullRequestNumber===e.pull_request_number));if(void 0===r)return;const i=await this.getAccountForRepository(n.gitHubRepository);if(null===i)return;const o=e.commit_sha;if(this.skipCommitShas.has(o))return;const s=this.cachedCommits.get(o)??await Gc(n,o);if(null===s)return void this.skipCommitShas.add(o);if(this.cachedCommits.set(o,s),!i.emails.map((e=>e.email)).includes(s.author.email))return void this.skipCommitShas.add(o);const a=this.getContributingRepository(n),l=await this.getChecksForRef(a,ya(r.pullRequestNumber));if(null===l)return;if(l.flatMap((t=>t.checkSuiteId===e.check_suite_id?t.id:[])).every((e=>this.skipCheckRuns.has(e))))return;const c=l.filter((e=>e.conclusion===Un.Failure)).length;if(0===c)return;for(const e of l)this.skipCheckRuns.add(e.id);const u=1===c?"check was":"checks were",h=wl(o),p=`${r.title} #${r.pullRequestNumber} (${h})\n${c} ${u} not successful.`,d=()=>{this.statsStore.increment("checksFailedNotificationClicked"),this.onChecksFailedCallback?.(n,r,s.summary,o,l)};t?d():(Iv({title:"拉取请求检查失败",body:p,userInfo:e,onClick:d}),this.statsStore.increment("checksFailedNotificationCount"))}getContributingRepository(e){return Nr(e)&&Fr(e)===Tr.Parent?e.gitHubRepository.parent:e.gitHubRepository}isValidRepositoryForEvent(e,t){if(Nr(e)&&Fr(e)===Tr.Parent){const n=e.gitHubRepository.parent;return n.owner.login===t.owner&&n.name===t.repo}const n=e.gitHubRepository;return n.owner.login===t.owner&&n.name===t.repo}isRecentRepositoryEvent(e){return this.recentRepositories.some((t=>_r(t)&&this.isValidRepositoryForEvent(t,e)))}selectRepository(e){e.hash!==this.repository?.hash&&(this.repository=_r(e)?e:null,this.resetCache())}resetCache(){this.cachedCommits.clear(),this.skipCommitShas.clear(),this.skipCheckRuns.clear()}setRecentRepositories(e){this.recentRepositories=e}async getAccountForRepository(e){const{endpoint:t}=e;return(await this.accountsStore.getAll()).find((e=>e.endpoint===t))??null}async getAPIForRepository(e){const t=await this.getAccountForRepository(e);return null===t?null:Vn.fromAccount(t)}async getChecksForRef(e,t){const{owner:n,name:r}=e,i=await this.getAPIForRepository(e);if(null===i)return null;const[o,s]=await Promise.all([i.fetchCombinedRefStatus(n.login,r,t,!0),i.fetchRefCheckRuns(n.login,r,t,!0)]),a=new Array;if(null===o||null===s)return null;if(null!==o&&a.push(...o.statuses.map(ka)),null!==s){const e=Na(s.check_runs);a.push(...e.map(Da))}const l=Aa(a);return null===l||0===l.checks.length?null:l.checks}onChecksFailedNotification(e){this.onChecksFailedCallback=e}onPullRequestReviewSubmitNotification(e){this.onPullRequestReviewSubmitCallback=e}onPullRequestCommentNotification(e){this.onPullRequestCommentCallback=e}}(hO,wO,mO,cO),CO=new class{accountsStore;notificationsStore;pullRequestCoordinator;cachedComments=new Map;cachedReviews=new Map;constructor(e,t,n){this.accountsStore=e,this.notificationsStore=t,this.pullRequestCoordinator=n}async getAccountForRepository(e){const{endpoint:t}=e;return(await this.accountsStore.getAll()).find((e=>e.endpoint===t))??null}async getAPIForRepository(e){const t=await this.getAccountForRepository(e);return null===t?null:Vn.fromAccount(t)}async getPullRequests(e,t){const n=await this.pullRequestCoordinator.getAllPullRequests(e);if(!t.filterByComments&&!t.filterByReviews)return n;const r=[];for(const i of n){if(t.filterByComments){const t=this.cachedComments.get(i.pullRequestNumber);if(t&&t.length>0){r.push(i);continue}const n=await this.getPullRequestComments(e,i.pullRequestNumber);this.cachedComments.set(i.pullRequestNumber,n),n.length>0&&r.push(i)}if(t.filterByReviews){const t=this.cachedReviews.get(i.pullRequestNumber);if(t&&t.length>0){r.push(i);continue}const n=await this.getPullRequestReviews(e,i.pullRequestNumber);this.cachedReviews.set(i.pullRequestNumber,n),n.length>0&&r.push(i)}}return r}async getPullRequestReviews(e,t){const n=this.cachedReviews.get(t);if(n)return n;const r=await this.getAPIForRepository(e.gitHubRepository);if(null===r)return[];const i=e.gitHubRepository;return(await r.fetchPullRequestReviews(i.owner.login,i.name,t.toString())).filter(Mv)}async getPullRequestComments(e,t){const n=this.cachedComments.get(t);if(n)return n;const r=await this.getAPIForRepository(e.gitHubRepository);if(null===r)return[];const i=e.gitHubRepository;return[...await r.fetchIssueComments(i.owner.login,i.name,t.toString()),...await r.fetchPullRequestComments(i.owner.login,i.name,t.toString())]}simulatePullRequestReviewNotification(e,t,n){this.notificationsStore.simulateAliveEvent({type:"pr-review-submit",timestamp:new Date(n.submitted_at).getTime(),owner:e.owner.login,repo:e.name,pull_request_number:t.pullRequestNumber,state:n.state,review_id:n.id.toString()})}simulatePullRequestCommentNotification(e,t,n,r){this.notificationsStore.simulateAliveEvent({type:"pr-comment",subtype:r?"issue-comment":"review-comment",timestamp:new Date(n.created_at).getTime(),owner:e.owner.login,repo:e.name,pull_request_number:t.pullRequestNumber,comment_id:n.id.toString()})}async simulatePullRequestChecksFailed(e,t,n){const r=t.head.sha,i=ya(t.pullRequestNumber),o=await this.notificationsStore.getChecksForRef(e.gitHubRepository,i);if(!o)return void XD(new Error("Could not get checks for PR"),n);const s={type:"pr-checks-failed",timestamp:new Date(t.created).getTime(),owner:e.gitHubRepository.owner.login,repo:e.name,pull_request_number:t.pullRequestNumber,check_suite_id:o[0].checkSuiteId??0,commit_sha:r},a=await Gc(e,r),l=o.filter((e=>e.conclusion===Un.Failure)).length,c=1===l?"check was":"checks were",u=wl(r);Iv({title:"拉取请求检查失败",body:`${t.title} #${t.pullRequestNumber} (${u})\n${l} ${c} not successful.`,userInfo:s,onClick:()=>{n.onChecksFailedNotification(e,t,a?.summary??"Could not load commit summary",r,o)}})}}(hO,vO,mO),SO=new class extends Xa{gitHubUserStore;cloningRepositoriesStore;issuesStore;statsStore;signInStore;accountsStore;repositoriesStore;pullRequestCoordinator;repositoryStateCache;apiRepositoriesStore;notificationsStore;gitStoreCache;accounts=new Array;repositories=new Array;recentRepositories=new Array;selectedRepository=null;currentBackgroundFetcher=null;currentBranchPruner=null;repositoryIndicatorUpdater;showWelcomeFlow=!1;focusCommitMessage=!1;currentFoldout=null;currentBanner=null;emitQueued=!1;localRepositoryStateLookup=new Map;emoji=new Map;appMenu=null;highlightAccessKeys=!1;appIsFocused=!1;sidebarWidth=uf(250);commitSummaryWidth=uf(250);stashedFilesWidth=uf(250);pullRequestFileListWidth=uf(250);windowState=null;windowZoomFactor=1;resizablePaneActive=!1;isUpdateAvailableBannerVisible=!1;isUpdateShowcaseVisible=!1;askToMoveToApplicationsFolderSetting=!0;askForConfirmationOnRepositoryRemoval=!0;confirmDiscardChanges=!0;confirmDiscardChangesPermanently=!0;confirmDiscardStash=!0;confirmCheckoutCommit=!0;askForConfirmationOnForcePush=!0;confirmUndoCommit=!0;imageDiffType=Jm;hideWhitespaceInChangesDiff=!1;hideWhitespaceInHistoryDiff=!1;hideWhitespaceInPullRequestDiff=!1;commitSpellcheckEnabled=!0;showSideBySideDiff=!1;uncommittedChangesStrategy=Eu;selectedExternalEditor=null;resolvedExternalEditor=null;selectedShell=wc;repositoryFilterText="";currentMergeTreePromise=null;resolveOpenInDesktop=null;selectedCloneRepositoryTab=Pr.DotCom;selectedBranchesTab=tl.Branches;selectedTheme=aa.System;currentTheme=aa.Light;useWindowsOpenSSH=!1;showCommitLengthWarning=!1;hasUserViewedStash=!1;repositoryIndicatorsEnabled;currentOnboardingTutorialStep=Ru.NotApplicable;tutorialAssessor;currentDragElement=null;lastThankYou;showCIStatusPopover=!1;popupManager=new Ed;pullRequestSuggestedNextAction=void 0;cachedRepoRulesets=new Map;constructor(e,t,n,r,i,o,s,a,l,c,u){super(),this.gitHubUserStore=e,this.cloningRepositoriesStore=t,this.issuesStore=n,this.statsStore=r,this.signInStore=i,this.accountsStore=o,this.repositoriesStore=s,this.pullRequestCoordinator=a,this.repositoryStateCache=l,this.apiRepositoriesStore=c,this.notificationsStore=u,this.showWelcomeFlow=!oa(),this.gitStoreCache=new du(rt,this.statsStore,((e,t)=>this.onGitStoreUpdated(e,t)),(e=>this.emitError(e))),window.addEventListener("resize",(()=>{this.updateResizableConstraints(),this.emitUpdate()})),this.initializeWindowState(),this.initializeZoomFactor(),this.wireupIpcEventHandlers(),this.wireupStoreEventHandlers(),J(),this.tutorialAssessor=new Iu(this.getResolvedExternalEditor),void 0===At(af)&&Pt(af,!0),this.repositoryIndicatorsEnabled=At(af)??!0,this.repositoryIndicatorUpdater=new gh(this.getRepositoriesForIndicatorRefresh,this.refreshIndicatorForRepository),window.setTimeout((()=>{this.repositoryIndicatorsEnabled&&this.repositoryIndicatorUpdater.start()}),12e4),Vn.onTokenInvalidated(this.onTokenInvalidated),this.notificationsStore.onChecksFailedNotification(this.onChecksFailedNotification),this.notificationsStore.onPullRequestReviewSubmitNotification(this.onPullRequestReviewSubmitNotification),this.notificationsStore.onPullRequestCommentNotification(this.onPullRequestCommentNotification),g("show-installing-update",this.onShowInstallingUpdate)}initializeWindowState=async()=>{const e=await M();void 0!==e&&(this.windowState=e)};initializeZoomFactor=async()=>{const e=await this.getWindowZoomFactor();void 0!==e&&this.onWindowZoomFactorChanged(e)};async getWindowZoomFactor(){return await B()}onTokenInvalidated=e=>{const t=Zn(this.accounts,e);null!==t&&(this.popupManager.isAPopupOpen||(this._removeAccount(t),this._showPopup({type:nl.InvalidatedToken,account:t})))};onShowInstallingUpdate=()=>{this._showPopup({type:nl.InstallingUpdate})};async updateCurrentTutorialStep(e){const t=await this.tutorialAssessor.getCurrentStep(e.isTutorialRepository,this.repositoryStateCache.get(e));t!==this.currentOnboardingTutorialStep&&(this.currentOnboardingTutorialStep=t,log.info(`Current tutorial step is now ${t}`),this.recordTutorialStepCompleted(t),this.emitUpdate())}recordTutorialStepCompleted(e){if(xu(e))switch(this.statsStore.recordHighestTutorialStepCompleted(Tu.indexOf(e)),e){case Ru.PickEditor:break;case Ru.CreateBranch:this.statsStore.recordTutorialEditorInstalled();break;case Ru.EditFile:this.statsStore.recordTutorialBranchCreated();break;case Ru.MakeCommit:this.statsStore.recordTutorialFileEdited();break;case Ru.PushBranch:this.statsStore.recordTutorialCommitCreated();break;case Ru.OpenPullRequest:this.statsStore.recordTutorialBranchPushed();break;case Ru.AllDone:this.statsStore.recordTutorialPrCreated(),this.statsStore.recordTutorialCompleted();break;default:et(0,"Unaccounted for step type")}}async _resumeTutorial(e){this.tutorialAssessor.resumeTutorial(),await this.updateCurrentTutorialStep(e)}async _pauseTutorial(e){this.tutorialAssessor.pauseTutorial(),await this.updateCurrentTutorialStep(e)}async _skipPickEditorTutorialStep(e){this.tutorialAssessor.skipPickEditor(),await this.updateCurrentTutorialStep(e)}async _markPullRequestTutorialStepAsComplete(e){this.tutorialAssessor.markPullRequestTutorialStepAsComplete(),await this.updateCurrentTutorialStep(e)}wireupIpcEventHandlers(){g("window-state-changed",((e,t)=>{this.windowState=t,this.emitUpdate()})),g("zoom-factor-changed",((e,t)=>{this.onWindowZoomFactorChanged(t)})),g("app-menu",((e,t)=>this.setAppMenu(t)))}wireupStoreEventHandlers(){this.gitHubUserStore.onDidUpdate((()=>{this.emitUpdate()})),this.cloningRepositoriesStore.onDidUpdate((()=>{this.emitUpdate()})),this.cloningRepositoriesStore.onDidError((e=>this.emitError(e))),this.signInStore.onDidAuthenticate(((e,t)=>{this._addAccount(e),this.showWelcomeFlow&&this.statsStore.recordWelcomeWizardSignInMethod(t)})),this.signInStore.onDidUpdate((()=>this.emitUpdate())),this.signInStore.onDidError((e=>this.emitError(e))),this.accountsStore.onDidUpdate((e=>{this.accounts=e;const t=e.map((({endpoint:e,token:t})=>({endpoint:e,token:t})));oe(t),this.emitUpdate()})),this.accountsStore.onDidError((e=>this.emitError(e))),this.repositoriesStore.onDidUpdate((e=>{this.repositories=e,this.updateRepositorySelectionAfterRepositoriesChanged(),this.emitUpdate()})),this.pullRequestCoordinator.onPullRequestsChanged(((e,t)=>this.onPullRequestChanged(e,t))),this.pullRequestCoordinator.onIsLoadingPullRequests(((e,t)=>{this.repositoryStateCache.updateBranchesState(e,(()=>({isLoadingPullRequests:t}))),this.emitUpdate()})),this.apiRepositoriesStore.onDidUpdate((()=>this.emitUpdate())),this.apiRepositoriesStore.onDidError((e=>this.emitError(e)))}async loadEmoji(){var n;(n=await dt(),new Promise(((r,i)=>{const o=e.join(n,"emoji.json");t.readFile(o,"utf8",((e,t)=>{if(e)return void i(e);const n=new Map;try{JSON.parse(t).forEach((e=>{const t=e.emoji?function(e){const t=e.codePointAt(0);if(!t)return null;let n=Pc(t);if(e.length>2){const t=e.codePointAt(2);t&&65039!==t&&(n=`${n}-${Pc(t)}`)}return Ac(`unicode/${n}.png`)}(e.emoji):Ac(`${e.aliases[0]}.png`);t?e.aliases.forEach((e=>{n.set(`:${e}:`,t)})):log.error(`Could not calculate location of emoji: ${e}`)}))}catch(e){i(e)}const o=new Map;Array.from(n.keys()).sort().forEach((e=>{const t=n.get(e);t&&o.set(e,t)})),r(o)}))}))).then((e=>{this.emoji=e,this.emitUpdate()})).catch((e=>{log.warn("Unexpected issue when trying to read emoji into memory",e)}))}emitUpdate(){"hidden"!==this.windowState?this.emitQueued||(this.emitQueued=!0,window.requestAnimationFrame((()=>{this.emitUpdateNow()}))):this.emitUpdateNow()}emitUpdateNow(){this.emitQueued=!1;const e=this.getState();super.emitUpdate(e),function(e,t){const n=ac(e);if(t)for(const[e,r]of n.entries()){const i=t.getItemById(e);i&&oc(r,i)&&n.delete(e)}if(0===n.size)return;const r=new Array;n.forEach(((e,t)=>r.push({id:t,state:e}))),x(r)}(e,this.appMenu)}onWindowZoomFactorChanged(e){const t=this.windowZoomFactor;this.windowZoomFactor=e,e!==t&&(_t("zoom-factor",e),this.updateResizableConstraints(),this.emitUpdate())}getSelectedState(){const e=this.selectedRepository;if(!e)return null;if(e instanceof jr){const t=this.cloningRepositoriesStore.getRepositoryState(e);return t?{type:qe.CloningRepository,repository:e,progress:t}:null}return e.missing?{type:qe.MissingRepository,repository:e}:{type:qe.Repository,repository:e,state:this.repositoryStateCache.get(e)}}getState(){const e=[...this.repositories,...this.cloningRepositoriesStore.repositories];return{accounts:this.accounts,repositories:e,recentRepositories:this.recentRepositories,localRepositoryStateLookup:this.localRepositoryStateLookup,windowState:this.windowState,windowZoomFactor:this.windowZoomFactor,appIsFocused:this.appIsFocused,selectedState:this.getSelectedState(),signInState:this.signInStore.getState(),currentPopup:this.popupManager.currentPopup,allPopups:this.popupManager.allPopups,currentFoldout:this.currentFoldout,errorCount:this.popupManager.getPopupsOfType(nl.Error).length,showWelcomeFlow:this.showWelcomeFlow,focusCommitMessage:this.focusCommitMessage,emoji:this.emoji,sidebarWidth:this.sidebarWidth,commitSummaryWidth:this.commitSummaryWidth,stashedFilesWidth:this.stashedFilesWidth,pullRequestFilesListWidth:this.pullRequestFileListWidth,appMenuState:this.appMenu?this.appMenu.openMenus:[],highlightAccessKeys:this.highlightAccessKeys,isUpdateAvailableBannerVisible:this.isUpdateAvailableBannerVisible,isUpdateShowcaseVisible:this.isUpdateShowcaseVisible,currentBanner:this.currentBanner,askToMoveToApplicationsFolderSetting:this.askToMoveToApplicationsFolderSetting,askForConfirmationOnRepositoryRemoval:this.askForConfirmationOnRepositoryRemoval,askForConfirmationOnDiscardChanges:this.confirmDiscardChanges,askForConfirmationOnDiscardChangesPermanently:this.confirmDiscardChangesPermanently,askForConfirmationOnDiscardStash:this.confirmDiscardStash,askForConfirmationOnCheckoutCommit:this.confirmCheckoutCommit,askForConfirmationOnForcePush:this.askForConfirmationOnForcePush,askForConfirmationOnUndoCommit:this.confirmUndoCommit,uncommittedChangesStrategy:this.uncommittedChangesStrategy,selectedExternalEditor:this.selectedExternalEditor,imageDiffType:this.imageDiffType,hideWhitespaceInChangesDiff:this.hideWhitespaceInChangesDiff,hideWhitespaceInHistoryDiff:this.hideWhitespaceInHistoryDiff,hideWhitespaceInPullRequestDiff:this.hideWhitespaceInPullRequestDiff,showSideBySideDiff:this.showSideBySideDiff,selectedShell:this.selectedShell,repositoryFilterText:this.repositoryFilterText,resolvedExternalEditor:this.resolvedExternalEditor,selectedCloneRepositoryTab:this.selectedCloneRepositoryTab,selectedBranchesTab:this.selectedBranchesTab,selectedTheme:this.selectedTheme,currentTheme:this.currentTheme,apiRepositories:this.apiRepositoriesStore.getState(),useWindowsOpenSSH:this.useWindowsOpenSSH,showCommitLengthWarning:this.showCommitLengthWarning,optOutOfUsageTracking:this.statsStore.getOptOut(),currentOnboardingTutorialStep:this.currentOnboardingTutorialStep,repositoryIndicatorsEnabled:this.repositoryIndicatorsEnabled,commitSpellcheckEnabled:this.commitSpellcheckEnabled,currentDragElement:this.currentDragElement,lastThankYou:this.lastThankYou,showCIStatusPopover:this.showCIStatusPopover,notificationsEnabled:Fv(),pullRequestSuggestedNextAction:this.pullRequestSuggestedNextAction,resizablePaneActive:this.resizablePaneActive,cachedRepoRulesets:this.cachedRepoRulesets}}onGitStoreUpdated(e,t){const n=this.repositoryStateCache.get(e);this.repositoryStateCache.updateBranchesState(e,(r=>{let{currentPullRequest:i}=r;const{tip:o,currentRemote:s}=t;if(!function(e,t){if(e===t)return!0;const n=e.kind;switch(e.kind){case Ar.Unknown:return e.kind===t.kind;case Ar.Unborn:return e.kind===t.kind&&e.ref===t.ref;case Ar.Detached:return e.kind===t.kind&&e.currentSha===t.currentSha;case Ar.Valid:return e.kind===t.kind&&function(e,t){return e.type===t.type&&e.tip.sha===t.tip.sha&&e.upstreamRemoteName===t.upstreamRemoteName&&e.upstream===t.upstream}(e.branch,t.branch);default:return et(0,`Unknown tip state ${n}`)}}(r.tip,o)||!function(e,t){return e===t||null!==e&&null!==t&&e.name===t.name&&e.url===t.url}(n.remote,s))if(o.kind!==Ar.Valid||null===s)i=null;else{const{branch:t}=o;i&&Nu(t,i,s)||(i=_u(t,r.openPullRequests,s)),o.kind===Ar.Valid&&r.tip.kind===Ar.Valid&&o.branch.name!==r.tip.branch.name&&this.refreshBranchProtectionState(e)}return{tip:t.tip,defaultBranch:t.defaultBranch,upstreamDefaultBranch:t.upstreamDefaultBranch,allBranches:t.allBranches,recentBranches:t.recentBranches,pullWithRebase:t.pullWithRebase,currentPullRequest:i}}));let r=!1,i=!1;this.repositoryStateCache.updateChangesState(e,(e=>{const n=t.currentBranchStashEntry;return e.selection.kind===Ve.Stash&&null!==e.stashEntry&&(null===n?r=!0:e.stashEntry.stashSha!==n.stashSha&&(i=!0)),{commitMessage:t.commitMessage,showCoAuthoredBy:t.showCoAuthoredBy,coAuthors:t.coAuthors,stashEntry:n}})),this.repositoryStateCache.update(e,(()=>({commitLookup:t.commitLookup,localCommitSHAs:t.localCommitSHAs,localTags:t.localTags,aheadBehind:t.aheadBehind,tagsToPush:t.tagsToPush,remote:t.currentRemote,lastFetched:t.lastFetched}))),r?this._selectWorkingDirectoryFiles(e):i?this._selectStashedFile(e):this.emitUpdate()}clearBranchProtectionState(e){this.repositoryStateCache.updateChangesState(e,(()=>({currentBranchProtected:!1,currentRepoRulesInfo:new Pm}))),this.emitUpdate()}async refreshBranchProtectionState(e){const{tip:t,currentRemote:n}=this.gitStoreCache.get(e);if(t.kind!==Ar.Valid||null===e.gitHubRepository)return;const r=e.gitHubRepository,i=ku(t,n,r);if(null!==i){const t=Zn(this.accounts,r.endpoint);if(null===t)return;if(!xr(r))return this.repositoryStateCache.updateChangesState(e,(()=>({currentBranchProtected:!1,currentRepoRulesInfo:new Pm}))),void this.emitUpdate();const n=r.name,o=r.owner.login,s=Vn.fromAccount(t),a=!function(e){const{allow_actor:t,required_status_checks:n,required_approving_review_count:r}=e,i=Array.isArray(n)?n.length:0;return!1!==t&&0===i&&0===r}(await s.fetchPushControl(o,n,i));let l=new Pm;if(Im(t,e)){const t=await s.fetchAllRepoRulesets(o,n);if(t?.length){const e=t.map((e=>e.id)),r=[];for(const t of e)this.cachedRepoRulesets.has(t)||r.push(s.fetchRepoRuleset(o,n,t));if(r.length>0){const e=await Promise.all(r);this._updateCachedRepoRulesets(e)}}const r=await s.fetchRepoRulesForBranch(o,n,i);r.length>0&&(l=await _m(r,this.cachedRepoRulesets,e))}this.repositoryStateCache.updateChangesState(e,(()=>({currentBranchProtected:a,currentRepoRulesInfo:l}))),this.emitUpdate()}}_updateCachedRepoRulesets(e){for(const t of e)null!==t&&this.cachedRepoRulesets.set(t.id,t)}clearSelectedCommit(e){this.repositoryStateCache.updateCommitSelection(e,(()=>({shas:[],file:null,changesetData:{files:[],linesAdded:0,linesDeleted:0},diff:null})))}_changeCommitSelection(e,t,n){const{commitSelection:r,commitLookup:i,compareState:o}=this.repositoryStateCache.get(e);if(r.shas.length===t.length&&r.shas.every(((e,n)=>e===t[n])))return;const s=this.getShasInDiff(this.orderShasByHistory(e,t),n,i);t.length>1&&n&&this.recordMultiCommitDiff(t,s,o),this.repositoryStateCache.updateCommitSelection(e,(()=>({shas:t,shasInDiff:s,isContiguous:n,file:null,changesetData:{files:[],linesAdded:0,linesDeleted:0},diff:null}))),this.emitUpdate()}recordMultiCommitDiff(e,t,n){n.formState.kind===Ke.History?this.statsStore.increment("multiCommitDiffFromHistoryCount"):this.statsStore.increment("multiCommitDiffFromCompareCount");const r=!e.every((e=>t.includes(e)));r&&this.statsStore.increment("multiCommitDiffWithUnreachableCommitWarningCount")}async _updateShasToHighlight(e,t){this.repositoryStateCache.updateCompareState(e,(()=>({shasToHighlight:t}))),this.emitUpdate()}getShasInDiff(e,t,n){if(e.length<=1||!t)return e;const r=new Set,i=new Set(e),o=[e.at(-1)];let s;for(;void 0!==(s=o.pop());)r.has(s)||(r.add(s),n.get(s)?.parentSHAs?.forEach((e=>{i.has(e)&&!r.has(e)&&o.push(e)})));return Array.from(r)}updateOrSelectFirstCommit(e,t){const n=this.repositoryStateCache.get(e);let r=n.commitSelection.shas.length>0?n.commitSelection.shas[0]:null;null!=r&&t.findIndex((e=>e===r))<0&&(r=null,this.clearSelectedCommit(e)),null===r&&t.length>0&&(this._changeCommitSelection(e,[t[0]],!0),this._loadChangedFilesForCurrentSelection(e))}async _initializeCompare(e,t){const n=this.repositoryStateCache.get(e),{branchesState:r,compareState:i}=n,{tip:o}=r,s=o.kind===Ar.Valid?o.branch:null,a=r.allBranches.filter((e=>e.name!==s?.name&&!e.isDesktopForkRemoteBranch)),l=s?r.recentBranches.filter((e=>e.name!==s.name)):r.recentBranches,c=r.defaultBranch,u=null!=s&&null!=c&&s.name!==c.name?c:null;this.repositoryStateCache.updateCompareState(e,(()=>({branches:a,recentBranches:l,defaultBranch:u})));const h=i.formState,p=null!=t?t:function(e){if(e.kind===Ke.History)return{kind:Ke.History};const{comparisonMode:t,comparisonBranch:n}=e;return{kind:Ke.Compare,comparisonMode:t,branch:n}}(h);this._executeCompare(e,p)}async _executeCompare(e,t){const n=this.gitStoreCache.get(e),r=t.kind;if(t.kind===Ke.History){const{tip:t}=n;let r=null;t.kind===Ar.Valid?r=t.branch.tip.sha:t.kind===Ar.Detached&&(r=t.currentSha);const{compareState:i}=this.repositoryStateCache.get(e),{formState:o,commitSHAs:s}=i,a=i.tip;if(null!==r&&null!==a&&r===a&&o.kind===Ke.History&&s.length>0)return;const l=await n.loadCommitBatch("HEAD",0);if(null===l)return;const c={kind:Ke.History};return this.repositoryStateCache.updateCompareState(e,(()=>({tip:r,formState:c,commitSHAs:l,filterText:"",showBranchList:!1}))),this.updateOrSelectFirstCommit(e,l),this.emitUpdate()}return t.kind===Ke.Compare?this.updateCompareToBranch(e,t):et(0,`Unknown action: ${r}`)}async updateCompareToBranch(e,t){const n=this.gitStoreCache.get(e),r=t.branch,i=await n.getCompareCommits(r,t.comparisonMode);this.statsStore.increment("branchComparisons");const{branchesState:o}=this.repositoryStateCache.get(e);if(null!==o.defaultBranch&&r.name===o.defaultBranch.name&&this.statsStore.increment("defaultBranchComparisons"),null==i)return;const{ahead:s,behind:a}=i,l={ahead:s,behind:a},c=i.commits.map((e=>e.sha)),u={kind:Ke.Compare,comparisonBranch:r,comparisonMode:t.comparisonMode,aheadBehind:l};this.repositoryStateCache.updateCompareState(e,(()=>({formState:u,filterText:r.name,commitSHAs:c})));const h=n.tip,p={kind:Cu.Loading};return this.repositoryStateCache.updateCompareState(e,(()=>({mergeStatus:p}))),this.emitUpdate(),this.updateOrSelectFirstCommit(e,c),null!=this.currentMergeTreePromise?this.currentMergeTreePromise:h.kind===Ar.Valid&&l.behind>0?(this.currentMergeTreePromise=this.setupMergabilityPromise(e,h.branch,t.branch).then((t=>{this.repositoryStateCache.updateCompareState(e,(()=>({mergeStatus:t}))),this.emitUpdate()})).finally((()=>{this.currentMergeTreePromise=null})),this.currentMergeTreePromise):(this.repositoryStateCache.updateCompareState(e,(()=>({mergeStatus:null}))),this.emitUpdate())}setupMergabilityPromise(e,t,n){return Ec((()=>Sd(e,t,n)),500).catch((e=>(log.warn(`Error occurred while trying to merge ${t.name} (${t.tip.sha}) and ${n.name} (${n.tip.sha})`,e),null)))}_updateCompareForm(e,t){this.repositoryStateCache.updateCompareState(e,(e=>sa(e,t))),this.emitUpdate()}async _loadNextCommitBatch(e){const t=this.gitStoreCache.get(e),n=this.repositoryStateCache.get(e),{formState:r}=n.compareState;if(r.kind===Ke.History){const r=n.compareState.commitSHAs,i=await t.loadCommitBatch("HEAD",r.length);if(null==i)return;this.repositoryStateCache.updateCompareState(e,(()=>({commitSHAs:r.concat(i)}))),this.emitUpdate()}}async _loadChangedFilesForCurrentSelection(e){const t=this.repositoryStateCache.get(e),{commitSelection:n}=t,{shas:r,isContiguous:i}=n;if(0===r.length||r.length>1&&!i)return;const o=this.gitStoreCache.get(e),s=await o.performFailableOperation((()=>r.length>1?Ap(e,this.orderShasByHistory(e,r)):async function(e,t){const n=["log",t,"-C","-M","-m","-1","--no-show-signature","--first-parent","--raw","--format=format:","--numstat","-z","--"],{stdout:r}=await qw(n,e.path,"getChangesFiles");return jc(r,t,`${t}^`)}(e,r[0])));if(!s)return;if(n.shas.length!==r.length||!n.shas.every(((e,t)=>e===r[t])))return;const a=null===n.file&&s.files.length?s.files[0]:n.file;this.repositoryStateCache.updateCommitSelection(e,(()=>({file:a,changesetData:s,diff:null}))),this.emitUpdate(),null!==a&&this._changeFileSelection(e,a)}async _setRepositoryFilterText(e){this.repositoryFilterText=e,this.emitUpdate()}async _changeFileSelection(e,t){this.repositoryStateCache.updateCommitSelection(e,(()=>({file:t,diff:null}))),this.emitUpdate();const n=this.repositoryStateCache.get(e),{shas:r,isContiguous:i}=n.commitSelection;if(0===r.length)return;if(r.length>1&&!i)return;const o=r.length>1?await Dp(e,t,this.orderShasByHistory(e,r),this.hideWhitespaceInHistoryDiff):await Tp(e,t,r[0],this.hideWhitespaceInHistoryDiff),s=this.repositoryStateCache.get(e),{shas:a}=s.commitSelection;a.length===r.length&&r.every(((e,t)=>e===a[t]))&&s.commitSelection.file&&s.commitSelection.file.id===t.id&&(this.repositoryStateCache.updateCommitSelection(e,(()=>({diff:o}))),this.emitUpdate())}async _selectRepository(e){const t=this.selectedRepository;if(!(this.currentOnboardingTutorialStep!==Ru.NotApplicable)||e instanceof Ir&&e.isTutorialRepository||(this.currentOnboardingTutorialStep=Ru.NotApplicable),this.selectedRepository=e,this.emitUpdate(),this.stopBackground同步(),this.stopPullRequestUpdater(),this._clearBanner(),this.stopBackgroundPruner(),null==e)return Promise.resolve(null);if(!(e instanceof Ir))return Promise.resolve(null);_t(Bm,e.id);const n=t?t.id:null;this.updateRecentRepositories(n,e.id);const r=await this.recoverMissingRepository(e);return r.missing?(this.gitStoreCache.remove(e),Promise.resolve(null)):(this.updateBranchProtectionsFromAPI(e),this.notificationsStore.selectRepository(e),this._selectRepositoryRefreshTasks(r,t))}updateRecentRepositories(e,t){if(e===t)return;const n=Nt(Fm).filter((n=>n!==t&&n!==e));null!==e&&n.unshift(e);const r=n.slice(0,3);Ot(Fm,r),this.recentRepositories=r,this.notificationsStore.setRecentRepositories(this.repositories.filter((e=>this.recentRepositories.includes(e.id)))),this.emitUpdate()}async _selectRepositoryRefreshTasks(e,t){if(this._refreshRepository(e),_r(e)){const t=Br(e);this._refreshIssues(t),this.refreshMentionables(t),this.pullRequestCoordinator.getAllPullRequests(e).then((t=>{this.onPullRequestChanged(e,t)}))}return this.selectedRepository!==e?null:(this.stopBackground同步(),this.stopPullRequestUpdater(),this.stopBackgroundPruner(),this.startBackground同步(e,!t),this.startPullRequestUpdater(e),this.startBackgroundPruner(e),this.addUpstreamRemoteIfNeeded(e),this.repositoryWithRefreshedGitHubRepository(e))}stopBackgroundPruner(){const e=this.currentBranchPruner;null!==e&&(e.stop(),this.currentBranchPruner=null)}startBackgroundPruner(e){null!==this.currentBranchPruner&&Je(`A branch pruner is already active and cannot start updating on ${e.name}`);const t=new wu(e,this.gitStoreCache,this.repositoriesStore,this.repositoryStateCache,(e=>this._refreshRepository(e)));this.currentBranchPruner=t,this.currentBranchPruner.start()}async _refreshIssues(e){const t=Zn(this.accounts,e.endpoint);if(t)try{await this.issuesStore.refreshIssues(e,t)}catch(t){log.warn(`Unable to fetch issues for ${e.fullName}`,t)}}stopBackground同步(){const e=this.currentBackgroundFetcher;e&&(e.stop(),this.currentBackgroundFetcher=null)}refreshMentionables(e){const t=Zn(this.accounts,e.endpoint);t&&this.gitHubUserStore.updateMentionables(e,t)}startPullRequestUpdater(e){if(this.appIsFocused&&_r(e)){const t=Gl(this.accounts,e);if(null!==t)return this.pullRequestCoordinator.startPullRequestUpdater(e,t)}this.pullRequestCoordinator.stopPullRequestUpdater()}stopPullRequestUpdater(){this.pullRequestCoordinator.stopPullRequestUpdater()}async fetchPullRequest(e,t){const n=function(e){const t=o.parse(e);return"github.com"===t.hostname?Qn():`${t.protocol}//${t.hostname}/api`}(e),r=Zn(this.accounts,n);if(r){const n=Vn.fromAccount(r),i=tr(e);if(i&&i.owner&&i.name)return await n.fetchPullRequest(i.owner,i.name,t)}return null}async shouldBackgroundFetch(e,t){const n=this.gitStoreCache.get(e),r=await n.updateLastFetched();if(null===r)return!0;const i=(new Date).getTime()-r.getTime(),o=Or(e);if(i<18e5){const e=Math.floor(i/1e3);return log.debug(`Skipping background fetch as '${o}' was fetched ${e}s前`),!1}return null===t||r<t||(log.debug(`Skipping background fetch since nothing has been pushed to '${o}' since the last fetch at ${r}`),!1)}startBackground同步(e,t){this.currentBackgroundFetcher&&Je(`We should only have on background fetcher active at once, but we're trying to start background fetching on ${e.name} while another background fetcher is still active!`);const n=Gl(this.accounts,e);if(!n)return;if(!e.gitHubRepository)return;const r=new xc(e,n,(e=>this.performFetch(e,n,Xt.BackgroundTask)),(e=>this.shouldBackgroundFetch(e,null)));r.start(t),this.currentBackgroundFetcher=r}async loadInitialState(){const[e,t]=await Promise.all([this.accountsStore.getAll(),this.repositoriesStore.getAll()]);log.info(`[AppStore] loading ${t.length} repositories from store`),e.forEach((e=>{log.info(`[AppStore] found account: ${e.login} (${e.name})`)})),this.accounts=e,this.repositories=t,this.updateRepositorySelectionAfterRepositoriesChanged(),this.sidebarWidth=uf(It(Lm,250)),this.commitSummaryWidth=uf(It(Hm,250)),this.stashedFilesWidth=uf(It(Um,250)),this.pullRequestFileListWidth=uf(It(Wm,250)),this.updateResizableConstraints(),this.updatePullRequestResizableConstraints(),this.askToMoveToApplicationsFolderSetting=At($m,!0),this.askForConfirmationOnRepositoryRemoval=At(zm,!0),void 0===At(qm)&&Pt(qm,!0),this.showCommitLengthWarning=At(qm,!1),this.confirmDiscardChanges=At(jm,!0),this.confirmDiscardChangesPermanently=At(Km,!0),this.confirmDiscardStash=At(Gm,!0),this.confirmCheckoutCommit=At(Vm,!0),this.askForConfirmationOnForcePush=At(Ym,!0),this.confirmUndoCommit=At(Xm,!0),this.uncommittedChangesStrategy=Bt(Qm,Su)??Eu,this.updateSelectedExternalEditor(await this.lookupSelectedExternalEditor()).catch((e=>log.error("Failed resolving current editor at startup",e)));const n=localStorage.getItem(sf);this.selectedShell=n?Cc(n):wc,this.updateMenuLabelsForSelectedRepository();const r=localStorage.getItem(ef);this.imageDiffType=null===r?Jm:parseInt(r),this.hideWhitespaceInChangesDiff=At(tf,!1),this.hideWhitespaceInHistoryDiff=At(nf,!1),this.hideWhitespaceInPullRequestDiff=At(rf,!1),this.commitSpellcheckEnabled=At(of,!0),this.showSideBySideDiff=ga(),this.selectedTheme=pa(),da(this.selectedTheme),this.currentTheme=await ha(),Cl.onThemeChanged((e=>{this.currentTheme=e,this.emitUpdate()})),this.lastThankYou=function(e){const t=localStorage.getItem("version-and-users-of-last-thank-you");if(null!==t)try{return JSON.parse(t)}catch(e){return}}(),this.pullRequestSuggestedNextAction=Bt(lf,va)??Ca,this.emitUpdateNow(),this.accountsStore.refresh()}updateResizableConstraints(){let e=window.innerWidth;const t=e-460;this.sidebarWidth=uf(this.sidebarWidth,220,t),e-=lc(this.sidebarWidth);const n=e-150;this.commitSummaryWidth=uf(this.commitSummaryWidth,100,n),this.stashedFilesWidth=uf(this.stashedFilesWidth,100,n)}updatePullRequestResizableConstraints(){this.pullRequestFileListWidth=uf(this.pullRequestFileListWidth,100,680)}updateSelectedExternalEditor(e){return this.selectedExternalEditor=e,this._resolveCurrentEditor()}async lookupSelectedExternalEditor(){const e=(await Ll()).map((e=>e.editor)),t=localStorage.getItem(Zm);if(t&&e.includes(t))return t;if(e.length){const t=e[0];return localStorage.setItem(Zm,t),t}return null}updateMenuLabelsForSelectedRepository(){const{selectedState:e}=this.getState();null!==e&&e.type===qe.Repository?this.updateMenuItemLabels(e.state):this.updateMenuItemLabels(null)}updateMenuItemLabels(e){const{selectedShell:t,selectedRepository:n,selectedExternalEditor:r,askForConfirmationOnRepositoryRemoval:i,askForConfirmationOnForcePush:o}=this,s={selectedShell:t,selectedExternalEditor:r,askForConfirmationOnRepositoryRemoval:i,askForConfirmationOnForcePush:o};if(null===e)return void te(s);const{changesState:a,branchesState:l,aheadBehind:c}=e,{currentPullRequest:u}=l;let h;n instanceof Ir&&(h=rc(n,l)?.name??void 0);const p=pc(l,c)!==cc.NotAvailable,d=a.selection.kind===Ve.Stash,m=null!==a.stashEntry;te({...s,contributionTargetDefaultBranch:h,isForcePushForCurrentRepository:p,isStashedChangesVisible:d,hasCurrentPullRequest:null!==u,askForConfirmationWhenStashingAllChanges:m})}updateRepositorySelectionAfterRepositoriesChanged(){const e=this.selectedRepository;let t=this.selectedRepository;if(e&&(t=this.repositories.find((t=>t.constructor===e.constructor&&t.id===e.id))||null),null===t&&this.repositories.length>0){const e=It(Bm,0);e>0&&(t=this.repositories.find((t=>t.id===e))||null),t||(t=this.repositories[0])}(e&&t&&e.hash!==t.hash||e&&!t||!e&&t)&&(this._selectRepository(t),this.emitUpdate())}async _loadStatus(e,t=!1){const n=this.gitStoreCache.get(e),r=await n.loadStatus();return null===r?null:(this.repositoryStateCache.updateChangesState(e,(e=>function(e,t,n){const r=new Map;e.workingDirectory.files.forEach((e=>r.set(e.id,e)));const i=t.workingDirectory.files.map((e=>{const t=r.get(e.id);return t?n&&t.selection.getSelectionType()===To.Partial?e.withIncludeAll(!1):e.withSelection(t.selection):e})).sort(((e,t)=>sr(e.path,t.path))),o=new Set(i.map((e=>e.id))),s=Go.fromFiles(i),a=e.selection.kind;if(e.selection.kind===Ve.WorkingDirectory){let t=e.selection.selectedFileIDs.filter((e=>o.has(e)));0===t.length&&i.length>0&&(t=[i[0].id]);const n=1===t.length&&1===e.selection.selectedFileIDs.length&&e.selection.selectedFileIDs[0]===t[0]?e.selection.diff:null;return{workingDirectory:s,selection:{kind:Ve.WorkingDirectory,selectedFileIDs:t,diff:n}}}return e.selection.kind===Ve.Stash?{workingDirectory:s,selection:e.selection}:et(e.selection,`Unknown selection kind ${a}`)}(e,r,t))),this.repositoryStateCache.updateChangesState(e,(e=>({conflictState:mu(e,r,this.statsStore)}))),this.updateMultiCommitOperationConflictsIfFound(e),await this.initializeMultiCommitOperationIfConflictsFound(e,r),this.selectedRepository===e&&this._triggerConflictsFlow(e,r),this.emitUpdate(),this.updateChangesWorkingDirectoryDiff(e),r)}async initializeMultiCommitOperationIfConflictsFound(e,t){const n=this.repositoryStateCache.get(e),{changesState:{conflictState:r},multiCommitOperationState:i,branchesState:o}=n;if(null===r)return void this.clearConflictsFlowVisuals(n);if(null!==i)return;let s,a,l=null,c=[],u="";if(o.tip.kind===Ar.Valid&&(l=o.tip.branch,u=l.tip.sha),Xe(r))s={kind:"Merge",isSquash:t.squashMsgFound,sourceBranch:null},u=null!==l?l.tip.sha:null;else if(Qe(r)){const t=await Qp(e),n=await Xp(e);if(null===t||null===n)return;u=n.originalBranchTip,c=t.commits,a=t.progress,s={kind:"Rebase",sourceBranch:null,commits:c,currentTip:n.baseBranchTip};const r=await Gc(e,n.originalBranchTip);null!==r&&(l=new rl(n.targetBranch,null,r,Ja.Local,`refs/heads/${n.targetBranch}`))}else if(Ze(r)){const t=await hd(e);if(null===t)return;u=null,c=t.commits,a=t.progress,s={kind:"Cherry-pick",sourceBranch:null,branchCreated:!1,commits:c},this.repositoryStateCache.updateMultiCommitOperationUndoState(e,(()=>({undoSha:t.targetBranchUndoSha,branchName:""})))}else et(0,"Unsupported conflict kind");this._initializeMultiCommitOperation(e,s,l,c,u,!1),void 0!==a&&this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({progress:a})))}updateMultiCommitOperationConflictsIfFound(e){const t=this.repositoryStateCache.get(e),{changesState:n,multiCommitOperationState:r}=this.repositoryStateCache.get(e),{conflictState:i}=n;if(null===i||null===r)return void this.clearConflictsFlowVisuals(t);const{step:o,operationDetail:s}=r;if("ShowConflicts"!==o.kind)return;const{manualResolutions:a}=i;if(this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({step:{...o,manualResolutions:a}}))),Qe(i)){const{currentTip:t}=i;this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({operationDetail:{...s,currentTip:t}})))}}async _triggerConflictsFlow(e,t){const n=this.repositoryStateCache.get(e),{changesState:{conflictState:r},multiCommitOperationState:i}=n;if(null===r)return void this.clearConflictsFlowVisuals(n);if(null===i)return;if(null!==this.currentBanner&&this.currentBanner.type===vu.ConflictsFound||function(e,t){return e&&null!==t&&bd.includes(t.step.kind)}(this.popupManager.areTherePopupsOfType(nl.MultiCommitOperation),i))return;const{manualResolutions:o}=r;let s,a;Xe(r)?(a=await this.getMergeConflictsTheirBranch(e,t.squashMsgFound,i),s=r.currentBranch):Qe(r)?(a=r.targetBranch,s=r.baseBranch):Ze(r)?(null!==i&&"Cherry-pick"===i.operationDetail.kind&&null!==i.operationDetail.sourceBranch&&(a=i.operationDetail.sourceBranch.name),s=r.targetBranchName):et(0,"Unsupported conflict kind"),this.statsStore.increment("mergeConflictFromExplicitMergeCount"),this._setMultiCommitOperationStep(e,{kind:"ShowConflicts",conflictState:{kind:"multiCommitOperation",manualResolutions:o,ourBranch:s,theirBranch:a}}),this._showPopup({type:nl.MultiCommitOperation,repository:e})}async getMergeConflictsTheirBranch(e,t,n){let r;if(null!==n&&"Merge"===n.operationDetail.kind&&null!==n.operationDetail.sourceBranch&&(r=n.operationDetail.sourceBranch.name),void 0===r&&!t){const t=await async function(e,t){const n=["branch","--points-at=MERGE_HEAD","--format=%(refname:short)"],{stdout:r,exitCode:i}=await qw(n,e.path,"branchPointedAt",{successExitCodes:new Set([0,1,129])});return 1===i||129===i?null:r.split("\n").slice(0,-1)}(e);if(null===t)return;r=1===t.length?t[0]:void 0}return r}clearConflictsFlowVisuals(e){const{multiCommitOperationState:t}=e;(function(e,t){return null!==e&&null!==t&&(e.type===nl.MultiCommitOperation&&("ChooseBranch"===t.step.kind||"WarnForcePush"===t.step.kind||"ShowProgress"===t.step.kind))})(this.popupManager.currentPopup,t)||(this._closePopup(nl.MultiCommitOperation),this._clearBanner(vu.ConflictsFound),this._clearBanner(vu.MergeConflictsFound))}async _changeRepositorySection(e,t,n=!1){if(this.repositoryStateCache.update(e,(e=>(e.selectedSection!==t&&this.statsStore.increment("repositoryViewChangeCount"),{selectedSection:t}))),this.emitUpdate(),t===Ge.History?await this.refreshHistorySection(e):t===Ge.Changes&&await this.refreshChangesSection(e,{includingStatus:!0,clearPartialState:!1}),n){const e=document.getElementById("repository-sidebar")?.querySelector(".tab-bar-item.selected");e?.focus()}}async _selectWorkingDirectoryFiles(e,t){this.repositoryStateCache.updateChangesState(e,(e=>function(e,t){let n;if(void 0===t){if(e.selection.kind===Ve.WorkingDirectory)return{selection:e.selection};n=e.workingDirectory.files.length>0?[e.workingDirectory.files[0].id]:new Array}else n=t.map((e=>e.id));return{selection:{kind:Ve.WorkingDirectory,selectedFileIDs:n,diff:null}}}(e,t))),this.updateMenuLabelsForSelectedRepository(),this.emitUpdate(),this.updateChangesWorkingDirectoryDiff(e)}async updateChangesWorkingDirectoryDiff(e){const t=this.repositoryStateCache.get(e).changesState;if(t.selection.kind!==Ve.WorkingDirectory)return;const n=t.selection,r=n.selectedFileIDs;if(1!==r.length)return void(null!==n.diff&&(this.repositoryStateCache.updateChangesState(e,(()=>({selection:{...n,diff:null}}))),this.emitUpdate()));const i=r[0],o=t.workingDirectory.findFileWithID(i);if(null===o)return;const s=await Pp(e,o,this.hideWhitespaceInChangesDiff),a=this.repositoryStateCache.get(e).changesState;if(a.selection.kind!==Ve.WorkingDirectory||!js(a.selection.selectedFileIDs,r))return;const l=a.selection.selectedFileIDs[0];if(l!==i)return;const c=a.workingDirectory.findFileWithID(l);if(null===c)return;const u=new Set;s.kind!==Ro.Text&&s.kind!==Ro.LargeText||s.hunks.forEach((e=>{e.lines.forEach(((t,n)=>{t.isIncludeableLine()&&u.add(e.unifiedDiffStart+n)}))}));const h=c.selection.withSelectableLines(u),p=c.withSelection(h),d=a.workingDirectory.files.map((e=>e.id===p.id?p:e)),m=Go.fromFiles(d),f={...a.selection,diff:s};this.repositoryStateCache.updateChangesState(e,(()=>({selection:f,workingDirectory:m}))),this.emitUpdate()}_hideStashedChanges(e){const{changesState:t}=this.repositoryStateCache.get(e);t.selection.kind===Ve.Stash&&(this.repositoryStateCache.updateChangesState(e,(e=>{const t=e.workingDirectory.files.filter((e=>e.selection.getSelectionType()!==To.None)).map((e=>e.id));return{selection:{kind:Ve.WorkingDirectory,diff:null,selectedFileIDs:t}}})),this.emitUpdate(),this.updateMenuLabelsForSelectedRepository())}async _selectStashedFile(e,t){this.repositoryStateCache.update(e,(()=>({selectedSection:Ge.Changes}))),this.repositoryStateCache.updateChangesState(e,(e=>{let n=null;const{stashEntry:r,selection:i}=e,o=i.kind===Ve.Stash?i.selectedStashedFile:null,s=null!==r&&r.files.kind===Fc.Loaded?r.files.files:[];return void 0===t?n=null!==o?s.find((e=>e.id===o.id))||s[0]||null:s[0]||null:null!==t&&(n=s.find((e=>e.id===t.id))||null),{selection:{kind:Ve.Stash,selectedStashedFile:n,selectedStashedFileDiff:null}}})),this.updateMenuLabelsForSelectedRepository(),this.emitUpdate(),this.updateChangesStashDiff(e),this.hasUserViewedStash||(this.statsStore.increment("stashViewedAfterCheckoutCount"),this.hasUserViewedStash=!0)}async updateChangesStashDiff(e){const t=this.repositoryStateCache.get(e).changesState,n=t.selection;if(n.kind!==Ve.Stash)return;const r=t.stashEntry;if(null===r)return;let i=n.selectedStashedFile;if(null===i&&r.files.kind===Fc.Loaded&&r.files.files.length>0&&(i=r.files.files[0]),null===i)return this.repositoryStateCache.updateChangesState(e,(()=>({selection:{kind:Ve.Stash,selectedStashedFile:null,selectedStashedFileDiff:null}}))),void this.emitUpdate();const o=await Tp(e,i,i.commitish),s=this.repositoryStateCache.get(e).changesState;s.selection.kind===Ve.Stash&&s.selection.selectedStashedFile===n.selectedStashedFile&&(this.repositoryStateCache.updateChangesState(e,(()=>({selection:{kind:Ve.Stash,selectedStashedFile:i,selectedStashedFileDiff:o}}))),this.emitUpdate())}async _commitIncludedChanges(e,t){const n=this.repositoryStateCache.get(e),r=n.changesState.workingDirectory.files.filter((e=>e.selection.getSelectionType()!==To.None)),i=this.gitStoreCache.get(e);return this.withIsCommitting(e,(async()=>{const o=await i.performFailableOperation((async()=>{const n=await Ul(e,t);return dv(e,n,r,t.amend)}));return void 0!==o&&(await this._recordCommitStats(i,e,n,t,r,!0===t.amend),this.repositoryStateCache.update(e,(()=>({commitToAmend:null}))),await this.refreshChangesSection(e,{includingStatus:!0,clearPartialState:!0}),this._refreshRepositoryAfterCommit(e,o,n.commitToAmend)),void 0!==o}))}async _refreshRepositoryAfterCommit(e,t,n){await this._refreshRepository(e);const r=n?.sha;if(void 0!==r&&t!==r){const t=this.repositoryStateCache.get(e).branchesState.tip;t.kind===Ar.Valid&&this._addBranchToForcePushList(e,t,r)}}async _recordCommitStats(e,t,n,r,i,o){this.statsStore.recordCommit();const s=i.some((e=>e.selection.getSelectionType()===To.Partial));s&&this.statsStore.increment("partialCommits"),o&&this.statsStore.recordAmendCommitSuccessful(i.length>0);const{trailers:a}=r;void 0!==a&&a.some(dl)&&this.statsStore.increment("coAuthoredCommits");const l=Gl(this.accounts,t);if(null!==t.gitHubRepository){if(null!==l){l.endpoint===Qn()?this.statsStore.increment("dotcomCommits"):this.statsStore.increment("enterpriseCommits");const{commitAuthor:e}=n;null!==e&&(Ch(l,e.email)||this.statsStore.increment("unattributedCommits"))}if(await this.repositoriesStore.hasBranchProtectionsConfigured(t.gitHubRepository)&&this.statsStore.increment("commitsToRepositoryWithBranchProtections"),null!==ku(e.tip,e.currentRemote,t.gitHubRepository)){const{changesState:e}=this.repositoryStateCache.get(t);e.currentBranchProtected&&this.statsStore.increment("commitsToProtectedBranch")}null===t.gitHubRepository||xr(t.gitHubRepository)||(this.statsStore.increment("commitsToRepositoryWithoutWriteAccess"),this.statsStore.recordRepositoryCommitedInWithoutWriteAccess(t.gitHubRepository.dbID))}}_changeFileIncluded(e,t,n){const r=n?t.selection.withSelectAll():t.selection.withSelectNone();return this.updateWorkingDirectoryFileSelection(e,t,r),Promise.resolve()}_changeFileLineSelection(e,t,n){return this.updateWorkingDirectoryFileSelection(e,t,n),Promise.resolve()}updateWorkingDirectoryFileSelection(e,t,n){this.repositoryStateCache.updateChangesState(e,(e=>{const r=e.workingDirectory.files.map((e=>e.id===t.id?e.withSelection(n):e));return{workingDirectory:Go.fromFiles(r)}})),this.emitUpdate()}_changeIncludeAllFiles(e,t){return this.repositoryStateCache.updateChangesState(e,(e=>({workingDirectory:e.workingDirectory.withIncludeAllFiles(t)}))),this.emitUpdate(),Promise.resolve()}async _refreshOrRecoverRepository(e){if(!e.missing)return this._refreshRepository(e);{const t=await this.recoverMissingRepository(e);if(!t.missing)return this._refreshRepository(t)}}async recoverMissingRepository(e){return e.missing&&await S(e.path)&&"regular"===(await wv(e.path)).kind&&null!==await this._loadStatus(e)?await this._updateRepositoryMissing(e,!1):e}async _refreshRepository(e){if(e.missing)return;if(!await S(e.path))return void this._updateRepositoryMissing(e,!0);const t=this.repositoryStateCache.get(e),n=this.gitStoreCache.get(e),r=await this._loadStatus(e);if(this.updateSidebarIndicator(e,r),null===r)return void await this._updateRepositoryMissing(e,!0);await n.loadRemotes(),await n.loadBranches();const i=t.selectedSection;let o;if(i===Ge.History)o=this.refreshHistorySection(e);else{if(i!==Ge.Changes)return et(0,`Unknown section: ${i}`);o=this.refreshChangesSection(e,{includingStatus:!1,clearPartialState:!1})}await Promise.all([n.updateLastFetched(),n.loadStashEntries(),this._refreshAuthor(e),o]),await n.refreshTags(),this.updateStashEntryCountMetric(e,n.desktopStashEntryCount,n.stashEntryCount),this.updateCurrentPullRequest(e);const s=this.repositoryStateCache.get(e);this.updateMenuItemLabels(s),this._initializeCompare(e),this.updateCurrentTutorialStep(e)}async updateStashEntryCountMetric(e,t,n){const r=await this.repositoriesStore.getLastStashCheckDate(e),i=Ct(-24,"hours");if(null==r||i>r){await this.repositoriesStore.updateLastStashCheckDate(e);const r=n-t;this.statsStore.addStashEntriesCreatedOutsideDesktop(r)}}async updateSidebarIndicator(e,t){const n=this.localRepositoryStateLookup;e.missing?n.delete(e.id):null!==t?n.set(e.id,{aheadBehind:t.branchAheadBehind||null,changedFilesCount:t.workingDirectory.files.length}):n.delete(e.id)}refreshIndicatorForRepository=async e=>{const t=this.localRepositoryStateLookup;if(e.missing)return void t.delete(e.id);if(!await S(e.path))return void t.delete(e.id);const n=this.gitStoreCache.get(e),r=await n.loadStatus();if(null===r)return void t.delete(e.id);this.updateSidebarIndicator(e,r),this.emitUpdate();const i=await async function(e,t,n){const r=Gl(e,n);if(null==r)return null;await t.loadRemotes();const{currentRemote:i}=t,o=Vn.fromAccount(r);if(null!==i){const t=ar(e,i.url);if(null!==t){const{owner:e,name:n}=t,r=await o.fetchRepository(e,n);if(null!==r)return new Date(r.pushed_at)}}if(null!==n.gitHubRepository){const{owner:e,name:t}=n.gitHubRepository,r=await o.fetchRepository(e.login,t);if(null!==r)return new Date(r.pushed_at)}return null}(this.accounts,n,e);if(await this.shouldBackgroundFetch(e,i)){const n=await this.fetchForRepositoryIndicator(e),r=t.get(e.id);t.set(e.id,{aheadBehind:n,changedFilesCount:r?.changedFilesCount??0}),this.emitUpdate()}};getRepositoriesForIndicatorRefresh=()=>this.repositories.filter((e=>e!==this.selectedRepository));fetchForRepositoryIndicator(e){return this.withAuthenticatingUser(e,(async(e,t)=>{const n=this.gitStoreCache.get(e);return await this.withPushPullFetch(e,(()=>n.fetch(t,!0,(t=>this.updatePushPullFetchProgress(e,t))))),this.updatePushPullFetchProgress(e,null),n.aheadBehind}))}_setRepositoryIndicatorsEnabled(e){this.repositoryIndicatorsEnabled!==e&&(Pt(af,e),this.repositoryIndicatorsEnabled=e,e?this.repositoryIndicatorUpdater.start():this.repositoryIndicatorUpdater.stop(),this.emitUpdate())}_setCommitSpellcheckEnabled(e){this.commitSpellcheckEnabled!==e&&(Pt(of,e),this.commitSpellcheckEnabled=e,this.emitUpdate())}_setUseWindowsOpenSSH(e){Pt(fd,e),this.useWindowsOpenSSH=e,this.emitUpdate()}_setShowCommitLengthWarning(e){Pt(qm,e),this.showCommitLengthWarning=e,this.emitUpdate()}_setNotificationsEnabled(e){this.notificationsStore.setNotificationsEnabled(e),this.emitUpdate()}async refreshChangesSection(e,t){t.includingStatus&&await this._loadStatus(e,t.clearPartialState);const n=this.gitStoreCache.get(e),r=this.repositoryStateCache.get(e);if(r.branchesState.tip.kind===Ar.Valid){const e=r.branchesState.tip.branch;await n.loadLocalCommits(e)}else r.branchesState.tip.kind===Ar.Unborn&&await n.loadLocalCommits(null)}async refreshHistorySection(e){const t=this.gitStoreCache.get(e),n=this.repositoryStateCache.get(e),r=n.branchesState.tip;return r.kind===Ar.Valid&&await t.loadLocalCommits(r.branch),this.updateOrSelectFirstCommit(e,n.compareState.commitSHAs)}async _refreshAuthor(e){const t=this.gitStoreCache.get(e),n=await t.performFailableOperation((()=>vv(e)))||null;this.repositoryStateCache.update(e,(()=>({commitAuthor:n}))),this.emitUpdate()}async _showPopup(e){this._closeFoldout(je.AppMenu),this.popupManager.addPopup(e),this.emitUpdate()}_closePopup(e){const t=this.popupManager.currentPopup;if(null!==t){if(void 0===e)this.popupManager.removePopup(t);else{if(t.type!==e)return;t.type===nl.CloneRepository&&this._completeOpenInDesktop((()=>Promise.resolve(null))),this.popupManager.removePopupByType(e)}this.emitUpdate()}}_closePopupById(e){null!==this.popupManager.currentPopup&&(this.popupManager.removePopupById(e),this.emitUpdate())}async _showFoldout(e){this.currentFoldout=e,this.emitUpdate(),e.type===je.Repository&&this.repositoryIndicatorsEnabled&&this.repositoryIndicatorUpdater.start()}async _closeCurrentFoldout(){null!=this.currentFoldout&&(this.currentFoldout=null,this.emitUpdate())}async _closeFoldout(e){null!=this.currentFoldout&&(void 0!==e&&this.currentFoldout.type!==e||(this.currentFoldout=null,this.emitUpdate()))}async _createBranch(e,t,n,r=!1,i=!0){const o=this.gitStoreCache.get(e),s=await o.createBranch(t,n,r);return void 0!==s&&i&&await this._checkoutBranch(e,s),s}async _createTag(e,t,n){const r=this.gitStoreCache.get(e);await r.createTag(t,n)}async _deleteTag(e,t){const n=this.gitStoreCache.get(e);await n.deleteTag(t)}updateCheckoutProgress(e,t){this.repositoryStateCache.update(e,(()=>({checkoutProgress:t}))),this.selectedRepository instanceof Ir&&this.selectedRepository.id===e.id&&this.emitUpdate()}async _checkoutBranch(e,t,n){const r=this.repositoryStateCache.get(e),{changesState:i,branchesState:o}=r,{currentBranchProtected:s,stashEntry:a}=i,{tip:l}=o,c=i.workingDirectory.files.length>0;if(l.kind===Ar.Valid&&l.branch.name===t.name)return e;let u=n??this.uncommittedChangesStrategy;if(void 0===n&&u===Su.StashOnCurrentBranch&&c&&null!==a){const n=nl.ConfirmOverwriteStash;return this._showPopup({type:n,repository:e,branchToCheckout:t}),e}if((l.kind!==Ar.Valid||s)&&(u=Su.MoveToNewBranch),u===Su.AskForConfirmation&&c){const n=nl.StashAndSwitchBranch;return this._showPopup({type:n,branchToCheckout:t,repository:e}),e}return this.withAuthenticatingUser(e,((e,n)=>this.checkoutImplementation(e,t,n,u).then((()=>this.onSuccessfulCheckout(e,t))).catch((n=>this.emitError(new lt(n,e,t)))).then((()=>this.refreshAfterCheckout(e,t.name))).finally((()=>this.updateCheckoutProgress(e,null)))))}checkoutImplementation(e,t,n,r){return r===Su.StashOnCurrentBranch?this.checkoutAndLeaveChanges(e,t,n):r===Su.MoveToNewBranch?this.checkoutAndBringChanges(e,t,n):this.checkoutIgnoringChanges(e,t,n)}async checkoutIgnoringChanges(e,t,n){await $p(e,n,t,(t=>{this.updateCheckoutProgress(e,t)}))}async checkoutAndLeaveChanges(e,t,n){const r=this.repositoryStateCache.get(e),{workingDirectory:i}=r.changesState,{tip:o}=r.branchesState;return o.kind===Ar.Valid&&i.files.length>0&&(await this.createStashAndDropPreviousEntry(e,o.branch),this.statsStore.increment("stashCreatedOnCurrentBranchCount")),this.checkoutIgnoringChanges(e,t,n)}async checkoutAndBringChanges(e,t,n){try{await this.checkoutIgnoringChanges(e,t,n)}catch(r){if(!cf(r))throw r;const i=await this.createStashEntry(e,t)?await Zc(e,t):null;if(null===i)throw r;await this.checkoutIgnoringChanges(e,t,n),await nu(e,i.stashSha),this.statsStore.increment("changesTakenToNewBranchCount")}}async onSuccessfulCheckout(e,t){const n=this.repositoryStateCache.get(e),{stashEntry:r}=n.changesState,{defaultBranch:i}=n.branchesState;this.clearBranchProtectionState(e),await this._selectWorkingDirectoryFiles(e),this._initializeCompare(e,{kind:Ke.History}),null!==i&&t.name!==i.name&&this.statsStore.recordNonDefaultBranchCheckout(),null===r||this.hasUserViewedStash||this.statsStore.increment("stashNotViewedAfterCheckoutCount"),this.hasUserViewedStash=!1}async refreshAfterCheckout(e,t){return this.updateCheckoutProgress(e,{kind:"checkout",title:"刷新存储库",description:"Checking out",value:1,target:t}),await this._refreshRepository(e),e}async _checkoutCommit(e,t){const n=this.repositoryStateCache.get(e),{branchesState:r}=n,{tip:i}=r;return i.kind===Ar.Valid&&i.branch.tip.sha===t.sha||i.kind===Ar.Detached&&i.currentSha===t.sha?e:this.withAuthenticatingUser(e,((e,n)=>this.checkoutCommitDefaultBehaviour(e,t,n).catch((e=>this.emitError(new Error(e)))).then((()=>this.refreshAfterCheckout(e,wl(t.sha)))).finally((()=>this.updateCheckoutProgress(e,null)))))}async checkoutCommitDefaultBehaviour(e,t,n){await async function(e,t,n,r){const i=await Wp(e,t,"Checking out Commit",wl(n.sha),r),o=[...Hp(r),n.sha];return await qw(o,e.path,"checkoutCommit",i),!0}(e,n,t,(t=>{this.updateCheckoutProgress(e,t)}))}async _createStashForCurrentBranch(e,t){const n=this.repositoryStateCache.get(e),r=n.branchesState.tip,i=r.kind===Ar.Valid?r.branch:null,o=null!==n.changesState.stashEntry;return null!==i&&(t&&o?(this._showPopup({type:nl.ConfirmOverwriteStash,branchToCheckout:null,repository:e}),!1):!!await this.createStashAndDropPreviousEntry(e,i)&&(this.statsStore.increment("stashCreatedOnCurrentBranchCount"),await this._refreshRepository(e),!0))}async repositoryWithRefreshedGitHubRepository(e){const t=this.repositoriesStore,n=await this.matchGitHubRepository(e);if(!n)return e;const{account:r,owner:i,name:s}=n,{endpoint:a}=r,l=Vn.fromAccount(r),c=await l.fetchRepository(i,s);if(null===c){if(a!==e.gitHubRepository?.endpoint){const r=await t.upsertGitHubRepositoryFromMatch(n);return t.setGitHubRepository(e,r)}return e}if(e.gitHubRepository){const t=this.gitStoreCache.get(e);await async function(e,t,n){if(null===e.defaultRemote)return;const r=e.defaultRemote.url,i=n.clone_url,s=ur(i,e.defaultRemote),a=o.parse(r),l=o.parse(i),c=null!==a.protocol&&null!==l.protocol&&a.protocol===l.protocol,u=e.defaultRemote&&ur(t.cloneURL,e.defaultRemote);c&&u&&!s&&await e.setRemoteURL(e.defaultRemote.name,i)}(t,e.gitHubRepository,c)}const u=await t.upsertGitHubRepository(a,c),h=await t.setGitHubRepository(e,u);return await this.refreshBranchProtectionState(h),h}async updateBranchProtectionsFromAPI(e){if(null===e.gitHubRepository)return;const{owner:t,name:n}=e.gitHubRepository,r=Zn(this.accounts,e.gitHubRepository.endpoint);if(null===r)return;const i=Vn.fromAccount(r),o=await i.fetchProtectedBranches(t.login,n);await this.repositoriesStore.updateBranchProtections(e.gitHubRepository,o)}async matchGitHubRepository(e){const t=this.gitStoreCache.get(e);t.defaultRemote||await t.loadRemotes();const n=t.defaultRemote;return null!==n?ar(this.accounts,n.url):null}_pushError(e){return this.popupManager.addErrorPopup(e),this.emitUpdate(),Promise.resolve()}async _changeRepositoryAlias(e,t){return this.repositoriesStore.updateRepositoryAlias(e,t)}async _renameBranch(e,t,n){const r=this.gitStoreCache.get(e);return await r.performFailableOperation((async()=>{await async function(e,t,n){await qw(["branch","-m",t.nameWithoutRemote,n],e.path,"renameBranch")}(e,t,n);{const i=r.desktopStashEntries.get(t.name);i&&await async function(e,{stashSha:t,parents:n,tree:r},i){const o=`On ${i}: ${Jc(i)}`,s=n.flatMap((e=>["-p",e])),{stdout:a}=await qw(["commit-tree",...s,"-m",o,"--no-gpg-sign",r],e.path,"moveStashEntryToBranch");await qw(["stash","store","-m",o,a.trim()],e.path,"moveStashEntryToBranch"),await tu(e,t)}(e,i,n)}})),this._refreshRepository(e)}async _deleteBranch(e,t,n,r){return this.withAuthenticatingUser(e,(async(i,o)=>{const s=this.gitStoreCache.get(i);if(t.type===Ja.Remote){const{remoteName:e,tip:n,nameWithoutRemote:r}=t;if(null===e)throw new Error(`Could not determine remote name from: ${t.ref}.`);return await s.performFailableOperation((()=>uv(i,o,e,r))),log.info(`Deleted branch ${t.upstreamWithoutRemote} (was ${n.sha})`),this._refreshRepository(i)}const a=r??this.getBranchToCheckoutAfterDelete(t,i);return null!==a&&await s.performFailableOperation((()=>$p(i,o,a))),await s.performFailableOperation((()=>this.deleteLocalBranchAndUpstreamBranch(e,t,o,n))),this._refreshRepository(i)}))}async deleteLocalBranchAndUpstreamBranch(e,t,n,r){await cv(e,t.name),!0===r&&null!==t.upstreamRemoteName&&null!==t.upstreamWithoutRemote&&await uv(e,n,t.upstreamRemoteName,t.upstreamWithoutRemote)}getBranchToCheckoutAfterDelete(e,t){const{branchesState:n}=this.repositoryStateCache.get(t),r=n.tip,i=r.kind===Ar.Valid?r.branch:null;if(null!==i&&e.name!==i.name)return null;const o=n.defaultBranch??n.recentBranches.find((t=>t.name!==e.name));if(void 0===o)throw new Error("It's not possible to delete the only existing branch in a repository.");return o}updatePushPullFetchProgress(e,t){this.repositoryStateCache.update(e,(()=>({pushPullFetchProgress:t}))),this.selectedRepository===e&&this.emitUpdate()}async _push(e,t){return this.withAuthenticatingUser(e,((e,n)=>this.performPush(e,n,t)))}async performPush(e,t,n){const r=this.repositoryStateCache.get(e),{remote:i}=r;if(null!==i)return this.withPushPullFetch(e,(async()=>{const{tip:o}=r.branchesState;if(o.kind===Ar.Unborn)throw new Error("The current branch is unborn.");if(o.kind===Ar.Detached)throw new Error("The current repository is in a detached HEAD state.");if(o.kind===Ar.Valid){const{branch:r}=o,s=r.upstreamRemoteName||i.name,a=`正在推送到 ${s}`;this.updatePushPullFetchProgress(e,{kind:"push",title:a,value:0,remote:s,branch:r.name});let l=2.5,c=1;const u=.1,h=1/(l+c)*(1-u);l*=h,c*=h;const p={type:ot.Push,repository:e},d={name:s,url:i.url};d.name!==i.name&&iC("remoteNameMismatch",new Error("The current remote name differs from the branch remote"));const m=this.gitStoreCache.get(e);await m.performFailableOperation((async()=>{await async function(e,t,n,r,i,o,s={forceWithLease:!1},a){const l=[...Yw(),"push",n.name,i?`${r}:${i}`:r];null!==o&&l.push(...o),i?!0===s.forceWithLease&&l.push("--force-with-lease"):l.push("--set-upstream");const c=new Set(sh);c.add(Ua.ko.ProtectedBranchForcePush);let u={env:await uh(t,n.url),expectedErrors:c};if(a){l.push("--progress");const e=`正在推送到 ${n.name}`,t="push";u=await nh({...u,trackLFSProgress:!0},new $u,(i=>{const o="progress"===i.kind?i.details.text:i.text,s=i.percent;a({kind:t,title:e,description:o,value:s,remote:n.name,branch:r})})),a({kind:"push",title:e,value:0,remote:n.name,branch:r})}const h=await qw(l,e.path,"push",u);if(h.gitErrorDescription)throw new zw(h,l)}(e,t,d,r.name,r.upstreamWithoutRemote,m.tagsToPush,n,(t=>{this.updatePushPullFetchProgress(e,{...t,title:a,value:l*t.value})})),m.clearTagsToPush(),await m.fetchRemotes(t,[d],!1,(t=>{this.updatePushPullFetchProgress(e,{...t,value:l+t.value*c})}));const i="刷新存储库",o=l+c;this.updatePushPullFetchProgress(e,{kind:"generic",title:i,description:"快进式合并分支",value:o}),await this.fastForwardBranches(e),this.updatePushPullFetchProgress(e,{kind:"generic",title:i,value:o+.5*u}),await this.refreshBranchProtectionState(e),await this._refreshRepository(e)}),{retryAction:p}),this.updatePushPullFetchProgress(e,null),this.updateMenuLabelsForSelectedRepository(),this.statsStore.recordPush(Gl(this.accounts,e),n)}}));this._showPopup({type:nl.PublishRepository,repository:e})}async withIsCommitting(e,t){if(this.repositoryStateCache.get(e).isCommitting)return!1;this.repositoryStateCache.update(e,(()=>({isCommitting:!0}))),this.emitUpdate();try{return await t()}finally{this.repositoryStateCache.update(e,(()=>({isCommitting:!1}))),this.emitUpdate()}}async withPushPullFetch(e,t){if(!this.repositoryStateCache.get(e).isPushPullFetchInProgress){this.repositoryStateCache.update(e,(()=>({isPushPullFetchInProgress:!0}))),this.emitUpdate();try{await t()}finally{this.repositoryStateCache.update(e,(()=>({isPushPullFetchInProgress:!1}))),this.emitUpdate()}}}async _pull(e){return this.withAuthenticatingUser(e,((e,t)=>this.performPull(e,t)))}async performPull(e,t){return this.withPushPullFetch(e,(async()=>{const n=this.gitStoreCache.get(e),r=n.currentRemote;if(!r)throw new Error("The repository has no remotes.");const i=this.repositoryStateCache.get(e).branchesState.tip;if(i.kind===Ar.Unborn)throw new Error("The current branch is unborn.");if(i.kind===Ar.Detached)throw new Error("The current repository is in a detached HEAD state.");if(i.kind===Ar.Valid){let o,s=null;null!==i.branch.upstream&&(s=await zh(e,i.branch.name,i.branch.upstream),o={kind:"pull",theirBranch:i.branch.upstream,currentBranch:i.branch.name});const a=`Pulling ${r.name}`,l="pull";this.updatePushPullFetchProgress(e,{kind:l,title:a,value:0,remote:r.name});try{let i=2,a=1;const l=.1,c=1/(i+a)*(1-l);i*=c,a*=c;const u={type:ot.Pull,repository:e};n.pullWithRebase?this.statsStore.increment("pullWithRebaseCount"):this.statsStore.increment("pullWithDefaultSettingCount"),await n.performFailableOperation((()=>async function(e,t,n,r){let i={env:await uh(t,n.url),expectedErrors:sh};if(r){const e=`Pulling ${n.name}`,t="pull";i=await nh({...i,trackLFSProgress:!0},new Gu,(i=>{if("context"===i.kind&&!i.text.startsWith("remote: Counting objects"))return;const o="progress"===i.kind?i.details.text:i.text,s=i.percent;r({kind:t,title:e,description:o,value:s,remote:n.name})})),r({kind:t,title:e,value:0,remote:n.name})}const o=await async function(e,t,n,r){const i=await async function(e){try{return null!==await il(e,"pull.ff")?[]:["--ff"]}catch(e){log.error("Couldn't read 'pull.ff' config",e)}return[]}(e),o=[...Yw(),"-c","rebase.backend=merge","pull",...i];return o.push("--recurse-submodules"),null!=r&&o.push("--progress"),o.push(t),o}(e,n.name,0,r),s=await qw(o,e.path,"pull",i);if(s.gitErrorDescription)throw new zw(s,o)}(e,t,r,(t=>{this.updatePushPullFetchProgress(e,{...t,value:t.value*i})}))),{gitContext:o,retryAction:u}),await av(e,t,r);const h=i+a,p="刷新存储库";this.updatePushPullFetchProgress(e,{kind:"generic",title:p,description:"快进式合并分支",value:h}),await this.fastForwardBranches(e),this.updatePushPullFetchProgress(e,{kind:"generic",title:p,value:h+.5*l}),s&&await n.reconcileHistory(s),await this.refreshBranchProtectionState(e),await this._refreshRepository(e)}finally{this.updatePushPullFetchProgress(e,null)}}}))}async fastForwardBranches(e){try{const t=await async function(e){const{formatArgs:t,parse:n}=Uc({fullName:"%(refname)",sha:"%(objectname)",upstream:"%(upstream)",symref:"%(symref)",head:"%(HEAD)"}),r=await qw(["for-each-ref",...t,"refs/heads","refs/remotes"],e.path,"getBranchesDifferingFromUpstream",{expectedErrors:new Set([Ua.ko.NotAGitRepository])});if(r.gitError===Ua.ko.NotAGitRepository)return[];const i=[],o=new Map;for(const e of n(r.stdout))if(!(e.symref.length>0||"*"===e.head))if(e.fullName.startsWith("refs/heads")){if(0===e.upstream.length)continue;i.push({ref:e.fullName,sha:e.sha,upstream:e.upstream})}else o.set(e.fullName,e.sha);const s=new Array;for(const e of i){const t=o.get(e.upstream);void 0!==t&&t!==e.sha&&s.push({ref:e.ref,sha:e.sha,upstreamRef:e.upstream,upstreamSha:t})}return s}(e);await async function(e,t){if(0===t.length)return;const n=t.map((e=>`${e.upstreamRef}:${e.ref}`)),r={successExitCodes:new Set([0,1]),env:{GIT_REFLOG_ACTION:"pull"},stdin:n.join("\n")};await qw(["fetch",".","--show-forced-updates","--no-write-fetch-head","--stdin"],e.path,"fastForwardBranches",r)}(e,t)}catch(e){log.error("Branch fast-forwarding failed",e)}}async _publishRepository(e,t,n,r,i,o){const s=Vn.fromAccount(i),a=await s.createRepository(o,t,n,r),l=this.gitStoreCache.get(e);return await l.performFailableOperation((()=>iv(e,"origin",a.clone_url))),await l.loadRemotes(),l.tip.kind===Ar.Valid&&await this.performPush(e,i),await l.refreshDefaultBranch(),this.repositoryWithRefreshedGitHubRepository(e)}getAccountForRemoteURL(e){const t=ar(this.accounts,e)?.account;if(void 0!==t){const n=t.token.length>0?"has token":"empty token";return log.info(`[AppStore.getAccountForRemoteURL] account found for remote: ${e} - ${t.login} (${n})`),t}const n=zl(e),r=jl(n);return null!=r?(log.info(`[AppStore.getAccountForRemoteURL] found generic credentials for '${n}' and '${r}'`),{login:r,endpoint:n}):(log.info(`[AppStore.getAccountForRemoteURL] no generic credentials found for '${e}'`),null)}_clone(e,t,n){const r=this.getAccountForRemoteURL(e),i=this.cloningRepositoriesStore.clone(e,t,{...n,account:r}),o=this.cloningRepositoriesStore.repositories.find((n=>n.url===e&&n.path===t));return i.then((e=>{e&&this.statsStore.recordCloneRepository()})),{promise:i,repository:o}}_removeCloningRepository(e){this.cloningRepositoriesStore.remove(e)}async _discardChanges(e,t,n=!0){const r=this.gitStoreCache.get(e),{askForConfirmationOnDiscardChangesPermanently:i}=this.getState();try{await r.discardChanges(t,n,i)}catch(e){return e instanceof ct||log.error("Failed discarding changes",e),void this.emitError(e)}return this._refreshRepository(e)}async _discardChangesFromSelection(e,t,n,r){const i=this.gitStoreCache.get(e);return await i.discardChangesFromSelection(t,n,r),this._refreshRepository(e)}_setRepositoryCommitToAmend(e,t){this.repositoryStateCache.update(e,(()=>({commitToAmend:t}))),this.emitUpdate()}async _undoCommit(e,t,n){const r=this.gitStoreCache.get(e),i=this.repositoryStateCache.get(e),{changesState:o}=i,s=0===o.workingDirectory.files.length;return n&&(this.confirmUndoCommit&&!s||t.isMergeCommit)?this._showPopup({type:nl.WarnLocalChangesBeforeUndo,repository:e,commit:t,isWorkingDirectoryClean:s}):(await this._changeRepositorySection(e,Ge.Changes,!0),await r.undoCommit(t),this.statsStore.recordCommitUndone(s),this._refreshRepository(e))}async _resetToCommit(e,t,n){const r=this.gitStoreCache.get(e),i=this.repositoryStateCache.get(e),{changesState:o}=i,s=0===o.workingDirectory.files.length;return n&&!s?this._showPopup({type:nl.WarningBeforeReset,repository:e,commit:t}):(await this._changeRepositorySection(e,Ge.Changes),await r.performFailableOperation((()=>pv(e,2,t.sha))),this._refreshRepository(e))}async _fetchRefspec(e,t){return this.withAuthenticatingUser(e,(async(e,n)=>{const r=this.gitStoreCache.get(e);return await r.fetchRefspec(n,t),this._refreshRepository(e)}))}_fetch(e,t){return this.withAuthenticatingUser(e,((e,n)=>this.performFetch(e,n,t)))}_fetchRemote(e,t,n){return this.withAuthenticatingUser(e,((e,r)=>this.performFetch(e,r,n,[t])))}async performFetch(e,t,n,r){await this.withPushPullFetch(e,(async()=>{const i=this.gitStoreCache.get(e);try{const o=.9,s=.1,a=n===Xt.BackgroundTask,l=t=>{this.updatePushPullFetchProgress(e,{...t,value:t.value*o})};void 0===r?await i.fetch(t,a,l):await i.fetchRemotes(t,r,a,l);const c="刷新存储库";this.updatePushPullFetchProgress(e,{kind:"generic",title:c,description:"快进式合并分支",value:o}),await this.fastForwardBranches(e),this.updatePushPullFetchProgress(e,{kind:"generic",title:c,value:o+.5*s}),await this.refreshBranchProtectionState(e),await this._refreshRepository(e)}finally{this.updatePushPullFetchProgress(e,null),n===Xt.UserInitiatedTask&&null!=e.gitHubRepository&&this._refreshIssues(e.gitHubRepository)}}))}_endWelcomeFlow(){return this.showWelcomeFlow=!1,this.emitUpdate(),Pt(ia,!0),this.statsStore.recordWelcomeWizardTerminated(),Promise.resolve()}_setCommitMessageFocus(e){this.focusCommitMessage!==e&&(this.focusCommitMessage=e,this.emitUpdate())}_setSidebarWidth(e){return this.sidebarWidth={...this.sidebarWidth,value:e},_t(Lm,e),this.updateResizableConstraints(),this.emitUpdate(),Promise.resolve()}_resetSidebarWidth(){return this.sidebarWidth={...this.sidebarWidth,value:250},localStorage.removeItem(Lm),this.updateResizableConstraints(),this.emitUpdate(),Promise.resolve()}_setCommitSummaryWidth(e){return this.commitSummaryWidth={...this.commitSummaryWidth,value:e},_t(Hm,e),this.updateResizableConstraints(),this.emitUpdate(),Promise.resolve()}_resetCommitSummaryWidth(){return this.commitSummaryWidth={...this.commitSummaryWidth,value:250},localStorage.removeItem(Hm),this.updateResizableConstraints(),this.emitUpdate(),Promise.resolve()}_setCommitMessage(e,t){return this.gitStoreCache.get(e).setCommitMessage(t)}setAppMenu(e){return this.appMenu?this.appMenu=this.appMenu.withMenu(e):this.appMenu=zr.fromMenu(e),this.emitUpdate(),Promise.resolve()}_setAppMenuState(e){return this.appMenu&&(this.appMenu=e(this.appMenu),this.emitUpdate()),Promise.resolve()}_setAccessKeyHighlightState(e){return this.highlightAccessKeys!==e&&(this.highlightAccessKeys=e,this.emitUpdate()),Promise.resolve()}async _mergeBranch(e,t,n,r=!1){const{multiCommitOperationState:i}=this.repositoryStateCache.get(e);if(null===i||"Merge"!==i.operationDetail.kind)return void log.error("[mergeBranch] - Not in merge operation state");this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({operationDetail:{...i.operationDetail,sourceBranch:t}})));const o=this.gitStoreCache.get(e);r&&this.statsStore.increment("squashMergeInvokedCount"),null!==n&&(n.kind===Cu.Clean?this.statsStore.increment("mergedWithCleanMergeHintCount"):n.kind===Cu.Conflicts?this.statsStore.increment("mergedWithConflictWarningHintCount"):n.kind===Cu.Loading&&this.statsStore.increment("mergedWithLoadingHintCount"));const s=await o.merge(t,r),{tip:a}=o;return s===Wh.Success&&a.kind===Ar.Valid?(this._setBanner({type:vu.SuccessfulMerge,ourBranch:a.branch.name,theirBranch:t.name}),r&&this.statsStore.increment("squashMergeSuccessfulCount"),this._endMultiCommitOperation(e)):s===Wh.AlreadyUpToDate&&a.kind===Ar.Valid&&(this._setBanner({type:vu.BranchAlreadyUpToDate,ourBranch:a.branch.name,theirBranch:t.name}),this._endMultiCommitOperation(e)),this._refreshRepository(e)}_setConflictsResolved(e){const{multiCommitOperationState:t}=this.repositoryStateCache.get(e);null!==t&&this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({userHasResolvedConflicts:!0})))}async _rebase(e,t,n){const r=this.getMultiCommitOperationProgressCallBack(e),i=this.gitStoreCache.get(e),o=await i.performFailableOperation((()=>async function(e,t,n,r){const i={expectedErrors:new Set([Ua.ko.RebaseConflicts])};let o=i;if(void 0!==r){const s=await Vp(e,t.tip.sha,n.tip.sha);if(null===s)return log.warn("Unable to rebase these branches because one or both of the refs do not exist in the repository"),Lp.Error;o=ed(i,{commits:s,progressCallback:r})}return td(await qw(["-c","rebase.backend=merge","rebase",t.name,n.name],e.path,"rebase",o))}(e,t,n,r)),{retryAction:{type:ot.Rebase,repository:e,baseBranch:t,targetBranch:n}});return o||Lp.Error}async _abortRebase(e){const t=this.gitStoreCache.get(e);return await t.performFailableOperation((()=>async function(e){await qw(["rebase","--abort"],e.path,"abortRebase")}(e)))}async _continueRebase(t,n,r){const i=this.getMultiCommitOperationProgressCallBack(t),o=this.gitStoreCache.get(t);return await o.performFailableOperation((()=>async function(t,n,r=new Map,i,o=":"){const s=n.filter((e=>e.status.kind!==Io.Untracked));for(const[e,i]of r){const r=n.find((t=>t.path===e));void 0!==r?await zp(t,r,i):log.error(`[continueRebase] couldn't find file ${e} even though there's a manual resolution for it`)}const a=s.filter((e=>!r.has(e.path)));await Yc(t,a);const l=await od(t);if(null==l)return log.warn("[continueRebase] unable to get status after staging changes, skipping any other steps"),Lp.Aborted;const c=await async function(t){try{const n=e.join(t.path,".git","REBASE_HEAD");return(await(0,y.readFile)(n,"utf8")).trim()}catch(e){return log.warn("[rebase] a problem was encountered reading .git/REBASE_HEAD, so it is unsafe to continue rebasing",e),null}}(t);if(null===c)return Lp.Aborted;const u=l.workingDirectory.files.filter((e=>e.status.kind!==Io.Untracked)),h={expectedErrors:new Set([Ua.ko.RebaseConflicts,Ua.ko.UnresolvedConflicts]),env:{GIT_EDITOR:o}};let p=h;if(void 0!==i){const e=await Qp(t);if(null===e)return log.warn("[continueRebase] unable to get rebase status, skipping any other steps"),Lp.Aborted;p=ed(h,{commits:e.commits,progressCallback:i})}return 0===u.length?(log.warn(`[rebase] no tracked changes to commit for ${c}, continuing rebase but skipping this commit`),td(await qw(["rebase","--skip"],t.path,"continueRebaseSkipCurrentCommit",p))):td(await qw(["rebase","--continue"],t.path,"continueRebase",p))}(t,n.files,r,i)))||Lp.Error}async _abortMerge(e){const t=this.gitStoreCache.get(e);return await t.performFailableOperation((()=>async function(e){await qw(["merge","--abort"],e.path,"abortMerge")}(e)))}async _abortSquashMerge(e){const t=this.gitStoreCache.get(e),{branchesState:n,changesState:{workingDirectory:r}}=this.repositoryStateCache.get(e);if(void 0===await this._finishConflictedMerge(e,r,new Map))return void log.error("[_abortSquashMerge] - Could not abort squash merge - commiting squash msg failed");const{tip:i}=n;i.kind===Ar.Valid?await t.performFailableOperation((()=>pv(e,0,i.branch.tip.sha))):log.error("[_abortSquashMerge] - Could not abort squash merge - tip was invalid")}async _finishConflictedMerge(e,t,n){const r=t.files.filter((e=>e.status.kind===Io.Conflicted)),i=this.gitStoreCache.get(e);return await i.performFailableOperation((()=>async function(e,t,n=new Map){for(const[r,i]of n){const n=t.find((e=>e.path===r));void 0!==n?await zp(e,n,i):log.error(`couldn't find file ${r} even though there's a manual resolution for it`)}const r=t.filter((e=>!n.has(e.path)));return await Yc(e,r),Xw(await qw(["commit","--no-edit","--cleanup=strip"],e.path,"createMergeCommit"))}(e,r,n)))}async _setRemoteURL(e,t,n){const r=this.gitStoreCache.get(e);await r.setRemoteURL(t,n)}async _openShell(e){this.statsStore.increment("openShellCount");try{const t=await async function(e){const t=await Sc(),n=t.find((t=>t.shell===e));return n||t.find((e=>e.shell===wc))}(this.selectedShell);await async function(e,t,n){if(!await S(e.path)){const t="Settings";throw new bc(`Could not find executable for '${e.shell}' at path '${e.path}'.  Please open ${t} and select an available shell.`)}let r=null;return r=function(e,t){if(e.shell===uc.Kitty)return(0,b.spawn)(e.path,["--single-instance","--directory",t]);if(e.shell===uc.Alacritty)return(0,b.spawn)(e.path,["--working-directory",t]);if(e.shell===uc.Tabby)return(0,b.spawn)(e.path,["open",t]);if(e.shell===uc.WezTerm)return(0,b.spawn)(e.path,["start","--cwd",t]);{const n=mc(e.shell);return(0,b.spawn)("open",["-b",n,t])}}(e,t),null!=r?(function(e,t,n){null!==t.stderr&&t.stderr.on("data",(t=>{const n=t instanceof Buffer?t.toString():t;log.debug(`[${e}] stderr: '${n}'`)})),t.on("error",(t=>{log.debug(`[${e}] an error was encountered`,t),n(t)})),t.on("exit",(t=>{0!==t&&log.debug(`[${e}] exit code: ${t}`)}))}(e.shell,r,n),Promise.resolve()):Promise.reject("Platform not currently supported for launching shells: darwin")}(t,e,(e=>this._pushError(e)))}catch(e){this.emitError(e)}}_openInBrowser(e){return rt.openExternal(e)}async _openInExternalEditor(e){const{selectedExternalEditor:t}=this.getState();try{const n=await Hl(t);if(null===n)return void this.emitError(new Sl("No suitable editors installed for GitHub Desktop to launch. Install Visual Studio Code for your platform and restart GitHub Desktop to try again.",{suggestDefaultEditor:!0}));await async function(e,t){const n=t.path;if(!await S(n)){const e="Settings";throw new Sl(`Could not find executable for '${t.editor}' at path '${t.path}'.  Please open ${e} and select an available editor.`,{openPreferences:!0})}const r={detached:!0};t.usesShell?(0,b.spawn)(`"${n}"`,[`"${e}"`],{...r,shell:!0}):(0,b.spawn)("open",["-a",n,e],r)}(e,n)}catch(e){this.emitError(e)}}async _saveGitIgnore(e,t){return await Rv(e,t),this._refreshRepository(e)}async setStatsOptOut(e,t){await this.statsStore.setOptOut(e,t),this.emitUpdate()}_setAskToMoveToApplicationsFolderSetting(e){return this.askToMoveToApplicationsFolderSetting=e,Pt($m,e),this.emitUpdate(),Promise.resolve()}_setConfirmRepositoryRemovalSetting(e){return this.askForConfirmationOnRepositoryRemoval=e,Pt(zm,e),this.updateMenuLabelsForSelectedRepository(),this.emitUpdate(),Promise.resolve()}_setConfirmDiscardChangesSetting(e){return this.confirmDiscardChanges=e,Pt(jm,e),this.emitUpdate(),Promise.resolve()}_setConfirmDiscardChangesPermanentlySetting(e){return this.confirmDiscardChangesPermanently=e,Pt(Km,e),this.emitUpdate(),Promise.resolve()}_setConfirmDiscardStashSetting(e){return this.confirmDiscardStash=e,Pt(Gm,e),this.emitUpdate(),Promise.resolve()}_setConfirmCheckoutCommitSetting(e){return this.confirmCheckoutCommit=e,Pt(Vm,e),this.emitUpdate(),Promise.resolve()}_setConfirmForcePushSetting(e){return this.askForConfirmationOnForcePush=e,Pt(Ym,e),this.updateMenuLabelsForSelectedRepository(),this.emitUpdate(),Promise.resolve()}_setConfirmUndoCommitSetting(e){return this.confirmUndoCommit=e,Pt(Xm,e),this.emitUpdate(),Promise.resolve()}_setUncommittedChangesStrategySetting(e){return this.uncommittedChangesStrategy=e,localStorage.setItem(Qm,e),this.emitUpdate(),Promise.resolve()}_setExternalEditor(e){const t=this.updateSelectedExternalEditor(e);return localStorage.setItem(Zm,e),this.emitUpdate(),this.updateMenuLabelsForSelectedRepository(),t}_setShell(e){return this.selectedShell=e,localStorage.setItem(sf,e),this.emitUpdate(),this.updateMenuLabelsForSelectedRepository(),Promise.resolve()}_changeImageDiffType(e){return this.imageDiffType=e,localStorage.setItem(ef,JSON.stringify(this.imageDiffType)),this.emitUpdate(),Promise.resolve()}_setHideWhitespaceInChangesDiff(e,t){return Pt(tf,e),this.hideWhitespaceInChangesDiff=e,this.refreshChangesSection(t,{includingStatus:!0,clearPartialState:!0})}_setHideWhitespaceInHistoryDiff(e,t,n){return Pt(nf,e),this.hideWhitespaceInHistoryDiff=e,null===n?this.updateChangesWorkingDirectoryDiff(t):this._changeFileSelection(t,n)}_setHideWhitespaceInPullRequestDiff(e,t,n){Pt(rf,e),this.hideWhitespaceInPullRequestDiff=e,null!==n&&this._changePullRequestFileSelection(t,n)}_setShowSideBySideDiff(e){e!==this.showSideBySideDiff&&(function(e){Pt(fa,e)}(e),this.showSideBySideDiff=e,this.statsStore.increment("diffModeChangeCount"),this.emitUpdate())}_setUpdateBannerVisibility(e){this.isUpdateAvailableBannerVisible=e,this.emitUpdate()}_setUpdateShowCaseVisibility(e){this.isUpdateShowcaseVisible=e,this.emitUpdate()}_setBanner(e){this.currentBanner=e,this.emitUpdate()}_clearBanner(e){const{currentBanner:t}=this;null!==t&&(void 0!==e&&t.type!==e||(this.currentBanner=null,this.emitUpdate()))}_reportStats(){return this.statsStore.reportStats(this.accounts,this.repositories)}_recordLaunchStats(e){return this.statsStore.recordLaunchStats(e)}async _appendIgnoreRule(e,t){return await xv(e,t),this._refreshRepository(e)}async _appendIgnoreFile(e,t){return await async function(e,t){if(t instanceof Array){const n=t.map((e=>Tv(e)));return xv(e,n)}return xv(e,Tv(t))}(e,t),this._refreshRepository(e)}_resetSignInState(){return this.signInStore.reset(),Promise.resolve()}_beginDotComSignIn(){return this.signInStore.beginDotComSignIn(),Promise.resolve()}_beginEnterpriseSignIn(){return this.signInStore.beginEnterpriseSignIn(),Promise.resolve()}_setSignInEndpoint(e){return this.signInStore.setEndpoint(e)}_setSignInCredentials(e,t){return this.signInStore.authenticateWithBasicAuth(e,t)}_requestBrowserAuthentication(){return this.signInStore.authenticateWithBrowser()}_setSignInOTP(e){return this.signInStore.setTwoFactorOTP(e)}async _setAppFocusState(e){this.appIsFocused!==e&&(this.appIsFocused=e,this.emitUpdate()),this.appIsFocused?(this.repositoryIndicatorUpdater.resume(),this.selectedRepository instanceof Ir&&(this.startPullRequestUpdater(this.selectedRepository),this.currentOnboardingTutorialStep===Ru.PickEditor&&await this._resolveCurrentEditor())):(this.repositoryIndicatorUpdater.pause(),this.stopPullRequestUpdater())}_startOpenInDesktop(e){const t=new Promise((e=>this.resolveOpenInDesktop=e));return e(),t}async _completeOpenInDesktop(e){const t=this.resolveOpenInDesktop;this.resolveOpenInDesktop=null;const n=await e();return t&&t(n),n}_updateRepositoryPath(e,t){return this.repositoriesStore.updateRepositoryPath(e,t)}_removeAccount(e){return log.info(`[AppStore] removing account ${e.login} (${e.name}) from store`),this.accountsStore.removeAccount(e)}async _addAccount(e){log.info(`[AppStore] adding account ${e.login} (${e.name}) to store`);const t=await this.accountsStore.addAccount(e);this.showWelcomeFlow&&null!==t&&this.apiRepositoriesStore.loadRepositories(t)}_updateRepositoryMissing(e,t){return this.repositoriesStore.updateRepositoryMissing(e,t)}async _updateRepositoryWorkflowPreferences(e,t){await this.repositoriesStore.updateRepositoryWorkflowPreferences(e,t)}async _addTutorialRepository(e,t,n){const r=await wv(e);if("regular"===r.kind){const e=r.topLevelWorkingDirectory;log.info(`[AppStore] adding tutorial repository at ${e} to store`),await this.repositoriesStore.addTutorialRepository(e,t,n),this.tutorialAssessor.onNewTutorialRepository()}else{const t=new Error(`${e} isn't a git repository.`);this.emitError(t)}}async _addRepositories(e){const t=new Array,n=new Array,r=new Array;for(const i of e){const e=await wv(i).catch((e=>(log.error("Could not determine repository type",e),{kind:"missing"})));if("unsafe"!==e.kind)if("regular"===e.kind){const r=e.topLevelWorkingDirectory;log.info(`[AppStore] adding repository at ${r} to store`);const i=lr(this.repositories,r);if(void 0!==i){t.push(i);continue}const o=await this.repositoriesStore.addRepository(r),s=this.gitStoreCache.get(o);await s.loadRemotes();const[a,l]=await Promise.all([this.repositoryWithRefreshedGitHubRepository(o),this.isUsingLFS(o)]);t.push(a),l&&n.push(a)}else r.push(i);else{const e=await this.repositoriesStore.addRepository(i,{missing:!0});t.push(e)}}return r.length>0&&this.emitError(new Error(this.getInvalidRepoPathsMessage(r))),n.length>0&&this._showPopup({type:nl.InitializeLFS,repositories:n}),t}async _removeRepository(e,t){try{if(t)try{await rt.moveItemToTrash(e.path)}catch(e){return log.error("Failed moving repository to trash",e),void this.emitError(new Error("Failed to move the repository directory to Trash.\n\nA common reason for this is that the directory or one of its files is open in another program."))}e instanceof jr?this._removeCloningRepository(e):await this.repositoriesStore.removeRepository(e)}catch(e){return void this.emitError(e)}0===(await this.repositoriesStore.getAll()).length?this._closeFoldout(je.Repository):this._showFoldout({type:je.Repository})}async _cloneAgain(e,t){const{promise:n,repository:r}=this._clone(e,t);if(await this._selectRepository(r),!await n)return;const i=this.repositories.find((e=>e.path===t));if(i){const e=await this._updateRepositoryMissing(i,!1);await this._selectRepository(e)}}getInvalidRepoPathsMessage(e){return 1===e.length?`${e} isn't a Git repository.`:`The following paths aren't Git repositories:\n\n${e.slice(0,3).map((e=>`- ${e}`)).join("\n")}${e.length>3?`\n\n(and ${e.length-3} more)`:""}`}async withAuthenticatingUser(e,t){let n=e,r=Gl(this.accounts,n);if(r||(n=await this.repositoryWithRefreshedGitHubRepository(e),r=Gl(this.accounts,n)),!r){const t=this.gitStoreCache.get(e).currentRemote;if(t){const e=zl(t.url),n=jl(e);null!=n&&(r={login:n,endpoint:e})}}if(r instanceof tn){const t=r.token.length>0?"has token":"empty token";log.info(`[AppStore.withAuthenticatingUser] account found for repository: ${e.name} - ${r.login} (${t})`)}return t(n,r)}updateRevertProgress(e,t){this.repositoryStateCache.update(e,(()=>({revertProgress:t}))),this.selectedRepository===e&&this.emitUpdate()}async _revertCommit(e,t){return this.withAuthenticatingUser(e,(async(n,r)=>{const i=this.gitStoreCache.get(n);await i.revertCommit(n,t,r,(e=>{this.updateRevertProgress(n,e)})),this.updateRevertProgress(n,null),await this._refreshRepository(e)}))}async promptForGenericGitAuthentication(e,t){let n;if(e instanceof Ir){const t=this.gitStoreCache.get(e).currentRemote;if(!t)return;n=t.url}else n=e.url;const r=zl(n);return this._showPopup({type:nl.GenericGitAuthentication,hostname:r,retryAction:t})}async _installGlobalLFSFilters(e){try{await async function(e){const t=["lfs","install","--skip-repo"];e&&t.push("--force"),await qw(t,__dirname,"installGlobalLFSFilter")}(e)}catch(e){this.emitError(e)}}async isUsingLFS(e){try{return await async function(e){return(await qw(["lfs","track"],e.path,"isUsingLFS",{env:{GIT_LFS_TRACK_NO_INSTALL_HOOKS:"1"}})).stdout.length>0}(e)}catch(e){return!1}}async _installLFSHooks(e){for(const t of e)try{await Vl(t,!0)}catch(e){this.emitError(e)}}_changeCloneRepositoriesTab(e){return this.selectedCloneRepositoryTab=e,this.emitUpdate(),Promise.resolve()}_refreshApiRepositories(e){return this.apiRepositoriesStore.loadRepositories(e)}_changeBranchesTab(e){return this.selectedBranchesTab=e,this.emitUpdate(),Promise.resolve()}async _showGitHubExplore(e){const{gitHubRepository:t}=e;if(!t||null===t.htmlURL)return;const n=new URL(t.htmlURL);n.pathname="/explore",await this._openInBrowser(n.toString())}async _createPullRequest(e,t){if(!e.gitHubRepository)return;const n=this.repositoryStateCache.get(e),r=n.branchesState.tip;if(r.kind!==Ar.Valid)return;const i=r.branch,o=n.aheadBehind;null==o?this._showPopup({type:nl.PushBranchCommits,repository:e,branch:i}):o.ahead>0?this._showPopup({type:nl.PushBranchCommits,repository:e,branch:i,unPushedCommits:o.ahead}):await this._openCreatePullRequestInBrowser(e,i,t)}async _showPullRequest(e){if(null===e.gitHubRepository)return;const t=this.repositoryStateCache.get(e).branchesState.currentPullRequest;return null!==t?this._showPullRequestByPR(t):void 0}async _showPullRequestByPR(e){const{htmlURL:t}=e.base.gitHubRepository;if(null===t)return;const n=`${t}/pull/${e.pullRequestNumber}`;await this._openInBrowser(n)}async _refreshPullRequests(e){if(_r(e)){const t=Gl(this.accounts,e);null!==t&&await this.pullRequestCoordinator.refreshPullRequests(e,t)}}async onPullRequestChanged(e,t){this.repositoryStateCache.updateBranchesState(e,(()=>({openPullRequests:t}))),this.updateCurrentPullRequest(e),this.gitStoreCache.get(e).pruneForkedRemotes(t);const n=this.getSelectedState();n&&n.type===qe.Repository&&n.repository.id===e.id&&this.updateMenuLabelsForSelectedRepository(),this.emitUpdate()}updateCurrentPullRequest(e){e.gitHubRepository&&(this.repositoryStateCache.updateBranchesState(e,(t=>{let n=null;const{remote:r}=this.repositoryStateCache.get(e);return t.tip.kind===Ar.Valid&&r&&(n=_u(t.tip.branch,t.openPullRequests,r)),{currentPullRequest:n}})),this.emitUpdate())}async _openCreatePullRequestInBrowser(e,t,n){const r=e.gitHubRepository;if(!r)return;const{parent:i,owner:o,name:s,htmlURL:a}=r,l=Lr(e),c=l&&null!==i?`${i.owner.login}:${i.name}:`:"",u=`${a}/pull/new/${void 0!==n?c+encodeURIComponent(n.nameWithoutRemote)+"...":""}${(l?`${o.login}:${s}:`:"")+encodeURIComponent(t.nameWithoutRemote)}`;await this._openInBrowser(u),this.currentOnboardingTutorialStep===Ru.OpenPullRequest&&this._markPullRequestTutorialStepAsComplete(e)}async _updateExistingUpstreamRemote(e){const t=this.gitStoreCache.get(e);return await t.updateExistingUpstreamRemote(),this._refreshRepository(e)}getIgnoreExistingUpstreamRemoteKey(e){return`repository/${e.id}/ignoreExistingUpstreamRemote`}_ignoreExistingUpstreamRemote(e){return Pt(this.getIgnoreExistingUpstreamRemoteKey(e),!0),Promise.resolve()}getIgnoreExistingUpstreamRemote(e){const t=this.getIgnoreExistingUpstreamRemoteKey(e);return Promise.resolve(At(t,!1))}async addUpstreamRemoteIfNeeded(e){const t=this.gitStoreCache.get(e);if(!await this.getIgnoreExistingUpstreamRemote(e))return t.addUpstreamRemoteIfNeeded()}async _checkoutPullRequest(e,t,n,r,i){const o=await this._findPullRequestBranch(e,t,n,r,i);void 0!==o&&(await this._checkoutBranch(e,o),this.statsStore.increment("prBranchCheckouts"))}async _findPullRequestBranch(e,t,n,r,i){const o=this.gitStoreCache.get(e);let s=(await rv(e)).find((e=>ur(r,e)));if(void 0===s)try{const t=`github-desktop-${n}`;s=await iv(e,t,r)}catch(e){return void this.emitError(new Error(`Couldn't find PR branch, adding remote failed: ${e.message}`))}const a=`${s.name}/${i}`;let l=o.allBranches.find((e=>e.type===Ja.Local&&e.upstream===a));if(void 0!==l)return l;const c=e=>o.allBranches.find((t=>t.type===Ja.Remote&&t.name===e));if(l=c(a),void 0===l)try{await this._fetchRemote(e,s,Xt.UserInitiatedTask),l=c(a)}catch(e){log.error(`Failed fetching remote ${s?.name}`,e)}if(void 0!==l)return s.name!==o.defaultRemote?.name&&s.name!==o.upstreamRemote?.name?await this._createBranch(e,`pr/${t}`,a,!1):l;this.emitError(new Error(`Couldn't find branch '${i}' in remote '${s.name}'. A common reason for this is that the PR author has deleted their branch or their forked repository.`))}_setShowCoAuthoredBy(e,t){return this.gitStoreCache.get(e).setShowCoAuthoredBy(t),Promise.resolve()}_setCoAuthors(e,t){return this.gitStoreCache.get(e).setCoAuthors(t),Promise.resolve()}_setSelectedTheme(e){return da(e),this.selectedTheme=e,this.emitUpdate(),Promise.resolve()}async _resolveCurrentEditor(){const e=await Hl(this.selectedExternalEditor),t=null!=e?e.editor:null;this.resolvedExternalEditor!==t&&(this.resolvedExternalEditor=t,this.currentOnboardingTutorialStep===Ru.PickEditor&&this.selectedRepository instanceof Ir&&this.updateCurrentTutorialStep(this.selectedRepository),this.emitUpdate())}getResolvedExternalEditor=()=>this.resolvedExternalEditor;_updateManualConflictResolution(e,t,n){this.repositoryStateCache.updateChangesState(e,(e=>{const{conflictState:r}=e;if(null===r)return{conflictState:r};const i=new Map(r.manualResolutions);return null!==n?i.set(t,n):i.delete(t),{conflictState:{...r,manualResolutions:i}}})),this.updateMultiCommitOperationStateAfterManualResolution(e),this.emitUpdate()}updateMultiCommitOperationStateAfterManualResolution(e){const t=this.repositoryStateCache.get(e),{changesState:n,multiCommitOperationState:r}=t;if(null===n.conflictState||null===r||"ShowConflicts"!==r.step.kind)return;const{step:i}=r,{manualResolutions:o}=n.conflictState,s={...i.conflictState,manualResolutions:o};this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({step:{...i,conflictState:s}})))}async createStashAndDropPreviousEntry(e,t){const n=await Zc(e,t),r=this.gitStoreCache.get(e),i=await r.performFailableOperation((()=>this.createStashEntry(e,t)));if(!0===i&&null!==n){const{stashSha:t,branchName:i}=n;await r.performFailableOperation((async()=>{await tu(e,t),log.info(`Dropped stash '${t}' associated with ${i}`)}))}return!0===i}async createStashEntry(e,t){const{changesState:n}=this.repositoryStateCache.get(e),{workingDirectory:r}=n,i=r.files.filter((e=>e.status.kind===Io.Untracked));return async function(e,t,n){const r=n.map((e=>e.withIncludeAll(!0)));await Yc(e,r);const i=["stash","push","-m",Jc("string"==typeof t?t:t.name)],o=await qw(i,e.path,"createStashEntry",{successExitCodes:new Set([0,1])});if(1===o.exitCode){const e=/^error: /m.exec(o.stderr);if(null!==e&&e.length>0)throw new zw(o,i);log.info(`[createDesktopStashEntry] a stash was created successfully but exit code ${o.exitCode} reported. stderr: ${o.stderr}`)}return"No local changes to save\n"!==o.stdout}(e,t,i)}async _popStashEntry(e,t){await nu(e,t.stashSha),log.info(`[AppStore. _popStashEntry] popped stash with commit id ${t.stashSha}`),this.statsStore.increment("stashRestoreCount"),await this._refreshRepository(e)}async _dropStashEntry(e,t){const n=this.gitStoreCache.get(e);await n.performFailableOperation((()=>tu(e,t.stashSha))),log.info(`[AppStore. _dropStashEntry] dropped stash with commit id ${t.stashSha}`),this.statsStore.increment("stashDiscardCount"),await n.loadStashEntries()}_setStashedFilesWidth(e){return this.stashedFilesWidth={...this.stashedFilesWidth,value:e},_t(Um,e),this.updateResizableConstraints(),this.emitUpdate(),Promise.resolve()}_resetStashedFilesWidth(){return this.stashedFilesWidth={...this.stashedFilesWidth,value:250},localStorage.removeItem(Um),this.updateResizableConstraints(),this.emitUpdate(),Promise.resolve()}async _testPruneBranches(){null!==this.currentBranchPruner&&await this.currentBranchPruner.testPrune()}async _showCreateForkDialog(e){const t=Gl(this.accounts,e);null!==t&&await this._showPopup({type:nl.CreateFork,repository:e,account:t})}async _convertRepositoryToFork(e,t){const n=this.gitStoreCache.get(e),r=n.defaultRemote?.name,i=n.defaultRemote?.url,{endpoint:o}=e.gitHubRepository;return void 0!==r&&void 0!==i&&await n.setRemoteURL(r,t.clone_url)?(await n.ensureUpstreamRemoteURL(i),this.repositoriesStore.setGitHubRepository(e,await this.repositoriesStore.upsertGitHubRepository(o,t))):e}async _createTutorialRepository(t){try{await this.statsStore.recordTutorialStarted();const n="desktop-tutorial",r=e.resolve(await dh(),n),i=await async function(t,n,r,i){const o=ih(t);if(i(`Creating repository on ${o}`,0),await S(r))throw new Error(`The path '${r}' already exists. Please move it out of the way, or remove it, and then try again.`);const s=await async function(e,t){const n=new Vn(e.endpoint,e.token);try{return await n.createRepository(null,t,"GitHub Desktop tutorial repository",!0)}catch(n){if(n instanceof nn&&422===n.responseStatus&&null!==n.apiError&&"Repository creation failed."===n.apiError.message&&n.apiError.errors&&n.apiError.errors.some((e=>"name already exists on this account"===e.message)))throw new Error(`You already have a repository named "${t}" on your account at ${ih(e)}.\n\nPlease delete the repository and try again.`);throw n}}(t,n),a=s.default_branch??await cu();i("Initializing local repository",.2),await(0,y.mkdir)(r,{recursive:!0}),await qw(["-c",`init.defaultBranch=${a}`,"init"],r,"tutorial:init"),await(0,y.writeFile)(e.join(r,"README.md"),"# Welcome to GitHub Desktop!\n\nThis is your README. READMEs are where you can communicate what your project is and how to use it.\n\nWrite your name on line 6, save it, and then head back to GitHub Desktop.\n"),await qw(["add","--","README.md"],r,"tutorial:add"),await qw(["commit","-m","Initial commit"],r,"tutorial:commit");const l={name:"origin",url:s.clone_url};return await qw(["remote","add",l.name,l.url],r,"tutorial:add-remote"),await async function(e,t,n,r,i){const o=`Pushing repository to ${ih(t)}`;i(o,0);const s=await nh({env:await uh(t,n.url)},new $u,(e=>{"progress"===e.kind&&i(o,e.percent,e.details.text)})),a=["push","-u",n.name,r];await qw(a,e,"tutorial:push",s)}(r,t,l,a,((e,t,n)=>{i(e,.3+.6*t,n)})),i("Finalizing tutorial repository",.9),s}(t,n,r,((e,t,n)=>{this.popupManager.currentPopup?.type===nl.CreateTutorialRepository&&(this.popupManager.updatePopup({...this.popupManager.currentPopup,progress:{kind:"generic",title:e,value:t,description:n}}),this.emitUpdate())}));await this._addTutorialRepository(r,t.endpoint,i),await this.statsStore.recordTutorialRepoCreated()}catch(e){iC("tutorialRepoCreation",e),e instanceof zw?this.emitError(e):this.emitError(new Error(`Failed creating the tutorial repository.\n\n${e.message}`))}finally{this._closePopup(nl.CreateTutorialRepository)}}_initializeCherryPickProgress(e,t){const n=tt("Unable to initialize cherry-pick progress. No commits provided.",t.at(-1));this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({progress:{kind:"multiCommitOperation",value:0,position:1,totalCommitCount:t.length,currentCommitSummary:n.summary}}))),this.emitUpdate()}getMultiCommitOperationProgressCallBack(e){return t=>{this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({progress:t}))),this.emitUpdate()}}orderCommitsByHistory(e,t){const{compareState:n}=this.repositoryStateCache.get(e),{commitSHAs:r}=n,i=new Map(r.map(((e,t)=>[e,t])));return[...t].sort(((e,t)=>rr(i.get(t.sha),i.get(e.sha))))}orderShasByHistory(e,t){const{compareState:n}=this.repositoryStateCache.get(e),{commitSHAs:r}=n,i=new Map(r.map(((e,t)=>[e,t])));return[...t].sort(((e,t)=>rr(i.get(t),i.get(e))))}async _cherryPick(e,t){if(0===t.length)return log.error("[_cherryPick] - Unable to cherry-pick. No commits provided."),ad.UnableToStart;const n=this.orderCommitsByHistory(e,t);await this._refreshRepository(e);const r=this.getMultiCommitOperationProgressCallBack(e),i=this.gitStoreCache.get(e),o=await i.performFailableOperation((()=>async function(e,t,n){if(0===t.length)return ad.UnableToStart;let r={expectedErrors:new Set([Ua.ko.MergeConflicts,Ua.ko.ConflictModifyDeletedInBranch])};void 0!==n&&(r=await cd(r,t,n));const i=await qw(["cherry-pick",...t.map((e=>e.sha)),"--keep-redundant-commits","-m 1"],e.path,"cherry-pick",r);return ud(i)}(e,n,r)));return o||ad.Error}_checkForUncommittedChanges(e,t){const{changesState:n}=this.repositoryStateCache.get(e);return n.workingDirectory.files.length>0&&(this._showPopup({type:nl.LocalChangesOverwritten,repository:e,retryAction:t,files:n.workingDirectory.files.map((e=>e.path))}),!0)}async _checkoutBranchReturnName(e,t){const n=this.gitStoreCache.get(e);if(!0===await this.withAuthenticatingUser(e,((r,i)=>n.performFailableOperation((()=>$p(e,i,t))))))return(await n.loadStatus())?.currentBranch}async _abortCherryPick(e,t){const n=this.gitStoreCache.get(e);await n.performFailableOperation((()=>pd(e))),await this.checkoutBranchIfNotNull(e,t)}_setCherryPickBranchCreated(e,t){const{multiCommitOperationState:n}=this.repositoryStateCache.get(e);null!==n&&"Cherry-pick"===n.operationDetail.kind?this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({operationDetail:{...n.operationDetail,branchCreated:t}}))):log.error("[setCherryPickBranchCreated] - Not in cherry-pick operation state")}async _continueCherryPick(e,t,n){const r=this.getMultiCommitOperationProgressCallBack(e),i=this.gitStoreCache.get(e),o=await i.performFailableOperation((()=>async function(e,t,n=new Map,r){const i=t.filter((e=>e.status.kind!==Io.Untracked));for(const[r,i]of n){const n=t.find((e=>e.path===r));void 0!==n?await zp(e,n,i):log.error(`[continueCherryPick] couldn't find file ${r} even though there's a manual resolution for it`)}const o=i.filter((e=>!n.has(e.path)));await Yc(e,o);const s=await od(e);if(null==s)return log.warn("[continueCherryPick] unable to get status after staging changes,\n        skipping any other steps"),ad.UnableToStart;if(await!dd(e))return ad.UnableToStart;let a={expectedErrors:new Set([Ua.ko.MergeConflicts,Ua.ko.ConflictModifyDeletedInBranch,Ua.ko.UnresolvedConflicts]),env:{GIT_EDITOR:":"}};if(void 0!==r){const t=await hd(e);if(null===t)return log.warn("[continueCherryPick] unable to get cherry-pick status, skipping other steps"),ad.UnableToStart;a=cd(a,t.commits,r,t.cherryPickedCount)}const l=s.workingDirectory.files.filter((e=>e.status.kind!==Io.Untracked));return 0===l.length?(log.warn("[cherryPick] no tracked changes to commit, continuing cherry-pick but skipping this commit"),ud(await qw(["commit","--allow-empty"],e.path,"continueCherryPickSkipCurrentCommit",a))):ud(await qw(["cherry-pick","--continue","--keep-redundant-commits"],e.path,"continueCherryPick",a))}(e,t,n,r)));return o||ad.Error}async _setCherryPickProgressFromState(e){const t=await hd(e);null!==t&&this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({progress:t.progress})))}async _clearCherryPickingHead(e,t){if(!dd(e))return;const n=this.gitStoreCache.get(e);return await n.performFailableOperation((()=>pd(e))),await this.checkoutBranchIfNotNull(e,t),this._refreshRepository(e)}async checkoutBranchIfNotNull(e,t){if(null===t)return;const n=this.gitStoreCache.get(e);await this.withAuthenticatingUser(e,(async(r,i)=>{await n.performFailableOperation((()=>$p(e,i,t)))}))}async _setDragElement(e){this.currentDragElement=e,this.emitUpdate()}async _getBranchAheadBehind(e,t){return async function(e,t){if(t.type===Ja.Remote)return null;const n=t.upstream;return n?Gp(e,jp(t.name,n)):null}(e,t)}_setLastThankYou(e){const t=void 0!==this.lastThankYou&&this.lastThankYou.version===e.version,n=void 0!==this.lastThankYou&&this.lastThankYou.checkedUsers.length===e.checkedUsers.length;t&&n||(function(e,t){const n=JSON.stringify(t);localStorage.setItem("version-and-users-of-last-thank-you",n)}(0,e),this.lastThankYou=e,this.emitUpdate())}async _reorderCommits(e,t,n,r){if(0===t.length)return log.error("[_reorder] - Unable to reorder. No commits provided."),Lp.Error;const i=this.getMultiCommitOperationProgressCallBack(e),o=this.gitStoreCache.get(e),s=await o.performFailableOperation((()=>async function(e,t,n,r,i){let o,s;try{if(0===t.length)throw new Error("[reorder] No commits provided to reorder.");const a=new Set(t.map((e=>e.sha))),l=await qc(e,null===r?void 0:qp(r,"HEAD"));if(0===l.length)throw new Error("[reorder] Could not find commits in log for last retained commit ref.");o=await Xu("reorderTodo");let c=!1;const u=[],h=[];for(let e=l.length-1;e>=0;e--){const t=l[e];if(a.has(t.sha))c?await(0,y.appendFile)(o,`pick ${t.sha} ${t.summary}\n`):u.push(t);else if(null===n||t.sha!==n.sha)c?h.push(t):await(0,y.appendFile)(o,`pick ${t.sha} ${t.summary}\n`);else{c=!0,h.push(t);for(let e=0;e<u.length;e++)await(0,y.appendFile)(o,`pick ${u[e].sha} ${u[e].summary}\n`)}}if(h.length>0)for(let e=0;e<h.length;e++)await(0,y.appendFile)(o,`pick ${h[e].sha} ${h[e].summary}\n`);if(null===n)for(let e=0;e<u.length;e++)await(0,y.appendFile)(o,`pick ${u[e].sha} ${u[e].summary}\n`);else if(!c)throw new Error("[reorder] The base commit onto was not in the log. Continuing would result in dropping the commits in the toMove array.");s=await nd(e,o,r,"Reorder",void 0,i,l)}catch(e){return log.error(e),Lp.Error}finally{void 0!==o&&await(0,y.rm)(o,{recursive:!0,force:!0})}return s}(e,t,n,r,i)));return s||Lp.Error}async _squash(e,t,n,r,i){if(0===t.length)return log.error("[_squash] - Unable to squash. No commits provided."),Lp.Error;const o=this.getMultiCommitOperationProgressCallBack(e),s=await Ul(e,i),a=this.gitStoreCache.get(e),l=await a.performFailableOperation((()=>async function(e,t,n,r,i,o){let s,a,l;try{if(0===t.length)throw new Error("[squash] No commits provided to squash.");const c=new Set(t.map((e=>e.sha)));if(c.has(n.sha))throw new Error("[squash] The commits to squash cannot contain the commit to squash onto.");const u=await qc(e,null===r?void 0:qp(r,"HEAD"));if(0===u.length)throw new Error("[squash] Could not find commits in log for last retained commit ref.");a=await Xu("squashTodo");let h=!1;const p=[],d=[];for(let e=u.length-1;e>=0;e--){const t=u[e];if(c.has(t.sha))h?await(0,y.appendFile)(a,`squash ${t.sha} ${t.summary}\n`):p.push(t);else if(t.sha!==n.sha)h?d.push(t):await(0,y.appendFile)(a,`pick ${t.sha} ${t.summary}\n`);else{h=!0,p.push(t);for(let e=0;e<p.length;e++){const t=0===e?"pick":"squash";await(0,y.appendFile)(a,`${t} ${p[e].sha} ${p[e].summary}\n`)}}}if(d.length>0)for(let e=0;e<d.length;e++)await(0,y.appendFile)(a,`pick ${d[e].sha} ${d[e].summary}\n`);if(!h)throw new Error("[squash] The commit to squash onto was not in the log. Continuing would result in dropping the commits in the toSquash array.");""!==i.trim()&&(s=await Xu("squashCommitMessage"),await(0,y.writeFile)(s,i));const m=void 0!==s?`cat "${s}" >`:void 0;l=await nd(e,a,r,"Squash",m,o,[...t,n])}catch(e){return log.error(e),Lp.Error}finally{void 0!==a&&await(0,y.rm)(a,{recursive:!0,force:!0}),void 0!==s&&await(0,y.rm)(s,{recursive:!0,force:!0})}return l}(e,t,n,r,s,o)));return l||Lp.Error}async _undoMultiCommitOperation(e,t,n){const{branchesState:r,multiCommitOperationUndoState:i,changesState:{workingDirectory:o}}=this.repositoryStateCache.get(t),{operationDetail:s}=e,{kind:a}=s;if(null===i)return log.error(`[_undoMultiCommitOperation] - Could not undo ${a}. There is no undo info available.`),!1;const{undoSha:l,branchName:c}=i;if(o.files.length>0)return log.error(`[_undoMultiCommitOperation] - Could not undo ${a}. This would delete the local changes that exist on the branch.`),!1;const{tip:u}=r;if(u.kind!==Ar.Valid||u.branch.name!==c)return log.error(`[_undoMultiCommitOperation] - Could not undo ${a}.  User no longer on branch the ${a} occurred on.`),!1;if(null===l)return log.error("[_undoMultiCommitOperation] - Could not determine undo sha"),!1;if("Cherry-pick"===s.kind&&s.branchCreated)return this._deleteBranch(t,u.branch,!1,s.sourceBranch),!0;const h=this.gitStoreCache.get(t);if(!0!==await h.performFailableOperation((()=>pv(t,0,l))))return!1;let p;switch(a){case"Squash":p={type:vu.SquashUndone,commitsCount:n};break;case"Reorder":p={type:vu.ReorderUndone,commitsCount:n};break;case"Cherry-pick":const e="Cherry-pick"===s.kind?s.sourceBranch:null;await this.checkoutBranchIfNotNull(t,e),p={type:vu.CherryPickUndone,targetBranchName:c,countCherryPicked:n};break;case"Rebase":case"Merge":throw new Error(`Unexpected multi commit operation kind to undo ${a}`);default:et(0,`Unsupported multi operation kind to undo ${a}`)}this._setBanner(p),await this._loadStatus(t);const d=this.repositoryStateCache.get(t);return d.branchesState.tip.kind===Ar.Valid&&"Cherry-pick"!==a&&this._addBranchToForcePushList(t,d.branchesState.tip,u.branch.tip.sha),await this._refreshRepository(t),!0}_addBranchToForcePushList=(e,t,n)=>{if(t.branch.tip.sha===n)return;const r=this.repositoryStateCache.get(e),{forcePushBranches:i}=r.branchesState,o=new Map(i);o.set(t.branch.nameWithoutRemote,t.branch.tip.sha),this.repositoryStateCache.updateBranchesState(e,(()=>({forcePushBranches:o})))};_setMultiCommitOperationUndoState(e,t){this.repositoryStateCache.updateMultiCommitOperationUndoState(e,(()=>({undoSha:md(t),branchName:t.branch.name})))}async _handleConflictsDetectedOnError(e,t,n){const{multiCommitOperationState:r}=this.repositoryStateCache.get(e);if(null===r){const r=this.gitStoreCache.get(e),i=r.allBranches.find((e=>e.name===t));if(void 0===i)return;const o=r.allBranches.find((e=>e.name===n));this._initializeMultiCommitOperation(e,{kind:"Merge",isSquash:!1,sourceBranch:o??null},i,[],i.tip.sha)}return this._setMultiCommitOperationStep(e,{kind:"ShowConflicts",conflictState:{kind:"multiCommitOperation",manualResolutions:new Map,ourBranch:t,theirBranch:n}}),this._showPopup({type:nl.MultiCommitOperation,repository:e})}async _setMultiCommitOperationStep(e,t){this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({step:t}))),this.emitUpdate()}_setMultiCommitOperationTargetBranch(e,t){this.repositoryStateCache.updateMultiCommitOperationState(e,(()=>({targetBranch:t})))}_endMultiCommitOperation(e){this.repositoryStateCache.clearMultiCommitOperationState(e),this.emitUpdate()}_initializeMultiCommitOperation(e,t,n,r,i,o=!0){this.repositoryStateCache.initializeMultiCommitOperationState(e,{step:{kind:"ShowProgress"},operationDetail:t,progress:{kind:"multiCommitOperation",currentCommitSummary:r.length>0?r[0].summary:"",position:1,totalCommitCount:r.length,value:0},userHasResolvedConflicts:!1,originalBranchTip:i,targetBranch:n}),o&&this.emitUpdate()}_setShowCIStatusPopover(e){this.showCIStatusPopover!==e&&(this.showCIStatusPopover=e,this.emitUpdate())}_toggleCIStatusPopover(){this.showCIStatusPopover=!this.showCIStatusPopover,this.emitUpdate()}onChecksFailedNotification=async(e,t,n,r,i)=>{const o=this.selectedRepository??await this._selectRepository(e),s={type:nl.PullRequestChecksFailed,pullRequest:t,repository:e,shouldChangeRepository:!0,commitMessage:n,commitSha:r,checks:i};if(null===o||o.hash!==e.hash)return this.statsStore.increment("checksFailedDialogOpenCount"),this._showPopup(s);const a=this.repositoryStateCache.get(e),{branchesState:l}=a,{tip:c}=l,u=c.kind===Ar.Valid?c.branch:null;if(null===u||u.name!==t.head.ref)return this.statsStore.increment("checksFailedDialogOpenCount"),this._showPopup({...s,shouldChangeRepository:!1});this._setShowCIStatusPopover(!0)};onPullRequestReviewSubmitNotification=async(e,t,n)=>{const r=this.selectedRepository??await this._selectRepository(e),i=this.repositoryStateCache.get(e),{branchesState:o}=i,{tip:s}=o,a=s.kind===Ar.Valid?s.branch:null;return this._showPopup({type:nl.PullRequestReview,shouldCheckoutBranch:null!==a&&a.name!==t.head.ref,shouldChangeRepository:null===r||r.hash!==e.hash,review:n,pullRequest:t,repository:e})};onPullRequestCommentNotification=async(e,t,n)=>{const r=this.selectedRepository??await this._selectRepository(e),i=this.repositoryStateCache.get(e),{branchesState:o}=i,{tip:s}=o,a=s.kind===Ar.Valid?s.branch:null;return this._showPopup({type:nl.PullRequestComment,shouldCheckoutBranch:null!==a&&a.name!==t.head.ref,shouldChangeRepository:null===r||r.hash!==e.hash,comment:n,pullRequest:t,repository:e})};async _startPullRequest(e){const{tip:t,defaultBranch:n}=this.repositoryStateCache.get(e).branchesState;if(t.kind!==Ar.Valid)return;const r=t.branch;this._initializePullRequestPreview(e,n,r)}async _initializePullRequestPreview(e,t,n){if(null===t)return void this.showPullRequestPopupNoBaseBranch(e,n);const r=this.gitStoreCache.get(e),i=(await r.getCommitsBetweenBranches(t,n)).map((e=>e.sha)),o={files:[],linesAdded:0,linesDeleted:0},s=i.length>0?await r.performFailableOperation((()=>async function(e,t,n,r){const i=["diff","--merge-base",t,n,"-C","-M","-z","--raw","--numstat","--"],o=await zh(e,t,n);return null===o?null:jc((await qw(i,e.path,"getBranchMergeBaseChangedFiles")).stdout,`${r}`,o)}(e,t.name,n.name,i[0]))):o;if(void 0===s)return;const a=null!==s,l=a?i:[];this.repositoryStateCache.initializePullRequestState(e,{baseBranch:t,commitSHAs:l,commitSelection:{shas:l,shasInDiff:l,isContiguous:!0,changesetData:s??o,file:null,diff:null},mergeStatus:l.length>0||!a?{kind:a?Cu.Loading:Cu.Invalid}:null}),this.emitUpdate(),l.length>0&&this.setupPRMergeTreePromise(e,t,n),null!==s&&s.files.length>0&&await this._changePullRequestFileSelection(e,s.files[0]),this.showPullRequestPopup(e,n,l)}showPullRequestPopupNoBaseBranch(e,t){this.repositoryStateCache.initializePullRequestState(e,{baseBranch:null,commitSHAs:null,commitSelection:null,mergeStatus:null}),this.emitUpdate(),this.showPullRequestPopup(e,t,[])}showPullRequestPopup(e,t,n){if(this.popupManager.areTherePopupsOfType(nl.StartPullRequest))return;this.statsStore.increment("previewedPullRequestCount");const{branchesState:r,localCommitSHAs:i}=this.repositoryStateCache.get(e),{allBranches:o,recentBranches:s,defaultBranch:a,currentPullRequest:l}=r,c=this.gitStoreCache.get(e),u=Lr(e)?Oc:c.defaultRemote?.name,h=o.filter((e=>e.upstreamRemoteName===u||e.remoteName===u)),p=s.filter((e=>e.upstreamRemoteName===u||e.remoteName===u)),{imageDiffType:d,selectedExternalEditor:m,showSideBySideDiff:f}=this.getState(),g=n.length>0&&!i.includes(n[0])?n[0]:null;this._showPopup({type:nl.StartPullRequest,prBaseBranches:h,prRecentBaseBranches:p,currentBranch:t,defaultBranch:a,imageDiffType:d,repository:e,externalEditorLabel:m??void 0,nonLocalCommitSHA:g,showSideBySideDiff:f,currentBranchHasPullRequest:null!==l})}async _changePullRequestFileSelection(e,t){const{branchesState:n,pullRequestState:r}=this.repositoryStateCache.get(e);if(n.tip.kind!==Ar.Valid||null===r)return;const i=n.tip.branch,{baseBranch:o,commitSHAs:s}=r;if(null===s||null===o)return;if(this.repositoryStateCache.updatePullRequestCommitSelection(e,(()=>({file:t,diff:null}))),this.emitUpdate(),0===s.length)return;const a=await this.gitStoreCache.get(e).performFailableOperation((()=>async function(e,t,n,r,i=!1,o){const s=["diff","--merge-base",n,r,...i?["-w"]:[],"--patch-with-raw","-z","--no-color","--",t.path];t.status.kind!==Io.Renamed&&t.status.kind!==Io.Copied||s.push(t.status.oldPath);const a=await qw(s,e.path,"getBranchMergeBaseDiff",{maxBuffer:1/0});return Np(Buffer.from(a.stdout),e,t,o)}(e,t,o.name,i.name,this.hideWhitespaceInPullRequestDiff,s[0])))??null,{pullRequestState:l}=this.repositoryStateCache.get(e),c=l?.commitSelection?.file;c?.id===t.id&&(this.repositoryStateCache.updatePullRequestCommitSelection(e,(()=>({diff:a}))),this.emitUpdate())}_setPullRequestFileListWidth(e){return this.pullRequestFileListWidth={...this.pullRequestFileListWidth,value:e},_t(Wm,e),this.updatePullRequestResizableConstraints(),this.emitUpdate(),Promise.resolve()}_resetPullRequestFileListWidth(){return this.pullRequestFileListWidth={...this.pullRequestFileListWidth,value:250},localStorage.removeItem(Wm),this.updatePullRequestResizableConstraints(),this.emitUpdate(),Promise.resolve()}_updatePullRequestBaseBranch(e,t){const{branchesState:n,pullRequestState:r}=this.repositoryStateCache.get(e),{tip:i}=n;i.kind===Ar.Valid&&null!==r&&this._initializePullRequestPreview(e,t,i.branch)}setupPRMergeTreePromise(e,t,n){this.setupMergabilityPromise(e,t,n).then((t=>{this.repositoryStateCache.updatePullRequestState(e,(()=>({mergeStatus:t}))),this.emitUpdate()}))}_quitApp(e){e&&f("will-quit-even-if-updating"),H()}_cancelQuittingApp(){f("cancel-quitting")}_setPullRequestSuggestedNextAction(e){this.pullRequestSuggestedNextAction=e,localStorage.setItem(lf,e),this.emitUpdate()}isResizePaneActive(){return null!==document.activeElement&&(document.getElementById("app-menu-bar")?.contains(document.activeElement)?this.resizablePaneActive:null!==document.activeElement.closest(".resizable-component"))}_appFocusedElementChanged(){const e=this.isResizePaneActive();e!==this.resizablePaneActive&&(this.resizablePaneActive=e,this.emitUpdate())}}(sO,aO,lO,cO,uO,hO,pO,mO,fO,gO,vO);SO.onDidUpdate((e=>{iO=e}));const EO=new class{appStore;repositoryStateManager;statsStore;commitStatusStore;errorHandlers=new Array;incrementMetric;constructor(e,t,n,r){this.appStore=e,this.repositoryStateManager=t,this.statsStore=n,this.commitStatusStore=r,this.incrementMetric=n.increment.bind(n)}loadInitialState(){return this.appStore.loadInitialState()}addRepositories(e){return this.appStore._addRepositories(e)}addTutorialRepository(e,t,n){return this.appStore._addTutorialRepository(e,t,n)}resumeTutorial(e){return this.appStore._resumeTutorial(e)}pauseTutorial(e){return this.appStore._pauseTutorial(e)}async removeRepository(e,t){return this.appStore._removeRepository(e,t)}async updateRepositoryMissing(e,t){return this.appStore._updateRepositoryMissing(e,t)}loadNextCommitBatch(e){return this.appStore._loadNextCommitBatch(e)}loadChangedFilesForCurrentSelection(e){return this.appStore._loadChangedFilesForCurrentSelection(e)}changeCommitSelection(e,t,n){return this.appStore._changeCommitSelection(e,t,n)}updateShasToHighlight(e,t){this.appStore._updateShasToHighlight(e,t)}changeFileSelection(e,t){return this.appStore._changeFileSelection(e,t)}setRepositoryFilterText(e){return this.appStore._setRepositoryFilterText(e)}selectRepository(e){return this.appStore._selectRepository(e)}changeRepositorySection(e,t){return this.appStore._changeRepositorySection(e,t)}selectWorkingDirectoryFiles(e,t){return this.appStore._selectWorkingDirectoryFiles(e,t)}selectStashedFile(e,t){return this.appStore._selectStashedFile(e,t)}async commitIncludedChanges(e,t){return this.appStore._commitIncludedChanges(e,t)}changeFileIncluded(e,t,n){return this.appStore._changeFileIncluded(e,t,n)}changeFileLineSelection(e,t,n){return this.appStore._changeFileLineSelection(e,t,n)}changeIncludeAllFiles(e,t){return this.appStore._changeIncludeAllFiles(e,t)}refreshRepository(e){return this.appStore._refreshOrRecoverRepository(e)}async refreshAuthor(e){return this.appStore._refreshAuthor(e)}showPopup(e){return this.appStore._showPopup(e)}closePopup(e){return this.appStore._closePopup(e)}closePopupById(e){return this.appStore._closePopupById(e)}showFoldout(e){return this.appStore._showFoldout(e)}closeCurrentFoldout(){return this.appStore._closeCurrentFoldout()}closeFoldout(e){return this.appStore._closeFoldout(e)}async warnAboutRemoteCommits(e,t,n){if(null===t.upstream)return!1;if(0===(await gv(e,`refs/remotes/${t.upstream}`)).length)return!1;if(null===n)return!0;const r=await Vp(e,n,t.upstream);return null!==r&&r.length>0}async showRebaseDialog(e,t){const n=this.repositoryStateManager.get(e),r=wd(n,t),{tip:i}=n.branchesState;let o=null;if(i.kind!==Ar.Valid)throw new Error("Tip is not in a valid state, which is required to start the rebase flow");o=i.branch,this.initializeMultiCommitOperation(e,{kind:"Rebase",sourceBranch:null,commits:[],currentTip:i.branch.tip.sha},o,[],o.tip.sha),this.setMultiCommitOperationStep(e,r),this.showPopup({type:nl.MultiCommitOperation,repository:e})}async startRebase(e,t,n,r,i){const{askForConfirmationOnForcePush:o}=this.appStore.getState(),s=void 0!==i&&i.continueWithForcePush,{branchesState:a}=this.repositoryStateManager.get(e),l=md(a.tip);this.appStore._initializeMultiCommitOperation(e,{kind:"Rebase",commits:r,currentTip:t.tip.sha,sourceBranch:t},n,r,l),o&&!s&&await this.warnAboutRemoteCommits(e,t,n.tip.sha)?this.setMultiCommitOperationStep(e,{kind:"WarnForcePush",targetBranch:n,baseBranch:t,commits:r}):await this.rebase(e,t,n)}async launchRebaseOperation(e,t){await this.appStore._loadStatus(e);const n=this.repositoryStateManager.get(e),{conflictState:r}=n.changesState;if(null===r||!Qe(r))return;const i={...r,targetBranch:t};this.repositoryStateManager.updateChangesState(e,(()=>({conflictState:i})));const o=await Qp(e);if(null===o)return;const{progress:s,commits:a}=o;this.initializeMultiCommitOperation(e,{kind:"Rebase",sourceBranch:null,commits:a,currentTip:""},null,a,t),this.repositoryStateManager.updateMultiCommitOperationState(e,(()=>({progress:s})));const{manualResolutions:l}=r;this.setMultiCommitOperationStep(e,{kind:"ShowConflicts",conflictState:{kind:"multiCommitOperation",manualResolutions:l,ourBranch:t,theirBranch:void 0}}),this.showPopup({type:nl.MultiCommitOperation,repository:e})}createBranch(e,t,n,r=!1){return this.appStore._createBranch(e,t,n,r)}createTag(e,t,n){return this.appStore._createTag(e,t,n)}deleteTag(e,t){return this.appStore._deleteTag(e,t)}showCreateTagDialog(e,t,n,r){return this.showPopup({type:nl.CreateTag,repository:e,targetCommitSha:t,initialName:r,localTags:n})}showDeleteTagDialog(e,t){return this.showPopup({type:nl.DeleteTag,repository:e,tagName:t})}checkoutBranch(e,t,n){return this.appStore._checkoutBranch(e,t,n)}checkoutCommit(e,t){return this.appStore._checkoutCommit(e,t)}push(e){return this.appStore._push(e)}pushWithOptions(e,t){return void 0!==t&&t.forceWithLease&&this.dropCurrentBranchFromForcePushList(e),this.appStore._push(e,t)}pull(e){return this.appStore._pull(e)}fetchRefspec(e,t){return this.appStore._fetchRefspec(e,t)}fetch(e,t){return this.appStore._fetch(e,t)}publishRepository(e,t,n,r,i,o){return this.appStore._publishRepository(e,t,n,r,i,o)}async postError(e){let t=e;for(let e=this.errorHandlers.length-1;e>=0;e--){const n=this.errorHandlers[e];if(t=await n(t,this),!t)break}t&&Je(`Unhandled error ${t}. This shouldn't happen! All errors should be handled, even if it's just by the default handler.`)}presentError(e){return this.appStore._pushError(e)}cloneAgain(e,t){return this.appStore._cloneAgain(e,t)}async clone(e,t,n){return this.appStore._completeOpenInDesktop((async()=>{const{promise:r,repository:i}=this.appStore._clone(e,t,n);if(await this.selectRepository(i),!await r)return null;const o=await this.addRepositories([t]);if(o.length<1)return null;const s=o[0];return await this.selectRepository(s),Nr(s)&&this.showPopup({type:nl.ChooseForkSettings,repository:s}),s}))}changeRepositoryAlias(e,t){return this.appStore._changeRepositoryAlias(e,t)}renameBranch(e,t,n){return this.appStore._renameBranch(e,t,n)}deleteLocalBranch(e,t,n){return this.appStore._deleteBranch(e,t,n)}deleteRemoteBranch(e,t){return this.appStore._deleteBranch(e,t)}discardChanges(e,t,n=!0){return this.appStore._discardChanges(e,t,n)}discardChangesFromSelection(e,t,n,r){return this.appStore._discardChangesFromSelection(e,t,n,r)}async startAmendingRepository(e,t,n,r=!1){const i=this.repositoryStateManager.get(e),{tip:o}=i.branchesState,{askForConfirmationOnForcePush:s}=this.appStore.getState();if(s&&!r&&!n&&o.kind===Ar.Valid)return this.showPopup({type:nl.WarnForcePush,operation:"修改",onBegin:()=>{this.startAmendingRepository(e,t,n,!0)}});await this.changeRepositorySection(e,Ge.Changes),this.appStore._setRepositoryCommitToAmend(e,t),this.statsStore.increment("amendCommitStartedCount")}async stopAmendingRepository(e){this.appStore._setRepositoryCommitToAmend(e,null)}undoCommit(e,t,n=!0){return this.appStore._undoCommit(e,t,n)}resetToCommit(e,t,n=!0){return this.statsStore.increment("resetToCommitCount"),this.appStore._resetToCommit(e,t,n)}revertCommit(e,t){return this.appStore._revertCommit(e,t)}setSidebarWidth(e){return this.appStore._setSidebarWidth(e)}setUpdateBannerVisibility(e){return this.appStore._setUpdateBannerVisibility(e)}setUpdateShowCaseVisibility(e){return this.appStore._setUpdateShowCaseVisibility(e)}setBanner(e){return this.appStore._setBanner(e)}clearBanner(e){return this.appStore._clearBanner(e)}resetSidebarWidth(){return this.appStore._resetSidebarWidth()}setCommitSummaryWidth(e){return this.appStore._setCommitSummaryWidth(e)}resetCommitSummaryWidth(){return this.appStore._resetCommitSummaryWidth()}refreshIssues(e){return this.appStore._refreshIssues(e)}endWelcomeFlow(){return this.appStore._endWelcomeFlow()}setCommitMessageFocus(e){this.appStore._setCommitMessageFocus(e)}setCommitMessage(e,t){return this.appStore._setCommitMessage(e,t)}removeAccount(e){return this.appStore._removeAccount(e)}setAppMenuState(e){return this.appStore._setAppMenuState(e)}executeMenuItem(e){return(e=>{D(e.id)})(e),Promise.resolve()}setAccessKeyHighlightState(e){return this.appStore._setAccessKeyHighlightState(e)}mergeBranch(e,t,n,r=!1){return this.appStore._mergeBranch(e,t,n,r)}addBranchToForcePushList=(e,t,n)=>{this.appStore._addBranchToForcePushList(e,t,n)};dropCurrentBranchFromForcePushList=e=>{const t=this.repositoryStateManager.get(e),{forcePushBranches:n,tip:r}=t.branchesState;if(r.kind!==Ar.Valid)return;const i=new Map(n);i.delete(r.branch.nameWithoutRemote),this.repositoryStateManager.updateBranchesState(e,(()=>({forcePushBranches:i})))};setConflictsResolved(e){return this.appStore._setConflictsResolved(e)}async rebase(e,t,n){const{branchesState:r,multiCommitOperationState:i}=this.repositoryStateManager.get(e);if(null==i||"Rebase"!==i.operationDetail.kind)return;const{commits:o}=i.operationDetail,s=md(r.tip);log.info(`[rebase] starting rebase for ${n.name} at ${s}`),log.info("[rebase] to restore the previous state if this completed rebase is unsatisfactory:"),log.info(`[rebase] - git checkout ${n.name}`),log.info(`[rebase] - git reset ${s} --hard`);const a=await this.appStore._rebase(e,t,n);await this.appStore._loadStatus(e);const l=this.repositoryStateManager.get(e),{tip:c}=l.branchesState,u=md(c);if(log.info(`[rebase] completed rebase - got ${a} and on tip ${u} - kind ${c.kind}`),a===Lp.ConflictsEncountered){const{conflictState:r}=l.changesState;return null===r?void log.warn("[rebase] conflict state after rebase is null - unable to continue"):Qe(r)?this.startMultiCommitOperationConflictFlow("Rebase",e,t.name,n.name):void log.warn("[rebase] conflict state after rebase is not rebase conflicts - unable to continue")}if(a===Lp.AlreadyUpToDate){if(c.kind!==Ar.Valid)return void log.warn(`[rebase] tip after already up to date is ${c.kind} but this should be a valid tip if the rebase completed without error`);const{operationDetail:t}=i,{sourceBranch:r}=t,o=null!==n?n.name:"",s=null!==r?r.name:"",a={type:vu.BranchAlreadyUpToDate,ourBranch:o,theirBranch:s};this.statsStore.increment("rebaseWithBranchAlreadyUpToDateCount"),this.setBanner(a),this.endMultiCommitOperation(e),await this.refreshRepository(e)}else if(a===Lp.CompletedWithoutError){if(c.kind!==Ar.Valid)return void log.warn(`[rebase] tip after completing rebase is ${c.kind} but this should be a valid tip if the rebase completed without error`);this.statsStore.increment("rebaseSuccessWithoutConflictsCount"),await this.completeMultiCommitOperation(e,o.length)}else a===Lp.Error&&this.endMultiCommitOperation(e)}async abortRebase(e){await this.appStore._abortRebase(e),await this.appStore._loadStatus(e),await this.refreshRepository(e)}async continueRebase(e,t,n,r){const i=this.repositoryStateManager.get(t),{manualResolutions:o}=r,s=md(i.branchesState.tip);log.info(`[continueRebase] continuing rebase for ${s}`);const a=await this.appStore._continueRebase(t,n,o);a===Lp.CompletedWithoutError&&this.statsStore.recordOperationSuccessfulWithConflicts(e),await this.appStore._loadStatus(t);const l=this.repositoryStateManager.get(t),{tip:c}=l.branchesState,u=md(c);return log.info(`[continueRebase] completed rebase - got ${a} and on tip ${u} - kind ${c.kind}`),a}async abortMerge(e){await this.appStore._abortMerge(e),await this.appStore._loadStatus(e)}async abortSquashMerge(e){return await this.appStore._abortSquashMerge(e),this.appStore._refreshRepository(e)}async finishConflictedMerge(e,t,n,r){const i=this.repositoryStateManager.get(e),{conflictState:o}=i.changesState;null!==o?void 0!==await this.appStore._finishConflictedMerge(e,t,o.manualResolutions)&&(this.setBanner(n),r&&(this.statsStore.increment("squashMergeSuccessfulCount"),this.statsStore.increment("squashMergeSuccessfulWithConflictsCount"))):log.error("Conflict state missing during finishConflictedMerge. No merge will be committed.")}recordLaunchStats(e){return this.appStore._recordLaunchStats(e)}reportStats(){return this.appStore._reportStats()}setRemoteURL(e,t,n){return this.appStore._setRemoteURL(e,t,n)}openInBrowser(e){return this.appStore._openInBrowser(e)}appendIgnoreRule(e,t){return this.appStore._appendIgnoreRule(e,t)}appendIgnoreFile(e,t){return this.appStore._appendIgnoreFile(e,t)}async openShell(e,t=!1){await(async()=>!0)()||t?this.appStore._openShell(e):this.appStore._showPopup({type:nl.InstallGit,path:e})}async openInExternalEditor(e){return this.appStore._openInExternalEditor(e)}saveGitIgnore(e,t){return this.appStore._saveGitIgnore(e,t)}setStatsOptOut(e,t){return this.appStore.setStatsOptOut(e,t)}moveToApplicationsFolder(){return Z()}resetSignInState(){return this.appStore._resetSignInState()}beginDotComSignIn(){return this.appStore._beginDotComSignIn()}beginEnterpriseSignIn(){return this.appStore._beginEnterpriseSignIn()}setSignInEndpoint(e){return this.appStore._setSignInEndpoint(e)}setSignInCredentials(e,t){return this.appStore._setSignInCredentials(e,t)}requestBrowserAuthentication(){return this.appStore._requestBrowserAuthentication()}async requestBrowserAuthenticationToDotcom(){return await this.beginDotComSignIn(),this.requestBrowserAuthentication()}setSignInOTP(e){return this.appStore._setSignInOTP(e)}async showDotComSignInDialog(){await this.appStore._beginDotComSignIn(),await this.appStore._showPopup({type:nl.SignIn})}async showEnterpriseSignInDialog(e){await this.appStore._beginEnterpriseSignIn(),void 0!==e&&await this.appStore._setSignInEndpoint(e),await this.appStore._showPopup({type:nl.SignIn})}async showCreateForkDialog(e){await this.appStore._showCreateForkDialog(e)}async showUnknownAuthorsCommitWarning(e,t){return this.appStore._showPopup({type:nl.UnknownAuthors,authors:e,onCommit:t})}async showRepoRulesCommitBypassWarning(e,t,n){return this.appStore._showPopup({type:nl.ConfirmRepoRulesBypass,repository:e,branch:t,onConfirm:n})}registerErrorHandler(e){return this.errorHandlers.push(e),new st.Disposable((()=>{const t=this.errorHandlers.indexOf(e);t>=0&&this.errorHandlers.splice(t,1)}))}async relocateRepository(e){const t=await ce({properties:["openDirectory"]});null!==t&&await this.updateRepositoryPath(e,t)}async updateRepositoryWorkflowPreferences(e,t){await this.appStore._updateRepositoryWorkflowPreferences(e,t)}async updateRepositoryPath(e,t){await this.appStore._updateRepositoryPath(e,t)}async setAppFocusState(e){await this.appStore._setAppFocusState(e),e?this.commitStatusStore.startBackgroundRefresh():this.commitStatusStore.stopBackgroundRefresh()}async initializeAppFocusState(){const e=await A();this.setAppFocusState(e)}getRepositoryFromPullRequest(e){const t=this.appStore.getState().repositories,n=e.head.repo?.clone_url,r=e.base.repo?.clone_url;if(void 0===n||void 0===r)return null;for(const e of t)if(this.doesRepositoryMatchUrl(e,n))return e;for(const e of t)if(this.doesRepositoryMatchUrl(e,r))return e;return null}doesRepositoryMatchUrl(e,t){if(e instanceof Ir&&_r(e)){const n=e.gitHubRepository.htmlURL,r=e.gitHubRepository.parent?.htmlURL??null;if(null!==n&&hr(n,t))return!0;if(null!==r&&hr(r,t))return!0}return!1}async openRepositoryFromUrl(t){const{url:n,pr:r,branch:i,filepath:o}=t;let s;if(s=null!==r?await this.openPullRequestFromUrl(n,r):null!==i?await this.openBranchNameFromUrl(n,i):await this.openOrCloneRepository(n),null!==s&&null!==o){const t=await function(t,...n){return async function(t,n,r=e){if(0===t.length)return null;const{join:i,normalize:o,resolve:s}=r,a=o(t),l=o(i(...n));if(-1!==a.indexOf("\0")||-1!==l.indexOf("\0"))return null;const c=s(a,l),u=await(0,y.realpath)(a);return(await(0,y.realpath)(c)).startsWith(u)?c:null}(t,n)}(s.path,o);null!==t?rt.showItemInFolder(t):log.error(`Prevented attempt to open path outside of the repository root: ${o}`)}}async openBranchNameFromUrl(e,t){const n=await this.openOrCloneRepository(e);return null===n?null:(await this.appStore._refreshRepository(n),await this.appStore._fetch(n,Xt.UserInitiatedTask),await this.checkoutLocalBranch(n,t),n)}async openPullRequestFromUrl(e,t){const n=await this.appStore.fetchPullRequest(e,t);if(null===n)return null;let r=this.getRepositoryFromPullRequest(n);return null!==r?await this.selectRepository(r):r=await this.openOrCloneRepository(e),null===r?(log.warn(`Open Repository from URL failed, did not find or clone repository: ${e}`),null):_r(r)?(await this.appStore._refreshRepository(r),null===n.head.repo?null:(await this.appStore._checkoutPullRequest(r,n.number,n.head.repo.owner.login,n.head.repo.clone_url,n.head.ref),r)):(log.warn(`Received a non-GitHub repository when opening repository from URL: ${e}`),null)}async dispatchURLAction(e){switch(e.name){case"oauth":try{log.info("[Dispatcher] requesting authenticated user");const n=await async function(e,t){if(!hw||t!==hw.state)return void log.warn("requestAuthenticatedUser was not called with valid OAuth state. This is likely due to a browser reloading the callback URL. Contact GitHub Support if you believe this is an error");const n=await async function(e,t){try{const n=Xn(e),r=await on(n,null,"POST","login/oauth/access_token",{client_id:Mn,client_secret:Bn,code:t});return Jn(e,r),(await sn(r)).access_token}catch(t){return log.warn(`requestOAuthToken: failed with endpoint ${e}`,t),null}}(hw.endpoint,e);return n?Yn(hw.endpoint,n):null}(e.code,e.state);n?(t=n,hw||Je("`askUserToOAuth` must be called before resolving an auth request."),hw.resolve(t),hw=null):null===n&&pw(new Error("Unable to fetch authenticated user."))}catch(e){pw(e)}await A()||(log.info("refocusing the main window after the OAuth flow is completed"),window.focus());break;case"open-repository-from-url":this.openRepositoryFromUrl(e);break;case"open-repository-from-path":const n=await wv(e.path).then((t=>"regular"===t.kind?t.topLevelWorkingDirectory:e.path)).catch((t=>(log.error("Could not determine repository type",t),e.path))),{repositories:r}=this.appStore.getState(),i=lr(r,n);i?(await this.selectRepository(i),this.statsStore.recordAddExistingRepository()):await this.showPopup({type:nl.AddRepository,path:n});break;default:const o=e;log.warn(`Unknown URL action: ${o.name} - payload: ${JSON.stringify(o)}`)}var t}setAskToMoveToApplicationsFolderSetting(e){return this.appStore._setAskToMoveToApplicationsFolderSetting(e)}setConfirmRepoRemovalSetting(e){return this.appStore._setConfirmRepositoryRemovalSetting(e)}setConfirmDiscardChangesSetting(e){return this.appStore._setConfirmDiscardChangesSetting(e)}setConfirmDiscardChangesPermanentlySetting(e){return this.appStore._setConfirmDiscardChangesPermanentlySetting(e)}setUncommittedChangesStrategySetting(e){return this.appStore._setUncommittedChangesStrategySetting(e)}setExternalEditor(e){return this.appStore._setExternalEditor(e)}setShell(e){return this.appStore._setShell(e)}async checkoutLocalBranch(e,t){let n=!0;const r=this.repositoryStateManager.get(e),i=r.branchesState.allBranches,{tip:o}=r.branchesState;o.kind===Ar.Valid&&(n=o.branch.nameWithoutRemote!==t);const s=i.find((e=>e.nameWithoutRemote===t));n&&void 0!==s&&await this.checkoutBranch(e,s)}async openOrCloneRepository(e){const t=this.appStore.getState().repositories.find((t=>this.doesRepositoryMatchUrl(t,e)));return t?await this.selectRepository(t):this.appStore._startOpenInDesktop((()=>{this.changeCloneRepositoriesTab(Pr.Generic),this.showPopup({type:nl.CloneRepository,initialURL:e})}))}async openOrAddRepository(e){const t=this.appStore.getState().repositories.find((t=>t.path===e));return t?await this.selectRepository(t):this.appStore._startOpenInDesktop((()=>{this.showPopup({type:nl.AddRepository,path:e})}))}async installCLI(){try{await async function(){if(await async function(){try{return await(0,y.readlink)(jD)}catch{return null}}()!==GD)try{await VD(!1)}catch(e){await VD(!0)}}(),this.showPopup({type:nl.CLIInstalled})}catch(e){log.error("Error installing CLI",e),this.postError(e)}}promptForGenericGitAuthentication(e,t){return this.appStore.promptForGenericGitAuthentication(e,t)}async saveGenericGitCredentials(e,t,n){log.info(`storing generic credentials for '${e}' and '${t}'`),function(e,t){const n=ql(e);localStorage.setItem(n,t)}(e,t);try{await function(e,t,n){const r=Ka(e);return $l.setItem(r,t,n)}(e,t,n)}catch(n){log.error(`Error saving generic git credentials: ${t}@${e}`,n),this.postError(n)}}async performRetry(e){switch(e.type){case ot.Push:return this.push(e.repository);case ot.Pull:return this.pull(e.repository);case ot.Fetch:return this.fetch(e.repository,Xt.UserInitiatedTask);case ot.Clone:await this.clone(e.url,e.path,e.options);break;case ot.Checkout:await this.checkoutBranch(e.repository,e.branch);break;case ot.Merge:return this.mergeBranch(e.repository,e.theirBranch,null);case ot.Rebase:return this.rebase(e.repository,e.baseBranch,e.targetBranch);case ot.CherryPick:return this.cherryPick(e.repository,e.targetBranch,e.commits,e.sourceBranch);case ot.CreateBranchForCherryPick:return this.startCherryPickWithBranchName(e.repository,e.targetBranchName,e.startPoint,e.noTrackOption,e.commits,e.sourceBranch);case ot.Squash:return this.squash(e.repository,e.toSquash,e.squashOnto,e.lastRetainedCommitRef,e.commitContext);case ot.Reorder:return this.reorderCommits(e.repository,e.commitsToReorder,e.beforeCommit,e.lastRetainedCommitRef);case ot.DiscardChanges:return this.discardChanges(e.repository,e.files,!1);default:return et(0,`Unknown retry action: ${e}`)}}changeImageDiffType(e){return this.appStore._changeImageDiffType(e)}onHideWhitespaceInChangesDiffChanged(e,t){return this.appStore._setHideWhitespaceInChangesDiff(e,t)}onHideWhitespaceInHistoryDiffChanged(e,t,n=null){return this.appStore._setHideWhitespaceInHistoryDiff(e,t,n)}onHideWhitespaceInPullRequestDiffChanged(e,t,n=null){this.appStore._setHideWhitespaceInPullRequestDiff(e,t,n)}onShowSideBySideDiffChanged(e){return this.appStore._setShowSideBySideDiff(e)}installGlobalLFSFilters(e){return this.appStore._installGlobalLFSFilters(e)}installLFSHooks(e){return this.appStore._installLFSHooks(e)}changeCloneRepositoriesTab(e){return this.appStore._changeCloneRepositoriesTab(e)}refreshApiRepositories(e){return this.appStore._refreshApiRepositories(e)}changeBranchesTab(e){return this.appStore._changeBranchesTab(e)}showGitHubExplore(e){return this.appStore._showGitHubExplore(e)}createPullRequest(e,t){return this.appStore._createPullRequest(e,t)}showPullRequest(e){return this.appStore._showPullRequest(e)}async showPullRequestByPR(e){return this.appStore._showPullRequestByPR(e)}openCreatePullRequestInBrowser(e,t){return this.appStore._openCreatePullRequestInBrowser(e,t)}updateExistingUpstreamRemote(e){return this.appStore._updateExistingUpstreamRemote(e)}ignoreExistingUpstreamRemote(e){return this.appStore._ignoreExistingUpstreamRemote(e)}async checkoutPullRequest(e,t){if(null!==t.head.gitHubRepository.cloneURL)return this.appStore._checkoutPullRequest(e,t.pullRequestNumber,t.head.gitHubRepository.owner.login,t.head.gitHubRepository.cloneURL,t.head.ref)}setShowCoAuthoredBy(e,t){return this.appStore._setShowCoAuthoredBy(e,t)}setCoAuthors(e,t){return this.appStore._setCoAuthors(e,t)}initializeCompare(e,t){return this.appStore._initializeCompare(e,t)}executeCompare(e,t){return this.appStore._executeCompare(e,t)}updateCompareForm(e,t){return this.appStore._updateCompareForm(e,t)}updateManualConflictResolution(e,t,n){return this.appStore._updateManualConflictResolution(e,t,n)}async confirmOrForcePush(e){const{askForConfirmationOnForcePush:t}=this.appStore.getState(),{branchesState:n}=this.repositoryStateManager.get(e),{tip:r}=n;if(r.kind!==Ar.Valid)return void log.warn("Could not find a branch to perform force push");const{upstream:i}=r.branch;null!==i?t?this.showPopup({type:nl.ConfirmForcePush,repository:e,upstreamBranch:i}):await this.performForcePush(e):log.warn("Could not find an upstream branch which will be pushed")}async performForcePush(e){await this.pushWithOptions(e,{forceWithLease:!0}),await this.appStore._loadStatus(e)}setConfirmDiscardStashSetting(e){return this.appStore._setConfirmDiscardStashSetting(e)}setConfirmCheckoutCommitSetting(e){return this.appStore._setConfirmCheckoutCommitSetting(e)}setConfirmForcePushSetting(e){return this.appStore._setConfirmForcePushSetting(e)}setConfirmUndoCommitSetting(e){return this.appStore._setConfirmUndoCommitSetting(e)}async convertRepositoryToFork(e,t){return this.appStore._convertRepositoryToFork(e,t)}recordMenuInitiatedMerge(e=!0){return this.statsStore.recordMenuInitiatedMerge(e)}setSelectedTheme(e){return this.appStore._setSelectedTheme(e)}recordRepoClicked(e){return this.statsStore.recordRepoClicked(e)}recordWelcomeWizardInitiated(){return this.statsStore.recordWelcomeWizardInitiated()}recordCreateRepository(){this.statsStore.recordCreateRepository()}recordAddExistingRepository(){this.statsStore.recordAddExistingRepository()}refreshPullRequests(e){return this.appStore._refreshPullRequests(e)}tryGetCommitStatus(e,t,n){return this.commitStatusStore.tryGetStatus(e,t,n)}subscribeToCommitStatus(e,t,n,r){return this.commitStatusStore.subscribe(e,t,n,r)}manualRefreshSubscription(e,t,n){return this.commitStatusStore.manualRefreshSubscription(e,t,n)}async rerequestCheckSuites(e,t,n){const r=new Array;if(1===t.length&&void 0!==t[0].actionsWorkflow)return r.push(this.commitStatusStore.rerunJob(e,t[0].id)),Promise.all(r);const i=new Set,o=new Set;for(const e of t)n&&void 0!==e.actionsWorkflow?o.add(e.actionsWorkflow.id):null!==e.checkSuiteId&&i.add(e.checkSuiteId);for(const t of o)r.push(this.commitStatusStore.rerunFailedJobs(e,t));for(const t of i)r.push(this.commitStatusStore.rerequestCheckSuite(e,t));return Promise.all(r)}async fetchCheckSuite(e,t){return this.commitStatusStore.fetchCheckSuite(e,t)}createStashForCurrentBranch(e,t=!0){return this.appStore._createStashForCurrentBranch(e,t)}dropStash(e,t){return this.appStore._dropStashEntry(e,t)}popStash(e,t){return this.appStore._popStashEntry(e,t)}setStashedFilesWidth=e=>this.appStore._setStashedFilesWidth(e);resetStashedFilesWidth=()=>this.appStore._resetStashedFilesWidth();hideStashedChanges(e){return this.appStore._hideStashedChanges(e)}skipPickEditorTutorialStep(e){return this.appStore._skipPickEditorTutorialStep(e)}markPullRequestTutorialStepAsComplete(e){return this.appStore._markPullRequestTutorialStepAsComplete(e)}createTutorialRepository(e){return this.appStore._createTutorialRepository(e)}async openIssueCreationPage(e){const t=Mr(e);return null!==t&&(this.statsStore.increment("issueCreationWebpageOpenedCount"),this.appStore._openInBrowser(`${t}/issues/new/choose`))}setRepositoryIndicatorsEnabled(e){this.appStore._setRepositoryIndicatorsEnabled(e)}setCommitSpellcheckEnabled(e){this.appStore._setCommitSpellcheckEnabled(e)}setUseWindowsOpenSSH(e){this.appStore._setUseWindowsOpenSSH(e)}setShowCommitLengthWarning(e){this.appStore._setShowCommitLengthWarning(e)}setNotificationsEnabled(e){this.appStore._setNotificationsEnabled(e)}logHowToRevertCherryPick(e,t){log.info(`[cherryPick] starting cherry-pick for ${e} at ${t}`),log.info("[cherryPick] to restore the previous state if this completed cherry-pick is unsatisfactory:"),log.info(`[cherryPick] - git checkout ${e}`),log.info(`[cherryPick] - git reset ${t} --hard`)}initializeMultiCommitOperationStateCherryPick(e,t,n,r){null===this.repositoryStateManager.get(e).multiCommitOperationState&&this.initializeMultiCommitOperation(e,{kind:"Cherry-pick",sourceBranch:r,branchCreated:!1,commits:n},t,n,r?.tip.sha??null)}async cherryPick(e,t,n,r){this.initializeMultiCommitOperationStateCherryPick(e,t,n,r),this.appStore._initializeCherryPickProgress(e,n),this.switchMultiCommitOperationToShowProgress(e);const i={type:ot.CherryPick,repository:e,targetBranch:t,commits:n,sourceBranch:r};if(this.appStore._checkForUncommittedChanges(e,i))return void this.endMultiCommitOperation(e);const{tip:o}=t;this.repositoryStateManager.updateMultiCommitOperationUndoState(e,(()=>({undoSha:o.sha,branchName:t.name}))),n.length>1&&this.statsStore.increment("cherryPickMultipleCommitsCount");const s=await this.appStore._checkoutBranchReturnName(e,t);if(void 0===s)return log.error("[cherryPick] - Failed to check out the target branch."),void this.endMultiCommitOperation(e);const a=await this.appStore._cherryPick(e,n);a!==ad.UnableToStart&&this.logHowToRevertCherryPick(s,o.sha),this.processCherryPickResult(e,a,s,n,r)}async startCherryPickWithBranchName(e,t,n,r=!1,i,o){const s={type:ot.CreateBranchForCherryPick,repository:e,targetBranchName:t,startPoint:n,noTrackOption:r,commits:i,sourceBranch:o};if(this.appStore._checkForUncommittedChanges(e,s))return void this.endMultiCommitOperation(e);const a=await this.appStore._createBranch(e,t,n,r,!1);return void 0===a?(log.error("[startCherryPickWithBranchName] - Unable to create branch for cherry-pick operation"),void this.endMultiCommitOperation(e)):(this.initializeMultiCommitOperationStateCherryPick(e,a,i,o),this.appStore._setMultiCommitOperationTargetBranch(e,a),this.appStore._setCherryPickBranchCreated(e,!0),this.statsStore.increment("cherryPickBranchCreatedCount"),this.cherryPick(e,a,i,o))}async startCherryPickWithBranch(e,t){const{branchesState:n}=this.repositoryStateManager.get(e),{dragData:r}=Zs;if(null==r||r.type!==Js.Commit)return log.error("[cherryPick] Invalid Cherry-picking State: Could not determine selected commits."),void this.endMultiCommitOperation(e);const{tip:i}=n;if(i.kind!==Ar.Valid)throw this.endMultiCommitOperation(e),new Error("Tip is not in a valid state, which is required to start the cherry-pick flow.");const o=i.branch,{commits:s}=r;this.initializeMultiCommitOperation(e,{kind:"Cherry-pick",sourceBranch:o,branchCreated:!1,commits:s},t,s,i.branch.tip.sha),this.showPopup({type:nl.MultiCommitOperation,repository:e}),this.statsStore.increment("cherryPickViaDragAndDropCount"),this.setCherryPickBranchCreated(e,!1),this.cherryPick(e,t,s,o)}async startCherryPickWithPullRequest(e,t){const{pullRequestNumber:n,head:r}=t,{ref:i,gitHubRepository:o}=r,{cloneURL:s,owner:{login:a}}=o;let l;return null!==s&&(l=await this.appStore._findPullRequestBranch(e,n,a,s,i)),void 0===l?(log.error("[cherryPick] Could not determine target branch for cherry-pick operation - aborting cherry-pick."),void this.endMultiCommitOperation(e)):this.startCherryPickWithBranch(e,l)}async continueCherryPick(e,t,n,r,i){await this.switchMultiCommitOperationToShowProgress(e);const o=await this.appStore._continueCherryPick(e,t,n.manualResolutions);o===ad.CompletedWithoutError&&this.statsStore.increment("cherryPickSuccessfulWithConflictsCount"),this.processCherryPickResult(e,o,n.targetBranchName,r,i)}startConflictCherryPickFlow(e){const{changesState:t,multiCommitOperationState:n}=this.repositoryStateManager.get(e),{conflictState:r}=t;if(null===r||!Ze(r)||null==n||"Cherry-pick"!==n.operationDetail.kind)return log.error("[cherryPick] - conflict state was null or not in a cherry-pick conflict state - unable to continue"),void this.endMultiCommitOperation(e);const{sourceBranch:i}=n.operationDetail;this.setMultiCommitOperationStep(e,{kind:"ShowConflicts",conflictState:{kind:"multiCommitOperation",manualResolutions:r.manualResolutions,ourBranch:r.targetBranchName,theirBranch:null!==i?i.name:void 0}}),this.statsStore.increment("cherryPickConflictsEncounteredCount")}async abortCherryPick(e,t){await this.appStore._abortCherryPick(e,t),await this.appStore._loadStatus(e),this.endMultiCommitOperation(e),await this.refreshRepository(e)}async switchMultiCommitOperationToShowProgress(e){this.setMultiCommitOperationStep(e,{kind:"ShowProgress"}),await kc(500)}async processCherryPickResult(e,t,n,r,i){switch(await this.appStore._loadStatus(e),t){case ad.CompletedWithoutError:await this.changeCommitSelection(e,[r[0].sha],!0),await this.completeMultiCommitOperation(e,r.length);break;case ad.ConflictsEncountered:this.startConflictCherryPickFlow(e);break;case ad.UnableToStart:this.endMultiCommitOperation(e);break;default:this.appStore._clearCherryPickingHead(e,i),this.endMultiCommitOperation(e),this.appStore._closePopup()}}setCherryPickProgressFromState(e){return this.appStore._setCherryPickProgressFromState(e)}setDragElement(e){this.appStore._setDragElement(e)}clearDragElement(){this.appStore._setDragElement(null)}async setCherryPickCreateBranchFlowStep(e,t,n,r){const{branchesState:i}=this.repositoryStateManager.get(e),{defaultBranch:o,upstreamDefaultBranch:s,allBranches:a,tip:l}=i;if(l.kind!==Ar.Valid)return this.appStore._clearCherryPickingHead(e,null),this.endMultiCommitOperation(e),void log.error("Tip is in unknown state. Cherry-pick aborted.");const c=_r(e)?Br(e):null;this.initializeMultiCommitOperation(e,{kind:"Cherry-pick",sourceBranch:r,branchCreated:!0,commits:n},null,n,l.branch.tip.sha);const u={kind:"CreateBranch",allBranches:a,defaultBranch:o,upstreamDefaultBranch:s,upstreamGhRepo:c,tip:l,targetBranchName:t};return this.appStore._setMultiCommitOperationStep(e,u)}setMultiCommitOperationTargetBranch(e,t){this.repositoryStateManager.updateMultiCommitOperationState(e,(()=>({targetBranch:t})))}setCherryPickBranchCreated(e,t){this.appStore._setCherryPickBranchCreated(e,t)}async getBranchAheadBehind(e,t){return this.appStore._getBranchAheadBehind(e,t)}setLastThankYou(e){this.appStore._setLastThankYou(e)}async reorderCommits(e,t,n,r,i=!1){const o={type:ot.Reorder,repository:e,commitsToReorder:t,beforeCommit:n,lastRetainedCommitRef:r};if(this.appStore._checkForUncommittedChanges(e,o))return;const s=this.repositoryStateManager.get(e),{tip:a}=s.branchesState;if(a.kind!==Ar.Valid)return void log.info("[reorder] - invalid tip state - could not perform reorder.");this.statsStore.increment("reorderStartedCount"),t.length>1&&this.statsStore.increment("reorderMultipleCommitsCount"),this.appStore._initializeMultiCommitOperation(e,{kind:"Reorder",lastRetainedCommitRef:r,beforeCommit:n,commits:t,currentTip:a.branch.tip.sha},a.branch,t,a.branch.tip.sha),this.showPopup({type:nl.MultiCommitOperation,repository:e}),this.appStore._setMultiCommitOperationUndoState(e,a);const{askForConfirmationOnForcePush:l}=this.appStore.getState();if(l&&!i&&await this.warnAboutRemoteCommits(e,a.branch,r))return void this.setMultiCommitOperationStep(e,{kind:"WarnForcePush",targetBranch:a.branch,baseBranch:a.branch,commits:t});const c=await this.appStore._reorderCommits(e,t,n,r);return this.logHowToRevertMultiCommitOperation("Reorder",a),this.processMultiCommitOperationRebaseResult("Reorder",e,c,t.length,a.branch.name,`${"Reorder".toLowerCase()} commit`)}async squash(e,t,n,r,i,o=!1){const s={type:ot.Squash,repository:e,toSquash:t,squashOnto:n,lastRetainedCommitRef:r,commitContext:i};if(this.appStore._checkForUncommittedChanges(e,s))return;const a=this.repositoryStateManager.get(e),{tip:l}=a.branchesState;if(l.kind!==Ar.Valid)return void log.info("[squash] - invalid tip state - could not perform squash.");t.length>1&&this.statsStore.increment("squashMultipleCommitsInvokedCount"),this.initializeMultiCommitOperation(e,{kind:"Squash",lastRetainedCommitRef:r,commitContext:i,targetCommit:n,commits:t,currentTip:l.branch.tip.sha},l.branch,t,l.branch.tip.sha),this.closePopup(nl.CommitMessage),this.showPopup({type:nl.MultiCommitOperation,repository:e}),this.appStore._setMultiCommitOperationUndoState(e,l);const{askForConfirmationOnForcePush:c}=this.appStore.getState();if(c&&!o&&await this.warnAboutRemoteCommits(e,l.branch,r))return void this.setMultiCommitOperationStep(e,{kind:"WarnForcePush",targetBranch:l.branch,baseBranch:l.branch,commits:t});const u=await this.appStore._squash(e,t,n,r,i);return this.logHowToRevertMultiCommitOperation("Squash",l),this.processMultiCommitOperationRebaseResult("Squash",e,u,t.length+1,l.branch.name,`${"Squash".toLowerCase()} commit`)}initializeMultiCommitOperation(e,t,n,r,i){this.appStore._initializeMultiCommitOperation(e,t,n,r,i)}logHowToRevertMultiCommitOperation(e,t){const n=e.toLocaleLowerCase(),r=md(t);log.info(`[${n}] starting rebase for ${t.branch.name} at ${r}`),log.info(`[${n}] to restore the previous state if this completed rebase is unsatisfactory:`),log.info(`[${n}] - git checkout ${t.branch.name}`),log.info(`[${n}] - git reset ${r} --hard`)}async processMultiCommitOperationRebaseResult(e,t,n,r,i,o){const s=await this.appStore._loadStatus(t);switch(n){case Lp.AlreadyUpToDate:iC("rebaseConflictsWithBranchAlreadyUpToDate",new Error("processMultiCommitOperationRebaseResult was invoked (which means Desktop went into a conflicts-found state) but the branch was already up-to-date, so there couldn't be any conflicts at all"));break;case Lp.CompletedWithoutError:null!==s&&void 0!==s.currentTip&&await this.changeCommitSelection(t,[s.currentTip],!0),await this.completeMultiCommitOperation(t,r);break;case Lp.ConflictsEncountered:await this.refreshRepository(t),this.startMultiCommitOperationConflictFlow(e,t,i,o);break;default:this.appStore._closePopup()}}startMultiCommitOperationConflictFlow(e,t,n,r){const{changesState:{conflictState:i}}=this.repositoryStateManager.get(t);if(null===i)return log.error("[startMultiCommitOperationConflictFlow] - conflict state was null - unable to continue"),void this.endMultiCommitOperation(t);const{manualResolutions:o}=i;this.setMultiCommitOperationStep(t,{kind:"ShowConflicts",conflictState:{kind:"multiCommitOperation",manualResolutions:o,ourBranch:n,theirBranch:r}}),this.statsStore.recordOperationConflictsEncounteredCount(e),this.showPopup({type:nl.MultiCommitOperation,repository:t})}async completeMultiCommitOperation(e,t){this.closePopup();const{branchesState:{tip:n},multiCommitOperationState:r}=this.repositoryStateManager.get(e);if(null===r)return void log.error("[completeMultiCommitOperation] - No multi commit operation to complete.");const{operationDetail:i,originalBranchTip:o}=r,{kind:s}=i,a=this.getMultiCommitOperationSuccessBanner(e,t,r);this.setBanner(a),n.kind===Ar.Valid&&null!==o&&"Cherry-pick"!==s&&this.addBranchToForcePushList(e,n,o),this.statsStore.recordOperationSuccessful(s),this.endMultiCommitOperation(e),await this.refreshRepository(e)}getMultiCommitOperationSuccessBanner(e,t,n){const{operationDetail:r,targetBranch:i}=n,{kind:o}=r,s={count:t,onUndo:()=>{this.undoMultiCommitOperation(n,e,t)}};let a;switch(o){case"Squash":a={...s,type:vu.SuccessfulSquash};break;case"Reorder":a={...s,type:vu.SuccessfulReorder};break;case"Cherry-pick":a={...s,type:vu.SuccessfulCherryPick,targetBranchName:null!==i?i.name:""};break;case"Rebase":const{sourceBranch:e}=r;a={type:vu.SuccessfulRebase,targetBranch:null!==i?i.name:"",baseBranch:null!==e?e.name:void 0};break;case"Merge":throw new Error(`Unexpected multi commit operation kind ${o}`);default:et(0,`Unsupported multi operation kind ${o}`)}return a}async undoMultiCommitOperation(e,t,n){const r=await this.appStore._undoMultiCommitOperation(e,t,n);return r&&this.statsStore.recordOperationUndone(e.operationDetail.kind),r}handleConflictsDetectedOnError(e,t,n){return this.appStore._handleConflictsDetectedOnError(e,t,n)}setMultiCommitOperationStep(e,t){return this.appStore._setMultiCommitOperationStep(e,t)}endMultiCommitOperation(e){this.appStore._endMultiCommitOperation(e)}onConflictsFoundBanner=(e,t,n)=>{this.setBanner({type:vu.ConflictsFound,operationDescription:t,onOpenConflictsDialog:async()=>{const{changesState:t,multiCommitOperationState:r}=this.repositoryStateManager.get(e),{conflictState:i}=t;if(null==i)return void log.error("[onConflictsFoundBanner] App is in invalid state to so conflicts dialog.");null!==r&&"Cherry-pick"===r.operationDetail.kind&&await this.setCherryPickProgressFromState(e);const{manualResolutions:o}=i;this.setMultiCommitOperationStep(e,{kind:"ShowConflicts",conflictState:{...n,manualResolutions:o}}),this.showPopup({type:nl.MultiCommitOperation,repository:e})}})};startMergeBranchOperation(e,t=!1,n){const{branchesState:r}=this.repositoryStateManager.get(e),{defaultBranch:i,allBranches:o,recentBranches:s,tip:a}=r;let l=null;if(a.kind!==Ar.Valid)throw new Error("Tip is not in a valid state, which is required to start the merge operation");l=a.branch,this.initializeMergeOperation(e,t,null),this.setMultiCommitOperationStep(e,{kind:"ChooseBranch",defaultBranch:i,currentBranch:l,allBranches:o,recentBranches:s,initialBranch:null!==n?n:void 0}),this.showPopup({type:nl.MultiCommitOperation,repository:e})}recordSquashInvoked(e){e?this.statsStore.increment("squashViaContextMenuInvokedCount"):this.statsStore.increment("squashViaDragAndDropInvokedCount")}initializeMergeOperation(e,t,n){const{branchesState:{tip:r}}=this.repositoryStateManager.get(e);let i=null;if(r.kind!==Ar.Valid)throw new Error("Tip is not in a valid state, which is required to initialize the merge operation");i=r.branch,this.initializeMultiCommitOperation(e,{kind:"Merge",isSquash:t,sourceBranch:n},i,[],i.tip.sha)}setShowCIStatusPopover(e){this.appStore._setShowCIStatusPopover(e),e&&this.statsStore.increment("opensCheckRunsPopover")}_toggleCIStatusPopover(){this.appStore._toggleCIStatusPopover()}recordPullRequestReviewDialogSwitchToPullRequest(e){this.statsStore.recordPullRequestReviewDialogSwitchToPullRequest(e)}showUnreachableCommits(e){this.statsStore.increment("multiCommitDiffUnreachableCommitsDialogOpenedCount"),this.showPopup({type:nl.UnreachableCommits,selectedTab:e})}startPullRequest(e){this.appStore._startPullRequest(e)}changePullRequestFileSelection(e,t){return this.appStore._changePullRequestFileSelection(e,t)}setPullRequestFileListWidth(e){return this.appStore._setPullRequestFileListWidth(e)}resetPullRequestFileListWidth(){return this.appStore._resetPullRequestFileListWidth()}updatePullRequestBaseBranch(e,t){this.appStore._updatePullRequestBaseBranch(e,t)}quitApp(e){this.appStore._quitApp(e)}cancelQuittingApp(){this.appStore._cancelQuittingApp()}setPullRequestSuggestedNextAction(e){return this.appStore._setPullRequestSuggestedNextAction(e)}appFocusedElementChanged(){this.appStore._appFocusedElementChanged()}updateCachedRepoRulesets(e){this.appStore._updateCachedRepoRulesets(e)}onChecksFailedNotification(e,t,n,r,i){this.appStore.onChecksFailedNotification(e,t,n,r,i)}}(SO,fO,cO,yO);EO.registerErrorHandler(XD),EO.registerErrorHandler((async function(e,t){return e instanceof Nc?(t.showPopup({type:nl.UpstreamAlreadyExists,repository:e.repository,existingRemote:e.existingRemote}),null):e})),EO.registerErrorHandler((async function(e,t){const n=function(e){return e instanceof Sl?e:null}(e);if(!n)return e;const{suggestDefaultEditor:r,openPreferences:i}=n.metadata;return await t.showPopup({type:nl.ExternalEditorFailed,message:n.message,suggestDefaultEditor:r,openPreferences:i}),null})),EO.registerErrorHandler((async function(e,t){return e instanceof bc?(await t.showPopup({type:nl.OpenShellFailed,message:e.message}),null):e})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;const r=YD(n.underlyingError);if(!r)return e;const i=r.result.gitError;if(!i)return e;if(i!==Ua.ko.MergeConflicts)return e;const{repository:o,gitContext:s}=n.metadata;if(null==o)return e;if(!(o instanceof Ir))return e;if(null==s)return e;if("merge"!==s.kind&&"pull"!==s.kind)return e;switch(s.kind){case"pull":t.incrementMetric("mergeConflictFromPullCount");break;case"merge":t.incrementMetric("mergeConflictFromExplicitMergeCount")}const{currentBranch:a,theirBranch:l}=s;return t.handleConflictsDetectedOnError(o,a,l),null})),EO.registerErrorHandler((async function(e,t){const n=YD(e);if(!n)return e;const r=n.result.gitError;return r?r!==Ua.ko.LFSAttributeDoesNotMatch?e:(t.showPopup({type:nl.LFSAttributeMismatch}),null):e})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;const r=YD(n.underlyingError);if(!r||null===r.result.gitError)return e;if(!jw(r.result.gitError))return e;const{repository:i,retryAction:o}=n.metadata;return i instanceof Ir&&_r(i)?void 0===o||o.type!==ot.Push||xr(i.gitHubRepository)?e:(t.showCreateForkDialog(i),null):e})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;const r=YD(n.underlyingError);if(!r)return e;const i=r.result.gitError;if(!i)return e;if(!sh.has(i))return e;const o=n.metadata.repository;if(!o)return e;if(o instanceof Ir&&o.gitHubRepository)return e;const s=n.metadata.retryAction;return s?(await t.promptForGenericGitAuthentication(o,s),null):(log.error("No retry action provided for a git authentication error.",n),e)})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;const r=YD(n.underlyingError);if(!r)return e;const i=r.result.gitError;if(!i)return e;if(i!==Ua.ko.PushNotFastForward)return e;const o=n.metadata.repository;return o&&o instanceof Ir?(t.showPopup({type:nl.PushNeedsPull,repository:o}),null):e})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;const r=YD(n.underlyingError);if(!r||null===r.result.gitError)return e;if(!jw(r.result.gitError))return e;const{repository:i}=n.metadata;if(!(i instanceof Ir))return e;if(null===i.gitHubRepository)return e;const o=function(e){const t="remote: ";return e.split(/\r?\n/).filter((e=>e.startsWith(t))).map((e=>e.substring(t.length))).join("\n")}(r.result.stderr),s=ZD.exec(o);if(!s)return e;const a=s[1],l=i.gitHubRepository.endpoint;return t.showPopup({type:nl.SAMLReauthRequired,organizationName:a,endpoint:l,retryAction:n.metadata.retryAction}),null})),EO.registerErrorHandler((async function(e,t){const n=KD(e);return n&&n.metadata.backgroundTask?null:e})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;const r=n.metadata.repository;if(!(r&&r instanceof Ir))return e;if(r.missing)return null;const i=function(e){return function(e){return e instanceof Error&&"string"==typeof e.code}(e)?e:null}(n.underlyingError),o=YD(n.underlyingError);return o&&o.result.gitError===Ua.ko.NotAGitRepository||i&&i.code===Ua.Jb?(await t.updateRepositoryMissing(r,!0),null):e})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(null===n)return e;const r=YD(n.underlyingError);if(null===r)return e;const i=r.result.gitError;if(i!==Ua.ko.LocalChangesOverwritten&&i!==Ua.ko.MergeWithLocalChanges&&i!==Ua.ko.RebaseWithLocalChanges)return e;const{repository:o,retryAction:s}=n.metadata;if(!(o instanceof Ir))return e;if(void 0===s)return e;"checkout"===n.metadata.gitContext?.kind&&t.incrementMetric("errorWhenSwitchingBranchesWithUncommmittedChanges");const a=function(e){const t=new Array,n=e.split("\n");let r=!1;for(const e of n)if(r){if(!e.startsWith("\t"))break;t.push(e.trimLeft())}else e.startsWith("error:")&&e.includes("files would be overwritten")&&e.endsWith(":")&&(r=!0);return t}(r.result.stderr);return t.showPopup({type:nl.LocalChangesOverwritten,repository:o,retryAction:s,files:a}),null})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;const r=YD(n.underlyingError);if(!r)return e;const i=r.result.gitError;if(!i)return e;if(i!==Ua.ko.RebaseConflicts)return e;const{repository:o,gitContext:s}=n.metadata;if(null==o)return e;if(!(o instanceof Ir))return e;if(null==s)return e;if("merge"!==s.kind&&"pull"!==s.kind)return e;const{currentBranch:a}=s;return t.launchRebaseOperation(o,a),null})),EO.registerErrorHandler((async function(e,t){const n=KD(e);if(!n)return e;if(!YD(n.underlyingError))return e;const{repository:r}=n.metadata;if(!(r instanceof Ir))return e;if(!_r(r))return e;const i=QD.exec(e.message);return i?(t.showPopup({type:nl.PushRejectedDueToMissingWorkflowScope,rejectedPath:i[1],repository:r}),null):e})),EO.registerErrorHandler((async function(e,t){if(!(e instanceof ct))return e;const{retryAction:n}=e.metadata;return void 0===n?e:(t.showPopup({type:nl.DiscardChangesRetry,retryAction:n}),null)})),document.body.classList.add("platform-darwin"),EO.initializeAppFocusState(),function(e){g("notification-event",((t,n,r,i)=>{if("click"!==n)return;P();const o=Pv.get(r);if(void 0!==o)return o?.(),void Pv.delete(r);e.onNotificationEventReceived(n,r,i)}))}(vO),Iw.setDispatcher(EO),g("focus",(()=>{const{selectedState:e}=SO.getState();e&&e.type!==qe.CloningRepository&&EO.refreshRepository(e.repository),EO.setAppFocusState(!0)})),g("blur",(()=>{EO.setAccessKeyHighlightState(!1),EO.setAppFocusState(!1)})),g("url-action",((e,t)=>EO.dispatchURLAction(t))),function(e,t){["aria-label","aria-readonly"].forEach((n=>{delete e?.[n],delete t?.[n]}))}(Us.defaultProps,Us.propTypes),ve.render(be.createElement(bN,{dispatcher:EO,appStore:SO,repositoryStateManager:fO,issuesStore:lO,gitHubUserStore:sO,aheadBehindStore:bO,notificationsDebugStore:CO,startTime:rO}),document.getElementById("desktop-app-container"))})(),module.exports.renderer=r})();
//# sourceMappingURL=renderer.js.map